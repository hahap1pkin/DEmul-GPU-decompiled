/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2014 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <math.h>
#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

int sub_10001000();
int sub_10001040();
int __thiscall sub_100010A0(int this);
int sub_100010D0();
int sub_10001100();
int sub_10001143();
int sub_10001159();
int sub_1000116F();
char *sub_1000117B();
unsigned int sub_10001189();
void sub_10001194();
// int __usercall sub_100011A0@<eax>(int a1@<ebx>, int a2@<ebp>);
_UNKNOWN *sub_100011C0();
int __cdecl sub_100011D0(int a1);
// int __usercall sub_100011F0@<eax>(int a1@<ebx>, int a2@<edi>, void *a3, int a4, unsigned int a5);
int __cdecl sub_10001250(int, LPCSTR lpMultiByteStr); // idb
// int __usercall sub_10001380@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
int __thiscall sub_100013C0(int this, const void *a2);
int __thiscall sub_10001410(int this, int a2);
int __thiscall nullsub_1(_DWORD); // weak
int __thiscall sub_10001450(int this);
int __thiscall sub_10001460(int this, const void *a2, unsigned int a3);
int __thiscall sub_10001560(int this, int a2, unsigned int a3, unsigned int a4);
int __thiscall sub_10001680(int this, const void *a2, unsigned int a3);
int __thiscall sub_100017B0(int this, int a2, unsigned int a3, unsigned int a4);
int __thiscall sub_100018C0(void *this, int a2);
int __thiscall sub_10001930(int this, char a2, unsigned int a3);
int __thiscall sub_10001990(int this, const void *a2, unsigned int a3);
int __thiscall sub_10001A90(int this, int a2, unsigned int a3, unsigned int a4);
int __thiscall sub_10001BA0(int this, const void *a2, unsigned int a3);
int __thiscall sub_10001CD0(int this, int a2, unsigned int a3, unsigned int a4);
int __thiscall sub_10001DD0(void *this, int a2);
// int __userpurge sub_10001E40@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4);
// int __userpurge sub_10001EA0@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4);
int __thiscall sub_10001EF0(int this, unsigned int a2, unsigned int a3);
int __thiscall sub_10001FA0(int this, unsigned int a2, int a3);
void *__thiscall sub_10002050(int this, void *a2, unsigned int a3, int a4);
int __thiscall sub_10002090(int this, unsigned int a2, unsigned int a3);
int __thiscall sub_10002130(int this, unsigned int a2, int a3);
int __thiscall sub_100021D0(int this, unsigned int a2, int a3);
__int16 __thiscall sub_10002370(int this, int a2, unsigned int a3, unsigned __int16 a4);
unsigned int __thiscall sub_100023D0(int this, unsigned int a2, unsigned int a3);
LPVOID __stdcall sub_10002560(unsigned int a1);
LPVOID __stdcall sub_100025C0(SIZE_T a1);
_DWORD __stdcall nullsub_6(_DWORD); // weak
void *__thiscall sub_10002620(void *this);
int __thiscall sub_10002630(int this, int a2, int a3);
int __thiscall sub_100026A0(int this);
int __fastcall sub_100026C0(int a1, unsigned int a2);
// int __usercall sub_100026E0@<eax>(int a1@<ecx>, int a2@<ebx>);
int __thiscall sub_10002770(_DWORD); // weak
int __thiscall sub_100027D0(int this, unsigned int a2);
// int __usercall sub_10002870@<eax>(int a1@<ecx>, int a2@<ebx>);
int __thiscall sub_100028E0(int this, int a2);
// int __userpurge sub_100029D0@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4);
int __thiscall sub_10002A30(void *this, int a2);
// int __userpurge sub_10002AD0@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4);
int __thiscall sub_10002B30(void *this);
int __thiscall sub_10002BD0(int this);
int __fastcall sub_10002C40(int a1, unsigned int a2);
int __thiscall sub_10002CB0(void *this, int a2, int a3);
int __thiscall sub_10002D30(int this, int a2, int a3);
unsigned int __stdcall sub_10002DC0(int a1);
int __thiscall sub_10002E30(int this, int a2, int a3, int a4, int a5);
int __thiscall sub_10002E90(int this, int a2, int a3, int a4, int a5);
int __thiscall sub_10002EF0(void *this, int a2, int a3, LPVOID lpMem);
int __thiscall sub_10003050(int this, int a2, int a3, LPVOID lpMem);
int __fastcall sub_100031E0(int a1);
int __thiscall sub_10003280(int this, int a2, LPVOID lpMem);
int __fastcall sub_10003300(int a1);
int __thiscall sub_100033A0(int this, int a2, LPVOID lpMem);
int __thiscall sub_10003450(int this, int a2);
int __thiscall sub_100034C0(void *this, int a2);
LPVOID __stdcall sub_10003560(unsigned int a1);
int __thiscall sub_100035C0(int this, int a2, unsigned int a3, unsigned int a4, int a5);
// int __usercall sub_100037B0@<eax>(unsigned int a1@<edx>, unsigned int a2@<ecx>, int a3);
LPVOID __stdcall sub_100037E0(void *a1, void *a2, int a3, int a4, int a5);
LPVOID __stdcall sub_10003810(void *a1, void *a2, int a3, int a4, int a5);
// void __usercall sub_10003840(int a1@<edx>, int a2@<ecx>, int a3);
LPVOID __stdcall sub_10003870(void *a1, void *a2);
LPVOID __stdcall sub_100038A0(void *a1, void *a2);
// int __usercall sub_100038D0@<eax>(unsigned int a1@<edx>, unsigned int a2@<ecx>, int a3);
// char __usercall sub_10003920@<al>(int a1@<ecx>, __m64 a2@<mm3>, __m64 a3@<mm4>, __m64 a4@<mm6>, __m64 a5@<mm7>);
// signed int __usercall sub_10004350@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, int a5, int a6, int a7);
// signed int __usercall sub_10004390@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, int a5, char a6);
// signed int __usercall sub_100043B0@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, int a5, int a6, int a7);
// int __usercall sub_100043F0@<eax>(int a1@<ecx>, int a2@<ebx>);
void *__thiscall sub_10004470(void *this, int a2);
// int __userpurge sub_10004570@<eax>(int a1@<ecx>, int a2@<ebx>, int a3);
int __thiscall sub_10004700(int this);
int __thiscall sub_10004770(int this, int a2, int a3, int a4, int a5);
// signed int __userpurge sub_10004810@<eax>(int a1@<ecx>, char a2@<bl>, int a3, int a4, signed int a5, int a6);
char __thiscall sub_100048E0(int this, int a2, int a3, char a4, int a5);
// signed int __userpurge sub_100049A0@<eax>(int a1@<ecx>, int a2@<edi>, int a3, int a4, char a5, int a6, int a7, int a8);
signed int __thiscall sub_10004A50(void *this, int a2, int a3, char a4, int a5, int a6);
signed int __thiscall sub_10004AE0(void *this, int a2, int a3, int a4, int a5, int a6, char a7);
int __thiscall sub_10004DB0(void *this, int a2, int a3);
void *__thiscall sub_10004E20(void *this);
int __thiscall sub_10004E80(int this, int a2, LPVOID lpMem, int a4);
int __thiscall sub_10004F30(void *this, int a2, LPVOID lpMem, int a4);
void *__thiscall sub_10005020(void *this);
int __thiscall sub_10005060(void *this);
int __thiscall sub_100050E0(void *this, int a2, LPVOID lpMem);
int __thiscall sub_10005390(void *this, int a2, LPVOID lpMem);
LPVOID sub_10005650();
int __thiscall sub_10005680(void *this, int a2);
int __thiscall sub_100056E0(void *this, int a2);
int __stdcall sub_10005730(LPVOID lpMem); // idb
LPVOID sub_10005770();
int __stdcall sub_100057A0(LPVOID lpMem); // idb
int __thiscall sub_10005800(int this);
// signed int __userpurge sub_10005880@<eax>(int a1@<ecx>, int a2@<edi>, int a3);
signed int __thiscall sub_10005930(void *this, const void **a2);
// signed int __usercall sub_100059F0@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, char a5);
// int __userpurge sub_10005A20@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, const char *a4);
int __thiscall sub_10005A40(void *this, int a2, LPVOID lpMem, int a4);
int __thiscall sub_10005AB0(void **this, int a2);
LPVOID __thiscall sub_10005AF0(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10005B20(LPVOID lpMem, char a2);
int __thiscall sub_10005B50(int this, LPCSTR lpMultiByteStr, int cbMultiByte);
// int __userpurge sub_10005D40@<eax>(int a1@<ecx>, int a2@<edi>, int a3, int a4);
int __thiscall sub_10006270(int this);
bool __thiscall sub_10006280(UINT *this, LPCWSTR lpWideCharStr);
void *__thiscall sub_10006330(void *this, char a2);
int __thiscall sub_100063E0(void *this, int a2);
char __thiscall sub_100064B0(void *this, int a2, int a3);
char __thiscall sub_100065F0(int this, int a2, int a3, int a4);
char __thiscall sub_10006780(void *this, int a2, unsigned int *a3, unsigned int *a4, int a5, int a6);
char __stdcall sub_10006A50(int a1, int a2, LPCWSTR lpWideCharStr);
LPVOID __thiscall sub_10006AE0(void *this, int a2);
int __thiscall sub_10006B80(int this, int a2, int a3, int a4, LPVOID lpMem);
LPVOID __stdcall sub_10006CB0(void *a1, void *a2, int a3);
LPVOID __thiscall sub_10006CF0(void *this);
int __stdcall sub_10006D30(LPVOID lpMem); // idb
int __thiscall sub_10006D60(void *this);
bool __fastcall sub_10006D80(__int16 a1);
void *__thiscall sub_10006DA0(void *this);
char __stdcall sub_10006E00(int a1, int a2, int a3, char a4);
int __thiscall sub_10006FE0(void *this, int a2, int a3, int a4, int a5, unsigned int a6);
int __thiscall sub_100070F0(void *this, int a2, int a3, int a4, int a5, LPVOID lpMem);
LPVOID __thiscall sub_100072E0(void *this, int a2);
int __thiscall sub_10007320(int this, int a2, int a3, int a4, LPVOID lpMem);
LPVOID __thiscall sub_100073E0(void *this);
int __thiscall sub_10007420(int this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_100074A0(void *this, int a2, char a3, int a4, int a5, LPVOID lpMem);
void *__thiscall sub_10007680(int this, int a2, int a3);
int __thiscall sub_10007710(void *this, int a2, int a3);
LPVOID __thiscall sub_10007790(void *this, int a2, int a3, int a4);
int __stdcall sub_10007840(int a1, int a2, int a3, int (__thiscall *a4)(_DWORD));
int __thiscall sub_10007870(int this, int a2);
int __thiscall sub_100078D0(LPCRITICAL_SECTION lpCriticalSection); // idb
int __thiscall sub_10007900(void *this);
void *__thiscall sub_10007940(void *this, int a2, int a3);
int __thiscall sub_10007A10(void *this, int a2, int a3);
int __thiscall sub_10007B80(void *this, int a2);
int __thiscall sub_10007BE0(int this, int a2, unsigned int a3, int a4, int a5);
LPVOID __stdcall sub_10007DD0(void *a1, void *a2);
LPVOID __stdcall sub_10007E00(int a1, int a2);
LPVOID __stdcall sub_10007E20(void *a1, void *a2);
int __thiscall sub_10007E50(int this, int a2, int a3, int *a4, int a5);
int __thiscall sub_10007EB0(int this, int a2, int a3, int a4, int a5);
int __thiscall sub_10007F10(void *this, int a2, int a3, LPVOID lpMem);
int __fastcall sub_10008140(int a1);
int __thiscall sub_100081E0(void *this, int a2, char *lpMem);
// int __userpurge sub_10008270@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, LPVOID lpMem);
LPVOID __stdcall sub_100082E0(void *a1, void *a2, int a3, int *a4, int a5);
LPVOID __stdcall sub_10008330(void *a1, void *a2, int a3, int a4, int a5);
int __cdecl sub_10008360(unsigned __int64 a1);
// void __usercall sub_10008390(int a1@<ecx>, __m128 a2@<xmm0>);
void sub_10008490();
void sub_10008670();
int __thiscall sub_10008760(int this, int a2, int a3, int a4, int a5);
int __stdcall sub_100087E0(int a1, int a2);
signed int __stdcall sub_10008870(int a1);
int sub_10008900(); // weak
int __thiscall sub_10008930(int this, int a2);
LPVOID __thiscall sub_10008A00(LPVOID lpMem, int a2);
// int __userpurge sub_10008A90@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4);
int __thiscall sub_10008AE0(void *this);
// int __userpurge sub_10008B00@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4);
int __thiscall sub_10008B60(int this, unsigned int a2);
int __thiscall sub_10008BB0(_DWORD); // weak
// int __usercall sub_10008BC0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
int sub_10008C10(); // weak
// void __usercall sub_10008C30(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
int __thiscall sub_10008CA0(int this, unsigned int a2);
int __thiscall sub_10008D00(void *this, unsigned int a2);
LPVOID __stdcall sub_10008DC0(void *a1, void *a2);
int __cdecl sub_10008DF0(unsigned __int64 a1);
int __cdecl sub_10008E50(unsigned __int64 a1);
LPVOID __stdcall sub_10008EF0(void *a1, void *a2, int a3);
int __thiscall sub_10008F10(int this);
int __thiscall sub_10008FA0(int this);
// int __userpurge sub_10009010@<eax>(int a1@<ecx>, int a2@<ebx>, int a3);
// signed int __usercall sub_10009090@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, char a5);
int __thiscall sub_100090B0(void *this, int a2, int a3);
// signed int __usercall sub_10009110@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, char a5);
signed int __cdecl sub_10009130(int a1);
int __cdecl sub_10009150(int a1);
signed int __cdecl sub_10009170(int a1, int a2);
void *__thiscall sub_100091C0(void *this);
// signed int __userpurge sub_10009270@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4);
int __stdcall sub_100092D0(int); // weak
int __thiscall sub_100092F0(int this);
// signed int __usercall sub_10009360@<eax>(int a1@<edx>, int a2@<ecx>, float a3@<xmm2>);
// void __usercall sub_10009480(int a1@<ecx>, __m128 a2@<xmm0>);
char __thiscall sub_100094B0(int this, int a2);
int __thiscall sub_10009540(int this, int a2);
int __thiscall sub_100096A0(int this, int a2);
int __thiscall sub_10009740(int this, int a2);
bool __thiscall sub_10009820(int this, int a2, int a3);
bool __thiscall sub_10009880(int this, int a2, int a3);
int __thiscall sub_100098F0(int this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_10009980(int this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_10009A10(int this);
// int __userpurge sub_10009AC0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4, int a5, int a6, int a7);
// DWORD __usercall sub_10009D50@<eax>(int a1@<ecx>, int a2@<ebx>);
// int __userpurge sub_10009F40@<eax>(int a1@<ebx>, int a2);
void *__thiscall sub_1000A0E0(void *this);
int __thiscall sub_1000A280(int this);
void __thiscall sub_1000A3B0(int this, unsigned int a2);
// int __usercall sub_1000A480@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// int __usercall sub_1000A4E0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// int __usercall sub_1000A540@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// int __userpurge sub_1000A590@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, const void *a4);
// int __usercall sub_1000A5F0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
int __thiscall sub_1000A640(int this);
int __thiscall sub_1000A660(int this, int a2);
// int __userpurge sub_1000A6F0@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4);
int __thiscall sub_1000A750(void *this, int a2);
// int __usercall sub_1000A840@<eax>(int a1@<edx>, int a2@<ecx>, int a3);
// void __usercall sub_1000A880(void **a1@<edx>, int a2@<ecx>, int a3@<ebx>);
void __thiscall sub_1000A930(int this);
int __thiscall sub_1000A9C0(int this);
LPVOID __stdcall sub_1000AA60(void *a1, void *a2);
int __thiscall sub_1000AA90(int this, int a2, int a3, int a4, int a5);
LPVOID __stdcall sub_1000AAF0(void *a1, void *a2, int a3, int a4, int a5);
int __thiscall sub_1000AB30(int this);
int __thiscall sub_1000ABC0(void *this, unsigned int a2, int a3);
int __thiscall sub_1000AF90(int this, unsigned int a2, int a3);
int __thiscall sub_1000B390(void *this, int a2, int a3);
int __thiscall sub_1000B4B0(int this, int a2, int a3);
int __thiscall sub_1000B5D0(void *this);
// signed int __usercall sub_1000B6E0@<eax>(int a1@<ebp>, int a2@<edi>, int a3@<esi>, unsigned int a4);
void *__thiscall sub_1000B7E0(void *this);
// unsigned int __userpurge sub_1000B8D0@<eax>(unsigned int result@<eax>, int a2@<ecx>, int a3, int a4, unsigned int a5, unsigned int a6, int a7, int a8);
int __thiscall sub_1000BAC0(int this, unsigned int a2, int a3);
int sub_1000BCA0();
// int __usercall sub_1000BD30@<eax>(int a1@<ebx>, int a2@<edi>);
int *__stdcall sub_1000BDB0(int a1, int a2);
int __thiscall sub_1000BE50(int this, int a2, LPVOID lpMem, int a4);
int __stdcall sub_1000BEF0(int a1);
int __stdcall sub_1000BF60(int, LPVOID lpMem); // idb
int __stdcall sub_1000C1E0(int a1);
int __stdcall sub_1000C240(int a1);
// signed int __usercall sub_1000C290@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, char a5);
int *sub_1000C2B0();
LPVOID __stdcall sub_1000C2C0(void *a1, void *a2);
int __thiscall sub_1000C2F0(int this, int a2, int a3, int a4, int a5);
LPVOID __stdcall sub_1000C350(void *a1, void *a2, int a3, int a4, int a5);
// int __userpurge sub_1000C380@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4);
int __thiscall sub_1000C560(int this);
__int16 __stdcall sub_1000C610(char a1);
__int16 __stdcall sub_1000C680(unsigned __int8 a1, __int16 a2);
int __stdcall sub_1000C740(__int16 a1, unsigned __int16 a2);
int __thiscall sub_1000D840(int this, int a2, int a3, unsigned int a4);
void *__thiscall sub_1000D8D7(void *this, int a2);
int __thiscall sub_1000D8F2(int this);
void *__thiscall sub_1000D90A(void *this, int a2);
void *__thiscall sub_1000D936(void *this, int a2);
void *__thiscall sub_1000D96D(void *this, int a2);
void *__thiscall sub_1000D988(void *this, int a2);
void *__thiscall sub_1000D9A9(void *this, int a2);
void *__thiscall sub_1000D9C4(void *this, int a2);
void *__thiscall sub_1000D9E5(void *this, int a2);
void *__thiscall sub_1000DA00(void *this, int a2);
void *__thiscall sub_1000DA1B(void *this, int a2);
void *__thiscall sub_1000DA3C(void *this, int a2);
void __noreturn sub_1000DA57();
void __cdecl __noreturn sub_1000DA74(int a1);
void __cdecl __noreturn sub_1000DA94(int a1);
int __thiscall sub_1000DAB4(int this);
void *__thiscall sub_1000DAC1(void *this);
void *__thiscall sub_1000DAD8(void *this);
int __thiscall sub_1000DAEF(int this);
char *__thiscall sub_1000DAFC(LPVOID lpMem, char a2);
// int __usercall sub_1000DB84@<eax>(int a1@<ebp>);
int __thiscall sub_1000DBF9(int this);
signed int __cdecl sub_1000DC01(int a1, int a2, int a3);
char __thiscall sub_1000DCC9(int this);
int __thiscall sub_1000DCD1(void *this);
// int __usercall sub_1000DCDC@<eax>(int a1@<ebp>);
int __thiscall sub_1000DCE4(void *this);
int __stdcall sub_1000DCEF(int a1);
// BOOL __userpurge sub_1000DD05@<eax>(void *a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4);
// BOOL __userpurge sub_1000DD20@<eax>(void *a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4);
int __stdcall sub_1000DD3B(int a1, int a2);
BOOL __thiscall sub_1000DD54(void *this, int a2, int a3);
BOOL __thiscall sub_1000DD77(void *this, int a2, int a3);
int __cdecl sub_1000DD9C(int a1);
void __cdecl sub_1000DDBA(LPVOID lpMem);
int __cdecl sub_1000DDD4(int a1);
signed int __cdecl sub_1000DDF0(int a1);
int __cdecl sub_1000DE1E(_DWORD); // weak
int __cdecl sub_1000DE23(int a1);
signed int __cdecl sub_1000DE41(int a1, int a2);
int *sub_1000DE56();
void *__thiscall sub_1000DE8C(void *this, int a2, int a3, int a4);
void *__thiscall sub_1000DEFB(void *this, int a2);
void *__thiscall sub_1000DF25(void *this, int a2);
void *__thiscall sub_1000DF4F(void *this, int a2);
// int __userpurge sub_1000DF6A@<eax>(int a1@<ebp>, int a2, int a3, int a4);
BOOL __cdecl sub_1000DFB8(int a1, int a2);
LPVOID __thiscall sub_1000DFE0(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1000E003(LPVOID lpMem, char a2);
// int __usercall sub_1000E030@<eax>(int a1@<ebp>);
signed int __cdecl sub_1000E0B3(signed int a1);
void __cdecl __noreturn sub_1000E0E0(int a1);
int __thiscall sub_1000E115(void *this, int a2, int a3);
BOOL __thiscall sub_1000E127(int this, int a2, int a3);
BOOL __thiscall sub_1000E14C(void *this, int a2, int a3);
int sub_1000E17F(void); // weak
int __stdcall sub_1000E184(int a1, int a2);
int __thiscall sub_1000E1A7(int this, int a2);
int sub_1000E1D4();
int __thiscall sub_1000E1DA(int this);
void *__thiscall sub_1000E1FA(void *this);
// int __usercall sub_1000E211@<eax>(int a1@<ebp>);
int __thiscall sub_1000E286(void *this);
void __thiscall sub_1000E28E(int this);
signed __int32 __thiscall sub_1000E299(int this);
void __thiscall sub_1000E2A1(int this);
int __thiscall sub_1000E2AC(void *this);
signed int __cdecl sub_1000E2B7(int a1, int a2);
char __thiscall sub_1000E43D(int this);
BOOL __thiscall sub_1000E445(int this);
bool __thiscall sub_1000E456(void *this);
int __cdecl sub_1000E46A(DWORD DueTime); // idb
BOOL __thiscall sub_1000E476(int this, int a2);
bool __thiscall sub_1000E489(void *this, int a2);
char __thiscall sub_1000E491(void *this);
void __thiscall sub_1000E499(int this);
int __thiscall sub_1000E4A4(void *this);
int __cdecl sub_1000E4AF(int a1);
void __cdecl sub_1000E4BE(LPVOID lpMem);
int __cdecl sub_1000E4D8(int a1);
int __cdecl sub_1000E4F6(int a1);
signed int __cdecl sub_1000E501(int a1, int a2);
int __cdecl sub_1000E533(int a1, int a2);
signed int __cdecl sub_1000E554(int a1);
DWORD __cdecl sub_1000E565(int a1);
int __cdecl sub_1000E579(int a1);
void sub_1000E5A3();
HANDLE sub_1000E64F();
BOOL __cdecl sub_1000E69B(int a1, int a2, int a3, int a4);
int __cdecl sub_1000E6AB(HANDLE hHandle, int, int); // idb
// signed int __usercall sub_1000E6FA@<eax>(int a1@<ebx>, int a2@<edi>, int a3, LPCWSTR lpModuleName, int a5);
int __cdecl sub_1000E727(int a1, int a2);
signed __int64 sub_1000E769();
int __cdecl sub_1000E792(int a1, int a2, int a3);
int __cdecl sub_1000E82F(int a1, int a2);
int sub_1000E876();
int __cdecl sub_1000EC20(int a1);
int __cdecl sub_1000EC3F(int a1);
int __cdecl sub_1000EC60(int a1);
int __cdecl sub_1000EC81(LPSECURITY_ATTRIBUTES lpEventAttributes, LPCWSTR lpName, int, int); // idb
int __cdecl sub_1000ECC6(int a1, int a2, int a3, int a4, int a5, int a6);
int __cdecl sub_1000ED1C(int a1, int a2, int a3);
int __cdecl sub_1000ED47(int a1, int a2, int a3);
int sub_1000ED72();
int __cdecl sub_1000ED8C(int a1, int a2);
int sub_1000EDB0();
void __cdecl sub_1000EDCE(LPFILETIME lpSystemTimeAsFileTime);
DWORD sub_1000EDF7();
int __cdecl sub_1000EE1B(int a1);
int __cdecl sub_1000EE3A(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount, int); // idb
int __cdecl sub_1000EE72(int a1);
int __cdecl sub_1000EE91(int a1);
int __cdecl sub_1000EEB0(int a1, int a2, int a3, int a4);
int __cdecl sub_1000EEDA(int a1, int a2, int a3);
int __cdecl sub_1000EF01(int a1, int a2, int a3);
int __cdecl sub_1000EF26(int a1, int a2, int a3, int a4);
int __cdecl sub_1000EF4E(int a1);
int __cdecl sub_1000EF6D(int a1, int a2);
int __cdecl sub_1000EF91(int a1);
int __cdecl sub_1000EFB0(int a1);
int __cdecl sub_1000EFCF(int a1);
void *__thiscall sub_1000EFF4(void *this);
void sub_1000F048();
void sub_1000F054();
void __cdecl sub_1000F060(LPCRITICAL_SECTION lpCriticalSection);
int __cdecl sub_1000F06E(LPCRITICAL_SECTION lpCriticalSection); // idb
void __cdecl sub_1000F085(LPCRITICAL_SECTION lpCriticalSection);
void __cdecl sub_1000F093(LPCRITICAL_SECTION lpCriticalSection);
int __cdecl sub_1000F0A1(LPVOID lpMem); // idb
LPVOID __cdecl sub_1000F0A6(SIZE_T a1);
int __cdecl sub_1000F0D9(int a1, unsigned int a2);
char sub_1000F11D();
// char __usercall sub_1000F152@<al>(int a1@<ebx>, int a2@<edi>);
// bool __usercall sub_1000F17D@<al>(int a1@<ebx>, int a2@<edi>);
char sub_1000F18B();
char sub_1000F1AA();
int __cdecl sub_1000F1B7(int a1, int a2, int a3, void (__stdcall *a4)(_DWORD, _DWORD, _DWORD), int a5, int a6);
// int __usercall sub_1000F1EA@<eax>(int a1@<ebp>);
char sub_1000F20D();
char __cdecl sub_1000F21A(int a1);
// bool __usercall sub_1000F253@<al>(int a1@<ebx>, int a2@<edi>, int a3);
// int __usercall sub_1000F2EA@<eax>(int a1@<ebp>);
signed __int32 __cdecl sub_1000F374(char a1);
char __cdecl sub_1000F391(char a1, char a2);
int __cdecl sub_1000F3B9(int a1);
int __cdecl sub_1000F3F4(int a1);
int __cdecl sub_1000F409(LPVOID lpMem); // idb
LPVOID __cdecl sub_1000F40E(SIZE_T a1);
int __cdecl sub_1000F417(LPVOID lpMem); // idb
// int __usercall sub_1000F425@<eax>(int a1@<ebx>, int a2@<edi>);
int __cdecl sub_1000F4E5(int a1);
HANDLE sub_1000F502();
// int __usercall sub_1000F51E@<eax>(int a1@<esi>, int a2);
void __cdecl sub_1000F55D(int a1);
void sub_1000F5A3();
void sub_1000F5F0();
int __cdecl sub_1000F5FC(DWORD dwMilliseconds); // idb
LPVOID __thiscall sub_1000F661(LPVOID lpMem, char a2);
// int __userpurge sub_1000F684@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5);
// int __usercall sub_1000F6E2@<eax>(int a1@<ebp>);
// int __usercall sub_1000F6EE@<eax>(int result@<eax>, int a2@<ebx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>);
// int __userpurge sub_1000F6FE@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5);
// int __userpurge sub_1000F76B@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6);
// int __usercall sub_1000F7BA@<eax>(int a1@<ebp>);
// int __usercall sub_1000F7C0@<eax>(int result@<eax>, int a2@<ebx>, int a3@<ebp>);
// int __userpurge sub_1000F7D4@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5);
// int __usercall sub_1000F827@<eax>(int a1@<ebp>, int a2@<edi>);
// signed __int32 __usercall sub_1000F92F@<eax>(int a1@<ebp>);
// int __usercall sub_1000F939@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// signed __int32 __usercall sub_1000F9A7@<eax>(int a1@<ebp>);
// int __usercall sub_1000F9B6@<eax>(int a1@<ebp>);
signed int __stdcall sub_1000FAB2(int a1, int a2, int a3);
int __cdecl sub_1000FAFF(LPVOID lpMem); // idb
int __thiscall sub_1000FB0D(_DWORD); // weak
int __thiscall j_nullsub_1(_DWORD); // weak
int __cdecl sub_1000FB24(_DWORD); // weak
int __cdecl sub_1000FB39(_DWORD); // weak
void sub_1000FB4A();
void sub_1000FB7E();
// void __usercall sub_1000FBB5(int a1@<eax>, char a2);
unsigned int __stdcall sub_1000FBF0(unsigned __int64 a1, __int64 a2);
void *__thiscall sub_1000FC85(void *this, int a2);
int __thiscall sub_1000FCA0(int this);
void __noreturn sub_1000FCB8();
int sub_1000FCD5();
signed int sub_1000FE6F();
BOOL sub_1000FE73();
// LONG __usercall sub_1000FE7F@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3);
void sub_1000FF9A();
void __cdecl sub_1000FFB0(int a1, int a2);
int __fastcall sub_1000FFF6(_DWORD, _DWORD); // weak
int sub_1001000B();
void sub_100100A7();
PSINGLE_LIST_ENTRY sub_100100B3();
_UNKNOWN *sub_100100BF();
_UNKNOWN *sub_100100C5();
_UNKNOWN *sub_100100E2();
int sub_100100E8();
int sub_10010113();
int __cdecl sub_1001013E(struct _EXCEPTION_POINTERS *ExceptionInfo); // idb
// int __usercall sub_10010166@<eax>(int a1@<ebx>, int a2@<edi>, int a3@<esi>, char a4);
int __thiscall sub_10010261(int this);
int __thiscall sub_100102B4(int this);
int __thiscall sub_1001030A(int this, int a2, char a3, char a4);
// int __userpurge sub_1001034A@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5);
int __thiscall sub_10010400(int this, char a2);
int __thiscall sub_1001042F(int this, int a2, char a3, char a4);
int __thiscall sub_10010457(int this);
void *__thiscall sub_10010477(void *this);
int __thiscall sub_10010496(int this);
unsigned int __thiscall sub_100104C9(void *this);
int __thiscall sub_100104E3(void *this);
int __thiscall sub_10010531(void *this);
LPVOID __thiscall sub_100105B5(LPVOID lpMem, char a2);
int __thiscall sub_100105E1(int this);
int __thiscall sub_100105F9(LPVOID lpMem); // idb
int __stdcall sub_10010617(int, LPVOID lpMem, int); // idb
int __stdcall sub_10010676(int a1, int a2, int a3);
int __stdcall sub_100106A8(LPVOID lpMem, int); // idb
void __stdcall sub_100106FF(PVOID a1, BOOLEAN a2);
int sub_10010720();
int __thiscall sub_100107B6(LPVOID lpMem); // idb
char __thiscall sub_100107CF(LPVOID lpMem);
int __thiscall sub_10010808(int this, int a2);
char __thiscall sub_10010829(int this, int a2, int a3);
char __thiscall sub_10010885(int this, int a2, int a3);
char __thiscall sub_100108E0(LPVOID lpMem, int a2, int a3);
char __thiscall sub_10010926(LPVOID lpMem, int a2, int a3);
signed __int32 __thiscall sub_10010968(volatile signed __int32 *this);
int __thiscall sub_100109AF(LPVOID lpMem, int, int); // idb
int __cdecl sub_10010A5E(int a1, char a2);
int __thiscall sub_10010A98(int this);
char __thiscall sub_10010AB1(void *this);
int __thiscall sub_10010AE3(int this);
char __thiscall sub_10010AFB(void *this);
char __thiscall sub_10010B1E(void *this);
char __thiscall sub_10010B61(void *this);
signed int __thiscall sub_10010B98(int this, signed int a2);
int __thiscall sub_10010BBA(int this, int a2);
char __thiscall sub_10010BDE(void *this);
char __thiscall sub_10010C65(void *this);
char __thiscall sub_10010CDC(PVOID Parameter, DWORD DueTime);
void __thiscall sub_10010D3F(int this, char a2);
char __thiscall sub_10010D8C(void *this);
int __thiscall sub_10010E7B(_DWORD); // weak
// int __userpurge sub_10010FAC@<eax>(int a1@<ebp>, int a2);
// int __userpurge sub_10011010@<eax>(int a1@<ebp>, int a2);
// int __userpurge sub_100110EC@<eax>(int a1@<ebp>, int a2, int a3);
// int __usercall sub_100111D2@<eax>(int a1@<ebp>);
int __cdecl sub_10011490(int a1);
PVOID __thiscall sub_100114AE(PVOID Parameter, DWORD DueTime);
int __thiscall sub_10011554(int this);
LPCRITICAL_SECTION __thiscall sub_10011564(LPCRITICAL_SECTION lpCriticalSection);
int __thiscall sub_10011579(int this);
void *__thiscall sub_100115A3(void *this, int a2);
// int __userpurge sub_100115BE@<eax>(int a1@<ebp>, int a2);
void __thiscall sub_10011603(LPCRITICAL_SECTION lpCriticalSection);
char __thiscall sub_1001160B(int *this);
int __thiscall sub_10011643(void *this, unsigned int a2);
// LPVOID __usercall sub_100116CB@<eax>(int a1@<ebp>);
int __thiscall sub_100116ED(LPVOID lpMem); // idb
int __stdcall sub_1001170C(int, LPVOID lpMem, int); // idb
int __stdcall sub_10011752(LPVOID lpMem, int); // idb
// int __usercall sub_1001179E@<eax>(LPVOID lpMem@<ecx>, int a2@<ebp>);
char __thiscall sub_100117C3(void *this);
int __thiscall sub_100117F4(int this, int a2);
int __thiscall sub_1001185D(int this);
void __thiscall sub_1001188A(LPCRITICAL_SECTION lpCriticalSection);
signed __int32 __thiscall sub_10011892(void *this);
signed __int32 __thiscall sub_100118C2(int this);
BOOL __thiscall sub_100118F0(int this, LPVOID lpMem, char a3);
int __thiscall sub_10011991(void *this);
char __thiscall sub_100119A7(int this);
int sub_100119BF();
void __thiscall sub_100119D6(LPCRITICAL_SECTION lpCriticalSection);
void __thiscall sub_100119DE(volatile signed __int32 *this);
void __thiscall sub_100119E2(int this);
signed __int32 __thiscall sub_100119ED(signed __int32 this, signed __int32 a2);
char __thiscall sub_10011A3C(int this);
DWORD sub_10011A53();
int __cdecl sub_10011A59(int a1, int a2, int a3);
signed __int32 __thiscall sub_10011A92(void *this);
char __thiscall sub_10011AC2(void *this);
char __thiscall sub_10011B6D(int this);
void *__thiscall sub_10011BDE(void *this, int a2);
void __thiscall sub_10011C27(void *this);
LPVOID __thiscall sub_10011C49(LPVOID lpMem, char a2);
int sub_10011C76();
int __cdecl sub_10011D29(HANDLE TimerQueue, HANDLE Timer, ULONG DueTime, ULONG Period); // idb
int __cdecl sub_10011D40(HANDLE hObject); // idb
int __cdecl sub_10011D4E(char a1);
HANDLE __cdecl sub_10011DA5(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPTHREAD_START_ROUTINE lpStartAddress, LPVOID lpParameter, DWORD dwCreationFlags, LPDWORD lpThreadId);
int __cdecl sub_10011DC2(PHANDLE phNewTimer, HANDLE TimerQueue, WAITORTIMERCALLBACK Callback, PVOID Parameter, DWORD DueTime, DWORD Period, ULONG Flags); // idb
int __cdecl sub_10011DE2(HANDLE TimerQueue, HANDLE Timer, HANDLE CompletionEvent); // idb
int __cdecl sub_10011E11(int a1);
struct _SYSTEM_LOGICAL_PROCESSOR_INFORMATION *__cdecl sub_10011E32(PDWORD ReturnedLength);
LPVOID __cdecl sub_10011EBD(int a1, SIZE_T *a2);
ULONG sub_10011F73();
signed int __cdecl sub_10011FBA(int a1, int a2);
int __cdecl sub_10012014(HANDLE hThread); // idb
int __cdecl sub_10012022();
int __cdecl sub_10012027(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount); // idb
HANDLE __cdecl sub_1001203C(HANDLE hObject, WAITORTIMERCALLBACK Callback, PVOID Context);
int __cdecl sub_10012090(HANDLE hThread, int); // idb
int __cdecl sub_100120D3(HANDLE hThread, int nPriority); // idb
DWORD __cdecl sub_10012119(HANDLE hObjectToSignal, HANDLE hObjectToWaitOn, DWORD dwMilliseconds, BOOL bAlertable);
void __cdecl sub_10012130(DWORD dwMilliseconds);
// BOOL __stdcall SwitchToThread();
DWORD sub_10012144();
int __cdecl sub_10012185(DWORD dwTlsIndex); // idb
LPVOID __cdecl sub_10012193(DWORD dwTlsIndex);
int __cdecl sub_100121A1(DWORD dwTlsIndex, LPVOID lpTlsValue); // idb
int __cdecl sub_100121E7(HANDLE WaitHandle); // idb
DWORD __cdecl sub_100121F5(HANDLE hHandle, DWORD dwMilliseconds);
int __thiscall sub_10012208(int this, char a2);
void sub_1001223C();
int __cdecl sub_1001224A(int a1);
HMODULE __cdecl sub_10012257(int a1);
signed __int32 __cdecl sub_10012293(DWORD dwExitCode);
unsigned int sub_100122BD();
HANDLE __cdecl sub_1001230B(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPTHREAD_START_ROUTINE lpStartAddress, LPVOID lpParameter, DWORD dwCreationFlags, LPDWORD lpThreadId);
HMODULE sub_10012351();
int __cdecl sub_100123E7(unsigned int a1, int a2, int a3, char a4);
int __cdecl sub_10012448(int a1, int a2, int a3);
int __cdecl sub_10012481(int a1, int a2);
int __cdecl sub_100124B7(int a1, int a2);
signed __int32 __thiscall sub_100124EC(void *this);
signed __int32 __thiscall sub_100124FC(volatile signed __int32 *this);
int __thiscall sub_1001252F(void *this);
void sub_1001253A();
char __thiscall sub_10012543(void *this);
char __thiscall sub_10012563(volatile signed __int32 *this);
int sub_10012578();
// int __usercall sub_1001259E@<eax>(int a1@<ebp>);
int sub_100125BA(void); // weak
int __thiscall sub_100125BF(int this, int a2);
// int __usercall sub_100125E0@<eax>(int a1@<ebp>);
int __thiscall sub_100126C3(int this);
void *__thiscall sub_100126CE(void *this, int a2);
int __thiscall sub_100126E9(int this);
void *__thiscall sub_100126FA(void *this, int a2);
int sub_10012715(); // weak
void __thiscall sub_10012722(int this);
void __thiscall sub_100127F7(LPCRITICAL_SECTION *this);
char *__thiscall sub_10012838(LPVOID lpMem, char a2);
LPVOID __thiscall sub_100128C0(LPVOID lpMem, char a2);
int __thiscall sub_100128E9(int this, int a2);
unsigned int __thiscall sub_10012922(int this, unsigned int a2, unsigned int a3, unsigned int a4);
int __thiscall sub_100129F4(int this, int a2);
int __cdecl sub_10012A17(int a1);
int __cdecl sub_10012A48(int a1);
int __thiscall sub_10012A6F(int, HANDLE hThread); // idb
// int __usercall sub_10012A81@<eax>(int a1@<ebp>);
int sub_10012BA1();
int __thiscall sub_10012BBC(void *this, int a2);
int __thiscall sub_10012CCB(int this);
int __thiscall sub_10012CEE(int this);
// int __usercall sub_10012D1B@<eax>(int a1@<ebp>);
int __thiscall sub_10012E52(LPVOID lpParameter); // idb
int __stdcall nullsub_7(int, int, int, int); // weak
int __cdecl sub_10012EB8(_DWORD); // weak
_DWORD __stdcall sub_10012EBD(_DWORD); // weak
// int __usercall sub_10012F1E@<eax>(int a1@<ebp>);
// int __userpurge sub_10012FB1@<eax>(int a1@<ebp>, int a2, int a3);
int __thiscall sub_1001301B(int this);
int __thiscall sub_10013034(int this, LPVOID lpMem);
int __thiscall sub_10013070(int this);
int __thiscall sub_10013383(int this);
bool __thiscall sub_100133EF(int this);
char __thiscall sub_10013594(void *this, int a2, char a3, char a4, int a5, unsigned int a6);
void __thiscall sub_100136D6(void *this, int a2, unsigned int a3);
int __thiscall sub_1001385C(int this);
char *__thiscall sub_10013AC0(int this, int a2, int a3, int a4, char a5);
char *__thiscall sub_10013B2F(void *this, int a2, int a3, int a4, unsigned int a5);
int __stdcall sub_10013C9A(LPVOID lpThreadParameter); // idb
// int __usercall sub_10013CB3@<eax>(int a1@<ebp>);
int __thiscall sub_10013DB3(void *this, int *a2, unsigned int *a3, int a4, int a5, unsigned int a6);
int __thiscall sub_100140F7(void *this, int a2, int a3, int a4);
char __thiscall sub_10014205(void *this, int a2, int a3, int a4, unsigned int a5);
int __thiscall sub_10014310(int this, __int16 a2);
void *__thiscall sub_10014347(DWORD this);
int __thiscall sub_10014379(int this);
// int __usercall sub_1001437D@<eax>(int a1@<ebp>);
int __thiscall sub_100143C8(void *this, int a2);
int __thiscall sub_100144D8(int this);
int __thiscall sub_100144E2(int this);
int __thiscall sub_100144E9(int this);
int __thiscall sub_100144F0(int this);
int __thiscall sub_100144F7(int this);
int __thiscall sub_1001450E(int this);
int __thiscall sub_10014525(int this, int a2);
int __thiscall sub_1001454A(int this, int a2);
// int __usercall sub_1001456F@<eax>(int a1@<ebp>);
int __thiscall sub_100145BA(int this);
int __cdecl sub_100145C1();
int __cdecl sub_100145C6();
int sub_100145CB(void); // weak
signed __int32 sub_100145D0();
void *__cdecl sub_100145DD(int a1);
unsigned int __thiscall sub_10014606(int this, int a2, int a3);
int __thiscall sub_10014721(void *this, int a2, int a3);
void __thiscall sub_10014878(int this);
char __thiscall sub_100148AE(void *this, int a2, int a3, char a4);
unsigned int __thiscall sub_100148ED(void *this, int a2, unsigned __int16 a3, unsigned __int16 a4, unsigned int a5, int a6, char a7);
void *__thiscall sub_10014A0A(int this);
char __cdecl sub_10014ACC(char a1);
int __thiscall sub_10014D04(int this);
int __thiscall sub_10014D1D(void *this, int a2, int a3, char a4);
int __thiscall sub_10014E75(int this, int a2, int a3, int a4);
void *__thiscall sub_10014F3D(int this);
void __fastcall sub_10015065(int a1);
unsigned int __thiscall sub_10015138(int this);
unsigned int __thiscall sub_10015167(void *this, unsigned int a2);
unsigned int __thiscall sub_10015376(int this, int a2, unsigned int a3, unsigned int a4, unsigned int a5);
signed __int32 __thiscall sub_1001574C(int this);
int __stdcall sub_10015756(int a1, int a2);
// int __usercall sub_1001579C@<eax>(int a1@<ebp>);
unsigned int __thiscall sub_10015847(int this, int a2, unsigned int a3, int a4);
char __thiscall sub_1001589E(int this, int a2, int a3, int a4);
int __thiscall sub_10015996(int this, int a2);
// int __userpurge sub_100159CC@<eax>(int a1@<ebp>, int a2);
// int __userpurge sub_10015A43@<eax>(int a1@<ebp>, int a2, int a3);
unsigned int __thiscall sub_10015B58(void *this, int a2, unsigned int a3);
unsigned int __thiscall sub_10015B8E(void *this, int a2, unsigned int a3, int a4);
int __thiscall sub_10015D64(int this);
DWORD sub_10015DBD();
void __cdecl sub_10015EAD(int a1, unsigned int a2);
char __thiscall sub_1001606E(void *this);
int __thiscall sub_1001608D(void *this, int a2);
int __thiscall sub_1001625E(int this, int a2, char a3);
_DWORD __stdcall sub_1001632F(_DWORD); // weak
// int __userpurge sub_10016402@<eax>(int a1@<ebp>, int a2);
int __thiscall sub_10016456(int this, int a2, int a3, int a4, int a5, int a6);
// int __usercall sub_100164C3@<eax>(int a1@<ebp>);
int __cdecl sub_1001650C(int a1);
int __cdecl sub_1001652E(int a1);
int __cdecl sub_10016552(int a1);
PSLIST_HEADER __thiscall sub_10016574(PSLIST_HEADER ListHead, int a2, int a3, int a4);
void *__thiscall sub_1001666D(void *this, int a2, int a3, int a4);
void *__thiscall sub_100166A7(void *this, int a2, int a3, int a4);
int __thiscall sub_100166E1(int this);
void *__thiscall sub_100166FB(void *this, int a2);
// int __userpurge sub_10016741@<eax>(int a1@<ebp>, int a2);
void *__thiscall sub_10016A5D(void *this, int a2);
void *__thiscall sub_10016A78(void *this, int a2);
int __thiscall sub_10016A93(PSLIST_HEADER ListHead); // idb
int __thiscall sub_10016B0D(PSLIST_HEADER ListHead); // idb
int __thiscall sub_10016B84(int this);
int __thiscall sub_10016BA5(int this);
int __thiscall sub_10016BCA(void *this);
int __thiscall sub_10016C85(int this, signed int a2);
char *__thiscall sub_10016CCD(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10016D50(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10016D73(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10016D96(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10016DBB(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10016DDE(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10016E01(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10016E24(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10016E49(LPVOID lpMem, char a2);
LPVOID __thiscall sub_10016EAB(LPVOID lpMem, char a2);
int __thiscall sub_10016ECE(int this, signed __int32 a2);
signed __int32 __thiscall sub_10017031(void *this, int a2);
int __thiscall sub_10017064(void *this, int a2);
int __thiscall sub_1001709D(void *this, int a2);
// int __userpurge sub_100170CA@<eax>(int a1@<ebp>, int a2);
int __thiscall sub_100170FE(void *this, int a2, unsigned int a3);
// int __userpurge sub_100171B7@<eax>(int a1@<ebp>, int a2, int a3);
// int __userpurge sub_100171F2@<eax>(int a1@<ebp>, int a2, int a3);
int __thiscall sub_1001723E(void *this);
int __thiscall sub_10017286(void *this, int a2);
signed __int32 __thiscall sub_100172F1(int this);
int __thiscall sub_10017314(void *this);
int __thiscall sub_10017351(void *this, ULONG DueTime);
unsigned int __cdecl sub_1001740D(int a1);
unsigned int __cdecl sub_10017419(int a1);
int *sub_10017425();
// int __usercall sub_1001744B@<eax>(int a1@<ebp>);
// int __usercall sub_100174A7@<eax>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_10017556(int this);
int __thiscall sub_10017599(int this, unsigned int a2);
signed int __thiscall sub_10017631(int this);
int __thiscall sub_100176BC(void *this, int a2);
// int __usercall sub_100176F9@<eax>(int a1@<ebp>);
int __stdcall sub_10017724(int a1);
int sub_1001772D();
int __cdecl sub_1001774E(void *a1);
int __thiscall sub_10017774(int this);
signed __int32 __thiscall sub_1001778F(int this);
int __stdcall sub_100177AD(int a1);
int __stdcall sub_100177CE(int a1);
int __thiscall sub_100177EC(void *this);
int __thiscall sub_10017809(void *this);
int __thiscall sub_10017857(int this);
char __thiscall sub_100178A6(void *this, int a2, char a3);
LPVOID sub_100178E9();
int sub_100178F6();
int __thiscall sub_10017909(int this);
int __thiscall sub_10017926(int this);
int __thiscall sub_10017A4F(void *this);
int __thiscall sub_10017A8A(int this, int a2);
int __stdcall sub_10017AE5(int a1, int a2, int a3, int a4);
int __thiscall sub_10017B10(void *this, int a2, int a3, int a4);
char __thiscall sub_10017B3F(int this, int a2, int a3, int a4, int a5, int a6, int a7);
char __thiscall sub_10017C39(int this);
char __thiscall sub_10017C63(void *this);
int __thiscall sub_10017D2C(int this);
// int __userpurge sub_10017D35@<eax>(int a1@<ebp>, int a2, int a3);
// int __usercall sub_10017DEB@<eax>(int a1@<ebp>);
// int __userpurge sub_10017E87@<eax>(int a1@<ebp>, int a2);
// int __userpurge sub_10017EE7@<eax>(int a1@<ebp>, int a2);
signed __int32 __thiscall sub_10018007(int this);
signed __int32 __thiscall sub_10018014(int this);
signed __int32 sub_10018021();
int __thiscall sub_1001802E(void *this);
int __stdcall sub_10018063(int a1, int a2, int a3);
int __thiscall sub_1001809F(int this, int a2, int a3);
int __thiscall sub_100180CC(int this);
int __thiscall sub_100180ED(int this, int a2);
int __thiscall sub_1001810F(int this, int a2, int a3);
int __thiscall sub_10018144(int this);
void *__thiscall sub_10018148(int this, void *a2);
int __thiscall sub_10018165(int this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3);
int __thiscall sub_100181C4(int this);
// int __usercall sub_100181EE@<eax>(int a1@<ebp>);
int __thiscall sub_1001826E(int this, int a2);
void __thiscall sub_10018291(void *this, int a2);
void __thiscall sub_10018312(void *this, int a2);
bool __thiscall sub_10018385(int this);
int __thiscall sub_10018398(int this);
int __thiscall sub_1001839C(int this);
int __thiscall sub_100183A3(_DWORD); // weak
void __thiscall sub_10018846(int this);
// int __userpurge sub_1001884E@<eax>(int a1@<ebp>, int a2);
signed __int32 __thiscall sub_10018914(void *this);
BOOL __thiscall sub_1001894D(int this, int a2);
int __thiscall sub_1001898B(int this, int (__cdecl *a2)(_DWORD), int a3, int a4);
int __thiscall sub_100189C6(int this, int a2);
char __thiscall sub_10018A0A(int this);
char __thiscall sub_10018A27(void *this, int a2);
int __thiscall sub_10018A5D(int this, int a2, int a3);
int __stdcall sub_10018A87(int a1, int a2, int a3, int a4);
char __thiscall sub_10018A98(int this, int a2);
char __thiscall sub_10018ABA(int this, int a2);
DWORD sub_10018B44();
int sub_10018B58();
void __thiscall sub_10018B71(int this, signed __int64 a2);
int __thiscall sub_10018D1C(void *this);
int __thiscall sub_10018D92(void *this);
signed __int32 __thiscall sub_10018E27(void *this);
signed __int32 __thiscall sub_10018E3F(volatile signed __int32 *this, signed __int32 a2);
char __thiscall sub_10018E5D(void *this, int a2, char a3, int a4, int a5, int a6);
LPVOID __thiscall sub_10018EC5(int this, int a2);
signed __int32 __thiscall sub_10018EFC(int this);
signed __int32 __thiscall sub_10018F0C(int this);
int __thiscall sub_10018F77(void *this);
int __stdcall sub_10018F95(HANDLE hSourceHandle); // idb
int sub_10019036(); // weak
signed __int32 __thiscall sub_1001903B(int this);
PSINGLE_LIST_ENTRY __thiscall sub_10019053(int this, int a2);
int __thiscall sub_10019095(void *this);
PSINGLE_LIST_ENTRY __thiscall sub_100190B3(int this, int a2, char a3);
int __thiscall sub_100190FC(int this, int a2);
PSINGLE_LIST_ENTRY __thiscall sub_1001914B(int this);
int __thiscall sub_100191B6(int this, LONG lReleaseCount);
int __thiscall sub_100191D4(void *this, int a2);
char __thiscall sub_10019206(PSLIST_HEADER ListHead, int a2, int a3, char a4);
char __thiscall sub_1001930B(PSLIST_HEADER ListHead, int a2, int a3, char a4);
int __thiscall sub_10019410(void *this);
_DWORD *__thiscall sub_10019438(void *this);
// int __usercall sub_1001945C@<eax>(int a1@<ebp>);
void __thiscall sub_10019490(void *this, int a2);
char __thiscall sub_100194CC(int this, int a2);
char __thiscall sub_100194E4(int this);
int __thiscall sub_100194F2(void *this, int a2, unsigned int a3);
signed __int32 __thiscall sub_100195EE(void *this);
void *__cdecl sub_10019635(PSINGLE_LIST_ENTRY ListEntry);
LPVOID sub_10019677();
char __thiscall sub_10019693(void *this);
int __thiscall sub_100196B5(void *this, int a2, int a3);
int __thiscall sub_100196FE(void *this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3, int a4);
void __thiscall sub_10019734(int this, int a2);
int __cdecl sub_10019759(int a1, int a2);
int __cdecl sub_1001978C(int a1, int a2);
char __thiscall sub_100197C8(void *this, int a2, char a3, int a4, int a5, int a6);
char __thiscall sub_100197F0(void *this, int a2, char a3, int a4, int a5, int a6, int a7);
// void __usercall sub_10019847(int a1@<ebp>);
int __thiscall sub_100198AB(void *this, int a2, int a3, int a4);
int __thiscall sub_100199E9(void *this);
char __thiscall sub_10019A7F(int this);
char __stdcall sub_10019B96(int a1, int a2, int a3);
char __stdcall sub_10019BA5(PVOID a1, int a2);
void __stdcall Callback(PVOID a1, BOOLEAN a2);
int __thiscall sub_10019BF1(int this, int a2);
int __cdecl sub_10019C88(char a1, char a2, int a3);
int __stdcall sub_10019CF5(char a1, char a2, int a3);
int __thiscall sub_10019D1F(int this, int a2);
signed int __thiscall sub_10019D54(int this);
int __thiscall sub_10019D82(int this, int a2);
signed int __thiscall sub_10019DCA(int this);
char __thiscall sub_10019DFC(void *this, int a2);
int __thiscall sub_10019EAB(void *this, char a2);
int __thiscall sub_10019F0A(int this, int a2);
int __thiscall sub_10019F3F(int this);
int __thiscall sub_10019F50(int this);
void *__thiscall sub_10019F61(void *this, int a2);
int __thiscall sub_10019F7C(int this);
int __thiscall sub_10019F8D(int this);
int __thiscall sub_10019F9E(int this);
void *__thiscall sub_10019FAF(void *this, int a2);
int __thiscall sub_10019FCA(int this);
void *__thiscall sub_10019FDB(void *this, int a2);
int __thiscall sub_10019FF6(int this);
int __thiscall sub_1001A007(int this);
int __thiscall sub_1001A018(int this, int a2);
int __thiscall sub_1001A035(int this, int a2);
int __thiscall sub_1001A052(int this);
int __thiscall sub_1001A063(void *this);
LPVOID __thiscall sub_1001A074(LPVOID lpMem, char a2);
int __thiscall sub_1001A0A1(int this, unsigned int a2);
int __thiscall sub_1001A0DF(int this);
_DWORD __stdcall sub_1001A0F8(_DWORD, _DWORD); // weak
int __thiscall sub_1001A1DC(int this);
int __thiscall sub_1001A1F3(int this);
int __thiscall sub_1001A236(void *this);
int __thiscall sub_1001A264(int this);
int __thiscall sub_1001A27B(void **this);
void __thiscall sub_1001A2B3(void *this);
BOOL __thiscall sub_1001A2EE(int this, int a2);
int __thiscall sub_1001A312(int this, signed int a2);
LPVOID __thiscall sub_1001A348(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1001A36B(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1001A390(LPVOID lpMem, char a2);
int __thiscall sub_1001A3BC(int this, signed __int32 a2);
int __thiscall sub_1001A51F(void *this, int a2, char a3);
int __thiscall sub_1001A549(void *this, int a2);
// int __userpurge sub_1001A578@<eax>(int a1@<ebp>, int a2);
void __thiscall sub_1001A5AC(int this, signed __int32 a2);
BOOL __thiscall sub_1001A613(int this, signed __int32 a2);
// int __userpurge sub_1001A643@<eax>(int a1@<ebp>, int a2);
char __cdecl sub_1001A733(int a1);
char __thiscall sub_1001A73F(int this, int a2);
// int __usercall sub_1001A786@<eax>(int a1@<ecx>, int a2@<ebp>);
void __thiscall sub_1001A7B6(void *this);
int sub_1001A7F7();
// int __usercall sub_1001A807@<eax>(int a1@<ebp>);
LPVOID __stdcall sub_1001A886(int a1);
int __thiscall sub_1001A8A8(int this);
// void __usercall sub_1001A9D7(int a1@<ebp>);
// void __usercall sub_1001A9DF(int a1@<ebp>);
// void __usercall sub_1001A9EB(int a1@<eax>, int a2@<ebp>);
// void __usercall sub_1001A9F6(int a1@<ebp>, int a2@<esi>);
int __thiscall sub_1001AA05(int this);
int sub_1001AA0D();
int __thiscall sub_1001AA10(int this);
int __thiscall sub_1001AA1B(int this);
int __thiscall sub_1001AA23(int this);
char __thiscall sub_1001AA2E(unsigned int *this, int a2, int a3);
int __thiscall sub_1001AA70(int this, int a2);
signed int __thiscall sub_1001AAB8(int this);
int __thiscall sub_1001AACC(int this);
int __thiscall sub_1001AAD0(int this);
int __thiscall sub_1001AAD4(int this);
int __thiscall sub_1001AAE5(int this);
int __cdecl sub_1001AB0C(int a1, unsigned int a2);
bool __thiscall sub_1001AB38(int this, int a2, int a3);
int __thiscall sub_1001AC22(int this, int a2);
int __thiscall sub_1001AC45(int this, int a2);
// int __usercall sub_1001AC76@<eax>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_1001ACD0(int this);
int __thiscall sub_1001ACEE(LPVOID lpTlsValue, int); // idb
char __thiscall sub_1001AD09(int this);
void __thiscall sub_1001AD92(int this);
// int __usercall sub_1001AD97@<eax>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_1001ADEE(int this, int a2, int a3);
int __thiscall sub_1001AE36(void *this, int a2);
char __thiscall sub_1001AE64(PSLIST_HEADER ListHead, int a2, int a3, char a4);
// int __userpurge sub_1001AF61@<eax>(int a1@<ebp>, int a2);
int __stdcall sub_1001AF95(int a1);
int __thiscall sub_1001AFAB(LPVOID lpTlsValue); // idb
int sub_1001AFBA(void); // weak
char __thiscall sub_1001AFBF(void *this);
int __thiscall sub_1001B043(int this, int (__cdecl *a1)(_DWORD, _DWORD), int a2, int (__cdecl *a3)(_DWORD, _DWORD));
int __cdecl sub_1001B0E8(char a1, char a2, int a3, int a4);
int __stdcall sub_1001B15B(char a1, char a2, int a3, int a4);
int __thiscall sub_1001B188(int this, int a2);
int __thiscall sub_1001B1EB(int this, int a2);
void __thiscall sub_1001B1FA(int this);
int __thiscall sub_1001B247(int this);
int __cdecl sub_1001B25B(volatile signed __int32 *a1, signed __int32 a2, int a3);
int __thiscall sub_1001B282(void *this, int *a2, int a3);
int __thiscall sub_1001B2AE(int this, int a2, int a3, int a4);
int __thiscall sub_1001B2DB(int this, int a2);
void *__thiscall sub_1001B326(void *this, int a2);
int __thiscall sub_1001B341(int this);
// int __userpurge sub_1001B352@<eax>(int a1@<ebp>, int a2, int a3);
void *__thiscall sub_1001B443(void *this, int a2);
int __thiscall sub_1001B46E(int *this);
int __thiscall sub_1001B4A7(int this);
int __thiscall sub_1001B4E6(int this);
int __thiscall sub_1001B4F6(void *this);
int __thiscall sub_1001B51B(int this);
LPVOID __thiscall sub_1001B601(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1001B62D(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1001B64F(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1001B671(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1001B694(void *this, char a2, char a3);
int __thiscall sub_1001B6B7(unsigned int *this, int a2, int a3);
int __thiscall sub_1001B6ED(int this, char a2);
LPVOID __thiscall sub_1001B751(unsigned int *this, int a2, int a3);
int __thiscall sub_1001B7BB(void *this, char a2);
int __thiscall sub_1001B8EA(void *this, int a2);
// int __usercall sub_1001B934@<eax>(int a1@<ebp>);
signed int __cdecl sub_1001B9C0(volatile signed __int32 *a1, signed __int32 *a2, signed __int32 a3, unsigned int a4, unsigned int a5);
// char __usercall sub_1001BA2F@<al>(int a1@<ecx>, int a2@<ebp>);
char __thiscall sub_1001BA80(void *this, int a2, int a3);
int __stdcall sub_1001BB21(int a1, int a2);
int __thiscall sub_1001BB40(int this, int a2);
// int __userpurge sub_1001BBE5@<eax>(int a1@<ebp>, int a2, int a3);
int __cdecl sub_1001BC70(int a1);
bool __cdecl sub_1001BC8F(int a1, int a2);
signed int __cdecl sub_1001BCA2(volatile signed __int32 *a1, signed __int32 *a2, signed __int32 a3);
signed __int32 __thiscall sub_1001BCC9(int this);
// int __userpurge sub_1001BCF9@<eax>(int a1@<ebp>, int a2);
int __thiscall sub_1001BDC2(void *this);
int __thiscall sub_1001BDDE(int this);
_DWORD __stdcall sub_1001BDF1(_DWORD); // weak
int __thiscall sub_1001BEDF(void *this);
int __thiscall sub_1001BEE3(int this, int a2);
char __thiscall sub_1001BF14(int this);
// int __usercall sub_1001BF6A@<eax>(int a1@<ebp>);
// int __usercall sub_1001BF9F@<eax>(int a1@<ebp>);
BOOL __thiscall sub_1001C026(int this);
BOOL __thiscall sub_1001C039(int this);
BOOL __thiscall sub_1001C04C(int this);
int __thiscall sub_1001C05A(int this);
BOOL __cdecl sub_1001C063(int a1);
int __cdecl sub_1001C07B(unsigned int a1, unsigned int a2);
int __thiscall sub_1001C0A0(void *this, int a2);
int __thiscall sub_1001C0F1(int this);
int __stdcall sub_1001C0F5(int a1, int a2, int a3);
// int __userpurge sub_1001C134@<eax>(int a1@<ebp>, int a2);
signed __int32 __thiscall sub_1001C1A6(void *this);
signed __int32 __thiscall sub_1001C1CC(LPVOID lpMem);
int __thiscall sub_1001C206(void *this, int a2);
char __thiscall sub_1001C303(int this, int a2);
char __cdecl sub_1001C33D(int a1, int a2);
bool __thiscall sub_1001C356(int this, char a2);
LPVOID __thiscall sub_1001C3AA(void *this, int a2);
void __thiscall sub_1001C3E8(int this, int a2);
int __cdecl sub_1001C42C(int a1, int a2, char a3);
void *__thiscall sub_1001C44C(void *this, const void **a2);
void *__thiscall sub_1001C472(void *this, int a2);
void *__thiscall sub_1001C48D(void *this, int a2);
void *__thiscall sub_1001C4A8(void *this, int a2);
int __thiscall sub_1001C4C3(LPVOID *this);
void **__thiscall sub_1001C4CF(void **this, const void **a2);
int __thiscall sub_1001C4ED(void *this, unsigned int a2);
bool __cdecl sub_1001C525(unsigned int a1, unsigned int a2);
// int __userpurge sub_1001C543@<eax>(int a1@<ebp>, int a2, int a3);
// void __userpurge sub_1001C61C(int a1@<ebp>, int a2, int a3);
int __thiscall sub_1001C62E(void *this);
char *__cdecl sub_1001C676(unsigned int a1);
// bool __usercall sub_1001C68D@<al>(int a1@<ebx>, int a2@<edi>, int a3, signed int a4);
int __thiscall sub_1001C76D(void *this);
int __thiscall sub_1001C7A9(int this, int a2, int a3, int a4);
int __thiscall sub_1001C80B(int this, int a2, int a3);
// int __usercall sub_1001C85F@<eax>(int a1@<ecx>, int a2@<ebp>);
// void __usercall sub_1001C871(LPVOID lpMem@<ecx>, int a2@<ebp>);
int __thiscall sub_1001C8DD(int this);
int __thiscall sub_1001C8E1(LPVOID lpTlsValue); // idb
int __thiscall sub_1001C9AE(int this, int a2);
int __thiscall sub_1001CA0F(int this);
int __thiscall sub_1001CA2B(LPVOID lpTlsValue); // idb
signed int __cdecl sub_1001CA4E(signed int a1);
double __cdecl sub_1001CA66(double a1);
int __fastcall sub_1001CAA0(int a1, int a2, int a3, unsigned int a4, int a5);
int __fastcall sub_1001CB2F(int a1, int a2, double a3, int a4);
double __stdcall sub_1001CB52(unsigned int a1, unsigned int a2, int a3, int a4);
double __fastcall sub_1001CB8F(int a1, int a2, int a3, int a4);
double __thiscall sub_1001CC4D(int this);
int __fastcall sub_1001CC86(int a1, int a2, int a3);
int __thiscall sub_1001CCCB(int this);
int __fastcall sub_1001CD11(int a1, int a2, int a3);
int __thiscall sub_1001CD3C(int this);
bool __stdcall sub_1001CD55(int a1);
double __fastcall sub_1001CD85(int a1);
int __thiscall sub_1001CDA7(int this, unsigned int a2);
int __fastcall sub_1001CE79(int a1, int a2, int a3, unsigned int a4, int a5, int a6);
double __fastcall sub_1001D03B(int a1);
_DWORD __stdcall sub_1001D089(_DWORD, _DWORD, _DWORD); // weak
void __thiscall sub_1001D2E3(int this);
char *__thiscall sub_1001D342(int this, int a2, int a3, char a4);
// int __userpurge sub_1001D414@<eax>(int a1@<ebp>, int a2);
int __thiscall sub_1001D45D(int this, int a2);
int __thiscall sub_1001D496(void *this, int a2);
_DWORD __stdcall sub_1001D4A5(_DWORD, _DWORD); // weak
int __thiscall sub_1001D551(void *this, int a2);
int __thiscall sub_1001D5C1(void *this, int a2);
int __thiscall sub_1001D61D(int this);
// int __userpurge sub_1001D6EB@<eax>(int a1@<ebp>, int a2, int a3);
// int __userpurge sub_1001D7EC@<eax>(int a1@<ebp>, int a2, int a3);
BOOL __thiscall sub_1001D824(int this, int a2);
int __thiscall sub_1001D86E(void *this, int a2, int a3, char a4);
int __thiscall sub_1001D8E9(LPVOID lpMem); // idb
// int __userpurge sub_1001D904@<eax>(int a1@<ebp>, int a2);
_DWORD __stdcall sub_1001D989(_DWORD); // weak
int __thiscall sub_1001DA12(int this);
LPVOID __thiscall sub_1001DA2E(int this);
int __thiscall sub_1001DA4B(int this, int a2);
// int __userpurge sub_1001DA98@<eax>(int a1@<ebp>, int a2);
int __thiscall sub_1001DAE6(int this, unsigned int a2, int a3, char a4);
signed __int32 __thiscall sub_1001DDC5(int this, int a2);
int __thiscall sub_1001DE13(int this, int a2, int a3, char a4);
int __thiscall sub_1001DE9B(int this);
int __thiscall sub_1001DF46(int this, int a2);
// int __userpurge sub_1001DF7C@<eax>(int a1@<ebp>, int a2, int a3);
int __thiscall sub_1001E066(void *this, LPVOID lpMem);
int __thiscall sub_1001E092(int this, int a2);
_DWORD __stdcall sub_1001E0A5(_DWORD, _DWORD); // weak
int __thiscall sub_1001E189(int this);
// int __usercall sub_1001E193@<eax>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_1001E19D(int this, int a2, int a3);
int __stdcall sub_1001E1D0(int a1);
signed __int32 sub_1001E21A();
int __cdecl sub_1001E2CB(int); // weak
int sub_1001E2EC();
int __thiscall sub_1001E306(int this, int a2);
int __thiscall sub_1001E341(int this, int a2, int a3);
int __thiscall sub_1001E378(int this, int a2);
// int __usercall sub_1001E3A4@<eax>(int a1@<ebp>);
void __thiscall sub_1001E3D8(void *this);
LPVOID __thiscall sub_1001E44F(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1001E472(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1001E49A(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1001E4BD(LPVOID lpMem, char a2);
// int __userpurge sub_1001E4E0@<eax>(int a1@<ebp>, int a2);
int __cdecl sub_1001E515(int a1);
int __thiscall sub_1001E53F(int this);
// int __usercall sub_1001E543@<eax>(int a1@<ebp>);
int __stdcall sub_1001E58B(int, int nPriority); // idb
int __thiscall sub_1001E5A3(void *this, int a2);
void __thiscall sub_1001E605(int this, int a2);
signed __int32 __thiscall sub_1001E6A8(int this);
signed __int32 __thiscall sub_1001E6B2(void *this);
int __thiscall sub_1001E6DE(void *this, unsigned int a2, int a3);
BOOL __stdcall sub_1001E760(int a1);
PSINGLE_LIST_ENTRY __thiscall sub_1001E76F(void *this);
int __thiscall sub_1001E7DC(int this);
void sub_1001E7FC();
void *__thiscall sub_1001E818(void *this);
signed int __stdcall sub_1001E8E4(int a1, int a2, int a3, int a4);
int __thiscall sub_1001E9AB(int this, int a2, int a3);
char __thiscall sub_1001E9E7(int this, int a2, int a3);
int __thiscall sub_1001EA23(int this, int a2);
int __thiscall sub_1001EA5F(void *this, int a2, int a3, int a4, int a5, int a6);
int __thiscall sub_1001EAA2(int this, int a2, int a3, int a4);
int __thiscall sub_1001EADA(int this, int a2, int a3);
int sub_1001EB7E();
int __cdecl sub_1001EBC1(int a1);
int __thiscall sub_1001EBE2(int this, int a2);
int __thiscall sub_1001EC52(int this);
void *__thiscall sub_1001EC5C(void *this);
int __thiscall sub_1001ECBE(int this);
int __thiscall sub_1001ECD5(int this);
LPVOID __thiscall sub_1001ED37(LPVOID lpMem, char a2);
bool __thiscall sub_1001ED5C(int this, unsigned int a2);
int __thiscall sub_1001ED93(void *this, int a2);
bool __thiscall sub_1001EDDB(int this);
char __cdecl sub_1001EE1F(int a1);
char __thiscall sub_1001EE2B(int this, int a2);
char __thiscall sub_1001EE72(int this, int a2, int a3, char a4);
signed __int32 __thiscall sub_1001EF07(int this, int a2);
int __thiscall sub_1001EF2C(int this, int a2);
int __stdcall sub_1001EF4D(int a1);
int __thiscall sub_1001EF6E(int this);
int __thiscall sub_1001EF89(int this, int a2);
char __thiscall sub_1001EFAA(int this, signed __int32 a2, int a3, int a4);
char __thiscall sub_1001F039(int this, int a2);
// int __usercall sub_1001F064@<eax>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_1001F07D(int this, char a2);
int __thiscall sub_1001F09D(int this, int a2, int a3);
signed __int32 __thiscall sub_1001F215(int this, unsigned int a2);
signed __int32 __thiscall sub_1001F255(int this, unsigned int a2);
int __thiscall sub_1001F29B(int this, signed __int32 a2, char a3);
char __thiscall sub_1001F30B(int this);
int __thiscall sub_1001F36B(int this);
signed int __thiscall sub_1001F39D(int this);
char __thiscall sub_1001F3EB(PSLIST_HEADER ListHead, int a2, int a3, char a4);
char __thiscall sub_1001F4ED(int this);
char __thiscall sub_1001F64D(int this);
int __thiscall sub_1001F661(int this, int a2);
int __thiscall sub_1001F69B(int this, unsigned int a2);
int __thiscall sub_1001F6E5(int this, unsigned int a2);
char __thiscall sub_1001F72F(int this, int a2, int a3);
int __cdecl sub_1001F7CE(LPVOID lpMem); // idb
int __cdecl sub_1001F7ED(char a1, char a2, int a3, int a4);
int __stdcall sub_1001F860(int a1);
int __stdcall sub_1001F86A(char a1, char a2, int a3, int a4);
char __thiscall sub_1001F897(int this, char a2, char a3);
int __thiscall sub_1001F8F7(int this);
// int __userpurge sub_1001F914@<eax>(int a1@<ebp>, int a2, int a3, int a4);
int __thiscall sub_1001F991(PSLIST_HEADER ListHead); // idb
int __thiscall sub_1001FA08(int this);
int __thiscall sub_1001FA31(int this, signed __int32 a2);
int __thiscall sub_1001FB94(void *this, int a2, char a3);
char __thiscall sub_1001FC9B(void *this);
int __thiscall sub_1001FCF1(int this, int a2);
int __thiscall sub_1001FD30(void *this, int a2);
char __thiscall sub_1001FD8D(void *this, int a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_1001FDFD(void *this, int a2);
_DWORD __stdcall sub_1001FE30(_DWORD); // weak
signed __int32 __thiscall sub_1001FE73(void *this, char a2);
int __thiscall sub_1001FEF1(int this);
void __thiscall sub_1001FF06(void *this);
int __thiscall sub_1001FF5A(int this);
int __thiscall sub_1001FF73(void *this, int a2);
char __thiscall sub_1001FFC3(int this, int a2);
char __thiscall sub_1001FFED(void *this, int a2);
int __cdecl sub_10020024(int a1);
int __cdecl sub_10020079(int a1);
void *__thiscall sub_100200B2(void *this, int a2);
void *__thiscall sub_1002012B(void *this, int a2);
void *__thiscall sub_10020146(void *this, int a2);
void *__thiscall sub_10020161(void *this, int a2);
void *__thiscall sub_1002017C(void *this, int a2);
int __thiscall sub_10020197(int this);
int __thiscall sub_100201E5(void *this);
void *__thiscall sub_1002021D(void *this, char a2);
int __thiscall sub_1002024A(void *this, char a2, int a3, int a4, int a5);
// int __userpurge sub_100203D7@<eax>(int a1@<ebp>, int a2);
int __thiscall sub_1002042B(void *this);
char __thiscall sub_10020565(int this);
// void __usercall sub_100205D9(int a1@<ecx>, int a2@<ebp>);
// int __usercall sub_100205F1@<eax>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_100207A1(int this, int a2);
// char __usercall sub_100207DE@<al>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_10020851(int this, int a2, int a3);
int __thiscall sub_10020980(void *this, int a2);
signed __int32 __thiscall sub_100209AC(int this, signed __int32 a2);
int __thiscall sub_100209DA(int this);
int __thiscall sub_100209DE(void *this);
int __thiscall sub_100209E6(int this);
int __thiscall sub_100209ED(int this);
signed int __thiscall sub_10020A05(void *this);
_DWORD __stdcall sub_10020A34(_DWORD, _DWORD, _DWORD); // weak
BOOL __thiscall sub_10020BAC(int this);
// char __usercall sub_10020BB8@<al>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_10020C16(void *this);
void __thiscall sub_10020D1A(int this, char a2);
int __thiscall sub_10020DA1(int this, int a2, int a3, char a4);
int __thiscall sub_10020DFA(int this, int a2);
int __thiscall sub_10020E11(int this, int a2);
void __thiscall sub_10020E52(int this);
int __thiscall sub_10020EBC(void *this);
// void __usercall sub_10020EDB(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_10020EFE(int this, int a2, int a3, int a4);
int __thiscall sub_10020F25(int this, int a2);
char __thiscall sub_10020F5A(int this);
char __cdecl sub_10020F87(int a1, int a2);
int __thiscall sub_10020FB6(void *this);
void __thiscall sub_10021071(int this, int a2, char a3);
char __thiscall sub_100210BC(int this, int a2);
int __thiscall sub_100211DB(int this, int a2, int a3);
int __fastcall sub_10021314(int a1);
int __thiscall sub_100213D3(int this);
char __thiscall sub_100214CF(int this, int a2);
int __thiscall sub_1002152B(void *this);
// int __userpurge sub_100216AF@<eax>(int a1@<ebp>, int a2, int a3);
int __thiscall sub_10021738(PSLIST_HEADER ListHead); // idb
int __thiscall sub_100217AF(int this);
int __thiscall sub_100217C7(int this);
char __cdecl sub_100217F9(int a1);
int __stdcall sub_10021805(int a1);
char __thiscall sub_10021826(PSLIST_HEADER ListHead, int a2, int a3, char a4);
char __thiscall sub_10021928(void *this, int a2);
// int __userpurge sub_10021951@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5);
// int __userpurge sub_100219C8@<eax>(int a1@<ebp>, int a2, int a3);
// int __userpurge sub_10021A21@<eax>(int a1@<ebp>, int a2, int a3, int a4);
// int __userpurge sub_10021AE1@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5);
int __thiscall sub_10021B4D(PSLIST_HEADER ListHead); // idb
int __thiscall sub_10021BC7(PSLIST_HEADER ListHead); // idb
int __thiscall sub_10021C43(int this);
int __thiscall sub_10021CA9(signed __int32 this);
int __thiscall sub_10021CF7(int this, int a2);
LPVOID __thiscall sub_10021D21(LPVOID lpMem, char a2);
int __thiscall sub_10021D46(int this, signed __int32 a2);
int __thiscall sub_10021EA8(int this, signed __int32 a2);
int __thiscall sub_1002200A(int this, signed __int32 a2);
int __thiscall sub_10022170(void *this, int a2, char a3, int a4, int a5, int a6);
char __cdecl sub_1002227A(int a1);
signed __int32 __thiscall sub_10022286(int this, int a2, signed __int32 a3);
int __thiscall sub_100222AB(void *this, int a2, int a3);
int __stdcall sub_1002235A(int a1);
// int __usercall sub_1002237B@<eax>(int a1@<ebp>);
char __thiscall sub_100223F1(void *this, int a2);
int __thiscall sub_100224E9(int this, int a2);
_DWORD __stdcall sub_10022528(_DWORD); // weak
int __thiscall sub_10022563(void *this, int a2, int a3);
int __thiscall sub_100225B9(int this);
int __thiscall sub_10022620(int this, int a2, char a3);
int __thiscall sub_10022653(_DWORD); // weak
// int __userpurge sub_10022663@<eax>(int a1@<ebp>, int a2);
bool __thiscall sub_100226AD(int this);
BOOL __thiscall sub_100226B5(void *this);
int __thiscall sub_100226C1(int this, int a2);
int __thiscall sub_100226EA(int this, int a2);
int __thiscall sub_100226FD(int this, int a2, int a3, int a4);
BOOL __thiscall sub_10022781(int this);
int __thiscall sub_10022797(int this, unsigned int a2, char a3);
int __thiscall sub_100227E1(int this, int a2, char a3);
int __thiscall sub_100228C4(void *this);
int __thiscall sub_1002291D(_DWORD); // weak
int __thiscall sub_10022950(void *this, int a2);
PSINGLE_LIST_ENTRY __thiscall sub_10022969(void *this, int a2);
char __thiscall sub_1002298F(PSLIST_HEADER ListHead, int a2, int a3, char a4);
char __thiscall sub_10022A8C(int this);
char __thiscall sub_10022AAF(int this);
signed __int32 __thiscall sub_10022AEE(int this, int a2);
char __thiscall sub_10022B15(int this, int a2);
int __thiscall sub_10022B57(void *this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3, int a4);
int __thiscall sub_10022B86(void *this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3);
int __thiscall sub_10022BAD(int this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3);
int __thiscall sub_10022CE1(int this, unsigned int a2);
int __thiscall sub_10022D07(int this, char a2);
int __thiscall sub_10022EB8(int *this, int a2, int a3);
int __thiscall sub_10022F0A(int this, int a2, int a3);
volatile signed __int32 *__thiscall sub_10022F99(int this, int a2);
int __thiscall sub_10022FD1(void *this, int a2, int a3, int a4, int a5);
int __thiscall sub_10023008(void *this, int a2, int a3);
signed __int32 __thiscall sub_10023020(signed __int32 this);
int __thiscall sub_10023053(void *this, int a2);
signed __int32 __thiscall sub_10023093(int this, int a2, signed __int32 a3);
int __cdecl sub_100230B9(int a1);
int __thiscall sub_100230C8(int this, int a2, int a3);
int __thiscall sub_100230F9(int this, int a2, char a3);
// int __userpurge sub_10023164@<eax>(int a1@<ebp>, int a2, int a3);
int __thiscall sub_100231FD(void *this);
LPVOID __thiscall sub_10023244(LPVOID lpMem, char a2);
int __thiscall sub_10023269(int this, int a2);
DWORD __thiscall sub_1002328A(int this);
// int __usercall sub_100232D3@<eax>(int a1@<ecx>, int a2@<ebp>);
char __thiscall sub_1002332B(int this, int a2);
// int __usercall sub_10023350@<eax>(int a1@<ecx>, int a2@<ebp>);
signed int sub_10023372();
int __stdcall sub_10023376(int a1, int a2, int a3, int a4);
char __stdcall sub_10023398(PVOID a1, int a2);
BOOL __thiscall sub_100233BB(int this);
void __thiscall sub_100233C7(int this, char a2);
// int __userpurge sub_10023400@<eax>(PVOID Context@<ecx>, int a2@<edi>, char a3);
// BOOL __usercall sub_100234C7@<eax>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_100234E9(void *this);
signed __int32 __thiscall sub_10023500(void *this);
BOOL __thiscall sub_10023582(int this);
void *__thiscall sub_100235B1(void *this, int a2);
void *__thiscall sub_100235D9(void *this, int a2);
int __thiscall sub_1002360C(void *this);
void __stdcall sub_10023620(int a1);
void *__thiscall sub_10023628(void *this, char a2);
int __thiscall sub_10023687(int this, int a2, unsigned int a3);
// int __usercall sub_10023693@<eax>(int a1@<ebp>);
// int __usercall sub_100236C6@<eax>(int a1@<ebp>);
// int __userpurge sub_10023704@<eax>(int a1@<ebp>, int a2, int a3);
int __thiscall sub_1002373C(void *this);
int __thiscall sub_10023740(int this);
void *__thiscall sub_10023758(void *this, void *a2);
void *__thiscall sub_10023774(void *this, void *a2);
int __thiscall sub_1002377F(int this, int a2, unsigned int a3);
int __thiscall sub_1002378B(int this, int a2, int a3, int a4);
DWORD sub_10023797();
BOOL sub_100237DD();
int __thiscall sub_100237F1(int this, int a2);
int __cdecl sub_10023809(int a1);
signed __int32 __thiscall sub_10023823(int this, int a2);
signed int __thiscall sub_10023849(int this, int a2);
char __thiscall sub_10023871(int this);
signed __int32 __thiscall sub_10023899(int this);
// int __usercall sub_100238F7@<eax>(int a1@<ebp>);
void __thiscall __noreturn sub_10023961(void *this);
int __cdecl sub_10023968(int); // weak
// void __usercall __noreturn sub_10023979(int a1@<ebp>);
int __thiscall sub_10023992(int this, int a2);
// int __usercall sub_100239FB@<eax>(int a1@<ebp>);
int __thiscall sub_10023A45(int this, int a2);
int __thiscall sub_10023A69(int this);
int __thiscall sub_10023AA3(int this, int a2);
int __cdecl sub_10023AC7(int a1);
signed __int32 __cdecl sub_10023AD8(int a1);
_DWORD __stdcall sub_10023AE9(_DWORD); // weak
int __cdecl sub_10023BDE(int (__cdecl *a1)(_DWORD, _DWORD), int a2, int (__cdecl *a3)(_DWORD, _DWORD));
// int __usercall sub_10023BEA@<eax>(int a1@<ebp>);
// int __usercall sub_10023C32@<eax>(int a1@<ebp>);
// int __usercall sub_10023C38@<eax>(int a1@<esi>);
signed __int32 __thiscall sub_10023C50(void *this, char a2);
signed __int32 __thiscall sub_10023CCE(void *this, char a2, int a3);
signed __int32 __thiscall sub_10023D5C(int this, char a2);
int __cdecl sub_10023E1F(int a1);
int __cdecl sub_10023E46(int a1);
int __thiscall sub_10023E63(int this, int a2);
_DWORD __stdcall loc_10023E7B(_DWORD); // weak
char __thiscall sub_10023F1F(int this, char a2);
int sub_10023F2C(); // weak
int __thiscall sub_10024076(int this, int a2, int a3, int a4);
LPVOID __thiscall sub_100240C2(LPVOID lpMem, char a2);
// int __usercall sub_100240EC@<eax>(int a1@<ecx>, int a2@<ebp>);
int __thiscall sub_100240F4(int this);
int __thiscall sub_100240F8(int this);
int __thiscall sub_100240FC(int this);
int __thiscall sub_10024100(int this, int a2);
signed __int32 __thiscall sub_1002415A(int this);
signed __int32 __thiscall sub_10024172(int this);
BOOL __thiscall sub_1002417F(int this);
int __thiscall sub_1002418C(int this, int a2, int a3, int a4);
BOOL __thiscall sub_100241C1(int this, int a2);
LPVOID __thiscall sub_100241E2(LPVOID lpMem, char a2);
int __thiscall sub_1002420C(void *this);
int __thiscall sub_1002423D(void *this, signed __int32 a2);
int __thiscall sub_100242FF(void *this, int a2);
char __thiscall sub_10024367(int this, int a2);
int __thiscall sub_1002440B(int this);
void *__thiscall sub_10024458(int this, int a2);
int __thiscall sub_100244D9(int this, int a2);
int __thiscall sub_10024544(void *this, int a2, __int16 a3, int a4);
char __thiscall sub_1002457A(void *this);
int __thiscall sub_100245AA(int this, int a2);
void __fastcall sub_100245CC(int a1);
int __thiscall sub_1002466D(int this);
int __thiscall sub_1002468A(int this, int a2);
int __thiscall sub_100246E1(void *this, int a2, int a3);
LPVOID __thiscall sub_10024796(int this, int a2, int a3);
void *__thiscall sub_1002486B(void *this, int a2);
int __thiscall sub_10024886(int this);
LPVOID __thiscall sub_100248E8(LPVOID lpMem, char a2);
BOOL __thiscall sub_1002490A(int this);
int __thiscall sub_1002491B(int this);
BOOL __thiscall sub_1002491F(int this);
int __thiscall sub_10024929(int this, int nPriority);
char __thiscall sub_10024941(int this);
signed __int32 __thiscall sub_1002496E(int this);
int __stdcall sub_1002498A(LPVOID lpThreadParameter); // idb
int __thiscall sub_100249D8(int this, int a2, int a3, int a4, int a5);
BOOL __thiscall sub_100249FD(int this, char a2);
char __thiscall sub_10024A28(int this, int a2);
bool __thiscall sub_10024A73(int this, int a2);
int __thiscall sub_10024ABF(int this, int a2);
signed __int32 __thiscall sub_10024AE5(int this, int a2);
int __thiscall sub_10024B36(void *this);
int __thiscall sub_10024B83(int this, int a2);
char __thiscall sub_10024BBD(int this, __int64 a2);
char __thiscall sub_10024BF5(int this, int a2, int a3, char a4);
int __thiscall sub_10024C8E(int this, int a2, int a3);
int __thiscall sub_10024CDD(int this, int a2);
int __thiscall sub_10024D18(int this, int a2);
char __stdcall sub_10024D56(int a1, int a2, char a3);
char __thiscall sub_10024DA8(void *this, int a2, int a3, char a4, int a5, char a6);
char __stdcall sub_10024E29(int a1, int a2);
char __thiscall sub_10024E67(void *this, int a2, int a3, int a4, char a5);
char __stdcall sub_10024EE2(int a1, int a2, char a3, char a4);
char __thiscall sub_10024F37(void *this, int a2, int a3, char a4, int a5, char a6);
int __thiscall sub_10024FC7(int this);
void __thiscall sub_10025009(int this, signed __int64 a2);
char __thiscall sub_10025044(void *this, int a2);
bool __stdcall sub_10025081(int a1, int a2, char a3, unsigned int a4);
bool __stdcall sub_100250EE(int a1, int a2, char a3, unsigned int a4);
int __thiscall sub_1002515C(int this, int a2, int a3);
BOOL __thiscall sub_100251B6(int this);
char __thiscall sub_10025236(void *this, int a2, int a3, char a4, unsigned int a5);
char __thiscall sub_10025502(void *this, int a2, int a3, char a4, unsigned int a5);
char __thiscall sub_10025785(void *this, int a2, int a3, int a4, char a5, int a6, unsigned int a7, char a8);
char __thiscall sub_10025882(void *this, int a2, int a3, int a4, char a5, int a6, unsigned int a7, char a8);
char __thiscall sub_1002598D(void *this, int a2, int a3, int a4, char a5, int a6, unsigned int a7, char a8);
char __thiscall sub_10025A8D(void *this, int a2, int a3, int a4, unsigned int a5);
char __thiscall sub_10025BA2(void *this, int a2, int a3, int a4, unsigned int a5);
char __stdcall sub_10025CB2(int a1, int a2, char a3);
char __stdcall sub_10025D48(int a1, int a2);
char __stdcall sub_10025DCA(int a1, int a2, char a3);
int __thiscall sub_10025E64(int this, int a2, int a3);
int __thiscall sub_10025E8A(int this, int a2, int a3);
bool __thiscall sub_10025EB0(void *this, int a2, int a3, int a4, char a5);
char __thiscall sub_10025F3C(int this, int a2, int a3);
char __thiscall sub_10025F80(void *this, int a2, int a3, int a4);
int __thiscall sub_10025FF1(int this);
void __thiscall sub_10026008(void *this, int a2);
int __thiscall sub_1002605D(int this);
// int __userpurge sub_10026070@<eax>(int a1@<ebp>, int a2, int a3);
LPVOID __thiscall sub_100260A7(LPVOID lpMem, char a2);
void *__cdecl sub_100260E0(void *a1, const void *a2, unsigned int a3);
// int __usercall sub_10026654@<eax>(int a1@<ebp>);
void *__thiscall sub_100266E8(void *this, int a2);
int __thiscall sub_10026703(int this);
// int __usercall sub_1002671B@<eax>(int a1@<ebp>, int a2@<esi>);
// void *__usercall sub_10026850@<eax>(int a1@<ebp>);
// void *__usercall sub_10026856@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall __noreturn sub_100268D7(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10026911@<eax>(int a1@<ebx>, int a2@<esi>, PEXCEPTION_RECORD ExceptionRecord, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, PVOID TargetFrame);
signed int __cdecl sub_1002698C(int a1);
void *__cdecl sub_100269D6(PEXCEPTION_RECORD ExceptionRecord, int a2, int a3, int a4, int a5, char a6, int a7, PVOID TargetFrame);
void __cdecl sub_10026D3E(PEXCEPTION_RECORD ExceptionRecord, int a2, int a3, int a4, int a5, int a6, int a7, PVOID TargetFrame);
// char __usercall sub_10026E59@<al>(int a1@<ebx>, int a2@<edi>, int a3, int a4);
char __cdecl sub_10026EF5(int a1);
_DWORD __cdecl sub_10026F34(_DWORD, _DWORD); // weak
int __cdecl sub_10026F3B(int a1, int a2);
// int __usercall sub_10026F60@<eax>(int a1@<ebp>);
signed int sub_10026FE2();
// void __usercall __noreturn sub_10026FE6(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10026FEF@<eax>(int a1@<ebp>);
// int __usercall sub_1002711D@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// int __usercall sub_10027162@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
void *sub_10027216();
int __cdecl sub_1002722A(int a1, int a2, int a3, int a4, int a5, int a6, void *a7, char a8);
signed int __cdecl sub_10027326(int a1, int a2, int a3);
char *sub_100273B4();
char *sub_100273BD();
bool sub_100273CB();
int sub_100273D8();
// void __usercall __noreturn sub_100273F7(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
const char *__cdecl sub_10027412(int a1, int a2);
int __cdecl sub_10027475(int a1);
void __stdcall sub_10027494(int a1, int a2);
// void __usercall sub_10027502(int a1@<edi>, int a2@<esi>, int a3, int a4, int a5, int a6, int a7);
// signed int __usercall sub_10027562@<eax>(int a1@<ebx>, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
int __cdecl sub_1002763F(int a1, int a2, int a3, int a4, int a5);
// int __usercall sub_100276B7@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4);
// int __userpurge sub_100276E9@<eax>(int a1@<edi>, int a2@<esi>, PVOID TargetFrame, PEXCEPTION_RECORD ExceptionRecord);
int __cdecl sub_1002773E(int a1, int a2, int a3);
int __cdecl sub_1002776F(int a1, int a2);
// int __usercall sub_10027793@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
signed int __cdecl sub_100277DD(int a1);
// int __usercall sub_10027803@<eax>(int a1@<ebp>, int a2@<edi>, int a3@<esi>, int a4@<ebx>);
// int __usercall sub_100278A2@<eax>(int a1@<eax>, int a2, int a3, int a4, int a5);
void *__cdecl sub_100278E0(void *a1, const void *a2, unsigned int a3);
char sub_10027E54();
bool sub_10027E7D();
char sub_10027E88();
char __cdecl sub_10027E93(char a1);
int __cdecl sub_10027EC0(int a1, int a2);
int __cdecl sub_10027F00(PEXCEPTION_RECORD ExceptionRecord, PVOID TargetFrame, int); // idb
int __cdecl sub_10028066(int, LPCSTR lpProcName, int, int); // idb
HMODULE __cdecl sub_10028106(int a1);
DWORD __cdecl sub_10028187(int a1);
int __cdecl sub_100281C1(DWORD dwTlsIndex); // idb
int __cdecl sub_100281FB(DWORD dwTlsIndex); // idb
int __cdecl sub_10028235(DWORD dwTlsIndex, LPVOID lpTlsValue); // idb
int __cdecl sub_10028272(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount, int); // idb
_UNKNOWN *sub_100282B8();
BOOL __cdecl sub_100282F2(char a1);
void *__cdecl sub_10028330(void *a1, char a2, unsigned int a3);
int __cdecl sub_1002848A(int a1, int a2);
PSINGLE_LIST_ENTRY __cdecl sub_100284C6(PSLIST_HEADER ListHead);
void *__thiscall sub_100284E9(void *this, int a2);
void *__thiscall sub_10028504(void *this, int a2);
void *__thiscall sub_1002851F(void *this, int a2);
int __cdecl sub_1002853A(int a1);
int __cdecl sub_10028557(int a1, int a2, int a3, int a4, int a5);
int __cdecl sub_100286A4(int a1, int a2, int a3);
int __cdecl sub_10028767(int a1, int a2, int a3, int a4, int a5);
int __cdecl sub_1002891E(int a1, int a2);
int __cdecl sub_10028942(int a1, int a2);
int __cdecl sub_1002895E(int a1, int a2);
// int __usercall sub_1002897A@<eax>(int a1@<ebp>);
// void __usercall __noreturn sub_10028A5C(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
void __stdcall sub_10028A78(LPVOID lpMem);
void __cdecl sub_10028A94(void *a1);
void *sub_10028ACA();
void *sub_10028AD8();
char sub_10028B6A();
char sub_10028B9D();
// void __userpurge sub_10028BC0(int a1@<ecx>, int a2@<ebp>, int a3@<edi>, int a4@<esi>, int a5, int a6, int a7);
int sub_10028C0C();
char sub_10028C29();
char sub_10028C65();
// int __usercall sub_10028CA0@<eax>(int a1@<ebp>, int a2, int a3, unsigned int a4);
signed int __cdecl sub_10028D30(int a1, int a2, int a3, int a4);
int __thiscall sub_10028D9E(void *this);
int __fastcall sub_10028DB5(int a1, int a2);
void __fastcall sub_10028DCE(PVOID TargetFrame, PEXCEPTION_RECORD ExceptionRecord);
int __fastcall sub_10028DE7(int a1, unsigned int a2, int a3, int a4);
signed int __cdecl sub_10028E20(int a1, int a2, int a3, int a4, int a5);
// int __usercall sub_10028E65@<eax>(int a1@<ebp>, int a2, unsigned int a3);
void sub_10028F0C();
// int __userpurge sub_10028F15@<eax>(int result@<eax>, int a2@<ebp>, int a3);
// int __usercall sub_10028F34@<eax>(int (*a1)(void)@<eax>);
// int __usercall sub_10028F37@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_10028FE1(int a1@<ebp>, int a2@<esi>);
// signed int __usercall sub_10028FF8@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// signed int __usercall sub_1002903F@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// int __usercall sub_100290B5@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_1002912B(int a1@<ebp>);
// int __userpurge sub_10029135@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4, int a5);
// void __usercall sub_1002917A(int a1@<ebp>);
// int __usercall sub_10029186@<eax>(int a1@<ebx>, int a2, int a3);
// unsigned int __usercall sub_100291AE@<eax>(int **a1@<ecx>, int a2@<ebx>);
unsigned int __cdecl sub_100291F4(int a1, unsigned int a2, int a3, int a4);
// int __usercall sub_1002936D@<eax>(int a1@<ebx>, int a2@<edi>, char a3, int a4, int a5, int a6);
// signed int __usercall sub_100293C5@<eax>(int a1@<edi>, int a2, int a3, int *a4, int a5, int a6, int a7, int a8);
// signed int __usercall sub_10029541@<eax>(int a1@<edi>, int a2, int a3, int *a4, int a5, int a6, int a7, int a8);
// signed int __usercall sub_100296C6@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int *a5, int a6, int a7, int a8, int a9);
// signed int __usercall sub_1002973E@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int *a5, int a6, int a7, int a8, int a9);
signed int __thiscall sub_100297B8(int this);
char __thiscall sub_100297D0(int this, unsigned int a2);
bool __cdecl sub_10029856(int a1, int a2, char a3, int a4);
bool __cdecl sub_10029896(char a1, int a2, __int16 a3, int a4);
int __thiscall sub_100298E5(int this);
int __thiscall sub_10029903(void *this, unsigned int a2, unsigned int a3, char a4);
int __thiscall sub_10029978(void *this, unsigned int a2, unsigned int a3, unsigned int a4, char a5);
char __cdecl sub_10029A00(void *a1, char a2, int a3, int a4);
char __cdecl sub_10029A2C(void *a1, char a2, int a3, int a4);
int __thiscall sub_10029A5D(int this);
int __thiscall sub_10029AA4(int this);
int __thiscall sub_10029AF0(int this, int a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_10029B2C(int this, int a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_10029B68(int this, int a2, int a3, int a4, int a5, int a6, int a7);
int __thiscall sub_10029B9D(int this, int a2, int a3, int a4, int a5, int a6, int a7);
// int __userpurge sub_10029BD2@<eax>(int a1@<ecx>, int a2@<ebx>, int a3);
void __thiscall sub_10029C55(int this);
LPVOID *__thiscall sub_10029C6F(LPVOID *this, LPVOID *a2);
char __cdecl sub_10029C93(int a1, int a2);
unsigned int __stdcall sub_10029CEA(char a1, int a2);
unsigned int __stdcall sub_10029D1F(unsigned __int16 a1, int a2);
// char __usercall sub_10029D56@<al>(int a1@<ebx>, int *a2, int a3);
char __thiscall sub_10029DB2(int this, int a2);
char __thiscall sub_10029E0E(int this, int a2);
// signed int __usercall sub_10029E6C@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// signed int __usercall sub_10029F94@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
char __thiscall sub_1002A0C4(int this);
char __thiscall sub_1002A101(int this);
// char __usercall sub_1002A13E@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// char __usercall sub_1002A15D@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// char __usercall sub_1002A17C@<al>(int a1@<ecx>, int a2@<ebx>);
char __thiscall sub_1002A1A6(int this);
// char __userpurge sub_1002A1C1@<al>(int a1@<ecx>, int a2@<ebx>, int a3);
char __thiscall sub_1002A222(int this);
char __thiscall sub_1002A24A(int this);
// char __usercall sub_1002A273@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// char __usercall sub_1002A3DC@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// char __usercall sub_1002A558@<al>(int a1@<ecx>, int a2@<edi>);
// char __usercall sub_1002A787@<al>(int a1@<ecx>, int a2@<edi>);
char __thiscall sub_1002A9E4(int this);
char __thiscall sub_1002AA0F(int this);
signed int __cdecl sub_1002AA3B(int a1);
char __thiscall sub_1002AA97(int this);
char __thiscall sub_1002AAFA(int this);
// char __usercall sub_1002AB5D@<al>(int a1@<ecx>, int a2@<ebx>);
// char __usercall sub_1002ACB7@<al>(int a1@<ecx>, int a2@<ebx>);
char __thiscall sub_1002AE29(int this, int a2);
char __thiscall sub_1002AEB9(int this, int a2);
// char __userpurge sub_1002AF51@<al>(int a1@<ecx>, int a2@<edi>, unsigned int a3, char a4);
// char __usercall sub_1002B09B@<al>(int a1@<ecx>, int a2@<ebx>);
// char __usercall sub_1002B10F@<al>(int a1@<ecx>, int a2@<edi>);
// char __usercall sub_1002B12E@<al>(int a1@<ecx>, int a2@<edi>);
char __thiscall sub_1002B146(int this);
char __thiscall sub_1002B1B9(int this);
int __thiscall sub_1002B22D(int this, int a2, int a3);
// char __usercall sub_1002B26D@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
char __thiscall sub_1002B28F(void *this, char a2, int a3);
char __thiscall sub_1002B2D1(void *this, __int16 a2, int a3);
char __thiscall sub_1002B316(int this, int a2);
char __thiscall sub_1002B3BD(int this, int a2);
unsigned int __thiscall sub_1002B448(void *this, const void *a2, unsigned int a3, unsigned int a4, int a5);
int __thiscall sub_1002B4DB(void *this, const void *a2, int a3, int a4, int a5);
// signed int __usercall sub_1002B575@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int *a5, int a6, int a7, int a8, int a9);
// signed int __usercall sub_1002B599@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int *a5, int a6, int a7, int a8, int a9);
// void __usercall sub_1002B5BD(int a1@<ebx>, int a2@<edi>, int a3@<esi>, int a4, int a5, int a6);
// int __usercall sub_1002B6F8@<eax>(int a1@<edx>, int a2);
// int __usercall sub_1002B70C@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5, int a6, int a7);
// int __usercall sub_1002B787@<eax>(int a1@<ebx>, int a2@<edi>);
// void __usercall __noreturn sub_1002B797(int a1@<ebx>, int a2@<edi>);
// BOOL __usercall sub_1002B7B4@<eax>(int a1@<ebx>, int a2@<edi>);
// void __usercall sub_1002B84A(int a1@<ebp>);
// int __usercall sub_1002B854@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// int __usercall sub_1002B87F@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// int __usercall sub_1002BA14@<eax>(int a1@<ebx>, int a2@<edi>, int a3, __int64 a4, unsigned __int64 a5);
// int __usercall sub_1002BB98@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4, unsigned int a5, DWORD *a6);
// int __usercall sub_1002BD33@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// int __usercall sub_1002BD3E@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
signed int __cdecl sub_1002BD49(__int64 a1, __int64 a2, int a3);
// int __usercall sub_1002BDCA@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_1002BE47(int a1@<ebp>);
// char __usercall sub_1002BE51@<al>(int a1@<ebx>, int a2@<edi>, int a3, __int64 a4, int a5);
DWORD __cdecl sub_1002BF2A(int a1, LARGE_INTEGER liDistanceToMove, int dwMoveMethod);
// int __usercall sub_1002C003@<eax>(int a1@<ebx>, int a2@<edi>);
// int __usercall sub_1002C01E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_1002C0E2(int a1@<ebp>);
int __cdecl sub_1002C0EC(LPVOID lpMem); // idb
// unsigned int __usercall sub_1002C0F1@<eax>(int a1@<ebx>, void *a2, unsigned int a3, unsigned int a4, unsigned __int64 a5);
// int __usercall sub_1002C2BD@<eax>(int a1@<ebx>, int a2@<edi>);
// int __usercall sub_1002C2DA@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_1002C35F(int a1@<ebp>);
void sub_1002C365();
LPVOID __cdecl sub_1002C36D(SIZE_T dwBytes);
// void __usercall __noreturn StartAddress(int a1@<ebx>, int a2@<ebp>);
// int __usercall sub_1002C3D7@<eax>(int a1@<ebp>);
// void __userpurge __noreturn sub_1002C3F7(int a1@<ebx>, int a2@<ebp>, LPVOID lpThreadParameter);
// int __usercall sub_1002C454@<eax>(int a1@<ebp>);
void __stdcall sub_1002C474(LPVOID lpMem);
void __cdecl __noreturn sub_1002C4AB(DWORD dwExitCode);
LPVOID __cdecl sub_1002C502(LPCWSTR lpModuleName, int a2);
// int __usercall sub_1002C54B@<eax>(int a1@<ebx>, int a2@<edi>, LPCWSTR lpModuleName, SIZE_T dwStackSize, int a5);
// HANDLE __usercall sub_1002C5D7@<eax>(int a1@<ebx>, int a2@<edi>, LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPCWSTR lpModuleName, int a6, DWORD dwCreationFlags, int a8);
void __noreturn sub_1002C65C();
void __cdecl __noreturn sub_1002C664(DWORD dwExitCode);
// int __usercall sub_1002C672@<eax>(int a1@<ebx>, int a2@<edi>, int a3, WCHAR *a4);
// int __usercall sub_1002C707@<eax>(int a1@<ebx>, int a2@<edi>, int a3, WCHAR *a4, int a5);
// signed int __usercall sub_1002C7E7@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5);
// void __usercall __noreturn sub_1002C84B(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
bool __cdecl sub_1002C887(char a1, unsigned int a2);
int __cdecl sub_1002C8BA(int a1, int a2, int a3);
// signed int __usercall sub_1002C8D5@<eax>(char a1@<bl>, int a2@<edi>, int a3, int a4, int a5, signed int a6, char a7);
// signed int __usercall sub_1002CAFD@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5, unsigned int a6, char a7);
// char __userpurge sub_1002D1E2@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, char a4);
// __int16 __userpurge sub_1002D20A@<ax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, __int16 a4);
// char __usercall sub_1002D236@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// int __usercall sub_1002D251@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4, int a5);
// int __usercall sub_1002D27B@<eax>(int a1@<ebx>, int a2, int a3, int a4);
// signed int __usercall sub_1002D2AE@<eax>(int a1@<ecx>, char a2@<bl>, int a3@<edi>, int a4, int a5, signed int a6);
// signed int __usercall sub_1002D2DA@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4, int a5, unsigned int a6);
// int __userpurge sub_1002D306@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4, int a5);
// void __usercall sub_1002D34B(int a1@<ebp>);
// int __usercall sub_1002D357@<eax>(int a1@<ebx>, int a2, int a3);
// int __usercall sub_1002D37F@<eax>(int **a1@<ecx>, int a2@<ebx>);
// int __usercall sub_1002D3CD@<eax>(int a1@<ebx>, int a2@<edi>, const char *a3, int a4);
_DWORD __cdecl sub_1002D4A8(_DWORD); // weak
int __cdecl sub_1002D4AD(int a1);
// int __usercall sub_1002D4C7@<eax>(int a1@<ebx>, int a2@<edi>, SIZE_T a3, unsigned int a4);
// int __usercall sub_1002D4E9@<eax>(int a1@<ebx>, int a2@<edi>, SIZE_T a3, unsigned int a4, SIZE_T a5);
// int __usercall sub_1002D573@<eax>(int a1@<ebx>, int a2@<edi>, int a3, SIZE_T a4, unsigned int a5, SIZE_T a6);
// int __usercall sub_1002D6F7@<eax>(int a1@<ebx>, int a2@<edi>, int a3, SIZE_T a4, unsigned int a5);
// void __usercall __noreturn sub_1002D71C(void *a1@<ecx>, int a2@<ebx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>);
LPVOID __cdecl sub_1002D75F(unsigned int a1, unsigned int a2);
void __cdecl sub_1002D7BC(LPVOID lpMem);
signed int sub_1002D7F6();
char *__cdecl sub_1002D8BE(int a1);
void __cdecl sub_1002D91A(int a1);
void __cdecl sub_1002D92E(int a1);
void __cdecl sub_1002D983(int a1);
char sub_1002D99A();
void __cdecl sub_1002D9CB(int a1);
// int __usercall sub_1002D9E2@<eax>(int a1@<edx>, int a2);
int __cdecl sub_1002D9F6(int a1);
// int __usercall sub_1002DA3A@<eax>(int a1@<ebp>);
void sub_1002DA83();
int __cdecl sub_1002DA8C(int a1, int a2);
int __cdecl sub_1002DAAC(int a1, int a2);
BOOL __cdecl sub_1002DC1F(int a1);
// int __usercall sub_1002DC32@<eax>(int a1@<ebp>);
// BOOL __usercall sub_1002DD21@<eax>(int a1@<ebp>);
// void __usercall __noreturn sub_1002DD31(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
void sub_1002DD3C();
void __cdecl __noreturn sub_1002DD4B(UINT uExitCode);
bool sub_1002DD8C();
FARPROC __cdecl sub_1002DDD0(int a1);
int __cdecl sub_1002DE3A(int a1);
int sub_1002DE58();
int sub_1002DE6E();
// signed int __usercall sub_1002DE74@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
int __cdecl sub_1002DF98(int a1, int a2, int a3, int a4, int a5);
LPVOID __cdecl sub_1002E10D(unsigned int a1, unsigned int a2, unsigned int a3);
// signed int __usercall sub_1002E162@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// signed int __usercall sub_1002E16D@<eax>(int a1@<ebx>);
int __cdecl sub_1002E1C6(int a1);
void __cdecl sub_1002E297(LPVOID lpMem);
int __thiscall sub_1002E2C6(void *this, int (__cdecl *a2)(_DWORD));
void __cdecl sub_1002E306(LPVOID *a1);
void __cdecl sub_1002E321(LPVOID *a1);
void sub_1002E33C();
int sub_1002E373(void); // weak
// int __userpurge sub_1002E378@<eax>(int a1@<ebp>, int a2, int a3, int a4);
// void __usercall sub_1002E3BD(int a1@<ebp>);
// int __userpurge sub_1002E3C9@<eax>(int a1@<ebp>, int a2, int a3, int a4);
// void __usercall sub_1002E40E(int a1@<ebp>);
int __cdecl sub_1002E41A(int a1, int a2);
int __cdecl sub_1002E442(int a1, int a2);
int __cdecl sub_1002E46A(int a1);
signed int __thiscall sub_1002E489(void *this);
signed int __thiscall sub_1002E5A9(void *this);
int __cdecl sub_1002E6EA(char a1);
int __cdecl sub_1002E700(char a1);
signed int __cdecl sub_1002E71D(int a1);
int __cdecl sub_1002E75A(char a1, char a2);
char __fastcall sub_1002E77E(int a1, int a2);
char sub_1002E790();
char sub_1002E7AA();
char __fastcall sub_1002E7B2(int a1, int a2);
char sub_1002E7EF();
char sub_1002E7F8();
char sub_1002E86F();
char sub_1002E872();
bool sub_1002E884();
char sub_1002E88F();
char sub_1002E897();
char sub_1002E8A9();
unsigned int __cdecl sub_1002E8BB(unsigned int *a1, unsigned int a2);
int __cdecl sub_1002E917(int (**a1)(void), int (**a2)(void));
signed int __cdecl sub_1002E95C(int a1);
int __cdecl sub_1002E99F(int a1);
int sub_1002E9C2();
int sub_1002E9D5();
// LPVOID __usercall sub_1002E9E8@<eax>(int a1@<edi>, LPCVOID lpMem, unsigned int a3, unsigned int a4);
// signed int __usercall sub_1002EA60@<eax>(int a1@<ebx>, int a2);
// int __usercall sub_1002EAC6@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// int __usercall sub_1002EB0D@<eax>(int a1@<ebp>);
// int __usercall sub_1002EB16@<eax>(int a1@<ebp>);
// void __usercall sub_1002EBB5(int a1@<ebp>);
// void __usercall sub_1002EBBB(int a1@<ebp>);
void sub_1002EBE5();
double sub_1002EC2C(); // weak
double sub_1002EC80(); // weak
double __cdecl sub_1002EC9D(_DWORD, _DWORD); // weak
// signed int __usercall sub_1002ED3A@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5);
LPVOID __cdecl sub_1002ED94(SIZE_T dwBytes);
// int __usercall sub_1002EDE2@<eax>(int a1@<ebp>);
void sub_1002EE38();
int __cdecl sub_1002EE41(int a1);
int __cdecl sub_1002EE7C(int a1);
int __cdecl sub_1002EF3F(int a1, int a2);
// int __usercall sub_1002F183@<eax>(int a1@<ebx>, int a2, int a3, int a4, int a5);
char __cdecl sub_1002F208(int a1);
char __cdecl sub_1002F223(int a1);
char __cdecl sub_1002F242(int a1);
char __cdecl sub_1002F262(int a1, int a2);
char __cdecl sub_1002F284(int a1, int a2);
char __cdecl sub_1002F2A6(int a1, int a2);
char __cdecl sub_1002F2DB(int a1);
// int __usercall sub_1002F2FB@<eax>(int a1@<ebx>, int a2, int a3, int a4, int a5);
// int __userpurge sub_1002F306@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4, int a5);
// void __usercall sub_1002F37C(int a1@<ebp>);
// int __usercall sub_1002F388@<eax>(int a1@<ebx>, int a2, int a3);
// int __usercall sub_1002F3B0@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// signed int __usercall sub_1002F42F@<eax>(int a1@<ebx>, int a2);
// signed int __usercall sub_1002F4CB@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
unsigned __int32 __cdecl sub_1002F4F1(int a1);
int __cdecl sub_1002F52F(int a1, signed int a2, LPCSTR lpMultiByteStr, int a4);
int __cdecl sub_1002F6E2(int a1, unsigned int a2, int a3);
// bool __usercall sub_1002F74F@<al>(int a1@<ebx>, int a2@<edi>, signed int a3);
int __cdecl sub_1002F7C5(int a1, signed int a2, unsigned int a3, int a4);
int __cdecl sub_1002F8A4(int a1, signed int a2, unsigned int a3, int a4);
int __cdecl sub_1002F992(int a1, signed int a2, unsigned int a3, int a4);
// int __usercall sub_1002FABF@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_1002FB7B(int a1@<ebp>);
void sub_1002FB81();
// int __usercall sub_1002FBAA@<eax>(int a1@<ebx>, int a2, LPCVOID lpBuffer, int a4);
// signed int __usercall sub_1002FDB6@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4);
// bool __usercall sub_1002FEC7@<al>(int a1@<ebx>, int a2@<edi>, char a3, int a4);
// signed int __usercall sub_1002FF93@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4);
// char __usercall sub_1002FF9E@<al>(int a1@<ebx>, int a2@<edi>, int a3);
// int __usercall sub_10030053@<eax>(int a1@<ebx>, char a2, int a3);
// int __usercall sub_1003008C@<eax>(int a1@<ebx>, int a2, int a3);
// int __usercall sub_100300C4@<eax>(int a1@<ebx>, int a2);
// int __usercall sub_100300F1@<eax>(int a1@<ebx>, int a2, DWORD dwMapFlags, int a4);
// BOOL __usercall sub_1003023B@<eax>(int a1@<ebx>, int a2, int a3);
// int __usercall sub_10030258@<eax>(int a1@<ebx>, int a2, int a3);
// int __usercall sub_10030272@<eax>(int a1@<ebx>, int a2);
int __cdecl sub_100302A2(LPWSTR lpWideCharStr, LPCSTR lpMultiByteStr, int, int); // idb
int __cdecl sub_1003039C(LPWSTR lpWideCharStr, LPCSTR lpMultiByteStr, int); // idb
int __cdecl sub_100303B6(int, LPSTR lpMultiByteStr, int cbMultiByte, WCHAR WideCharStr, int); // idb
int __cdecl sub_100304D7(int, LPSTR lpMultiByteStr, int cbMultiByte, WCHAR WideCharStr); // idb
int __cdecl sub_100304F4(int a1, int a2);
int __cdecl sub_1003061B(int a1, unsigned int a2);
// int __userpurge sub_100307D2@<eax>(int a1@<ebp>, int a2, int a3, int a4);
// void __usercall sub_10030816(int a1@<ebp>);
// int __userpurge sub_10030822@<eax>(int a1@<ebp>, int a2, int a3, int a4);
// void __usercall sub_10030877(int a1@<ebp>);
// int __userpurge sub_10030883@<eax>(int a1@<ebp>, int a2, int a3, int a4);
// void __usercall sub_100308C2(int a1@<ebp>);
// int __userpurge sub_100308CE@<eax>(int a1@<ebp>, int a2, int a3, int a4);
// void __usercall sub_1003090A(int a1@<ebp>);
int __cdecl sub_10030916(int a1, int a2);
int __cdecl sub_1003093E(int a1, int a2);
int __cdecl sub_10030966(int a1, int a2);
int __cdecl sub_1003098E(int a1, int a2);
int __cdecl sub_100309B6(int a1, char a2);
void __stdcall sub_10030A2F(LPVOID lpMem);
int __cdecl sub_10030A50(int a1);
signed __int32 __cdecl sub_10030AF9(int a1, int a2);
void sub_10030B44();
// int __usercall sub_10030B70@<eax>(int a1@<ebx>, int a2@<ebp>);
int sub_10030BF4();
char sub_10030C79();
char sub_10030CA5();
// int __usercall sub_10030CBF@<eax>(int a1@<ebx>, int a2, int *a3);
// int __usercall sub_10030CEC@<eax>(int a1@<ebx>, int a2, int *a3);
signed int __cdecl sub_10030D19(int a1);
char __cdecl sub_10030D85(int a1);
signed int __cdecl sub_10030DA3(int a1, int a2, int a3, int a4, int a5, unsigned int a6, char a7, int a8, int a9);
// signed int __usercall sub_100310A6@<eax>(int a1@<ebx>, double *a2, int a3, int a4, int a5, int a6, int a7, char a8, int a9, int a10);
// signed int __usercall sub_10031141@<eax>(int a1@<ebx>, int a2, int a3, int a4, char a5, int a6, int a7, char a8, int a9);
// signed int __usercall sub_1003128C@<eax>(int a1@<ebx>, double *a2, int a3, int a4, int a5, int a6, int a7, int a8);
// int __usercall sub_10031319@<eax>(int a1@<ebx>, int a2, int a3, int a4, int a5, char a6, int a7);
signed int __cdecl sub_100313F0(double *a1, int a2, int a3, int a4, int a5, int a6, char a7, int a8, int a9);
// signed int __usercall sub_100314B8@<eax>(int a1@<edi>, int a2, unsigned __int8 a3, int a4, unsigned int a5, char a6);
void *__cdecl sub_100315B0(int a1, int a2, const void *a3, int a4);
// signed int __usercall sub_100315E4@<eax>(int a1@<ebx>, int a2, int a3, unsigned int a4, int a5, int a6, signed int a7, unsigned int a8, char a9, int a10, int a11);
BOOL sub_1003172E();
signed __int32 sub_10031743();
// int __usercall sub_1003174E@<eax>(int a1@<ebp>);
void sub_10031797();
// void __usercall sub_100317A0(int a1@<edi>);
// void __usercall sub_10031A4A(int a1@<ebp>);
void sub_10031A50();
// int __usercall sub_10031A79@<eax>(int a1@<ebx>, int a2@<ebp>);
// void __usercall sub_10031B48(int a1@<ebp>);
void sub_10031B51();
// signed int __usercall sub_10031B7E@<eax>(int a1@<ebx>, int a2@<edi>, signed int a3, LARGE_INTEGER liDistanceToMove);
// DWORD __usercall sub_10031BD5@<eax>(int a1@<ebx>, int a2@<edi>, int a3, LARGE_INTEGER liDistanceToMove, DWORD dwMoveMethod);
DWORD __cdecl sub_10031C53(HANDLE hFile, LARGE_INTEGER liDistanceToMove);
// int __usercall sub_10031CD7@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3, LARGE_INTEGER a4);
// int __usercall sub_10031CE2@<eax>(int a1@<ebx>);
// DWORD __usercall sub_10031CFD@<eax>(int a1@<ebx>, int a2@<edi>, int a3, LARGE_INTEGER liDistanceToMove, DWORD dwMoveMethod);
int __cdecl sub_10031D18(signed int a1, unsigned int a2, int a3);
unsigned int __cdecl sub_10031E6F(signed int a1, unsigned int a2, int a3);
int __cdecl sub_1003202F(int, LPCSTR lpMultiByteStr, int, LPWSTR lpWideCharStr, int cchWideChar); // idb
unsigned int __cdecl sub_1003217F(signed int a1, unsigned int a2, int a3);
// int __usercall sub_10032200@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_100322E4(int a1@<ebp>);
void sub_100322EA();
// int __usercall sub_10032313@<eax>(int a1@<edi>, int a2, LPWSTR lpWideCharStr, int a4);
// signed int __usercall sub_100326C8@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
// signed int __usercall sub_10032849@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
int __cdecl sub_10032854(int, LPCSTR lpProcName, int, int); // idb
HMODULE __cdecl sub_100328F0(int a1);
DWORD __stdcall sub_1003296B(int a1);
int __stdcall sub_100329C1(DWORD dwTlsIndex); // idb
int __stdcall sub_10032A17(DWORD dwTlsIndex); // idb
int __stdcall sub_10032A6D(DWORD dwTlsIndex, LPVOID lpTlsValue); // idb
int __stdcall sub_10032AC6(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount, int); // idb
int __stdcall sub_10032B28(int, DWORD dwMapFlags, LPCWSTR lpSrcStr, int cchSrc, LPWSTR lpDestStr, int cchDest, int, int, int); // idb
int __stdcall sub_10032BB0(int a1, int a2);
int __stdcall sub_10032C0C(int a1);
int sub_10032C5E();
char sub_10032CA7();
bool sub_10032CCD();
char __cdecl sub_10032D54(char a1);
// WCHAR __usercall sub_10032D8A@<ax>(int a1@<ebx>, WCHAR SrcStr, int a3);
// int __usercall sub_10032E53@<eax>(int a1@<ecx>, int a2@<ebx>);
int __cdecl sub_10032E79(WCHAR a1, unsigned __int16 a2);
int __cdecl sub_10032ED8(int a1, int a2, int a3);
int __cdecl sub_10032FAA(int, int, DWORD dwMapFlags, LPCSTR lpMultiByteStr, int cbMultiByte, LPWSTR lpDestStr, int cchDest, UINT CodePage, int); // idb
// int __usercall sub_100331C7@<eax>(int a1@<ebx>, int a2, int a3, DWORD dwMapFlags, LPCSTR lpMultiByteStr, int cbMultiByte, LPWSTR lpDestStr, int cchDest, UINT CodePage, int a10);
void __cdecl sub_10033212(int a1);
// void *__usercall sub_10033232@<eax>(int a1@<ecx>, int a2@<ebx>, LPCVOID lpMem, SIZE_T dwBytes);
// SIZE_T __usercall sub_100332FC@<eax>(int a1@<ebx>, int a2@<edi>, LPCVOID lpMem);
// int __userpurge sub_1003332F@<eax>(int a1@<ebp>, int a2, int a3, int a4);
// void __usercall sub_1003337D(int a1@<ebp>);
int __cdecl sub_10033389(int a1, int a2);
int *__cdecl sub_100333B1(int a1);
int __fastcall sub_100333F3(unsigned int a1, int a2, int a3);
int __cdecl sub_10033424(int a1, int a2);
int __thiscall sub_1003344C(void *this);
// int __usercall sub_10033463@<eax>(int a1@<edx>, int a2);
// int __usercall sub_1003349E@<eax>(int a1@<ebx>, int a2@<ebp>);
// int __usercall sub_100334A7@<eax>(int a1@<ebp>);
// void __usercall sub_10033658(int a1@<eax>, int a2@<ebp>);
// void __usercall sub_10033667(int a1@<ebp>);
int sub_100336AF();
bool sub_100336B5();
char sub_100336C6();
// int __usercall sub_100336D0@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
void sub_10033767();
signed int __cdecl sub_10033770(unsigned int a1, unsigned int a2);
// signed int __usercall sub_10033788@<eax>(int a1@<ebx>, int a2@<edi>, LPCSTR *a3, int a4);
signed int __cdecl sub_10033918(int a1, int a2, int a3, int a4);
// int __usercall sub_100339AE@<eax>(int a1@<edi>, LPCSTR lpFileName, int a3, int a4);
void __thiscall sub_10033B32(void *this);
int __thiscall sub_10033B57(int this, LPVOID lpMem);
signed int __thiscall sub_10033B8C(int this);
// signed int __usercall sub_10033C13@<eax>(int a1@<ebx>, int a2@<edi>, LPCSTR *a3, int a4);
// int __userpurge sub_10033C1E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>, int a4, int a5, int a6);
// void __usercall sub_10033C55(int a1@<ebp>);
// int __usercall sub_10033C61@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4);
// int __usercall sub_10033C89@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
int __cdecl sub_10033D4D(int a1);
// UINT __usercall sub_10033D8B@<eax>(int a1@<ebx>, UINT a2);
int __cdecl sub_10033DFE(int a1);
char __cdecl sub_10033E63(int a1);
// signed int __usercall sub_10033FF7@<eax>(int a1@<ebx>, UINT a2, char a3);
// char __usercall sub_100340F8@<al>(int a1@<ebx>);
// int __usercall sub_10034116@<eax>(int a1@<ebx>, int a2@<ebp>);
void sub_100341A7();
// signed int __usercall sub_100341B8@<eax>(int a1@<ebx>, UINT a2, int a3);
// signed int __usercall sub_100343A9@<eax>(int a1@<ebx>, int a2@<edi>, void *a3, unsigned int a4, int a5, unsigned int a6);
// signed int __usercall sub_1003442A@<eax>(int a1@<ebx>, int a2, unsigned __int8 a3, int a4, unsigned __int8 a5);
// signed int __usercall sub_10034483@<eax>(int a1@<ebx>, unsigned __int8 a2);
char sub_1003449B();
int __cdecl sub_100344B4(const unsigned __int16 *a1);
CHAR *sub_100344EB();
char __cdecl sub_1003456E(int (**a1)(void), int (**a2)(void));
char __cdecl sub_100345F1(int a1, int a2);
double sub_1003463E(); // weak
// int __usercall sub_10034657@<eax>(int a1@<edx>, int a2);
int __cdecl sub_1003466B(int a1);
LPVOID __cdecl sub_100346B4(LPVOID lpMem, SIZE_T dwBytes);
// int __userpurge sub_1003471D@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4, int a5);
// void __usercall sub_100347A9(int a1@<ebp>);
// int __usercall sub_100347B5@<eax>(int a1@<ebx>, int a2, int a3);
// int __usercall sub_100347DD@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
int sub_1003484C();
// void __usercall sub_10034860(__int64 a1@<st0>);
// double __usercall sub_1003487E@<st0>(__m128d a1@<xmm0>, __int64 a2);
// double __usercall sub_10034B31@<st0>(int a1@<ebp>);
double __fastcall sub_10034C61(char a1);
int sub_10034C6E(void); // weak
// double __usercall sub_10034CB1@<st0>(double result@<st0>);
void __fastcall sub_10034D64(__int16 a1, int a2);
int sub_10034DE8(void); // weak
// double __usercall sub_10034DEF@<st0>(int a1@<ebp>, double result@<st0>);
int __cdecl sub_10034F36(double); // idb
double __cdecl sub_10034F69(double a1);
// int __usercall sub_10034FB0@<eax>(int a1@<edx>, __int16 a2@<cx>, int a3@<ebp>, __int16 a4@<fpstat>, double _ST7@<st0>);
// int __usercall sub_10035017@<eax>(int a1@<edx>, int a2@<ebp>, __int16 a3@<fpstat>, double _ST6@<st1>, double a5@<st0>);
double sub_100350CA();
// double __usercall sub_100350CF@<st0>(int a1@<ebp>, double a2@<st0>);
// void __usercall sub_10035176(int a1@<ebp>);
void sub_100351B0();
// double __usercall sub_100351C7@<st0>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, double a4@<st0>, __int16 a5, int a6, int a7, int a8);
double __cdecl sub_10035225(_DWORD); // weak
// double __usercall sub_1003523C@<st0>(int a1@<eax>, double result@<st0>);
double __fastcall sub_10035255(int a1, int a2);
int __cdecl sub_10035298(int a1, int a2);
int __cdecl sub_1003539C(int a1, int a2, int a3);
// signed int __usercall sub_100353D6@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5);
// signed int __usercall sub_1003548E@<eax>(int a1@<edi>, int a2, int a3, int a4, int a5);
// int __usercall sub_10035608@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_100356A2(int a1@<ebp>);
// void __usercall sub_100356A8(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>);
int __cdecl sub_100356D4(signed int a1, char a2, unsigned int a3, unsigned int a4, int a5, int a6, int a7, int a8, int a9);
HANDLE __cdecl sub_10035921(LPCWSTR lpFileName, LPSECURITY_ATTRIBUTES lpSecurityAttributes, int a3, DWORD dwDesiredAccess, DWORD dwCreationDisposition, DWORD dwShareMode, int a7, int a8);
// signed int __usercall sub_10035946@<eax>(int a1@<ebx>, int a2@<edi>, __int16 a3);
int __cdecl sub_100359B6(int a1, int a2, int a3, char a4);
// int __usercall sub_10035B32@<eax>(int a1@<ebx>, int a2@<edi>, signed int a3);
int __cdecl sub_10035BE2(int, int, LPCWSTR lpFileName, DWORD dwShareMode, int, int); // idb
// int __usercall sub_10035F0B@<eax>(int a1@<ebx>, int a2@<edi>);
LPVOID sub_10035F2B();
void __cdecl sub_10035FA5(LPCRITICAL_SECTION lpCriticalSection);
// int __usercall sub_10035FDA@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
void sub_10036069();
void __cdecl sub_10036072(signed int a1);
int __cdecl sub_10036095(int, HANDLE hHandle); // idb
void __cdecl sub_10036129(signed int a1);
// int __usercall sub_1003614C@<eax>(int a1@<ebp>);
void sub_10036255();
signed int __cdecl sub_1003625E(signed int a1);
// signed int __usercall sub_100362EF@<eax>(int a1@<ebx>, int a2@<edi>, signed int a3);
// int __usercall sub_10036359@<eax>(int a1@<ebx>, int a2@<edi>, signed int a3);
__int16 __cdecl sub_100363AF(__int16 Buffer);
int __cdecl sub_100363F4(int a1);
// int __usercall sub_10036451@<eax>(int a1@<ebx>, unsigned __int8 a2, int a3);
signed __int32 __cdecl sub_1003648A(int a1);
void __cdecl sub_10036507(LPVOID lpMem);
signed __int32 __cdecl sub_10036651(int a1);
void __cdecl sub_1003667A(LPVOID lpMem);
signed __int32 __cdecl sub_100366AA(int a1);
signed __int32 __cdecl sub_100366D3(signed __int32 a1);
// int __usercall sub_10036754@<eax>(int a1@<ebx>, int a2@<ebp>);
void sub_100367BA();
int __cdecl sub_100367CB(signed __int32 *a1, int a2);
// signed int __usercall sub_1003681B@<eax>(int a1@<ebx>, int a2@<edi>, void *a3, unsigned int a4, int a5, int a6);
int __thiscall sub_100368D7(int this);
unsigned int __cdecl sub_10036910(int a1, int a2);
unsigned int __cdecl sub_10036DBE(double a1, int a2, int a3, int a4, int a5);
void __cdecl sub_1003815A(int a1);
void __cdecl sub_10038258(int a1);
void __cdecl sub_100382C1(LPVOID *a1, int a2);
void __cdecl sub_100382FD(int a1);
// BOOL __usercall sub_100383E1@<eax>(int a1@<ebx>, int a2, DWORD dwInfoType, LPCSTR lpMultiByteStr, int cbMultiByte, LPWORD lpCharType, UINT CodePage, int a8);
int __cdecl sub_100384FE(int a1);
int __cdecl sub_100385BA(int a1);
int __cdecl sub_100385E6(int, DWORD dwMapFlags, LPCWSTR lpSrcStr, int cchSrc, LPWSTR lpDestStr, int cchDest); // idb
int __cdecl sub_10038624(int a1, int a2);
void __cdecl sub_10038640(unsigned int a1, unsigned int a2, int a3, int (__cdecl *a4)(_DWORD, _DWORD));
int __cdecl sub_100386E0(int a1, int a2, int a3);
// void __usercall sub_10038720(int a1@<ebx>, unsigned int a2, unsigned int a3, int a4, int (__cdecl *a5)(_DWORD, _DWORD));
// signed int __usercall sub_10038ABA@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5, int a6);
// signed int __usercall sub_10038B6B@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5, int a6);
char __cdecl sub_10038B80(int a1, int a2);
// int __usercall sub_10038BC0@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3, int a4);
// int __usercall sub_10038BD7@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3, int a4, int a5);
// BOOL __usercall sub_10038C64@<eax>(int a1@<ebx>);
int __cdecl sub_10038C73(int a1, int a2, int a3, signed int a4);
int __cdecl sub_10038E8B(double); // idb
int __cdecl sub_10038EF5(double, double, int); // idb
// int __usercall sub_10039020@<eax>(int a1@<ebp>, int a2, int a3, __int16 *a4);
// signed int __usercall sub_10039191@<eax>(int a1@<ebx>, int a2@<edi>, int a3);
signed int __cdecl sub_100391BD(signed int a1, int a2);
// int __usercall sub_1003928E@<eax>(int a1@<ebx>, int a2, LARGE_INTEGER a3);
int sub_1003941F();
HANDLE sub_10039425();
HANDLE sub_10039444();
int __cdecl sub_1003945B(int a1);
BOOL __cdecl sub_10039478(int a1);
signed int __cdecl sub_100394C1(int a1);
double sub_10039550(); // weak
_DWORD __cdecl sub_100395A8(_DWORD, _DWORD); // weak
double __cdecl sub_10039660(double a1);
double __cdecl sub_1003977D(double a1);
int __cdecl sub_10039793(double); // idb
double __cdecl sub_10039837(double a1, int a2);
double __cdecl sub_1003990B(double a1, __int16 a2);
signed int __cdecl sub_1003993A(int a1, int a2);
int __cdecl sub_10039998(char a1);
double __cdecl sub_100399CC(char, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
BOOL __cdecl sub_10039A9A(unsigned __int8 a1, double *a2, __int16 a3);
// unsigned int __usercall sub_10039C7A@<eax>(__int16 a1@<fpstat>, ULONG_PTR Arguments, int a3, int a4, int a5, int a6, int a7);
// unsigned int __usercall sub_10039C9D@<eax>(__int16 a1@<fpstat>, ULONG_PTR Arguments, int a3, int a4, int a5, int a6, int a7, int a8);
int __cdecl sub_10039F8E(int a1);
double __cdecl sub_10039FBD(int a1, int a2, int a3, int a4, int a5, int a6, double a7);
// int __usercall sub_1003A05F@<eax>(__int16 a1@<fpstat>);
int sub_1003A072();
void sub_1003A09E();
// int __usercall sub_1003A0F9@<eax>(__int16 a1@<fpstat>);
signed int __cdecl sub_1003A10B(__int16 a1);
signed int __cdecl sub_1003A188(__int16 a1);
signed int __cdecl sub_1003A1FB(__int16 a1);
signed int __cdecl sub_1003A26C(__int16 a1);
signed int __cdecl sub_1003A2EC(int a1);
signed int __cdecl sub_1003A34D(int a1);
int sub_1003A3AE();
// int __usercall sub_1003A3F1@<eax>(char a1@<fpstat>);
signed int __cdecl sub_1003A499(__int16 a1);
signed int __cdecl sub_1003A519(int a1);
// int __usercall sub_1003A599@<eax>(char a1@<fpstat>);
// void __usercall sub_1003A680(__int64 a1@<st0>);
// double __usercall sub_1003A69E@<st0>(__m128d a1@<xmm0>, __int64 a2);
double __cdecl sub_1003A910(double a1);
// BOOL __stdcall IsProcessorFeaturePresent(DWORD ProcessorFeature);
// void __stdcall RtlUnwind(PVOID TargetFrame, PVOID TargetIp, PEXCEPTION_RECORD ExceptionRecord, PVOID ReturnValue);
// DWORD __stdcall GetCurrentThreadId();
// int __userpurge sub_1003A9DC@<eax>(int a1@<ebp>, int a2, int a3);
// int __userpurge sub_1003AA28@<eax>(int a1@<ebp>, int a2, int a3, int a4);
int __thiscall sub_1003AA86(int this, int a2);
// int __usercall sub_1003AAA4@<eax>(int a1@<ebx>, int a2@<ebp>);
void __noreturn sub_1003AAFC();
// int __usercall sub_1003AB06@<eax>(int a1@<ebp>);
int __thiscall sub_1003AB56(int this, int a2, char a3);
// void __usercall sub_1003AC77(int a1@<ecx>, int a2@<ebx>);
int __thiscall sub_1003AD3A(void *this);
LPVOID __thiscall sub_1003AD3D(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1003AD60(LPVOID lpMem, char a2);
LPVOID __thiscall sub_1003AD89(LPVOID lpMem, char a2);
// int __userpurge sub_1003ADAC@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5);
// int __usercall sub_1003AE3F@<eax>(int a1@<ebx>, int a2@<ebp>);
// _UNKNOWN *__usercall sub_1003AEE2@<eax>(int a1@<ebp>);
// int __usercall sub_1003AF14@<eax>(int a1@<ebp>);
int __thiscall sub_1003AFB3(void *this);
int __thiscall sub_1003AFFC(void *this);
int __thiscall sub_1003B019(void *this);
// void __usercall sub_1003B032(int a1@<ecx>, int a2@<ebx>);
int __stdcall sub_1003B03A(int a1);
// int __usercall sub_1003B03F@<eax>(int a1@<ebx>, int a2@<ebp>);
int __thiscall sub_1003B092(int this, int a2, int a3);
void __thiscall sub_1003B0B4(void *this);
// int __usercall sub_1003B1A1@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3);
int __cdecl sub_1003B1E0(int a1, int a2);
int __cdecl sub_1003B1FB(int a1);
int __cdecl sub_1003B20E(int a1);
LPVOID __cdecl sub_1003B23B(LPVOID lpMem);
void __cdecl sub_1003B24A(void *a1);
int __cdecl sub_1003B25C(int a1, unsigned int a2, int a3, int a4);
int __thiscall sub_1003B2A0(void *this);
unsigned __int64 __stdcall sub_1003B2D0(__int64 a1, __int64 a2);
// signed int __usercall sub_1003B390@<eax>(double a1@<st0>);
// double __usercall sub_1003B3D0@<st0>(double@<st0>); weak
int __cdecl sub_1003B450(int a1, unsigned int a2);
int __cdecl sub_1003B4A0(int a1);
bool __cdecl sub_1003B560(int a1);
int __stdcall sub_1003B5A0(unsigned __int64 a1, unsigned int a2, int a3);
int __thiscall sub_1003B650(_DWORD); // weak
void __cdecl sub_1003B680(int a1, int a2);
int __cdecl sub_1003B6C9(_DWORD); // weak
int __stdcall sub_1003B6E0(unsigned __int64 a1, __int64 a2);
// unsigned __int64 __usercall sub_1003B7C0@<edx:eax>(unsigned __int64 a1@<edx:eax>, unsigned __int8 a2@<cl>);
// int __usercall sub_1003B7E0@<eax>(__int64 a1@<edx:eax>, unsigned __int8 a2@<cl>);
int __cdecl sub_1003B800(int a1, unsigned __int8 a2);
int sub_1003BA70(); // weak
int nullsub_2(); // weak
// void __usercall sub_1003BB00(int a1@<ebx>);
// char __usercall sub_1003BB80@<al>(int a1@<ebx>);
__int16 __fastcall sub_1003BC00(int a1, unsigned int a2);
signed int __fastcall sub_1003BC30(int a1);
// unsigned int __usercall sub_1003BCA0@<eax>(int a1@<ebx>, int a2@<edi>);
// int __usercall sub_1003BCC0@<eax>(int a1@<ecx>, int a2@<edi>);
// int __usercall sub_1003C080@<eax>(int a1@<ecx>, int a2@<edi>);
// char __usercall sub_1003C480@<al>(int a1@<eax>, int a2@<ebx>);
void *__thiscall sub_1003C5D0(void *this);
int __thiscall sub_1003C660(int this);
int sub_1003C7B0();
int __thiscall sub_1003C830(int this, int a2, int a3);
__int16 __thiscall sub_1003C910(void *this, int a2, unsigned int a3);
__int16 __thiscall sub_1003CA00(int this, unsigned int a2);
int __thiscall sub_1003D600(int this);
void sub_1003D690();
int sub_1003D710();
int nullsub_3(); // weak
// int __usercall sub_1003D780@<eax>(int a1@<ebx>);
// char __usercall sub_1003D7B0@<al>(int a1@<ebx>, int a2@<edi>);
LPVOID __fastcall sub_1003D820(unsigned __int8 a1, int a2);
int __fastcall sub_1003D830(unsigned __int8 a1);
int sub_1003D840(); // weak
LPVOID sub_1003D850();
int __thiscall sub_1003DB50(int this);
int __thiscall sub_1003DF50(void *this);
int __thiscall sub_1003E370(int this, float a2, int a3, int a4, int a5);
char __thiscall sub_1003E490(void *this);
// int __usercall sub_1003E5A0@<eax>(int a1@<ecx>, int a2@<ebx>);
// int __usercall sub_1003E600@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// int __usercall sub_1003E6B0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
// char __usercall sub_1003EA30@<al>(char a1@<bl>, int a2@<edi>);
// BOOL __userpurge DialogFunc@<eax>(int a1@<ebx>, int a2@<edi>, HWND hDlg, UINT a4, WPARAM a5, LPARAM a6);
LRESULT __thiscall sub_1003F480(HWND hDlg);
// char __usercall sub_1003F980@<al>(char a1@<cl>, int a2@<edi>);
char __cdecl getInterface(int a1);
int sub_10040150(); // weak
// char __usercall sub_10040260@<al>(char a1@<bl>, int a2@<edi>);
int getName();
int getType();
signed int __stdcall sub_10040290(HINSTANCE a1, int a2, int a3);
void __fastcall sub_100402B0(int a1, int a2);
// unsigned int __usercall sub_10040330@<eax>(int a1@<ebx>, int a2@<edi>);
int __thiscall sub_10040760(void *this, int a2, LPCWSTR lpName, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12);
int __thiscall sub_10040B20(void *this, int a2);
void __thiscall sub_10040BC0(int this, int a2);
int __thiscall sub_10040D50(int this, int a2, int a3);
int __thiscall sub_10040E40(int this);
int __thiscall sub_10040EA0(int this, int a2, int a3);
// char __userpurge sub_100410C0@<al>(int a1@<ecx>, int a2@<ebx>, int a3, const unsigned __int16 *a4);
void __thiscall sub_100411F0(int this, __int64 a2);
bool __thiscall sub_10041500(int this, LPCWSTR lpName, int a3, int a4, int a5);
void __thiscall sub_10041820(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
void __thiscall sub_10041BF0(void *this, int a2, int a3, int a4, int a5, __int64 *a6, int a7, int a8, __int64 *a9, int a10);
void __thiscall sub_10041F90(int this);
// char __userpurge sub_10042610@<al>(int a1@<eax>, int a2@<ecx>, int a3@<ebp>, int a4, int a5);
void *__thiscall sub_10042AF0(void *this);
int sub_10042EC0();
int __cdecl sub_10042F70(_DWORD); // weak
// int __userpurge sub_10043380@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4);
int sub_10043B60();
int __thiscall sub_10043E80(int this, int a2);
// int __userpurge sub_10043E90@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4);
// int __userpurge sub_100440C0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3);
int __thiscall sub_100441D0(int this, int a2);
// int __userpurge sub_100441E0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4);
// int __userpurge sub_10044420@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4);
int __thiscall sub_10044580(int this, int a2);
int __thiscall sub_10044590(int this, int a2);
int __thiscall sub_100445A0(int this, int a2);
int __thiscall sub_100445B0(int this, int a2);
int __thiscall sub_100446A0(int this, int a2);
int __thiscall sub_10044760(int this, int a2);
int __thiscall sub_100447C0(int this, int a2);
int __thiscall sub_10044870(int this, int a2);
int __thiscall sub_100449A0(int this, int a2);
int __thiscall sub_100449F0(int this, int a2);
int __thiscall sub_10044A40(int this, int a2);
int __thiscall sub_10044B30(int this, int a2);
int __thiscall sub_10044B80(int this, int a2);
int __thiscall sub_10044C00(int this, unsigned int *a2);
int __thiscall sub_10044C80(int this, int a2);
// int __userpurge sub_10044E20@<eax>(int a1@<ecx>, int a2@<ebx>, int a3);
// int __userpurge sub_10045060@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4);
int __thiscall sub_100451C0(void *this, int a2);
int __thiscall sub_10045350(int this, int a2);
int __thiscall sub_100453B0(int this, int a2);
int __thiscall sub_10045410(int this, int a2);
int __thiscall sub_100455C0(int this, int a2);
int __thiscall sub_100456C0(int this, int a2);
int __thiscall sub_100456D0(int this, int a2);
int __thiscall sub_10045710(int this, int a2);
int __thiscall sub_10045760(int this, int a2);
int __thiscall sub_10045840(int this, int a2);
int __thiscall sub_10045850(int this, int a2);
int __thiscall sub_100458E0(int this, int a2);
int __thiscall sub_10045980(int this, unsigned int *a2);
int __thiscall sub_10045A00(int this, int a2);
int __thiscall sub_10045A10(int this, int a2);
int __thiscall sub_10045A50(int this, int a2);
int __thiscall sub_10045AB0(int this, int a2);
int __thiscall sub_10045AE0(int this, int a2);
int __stdcall sub_10045AF0(int); // weak
int __stdcall sub_10045B00(unsigned int a1);
int __thiscall sub_10045B70(int this);
int __thiscall sub_10045D60(void *this, int a2);
int __thiscall sub_100462E0(int this);
int __thiscall sub_100463B0(void *this, int a2);
// int __userpurge sub_10046AF0@<eax>(int a1@<ecx>, int a2@<edi>, signed int a3);
// int __userpurge sub_10047060@<eax>(int a1@<ecx>, int a2@<edi>, int a3);
// int __usercall sub_10047460@<eax>(int a1@<ecx>, int a2@<edi>);
int __thiscall sub_10047990(void *this, int a2);
int __thiscall sub_100480B0(void *this, int a2);
int __thiscall sub_100481B0(void *this, int a2);
int __thiscall sub_10048480(void *this, int a2);
int __stdcall sub_100484E0(unsigned int a1, int a2);
// int __userpurge sub_100486A0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3);
// int __usercall sub_10048770@<eax>(int a1@<ecx>, int a2@<edi>);
// int __usercall sub_100489E0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
void *__thiscall sub_10048AD0(void *this);
// unsigned int __usercall sub_10048D00@<eax>(int a1@<ebx>, int a2@<edi>);
int sub_10048D40(); // weak
int nullsub_4(); // weak
// void __usercall sub_10048D60(int a1@<ebx>, int a2@<edi>);
// char __usercall sub_10048DD0@<al>(int a1@<ebx>, int a2@<edi>);
void sub_10048E50();
int __thiscall sub_10048EA0(unsigned int this);
int __fastcall sub_10048EB0(int a1, int a2);
signed int __thiscall sub_10048EC0(int this);
int sub_10048ED0();
// char __usercall sub_10048F80@<al>(int a1@<eax>, int *a2@<edi>);
char __thiscall sub_100490B0(int this);
int __thiscall sub_100491A0(void *this);
_DWORD __stdcall sub_100493A0(_DWORD, _DWORD); // weak
int __thiscall sub_10049DE0(int this, int a2, int a3, float a4, int a5);
unsigned int __fastcall sub_1004A1D0(int a1, unsigned int a2, int a3);
int __thiscall sub_1004ADF0(void *this);
// int __userpurge sub_1004B2C0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4@<esi>, int a5, int a6, int a7);
int __thiscall sub_1004B920(int this);
// int __userpurge sub_1004BDC0@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4, unsigned int a5);
int __thiscall sub_1004CB40(void *this, int a2);
int __thiscall sub_1004D0E0(int this);
int __thiscall sub_1004D1A0(void *this, int a2);
void *__thiscall sub_1004D520(void *this, int a2);
int __thiscall sub_1004D5D0(void *this, int a2);
int __thiscall sub_1004DE90(void *this, int a2);
int __stdcall sub_1004DF00(unsigned int a1, int a2);
int __thiscall sub_1004DFA0(void *this, int a2);
int __thiscall sub_1004E090(void *this);
// int __usercall sub_1004E3C0@<eax>(const unsigned __int16 *a1@<eax>, int a2@<ecx>, void *a3@<ebx>, int *a4@<edi>, int a5@<esi>);
void *__thiscall sub_1004EC40(void *this);
int __thiscall sub_1004EFA0(void *this);
int __thiscall sub_1004F650(int this);
int __thiscall sub_1004FDC0(int this, int a2, int a3);
int __thiscall sub_10050270(void *this, int a2, int a3, int a4);
int __thiscall sub_100503C0(int this, int a2);
int __thiscall sub_100508D0(void *this, int a2);
// int __userpurge sub_10050D40@<eax>(int a1@<eax>, int a2@<ecx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>, __m128d a6@<xmm3>, __m128d a7@<xmm4>, int a8, signed int a9);
int __thiscall sub_10052080(void *this, int a2, unsigned int a3);
int __thiscall sub_10053050(int this, int a2, unsigned int *a3);
void __stdcall sub_100537D0(int a1);
// void __usercall sub_10053840(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl sub_100538D0(_DWORD); // weak
char __thiscall sub_10053A70(int this);
int __thiscall sub_10053B00(void *this);
_DWORD __stdcall sub_10053C90(_DWORD, _DWORD); // weak
unsigned int __thiscall sub_100543D0(int this);
// unsigned int __usercall sub_100546A0@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>);
// int __usercall sub_10054C40@<eax>(int a1@<ecx>, int a2@<edi>);
int __thiscall sub_10054E60(int this, float a2, int a3, int a4, int a5);
char __thiscall sub_10054FE0(void *this);
unsigned int __thiscall sub_100550F0(int this);
int __thiscall sub_10055150(int this);
int __thiscall sub_10055230(int this, char a2);
void __thiscall sub_10055510(int this, int a2, int a3);
// int __userpurge sub_10055A70@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4);
// int __userpurge sub_10055C60@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4, int a5);
// int __userpurge sub_10055FD0@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4);
// int __userpurge sub_10056110@<eax>(int a1@<ecx>, int a2@<ebp>, __m128d a3@<xmm3>, __m128d a4@<xmm4>, int a5, char a6, char a7);
int __thiscall sub_100562E0(int this, int a2);
// int __userpurge sub_10056440@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4);
void __thiscall sub_10056A90(int this, int a2);
// int __userpurge sub_10056B50@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4);
int __fastcall sub_10056CA0(int a1, int a2);
int __fastcall sub_10057000(int a1, int a2, int a3);
int __thiscall sub_10057090(int this);
int __stdcall sub_100577F0(int); // weak
int __fastcall sub_10057B40(int a1, int a2, int a3);
int __stdcall sub_10057C90(int); // weak
int __fastcall sub_10057CF0(int a1, int a2, int a3);
int __stdcall sub_10058500(int); // weak
int __fastcall sub_10058560(int a1, int a2, int a3);
void __cdecl sub_10058E10(int a1, int a2);
int __fastcall sub_10059270(int a1, int a2, int a3);
int __fastcall sub_100594B0(int a1, int a2, int a3);
int __stdcall sub_10059710(int); // weak
int __fastcall sub_10059760(int a1, int a2, int a3);
int __fastcall sub_10059990(int a1, int a2, int a3);
int __fastcall sub_10059BE0(int a1, int a2, int a3);
int __thiscall sub_10059C30(int this);
// void __usercall sub_10059D20(int a1@<ecx>, int a2@<ebx>, int a3@<edi>);
int __stdcall sub_10059E20(int a1, int a2);
int __stdcall sub_10059E30(int a1, int a2);
// int __userpurge sub_10059E40@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4);
// int __userpurge sub_10059EE0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4);
int __thiscall sub_10059F70(int this, int a2, int a3);
int __thiscall sub_10059FF0(int this, int a2, int a3);
// int __userpurge sub_1005A070@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4);
// int __userpurge sub_1005A110@<eax>(int a1@<ecx>, int a2@<edi>, int a3, int a4);
int __thiscall sub_1005A120(int this, int a2, int a3);
int __thiscall sub_1005A170(int this, int a2, int a3);
int __stdcall sub_1005A180(int a1, int a2);
// int __userpurge sub_1005A190@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4);
// int __usercall sub_1005A1E0@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<edi>);
// int __userpurge sub_1005B530@<eax>(__int16 a1@<dx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4);
int __thiscall sub_1005B6A0(int this);
// int __usercall sub_1005B6F0@<eax>(int a1@<ecx>, int a2@<ebx>);
// int __usercall sub_1005B970@<eax>(int a1@<ecx>, int a2@<ebx>);
void *__thiscall sub_1005BA30(void *this);
void __fastcall sub_1005BD80(int a1, unsigned int a2);
void sub_1005BDC0();
int sub_1005BEB0(); // weak
// int __usercall sub_1005BEC0@<eax>(int a1@<ecx>, int a2@<ebx>);
int __fastcall sub_1005BED0(int a1, int a2);
// char __usercall sub_1005BF20@<al>(int a1@<ebx>, int a2@<edi>);
// int __usercall sub_1005BFA0@<eax>(int a1@<edx>, __int16 a2@<cx>, __m128d a3@<xmm3>, __m128d a4@<xmm4>);
int __fastcall sub_1005BFB0(__int16 a1);
void *sub_1005BFD0();
// void __usercall sub_1005BFE0(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
void __fastcall sub_1005C020(int a1, int a2);
// unsigned int __usercall sub_1005C030@<eax>(int a1@<ebx>, int a2@<edi>);
int __thiscall sub_1005C040(int this);
void __stdcall sub_1005C120(int a1, int a2);
// void __userpurge sub_1005C170(int a1@<ebp>, int a2@<edi>, int a3@<esi>, int a4, int a5, int a6, unsigned int a7, unsigned int a8);
int __thiscall sub_1005C2E0(int this);
_DWORD __cdecl sub_1005C410();
int __thiscall sub_1005C6C0(int this);
// int __usercall sub_1005C800@<eax>(SIZE_T a1@<eax>, int a2@<ecx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>);
int __thiscall sub_1005CB90(int this);
_DWORD __cdecl sub_1005CC10(_DWORD, _DWORD);
int __cdecl sub_1005CE30(_DWORD); // weak
// DWORD __usercall sub_1005D390@<eax>(int a1@<esi>);
int __thiscall sub_1005D670(void *this);
int __stdcall sub_1005DB60(int a1);
// unsigned int __usercall sub_1005E260@<eax>(int a1@<ebx>, int a2@<edi>, int a3@<esi>);
int __fastcall sub_1005E410(int a1, unsigned int a2);
// char __usercall sub_1005E450@<al>(int a1@<ebx>, int a2@<edi>);
int __fastcall sub_1005E4F0(unsigned int a1, int a2);
int __thiscall sub_1005E500(void *this);
// void __usercall sub_1005E520(int a1@<ebx>);
int __fastcall sub_1005E570(unsigned int a1, int a2);
int __fastcall sub_1005E580(unsigned int a1, int a2);
unsigned __int32 __fastcall sub_1005E590(int a1);
int __fastcall sub_1005E5E0(unsigned int a1, int a2);
void sub_1005E5F0();
int __cdecl sub_1005E6E0(_DWORD); // weak
int sub_1005EB60();
int __thiscall sub_1005F040(int this, unsigned __int16 a2);
int __thiscall sub_1005F0E0(void *this);
int __thiscall sub_1005F150(int this, int a2);
void __thiscall sub_1005F920(int this);
int __thiscall sub_1005FB70(int this);
int __thiscall sub_1005FBD0(int this);
int __thiscall sub_1005FC60(int this);
int __thiscall sub_1005FD80(int this);
int __thiscall sub_1005FEA0(int this);
int __thiscall sub_10060090(int this);
// int __userpurge sub_10060100@<eax>(int a1@<ecx>, int a2@<edi>, int a3);
// int __usercall sub_10060400@<eax>(int a1@<ecx>, int a2@<edi>);
int __thiscall sub_10060660(int this);
int __thiscall sub_100607D0(void *this, int a2);
// int __userpurge sub_10060B90@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, signed int a4, signed int a5, signed int a6, signed int a7, signed int a8, signed int a9, signed int a10, signed int a11, int a12);
void *__thiscall sub_10060FE0(void *this);
__int16 __fastcall sub_100610A0(unsigned __int8 a1, __int16 a2);
int __fastcall sub_100610B0(__int16 a1, unsigned __int16 a2);
__int16 __fastcall sub_100610C0(char a1);
int sub_100610D0(); // weak
void *sub_100610E0();
// unsigned int __usercall sub_10061220@<eax>(int a1@<ebx>, int a2@<edi>);
// int __usercall sub_10061240@<eax>(int a1@<ebx>, int a2@<edi>);
// void __usercall sub_100612A0(int a1@<ebx>);
// int __usercall sub_10061300@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4@<ebp>);
__int64 __stdcall sub_10061440(unsigned __int64 a1, unsigned int a2, unsigned int a3);
// int __usercall sub_100614B0@<eax>(__m128i a1@<xmm0>);
// void __usercall sub_1006164D(int a1@<edx>, __int64 a2@<xmm0>);
// void __usercall sub_10061691(__m128d a1@<xmm0>);
// int __usercall sub_10061827@<eax>(__m128d a1@<xmm0>, __m128d a2@<xmm1>, __m128d a3@<xmm3>, __m128d a4@<xmm4>);
int __cdecl SEH_100021D0(int a1, int a2, int a3, int a4);
int __cdecl SEH_100023D0(int a1, int a2, int a3, int a4);
int __cdecl SEH_10002EF0(int a1, int a2, int a3, int a4);
int __cdecl SEH_10003050(int a1, int a2, int a3, int a4);
// int __usercall sub_100622E0@<eax>(int a1@<ebp>);
// int __usercall sub_100622EB@<eax>(int a1@<ebp>);
// int __usercall sub_100622F3@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_10004570(int a1, int a2, int a3, int a4);
// int __usercall sub_10062310@<eax>(int a1@<ebp>);
// int __usercall sub_10062318@<eax>(int a1@<ebp>);
int __cdecl SEH_10004AE0(int a1, int a2, int a3, int a4);
int __cdecl SEH_10004F30(int a1, int a2, int a3, int a4);
int __cdecl SEH_10007900(int a1, int a2, int a3, int a4);
// int __usercall sub_10062350@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10062358@<eax>(int a1@<ebp>);
void sub_10062360();
void sub_10062368();
int __cdecl SEH_10005D40(int a1, int a2, int a3, int a4);
// int __usercall sub_10062380@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_10006330(int a1, int a2, int a3, int a4);
// int __usercall sub_100623A0@<eax>(int a1@<ecx>, int a2@<ebp>);
int __cdecl SEH_10006AE0(int a1, int a2, int a3, int a4);
int __cdecl SEH_10006B80(int a1, int a2, int a3, int a4);
int __cdecl SEH_10007320(int a1, int a2, int a3, int a4);
// int __usercall sub_100623E0@<eax>(int a1@<ebp>);
int __cdecl SEH_10007680(int a1, int a2, int a3, int a4);
int __cdecl SEH_10007790(int a1, int a2, int a3, int a4);
// void __usercall sub_10062410(int a1@<ebp>);
// int __usercall sub_1006241B@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1000BDB0(int a1, int a2, int a3, int a4);
int __cdecl SEH_10007F10(int a1, int a2, int a3, int a4);
int __cdecl SEH_1000A930(int a1, int a2, int a3, int a4);
// void __usercall sub_10062450(int a1@<ebp>);
// void __usercall sub_10062458(int a1@<ebp>);
int __cdecl SEH_100091C0(int a1, int a2, int a3, int a4);
// int __usercall sub_10062470@<eax>(int a1@<ebp>);
// void *__usercall sub_1006247F@<eax>(int a1@<ebp>);
int __cdecl SEH_10009F40(int a1, int a2, int a3, int a4);
// int __usercall sub_100624A0@<eax>(int a1@<ebp>);
// int __usercall sub_100624B6@<eax>(int a1@<ebp>);
// int __usercall sub_100624CE@<eax>(int a1@<ebp>);
// int __usercall sub_100624E6@<eax>(int a1@<ebp>);
// int __usercall sub_100624FE@<eax>(int a1@<ebp>);
// int __usercall sub_10062516@<eax>(int a1@<ebp>);
// int __usercall sub_10062524@<eax>(int a1@<ebp>);
// int __usercall sub_10062532@<eax>(int a1@<ebp>);
// int __usercall sub_10062540@<eax>(int a1@<ebp>);
int __cdecl SEH_1000A0E0(int a1, int a2, int a3, int a4);
// void __usercall sub_10062560(int a1@<ebp>);
int __cdecl SEH_1000A880(int a1, int a2, int a3, int a4);
// int __usercall sub_10062580@<eax>(int a1@<ebx>, int a2@<ebp>);
// void __usercall sub_10062588(int a1@<ebp>);
// void __usercall sub_10062593(int a1@<ebp>);
int __cdecl SEH_1000B7E0(int a1, int a2, int a3, int a4);
// int __usercall sub_100625A8@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl sub_100625B0(int a1, int a2, int a3, int a4);
// int __usercall sub_100625D5@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_100625DD@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl sub_100625E5(int a1, int a2, int a3, int a4);
// int __usercall sub_1006260A@<eax>(int a1@<ecx>, int a2@<ebp>);
int __cdecl sub_10062618(int a1, int a2, int a3, int a4);
// int __usercall sub_10062633@<eax>(int a1@<ecx>, int a2@<ebp>);
// int __usercall sub_10062644@<eax>(int a1@<ecx>, int a2@<ebp>);
int __cdecl sub_10062655(int a1, int a2, int a3, int a4);
// char __usercall sub_10062670@<al>(int a1@<ebp>);
int __cdecl sub_10062678(int a1, int a2, int a3, int a4);
// int __usercall sub_10062693@<eax>(int a1@<ebp>);
// char __usercall sub_1006269B@<al>(int a1@<ebp>);
int __cdecl sub_100626A3(int a1, int a2, int a3, int a4);
// char __usercall sub_100626C8@<al>(int a1@<ebp>);
int __cdecl sub_100626D0(int a1, int a2, int a3, int a4);
// char __usercall sub_100626EB@<al>(int a1@<ebp>);
int __cdecl sub_100626F3(int a1, int a2, int a3, int a4);
// int __usercall sub_1006270E@<eax>(int a1@<ebp>);
// char __usercall sub_1006271B@<al>(int a1@<ebp>);
int __cdecl sub_10062723(int a1, int a2, int a3, int a4);
// unsigned int __usercall sub_1006273E@<eax>(int a1@<ebp>);
// char __usercall sub_10062746@<al>(int a1@<ebp>);
int __cdecl sub_10062751(int a1, int a2, int a3, int a4);
// int __usercall sub_1006276F@<eax>(int a1@<ecx>, int a2@<ebp>);
int __cdecl sub_1006277D(int a1, int a2, int a3, int a4);
// int __usercall sub_10062798@<eax>(int a1@<ebp>);
int __cdecl sub_100627A5(int a1, int a2, int a3, int a4);
// void __usercall sub_100627C0(int a1@<ebp>);
// void __usercall sub_100627CB(int a1@<ebp>);
int __cdecl sub_100627D6(int a1, int a2, int a3, int a4);
int __cdecl sub_100627F1(int a1, int a2, int a3, int a4);
// int __usercall sub_1006280C@<eax>(int a1@<ebp>);
int __cdecl sub_10062819(int a1, int a2, int a3, int a4);
// int __usercall sub_1006283E@<eax>(int a1@<ebp>);
int __cdecl sub_1006285B(int a1, int a2, int a3, int a4);
// int __usercall sub_10062876@<eax>(int a1@<ebp>);
// int __usercall sub_1006287E@<eax>(int a1@<ebp>);
int __cdecl sub_1006288E(int a1, int a2, int a3, int a4);
void sub_100628A9();
// int __usercall sub_100628B1@<eax>(int a1@<ebp>);
// int __usercall sub_100628C1@<eax>(int a1@<ebp>);
int __cdecl sub_100628D1(int a1, int a2, int a3, int a4);
// void __usercall sub_100628EC(int a1@<ebp>);
int __cdecl sub_100628FA(int a1, int a2, int a3, int a4);
void sub_10062915();
int __cdecl sub_1006291D(int a1, int a2, int a3, int a4);
// int __usercall sub_10062938@<eax>(int a1@<ebp>);
int __cdecl sub_10062946(int a1, int a2, int a3, int a4);
// void __usercall sub_10062961(int a1@<ebp>);
int __cdecl sub_1006296F(int a1, int a2, int a3, int a4);
// void __usercall sub_1006298A(int a1@<ebp>);
int __cdecl sub_1006299E(int a1, int a2, int a3, int a4);
int __cdecl sub_100629BF(int a1, int a2, int a3, int a4);
// void __usercall sub_100629DA(int a1@<ebp>);
int __cdecl sub_100629E8(int a1, int a2, int a3, int a4);
// void __usercall sub_10062A03(int a1@<ebp>);
// int __usercall sub_10062A0B@<eax>(int a1@<ebp>);
// int __usercall sub_10062A16@<eax>(int a1@<ebp>);
// int __usercall sub_10062A21@<eax>(int a1@<ebp>);
// int __usercall sub_10062A2C@<eax>(int a1@<ebp>);
// int __usercall sub_10062A37@<eax>(int a1@<ebp>);
// int __usercall sub_10062A42@<eax>(int a1@<ebp>);
// int __usercall sub_10062A4D@<eax>(int a1@<ebp>);
// void __usercall sub_10062A5B(int a1@<ebp>);
// int __usercall sub_10062A69@<eax>(int a1@<ebp>);
// void __usercall sub_10062A77(int a1@<ebp>);
int __cdecl sub_10062A85(int a1, int a2, int a3, int a4);
int __cdecl sub_10062AA6(int a1, int a2, int a3, int a4);
// int __usercall sub_10062AC1@<eax>(int a1@<ebp>);
int __cdecl sub_10062AD1(int a1, int a2, int a3, int a4);
// int __usercall sub_10062AEC@<eax>(int a1@<ebp>);
int __cdecl sub_10062AFC(int a1, int a2, int a3, int a4);
// int __usercall sub_10062B17@<eax>(int a1@<ebp>);
int __cdecl sub_10062B30(int a1, int a2, int a3, int a4);
void sub_10062B4B();
// int __usercall sub_10062B53@<eax>(int a1@<ebp>);
int __cdecl sub_10062B5B(int a1, int a2, int a3, int a4);
// int __usercall sub_10062B76@<eax>(int a1@<ebp>);
int __cdecl sub_10062B86(int a1, int a2, int a3, int a4);
int __cdecl sub_10062BA1(int a1, int a2, int a3, int a4);
// int __usercall sub_10062BBC@<eax>(int a1@<ebp>);
int __cdecl sub_10062BCC(int a1, int a2, int a3, int a4);
// int __usercall sub_10062BE7@<eax>(int a1@<ebp>);
void sub_10062C10();
// int __usercall sub_10062C18@<eax>(int a1@<ebp>);
// int __usercall sub_10062C28@<eax>(int a1@<ebp>);
int __cdecl sub_10062C38(int a1, int a2, int a3, int a4);
// int __usercall sub_10062C53@<eax>(int a1@<ebp>);
// int __usercall sub_10062C60@<eax>(int a1@<ebp>);
int __cdecl sub_10062C6D(int a1, int a2, int a3, int a4);
// void __usercall sub_10062C88(int a1@<ebp>);
// void __usercall sub_10062C90(int a1@<ebp>);
// int __usercall sub_10062C9E@<eax>(int a1@<ebp>);
int __cdecl sub_10062CAC(int a1, int a2, int a3, int a4);
int __cdecl sub_10062CC7(int a1, int a2, int a3, int a4);
// void __usercall sub_10062CE2(int a1@<ebp>);
int __cdecl sub_10062CF0(int a1, int a2, int a3, int a4);
// int __usercall sub_10062D0B@<eax>(int a1@<ebp>);
int __cdecl sub_10062D18(int a1, int a2, int a3, int a4);
// int __usercall sub_10062D33@<eax>(int a1@<ebp>);
int __cdecl sub_10062D41(int a1, int a2, int a3, int a4);
// int __usercall sub_10062D5C@<eax>(int a1@<ebp>);
int __cdecl sub_10062D67(int a1, int a2, int a3, int a4);
int __cdecl sub_10062D82(int a1, int a2, int a3, int a4);
// int __usercall sub_10062D9D@<eax>(int a1@<ebp>);
int __cdecl sub_10062DAD(int a1, int a2, int a3, int a4);
// void __usercall sub_10062DC8(int a1@<ebp>);
int __cdecl sub_10062DD6(int a1, int a2, int a3, int a4);
// int __usercall sub_10062DF1@<eax>(int a1@<ebp>);
// int __usercall sub_10062DFF@<eax>(int a1@<ebp>);
int __cdecl sub_10062E0D(int a1, int a2, int a3, int a4);
// int __usercall sub_10062E28@<eax>(int a1@<ebp>);
int __cdecl sub_10062E30(int a1, int a2, int a3, int a4);
// int __usercall sub_10062E55@<eax>(int a1@<ecx>, int a2@<ebp>);
int __cdecl sub_10062E67(int a1, int a2, int a3, int a4);
int __cdecl sub_10062E8E(int a1, int a2, int a3, int a4);
// int __usercall sub_10062EA9@<eax>(int a1@<ebp>);
int __cdecl sub_10062EB7(int a1, int a2, int a3, int a4);
int __cdecl sub_10062ED2(int a1, int a2, int a3, int a4);
// void __usercall sub_10062EED(int a1@<ebp>);
// int __usercall sub_10062EF8@<eax>(int a1@<ebp>);
int __cdecl sub_10062F08(int a1, int a2, int a3, int a4);
// void __usercall sub_10062F23(int a1@<ebp>);
int __cdecl sub_10062F31(int a1, int a2, int a3, int a4);
// void __usercall sub_10062F4C(int a1@<ebp>);
int __cdecl sub_10062F5A(int a1, int a2, int a3, int a4);
// int __usercall sub_10062F75@<eax>(int a1@<ebp>);
int __cdecl sub_10062F82(int a1, int a2, int a3, int a4);
int __cdecl sub_10062FA3(int a1, int a2, int a3, int a4);
// int __usercall sub_10062FBE@<eax>(int a1@<ebp>);
int __cdecl sub_10062FCB(int a1, int a2, int a3, int a4);
// void __usercall sub_10062FE6(int a1@<ebp>);
int __cdecl sub_10062FF4(int a1, int a2, int a3, int a4);
// void __usercall sub_1006300F(int a1@<ebp>);
int __cdecl sub_1006301D(int a1, int a2, int a3, int a4);
// void __usercall sub_10063042(int a1@<ebp>);
int __cdecl sub_1006304D(int a1, int a2, int a3, int a4);
// int __usercall sub_10063068@<eax>(int a1@<ebp>);
int __cdecl sub_10063075(int a1, int a2, int a3, int a4);
// void __usercall sub_10063090(int a1@<ebp>);
// void __usercall sub_1006309B(int a1@<ebp>);
int __cdecl sub_100630A6(int a1, int a2, int a3, int a4);
// int __usercall sub_100630C1@<eax>(int a1@<ebp>);
int __cdecl sub_100630CF(int a1, int a2, int a3, int a4);
// int __usercall sub_100630EA@<eax>(int a1@<ebp>);
int __cdecl sub_100630F8(int a1, int a2, int a3, int a4);
// int __usercall sub_10063113@<eax>(int a1@<ebp>);
int __cdecl sub_1006312C(int a1, int a2, int a3, int a4);
// int __usercall sub_10063147@<eax>(int a1@<ebp>);
int __cdecl sub_1006316A(int a1, int a2, int a3, int a4);
// int __usercall sub_10063185@<eax>(int a1@<ebp>);
// int __usercall sub_10063190@<eax>(int a1@<ebp>);
int __cdecl sub_1006319B(int a1, int a2, int a3, int a4);
// void __usercall sub_100631B6(int a1@<ebp>);
// int __usercall sub_100631C1@<eax>(int a1@<ebp>);
int __cdecl sub_100631CE(int a1, int a2, int a3, int a4);
// void __usercall sub_100631E9(int a1@<ebp>);
int __cdecl sub_100631F1(int a1, int a2, int a3, int a4);
// void __usercall sub_1006320C(int a1@<ebp>);
void sub_10063217();
// int __usercall sub_1006321F@<eax>(int a1@<ebp>);
// int __usercall sub_1006322A@<eax>(int a1@<ebp>);
// int __usercall sub_10063235@<eax>(int a1@<ebp>);
int __cdecl sub_10063243(int a1, int a2, int a3, int a4);
// void __usercall sub_1006325E(int a1@<ebp>);
int __cdecl sub_10063269(int a1, int a2, int a3, int a4);
// int __usercall sub_10063284@<eax>(int a1@<ebp>);
int __cdecl sub_10063291(int a1, int a2, int a3, int a4);
// int __usercall sub_100632AC@<eax>(int a1@<ebp>);
int __cdecl sub_100632B9(int a1, int a2, int a3, int a4);
int __cdecl sub_100632DA(int a1, int a2, int a3, int a4);
// int __usercall sub_100632F5@<eax>(int a1@<ebp>);
int __cdecl sub_100632FD(int a1, int a2, int a3, int a4);
int __cdecl sub_10063318(int a1, int a2, int a3, int a4);
// int __usercall sub_10063333@<eax>(int a1@<ebp>);
int __cdecl sub_10063343(int a1, int a2, int a3, int a4);
// int __usercall sub_1006335E@<eax>(int a1@<ebp>);
int __cdecl sub_1006336E(int a1, int a2, int a3, int a4);
// int __usercall sub_10063389@<eax>(int a1@<ebp>);
int __cdecl sub_10063399(int a1, int a2, int a3, int a4);
void sub_100633B4();
int __cdecl sub_100633BC(int a1, int a2, int a3, int a4);
// LPVOID __usercall sub_100633D7@<eax>(int a1@<ebp>);
int __cdecl sub_100633DF(int a1, int a2, int a3, int a4);
// int __usercall sub_100633FA@<eax>(int a1@<ebp>);
// int __usercall sub_10063402@<eax>(int a1@<ebp>);
int __cdecl sub_1006340D(int a1, int a2, int a3, int a4);
// int __usercall sub_10063428@<eax>(int a1@<ebp>);
int __cdecl sub_10063436(int a1, int a2, int a3, int a4);
int __cdecl sub_10063451(int a1, int a2, int a3, int a4);
// int __usercall sub_1006346C@<eax>(int a1@<ebp>);
int __cdecl sub_10063474(int a1, int a2, int a3, int a4);
int __cdecl sub_1006348F(int a1, int a2, int a3, int a4);
// void __usercall sub_100634AA(int a1@<ebp>);
// int __usercall sub_100634B2@<eax>(int a1@<ecx>, int a2@<ebp>);
int __cdecl sub_100634C4(int a1, int a2, int a3, int a4);
// void __usercall sub_100634DF(int a1@<ebp>);
// int __usercall sub_100634E7@<eax>(int a1@<ecx>, int a2@<ebp>);
int __cdecl sub_100634F5(int a1, int a2, int a3, int a4);
// int __usercall sub_10063510@<eax>(int a1@<ecx>, int a2@<ebp>);
int __cdecl sub_1006351E(int a1, int a2, int a3, int a4);
// int __usercall sub_10063539@<eax>(int a1@<ebp>);
int __cdecl sub_10063546(int a1, int a2, int a3, int a4);
int __cdecl sub_10063561(int a1, int a2, int a3, int a4);
int __cdecl sub_1006357C(int a1, int a2, int a3, int a4);
int __cdecl sub_10063597(int a1, int a2, int a3, int a4);
int __cdecl sub_100635B2(int a1, int a2, int a3, int a4);
// int __usercall sub_100635CD@<eax>(int a1@<ebp>);
int __cdecl sub_100635D5(int a1, int a2, int a3, int a4);
// int __usercall sub_100635F0@<eax>(int a1@<ebp>);
int __cdecl SEH_1003BB80(int a1, int a2, int a3, int a4);
void sub_1006360C();
void sub_10063614();
// int __usercall sub_1006361C@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10063624@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1003BCC0(int a1, int a2, int a3, int a4);
void sub_10063636();
void sub_1006363E();
void sub_10063646();
// int __usercall sub_1006364E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1003C080(int a1, int a2, int a3, int a4);
// int __usercall sub_10063660@<eax>(int a1@<ebp>);
int __cdecl SEH_1003D7B0(int a1, int a2, int a3, int a4);
void sub_1006367C();
void sub_10063684();
void sub_1006368C();
// int __usercall sub_10063694@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1003DB50(int a1, int a2, int a3, int a4);
void sub_100636A6();
void sub_100636AE();
void sub_100636B6();
// int __usercall sub_100636BE@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1003DF50(int a1, int a2, int a3, int a4);
// int __usercall sub_100636D0@<eax>(int a1@<ebx>, int a2@<ebp>);
// void __usercall sub_100636D8(int a1@<ebp>);
int __cdecl SEH_1003E6B0(int a1, int a2, int a3, int a4);
// int __usercall sub_100636EA@<eax>(int a1@<ebx>, int a2@<ebp>);
int __cdecl SEH_1003EA30(int a1, int a2, int a3, int a4);
void sub_100636FF();
int __cdecl SEH_1003F980(int a1, int a2, int a3, int a4);
void sub_10063720();
// int __usercall sub_10063728@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_10040330(int a1, int a2, int a3, int a4);
void sub_10063740();
int __cdecl SEH_10040760(int a1, int a2, int a3, int a4);
void sub_10063752();
int __cdecl SEH_100410C0(int a1, int a2, int a3, int a4);
int __cdecl SEH_10041F90(int a1, int a2, int a3, int a4);
// int __usercall sub_1006379E@<eax>(int a1@<ebp>);
// int __usercall sub_100637A6@<eax>(int a1@<ebp>);
// int __usercall sub_100637AE@<eax>(int a1@<ebp>);
int __cdecl sub_100637B6(int a1, int a2, int a3, int a4);
// void __usercall sub_100637C0(int a1@<ebp>);
// void __usercall sub_100637CB(int a1@<ebp>);
// int __usercall sub_100637D6@<eax>(int a1@<ebp>);
// void __usercall sub_100637E1(int a1@<ebp>);
// void __usercall sub_100637EC(int a1@<ebp>);
// int __usercall sub_100637F7@<eax>(int a1@<ebp>);
// void __usercall sub_10063802(int a1@<ebp>);
// void __usercall sub_1006380D(int a1@<ebp>);
// int __usercall sub_10063818@<eax>(int a1@<ebp>);
// int __usercall sub_10063823@<eax>(int a1@<ebp>);
// void __usercall sub_1006382E(int a1@<ebp>);
// int __usercall sub_10063839@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_10063844(int a1@<ebp>);
// void __usercall sub_1006384F(int a1@<ebp>);
// int __usercall sub_1006385A@<eax>(int a1@<ebp>);
// void __usercall sub_10063868(int a1@<ebp>);
// void __usercall sub_10063873(int a1@<ebp>);
// int __usercall sub_1006387E@<eax>(int a1@<ebp>);
// int __usercall sub_1006388C@<eax>(int a1@<ebp>);
// void __usercall sub_1006389A(int a1@<ebp>);
// void __usercall sub_100638A5(int a1@<ebp>);
int __cdecl SEH_10042AF0(int a1, int a2, int a3, int a4);
// int __usercall sub_100638C0@<eax>(int a1@<ebp>);
// int __usercall sub_100638CF@<eax>(int a1@<ebp>);
// int __usercall sub_100638DE@<eax>(int a1@<ebp>);
int __cdecl SEH_10042F70(int a1, int a2, int a3, int a4);
void sub_100638F7();
void sub_100638FF();
void sub_1006390A();
// int __usercall sub_10063912@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_100463B0(int a1, int a2, int a3, int a4);
void sub_10063927();
void sub_1006392F();
void sub_10063937();
// int __usercall sub_1006393F@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_10046AF0(int a1, int a2, int a3, int a4);
void sub_10063951();
void sub_10063959();
void sub_10063961();
// int __usercall sub_10063969@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_10047060(int a1, int a2, int a3, int a4);
void sub_1006397B();
void sub_10063983();
void sub_1006398B();
// int __usercall sub_10063993@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_10047460(int a1, int a2, int a3, int a4);
// int __usercall sub_100639A5@<eax>(int a1@<ebp>);
int __cdecl SEH_100481B0(int a1, int a2, int a3, int a4);
int __cdecl SEH_100489E0(int a1, int a2, int a3, int a4);
// int __usercall sub_100639C8@<eax>(int a1@<ebx>, int a2@<ebp>);
// int __usercall sub_100639D0@<eax>(int a1@<ebp>);
// int __usercall sub_100639DE@<eax>(int a1@<ebp>);
// int __usercall sub_100639EC@<eax>(int a1@<ebp>);
// int __usercall sub_100639FA@<eax>(int a1@<ebp>);
// int __usercall sub_10063A08@<eax>(int a1@<ebp>);
// int __usercall sub_10063A16@<eax>(int a1@<ebp>);
// int __usercall sub_10063A24@<eax>(int a1@<ebp>);
// int __usercall sub_10063A3C@<eax>(int a1@<ebp>);
int __cdecl SEH_10048AD0(int a1, int a2, int a3, int a4);
// int __usercall sub_10063A5E@<eax>(int a1@<ebp>);
int __cdecl SEH_10048DD0(int a1, int a2, int a3, int a4);
// int __usercall sub_10063A70@<eax>(int a1@<ebp>);
// int __usercall sub_10063A7F@<eax>(int a1@<ebp>);
// int __usercall sub_10063A8E@<eax>(int a1@<ebp>);
// int __usercall sub_10063A9D@<eax>(int a1@<ebp>);
int __cdecl sub_10063AAC(int a1, int a2, int a3, int a4);
void sub_10063AB6();
void sub_10063ABE();
void sub_10063AC6();
// int __usercall sub_10063ACE@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1004ADF0(int a1, int a2, int a3, int a4);
void sub_10063AE0();
void sub_10063AE8();
void sub_10063AF0();
// int __usercall sub_10063AF8@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10063B00@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10063B08@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10063B10@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10063B18@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10063B20@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10063B28@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// int __usercall sub_10063B30@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1004B2C0(int a1, int a2, int a3, int a4);
void sub_10063B42();
void sub_10063B4A();
void sub_10063B52();
// int __usercall sub_10063B5A@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1004B920(int a1, int a2, int a3, int a4);
void sub_10063B6C();
void sub_10063B74();
void sub_10063B7F();
// int __usercall sub_10063B87@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1004BDC0(int a1, int a2, int a3, int a4);
void sub_10063B9C();
void sub_10063BA4();
void sub_10063BAC();
// int __usercall sub_10063BB4@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1004CB40(int a1, int a2, int a3, int a4);
// int __usercall sub_10063BD2@<eax>(int a1@<ebp>);
// int __usercall sub_10063BE1@<eax>(int a1@<ebp>);
// int __usercall sub_10063BF0@<eax>(int a1@<ebp>);
// int __usercall sub_10063BFF@<eax>(int a1@<ebp>);
// int __usercall sub_10063C0E@<eax>(int a1@<ebp>);
int __cdecl SEH_1004D5D0(int a1, int a2, int a3, int a4);
int __cdecl SEH_1004E090(int a1, int a2, int a3, int a4);
// int __usercall sub_10063C4F@<eax>(int a1@<ebp>);
// int __usercall sub_10063C5E@<eax>(int a1@<ebp>);
// int __usercall sub_10063C70@<eax>(int a1@<ebp>);
int __cdecl sub_10063C82(int a1, int a2, int a3, int a4);
int __cdecl sub_10063C8C(int a1, int a2, int a3, int a4);
// int __usercall sub_10063C96@<eax>(int a1@<ebx>, int a2@<ebp>);
// int __usercall sub_10063C9E@<eax>(int a1@<ebp>);
// int __usercall sub_10063CAC@<eax>(int a1@<ebp>);
int __cdecl SEH_1004EC40(int a1, int a2, int a3, int a4);
// void __usercall sub_10063CD1(int a1@<ebp>);
int __cdecl sub_10063CD9(int a1, int a2, int a3, int a4);
void sub_10063CF0();
void sub_10063CF8();
void sub_10063D00();
// int __usercall sub_10063D08@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1004EFA0(int a1, int a2, int a3, int a4);
void sub_10063D1A();
void sub_10063D22();
void sub_10063D2A();
// int __usercall sub_10063D32@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1004F650(int a1, int a2, int a3, int a4);
void sub_10063D44();
void sub_10063D4C();
void sub_10063D54();
// int __usercall sub_10063D5C@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1004FDC0(int a1, int a2, int a3, int a4);
void sub_10063D6E();
void sub_10063D76();
void sub_10063D7E();
// int __usercall sub_10063D86@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_100503C0(int a1, int a2, int a3, int a4);
void sub_10063D98();
void sub_10063DA0();
void sub_10063DA8();
// int __usercall sub_10063DB0@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_100508D0(int a1, int a2, int a3, int a4);
void sub_10063DC2();
void sub_10063DCA();
void sub_10063DD5();
// int __usercall sub_10063DDD@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl sub_10063DE8(int a1, int a2, int a3, int a4);
void sub_10063DF2();
void sub_10063DFA();
void sub_10063E02();
// int __usercall sub_10063E0A@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_10052080(int a1, int a2, int a3, int a4);
// int __usercall sub_10063E20@<eax>(int a1@<ebp>);
// int __usercall sub_10063E2F@<eax>(int a1@<ebp>);
// int __usercall sub_10063E3E@<eax>(int a1@<ebp>);
// int __usercall sub_10063E4D@<eax>(int a1@<ebp>);
// int __usercall sub_10063E5C@<eax>(int a1@<ebp>);
int __cdecl sub_10063E6B(int a1, int a2, int a3, int a4);
int __cdecl SEH_10059C30(int a1, int a2, int a3, int a4);
int __cdecl SEH_1005B970(int a1, int a2, int a3, int a4);
// int __usercall sub_10063E8F@<eax>(int a1@<ebx>, int a2@<ebp>);
// int __usercall sub_10063E97@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
// void __usercall sub_10063EA5(int a1@<ebp>);
// void __usercall sub_10063EB0(int a1@<ebp>);
// int __usercall sub_10063EBB@<eax>(int a1@<ebp>);
int __cdecl SEH_1005BA30(int a1, int a2, int a3, int a4);
// void __usercall sub_10063ED3(int a1@<ebp>);
int __cdecl SEH_1005BF20(int a1, int a2, int a3, int a4);
int __cdecl SEH_1005C6C0(int a1, int a2, int a3, int a4);
// int __usercall sub_10063F06@<eax>(int a1@<ebp>);
// int __usercall sub_10063F15@<eax>(int a1@<ebp>);
int __cdecl sub_10063F24(int a1, int a2, int a3, int a4);
// int __usercall sub_10063F30@<eax>(int a1@<ebp>);
// int __usercall sub_10063F3F@<eax>(int a1@<ebp>);
// int __usercall sub_10063F4E@<eax>(int a1@<ebp>);
// int __usercall sub_10063F5D@<eax>(int a1@<ebp>);
int __cdecl SEH_1005CE30(int a1, int a2, int a3, int a4);
void sub_10063F76();
// int __usercall sub_10063F7E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_1005E260(int a1, int a2, int a3, int a4);
// void __usercall sub_10063F96(int a1@<ebp>);
int __cdecl SEH_1005E450(int a1, int a2, int a3, int a4);
int __cdecl SEH_1005E5F0(int a1, int a2, int a3, int a4);
// int __usercall sub_10063FC6@<eax>(int a1@<ebp>);
// int __usercall sub_10063FD5@<eax>(int a1@<ebp>);
// int __usercall sub_10063FE4@<eax>(int a1@<ebp>);
// int __usercall sub_10063FF3@<eax>(int a1@<ebp>);
int __cdecl SEH_1005E6E0(int a1, int a2, int a3, int a4);
void sub_1006400C();
// int __usercall sub_10064014@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_10060100(int a1, int a2, int a3, int a4);
void sub_10064026();
// int __usercall sub_1006402E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_10060400(int a1, int a2, int a3, int a4);
void sub_10064040();
// int __usercall sub_10064048@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>);
int __cdecl SEH_100607D0(int a1, int a2, int a3, int a4);
// void __usercall sub_1006405A(int a1@<ebp>);
int __cdecl SEH_10061240(int a1, int a2, int a3, int a4);
// int __usercall sub_10064070@<eax>(int a1@<ebx>, int a2@<edi>);
// int __usercall sub_100640D0@<eax>(int a1@<ebx>);
int sub_100640E0(); // weak
int __thiscall sub_100640F0(int this);
// int __usercall sub_10064130@<eax>(int a1@<ebx>, int a2@<edi>);
int nullsub_5(); // weak
void sub_10064189();
void sub_10064193();
int sub_1006419D();
void sub_100641A7();
// int __stdcall D3DCompile(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak
// DWORD __stdcall SignalObjectAndWait(HANDLE hObjectToSignal, HANDLE hObjectToWaitOn, DWORD dwMilliseconds, BOOL bAlertable);
// BOOL __stdcall SetEndOfFile(HANDLE hFile);
// BOOL __stdcall WriteConsoleW(HANDLE hConsoleOutput, const void *lpBuffer, DWORD nNumberOfCharsToWrite, LPDWORD lpNumberOfCharsWritten, LPVOID lpReserved);
// int __stdcall MultiByteToWideChar(UINT CodePage, DWORD dwFlags, LPCSTR lpMultiByteStr, int cbMultiByte, LPWSTR lpWideCharStr, int cchWideChar);
// void __stdcall OutputDebugStringW(LPCWSTR lpOutputString);
// int __stdcall WideCharToMultiByte(UINT CodePage, DWORD dwFlags, LPCWSTR lpWideCharStr, int cchWideChar, LPSTR lpMultiByteStr, int cbMultiByte, LPCSTR lpDefaultChar, LPBOOL lpUsedDefaultChar);
// BOOL __stdcall QueryPerformanceCounter(LARGE_INTEGER *lpPerformanceCount);
// BOOL __stdcall SetThreadPriority(HANDLE hThread, int nPriority);
// DWORD __stdcall WaitForSingleObject(HANDLE hHandle, DWORD dwMilliseconds);
// HANDLE __stdcall CreateEventW(LPSECURITY_ATTRIBUTES lpEventAttributes, BOOL bManualReset, BOOL bInitialState, LPCWSTR lpName);
// void __stdcall Sleep(DWORD dwMilliseconds);
// BOOL __stdcall SetEvent(HANDLE hEvent);
// BOOL __stdcall CloseHandle(HANDLE hObject);
// DWORD __stdcall SizeofResource(HMODULE hModule, HRSRC hResInfo);
// BOOL __stdcall InitializeCriticalSectionEx(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount, DWORD Flags);
// BOOL __stdcall FreeResource(HGLOBAL hResData);
// DWORD __stdcall GetLastError();
// LPVOID __stdcall LockResource(HGLOBAL hResData);
// void __stdcall RaiseException(DWORD dwExceptionCode, DWORD dwExceptionFlags, DWORD nNumberOfArguments, const ULONG_PTR *lpArguments);
// HGLOBAL __stdcall LoadResource(HMODULE hModule, HRSRC hResInfo);
// HRSRC __stdcall FindResourceW(HMODULE hModule, LPCWSTR lpName, LPCWSTR lpType);
// PVOID __stdcall DecodePointer(PVOID Ptr);
// void __stdcall DeleteCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall ReleaseSRWLockShared(PSRWLOCK SRWLock);
// void __stdcall AcquireSRWLockShared(PSRWLOCK SRWLock);
// DWORD __stdcall GetModuleFileNameW(HMODULE hModule, LPWSTR lpFilename, DWORD nSize);
// HMODULE __stdcall GetModuleHandleW(LPCWSTR lpModuleName);
// BOOL __stdcall SetStdHandle(DWORD nStdHandle, HANDLE hHandle);
// HANDLE __stdcall CreateFileW(LPCWSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile);
// BOOL __stdcall FlushFileBuffers(HANDLE hFile);
// BOOL __stdcall FreeEnvironmentStringsW(LPWCH);
// LPWCH __stdcall GetEnvironmentStringsW();
// LPWSTR __stdcall GetCommandLineW();
// LPSTR __stdcall GetCommandLineA();
// BOOL __stdcall GetCPInfo(UINT CodePage, LPCPINFO lpCPInfo);
// UINT __stdcall GetOEMCP();
// BOOL __stdcall IsValidCodePage(UINT CodePage);
// BOOL __stdcall FindNextFileA(HANDLE hFindFile, LPWIN32_FIND_DATAA lpFindFileData);
// HANDLE __stdcall FindFirstFileExA(LPCSTR lpFileName, FINDEX_INFO_LEVELS fInfoLevelId, LPVOID lpFindFileData, FINDEX_SEARCH_OPS fSearchOp, LPVOID lpSearchFilter, DWORD dwAdditionalFlags);
// BOOL __stdcall FindClose(HANDLE hFindFile);
// HANDLE __stdcall GetProcessHeap();
// BOOL __stdcall HeapQueryInformation(HANDLE HeapHandle, HEAP_INFORMATION_CLASS HeapInformationClass, PVOID HeapInformation, SIZE_T HeapInformationLength, PSIZE_T ReturnLength);
// SIZE_T __stdcall HeapSize(HANDLE hHeap, DWORD dwFlags, LPCVOID lpMem);
// void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// BOOL __stdcall TryEnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection);
// DWORD __stdcall GetCurrentThreadId();
// BOOL __stdcall DuplicateHandle(HANDLE hSourceProcessHandle, HANDLE hSourceHandle, HANDLE hTargetProcessHandle, LPHANDLE lpTargetHandle, DWORD dwDesiredAccess, BOOL bInheritHandle, DWORD dwOptions);
// DWORD __stdcall WaitForSingleObjectEx(HANDLE hHandle, DWORD dwMilliseconds, BOOL bAlertable);
// HANDLE __stdcall GetCurrentProcess();
// HANDLE __stdcall GetCurrentThread();
// BOOL __stdcall GetExitCodeThread(HANDLE hThread, LPDWORD lpExitCode);
// void __stdcall SetLastError(DWORD dwErrCode);
// BOOL __stdcall InitializeCriticalSectionAndSpinCount(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount);
// DWORD __stdcall TlsAlloc();
// LPVOID __stdcall TlsGetValue(DWORD dwTlsIndex);
// BOOL __stdcall TlsSetValue(DWORD dwTlsIndex, LPVOID lpTlsValue);
// BOOL __stdcall TlsFree(DWORD dwTlsIndex);
// void __stdcall GetSystemTimeAsFileTime(LPFILETIME lpSystemTimeAsFileTime);
// DWORD __stdcall GetTickCount();
// FARPROC __stdcall GetProcAddress(HMODULE hModule, LPCSTR lpProcName);
// BOOL __stdcall ResetEvent(HANDLE hEvent);
// BOOL __stdcall IsDebuggerPresent();
// LONG __stdcall UnhandledExceptionFilter(struct _EXCEPTION_POINTERS *ExceptionInfo);
// LPTOP_LEVEL_EXCEPTION_FILTER __stdcall SetUnhandledExceptionFilter(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter);
// void __stdcall GetStartupInfoW(LPSTARTUPINFOW lpStartupInfo);
// DWORD __stdcall GetCurrentProcessId();
// void __stdcall InitializeSListHead(PSLIST_HEADER ListHead);
// BOOL __stdcall TerminateProcess(HANDLE hProcess, UINT uExitCode);
// HANDLE __stdcall CreateTimerQueue();
// HANDLE __stdcall CreateThread(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPTHREAD_START_ROUTINE lpStartAddress, LPVOID lpParameter, DWORD dwCreationFlags, LPDWORD lpThreadId);
// int __stdcall GetThreadPriority(HANDLE hThread);
// BOOL __stdcall GetLogicalProcessorInformation(PSYSTEM_LOGICAL_PROCESSOR_INFORMATION Buffer, PDWORD ReturnedLength);
// BOOL __stdcall CreateTimerQueueTimer(PHANDLE phNewTimer, HANDLE TimerQueue, WAITORTIMERCALLBACK Callback, PVOID Parameter, DWORD DueTime, DWORD Period, ULONG Flags);
// BOOL __stdcall ChangeTimerQueueTimer(HANDLE TimerQueue, HANDLE Timer, ULONG DueTime, ULONG Period);
// BOOL __stdcall DeleteTimerQueueTimer(HANDLE TimerQueue, HANDLE Timer, HANDLE CompletionEvent);
// BOOL __stdcall GetNumaHighestNodeNumber(PULONG HighestNodeNumber);
// BOOL __stdcall GetProcessAffinityMask(HANDLE hProcess, PDWORD_PTR lpProcessAffinityMask, PDWORD_PTR lpSystemAffinityMask);
// DWORD_PTR __stdcall SetThreadAffinityMask(HANDLE hThread, DWORD_PTR dwThreadAffinityMask);
// BOOL __stdcall RegisterWaitForSingleObject(PHANDLE phNewWaitObject, HANDLE hObject, WAITORTIMERCALLBACK Callback, PVOID Context, ULONG dwMilliseconds, ULONG dwFlags);
// BOOL __stdcall UnregisterWait(HANDLE WaitHandle);
// PVOID __stdcall EncodePointer(PVOID Ptr);
// BOOL __stdcall GetThreadTimes(HANDLE hThread, LPFILETIME lpCreationTime, LPFILETIME lpExitTime, LPFILETIME lpKernelTime, LPFILETIME lpUserTime);
// BOOL __stdcall FreeLibrary(HMODULE hLibModule);
// void __stdcall FreeLibraryAndExitThread(HMODULE hLibModule, DWORD dwExitCode);
// HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName);
// HMODULE __stdcall LoadLibraryExW(LPCWSTR lpLibFileName, HANDLE hFile, DWORD dwFlags);
// BOOL __stdcall GetVersionExW(LPOSVERSIONINFOW lpVersionInformation);
// LPVOID __stdcall VirtualAlloc(LPVOID lpAddress, SIZE_T dwSize, DWORD flAllocationType, DWORD flProtect);
// BOOL __stdcall VirtualFree(LPVOID lpAddress, SIZE_T dwSize, DWORD dwFreeType);
// BOOL __stdcall VirtualProtect(LPVOID lpAddress, SIZE_T dwSize, DWORD flNewProtect, PDWORD lpflOldProtect);
// BOOL __stdcall ReleaseSemaphore(HANDLE hSemaphore, LONG lReleaseCount, LPLONG lpPreviousCount);
// PSINGLE_LIST_ENTRY __stdcall InterlockedPopEntrySList(PSLIST_HEADER ListHead);
// PSINGLE_LIST_ENTRY __stdcall InterlockedPushEntrySList(PSLIST_HEADER ListHead, PSINGLE_LIST_ENTRY ListEntry);
// PSINGLE_LIST_ENTRY __stdcall InterlockedFlushSList(PSLIST_HEADER ListHead);
// USHORT __stdcall QueryDepthSList(PSLIST_HEADER ListHead);
// BOOL __stdcall UnregisterWaitEx(HANDLE WaitHandle, HANDLE CompletionEvent);
// HMODULE __stdcall LoadLibraryW(LPCWSTR lpLibFileName);
// void __stdcall RtlUnwind(PVOID TargetFrame, PVOID TargetIp, PEXCEPTION_RECORD ExceptionRecord, PVOID ReturnValue);
// BOOL __stdcall ReadFile(HANDLE hFile, LPVOID lpBuffer, DWORD nNumberOfBytesToRead, LPDWORD lpNumberOfBytesRead, LPOVERLAPPED lpOverlapped);
// void __stdcall ExitThread(DWORD dwExitCode);
// DWORD __stdcall ResumeThread(HANDLE hThread);
// BOOL __stdcall GetModuleHandleExW(DWORD dwFlags, LPCWSTR lpModuleName, HMODULE *phModule);
// LPVOID __stdcall HeapAlloc(HANDLE hHeap, DWORD dwFlags, SIZE_T dwBytes);
// BOOL __stdcall HeapFree(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem);
// void __stdcall ExitProcess(UINT uExitCode);
// DWORD __stdcall GetModuleFileNameA(HMODULE hModule, LPSTR lpFilename, DWORD nSize);
// BOOL __stdcall WriteFile(HANDLE hFile, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite, LPDWORD lpNumberOfBytesWritten, LPOVERLAPPED lpOverlapped);
// UINT __stdcall GetConsoleCP();
// BOOL __stdcall GetConsoleMode(HANDLE hConsoleHandle, LPDWORD lpMode);
// UINT __stdcall GetACP();
// DWORD __stdcall GetFileType(HANDLE hFile);
// BOOL __stdcall SetFilePointerEx(HANDLE hFile, LARGE_INTEGER liDistanceToMove, PLARGE_INTEGER lpNewFilePointer, DWORD dwMoveMethod);
// BOOL __stdcall ReadConsoleW(HANDLE hConsoleInput, LPVOID lpBuffer, DWORD nNumberOfCharsToRead, LPDWORD lpNumberOfCharsRead, PCONSOLE_READCONSOLE_CONTROL pInputControl);
// int __stdcall LCMapStringW(LCID Locale, DWORD dwMapFlags, LPCWSTR lpSrcStr, int cchSrc, LPWSTR lpDestStr, int cchDest);
// BOOL __stdcall GetStringTypeW(DWORD dwInfoType, LPCWSTR lpSrcStr, int cchSrc, LPWORD lpCharType);
// LPVOID __stdcall HeapReAlloc(HANDLE hHeap, DWORD dwFlags, LPVOID lpMem, SIZE_T dwBytes);
// LONG __stdcall GetWindowLongW(HWND hWnd, int nIndex);
// BOOL __stdcall GetWindowRect(HWND hWnd, LPRECT lpRect);
// BOOL __stdcall SetWindowPos(HWND hWnd, HWND hWndInsertAfter, int X, int Y, int cx, int cy, UINT uFlags);
// BOOL __stdcall SetWindowTextW(HWND hWnd, LPCWSTR lpString);
// BOOL __stdcall GetWindowInfo(HWND hwnd, PWINDOWINFO pwi);
// BOOL __stdcall AdjustWindowRect(LPRECT lpRect, DWORD dwStyle, BOOL bMenu);
// int __stdcall MessageBoxW(HWND hWnd, LPCWSTR lpText, LPCWSTR lpCaption, UINT uType);
// BOOL __stdcall CheckRadioButton(HWND hDlg, int nIDFirstButton, int nIDLastButton, int nIDCheckButton);
// BOOL __stdcall EndDialog(HWND hDlg, INT_PTR nResult);
// HWND __stdcall GetActiveWindow();
// LRESULT __stdcall SendDlgItemMessageW(HWND hDlg, int nIDDlgItem, UINT Msg, WPARAM wParam, LPARAM lParam);
// UINT __stdcall GetDlgItemInt(HWND hDlg, int nIDDlgItem, BOOL *lpTranslated, BOOL bSigned);
// HWND __stdcall GetDlgItem(HWND hDlg, int nIDDlgItem);
// BOOL __stdcall EnumDisplaySettingsW(LPCWSTR lpszDeviceName, DWORD iModeNum, DEVMODEW *lpDevMode);
// BOOL __stdcall SetDlgItemInt(HWND hDlg, int nIDDlgItem, UINT uValue, BOOL bSigned);
// INT_PTR __stdcall DialogBoxParamW(HINSTANCE hInstance, LPCWSTR lpTemplateName, HWND hWndParent, DLGPROC lpDialogFunc, LPARAM dwInitParam);
// BOOL __stdcall EnableWindow(HWND hWnd, BOOL bEnable);
// int __stdcall GetSystemMetrics(int nIndex);
// int __stdcall ShowCursor(BOOL bShow);
// DWORD __stdcall timeGetTime();
// int __stdcall D3D11CreateDeviceAndSwapChain(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_10001340; // weak
_UNKNOWN loc_10002840; // weak
_UNKNOWN loc_10002940; // weak
_UNKNOWN loc_10002970; // weak
const WCHAR loc_10003910 = 19595u; // idb
_UNKNOWN loc_10004530; // weak
_UNKNOWN loc_100087D0; // weak
_UNKNOWN loc_1001282F; // weak
_UNKNOWN loc_10016B9B; // weak
_UNKNOWN loc_1001A1C9; // weak
_UNKNOWN loc_1001B5F9; // weak
_UNKNOWN loc_1001C5B0; // weak
_UNKNOWN loc_10023630; // weak
void *off_10026344[4] = { &loc_10026354, &loc_1002635C, &loc_10026368, &loc_1002637C }; // weak
_UNKNOWN loc_10027611; // weak
_UNKNOWN loc_10027713; // weak
void *off_10027B44[4] = { &loc_10027B54, &loc_10027B5C, &loc_10027B68, &loc_10027B7C }; // weak
_UNKNOWN loc_10028DE2; // weak
_UNKNOWN loc_10028F20; // weak
_UNKNOWN loc_100350B6; // weak
_UNKNOWN loc_100351D0; // weak
_UNKNOWN loc_1003AC70; // weak
_UNKNOWN loc_1003AEC5; // weak
_UNKNOWN loc_100614F3; // weak
_UNKNOWN loc_10061579; // weak
_UNKNOWN loc_1006163B; // weak
int (__thiscall *__guard_check_icall_fptr)(_DWORD) = &nullsub_1; // weak
_UNKNOWN unk_10065250; // weak
_UNKNOWN unk_10065284; // weak
_UNKNOWN unk_10065288; // weak
_UNKNOWN unk_100652A0; // weak
_UNKNOWN unk_100652AC; // weak
_UNKNOWN unk_100652C0; // weak
_UNKNOWN unk_100652C4; // weak
_UNKNOWN unk_100652C8; // weak
int (__thiscall *off_100652D4)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_100652F4)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10065310)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_1006531C)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10065328)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10065334)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10065340)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__stdcall *off_1006534C)(int) = &sub_1000DD05; // weak
int (__stdcall *off_10065364)(int) = &sub_1000DD20; // weak
int (__stdcall *off_1006537C)(int) = &sub_1000DCEF; // weak
char *off_10065390[7] =
{
  "device or resource busy",
  "invalid argument",
  "no such process",
  "not enough memory",
  "operation not permitted",
  "resource deadlock would occur",
  "resource unavailable try again"
}; // weak
int dword_100653AC[] = { 16 }; // weak
int (__thiscall *off_10065474)(LPVOID lpMem, char) = &sub_1000DFE0; // weak
int (__thiscall *off_10065490)(LPVOID lpMem, char) = &sub_1000E003; // weak
_UNKNOWN unk_10065498; // weak
int (__thiscall *off_100654A0)(LPVOID lpMem, char) = &sub_1000E003; // weak
int (__thiscall *off_100654AC)(LPVOID lpMem, char) = &sub_1000DFE0; // weak
int (*off_100654D0[2])() = { &sub_1000E2A1, &sub_1000E445 }; // weak
int (*off_100654E8[2])() = { &sub_1000E2AC, &sub_1000E456 }; // weak
int (*off_10065500[2])() = { &sub_1000E299, &sub_1000E43D }; // weak
_UNKNOWN unk_10065EA0; // weak
int (__thiscall *off_10066300)(LPVOID lpMem, char) = &sub_1000F661; // weak
int (__thiscall *off_1006630C)(LPVOID lpMem, char) = &sub_1001A074; // weak
struct _EXCEPTION_POINTERS ExceptionInfo = { &dword_1007C1B0, &dword_1007C200 }; // idb
_UNKNOWN unk_10066334; // weak
int (*off_100663D0[5])() = { &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7 }; // weak
int (__stdcall *off_100663E8)(int, int) = &sub_10010829; // weak
int (*off_10066400[5])() = { &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7 }; // weak
int (__thiscall *off_1006641C)(LPVOID lpMem, int, int) = &sub_100108E0; // weak
int (__thiscall *off_10066438)(LPVOID lpMem, int, int) = &sub_10010926; // weak
int (__stdcall *off_10066454)(int, int) = &sub_10010885; // weak
int (__thiscall *off_1006646C)(LPVOID lpMem, char) = &sub_100105B5; // weak
int (__thiscall *off_1006647C)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_1006649C)(LPVOID lpMem, char) = &sub_10011C49; // weak
int (__thiscall *off_10066518)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10066524)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (*off_10066530[2])() = { &sub_100144F7, &sub_100144E9 }; // weak
int (*off_1006653C[5])() = { &sub_1001450E, &sub_100144F0, &sub_100145BA, &sub_100144E9, &sub_100144D8 }; // weak
int (*off_10066554[2])() = { &sub_1001574C, &sub_1001579C }; // weak
int (__thiscall *off_100665B4)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_100665C0)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (*off_100665CC[4])() = { &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7 }; // weak
int (__thiscall *off_100665E4)(LPVOID lpMem, char) = &sub_10016E01; // weak
int (__thiscall *off_1006661C)(LPVOID lpMem, char) = &sub_10016EAB; // weak
int (__thiscall *off_10066624)(LPVOID lpMem, char) = &sub_10016DBB; // weak
int (__thiscall *off_1006662C)(LPVOID lpMem, char) = &sub_10016E24; // weak
int (__thiscall *off_10066690)(LPVOID lpMem, char) = &sub_10016D96; // weak
int (__stdcall *off_100666A4)(int, int) = &sub_10022B86; // weak
int (__thiscall *off_100666D0)(LPVOID lpMem, char) = &sub_10016D96; // weak
int (__stdcall *off_100666E4)(int, int) = &sub_10022B86; // weak
int (__thiscall *off_10066734)(LPVOID lpMem, char) = &sub_10011C49; // weak
int (__thiscall *off_10066740)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_1006674C)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10066758)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10066764)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10066770)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_1006677C)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10066788)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10066794)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (*off_100667A0[5])() = { &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7 }; // weak
int dword_10066808[] = { 0 }; // weak
int (__thiscall *off_1006689C)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_100668A8)(LPVOID lpMem, char) = &sub_1001B671; // weak
int (__thiscall *off_100668B4)(LPVOID lpMem, char) = &sub_1001B64F; // weak
int (__thiscall *off_100668C4)(LPVOID lpMem, char) = &sub_1001B62D; // weak
int (__thiscall *off_100668D4)(LPVOID lpMem, char) = &sub_1001B601; // weak
int (*off_100669BC[2])() = { &sub_1001C8DD, &sub_100240FC }; // weak
int (__stdcall *off_100669FC)(int) = &sub_1001E092; // weak
int (*off_10066A80)() = &sub_1002491B; // weak
int (*off_10066A9C[5])() = { &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7 }; // weak
int dword_10066AB4[] = { 0 }; // weak
void *off_10066AC4 = &unk_10073F14; // weak
int (__stdcall *off_10066AC8)(int, int) = &sub_1001E6DE; // weak
int (__stdcall *off_10066AF4)(int, int) = &sub_1001E6DE; // weak
_UNKNOWN unk_10066B1C; // weak
_DWORD dword_10066B3C[4] = { 3792248714, 1194401290, 3574440580, 1632799356 }; // idb
_DWORD dword_10066B5C[4] = { 1462214671, 1159286974, 1777817218, 3422450072 }; // idb
_DWORD dword_10066B7C[4] = { 791117919, 1321997942, 2961111702, 791692445 }; // idb
int (__thiscall *off_10066C84)(LPVOID lpMem, char) = &sub_1001ED37; // weak
int dword_10066CA8[] = { 8 }; // weak
int (*off_10066E34[5])() = { &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7, &sub_100273F7 }; // weak
int (*off_10066E4C[3])() = { &sub_100209DA, &sub_100209ED, &sub_100209E6 }; // weak
int (*off_10066E74[5])() = { &sub_100209DE, &sub_10020A05, &sub_1001AAE5, &sub_10021314, &sub_10020BAC }; // weak
int (__thiscall *off_10066ED0)(LPVOID lpMem, char) = &sub_10021D21; // weak
int (__stdcall *off_10066EE4)(int, int) = &sub_10022B86; // weak
int (*off_10066F18[5])() = { &sub_1001AACC, &sub_10023372, &sub_1001AAE5, &sub_10023500, &sub_100233BB }; // weak
int (*off_10066F64[7])() =
{
  &sub_100273F7,
  &sub_100273F7,
  &sub_100273F7,
  &sub_100273F7,
  &sub_100273F7,
  &sub_100273F7,
  &sub_100273F7
}; // weak
int (*off_10066F84[3])() = { &sub_100209DA, &sub_100209ED, &sub_100209E6 }; // weak
int (*off_10066FAC[5])() = { &sub_100209DE, &sub_10020A05, &sub_1001AAE5, &sub_10021314, &sub_10020BAC }; // weak
int (*off_10066FF8[2])() = { &sub_10023740, &sub_1002378B }; // weak
int (__stdcall *off_10067018)(int) = &sub_10023628; // weak
int (*off_1006707C[2])() = { &sub_100240FC, &sub_100240F4 }; // weak
int (*off_100670A8[2])() = { &sub_100240FC, &sub_100240F4 }; // weak
int (*off_100670E0[4])() = { &sub_1002491B, &sub_100273F7, &sub_100273F7, &sub_100273F7 }; // weak
int (__thiscall *off_100670FC)(LPVOID lpMem, char) = &sub_100260A7; // weak
int (*off_10067120)() = &sub_10026654; // weak
int (__thiscall *off_10067128)(LPVOID lpMem, char) = &sub_1001A074; // weak
_UNKNOWN unk_10067140; // weak
LPCWSTR lpLibFileName = L"advapi32"; // idb
_UNKNOWN unk_10067210; // weak
_UNKNOWN unk_10067218; // weak
_UNKNOWN unk_10067220; // weak
_UNKNOWN unk_10067228; // weak
_UNKNOWN unk_10067230; // weak
void *off_10067238 = &unk_100743AC; // weak
int (__thiscall *off_1006723C)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10067248)(LPVOID lpMem, char) = &sub_1001A074; // weak
int (__thiscall *off_10067254)(LPVOID lpMem, char) = &sub_1001A074; // weak
char byte_100679D8[] = { ' ' }; // weak
char byte_100679F8[] = { '\x06' }; // weak
_UNKNOWN unk_10067A70; // weak
int (*off_10067B38)() = &sub_1002E77E; // weak
int dword_10067BB0[] = { 1 }; // weak
int dword_10067BB4[] = { 22 }; // weak
char *off_10068100[43] =
{
  "Sun",
  "Mon",
  "Tue",
  "Wed",
  "Thu",
  "Fri",
  "Sat",
  "Sunday",
  "Monday",
  "Tuesday",
  "Wednesday",
  "Thursday",
  "Friday",
  "Saturday",
  "Jan",
  "Feb",
  "Mar",
  "Apr",
  "May",
  "Jun",
  "Jul",
  "Aug",
  "Sep",
  "Oct",
  "Nov",
  "Dec",
  "January",
  "February",
  "March",
  "April",
  "May",
  "June",
  "July",
  "August",
  "September",
  "October",
  "November",
  "December",
  "AM",
  "PM",
  "MM/dd/yy",
  "dddd, MMMM dd, yyyy",
  "HH:mm:ss"
}; // weak
LPCWSTR off_10068268 = L"api-ms-win-appmodel-runtime-l1-1-1"; // idb
_UNKNOWN unk_10068708; // weak
_UNKNOWN unk_10068710; // weak
_UNKNOWN unk_10068718; // weak
_UNKNOWN unk_10068720; // weak
_UNKNOWN unk_10068728; // weak
_UNKNOWN unk_10068730; // weak
_UNKNOWN unk_10068738; // weak
_UNKNOWN unk_10068740; // weak
_UNKNOWN unk_10068764; // weak
__int128 xmmword_10068FC0 = 0xFFF0000000000000FFF0000000000000i64; // weak
__int128 xmmword_10068FD0 = 0xFFFFFFC0FFFFFFC0i64; // weak
__int128 xmmword_10068FE0 = 0xFFC00000FFC0i64; // weak
__int128 xmmword_10068FF0 = 0x43380000000000004338000000000000i64; // weak
__int128 xmmword_10069010 = 0x40571547652B82FE40571547652B82FEi64; // weak
__int128 xmmword_10069020 = 0x3F862E42FEFA00003F862E42FEFA0000i64; // weak
__int128 xmmword_10069030 = 0x3D1CF79ABC9E3B3A3D1CF79ABC9E3B3Ai64; // weak
__int128 xmmword_10069040 = 0x3FC555555566A45A3F811074B1D108E5i64; // weak
__int128 xmmword_10069050 = 0x3FDFFFFFFFFFE17B3FA5555726ECED80i64; // weak
__int64 qword_10069090 = 9218868437227405311i64; // weak
__int64 qword_10069098 = 4503599627370496i64; // weak
_UNKNOWN unk_100690EA; // weak
_UNKNOWN unk_1006916E; // weak
_UNKNOWN unk_100691C8; // weak
__int16 word_10069ACC[] = { 20633 }; // weak
char byte_10069ACE[] = { '\0' }; // weak
char byte_10069ACF[] = { '\0' }; // weak
int dword_10069B64[] = { 487260709 }; // weak
_UNKNOWN unk_10069B8C; // weak
int dword_10069BB8[] = { 1 }; // weak
void *off_1006ACD0 = &unk_1006DA00; // weak
int dword_1006ACD4[] = { 66 }; // weak
__int128 xmmword_1006BC50[] = { 0i64 }; // weak
__int128 xmmword_1006C080 = 0x3FF00000000000003FF0000000000000i64; // weak
__int128 xmmword_1006C090 = 0x43300000433i64; // weak
__int128 xmmword_1006C0A0 = 0i64; // weak
__int128 xmmword_1006C0B0 = 2047i64; // weak
double dbl_1006C0C0 = ?flt; // weak
double dbl_1006C0D8 = ?flt; // weak
int dword_1006C170[] = { 20 }; // weak
_DWORD off_1006C174[2] = { 268876844, 29 }; // idb
__int128 xmmword_1006C280 = 0xFFFFFFFFFFFFFFFFFFFFFFFFFFi64; // weak
__int128 xmmword_1006C290 = 0x3FDBC000000000003FDBC00000000000i64; // weak
__int128 xmmword_1006C2A0 = 0x428FFFFFFFFFF810428FFFFFFFFFF810i64; // weak
__int128 xmmword_1006C2B0 = 0x7FFFFFFF800000007FFFFFFF80000000i64; // weak
__int128 xmmword_1006C2C0 = 0x3D1FEF311F12B3583FD34413509F7800i64; // weak
__int128 xmmword_1006C2D0[] = { 0xFFFFFFFFFFFFFFFF00000000i64 }; // weak
__int128 xmmword_1006C2F0 = 0x3FF00000000000003FF0000000000000i64; // weak
__int128 xmmword_1006C300 = 0i64; // weak
__int64 qword_1006C310 = 4841369599423283200i64; // weak
__int64 qword_1006C320 = -4503599627370496i64; // weak
__int128 xmmword_1006C340 = 0xC00893096429813D40358914C697CEF9i64; // weak
__int128 xmmword_1006C350 = 0x3FFC6A02DC9635D2C025C9806A358455i64; // weak
__int128 xmmword_1006C360 = 0xBFF27AF2DC77B1354016AB9F7E1899F7i64; // weak
__int128 xmmword_1006C370 = 4565095779775955208i64; // weak
__int128 xmmword_1006C380 = 0i64; // weak
__int128 xmmword_1006C790 = 0x3FDBC000000000003FDBC00000000000i64; // weak
int (*off_1006CBA4[2])() = { &sub_100273F7, &sub_100273F7 }; // weak
int (*off_1006CBB8[2])() = { &sub_1003B032, &sub_1003B019 }; // weak
int (*off_1006CBCC[2])() = { &sub_1003B032, &sub_1003AFFC }; // weak
wchar_t *off_1006CCC0[7] =
{
  L"FXAA",
  L"HDR-TV",
  L"SCANLINES",
  L"CARTOON",
  L"RGB DOT(MICRO)",
  L"RGB DOT(TINY)",
  L"BLUR"
}; // weak
int dword_1006CCE0[] = { 1 }; // weak
int dword_1006CCF4[] = { 6 }; // weak
int dword_1006CD10[] = { 8 }; // weak
int dword_1006CD20[] = { 0 }; // weak
int (__stdcall *off_1006CD24)(int) = &sub_10045840; // weak
int dword_1006CD28[] = { 18 }; // weak
int (__stdcall *off_1006CD2C)(int) = &sub_10045760; // weak
int dword_1006CD30[] = { 82 }; // weak
int (__stdcall *off_1006CD34)(int) = &sub_10045710; // weak
int dword_1006CD38[] = { 130 }; // weak
int (__stdcall *off_1006CD3C)(int) = &sub_100456D0; // weak
int dword_1006CD40[] = { 450 }; // weak
int (__stdcall *off_1006CD44)(int) = &sub_100456C0; // weak
int dword_1006CD48[] = { 385 }; // weak
int (__stdcall *off_1006CD4C)(int) = &sub_100455C0; // weak
int dword_1006D000[] = { 15 }; // weak
int (__stdcall *off_1006D004)(int, int) = &sub_1005A190; // weak
int dword_1006D008[] = { 14 }; // weak
int (__stdcall *off_1006D00C)(int, int) = &sub_1005A180; // weak
int dword_1006D010[] = { 13 }; // weak
int (__stdcall *off_1006D014)(int, int) = &sub_1005A170; // weak
int dword_1006D018[] = { 12 }; // weak
int (__stdcall *off_1006D01C)(int, int) = &sub_1005A170; // weak
int dword_1006D080[] = { 1 }; // weak
int dword_1006D0A0[] = { 1 }; // weak
int dword_1006D0C0[] = { 1 }; // weak
int dword_1006D0E0[] = { 1 }; // weak
int dword_1006D0F0[] = { 0 }; // weak
int dword_1006D4F0[] = { 0 }; // weak
int dword_1006D4F4[] = { 1 }; // weak
int dword_1006D4F8[] = { 4 }; // weak
int dword_1006D4FC[] = { 5 }; // weak
int dword_1006D500[] = { 8 }; // weak
int dword_1006D504[] = { 9 }; // weak
int dword_1006D508[] = { 12 }; // weak
int dword_1006D50C[] = { 13 }; // weak
_UNKNOWN unk_1006DA00; // weak
int (__thiscall *off_1006DA08)(LPVOID lpMem, char) = &sub_10005B20; // weak
int (__thiscall *off_1006DA14)(LPVOID lpMem, char) = &sub_10005AF0; // weak
__int128 xmmword_1006DA80 = 4575657221408423936i64; // weak
__int128 xmmword_1006DAA0 = 1065353216i64; // weak
__int128 xmmword_1006DAB0 = 0x800000000000000000000000i64; // weak
__int128 xmmword_1006DAC0 = 0x3F80000000000000i64; // weak
__int128 xmmword_1006DAD0 = 0xFFFFFFFFFFFFFFFFFFFFFFFFi64; // weak
__int128 xmmword_1006DAE0 = 0x0FFFFFFFF00000000i64; // weak
__int128 xmmword_1006DAF0 = 0x4F0000000000000000000000i64; // weak
__int128 xmmword_1006DB00 = 0xFF000000000000FFFF0000FF0000i64; // weak
__int128 xmmword_1006DB10 = 0i64; // weak
__int128 xmmword_1006DB30 = 0xFFFFFFFF00000000i64; // weak
__int128 xmmword_1006DB40 = 0x2F8080813B8080813780808133808081i64; // weak
_UNKNOWN unk_1006DD9C; // weak
__int128 xmmword_1006DDB0 = 0x3F8000003F8000003F8000003F800000i64; // weak
_UNKNOWN unk_1006DDC0; // weak
_UNKNOWN unk_1006DDD0; // weak
_UNKNOWN unk_1006DDE0; // weak
int dword_1006E1D4[] = { 0 }; // weak
int dword_1006E214[] = { 6 }; // weak
int dword_1006E254[] = { 24 }; // weak
char *off_1006E5C0 = "POSITION"; // weak
_UNKNOWN off_1006E7D8; // weak
__int64 qword_1006E7E8 = 0i64; // weak
_UNKNOWN off_1006E7F4; // weak
__int64 qword_1006E804 = 4294967295i64; // weak
_UNKNOWN off_1006E810; // weak
__int64 qword_1006E820 = 4294967295i64; // weak
_UNKNOWN off_1006E82C; // weak
__int64 qword_1006E83C = 4294967295i64; // weak
_UNKNOWN off_1006E848; // weak
__int64 qword_1006E858 = 4294967295i64; // weak
_UNKNOWN off_1006E864; // weak
__int64 qword_1006E874 = 4294967295i64; // weak
_UNKNOWN off_1006E880; // weak
__int64 qword_1006E890 = 4294967295i64; // weak
_UNKNOWN off_1006E89C; // weak
__int64 qword_1006E8AC = 4294967295i64; // weak
char *off_1006E8B8 = "POSITION"; // weak
char *off_1006E980 = "POSITION"; // weak
char *off_1006EB98 = "POSITION"; // weak
int dword_1006EC5C[] = { 2 }; // weak
int (*off_1006EC70)() = &sub_100273F7; // weak
__int128 xmmword_1006EC80 = 0x437F0000437F0000437F0000437F0000i64; // weak
int dword_1006EC90[] = { 2 }; // weak
int (*off_1006ECD4)() = &sub_1000A9B0; // weak
__int64 qword_1006EDD8 = 4611686018427387904i64; // weak
__int64 qword_1006EDF0 = 4726644357157879808i64; // weak
__int128 xmmword_1006EE30 = 4294967296i64; // weak
__int128 xmmword_1006EE40 = 0x300000003300000015i64; // weak
__int128 xmmword_1006EE50 = 0x1E00000028000000000i64; // weak
__int128 xmmword_1006EE60 = 0x20000000200000000000i64; // weak
__int128 xmmword_1006EE70 = 0x3F8000000000000000000000i64; // weak
__int128 xmmword_1006EE80 = 0x3F8000003F8000003F800000BF800000i64; // weak
__int128 xmmword_1006EE90 = 0x3F8000003F800000BB0888893ACCCCCDi64; // weak
__int128 xmmword_1006EEA0 = 0x3F800000800000003F800000BF800000i64; // weak
__int128 xmmword_1006EEB0 = 0x3F800000BDCCCCCDBB0888893ACCCCCDi64; // weak
__int64 qword_1006EEC0[] = { 0i64 }; // weak
__int128 xmmword_1006EED0 = 0x7FFFFFFF7FFFFFFF7FFFFFFF7FFFFFFFi64; // weak
__int128 xmmword_1006EEE0 = 0x80000000800000008000000080000000i64; // weak
__int64 qword_1006EF00 = 4503599627370495i64; // weak
__int64 qword_1006EF08 = 4503599627370496i64; // weak
__int64 qword_1006EF28 = 4890909195324358656i64; // weak
__int64 qword_1006EF48 = 4998995586381250560i64; // weak
__int128 xmmword_1006EF80 = 0xFFFFFFFFFFFFFFFFFFFFFFFFFFi64; // weak
__int128 xmmword_1006EF90 = 0x3FF00000000000003FF0000000000000i64; // weak
__int128 xmmword_1006EFA0 = 0x7FFFFFFFFFFFFFFF7FFFFFFFFFFFFFFFi64; // weak
__int64 qword_1006EFD8 = -134217728i64; // weak
__int64 qword_1006EFE0 = -4614195897457180672i64; // weak
__int64 qword_1006F000 = -9223372036854775808i64; // weak
__int64 qword_1006F010 = 4607182418800017408i64; // weak
__int128 xmmword_1006F420 = 0i64; // weak
__int64 qword_1006FC30 = 4607182418800017408i64; // weak
__int128 xmmword_10070040 = 0i64; // weak
__int64 qword_10070850 = 4609176139397595136i64; // weak
__int128 xmmword_10071060 = 0i64; // weak
__int128 xmmword_10072090[] = { 4607182418800017408i64 }; // weak
_UNKNOWN unk_10074D24; // weak
_UNKNOWN unk_10074D2C; // weak
_UNKNOWN unk_10074D30; // weak
_UNKNOWN unk_10074DBC; // weak
_UNKNOWN unk_10074E48; // weak
_UNKNOWN unk_10074EB0; // weak
_UNKNOWN unk_10074F18; // weak
_UNKNOWN unk_10074F5C; // weak
_UNKNOWN unk_10074F98; // weak
_UNKNOWN unk_10074FC4; // weak
_UNKNOWN unk_10074FE8; // weak
_UNKNOWN unk_1007502C; // weak
_UNKNOWN unk_10075058; // weak
_UNKNOWN unk_100750B8; // weak
_UNKNOWN unk_10075110; // weak
_UNKNOWN unk_10075168; // weak
_UNKNOWN unk_100751C8; // weak
_UNKNOWN unk_10075220; // weak
_UNKNOWN unk_10075254; // weak
_UNKNOWN unk_100752BC; // weak
_UNKNOWN unk_100752E8; // weak
_UNKNOWN unk_1007531C; // weak
_UNKNOWN unk_10075350; // weak
_UNKNOWN unk_100753C0; // weak
_UNKNOWN unk_100753F4; // weak
_UNKNOWN unk_10075430; // weak
_UNKNOWN unk_10075484; // weak
_UNKNOWN unk_100754DC; // weak
_UNKNOWN unk_10075518; // weak
_UNKNOWN unk_10075580; // weak
_UNKNOWN unk_100755AC; // weak
_UNKNOWN unk_100755D0; // weak
_UNKNOWN unk_10075634; // weak
_UNKNOWN unk_10075658; // weak
_UNKNOWN unk_10075678; // weak
_UNKNOWN unk_10075698; // weak
_UNKNOWN unk_100756B8; // weak
_UNKNOWN unk_100756D8; // weak
_UNKNOWN unk_100756F8; // weak
_UNKNOWN unk_10075718; // weak
_UNKNOWN unk_10075734; // weak
_UNKNOWN unk_10075778; // weak
_UNKNOWN unk_100757AC; // weak
_UNKNOWN unk_100757E0; // weak
_UNKNOWN unk_1007580C; // weak
_UNKNOWN unk_10075840; // weak
_UNKNOWN unk_1007586C; // weak
_UNKNOWN unk_100758A0; // weak
_UNKNOWN unk_100758CC; // weak
_UNKNOWN unk_100758F8; // weak
_UNKNOWN unk_1007591C; // weak
_UNKNOWN unk_10075954; // weak
_UNKNOWN unk_1007599C; // weak
_UNKNOWN unk_100759D8; // weak
_UNKNOWN unk_10075A04; // weak
_UNKNOWN unk_10075A38; // weak
_UNKNOWN unk_10075A6C; // weak
_UNKNOWN unk_10075A98; // weak
_UNKNOWN unk_10075AD4; // weak
_UNKNOWN unk_10075B00; // weak
_UNKNOWN unk_10075B34; // weak
_UNKNOWN unk_10075B60; // weak
_UNKNOWN unk_10075B94; // weak
_UNKNOWN unk_10075BC8; // weak
_UNKNOWN unk_10075BEC; // weak
_UNKNOWN unk_10075C24; // weak
_UNKNOWN unk_10075C64; // weak
_UNKNOWN unk_10075C88; // weak
_UNKNOWN unk_10075D38; // weak
_UNKNOWN unk_10075D64; // weak
_UNKNOWN unk_10075D90; // weak
_UNKNOWN unk_10075DD4; // weak
_UNKNOWN unk_10075E00; // weak
_UNKNOWN unk_10075E34; // weak
_UNKNOWN unk_10075E68; // weak
_UNKNOWN unk_10075E94; // weak
_UNKNOWN unk_10075EC0; // weak
_UNKNOWN unk_10075EE4; // weak
_UNKNOWN unk_10075F1C; // weak
_UNKNOWN unk_10075F6C; // weak
_UNKNOWN unk_10075FA8; // weak
_UNKNOWN unk_10075FD4; // weak
_UNKNOWN unk_10075FF8; // weak
_UNKNOWN unk_10076030; // weak
_UNKNOWN unk_1007605C; // weak
_UNKNOWN unk_10076088; // weak
_UNKNOWN unk_100760B4; // weak
_UNKNOWN unk_100760E8; // weak
_UNKNOWN unk_10076114; // weak
_UNKNOWN unk_10076148; // weak
_UNKNOWN unk_1007617C; // weak
_UNKNOWN unk_100761C0; // weak
_UNKNOWN unk_100761E4; // weak
_UNKNOWN unk_10076288; // weak
_UNKNOWN unk_100762AC; // weak
_UNKNOWN unk_100762E4; // weak
_UNKNOWN unk_1007631C; // weak
_UNKNOWN unk_10076364; // weak
_UNKNOWN unk_10076398; // weak
_UNKNOWN unk_100763C4; // weak
_UNKNOWN unk_100763F8; // weak
_UNKNOWN unk_1007642C; // weak
_UNKNOWN unk_10076460; // weak
_UNKNOWN unk_1007648C; // weak
_UNKNOWN unk_100764B8; // weak
_UNKNOWN unk_100764E4; // weak
_UNKNOWN unk_10076510; // weak
_UNKNOWN unk_10076544; // weak
_UNKNOWN unk_10076578; // weak
_UNKNOWN unk_100765AC; // weak
_UNKNOWN unk_100765D8; // weak
_UNKNOWN unk_1007660C; // weak
_UNKNOWN unk_10076630; // weak
_UNKNOWN unk_10076668; // weak
_UNKNOWN unk_100766A0; // weak
_UNKNOWN unk_10076720; // weak
_UNKNOWN unk_10076754; // weak
_UNKNOWN unk_10076780; // weak
_UNKNOWN unk_100767AC; // weak
_UNKNOWN unk_100767D0; // weak
_UNKNOWN unk_1007682C; // weak
_UNKNOWN unk_10076858; // weak
_UNKNOWN unk_10076884; // weak
_UNKNOWN unk_100768B0; // weak
_UNKNOWN unk_100768DC; // weak
_UNKNOWN unk_10076908; // weak
_UNKNOWN unk_10076934; // weak
_UNKNOWN unk_10076960; // weak
_UNKNOWN unk_1007698C; // weak
_UNKNOWN unk_100769C0; // weak
_UNKNOWN unk_100769E8; // weak
_UNKNOWN unk_10076A14; // weak
_UNKNOWN unk_10076A7C; // weak
_UNKNOWN unk_10076AA0; // weak
_UNKNOWN unk_10076AE4; // weak
_UNKNOWN unk_10076B08; // weak
_UNKNOWN unk_10076B30; // weak
_UNKNOWN unk_10076B58; // weak
_UNKNOWN unk_10076B78; // weak
_UNKNOWN unk_10076BC8; // weak
_UNKNOWN unk_10076BF0; // weak
_UNKNOWN unk_10076C0C; // weak
_UNKNOWN unk_10076C48; // weak
_UNKNOWN unk_10076CBC; // weak
_UNKNOWN unk_10076CF8; // weak
_UNKNOWN unk_10076D18; // weak
_UNKNOWN unk_10076D38; // weak
_UNKNOWN unk_10076D58; // weak
_UNKNOWN unk_10076D78; // weak
_UNKNOWN unk_10076D98; // weak
_UNKNOWN unk_10076DB8; // weak
_UNKNOWN unk_10076DD8; // weak
_UNKNOWN unk_10076DF8; // weak
_UNKNOWN unk_10076E18; // weak
_UNKNOWN unk_10076E38; // weak
_UNKNOWN unk_10076E58; // weak
_UNKNOWN unk_10076E78; // weak
_UNKNOWN unk_10076EA0; // weak
_UNKNOWN unk_10076EC0; // weak
_UNKNOWN unk_10076EE0; // weak
_UNKNOWN unk_10076F08; // weak
_UNKNOWN unk_10076F28; // weak
_UNKNOWN unk_10076F48; // weak
_UNKNOWN unk_10076F68; // weak
_UNKNOWN unk_10076F88; // weak
_UNKNOWN unk_10076FA8; // weak
_UNKNOWN unk_10076FC8; // weak
_UNKNOWN unk_10076FE8; // weak
_UNKNOWN unk_10077028; // weak
_UNKNOWN unk_10077048; // weak
_UNKNOWN unk_10077068; // weak
_UNKNOWN unk_10077088; // weak
_UNKNOWN unk_100770A8; // weak
_UNKNOWN unk_100770C8; // weak
_UNKNOWN unk_100770E8; // weak
_UNKNOWN unk_10077108; // weak
_UNKNOWN unk_10077128; // weak
_UNKNOWN unk_10077148; // weak
_UNKNOWN unk_10077168; // weak
_UNKNOWN unk_10077188; // weak
_UNKNOWN unk_100771A8; // weak
_UNKNOWN unk_10077208; // weak
_UNKNOWN unk_10077270; // weak
_UNKNOWN unk_1007729C; // weak
_UNKNOWN unk_100772F4; // weak
_UNKNOWN unk_10077320; // weak
_UNKNOWN unk_10077380; // weak
_UNKNOWN unk_100773B4; // weak
_UNKNOWN unk_100773E8; // weak
_UNKNOWN unk_10077430; // weak
_UNKNOWN unk_1007745C; // weak
_UNKNOWN unk_100774A0; // weak
_UNKNOWN unk_100774E4; // weak
_UNKNOWN unk_10077510; // weak
_UNKNOWN unk_10077554; // weak
_UNKNOWN unk_10077598; // weak
_UNKNOWN unk_100775CC; // weak
_UNKNOWN unk_100775F8; // weak
_UNKNOWN unk_10077624; // weak
_UNKNOWN unk_10077660; // weak
_UNKNOWN unk_1007768C; // weak
_UNKNOWN unk_100776B8; // weak
_UNKNOWN unk_100776DC; // weak
_UNKNOWN unk_10077758; // weak
_UNKNOWN unk_1007777C; // weak
_UNKNOWN unk_10077860; // weak
_UNKNOWN unk_100778A4; // weak
_UNKNOWN unk_100778E8; // weak
_UNKNOWN unk_1007792C; // weak
_UNKNOWN unk_10077970; // weak
_UNKNOWN unk_1007799C; // weak
_UNKNOWN unk_100779C0; // weak
_UNKNOWN unk_100779E4; // weak
_UNKNOWN unk_10077A58; // weak
_UNKNOWN unk_10077A9C; // weak
_UNKNOWN unk_10077AE0; // weak
_UNKNOWN unk_10077B04; // weak
_UNKNOWN unk_10077BA0; // weak
_UNKNOWN unk_10077BE4; // weak
_UNKNOWN unk_10077C28; // weak
_UNKNOWN unk_10077C84; // weak
_UNKNOWN unk_10077CD0; // weak
_UNKNOWN unk_10077D0C; // weak
_UNKNOWN unk_10077D30; // weak
_UNKNOWN unk_10077D6C; // weak
_UNKNOWN unk_10077D98; // weak
_UNKNOWN unk_10077DDC; // weak
_UNKNOWN unk_10077E20; // weak
_UNKNOWN unk_10077E64; // weak
_UNKNOWN unk_10077EA8; // weak
_UNKNOWN unk_10077EEC; // weak
_UNKNOWN unk_10077F30; // weak
_UNKNOWN unk_10077F74; // weak
_UNKNOWN unk_10077FC0; // weak
_UNKNOWN unk_10077FEC; // weak
_UNKNOWN unk_10078010; // weak
_UNKNOWN unk_1007805C; // weak
_UNKNOWN unk_10078088; // weak
_UNKNOWN unk_100780BC; // weak
_UNKNOWN unk_100780F0; // weak
_UNKNOWN unk_10078134; // weak
_UNKNOWN unk_10078170; // weak
_UNKNOWN unk_1007819C; // weak
_UNKNOWN unk_100781D0; // weak
_UNKNOWN unk_10078214; // weak
_UNKNOWN unk_10078248; // weak
_UNKNOWN unk_1007827C; // weak
_UNKNOWN unk_100782B0; // weak
int dword_1007A000 = 4294967295; // weak
int dword_1007A008 = 2147483648; // weak
int dword_1007A00C = 1153374641; // weak
int __security_cookie = 3141592654; // weak
int dword_1007A020 = 1; // weak
DWORD dwSpinCount = 4000u; // idb
int dword_1007A038 = 4294967295; // weak
int dword_1007A040 = 4294967295; // weak
int dword_1007A044 = 1; // weak
_UNKNOWN unk_1007A048; // weak
char *off_1007A070[11] =
{
  "SchedulerKind",
  "MaxConcurrency",
  "MinConcurrency",
  "TargetOversubscriptionFactor",
  "LocalContextCacheSize",
  "ContextStackSize",
  "ContextPriority",
  "SchedulingProtocol",
  "DynamicProgressFeedback",
  "WinRTInitialization",
  "MaxPolicyElementKey"
}; // weak
void *off_1007A09C = &unk_10066B2C; // weak
DWORD dword_1007A0E0 = 4294967295u; // idb
_DWORD dword_1007A0F0[4] = { 429065504, 0, 0, 0 }; // idb
char byte_1007A100 = '\x02'; // weak
_UNKNOWN unk_1007A108; // weak
_UNKNOWN unk_1007A1B0; // weak
_UNKNOWN unk_1007A1B4; // weak
DWORD dword_1007A1C0 = 4294967295u; // idb
wchar_t *off_1007A1C8 = L"         (((((                  H"; // weak
wchar_t **off_1007A280 = &off_1007A1C8; // weak
void *off_1007A284 = &unk_1007A6C0; // weak
_UNKNOWN unk_1007A288; // weak
_UNKNOWN unk_1007A290; // weak
char byte_1007A2C0[] = { '\0' }; // weak
char *off_1007A3C0 = " "; // weak
char byte_1007A3C4[] = { '\x01' }; // weak
int dword_1007A3C8[] = { 932 }; // weak
char aVyv[6] = "`y!"; // weak
char aJ[3] = ""; // weak
_UNKNOWN unk_1007A4B8; // weak
_UNKNOWN unk_1007A5C0; // weak
_UNKNOWN unk_1007A6C0; // weak
LPVOID off_1007A8E0 = &unk_1007A6C0; // idb
int dword_1007A8F0 = 4294967294; // weak
void *off_1007A900 = &unk_1007A8F4; // weak
void *off_1007A904 = &unk_1007CCD8; // weak
void *off_1007A908 = &unk_1007CCD8; // weak
void *off_1007A90C = &unk_1007CCD8; // weak
void *off_1007A910 = &unk_1007CCD8; // weak
void *off_1007A914 = &unk_1007CCD8; // weak
void *off_1007A918 = &unk_1007CCD8; // weak
void *off_1007A91C = &unk_1007CCD8; // weak
void *off_1007A920 = &unk_1007CCD8; // weak
void *off_1007A924 = &unk_1007CCD8; // weak
void *off_1007A930 = &unk_1007A8F8; // weak
void *off_1007A934 = &unk_1007CCDC; // weak
void *off_1007A938 = &unk_1007CCDC; // weak
void *off_1007A93C = &unk_1007CCDC; // weak
void *off_1007A940 = &unk_1007CCDC; // weak
void *off_1007A944 = &unk_1007CCDC; // weak
void *off_1007A948 = &unk_1007CCDC; // weak
void *off_1007A94C = &unk_1007CCDC; // weak
HANDLE hConsoleOutput = (HANDLE)0xFFFFFFFE; // idb
int dword_1007A960 = 116; // weak
__int64 qword_1007A980 = -9223231297218904064i64; // weak
__int64 qword_1007A988 = 279227437569541088i64; // weak
__int64 qword_1007A990 = 8725857424048159i64; // weak
__int64 qword_1007A998 = 8935278002225314816i64; // weak
_UNKNOWN unk_1007A9A0; // weak
_UNKNOWN unk_1007BBA0; // weak
int dword_1007BE30 = 0; // weak
int dword_1007BE34 = 0; // weak
int dword_1007BE38 = 0; // weak
int dword_1007BE3C = 0; // weak
_UNKNOWN unk_1007BE40; // weak
int dword_1007BFD8 = 0; // weak
int dword_1007BFDC = 0; // weak
int dword_1007BFE0 = 0; // weak
int dword_1007BFE4 = 0; // weak
int dword_1007BFE8 = 0; // weak
int dword_1007BFEC = 0; // weak
int dword_1007BFF0 = 0; // weak
int dword_1007BFF4 = 0; // weak
int dword_1007BFF8 = 0; // weak
int dword_1007BFFC = 0; // weak
int dword_1007C000; // weak
int dword_1007C004; // weak
int dword_1007C008; // weak
int dword_1007C00C; // weak
int dword_1007C010; // weak
int dword_1007C014; // weak
int dword_1007C018; // weak
int dword_1007C01C; // weak
int dword_1007C020; // weak
int dword_1007C024; // weak
int dword_1007C028; // weak
int dword_1007C02C; // weak
int dword_1007C030; // weak
int dword_1007C034; // weak
int dword_1007C038; // weak
int dword_1007C03C; // weak
int dword_1007C040; // weak
int dword_1007C044; // weak
int dword_1007C048; // weak
int dword_1007C04C; // weak
int dword_1007C050; // weak
int dword_1007C054; // weak
int dword_1007C058; // weak
int dword_1007C05C; // weak
int dword_1007C060; // weak
int dword_1007C064; // weak
int dword_1007C068; // weak
int dword_1007C06C; // weak
int dword_1007C070; // weak
int dword_1007C074; // weak
_UNKNOWN unk_1007C078; // weak
struct _RTL_CRITICAL_SECTION stru_1007C080; // idb
struct _RTL_CRITICAL_SECTION stru_1007C0E0; // idb
int dword_1007C140; // weak
_UNKNOWN unk_1007C144; // weak
int dword_1007C148; // weak
_DWORD dword_1007C154[3]; // idb
char byte_1007C160; // weak
struct _RTL_CRITICAL_SECTION CriticalSection; // idb
_UNKNOWN unk_1007C17C; // weak
HANDLE hObject; // idb
int dword_1007C184; // weak
int dword_1007C188; // weak
int dword_1007C18C; // weak
int dword_1007C190; // weak
int dword_1007C194; // weak
int dword_1007C198; // weak
int TlsIndex; // weak
union _SLIST_HEADER ListHead; // idb
_UNKNOWN unk_1007C1A8; // weak
int dword_1007C1B0; // weak
int dword_1007C1B4; // weak
int dword_1007C1BC; // weak
int dword_1007C1C0; // weak
int dword_1007C1C4; // weak
int dword_1007C200; // weak
__int16 word_1007C28C; // weak
__int16 word_1007C290; // weak
__int16 word_1007C294; // weak
__int16 word_1007C298; // weak
int dword_1007C29C; // weak
int dword_1007C2A0; // weak
int dword_1007C2A4; // weak
int dword_1007C2A8; // weak
int dword_1007C2AC; // weak
int dword_1007C2B0; // weak
int dword_1007C2B4; // weak
int dword_1007C2B8; // weak
__int16 word_1007C2BC; // weak
int dword_1007C2C0; // weak
int dword_1007C2C4; // weak
__int16 word_1007C2C8; // weak
_UNKNOWN unk_1007C4CC; // weak
int dword_1007C508; // weak
int dword_1007C50C; // weak
LPVOID dword_1007C510; // idb
int dword_1007C514; // weak
int dword_1007C518; // weak
int dword_1007C51C; // weak
int dword_1007C538; // weak
HMODULE hLibModule; // idb
int dword_1007C540; // weak
int dword_1007C544; // weak
ULONG_PTR ProcessAffinityMask; // idb
ULONG_PTR SystemAffinityMask; // idb
int dword_1007C550; // weak
LPVOID dword_1007C554; // idb
int dword_1007C558; // weak
char byte_1007C55C; // weak
int dword_1007C560; // weak
int dword_1007C564; // weak
int dword_1007C568; // weak
DWORD ReturnedLength; // idb
LPVOID dword_1007C570; // idb
int dword_1007C574; // weak
int dword_1007C578; // weak
DWORD dword_1007C57C; // idb
int dword_1007C580; // weak
int dword_1007C584; // weak
int dword_1007C588; // weak
int dword_1007C590; // weak
int dword_1007C594; // weak
int dword_1007C598; // weak
int dword_1007C59C; // weak
union _SLIST_HEADER stru_1007C5A0; // idb
int dword_1007C5A8; // weak
int dword_1007C5AC; // weak
int dword_1007C5B0; // weak
int dword_1007C5B4; // weak
int dword_1007C5B8; // weak
_UNKNOWN unk_1007C5BC; // weak
int dword_1007C5C0; // weak
int dword_1007C5C8; // weak
char byte_1007C5CC; // weak
int dword_1007C5D0; // weak
int dword_1007C5D4; // weak
LPVOID dword_1007C5D8; // idb
int dword_1007C5E0; // weak
int dword_1007C5E4; // weak
DWORD dwTlsIndex; // idb
int dword_1007C5EC; // weak
int dword_1007C638; // weak
signed __int32 dword_1007C63C[4]; // idb
signed __int32 dword_1007C64C[9]; // idb
_UNKNOWN unk_1007C670; // weak
_UNKNOWN unk_1007C684; // weak
int dword_1007C698; // weak
struct _RTL_CRITICAL_SECTION stru_1007C69C; // idb
int dword_1007C6B4; // weak
_UNKNOWN unk_1007C6F0; // weak
int dword_1007C6F4; // weak
int dword_1007C6F8; // weak
int dword_1007C6FC; // weak
int dword_1007C700; // weak
_UNKNOWN unk_1007C708; // weak
int dword_1007C840; // weak
int dword_1007C844; // weak
int dword_1007C848; // weak
int dword_1007C84C; // weak
char byte_1007C850; // weak
CHAR Filename[264]; // idb
int dword_1007C960; // weak
_UNKNOWN unk_1007C964; // weak
LPVOID dword_1007C968; // idb
LPVOID dword_1007C96C; // idb
_UNKNOWN unk_1007C970; // weak
_UNKNOWN unk_1007C97C; // weak
LPVOID dword_1007C988; // idb
LPVOID dword_1007C98C; // idb
int dword_1007C990; // weak
int dword_1007C994; // weak
int dword_1007C998; // weak
LPCRITICAL_SECTION lpCriticalSection; // idb
int dword_1007CBA0; // weak
_UNKNOWN unk_1007CBA8; // weak
_UNKNOWN unk_1007CBF8; // weak
int dword_1007CC78; // weak
_UNKNOWN unk_1007CC7C; // weak
_UNKNOWN unk_1007CC80; // weak
int dword_1007CC84; // weak
_UNKNOWN unk_1007CC88; // weak
int dword_1007CC8C; // weak
HANDLE hHeap; // idb
int dword_1007CC94; // weak
int dword_1007CC98; // weak
int dword_1007CC9C; // weak
_UNKNOWN unk_1007CCA0; // weak
int dword_1007CCAC; // weak
char byte_1007CCB0; // weak
int dword_1007CCB4; // weak
LPVOID dword_1007CCB8; // idb
LPVOID dword_1007CCBC; // idb
int dword_1007CCC0; // weak
int dword_1007CCC4; // weak
int dword_1007CCC8; // weak
int dword_1007CCCC; // weak
int dword_1007CCD0; // weak
int dword_1007CCD4; // weak
int dword_1007CCE0; // weak
int dword_1007CCE4; // weak
int dword_1007CCE8; // weak
int dword_1007CCEC; // weak
int dword_1007CCF8; // weak
int dword_1007CCFC; // weak
_UNKNOWN unk_1007CD74; // weak
_UNKNOWN unk_1007CD78; // weak
LPVOID dword_1007CD80; // idb
LPVOID dword_1007CD84; // idb
LPVOID dword_1007CD88; // idb
LPVOID dword_1007CD8C; // idb
LPVOID dword_1007CD90; // idb
LPVOID dword_1007CD94; // idb
LPVOID lpMem; // idb
int dword_1007CD9C; // weak
HINSTANCE hInstance; // idb
int dword_1007CDA4; // weak
int dword_1007CDA8; // weak
int dword_1007CDAC; // weak
char byte_1007CDB0; // weak
char byte_1007CDB1; // weak
char byte_1007CDB2; // weak
char byte_1007CDB3; // weak
int dword_1007CDB4; // weak
int dword_1007CDB8; // weak
int dword_1007CDBC; // weak
int dword_1007CDC0[]; // weak
int dword_1007CE10; // weak
int dword_1007CE14; // weak
int dword_1007CE18; // weak
int dword_1007CE1C; // weak
int dword_1007CE20; // weak
int dword_1007CE24; // weak
int dword_1007CE28; // weak
int dword_1007CE2C; // weak
int dword_1007CE30; // weak
__int128 xmmword_1007CE38; // weak
__int128 xmmword_1007CE48; // weak
int dword_1007CE58; // weak
int dword_1007CE5C; // weak
int dword_1007CE60; // weak
int dword_1007CE64; // weak
int dword_1007CE68; // weak
int dword_1007CE6C; // weak
int dword_1007CE70; // weak
__int128 xmmword_1007CE78; // weak
__int128 xmmword_1007CE88; // weak
int dword_1007CE98; // weak
int dword_1007CE9C; // weak
int dword_1007CEA0; // weak
int dword_1007CEA4; // weak
int dword_1007CEA8; // weak
int dword_1007CEAC; // weak
int dword_1007CEB0; // weak
__int128 xmmword_1007CEB8; // weak
__int128 xmmword_1007CEC8; // weak
int dword_1007CED8; // weak
int dword_1007CEDC; // weak
int dword_1007CEE0; // weak
int dword_1007CEE4; // weak
int dword_1007CEE8; // weak
int dword_1007CEEC; // weak
int dword_1007CEF0; // weak
__int128 xmmword_1007CEF8; // weak
__int128 xmmword_1007CF08; // weak
int dword_1007CF18; // weak
int dword_1007CF24; // weak
int dword_1007CF28; // weak
int dword_1007CF48; // weak
_UNKNOWN unk_1007CF88; // weak
_UNKNOWN unk_1007CF94; // weak
int dword_10119428; // weak
int dword_1011942C; // weak
int dword_10119430[]; // weak
int dword_10119434[]; // weak
int dword_10119438[]; // weak
int dword_1011943C[]; // weak
int dword_10119440[]; // weak
int dword_10119444[]; // weak
int dword_10119448[]; // weak
int dword_1011944C[]; // weak
int dword_10119450[]; // weak
int dword_10119454[]; // weak
int dword_10119458[]; // weak
int dword_1011945C[]; // weak
int dword_10119460[]; // weak
int dword_10119464[]; // weak
int dword_10119468[]; // weak
int dword_1011946C[]; // weak
_UNKNOWN unk_1020F430; // weak
_UNKNOWN unk_1020F432; // weak
_UNKNOWN unk_10210430; // weak
_UNKNOWN unk_10210432; // weak
int dword_10239430; // weak
LPVOID dword_10239434; // idb
int dword_10239444; // weak
int dword_10239448; // weak
int dword_10239450; // weak
int dword_10239454; // weak
int dword_10239458; // weak
int dword_1023945C; // weak
int dword_10239460; // weak
int dword_10239464; // weak
int dword_10239468; // weak
int dword_1023946C; // weak
int dword_10239470; // weak
int dword_10239474; // weak
int dword_10239478; // weak
int dword_1023947C; // weak
int dword_10239480; // weak
int dword_10239484; // weak
int dword_10239488; // weak
int dword_1023948C; // weak
int dword_10239490; // weak
int dword_102394A0; // weak
int dword_102394A4; // weak
int dword_102394A8; // weak
int dword_102394B8; // weak
int dword_102394BC; // weak
char byte_102394C0; // weak
UINT uValue; // idb
char byte_102394C8; // weak
char byte_102394C9; // weak
char byte_102394CA; // weak
char byte_102394CB; // weak
int dword_10239510; // idb
int dword_10239514; // weak
LPVOID dword_10239518; // idb
int dword_10239528; // weak
int dword_1023952C; // weak
__int128 xmmword_10239600; // weak
__int128 xmmword_10239610; // weak
__int128 xmmword_10239620; // weak
__int128 xmmword_10239630; // weak
int dword_10239640; // weak
LPVOID dword_10239644; // idb
int dword_10239648; // weak
LPVOID dword_1023964C; // idb
int dword_10239650; // weak
int dword_10239654; // weak
int dword_10239658; // weak
int dword_1023965C; // weak
__int128 xmmword_10239660; // weak
__int128 xmmword_10239670; // weak
__int128 xmmword_10239680; // weak
__int128 xmmword_10239690; // weak
__int128 xmmword_102398A0; // weak
__int128 xmmword_102398B0; // weak
__int128 xmmword_102398C0; // weak
__int128 xmmword_102398D0; // weak
char byte_102398E0; // weak
int dword_102398E4; // weak
int dword_102398E8; // weak
int dword_102398EC; // weak
int dword_102398F0; // weak
int dword_102398F4; // weak
int dword_102398F8; // weak
int dword_102398FC; // weak
int dword_10239900; // weak
int dword_10239904; // weak
int dword_10239908; // weak
int dword_1023990C; // weak
int dword_10239910; // weak
int dword_10239914; // weak
int dword_10239918; // weak
int dword_1023991C; // weak
_UNKNOWN unk_10239920; // weak
int dword_10239924; // weak
PVOID Ptr; // idb
int dword_1023992C; // weak


//----- (10001000) --------------------------------------------------------
int sub_10001000()
{
  sub_10002620(&dword_10239434);
  dword_10239448 = 7;
  dword_10239444 = 0;
  LOWORD(dword_10239434) = 0;
  return sub_1000F3F4((int)sub_10064070);
}
// 10239444: using guessed type int dword_10239444;
// 10239448: using guessed type int dword_10239448;

//----- (10001040) --------------------------------------------------------
int sub_10001040()
{
  sub_10002620(&dword_10239490);
  dword_102394A4 = 7;
  dword_102394A0 = 0;
  LOWORD(dword_10239490) = 0;
  sub_10002620(&dword_102394A8);
  dword_102394BC = 7;
  dword_102394B8 = 0;
  LOWORD(dword_102394A8) = 0;
  return sub_1000F3F4((int)sub_100640D0);
}
// 10239490: using guessed type int dword_10239490;
// 102394A0: using guessed type int dword_102394A0;
// 102394A4: using guessed type int dword_102394A4;
// 102394A8: using guessed type int dword_102394A8;
// 102394B8: using guessed type int dword_102394B8;
// 102394BC: using guessed type int dword_102394BC;

//----- (100010A0) --------------------------------------------------------
int __thiscall sub_100010A0(int this)
{
  int v2; // [sp+0h] [bp-4h]@1

  v2 = 0;
  sub_1000BDB0((int)&v2, this);
  return sub_1000F3F4((int)sub_100640E0);
}
// 100640E0: using guessed type int sub_100640E0();

//----- (100010D0) --------------------------------------------------------
int sub_100010D0()
{
  sub_1000C2B0();
  dword_10239510 = 0;
  dword_10239514 = 0;
  dword_10239510 = (int)sub_10005650();
  return sub_1000F3F4((int)sub_100640F0);
}
// 10239514: using guessed type int dword_10239514;

//----- (10001100) --------------------------------------------------------
int sub_10001100()
{
  sub_10002620(&dword_10239518);
  dword_1023952C = 7;
  dword_10239528 = 0;
  LOWORD(dword_10239518) = 0;
  sub_10001460((int)&dword_10239518, L"\\", 1u);
  return sub_1000F3F4((int)sub_10064130);
}
// 1006ED54: using guessed type wchar_t asc_1006ED54[2];
// 10239528: using guessed type int dword_10239528;
// 1023952C: using guessed type int dword_1023952C;

//----- (10001143) --------------------------------------------------------
int sub_10001143()
{
  sub_1000EFF4(&unk_1007C078);
  return sub_1000F3F4((int)sub_10064189);
}

//----- (10001159) --------------------------------------------------------
int sub_10001159()
{
  sub_10010261((int)&unk_1007C4CC);
  return sub_1000F3F4((int)sub_10064193);
}

//----- (1000116F) --------------------------------------------------------
int sub_1000116F()
{
  return sub_1000F3F4((int)sub_1006419D);
}

//----- (1000117B) --------------------------------------------------------
char *sub_1000117B()
{
  char *result; // eax@1

  result = sub_1002D8BE(2);
  dword_1007C540 = (int)result;
  return result;
}
// 1007C540: using guessed type int dword_1007C540;

//----- (10001189) --------------------------------------------------------
unsigned int sub_10001189()
{
  unsigned int result; // eax@1

  result = sub_100122BD();
  dword_1007C598 = result;
  return result;
}
// 1007C598: using guessed type int dword_1007C598;

//----- (10001194) --------------------------------------------------------
void sub_10001194()
{
  InitializeSListHead(&stru_1007C5A0);
}

//----- (100011A0) --------------------------------------------------------
int __usercall sub_100011A0@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  sub_1003B03F(a1, a2);
  return sub_1000F3F4((int)sub_100641A7);
}

//----- (100011C0) --------------------------------------------------------
_UNKNOWN *sub_100011C0()
{
  return &unk_1007CD78;
}

//----- (100011D0) --------------------------------------------------------
int __cdecl sub_100011D0(int a1)
{
  int v1; // eax@1
  int result; // eax@2
  char v3; // cl@3

  v1 = a1;
  if ( *(_BYTE *)a1 )
  {
    do
      v3 = *(_BYTE *)v1++;
    while ( v3 );
    result = v1 - (a1 + 1);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (100011F0) --------------------------------------------------------
int __usercall sub_100011F0@<eax>(int a1@<ebx>, int a2@<edi>, void *a3, int a4, unsigned int a5)
{
  void *v5; // ecx@2

  JUMPOUT(a4, 0xFFFFFFFF / a5, sub_1002B797);
  if ( a5 * a4 < 0x1000 )
  {
    v5 = a3;
  }
  else
  {
    JUMPOUT((unsigned __int8)a3 & 0x1F, 0, sub_1002B797);
    v5 = (void *)*((_DWORD *)a3 - 1);
    JUMPOUT(v5, a3, sub_1002B797);
    JUMPOUT((_BYTE *)a3 - (_BYTE *)v5, 4, sub_1002B797);
    if ( (unsigned int)((_BYTE *)a3 - (_BYTE *)v5) > 0x23 )
      sub_1002B797(a1, a2);
  }
  return sub_1000F409(v5);
}

//----- (10001250) --------------------------------------------------------
int __cdecl sub_10001250(int a1, LPCSTR lpMultiByteStr)
{
  int v2; // ecx@0
  LPCSTR v3; // edi@1
  int v4; // ebx@1
  bool v5; // cf@1
  int v6; // ecx@1
  const CHAR *v7; // eax@2
  int v8; // eax@4
  int v9; // ebp@4
  unsigned int v10; // ecx@5
  int v11; // eax@11
  int v12; // eax@17
  int lpMultiByteStra; // [sp+20h] [bp+8h]@1

  v3 = lpMultiByteStr;
  v4 = v2;
  v5 = *((_DWORD *)lpMultiByteStr + 5) < 0x10u;
  v6 = *((_DWORD *)lpMultiByteStr + 4);
  lpMultiByteStra = *((_DWORD *)lpMultiByteStr + 4);
  if ( v5 )
    v7 = v3;
  else
    v7 = *(const CHAR **)v3;
  v8 = MultiByteToWideChar(0x4E4u, 0, v7, v6, 0, 0);
  v9 = v8;
  if ( v8 > 0 )
  {
    v10 = *(_DWORD *)(a1 + 16);
    if ( v8 > v10 )
    {
      sub_10001FA0(a1, v8 - v10, *(_DWORD *)(a1 + 16));
    }
    else
    {
      *(_DWORD *)(a1 + 16) = v8;
      if ( *(_DWORD *)(a1 + 20) < 8u )
        *(_WORD *)(a1 + 2 * v8) = 0;
      else
        *(_WORD *)(*(_DWORD *)a1 + 2 * v8) = 0;
    }
    if ( *(_DWORD *)(a1 + 20) < 8u )
      v11 = a1;
    else
      v11 = *(_DWORD *)a1;
    if ( *((_DWORD *)v3 + 5) >= 0x10u )
      v3 = *(LPCSTR *)v3;
    if ( MultiByteToWideChar(0x4E4u, 0, v3, lpMultiByteStra, (LPWSTR)v11, v9) <= 0 )
    {
      v5 = *(_DWORD *)(a1 + 20) < 8u;
      *(_DWORD *)(a1 + 16) = 0;
      if ( v5 )
        v12 = a1;
      else
        v12 = *(_DWORD *)a1;
      *(_WORD *)v12 = 0;
    }
  }
  *(_DWORD *)(v4 + 20) = 7;
  *(_DWORD *)(v4 + 16) = 0;
  *(_WORD *)v4 = 0;
  sub_10001560(v4, a1, 0, 0xFFFFFFFF);
  return v4;
}

//----- (10001380) --------------------------------------------------------
int __usercall sub_10001380@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  int result; // eax@1
  bool v5; // cf@3

  v3 = a1;
  result = *(_DWORD *)(a1 + 20);
  if ( (unsigned int)result >= 0x10 )
    result = sub_10001EA0(a2, a3, *(LPVOID *)a1, result + 1);
  *(_DWORD *)(v3 + 20) = 15;
  v5 = *(_DWORD *)(v3 + 20) < 0x10u;
  *(_DWORD *)(v3 + 16) = 0;
  if ( v5 )
  {
    *(_BYTE *)v3 = 0;
  }
  else
  {
    result = *(_DWORD *)v3;
    **(_BYTE **)v3 = 0;
  }
  return result;
}

//----- (100013C0) --------------------------------------------------------
int __thiscall sub_100013C0(int this, const void *a2)
{
  int v2; // esi@1
  int result; // eax@2

  v2 = this;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  if ( *(_BYTE *)a2 )
  {
    sub_10001990(this, a2, strlen((const char *)a2));
    result = v2;
  }
  else
  {
    sub_10001990(this, a2, 0);
    result = v2;
  }
  return result;
}

//----- (10001410) --------------------------------------------------------
int __thiscall sub_10001410(int this, int a2)
{
  int v2; // esi@1

  v2 = this;
  *(_DWORD *)(this + 20) = 15;
  *(_DWORD *)(this + 16) = 0;
  *(_BYTE *)this = 0;
  sub_10001A90(this, a2, 0, 0xFFFFFFFF);
  return v2;
}

//----- (10001450) --------------------------------------------------------
int __thiscall sub_10001450(int this)
{
  int result; // eax@2

  if ( *(_DWORD *)(this + 20) < 8u )
    result = this;
  else
    result = *(_DWORD *)this;
  return result;
}

//----- (10001460) --------------------------------------------------------
int __thiscall sub_10001460(int this, const void *a2, unsigned int a3)
{
  int v3; // esi@1
  unsigned int v4; // ecx@2
  int v5; // eax@3
  void *v6; // edx@7
  void *v7; // eax@11
  int result; // eax@13
  void *v9; // ecx@18
  bool v10; // cf@20

  v3 = this;
  if ( !a2
    || ((v4 = *(_DWORD *)(this + 20), v4 < 8) ? (v5 = v3) : (v5 = *(_DWORD *)v3),
        (unsigned int)a2 < v5
     || (v4 < 8 ? (v6 = (void *)v3) : (v6 = *(void **)v3), (char *)v6 + 2 * *(_DWORD *)(v3 + 16) <= a2)) )
  {
    if ( a3 > 0x7FFFFFFE )
      sub_1000DA74((int)"string too long");
    if ( *(_DWORD *)(v3 + 20) >= a3 )
    {
      if ( !a3 )
      {
        v10 = *(_DWORD *)(v3 + 20) < 8u;
        *(_DWORD *)(v3 + 16) = 0;
        if ( v10 )
        {
          result = v3;
          *(_WORD *)v3 = 0;
        }
        else
        {
          **(_WORD **)v3 = 0;
          result = v3;
        }
        return result;
      }
    }
    else
    {
      sub_100021D0(v3, a3, *(_DWORD *)(v3 + 16));
      if ( !a3 )
        return v3;
    }
    if ( *(_DWORD *)(v3 + 20) < 8u )
      v9 = (void *)v3;
    else
      v9 = *(void **)v3;
    if ( a3 )
      sub_100278E0(v9, a2, 2 * a3);
    v10 = *(_DWORD *)(v3 + 20) < 8u;
    *(_DWORD *)(v3 + 16) = a3;
    if ( !v10 )
    {
      *(_WORD *)(*(_DWORD *)v3 + 2 * a3) = 0;
      return v3;
    }
    *(_WORD *)(v3 + 2 * a3) = 0;
    return v3;
  }
  if ( v4 < 8 )
    v7 = (void *)v3;
  else
    v7 = *(void **)v3;
  return sub_10001560(v3, v3, ((_BYTE *)a2 - (_BYTE *)v7) >> 1, a3);
}

//----- (10001560) --------------------------------------------------------
int __thiscall sub_10001560(int this, int a2, unsigned int a3, unsigned int a4)
{
  int v4; // ebx@1
  unsigned int v5; // eax@1
  int v6; // esi@1
  int v7; // eax@2
  unsigned int v8; // edi@2
  int v9; // eax@5
  int result; // eax@8
  void *v11; // ecx@15
  bool v12; // cf@17

  v4 = a2;
  v5 = *(_DWORD *)(a2 + 16);
  v6 = this;
  if ( v5 < a3 )
    sub_1000DA94((int)"invalid string position");
  v7 = v5 - a3;
  v8 = a4;
  if ( a4 > v7 )
    v8 = v7;
  if ( this != a2 )
  {
    if ( v8 > 0x7FFFFFFE )
      sub_1000DA74((int)"string too long");
    if ( *(_DWORD *)(this + 20) >= v8 )
    {
      if ( !v8 )
      {
        v12 = *(_DWORD *)(this + 20) < 8u;
        *(_DWORD *)(this + 16) = 0;
        if ( v12 )
        {
          result = this;
          *(_WORD *)this = 0;
        }
        else
        {
          **(_WORD **)this = 0;
          result = this;
        }
        return result;
      }
    }
    else
    {
      sub_100021D0(this, v8, *(_DWORD *)(this + 16));
      if ( !v8 )
        return v6;
    }
    if ( *(_DWORD *)(a2 + 20) >= 8u )
      v4 = *(_DWORD *)a2;
    if ( *(_DWORD *)(v6 + 20) < 8u )
      v11 = (void *)v6;
    else
      v11 = *(void **)v6;
    if ( v8 )
      sub_100278E0(v11, (const void *)(v4 + 2 * a3), 2 * v8);
    v12 = *(_DWORD *)(v6 + 20) < 8u;
    *(_DWORD *)(v6 + 16) = v8;
    if ( !v12 )
    {
      *(_WORD *)(*(_DWORD *)v6 + 2 * v8) = 0;
      return v6;
    }
    *(_WORD *)(v6 + 2 * v8) = 0;
    return v6;
  }
  v9 = v8 + a3;
  if ( *(_DWORD *)(this + 16) < v8 + a3 )
    sub_1000DA94((int)"invalid string position");
  *(_DWORD *)(this + 16) = v9;
  if ( *(_DWORD *)(this + 20) >= 8u )
    this = *(_DWORD *)this;
  *(_WORD *)(this + 2 * v9) = 0;
  sub_10001EF0(v6, 0, a3);
  return v6;
}

//----- (10001680) --------------------------------------------------------
int __thiscall sub_10001680(int this, const void *a2, unsigned int a3)
{
  int v3; // esi@1
  unsigned int v4; // ecx@2
  int v5; // eax@3
  int v6; // edx@7
  int v7; // eax@11
  int result; // eax@13
  int v9; // ecx@14
  int v10; // ebx@15
  int v11; // ecx@20
  bool v12; // cf@28

  v3 = this;
  if ( !a2
    || ((v4 = *(_DWORD *)(this + 20), v4 < 8) ? (v5 = v3) : (v5 = *(_DWORD *)v3),
        (unsigned int)a2 < v5
     || (v4 < 8 ? (v6 = v3) : (v6 = *(_DWORD *)v3), v6 + 2 * *(_DWORD *)(v3 + 16) <= (unsigned int)a2)) )
  {
    v9 = *(_DWORD *)(v3 + 16);
    if ( ~*(_DWORD *)(v3 + 16) <= a3 )
      sub_1000DA74((int)"string too long");
    v10 = v9 + a3;
    if ( a3 )
    {
      if ( (unsigned int)v10 > 0x7FFFFFFE )
        sub_1000DA74((int)"string too long");
      if ( *(_DWORD *)(v3 + 20) >= (unsigned int)v10 )
      {
        if ( !v10 )
        {
          *(_DWORD *)(v3 + 16) = 0;
          if ( *(_DWORD *)(v3 + 20) < 8u )
          {
            result = v3;
            *(_WORD *)v3 = 0;
          }
          else
          {
            **(_WORD **)v3 = 0;
            result = v3;
          }
          return result;
        }
        goto LABEL_19;
      }
      sub_100021D0(v3, v9 + a3, v9);
      if ( v10 )
      {
LABEL_19:
        if ( *(_DWORD *)(v3 + 20) < 8u )
          v11 = v3;
        else
          v11 = *(_DWORD *)v3;
        if ( a3 )
          sub_100278E0((void *)(v11 + 2 * *(_DWORD *)(v3 + 16)), a2, 2 * a3);
        v12 = *(_DWORD *)(v3 + 20) < 8u;
        *(_DWORD *)(v3 + 16) = v10;
        if ( !v12 )
        {
          *(_WORD *)(*(_DWORD *)v3 + 2 * v10) = 0;
          return v3;
        }
        *(_WORD *)(v3 + 2 * v10) = 0;
        return v3;
      }
    }
    return v3;
  }
  if ( v4 < 8 )
    v7 = v3;
  else
    v7 = *(_DWORD *)v3;
  return sub_100017B0(v3, v3, (signed int)((char *)a2 - v7) >> 1, a3);
}

//----- (100017B0) --------------------------------------------------------
int __thiscall sub_100017B0(int this, int a2, unsigned int a3, unsigned int a4)
{
  unsigned int v4; // edx@1
  int v5; // ebx@1
  int v6; // esi@1
  unsigned int v7; // eax@1
  int v8; // ecx@2
  int v9; // eax@2
  unsigned int v10; // ebp@2
  int v11; // edi@5
  int v12; // ecx@12
  int result; // eax@15
  bool v14; // cf@20

  v4 = a3;
  v5 = a2;
  v6 = this;
  v7 = *(_DWORD *)(a2 + 16);
  if ( v7 < a3 )
    sub_1000DA94((int)"invalid string position");
  v8 = *(_DWORD *)(this + 16);
  v9 = v7 - a3;
  v10 = a4;
  if ( a4 > v9 )
    v10 = v9;
  if ( ~v8 <= v10 )
    sub_1000DA74((int)"string too long");
  v11 = v8 + v10;
  if ( !v10 )
    return v6;
  if ( (unsigned int)v11 > 0x7FFFFFFE )
    sub_1000DA74((int)"string too long");
  if ( *(_DWORD *)(v6 + 20) < (unsigned int)v11 )
  {
    sub_100021D0(v6, v8 + v10, v8);
    v4 = a3;
    if ( v11 )
    {
LABEL_9:
      if ( *(_DWORD *)(a2 + 20) >= 8u )
        v5 = *(_DWORD *)a2;
      if ( *(_DWORD *)(v6 + 20) < 8u )
        v12 = v6;
      else
        v12 = *(_DWORD *)v6;
      if ( v10 )
        sub_100278E0((void *)(v12 + 2 * *(_DWORD *)(v6 + 16)), (const void *)(v5 + 2 * v4), 2 * v10);
      v14 = *(_DWORD *)(v6 + 20) < 8u;
      *(_DWORD *)(v6 + 16) = v11;
      if ( !v14 )
      {
        *(_WORD *)(*(_DWORD *)v6 + 2 * v11) = 0;
        return v6;
      }
      *(_WORD *)(v6 + 2 * v11) = 0;
    }
    return v6;
  }
  if ( v11 )
    goto LABEL_9;
  *(_DWORD *)(v6 + 16) = 0;
  if ( *(_DWORD *)(v6 + 20) < 8u )
  {
    result = v6;
    *(_WORD *)v6 = 0;
  }
  else
  {
    **(_WORD **)v6 = 0;
    result = v6;
  }
  return result;
}

//----- (100018C0) --------------------------------------------------------
int __thiscall sub_100018C0(void *this, int a2)
{
  void *v2; // edi@1
  bool v3; // cf@7
  int result; // eax@8

  v2 = this;
  if ( *(_DWORD *)(a2 + 20) >= 8u )
  {
    if ( this )
      *(_DWORD *)this = *(_DWORD *)a2;
    *(_DWORD *)a2 = 0;
  }
  else if ( *(_DWORD *)(a2 + 16) != -1 )
  {
    sub_100260E0(this, (const void *)a2, 2 * (*(_DWORD *)(a2 + 16) + 1));
  }
  *((_DWORD *)v2 + 4) = *(_DWORD *)(a2 + 16);
  *((_DWORD *)v2 + 5) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(a2 + 20) = 7;
  v3 = *(_DWORD *)(a2 + 20) < 8u;
  *(_DWORD *)(a2 + 16) = 0;
  if ( v3 )
  {
    result = 0;
    *(_WORD *)a2 = 0;
  }
  else
  {
    result = *(_DWORD *)a2;
    **(_WORD **)a2 = 0;
  }
  return result;
}

//----- (10001930) --------------------------------------------------------
int __thiscall sub_10001930(int this, char a2, unsigned int a3)
{
  int v3; // esi@1
  int v4; // ebx@3
  int result; // eax@5
  bool v6; // cf@6

  v3 = this;
  if ( a2 && *(_DWORD *)(this + 20) >= 0x10u )
  {
    v4 = *(_DWORD *)this;
    if ( a3 )
      sub_100278E0((void *)this, (const void *)v4, a3);
    result = sub_10001EA0(v4, a3, (LPVOID)v4, *(_DWORD *)(v3 + 20) + 1);
  }
  *(_DWORD *)(v3 + 20) = 15;
  v6 = *(_DWORD *)(v3 + 20) < 0x10u;
  *(_DWORD *)(v3 + 16) = a3;
  if ( v6 )
  {
    *(_BYTE *)(v3 + a3) = 0;
  }
  else
  {
    result = *(_DWORD *)v3;
    *(_BYTE *)(*(_DWORD *)v3 + a3) = 0;
  }
  return result;
}

//----- (10001990) --------------------------------------------------------
int __thiscall sub_10001990(int this, const void *a2, unsigned int a3)
{
  int v3; // esi@1
  unsigned int v4; // ecx@2
  int v5; // eax@3
  int v6; // edx@7
  int result; // eax@11
  void *v8; // eax@17
  bool v9; // cf@19

  v3 = this;
  if ( a2 )
  {
    v4 = *(_DWORD *)(this + 20);
    v5 = v4 < 0x10 ? v3 : *(_DWORD *)v3;
    if ( (unsigned int)a2 >= v5 )
    {
      v6 = v4 < 0x10 ? v3 : *(_DWORD *)v3;
      if ( v6 + *(_DWORD *)(v3 + 16) > (unsigned int)a2 )
      {
        if ( v4 < 0x10 )
          result = sub_10001A90(v3, v3, (unsigned int)((char *)a2 - v3), a3);
        else
          result = sub_10001A90(v3, v3, (unsigned int)((char *)a2 - *(_DWORD *)v3), a3);
        return result;
      }
    }
  }
  if ( a3 > 0xFFFFFFFE )
    sub_1000DA74((int)"string too long");
  if ( *(_DWORD *)(v3 + 20) < a3 )
  {
    sub_100023D0(v3, a3, *(_DWORD *)(v3 + 16));
    if ( !a3 )
      return v3;
LABEL_16:
    if ( *(_DWORD *)(v3 + 20) < 0x10u )
      v8 = (void *)v3;
    else
      v8 = *(void **)v3;
    if ( a3 )
      sub_100278E0(v8, a2, a3);
    v9 = *(_DWORD *)(v3 + 20) < 0x10u;
    *(_DWORD *)(v3 + 16) = a3;
    if ( !v9 )
    {
      *(_BYTE *)(*(_DWORD *)v3 + a3) = 0;
      return v3;
    }
    *(_BYTE *)(v3 + a3) = 0;
    return v3;
  }
  if ( a3 )
    goto LABEL_16;
  v9 = *(_DWORD *)(v3 + 20) < 0x10u;
  *(_DWORD *)(v3 + 16) = 0;
  if ( v9 )
  {
    result = v3;
    *(_BYTE *)v3 = 0;
  }
  else
  {
    **(_BYTE **)v3 = 0;
    result = v3;
  }
  return result;
}

//----- (10001A90) --------------------------------------------------------
int __thiscall sub_10001A90(int this, int a2, unsigned int a3, unsigned int a4)
{
  int v4; // ebx@1
  unsigned int v5; // eax@1
  int v6; // esi@1
  int v7; // eax@2
  unsigned int v8; // edi@2
  int v9; // eax@5
  int result; // eax@8
  void *v11; // ecx@15
  bool v12; // cf@17

  v4 = a2;
  v5 = *(_DWORD *)(a2 + 16);
  v6 = this;
  if ( v5 < a3 )
    sub_1000DA94((int)"invalid string position");
  v7 = v5 - a3;
  v8 = a4;
  if ( a4 > v7 )
    v8 = v7;
  if ( this != a2 )
  {
    if ( v8 > 0xFFFFFFFE )
      sub_1000DA74((int)"string too long");
    if ( *(_DWORD *)(this + 20) >= v8 )
    {
      if ( !v8 )
      {
        v12 = *(_DWORD *)(this + 20) < 0x10u;
        *(_DWORD *)(this + 16) = 0;
        if ( v12 )
        {
          result = this;
          *(_BYTE *)this = 0;
        }
        else
        {
          **(_BYTE **)this = 0;
          result = this;
        }
        return result;
      }
    }
    else
    {
      sub_100023D0(this, v8, *(_DWORD *)(this + 16));
      if ( !v8 )
        return v6;
    }
    if ( *(_DWORD *)(a2 + 20) >= 0x10u )
      v4 = *(_DWORD *)a2;
    if ( *(_DWORD *)(v6 + 20) < 0x10u )
      v11 = (void *)v6;
    else
      v11 = *(void **)v6;
    if ( v8 )
      sub_100278E0(v11, (const void *)(v4 + a3), v8);
    v12 = *(_DWORD *)(v6 + 20) < 0x10u;
    *(_DWORD *)(v6 + 16) = v8;
    if ( !v12 )
    {
      *(_BYTE *)(*(_DWORD *)v6 + v8) = 0;
      return v6;
    }
    *(_BYTE *)(v6 + v8) = 0;
    return v6;
  }
  v9 = v8 + a3;
  if ( *(_DWORD *)(this + 16) < v8 + a3 )
    sub_1000DA94((int)"invalid string position");
  *(_DWORD *)(this + 16) = v9;
  if ( *(_DWORD *)(this + 20) >= 0x10u )
    this = *(_DWORD *)this;
  *(_BYTE *)(this + v9) = 0;
  sub_10002090(v6, 0, a3);
  return v6;
}

//----- (10001BA0) --------------------------------------------------------
int __thiscall sub_10001BA0(int this, const void *a2, unsigned int a3)
{
  int v3; // esi@1
  unsigned int v4; // ecx@2
  int v5; // eax@3
  int v6; // edx@7
  int result; // eax@11
  unsigned int v8; // ecx@13
  int v9; // edi@14
  int v10; // ecx@19
  bool v11; // cf@27

  v3 = this;
  if ( a2 )
  {
    v4 = *(_DWORD *)(this + 20);
    v5 = v4 < 0x10 ? v3 : *(_DWORD *)v3;
    if ( (unsigned int)a2 >= v5 )
    {
      v6 = v4 < 0x10 ? v3 : *(_DWORD *)v3;
      if ( v6 + *(_DWORD *)(v3 + 16) > (unsigned int)a2 )
      {
        if ( v4 < 0x10 )
          result = sub_10001CD0(v3, v3, (unsigned int)((char *)a2 - v3), a3);
        else
          result = sub_10001CD0(v3, v3, (unsigned int)((char *)a2 - *(_DWORD *)v3), a3);
        return result;
      }
    }
  }
  v8 = *(_DWORD *)(v3 + 16);
  if ( ~*(_DWORD *)(v3 + 16) <= a3 )
    sub_1000DA74((int)"string too long");
  v9 = v8 + a3;
  if ( !a3 )
    return v3;
  if ( (unsigned int)v9 > 0xFFFFFFFE )
    sub_1000DA74((int)"string too long");
  if ( *(_DWORD *)(v3 + 20) < (unsigned int)v9 )
  {
    sub_100023D0(v3, v8 + a3, v8);
    if ( v9 )
    {
LABEL_18:
      if ( *(_DWORD *)(v3 + 20) < 0x10u )
        v10 = v3;
      else
        v10 = *(_DWORD *)v3;
      if ( a3 )
        sub_100278E0((void *)(v10 + *(_DWORD *)(v3 + 16)), a2, a3);
      v11 = *(_DWORD *)(v3 + 20) < 0x10u;
      *(_DWORD *)(v3 + 16) = v9;
      if ( !v11 )
      {
        *(_BYTE *)(*(_DWORD *)v3 + v9) = 0;
        return v3;
      }
      *(_BYTE *)(v3 + v9) = 0;
    }
    return v3;
  }
  if ( v9 )
    goto LABEL_18;
  *(_DWORD *)(v3 + 16) = 0;
  if ( *(_DWORD *)(v3 + 20) < 0x10u )
  {
    result = v3;
    *(_BYTE *)v3 = 0;
  }
  else
  {
    **(_BYTE **)v3 = 0;
    result = v3;
  }
  return result;
}

//----- (10001CD0) --------------------------------------------------------
int __thiscall sub_10001CD0(int this, int a2, unsigned int a3, unsigned int a4)
{
  unsigned int v4; // edx@1
  int v5; // ebx@1
  int v6; // esi@1
  unsigned int v7; // eax@1
  unsigned int v8; // ecx@2
  int v9; // eax@2
  unsigned int v10; // ebp@2
  int v11; // edi@5
  int v12; // ecx@12
  int result; // eax@15
  bool v14; // cf@20

  v4 = a3;
  v5 = a2;
  v6 = this;
  v7 = *(_DWORD *)(a2 + 16);
  if ( v7 < a3 )
    sub_1000DA94((int)"invalid string position");
  v8 = *(_DWORD *)(this + 16);
  v9 = v7 - a3;
  v10 = a4;
  if ( a4 > v9 )
    v10 = v9;
  if ( ~v8 <= v10 )
    sub_1000DA74((int)"string too long");
  v11 = v8 + v10;
  if ( !v10 )
    return v6;
  if ( (unsigned int)v11 > 0xFFFFFFFE )
    sub_1000DA74((int)"string too long");
  if ( *(_DWORD *)(v6 + 20) < (unsigned int)v11 )
  {
    sub_100023D0(v6, v8 + v10, v8);
    v4 = a3;
    if ( v11 )
    {
LABEL_9:
      if ( *(_DWORD *)(a2 + 20) >= 0x10u )
        v5 = *(_DWORD *)a2;
      if ( *(_DWORD *)(v6 + 20) < 0x10u )
        v12 = v6;
      else
        v12 = *(_DWORD *)v6;
      if ( v10 )
        sub_100278E0((void *)(v12 + *(_DWORD *)(v6 + 16)), (const void *)(v5 + v4), v10);
      v14 = *(_DWORD *)(v6 + 20) < 0x10u;
      *(_DWORD *)(v6 + 16) = v11;
      if ( !v14 )
      {
        *(_BYTE *)(*(_DWORD *)v6 + v11) = 0;
        return v6;
      }
      *(_BYTE *)(v6 + v11) = 0;
    }
    return v6;
  }
  if ( v11 )
    goto LABEL_9;
  *(_DWORD *)(v6 + 16) = 0;
  if ( *(_DWORD *)(v6 + 20) < 0x10u )
  {
    result = v6;
    *(_BYTE *)v6 = 0;
  }
  else
  {
    **(_BYTE **)v6 = 0;
    result = v6;
  }
  return result;
}

//----- (10001DD0) --------------------------------------------------------
int __thiscall sub_10001DD0(void *this, int a2)
{
  void *v2; // edi@1
  int result; // eax@7
  bool v4; // cf@7

  v2 = this;
  if ( *(_DWORD *)(a2 + 20) >= 0x10u )
  {
    if ( this )
      *(_DWORD *)this = *(_DWORD *)a2;
    *(_DWORD *)a2 = 0;
  }
  else if ( *(_DWORD *)(a2 + 16) != -1 )
  {
    sub_100260E0(this, (const void *)a2, *(_DWORD *)(a2 + 16) + 1);
  }
  *((_DWORD *)v2 + 4) = *(_DWORD *)(a2 + 16);
  result = *(_DWORD *)(a2 + 20);
  *((_DWORD *)v2 + 5) = result;
  *(_DWORD *)(a2 + 20) = 15;
  v4 = *(_DWORD *)(a2 + 20) < 0x10u;
  *(_DWORD *)(a2 + 16) = 0;
  if ( v4 )
  {
    *(_BYTE *)a2 = 0;
  }
  else
  {
    result = *(_DWORD *)a2;
    **(_BYTE **)a2 = 0;
  }
  return result;
}

//----- (10001E40) --------------------------------------------------------
int __userpurge sub_10001E40@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4)
{
  LPVOID v4; // ecx@1
  unsigned int v5; // eax@4

  v4 = lpMem;
  if ( (unsigned int)a4 > 0x7FFFFFFF )
    sub_1002B797(a1, a2);
  if ( (unsigned int)(2 * a4) >= 0x1000 )
  {
    if ( (unsigned __int8)lpMem & 0x1F )
      sub_1002B797(a1, a2);
    v5 = *((_DWORD *)lpMem - 1);
    if ( v5 >= (unsigned int)lpMem )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) < 4 )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) > 0x23 )
      sub_1002B797(a1, a2);
    v4 = (LPVOID)*((_DWORD *)lpMem - 1);
  }
  return sub_1000F409(v4);
}

//----- (10001EA0) --------------------------------------------------------
int __userpurge sub_10001EA0@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4)
{
  LPVOID v4; // eax@1
  unsigned int v5; // ecx@3

  v4 = lpMem;
  if ( (unsigned int)a4 >= 0x1000 )
  {
    if ( (unsigned __int8)lpMem & 0x1F )
      sub_1002B797(a1, a2);
    v5 = *((_DWORD *)lpMem - 1);
    if ( v5 >= (unsigned int)lpMem )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) < 4 )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) > 0x23 )
      sub_1002B797(a1, a2);
    v4 = (LPVOID)*((_DWORD *)lpMem - 1);
  }
  return sub_1000F409(v4);
}

//----- (10001EF0) --------------------------------------------------------
int __thiscall sub_10001EF0(int this, unsigned int a2, unsigned int a3)
{
  int v3; // esi@1
  unsigned int v4; // edi@1
  int result; // eax@4
  int v6; // eax@8
  int v7; // edi@10
  bool v8; // cf@12

  v3 = this;
  v4 = *(_DWORD *)(this + 16);
  if ( v4 < a2 )
    sub_1000DA94((int)"invalid string position");
  if ( v4 - a2 > a3 )
  {
    if ( a3 )
    {
      if ( *(_DWORD *)(this + 20) < 8u )
        v6 = this;
      else
        v6 = *(_DWORD *)this;
      v7 = v4 - a3;
      if ( v7 != a2 )
        sub_100260E0((void *)(v6 + 2 * a2), (const void *)(v6 + 2 * a2 + 2 * a3), 2 * (v7 - a2));
      v8 = *(_DWORD *)(v3 + 20) < 8u;
      *(_DWORD *)(v3 + 16) = v7;
      if ( !v8 )
      {
        *(_WORD *)(*(_DWORD *)v3 + 2 * v7) = 0;
        return v3;
      }
      *(_WORD *)(v3 + 2 * v7) = 0;
    }
    result = v3;
  }
  else
  {
    *(_DWORD *)(this + 16) = a2;
    if ( *(_DWORD *)(this + 20) < 8u )
    {
      result = this;
      *(_WORD *)(this + 2 * a2) = 0;
    }
    else
    {
      *(_WORD *)(*(_DWORD *)this + 2 * a2) = 0;
      result = this;
    }
  }
  return result;
}

//----- (10001FA0) --------------------------------------------------------
int __thiscall sub_10001FA0(int this, unsigned int a2, int a3)
{
  int v3; // esi@1
  int v4; // ecx@1
  int v5; // edi@2
  bool v6; // cf@6
  int result; // eax@7

  v3 = this;
  v4 = *(_DWORD *)(this + 16);
  if ( ~v4 <= a2 )
    sub_1000DA74((int)"string too long");
  v5 = v4 + a2;
  if ( !a2 )
    return v3;
  if ( (unsigned int)v5 > 0x7FFFFFFE )
    sub_1000DA74((int)"string too long");
  if ( *(_DWORD *)(v3 + 20) < (unsigned int)v5 )
  {
    sub_100021D0(v3, v4 + a2, v4);
    if ( v5 )
    {
LABEL_6:
      sub_10002370(v3, *(_DWORD *)(v3 + 16), a2, 0);
      v6 = *(_DWORD *)(v3 + 20) < 8u;
      *(_DWORD *)(v3 + 16) = v5;
      if ( !v6 )
      {
        *(_WORD *)(*(_DWORD *)v3 + 2 * v5) = 0;
        return v3;
      }
      *(_WORD *)(v3 + 2 * v5) = 0;
    }
    return v3;
  }
  if ( v5 )
    goto LABEL_6;
  *(_DWORD *)(v3 + 16) = 0;
  if ( *(_DWORD *)(v3 + 20) < 8u )
  {
    result = v3;
    *(_WORD *)v3 = 0;
  }
  else
  {
    **(_WORD **)v3 = 0;
    result = v3;
  }
  return result;
}

//----- (10002050) --------------------------------------------------------
void *__thiscall sub_10002050(int this, void *a2, unsigned int a3, int a4)
{
  void *result; // eax@4

  if ( a3 == 1 )
  {
    if ( *(_DWORD *)(this + 20) >= 0x10u )
      this = *(_DWORD *)this;
    result = a2;
    *((_BYTE *)a2 + this) = 0;
  }
  else
  {
    if ( *(_DWORD *)(this + 20) >= 0x10u )
      this = *(_DWORD *)this;
    result = sub_10028330((char *)a2 + this, 0, a3);
  }
  return result;
}

//----- (10002090) --------------------------------------------------------
int __thiscall sub_10002090(int this, unsigned int a2, unsigned int a3)
{
  int v3; // esi@1
  unsigned int v4; // edi@1
  int result; // eax@4
  int v6; // eax@8
  int v7; // edi@10
  bool v8; // cf@12

  v3 = this;
  v4 = *(_DWORD *)(this + 16);
  if ( v4 < a2 )
    sub_1000DA94((int)"invalid string position");
  if ( v4 - a2 > a3 )
  {
    if ( a3 )
    {
      if ( *(_DWORD *)(this + 20) < 0x10u )
        v6 = this;
      else
        v6 = *(_DWORD *)this;
      v7 = v4 - a3;
      if ( v7 != a2 )
        sub_100260E0((void *)(v6 + a2), (const void *)(v6 + a2 + a3), v7 - a2);
      v8 = *(_DWORD *)(v3 + 20) < 0x10u;
      *(_DWORD *)(v3 + 16) = v7;
      if ( !v8 )
      {
        *(_BYTE *)(*(_DWORD *)v3 + v7) = 0;
        return v3;
      }
      *(_BYTE *)(v3 + v7) = 0;
    }
    result = v3;
  }
  else
  {
    *(_DWORD *)(this + 16) = a2;
    if ( *(_DWORD *)(this + 20) < 0x10u )
    {
      result = this;
      *(_BYTE *)(this + a2) = 0;
    }
    else
    {
      *(_BYTE *)(*(_DWORD *)this + a2) = 0;
      result = this;
    }
  }
  return result;
}

//----- (10002130) --------------------------------------------------------
int __thiscall sub_10002130(int this, unsigned int a2, int a3)
{
  int v3; // esi@1
  unsigned int v4; // ecx@1
  int v5; // edi@2
  bool v6; // cf@6
  int result; // eax@7

  v3 = this;
  v4 = *(_DWORD *)(this + 16);
  if ( ~v4 <= a2 )
    sub_1000DA74((int)"string too long");
  v5 = v4 + a2;
  if ( !a2 )
    return v3;
  if ( (unsigned int)v5 > 0xFFFFFFFE )
    sub_1000DA74((int)"string too long");
  if ( *(_DWORD *)(v3 + 20) < (unsigned int)v5 )
  {
    sub_100023D0(v3, v4 + a2, v4);
    if ( v5 )
    {
LABEL_6:
      sub_10002050(v3, *(void **)(v3 + 16), a2, v4);
      v6 = *(_DWORD *)(v3 + 20) < 0x10u;
      *(_DWORD *)(v3 + 16) = v5;
      if ( !v6 )
      {
        *(_BYTE *)(*(_DWORD *)v3 + v5) = 0;
        return v3;
      }
      *(_BYTE *)(v3 + v5) = 0;
    }
    return v3;
  }
  if ( v5 )
    goto LABEL_6;
  *(_DWORD *)(v3 + 16) = 0;
  if ( *(_DWORD *)(v3 + 20) < 0x10u )
  {
    result = v3;
    *(_BYTE *)v3 = 0;
  }
  else
  {
    **(_BYTE **)v3 = 0;
    result = v3;
  }
  return result;
}

//----- (100021D0) --------------------------------------------------------
int __thiscall sub_100021D0(int this, unsigned int a2, int a3)
{
  unsigned int v3; // edi@1
  LPVOID v4; // esi@1
  unsigned int v5; // ebx@3
  unsigned int v6; // ecx@3
  int v7; // eax@6
  LPVOID v8; // ebx@7
  SIZE_T v9; // eax@10
  LPVOID v10; // eax@13
  const void *v11; // ecx@17
  unsigned int v12; // eax@21
  bool v13; // cf@23
  LPVOID v14; // eax@24
  int result; // eax@26
  int v16; // [sp+0h] [bp-24h]@1
  int v17; // [sp+10h] [bp-14h]@1
  int *v18; // [sp+14h] [bp-10h]@1
  int v19; // [sp+20h] [bp-4h]@6

  v18 = &v16;
  v3 = a2 | 7;
  v4 = (LPVOID)this;
  v17 = this;
  if ( (a2 | 7) <= 0x7FFFFFFE )
  {
    v5 = *(_DWORD *)(this + 20);
    v6 = *(_DWORD *)(this + 20) >> 1;
    if ( v6 > v3 / 3 )
    {
      v3 = v6 + v5;
      if ( v5 > 2147483646 - v6 )
        v3 = 2147483646;
    }
  }
  else
  {
    v3 = a2;
  }
  v7 = v3 + 1;
  v19 = 0;
  if ( v3 == -1 )
  {
    v8 = 0;
  }
  else
  {
    if ( (unsigned int)v7 > 0x7FFFFFFF )
      sub_1000DA57();
    v9 = 2 * v7;
    if ( v9 < 0x1000 )
    {
      v8 = sub_1000F0A6(v9);
    }
    else
    {
      if ( v9 + 35 <= v9 )
        sub_1000DA57();
      v10 = sub_1000F0A6(v9 + 35);
      v8 = (LPVOID)((unsigned int)((char *)v10 + 35) & 0xFFFFFFE0);
      *((_DWORD *)v8 - 1) = v10;
    }
  }
  if ( a3 )
  {
    v11 = *((_DWORD *)v4 + 5) < 8u ? v4 : *(_DWORD *)v4;
    if ( a3 )
      sub_100278E0(v8, v11, 2 * a3);
  }
  v12 = *((_DWORD *)v4 + 5);
  if ( v12 >= 8 )
    sub_10001E40((int)v8, v3, *(LPVOID *)v4, v12 + 1);
  *((_DWORD *)v4 + 5) = 7;
  v13 = *((_DWORD *)v4 + 5) < 8u;
  *((_DWORD *)v4 + 4) = 0;
  if ( v13 )
    v14 = v4;
  else
    v14 = *(LPVOID *)v4;
  *(_WORD *)v14 = 0;
  result = a3;
  *(_DWORD *)v4 = v8;
  *((_DWORD *)v4 + 5) = v3;
  v13 = *((_DWORD *)v4 + 5) < 8u;
  *((_DWORD *)v4 + 4) = a3;
  if ( !v13 )
    v4 = v8;
  *((_WORD *)v4 + a3) = 0;
  return result;
}

//----- (10002370) --------------------------------------------------------
__int16 __thiscall sub_10002370(int this, int a2, unsigned int a3, unsigned __int16 a4)
{
  int v4; // edx@1
  int v5; // eax@4
  void *v6; // edi@7
  int v7; // edi@8
  int i; // ecx@8

  v4 = this;
  if ( a3 == 1 )
  {
    if ( *(_DWORD *)(this + 20) >= 8u )
      v4 = *(_DWORD *)this;
    LOWORD(v5) = a4;
    *(_WORD *)(v4 + 2 * a2) = a4;
  }
  else
  {
    if ( *(_DWORD *)(this + 20) >= 8u )
      v4 = *(_DWORD *)this;
    LOWORD(v5) = a2;
    v6 = (void *)(v4 + 2 * a2);
    if ( a3 )
    {
      v5 = (a4 << 16) | a4;
      memset32(v6, v5, a3 >> 1);
      v7 = (int)((char *)v6 + 4 * (a3 >> 1));
      for ( i = a3 & 1; i; --i )
      {
        *(_WORD *)v7 = a4;
        v7 += 2;
      }
    }
  }
  return v5;
}

//----- (100023D0) --------------------------------------------------------
unsigned int __thiscall sub_100023D0(int this, unsigned int a2, unsigned int a3)
{
  unsigned int v3; // edi@1
  LPVOID v4; // esi@1
  unsigned int v5; // ebx@3
  unsigned int v6; // ecx@3
  LPVOID v7; // ebx@7
  LPVOID v8; // eax@11
  const void *v9; // ecx@15
  unsigned int v10; // eax@19
  bool v11; // cf@21
  LPVOID v12; // eax@22
  unsigned int result; // eax@24
  int v14; // [sp+0h] [bp-24h]@1
  int v15; // [sp+10h] [bp-14h]@1
  int *v16; // [sp+14h] [bp-10h]@1
  int v17; // [sp+20h] [bp-4h]@6

  v16 = &v14;
  v3 = a2 | 0xF;
  v4 = (LPVOID)this;
  v15 = this;
  if ( (a2 | 0xF) <= 0xFFFFFFFE )
  {
    v5 = *(_DWORD *)(this + 20);
    v6 = *(_DWORD *)(this + 20) >> 1;
    if ( v6 > v3 / 3 )
    {
      v3 = v6 + v5;
      if ( v5 > -2 - v6 )
        v3 = -2;
    }
  }
  else
  {
    v3 = a2;
  }
  v17 = 0;
  if ( v3 == -1 )
  {
    v7 = 0;
  }
  else if ( v3 + 1 < 0x1000 )
  {
    v7 = sub_1000F0A6(v3 + 1);
  }
  else
  {
    if ( v3 + 36 <= v3 + 1 )
      sub_1000DA57();
    v8 = sub_1000F0A6(v3 + 36);
    v7 = (LPVOID)((unsigned int)((char *)v8 + 35) & 0xFFFFFFE0);
    *((_DWORD *)v7 - 1) = v8;
  }
  if ( a3 )
  {
    v9 = *((_DWORD *)v4 + 5) < 0x10u ? v4 : *(_DWORD *)v4;
    if ( a3 )
      sub_100278E0(v7, v9, a3);
  }
  v10 = *((_DWORD *)v4 + 5);
  if ( v10 >= 0x10 )
    sub_10001EA0((int)v7, v3, *(LPVOID *)v4, v10 + 1);
  *((_DWORD *)v4 + 5) = 15;
  v11 = *((_DWORD *)v4 + 5) < 0x10u;
  *((_DWORD *)v4 + 4) = 0;
  if ( v11 )
    v12 = v4;
  else
    v12 = *(LPVOID *)v4;
  *(_BYTE *)v12 = 0;
  result = a3;
  *(_DWORD *)v4 = v7;
  *((_DWORD *)v4 + 5) = v3;
  v11 = *((_DWORD *)v4 + 5) < 0x10u;
  *((_DWORD *)v4 + 4) = a3;
  if ( !v11 )
    v4 = v7;
  *((_BYTE *)v4 + a3) = 0;
  return result;
}

//----- (10002560) --------------------------------------------------------
LPVOID __stdcall sub_10002560(unsigned int a1)
{
  LPVOID result; // eax@2
  SIZE_T v2; // eax@4
  LPVOID v3; // eax@6

  if ( a1 )
  {
    if ( a1 > 0x7FFFFFFF )
      sub_1000DA57();
    v2 = 2 * a1;
    if ( 2 * a1 < 0x1000 )
    {
      result = sub_1000F0A6(v2);
    }
    else
    {
      if ( v2 + 35 <= v2 )
        sub_1000DA57();
      v3 = sub_1000F0A6(v2 + 35);
      *(_DWORD *)(((unsigned int)((char *)v3 + 35) & 0xFFFFFFE0) - 4) = v3;
      result = (LPVOID)((unsigned int)((char *)v3 + 35) & 0xFFFFFFE0);
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (100025C0) --------------------------------------------------------
LPVOID __stdcall sub_100025C0(SIZE_T a1)
{
  LPVOID result; // eax@2
  LPVOID v2; // eax@5

  if ( a1 )
  {
    if ( a1 < 0x1000 )
    {
      result = sub_1000F0A6(a1);
    }
    else
    {
      if ( a1 + 35 <= a1 )
        sub_1000DA57();
      v2 = sub_1000F0A6(a1 + 35);
      *(_DWORD *)(((unsigned int)((char *)v2 + 35) & 0xFFFFFFE0) - 4) = v2;
      result = (LPVOID)((unsigned int)((char *)v2 + 35) & 0xFFFFFFE0);
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10002620) --------------------------------------------------------
void *__thiscall sub_10002620(void *this)
{
  return this;
}

//----- (10002630) --------------------------------------------------------
int __thiscall sub_10002630(int this, int a2, int a3)
{
  int result; // eax@2

  switch ( a3 )
  {
    case 0:
    case 1:
    case 3:
    case 7:
    case 8:
      goto LABEL_5;
    case 2:
    case 4:
    case 9:
      *(_DWORD *)(this + 20) = -1;
      goto LABEL_4;
    case 5:
      goto LABEL_6;
    case 6:
      *(_DWORD *)(this + 12) = -1;
      result = this;
      *(_DWORD *)(this + 8) = 0;
      break;
    case 10:
LABEL_4:
      *(_DWORD *)(this + 16) = 0;
LABEL_5:
      *(_DWORD *)(this + 12) = a2;
      *(_DWORD *)(this + 8) = 0;
LABEL_6:
      result = this;
      break;
  }
  return result;
}

//----- (100026A0) --------------------------------------------------------
int __thiscall sub_100026A0(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_10002BD0(this);
  return v1;
}

//----- (100026C0) --------------------------------------------------------
int __fastcall sub_100026C0(int a1, unsigned int a2)
{
  int v2; // esi@1

  v2 = a1;
  sub_10002C40(a1, a2);
  return v2;
}

//----- (100026E0) --------------------------------------------------------
int __usercall sub_100026E0@<eax>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // edi@1
  void *v3; // ecx@1

  v2 = a1;
  sub_10002870(a1 + 480, a2);
  sub_10002870(v2 + 448, a2);
  sub_10002870(v2 + 412, a2);
  sub_10002870(v2 + 376, a2);
  v3 = *(void **)(v2 + 120);
  if ( v3 )
  {
    sub_10002AD0(a2, v2, v3, (*(_DWORD *)(v2 + 128) - (signed int)v3) >> 2);
    *(_DWORD *)(v2 + 120) = 0;
    *(_DWORD *)(v2 + 124) = 0;
    *(_DWORD *)(v2 + 128) = 0;
  }
  sub_10002B30((void *)(v2 + 112));
  sub_1000F409(*(LPVOID *)(v2 + 112));
  sub_10002870(v2 + 76, a2);
  sub_10002870(v2 + 44, a2);
  return sub_10002870(v2 + 12, a2);
}

//----- (100027D0) --------------------------------------------------------
int __thiscall sub_100027D0(int this, unsigned int a2)
{
  int v2; // esi@1
  int result; // eax@1
  int v4; // edi@3
  int v5; // edx@5
  int v6; // ecx@6
  int v7; // ecx@9

  v2 = this;
  result = *(_DWORD *)(this + 4);
  if ( a2 >= result || (this = *(_DWORD *)this, *(_DWORD *)v2 > a2) )
  {
    if ( result == *(_DWORD *)(v2 + 8) )
      result = sub_100028E0(v2, this);
    v7 = *(_DWORD *)(v2 + 4);
    if ( v7 )
    {
      *(_DWORD *)v7 = *(_DWORD *)a2;
      result = *(_DWORD *)(a2 + 4);
      *(_DWORD *)(v7 + 4) = result;
    }
  }
  else
  {
    v4 = (signed int)(a2 - this) >> 3;
    if ( result == *(_DWORD *)(v2 + 8) )
      result = sub_100028E0(v2, *(_DWORD *)v2);
    v5 = *(_DWORD *)(v2 + 4);
    if ( v5 )
    {
      v6 = *(_DWORD *)v2;
      *(_DWORD *)v5 = *(_DWORD *)(*(_DWORD *)v2 + 8 * v4);
      result = *(_DWORD *)(v6 + 8 * v4 + 4);
      *(_DWORD *)(v5 + 4) = result;
      *(_DWORD *)(v2 + 4) += 8;
      return result;
    }
  }
  *(_DWORD *)(v2 + 4) += 8;
  return result;
}

//----- (10002870) --------------------------------------------------------
int __usercall sub_10002870@<eax>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // edi@1
  void *v3; // ecx@1
  void **v4; // eax@3
  void *v5; // ecx@3
  void *v6; // esi@4

  v2 = a1;
  v3 = *(void **)(a1 + 12);
  if ( v3 )
  {
    sub_10002AD0(a2, v2, v3, (*(_DWORD *)(v2 + 20) - (signed int)v3) >> 2);
    *(_DWORD *)(v2 + 12) = 0;
    *(_DWORD *)(v2 + 16) = 0;
    *(_DWORD *)(v2 + 20) = 0;
  }
  v4 = *(void ***)(v2 + 4);
  v5 = *v4;
  *v4 = v4;
  *(_DWORD *)(*(_DWORD *)(v2 + 4) + 4) = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 8) = 0;
  if ( v5 != *(void **)(v2 + 4) )
  {
    do
    {
      v6 = *(void **)v5;
      sub_1000F409(v5);
      v5 = v6;
    }
    while ( v6 != *(void **)(v2 + 4) );
  }
  return sub_1000F409(*(LPVOID *)(v2 + 4));
}

//----- (100028E0) --------------------------------------------------------
int __thiscall sub_100028E0(int this, int a2)
{
  void *v2; // esi@1
  int v3; // edi@1
  int v4; // edx@1
  int result; // eax@1
  int v6; // ecx@2
  int v7; // edx@2
  int v8; // edx@3
  int v9; // edi@3
  int v10; // ecx@3

  v2 = (void *)this;
  v3 = *(_DWORD *)(this + 8);
  v4 = *(_DWORD *)(this + 4);
  result = (*(_DWORD *)(this + 8) - v4) >> 3;
  if ( (unsigned int)result < 1 )
  {
    v6 = *(_DWORD *)this;
    v7 = (v4 - *(_DWORD *)v2) >> 3;
    if ( (unsigned int)(0x1FFFFFFF - v7) < 1 )
      sub_1000DA74((int)"vector<T> too long");
    v8 = v7 + 1;
    v9 = (v3 - v6) >> 3;
    v10 = 0;
    if ( 0x1FFFFFFF - ((unsigned int)v9 >> 1) >= v9 )
      v10 = v9 + ((unsigned int)v9 >> 1);
    if ( v10 >= (unsigned int)v8 )
      v8 = v10;
    result = sub_10002A30(v2, v8);
  }
  return result;
}

//----- (100029D0) --------------------------------------------------------
int __userpurge sub_100029D0@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4)
{
  LPVOID v4; // ecx@1
  unsigned int v5; // eax@4

  v4 = lpMem;
  if ( (unsigned int)a4 > 0x1FFFFFFF )
    sub_1002B797(a1, a2);
  if ( (unsigned int)(8 * a4) >= 0x1000 )
  {
    if ( (unsigned __int8)lpMem & 0x1F )
      sub_1002B797(a1, a2);
    v5 = *((_DWORD *)lpMem - 1);
    if ( v5 >= (unsigned int)lpMem )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) < 4 )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) > 0x23 )
      sub_1002B797(a1, a2);
    v4 = (LPVOID)*((_DWORD *)lpMem - 1);
  }
  return sub_1000F409(v4);
}

//----- (10002A30) --------------------------------------------------------
int __thiscall sub_10002A30(void *this, int a2)
{
  int v2; // edi@1
  LPVOID v3; // esi@2
  int v4; // eax@4
  LPVOID v5; // eax@6
  int v6; // ebp@8
  int result; // eax@10

  v2 = (int)this;
  if ( a2 )
  {
    if ( (unsigned int)a2 > 0x1FFFFFFF )
      sub_1000DA57();
    v4 = 8 * a2;
    if ( (unsigned int)(8 * a2) < 0x1000 )
    {
      v3 = sub_1000F0A6(8 * a2);
    }
    else
    {
      if ( v4 + 35 <= (unsigned int)v4 )
        sub_1000DA57();
      v5 = sub_1000F0A6(v4 + 35);
      v3 = (LPVOID)((unsigned int)((char *)v5 + 35) & 0xFFFFFFE0);
      *((_DWORD *)v3 - 1) = v5;
    }
  }
  else
  {
    v3 = 0;
  }
  sub_100260E0(v3, *(const void **)v2, *(_DWORD *)(v2 + 4) - *(_DWORD *)v2);
  v6 = (*(_DWORD *)(v2 + 4) - *(_DWORD *)v2) >> 3;
  if ( *(_DWORD *)v2 )
    sub_100029D0(a2, v2, *(LPVOID *)v2, (*(_DWORD *)(v2 + 8) - *(_DWORD *)v2) >> 3);
  *(_DWORD *)(v2 + 8) = (char *)v3 + 8 * a2;
  result = (int)((char *)v3 + 8 * v6);
  *(_DWORD *)(v2 + 4) = result;
  *(_DWORD *)v2 = v3;
  return result;
}

//----- (10002AD0) --------------------------------------------------------
int __userpurge sub_10002AD0@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4)
{
  LPVOID v4; // ecx@1
  unsigned int v5; // eax@4

  v4 = lpMem;
  if ( (unsigned int)a4 > 0x3FFFFFFF )
    sub_1002B797(a1, a2);
  if ( (unsigned int)(4 * a4) >= 0x1000 )
  {
    if ( (unsigned __int8)lpMem & 0x1F )
      sub_1002B797(a1, a2);
    v5 = *((_DWORD *)lpMem - 1);
    if ( v5 >= (unsigned int)lpMem )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) < 4 )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) > 0x23 )
      sub_1002B797(a1, a2);
    v4 = (LPVOID)*((_DWORD *)lpMem - 1);
  }
  return sub_1000F409(v4);
}

//----- (10002B30) --------------------------------------------------------
int __thiscall sub_10002B30(void *this)
{
  void *v1; // ebp@1
  int v2; // edi@1
  int result; // eax@1
  unsigned int v4; // eax@2
  int v5; // esi@2
  int v6; // ebx@2
  void *v7; // ecx@3
  int v8; // eax@3
  void *v9; // eax@6
  int v10; // ecx@7
  bool v11; // cf@11

  v1 = this;
  v2 = **(_DWORD **)this;
  **(_DWORD **)this = *(_DWORD *)this;
  result = *(_DWORD *)this;
  *(_DWORD *)(result + 4) = result;
  *((_DWORD *)this + 1) = 0;
  if ( v2 != *(_DWORD *)this )
  {
    do
    {
      v4 = *(_DWORD *)(v2 + 28);
      v5 = v2 + 8;
      v6 = *(_DWORD *)v2;
      if ( v4 >= 8 )
      {
        v7 = *(void **)v5;
        v8 = v4 + 1;
        if ( (unsigned int)v8 > 0x7FFFFFFF )
          goto LABEL_15;
        if ( (unsigned int)(2 * v8) >= 0x1000 )
        {
          if ( (unsigned __int8)v7 & 0x1F
            || (v9 = (void *)*((_DWORD *)v7 - 1), v9 >= v7)
            || (v10 = (_BYTE *)v7 - (_BYTE *)v9, (unsigned int)v10 < 4)
            || (unsigned int)v10 > 0x23 )
LABEL_15:
            sub_1002B797(v6, v2);
          v7 = v9;
        }
        sub_1000F409(v7);
      }
      *(_DWORD *)(v2 + 28) = 7;
      v11 = *(_DWORD *)(v2 + 28) < 8u;
      *(_DWORD *)(v2 + 24) = 0;
      if ( !v11 )
        v5 = *(_DWORD *)v5;
      *(_WORD *)v5 = 0;
      result = sub_1000F409((LPVOID)v2);
      v2 = v6;
    }
    while ( v6 != *(_DWORD *)v1 );
  }
  return result;
}

//----- (10002BD0) --------------------------------------------------------
int __thiscall sub_10002BD0(int this)
{
  int v1; // ebx@1
  const void *v2; // edi@1
  unsigned int v3; // esi@1
  unsigned int v4; // edx@2
  char v6[2]; // [sp+3Eh] [bp-2h]@1

  v1 = this;
  v2 = v6;
  v3 = 0;
  do
  {
    v2 = (char *)v2 - 2;
    v4 = v3 / 0xA;
    *(_WORD *)v2 = v3 % 0xA + 48;
    v3 /= 0xAu;
  }
  while ( v3 );
  *(_DWORD *)(this + 20) = 7;
  *(_DWORD *)(this + 16) = v4;
  *(_WORD *)this = 0;
  if ( v2 != v6 )
    sub_10001460(this, v2, (v6 - (_BYTE *)v2) >> 1);
  return v1;
}
// 10002BD0: using guessed type char var_2[2];

//----- (10002C40) --------------------------------------------------------
int __fastcall sub_10002C40(int a1, unsigned int a2)
{
  int v2; // ebx@1
  unsigned int v3; // esi@1
  const void *v4; // edi@1
  unsigned int v5; // edx@2
  char v7[2]; // [sp+3Eh] [bp-2h]@1

  v2 = a1;
  v3 = a2;
  v4 = v7;
  do
  {
    v4 = (char *)v4 - 2;
    v5 = v3 / 0xA;
    *(_WORD *)v4 = v3 % 0xA + 48;
    v3 /= 0xAu;
  }
  while ( v3 );
  *(_DWORD *)(a1 + 20) = 7;
  *(_DWORD *)(a1 + 16) = v5;
  *(_WORD *)a1 = 0;
  if ( v4 != v7 )
    sub_10001460(a1, v4, (v7 - (_BYTE *)v4) >> 1);
  return v2;
}
// 10002C40: using guessed type char var_2[2];

//----- (10002CB0) --------------------------------------------------------
int __thiscall sub_10002CB0(void *this, int a2, int a3)
{
  void *v3; // edi@1
  unsigned int v4; // eax@1
  int v5; // esi@1
  int v6; // eax@1
  int v7; // ecx@1
  int v8; // edx@1
  int v9; // ebp@1
  int v10; // esi@1
  int v11; // eax@3
  int result; // eax@12

  v3 = this;
  v4 = sub_10002DC0(a3);
  v5 = *((_DWORD *)v3 + 3);
  v6 = *((_DWORD *)v3 + 6) & v4;
  v7 = *((_DWORD *)v3 + 1);
  v8 = *(_DWORD *)(v5 + 8 * v6);
  v6 *= 2;
  v9 = *(_DWORD *)(v5 + 4 * v6);
  v10 = v5 + 4 * v6;
  while ( 1 )
  {
    if ( v9 == v7 )
      v11 = *((_DWORD *)v3 + 1);
    else
      v11 = **(_DWORD **)(v10 + 4);
    if ( v8 == v11 )
    {
      result = a2;
      *(_DWORD *)a2 = v7;
      return result;
    }
    if ( *(_DWORD *)(v8 + 8) == *(_DWORD *)a3 && *(_DWORD *)(v8 + 12) == *(_DWORD *)(a3 + 4) )
      break;
    v8 = *(_DWORD *)v8;
  }
  if ( *(_DWORD *)a3 != *(_DWORD *)(v8 + 8) || *(_DWORD *)(a3 + 4) != *(_DWORD *)(v8 + 12) )
    v8 = *((_DWORD *)v3 + 1);
  result = a2;
  *(_DWORD *)a2 = v8;
  return result;
}

//----- (10002D30) --------------------------------------------------------
int __thiscall sub_10002D30(int this, int a2, int a3)
{
  int v3; // edx@1
  int v4; // esi@1
  unsigned int v5; // ecx@1
  int v6; // eax@1
  int v7; // ebx@1
  int v8; // edx@1
  int v9; // ecx@3
  int result; // eax@10

  v3 = *(_DWORD *)(this + 12);
  v4 = *(_DWORD *)(this + 4);
  v5 = 16777619
     * (*(_BYTE *)(a3 + 3) ^ 16777619
                           * (*(_BYTE *)(a3 + 2) ^ 16777619
                                                 * (*(_BYTE *)(a3 + 1) ^ 16777619 * (*(_BYTE *)a3 ^ 0x811C9DC5)))) & *(_DWORD *)(this + 24);
  v6 = *(_DWORD *)(v3 + 8 * v5);
  v5 *= 2;
  v7 = *(_DWORD *)(v3 + 4 * v5);
  v8 = v3 + 4 * v5;
  while ( 1 )
  {
    if ( v7 == v4 )
      v9 = v4;
    else
      v9 = **(_DWORD **)(v8 + 4);
    if ( v6 == v9 )
    {
      result = a2;
      *(_DWORD *)a2 = v4;
      return result;
    }
    if ( *(_DWORD *)(v6 + 8) == *(_DWORD *)a3 )
      break;
    v6 = *(_DWORD *)v6;
  }
  if ( *(_DWORD *)a3 != *(_DWORD *)(v6 + 8) )
    v6 = v4;
  *(_DWORD *)a2 = v6;
  return a2;
}

//----- (10002DC0) --------------------------------------------------------
unsigned int __stdcall sub_10002DC0(int a1)
{
  return 16777619
       * (*(_BYTE *)(a1 + 7) ^ 16777619
                             * (*(_BYTE *)(a1 + 6) ^ 16777619
                                                   * (*(_BYTE *)(a1 + 5) ^ 16777619
                                                                         * (*(_BYTE *)(a1 + 4) ^ 16777619
                                                                                               * (*(_BYTE *)(a1 + 3) ^ 16777619 * (*(_BYTE *)(a1 + 2) ^ 16777619 * (*(_BYTE *)(a1 + 1) ^ 16777619 * (*(_BYTE *)a1 ^ 0x811C9DC5))))))));
}

//----- (10002E30) --------------------------------------------------------
int __thiscall sub_10002E30(int this, int a2, int a3, int a4, int a5)
{
  int v5; // edi@1
  void **v6; // eax@1
  void *v7; // esi@1
  LPVOID v8; // edx@1
  int v9; // eax@1

  v5 = this;
  v6 = *(void ***)(this + 4);
  v7 = *v6;
  v8 = sub_100037E0(*v6, *((void **)*v6 + 1), this, a4, this);
  v9 = *(_DWORD *)(v5 + 8);
  if ( (unsigned int)(178956969 - v9) < 1 )
    sub_1000DA74((int)"list<T> too long");
  *(_DWORD *)(v5 + 8) = v9 + 1;
  *((_DWORD *)v7 + 1) = v8;
  **((_DWORD **)v8 + 1) = v8;
  sub_10002EF0((void *)v5, a2, **(_DWORD **)(v5 + 4) + 8, **(LPVOID **)(v5 + 4));
  return a2;
}

//----- (10002E90) --------------------------------------------------------
int __thiscall sub_10002E90(int this, int a2, int a3, int a4, int a5)
{
  int v5; // edi@1
  void **v6; // eax@1
  void *v7; // esi@1
  LPVOID v8; // edx@1
  int v9; // eax@1

  v5 = this;
  v6 = *(void ***)(this + 4);
  v7 = *v6;
  v8 = sub_10003810(*v6, *((void **)*v6 + 1), this, a4, this);
  v9 = *(_DWORD *)(v5 + 8);
  if ( (unsigned int)(214748363 - v9) < 1 )
    sub_1000DA74((int)"list<T> too long");
  *(_DWORD *)(v5 + 8) = v9 + 1;
  *((_DWORD *)v7 + 1) = v8;
  **((_DWORD **)v8 + 1) = v8;
  sub_10003050(v5, a2, **(_DWORD **)(v5 + 4) + 8, **(LPVOID **)(v5 + 4));
  return a2;
}

//----- (10002EF0) --------------------------------------------------------
int __thiscall sub_10002EF0(void *this, int a2, int a3, LPVOID lpMem)
{
  int v4; // edi@1
  int v5; // ebx@1
  unsigned int v6; // eax@1
  int v7; // esi@1
  int v8; // edx@1
  int v9; // eax@1
  int v10; // esi@2
  int v11; // eax@8
  int v12; // edx@9
  int v13; // ecx@10
  int result; // eax@12
  void *v15; // eax@15
  int v16; // [sp+0h] [bp-24h]@1
  void *v17; // [sp+Ch] [bp-18h]@1
  LPVOID v18; // [sp+10h] [bp-14h]@8
  int *v19; // [sp+14h] [bp-10h]@1
  int v20; // [sp+20h] [bp-4h]@1
  int v21; // [sp+30h] [bp+Ch]@1

  v4 = a3;
  v5 = (int)this;
  v19 = &v16;
  v17 = this;
  v20 = 0;
  v6 = sub_10002DC0(a3);
  v7 = *(_DWORD *)(v5 + 12);
  v8 = v6 & *(_DWORD *)(v5 + 24);
  v9 = *(_DWORD *)(v7 + 8 * v8);
  v21 = 8 * v8;
  if ( v9 == *(_DWORD *)(v5 + 4) )
    v10 = *(_DWORD *)(v5 + 4);
  else
    v10 = **(_DWORD **)(v7 + 8 * v8 + 4);
  if ( v10 == v9 )
  {
LABEL_8:
    v18 = lpMem;
    v11 = *(_DWORD *)lpMem;
    if ( v10 != *(_DWORD *)lpMem )
    {
      **((_DWORD **)lpMem + 1) = v11;
      **(_DWORD **)(v11 + 4) = v10;
      **(_DWORD **)(v10 + 4) = lpMem;
      v12 = *(_DWORD *)(v10 + 4);
      *(_DWORD *)(v10 + 4) = *(_DWORD *)(v11 + 4);
      *(_DWORD *)(v11 + 4) = *((_DWORD *)lpMem + 1);
      *((_DWORD *)lpMem + 1) = v12;
    }
    v13 = v21 + *(_DWORD *)(v5 + 12);
    if ( *(_DWORD *)v13 == *(_DWORD *)(v5 + 4) )
    {
      *(_DWORD *)v13 = lpMem;
      *(_DWORD *)(v21 + *(_DWORD *)(v5 + 12) + 4) = lpMem;
    }
    else if ( *(_DWORD *)v13 == v10 )
    {
      *(_DWORD *)v13 = lpMem;
    }
    else
    {
      v15 = (void *)**(_DWORD **)(v13 + 4);
      *(_DWORD *)(v13 + 4) = v15;
      if ( v15 != lpMem )
        *(_DWORD *)(*(_DWORD *)(v5 + 12) + v21 + 4) = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v5 + 12) + v21 + 4) + 4);
    }
    v20 = 2;
    sub_100031E0(v5);
    result = a2;
    *(_DWORD *)a2 = lpMem;
    *(_BYTE *)(a2 + 4) = 1;
  }
  else
  {
    while ( 1 )
    {
      v10 = *(_DWORD *)(v10 + 4);
      if ( *(_DWORD *)v4 == *(_DWORD *)(v10 + 8) && *(_DWORD *)(v4 + 4) == *(_DWORD *)(v10 + 12) )
        break;
      if ( v10 == v9 )
        goto LABEL_8;
    }
    **((_DWORD **)lpMem + 1) = *(_DWORD *)lpMem;
    *(_DWORD *)(*(_DWORD *)lpMem + 4) = *((_DWORD *)lpMem + 1);
    --*(_DWORD *)(v5 + 8);
    sub_1000F409(lpMem);
    result = a2;
    *(_DWORD *)a2 = v10;
    *(_BYTE *)(a2 + 4) = 0;
  }
  return result;
}

//----- (10003050) --------------------------------------------------------
int __thiscall sub_10003050(int this, int a2, int a3, LPVOID lpMem)
{
  int v4; // ebx@1
  int v5; // esi@1
  unsigned int v6; // ecx@1
  int v7; // eax@1
  int v8; // edx@1
  int v9; // esi@2
  int v10; // eax@7
  int v11; // edx@8
  int v12; // ecx@9
  int result; // eax@11
  void *v14; // eax@14
  int v15; // [sp+0h] [bp-24h]@1
  int v16; // [sp+Ch] [bp-18h]@1
  LPVOID v17; // [sp+10h] [bp-14h]@7
  int *v18; // [sp+14h] [bp-10h]@1
  int v19; // [sp+20h] [bp-4h]@1

  v19 = 0;
  v4 = this;
  v18 = &v15;
  v5 = *(_DWORD *)(this + 12);
  v16 = this;
  v6 = 16777619
     * (*(_BYTE *)(a3 + 3) ^ 16777619
                           * (*(_BYTE *)(a3 + 2) ^ 16777619
                                                 * (*(_BYTE *)(a3 + 1) ^ 16777619 * (*(_BYTE *)a3 ^ 0x811C9DC5)))) & *(_DWORD *)(this + 24);
  v7 = *(_DWORD *)(v5 + 8 * v6);
  v8 = 8 * v6;
  if ( v7 == *(_DWORD *)(v16 + 4) )
    v9 = *(_DWORD *)(v4 + 4);
  else
    v9 = **(_DWORD **)(v5 + v8 + 4);
  if ( v9 == v7 )
  {
LABEL_7:
    v17 = lpMem;
    v10 = *(_DWORD *)lpMem;
    if ( v9 != *(_DWORD *)lpMem )
    {
      **((_DWORD **)lpMem + 1) = v10;
      **(_DWORD **)(v10 + 4) = v9;
      **(_DWORD **)(v9 + 4) = lpMem;
      v11 = *(_DWORD *)(v9 + 4);
      *(_DWORD *)(v9 + 4) = *(_DWORD *)(v10 + 4);
      *(_DWORD *)(v10 + 4) = *((_DWORD *)lpMem + 1);
      *((_DWORD *)lpMem + 1) = v11;
      v8 = 8 * v6;
    }
    v12 = v8 + *(_DWORD *)(v4 + 12);
    if ( *(_DWORD *)v12 == *(_DWORD *)(v4 + 4) )
    {
      *(_DWORD *)v12 = lpMem;
      *(_DWORD *)(*(_DWORD *)(v4 + 12) + v8 + 4) = lpMem;
    }
    else if ( *(_DWORD *)v12 == v9 )
    {
      *(_DWORD *)v12 = lpMem;
    }
    else
    {
      v14 = (void *)**(_DWORD **)(v12 + 4);
      *(_DWORD *)(v12 + 4) = v14;
      if ( v14 != lpMem )
        *(_DWORD *)(*(_DWORD *)(v4 + 12) + v8 + 4) = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v4 + 12) + v8 + 4) + 4);
    }
    v19 = 2;
    sub_10003300(v4);
    result = a2;
    *(_DWORD *)a2 = lpMem;
    *(_BYTE *)(a2 + 4) = 1;
  }
  else
  {
    while ( 1 )
    {
      v9 = *(_DWORD *)(v9 + 4);
      if ( *(_DWORD *)a3 == *(_DWORD *)(v9 + 8) )
        break;
      if ( v9 == v7 )
        goto LABEL_7;
    }
    **((_DWORD **)lpMem + 1) = *(_DWORD *)lpMem;
    *(_DWORD *)(*(_DWORD *)lpMem + 4) = *((_DWORD *)lpMem + 1);
    --*(_DWORD *)(v4 + 8);
    sub_1000F409(lpMem);
    result = a2;
    *(_DWORD *)a2 = v9;
    *(_BYTE *)(a2 + 4) = 0;
  }
  return result;
}

//----- (100031E0) --------------------------------------------------------
int __fastcall sub_100031E0(int a1)
{
  int v1; // ebx@1
  unsigned int v2; // eax@1
  int v3; // ecx@1
  __m128d v4; // xmm0@1
  int result; // eax@1
  float v6; // xmm1_4@1
  __m128d v7; // xmm0@1
  int v8; // edi@6
  void *v9; // edi@7
  void *v10; // esi@8
  int v11; // [sp+4h] [bp-8h]@8

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 8);
  v3 = *(_DWORD *)(a1 + 28);
  v4 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v2);
  v4.m128d_f64[0] = v4.m128d_f64[0] + *(double *)&qword_1006EEC0[v2 >> 31];
  result = (unsigned int)v3 >> 31;
  LODWORD(v6) = (unsigned __int128)_mm_cvtpd_ps(v4);
  v7 = (__m128d)COERCE_UNSIGNED_INT64((double)v3);
  v7.m128d_f64[0] = v7.m128d_f64[0] + *(double *)&qword_1006EEC0[(unsigned int)v3 >> 31];
  if ( (float)(v6 / COERCE_FLOAT(_mm_cvtpd_ps(v7))) > *(float *)v1 )
  {
    if ( (unsigned int)v3 >= 0x200 )
    {
      if ( (unsigned int)v3 < 0x1FFFFFFF )
        v3 *= 2;
    }
    else
    {
      v3 *= 8;
    }
    result = sub_10003450(v1, v3);
    v8 = *(_DWORD *)(v1 + 4);
    if ( *(_DWORD *)v8 != v8 )
    {
      v9 = *(void **)(v8 + 4);
      do
      {
        v10 = (void *)**(_DWORD **)(v1 + 4);
        result = sub_10002EF0((void *)v1, (int)&v11, (int)((char *)v10 + 8), v10);
      }
      while ( v10 != v9 );
    }
  }
  return result;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];

//----- (10003280) --------------------------------------------------------
int __thiscall sub_10003280(int this, int a2, LPVOID lpMem)
{
  LPVOID v3; // edi@1
  int v4; // ebx@1
  unsigned int v5; // edx@1
  int v6; // ecx@1
  int v7; // esi@8
  int result; // eax@8

  v3 = lpMem;
  v4 = this;
  v5 = 8 * (*(_DWORD *)(this + 24) & sub_10002DC0((int)((char *)lpMem + 8)));
  v6 = v5 + *(_DWORD *)(v4 + 12);
  if ( *(LPVOID *)(v6 + 4) == lpMem )
  {
    if ( *(LPVOID *)v6 == lpMem )
    {
      *(_DWORD *)v6 = *(_DWORD *)(v4 + 4);
      *(_DWORD *)(*(_DWORD *)(v4 + 12) + v5 + 4) = *(_DWORD *)(v4 + 4);
    }
    else
    {
      *(_DWORD *)(v6 + 4) = *((_DWORD *)lpMem + 1);
    }
    goto LABEL_7;
  }
  if ( *(LPVOID *)v6 == lpMem )
  {
    *(_DWORD *)v6 = *(_DWORD *)lpMem;
LABEL_7:
    v3 = lpMem;
  }
  v7 = *(_DWORD *)v3;
  **((_DWORD **)v3 + 1) = *(_DWORD *)v3;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = *((_DWORD *)v3 + 1);
  --*(_DWORD *)(v4 + 8);
  sub_1000F409(v3);
  result = a2;
  *(_DWORD *)a2 = v7;
  return result;
}

//----- (10003300) --------------------------------------------------------
int __fastcall sub_10003300(int a1)
{
  int v1; // ebx@1
  unsigned int v2; // eax@1
  int v3; // ecx@1
  __m128d v4; // xmm0@1
  int result; // eax@1
  float v6; // xmm1_4@1
  __m128d v7; // xmm0@1
  int v8; // edi@6
  void *v9; // edi@7
  void *v10; // esi@8
  int v11; // [sp+4h] [bp-8h]@8

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 8);
  v3 = *(_DWORD *)(a1 + 28);
  v4 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v2);
  v4.m128d_f64[0] = v4.m128d_f64[0] + *(double *)&qword_1006EEC0[v2 >> 31];
  result = (unsigned int)v3 >> 31;
  LODWORD(v6) = (unsigned __int128)_mm_cvtpd_ps(v4);
  v7 = (__m128d)COERCE_UNSIGNED_INT64((double)v3);
  v7.m128d_f64[0] = v7.m128d_f64[0] + *(double *)&qword_1006EEC0[(unsigned int)v3 >> 31];
  if ( (float)(v6 / COERCE_FLOAT(_mm_cvtpd_ps(v7))) > *(float *)v1 )
  {
    if ( (unsigned int)v3 >= 0x200 )
    {
      if ( (unsigned int)v3 < 0x1FFFFFFF )
        v3 *= 2;
    }
    else
    {
      v3 *= 8;
    }
    result = sub_10003450(v1, v3);
    v8 = *(_DWORD *)(v1 + 4);
    if ( *(_DWORD *)v8 != v8 )
    {
      v9 = *(void **)(v8 + 4);
      do
      {
        v10 = (void *)**(_DWORD **)(v1 + 4);
        result = sub_10003050(v1, (int)&v11, (int)((char *)v10 + 8), v10);
      }
      while ( v10 != v9 );
    }
  }
  return result;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];

//----- (100033A0) --------------------------------------------------------
int __thiscall sub_100033A0(int this, int a2, LPVOID lpMem)
{
  LPVOID v3; // edi@1
  int v4; // ebx@1
  unsigned int v5; // edx@1
  int v6; // ecx@1
  int v7; // esi@8
  int result; // eax@8

  v3 = lpMem;
  v4 = this;
  v5 = 8
     * (16777619
      * (*((_BYTE *)lpMem + 11) ^ 16777619
                                * (*((_BYTE *)lpMem + 10) ^ 16777619
                                                          * (*((_BYTE *)lpMem + 9) ^ 16777619
                                                                                   * (*((_BYTE *)lpMem + 8) ^ 0x811C9DC5)))) & *(_DWORD *)(this + 24));
  v6 = v5 + *(_DWORD *)(this + 12);
  if ( *(LPVOID *)(v6 + 4) == lpMem )
  {
    if ( *(LPVOID *)v6 == lpMem )
    {
      *(_DWORD *)v6 = *(_DWORD *)(v4 + 4);
      *(_DWORD *)(v5 + *(_DWORD *)(v4 + 12) + 4) = *(_DWORD *)(v4 + 4);
    }
    else
    {
      *(_DWORD *)(v6 + 4) = *((_DWORD *)lpMem + 1);
    }
    goto LABEL_7;
  }
  if ( *(LPVOID *)v6 == lpMem )
  {
    *(_DWORD *)v6 = *(_DWORD *)lpMem;
LABEL_7:
    v3 = lpMem;
  }
  v7 = *(_DWORD *)v3;
  **((_DWORD **)v3 + 1) = *(_DWORD *)v3;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = *((_DWORD *)v3 + 1);
  --*(_DWORD *)(v4 + 8);
  sub_1000F409(v3);
  result = a2;
  *(_DWORD *)a2 = v7;
  return result;
}

//----- (10003450) --------------------------------------------------------
int __thiscall sub_10003450(int this, int a2)
{
  int v2; // ebx@1
  int v3; // ebp@1
  unsigned int v4; // edi@1
  int result; // eax@4
  char v6; // [sp+10h] [bp-4h]@4

  v2 = this;
  v3 = a2;
  v4 = 2 * a2;
  if ( (*(_DWORD *)(this + 20) - *(_DWORD *)(this + 12)) >> 2 < (unsigned int)(2 * a2) )
  {
    if ( v4 > 0x3FFFFFFF )
      sub_1000DA74((int)"vector<T> too long");
    sub_100034C0((void *)(this + 12), 2 * a2);
  }
  a2 = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v2 + 16) = *(_DWORD *)(v2 + 12);
  sub_100035C0(v2 + 12, (int)&v6, *(_DWORD *)(v2 + 12), v4, (int)&a2);
  result = v3 - 1;
  *(_DWORD *)(v2 + 28) = v3;
  *(_DWORD *)(v2 + 24) = v3 - 1;
  return result;
}

//----- (100034C0) --------------------------------------------------------
int __thiscall sub_100034C0(void *this, int a2)
{
  int v2; // edi@1
  LPVOID v3; // esi@2
  int v4; // eax@4
  LPVOID v5; // eax@6
  int v6; // ebp@8
  int result; // eax@10

  v2 = (int)this;
  if ( a2 )
  {
    if ( (unsigned int)a2 > 0x3FFFFFFF )
      sub_1000DA57();
    v4 = 4 * a2;
    if ( (unsigned int)(4 * a2) < 0x1000 )
    {
      v3 = sub_1000F0A6(4 * a2);
    }
    else
    {
      if ( v4 + 35 <= (unsigned int)v4 )
        sub_1000DA57();
      v5 = sub_1000F0A6(v4 + 35);
      v3 = (LPVOID)((unsigned int)((char *)v5 + 35) & 0xFFFFFFE0);
      *((_DWORD *)v3 - 1) = v5;
    }
  }
  else
  {
    v3 = 0;
  }
  sub_100038D0(*(_DWORD *)(v2 + 4), *(_DWORD *)v2, (int)v3);
  v6 = (*(_DWORD *)(v2 + 4) - *(_DWORD *)v2) >> 2;
  if ( *(_DWORD *)v2 )
    sub_10002AD0(a2, v2, *(LPVOID *)v2, (*(_DWORD *)(v2 + 8) - *(_DWORD *)v2) >> 2);
  *(_DWORD *)(v2 + 8) = (char *)v3 + 4 * a2;
  result = (int)((char *)v3 + 4 * v6);
  *(_DWORD *)(v2 + 4) = result;
  *(_DWORD *)v2 = v3;
  return result;
}

//----- (10003560) --------------------------------------------------------
LPVOID __stdcall sub_10003560(unsigned int a1)
{
  LPVOID result; // eax@2
  SIZE_T v2; // eax@4
  LPVOID v3; // eax@6

  if ( a1 )
  {
    if ( a1 > 0x3FFFFFFF )
      sub_1000DA57();
    v2 = 4 * a1;
    if ( 4 * a1 < 0x1000 )
    {
      result = sub_1000F0A6(v2);
    }
    else
    {
      if ( v2 + 35 <= v2 )
        sub_1000DA57();
      v3 = sub_1000F0A6(v2 + 35);
      *(_DWORD *)(((unsigned int)((char *)v3 + 35) & 0xFFFFFFE0) - 4) = v3;
      result = (LPVOID)((unsigned int)((char *)v3 + 35) & 0xFFFFFFE0);
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (100035C0) --------------------------------------------------------
int __thiscall sub_100035C0(int this, int a2, unsigned int a3, unsigned int a4, int a5)
{
  int v5; // ebx@1
  int v6; // esi@1
  int v7; // edi@1
  int v8; // ebp@1
  unsigned int v9; // edx@2
  int v10; // edx@3
  int v11; // edx@4
  int v12; // ecx@4
  unsigned int v13; // eax@6
  LPVOID v14; // eax@8
  int v15; // esi@8
  int v16; // edi@8
  int result; // eax@10
  int v18; // esi@13
  int v19; // edx@13
  int v20; // [sp+10h] [bp-4h]@8
  int v21; // [sp+20h] [bp+Ch]@4
  unsigned int v22; // [sp+20h] [bp+Ch]@8

  v5 = this;
  v6 = *(_DWORD *)this;
  v7 = a4;
  v8 = (signed int)(a3 - *(_DWORD *)this) >> 2;
  if ( !a4 )
  {
LABEL_14:
    result = a2;
    *(_DWORD *)a2 = *(_DWORD *)v5 + 4 * v8;
    return result;
  }
  v9 = *(_DWORD *)(this + 4);
  if ( (signed int)(*(_DWORD *)(this + 8) - v9) >> 2 >= a4 )
  {
    a5 = *(_DWORD *)a5;
    if ( (signed int)(v9 - a3) >> 2 < a4 )
    {
      sub_100038D0(v9, a3, 4 * a4 + a3);
      sub_10003840(a4 - ((signed int)(*(_DWORD *)(v5 + 4) - a3) >> 2), *(_DWORD *)(v5 + 4), (int)&a5);
      *(_DWORD *)(v5 + 4) += 4 * a4;
      sub_100037B0(*(_DWORD *)(v5 + 4) - 4 * a4, a3, (int)&a5);
      result = a2;
      *(_DWORD *)a2 = *(_DWORD *)v5 + 4 * v8;
      return result;
    }
    v18 = v9 - 4 * a4;
    *(_DWORD *)(this + 4) = sub_100038D0(v9, v9 - 4 * a4, v9);
    sub_100260E0((void *)(v19 - (v18 - a3)), (const void *)a3, v18 - a3);
    sub_100037B0(4 * a4 + a3, a3, (int)&a5);
    goto LABEL_14;
  }
  v10 = (signed int)(v9 - v6) >> 2;
  if ( 0x3FFFFFFF - v10 < a4 )
    sub_1000DA74((int)"vector<T> too long");
  v21 = v10 + a4;
  v11 = (*(_DWORD *)(this + 8) - v6) >> 2;
  v12 = 0;
  if ( 0x3FFFFFFF - ((unsigned int)v11 >> 1) >= v11 )
    v12 = v11 + ((unsigned int)v11 >> 1);
  v13 = v21;
  if ( v12 >= (unsigned int)v21 )
    v13 = v12;
  v22 = v13;
  v14 = sub_10003560(v13);
  v15 = (signed int)(a3 - *(_DWORD *)v5) >> 2;
  v20 = (int)v14;
  sub_10003840(v7, (int)((char *)v14 + 4 * v15), a5);
  sub_100038D0(a3, *(_DWORD *)v5, v20);
  sub_100038D0(*(_DWORD *)(v5 + 4), a3, v20 + 4 * (v15 + v7));
  v16 = ((*(_DWORD *)(v5 + 4) - *(_DWORD *)v5) >> 2) + v7;
  if ( *(_DWORD *)v5 )
    sub_10002AD0(v5, v16, *(LPVOID *)v5, (*(_DWORD *)(v5 + 8) - *(_DWORD *)v5) >> 2);
  *(_DWORD *)(v5 + 8) = v20 + 4 * v22;
  *(_DWORD *)(v5 + 4) = v20 + 4 * v16;
  *(_DWORD *)v5 = v20;
  result = a2;
  *(_DWORD *)a2 = v20 + 4 * v8;
  return result;
}

//----- (100037B0) --------------------------------------------------------
int __usercall sub_100037B0@<eax>(unsigned int a1@<edx>, unsigned int a2@<ecx>, int a3)
{
  int result; // eax@1
  int v4; // esi@1
  unsigned int v5; // edi@1

  result = 0;
  v4 = 0;
  v5 = (a1 - a2 + 3) >> 2;
  if ( a2 > a1 )
    v5 = 0;
  if ( v5 )
  {
    do
    {
      result = *(_DWORD *)a3;
      a2 += 4;
      ++v4;
      *(_DWORD *)(a2 - 4) = *(_DWORD *)a3;
    }
    while ( v4 != v5 );
  }
  return result;
}

//----- (100037E0) --------------------------------------------------------
LPVOID __stdcall sub_100037E0(void *a1, void *a2, int a3, int a4, int a5)
{
  LPVOID result; // eax@1
  int v6; // ecx@2

  result = sub_10003870(a1, a2);
  if ( result != (LPVOID)-8 )
  {
    v6 = *(_DWORD *)a4;
    *((_DWORD *)result + 2) = **(_DWORD **)a4;
    *((_DWORD *)result + 3) = *(_DWORD *)(v6 + 4);
    *((_DWORD *)result + 4) = 0;
  }
  return result;
}

//----- (10003810) --------------------------------------------------------
LPVOID __stdcall sub_10003810(void *a1, void *a2, int a3, int a4, int a5)
{
  LPVOID result; // eax@1

  result = sub_100038A0(a1, a2);
  if ( result != (LPVOID)-8 )
  {
    *((_DWORD *)result + 2) = **(_DWORD **)a4;
    _mm_storel_epi64((__m128i *)((char *)result + 12), 0i64);
  }
  return result;
}

//----- (10003840) --------------------------------------------------------
void __usercall sub_10003840(int a1@<edx>, int a2@<ecx>, int a3)
{
  for ( ; a1; --a1 )
  {
    if ( a2 )
      *(_DWORD *)a2 = *(_DWORD *)a3;
    a2 += 4;
  }
}

//----- (10003870) --------------------------------------------------------
LPVOID __stdcall sub_10003870(void *a1, void *a2)
{
  LPVOID result; // eax@1
  LPVOID v3; // ecx@1
  LPVOID v4; // edx@2

  result = sub_1000F0A6(0x18u);
  v3 = a1;
  if ( a1 )
  {
    v4 = a2;
  }
  else
  {
    v3 = result;
    v4 = result;
  }
  if ( result )
    *(_DWORD *)result = v3;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = v4;
  return result;
}

//----- (100038A0) --------------------------------------------------------
LPVOID __stdcall sub_100038A0(void *a1, void *a2)
{
  LPVOID result; // eax@1
  LPVOID v3; // ecx@1
  LPVOID v4; // edx@2

  result = sub_1000F0A6(0x14u);
  v3 = a1;
  if ( a1 )
  {
    v4 = a2;
  }
  else
  {
    v3 = result;
    v4 = result;
  }
  if ( result )
    *(_DWORD *)result = v3;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = v4;
  return result;
}

//----- (100038D0) --------------------------------------------------------
int __usercall sub_100038D0@<eax>(unsigned int a1@<edx>, unsigned int a2@<ecx>, int a3)
{
  int v3; // esi@1
  unsigned int v4; // edi@1
  int result; // eax@3

  v3 = 0;
  v4 = (a1 - a2 + 3) >> 2;
  if ( a2 > a1 )
    v4 = 0;
  result = a3;
  if ( v4 )
  {
    do
    {
      if ( result )
        *(_DWORD *)result = *(_DWORD *)(a2 - a3 + result);
      ++v3;
      result += 4;
    }
    while ( v3 != v4 );
  }
  return result;
}

//----- (10003920) --------------------------------------------------------
char __usercall sub_10003920@<al>(int a1@<ecx>, __m64 a2@<mm3>, __m64 a3@<mm4>, __m64 a4@<mm6>, __m64 a5@<mm7>)
{
  int v5; // edx@1
  int v6; // ebx@1
  int v7; // esi@1
  int v8; // edi@1
  signed int v9; // ebp@2
  unsigned __int32 v10; // eax@3
  unsigned __int32 v11; // ecx@3
  unsigned __int32 v12; // ecx@6
  unsigned __int16 v13; // bp@6
  int v14; // eax@6
  __m64 v15; // mm5@6
  unsigned __int32 v16; // ecx@6
  int v17; // edx@6
  int v18; // edi@7
  unsigned int v19; // eax@7
  int v20; // ecx@7
  int v21; // ebp@7
  unsigned int v22; // ecx@9
  __m64 v23; // mm0@10
  __m64 v24; // mm0@10
  __m64 v25; // mm1@10
  __m64 v26; // mm2@10
  int v27; // ecx@13
  __int16 v28; // ax@14
  int v29; // ecx@18
  unsigned int v30; // ecx@18
  unsigned __int32 v31; // edx@20
  unsigned __int16 v32; // si@20
  unsigned __int16 v33; // cx@20
  unsigned int v34; // edx@20
  unsigned int v35; // ebx@20
  __int16 v36; // bp@20
  unsigned int v37; // ebx@20
  __m64 v38; // mm5@20
  __m64 v39; // mm3@22
  __m64 v40; // mm2@22
  __m64 v41; // mm4@25
  __m64 v42; // mm2@25
  int v43; // edi@27
  int v44; // edx@28
  int v45; // edx@32
  int v46; // edx@34
  int v47; // ebp@36
  int v48; // ebp@38
  int v49; // ebx@38
  int v50; // ebp@39
  int v51; // edx@45
  int v52; // edi@53
  int v53; // ebp@54
  int v54; // edx@56
  signed int v55; // ebx@57
  int v56; // ebp@57
  int v57; // ecx@61
  int v58; // esi@61
  int v59; // ebx@63
  int v60; // edi@63
  int v61; // eax@63
  int v62; // ecx@64
  int v63; // esi@65
  int v64; // edx@65
  int v65; // ecx@71
  int v66; // esi@71
  int v67; // edi@71
  int v68; // eax@72
  int v69; // esi@73
  int v70; // edx@73
  int v71; // ecx@74
  int v72; // eax@81
  int v73; // esi@82
  int v74; // ecx@82
  int v75; // edi@83
  int v76; // eax@83
  __m64 v77; // mm1@86
  __m64 v78; // mm1@87
  __m64 v79; // mm2@87
  __m64 v80; // mm0@94
  __m64 v81; // mm7@94
  __m64 v82; // mm0@101
  int v83; // ecx@108
  int v84; // eax@108
  int v85; // eax@108
  unsigned int v86; // eax@111
  __m128d v87; // xmm0@112
  int v88; // ecx@112
  int v89; // eax@112
  signed int v90; // ebp@115
  int v91; // edi@115
  int v92; // ebx@115
  int v93; // ecx@116
  int v94; // edx@116
  signed int v95; // esi@116
  int v96; // eax@117
  int v98; // [sp+10h] [bp-84h]@27
  signed int v99; // [sp+10h] [bp-84h]@59
  int v100; // [sp+10h] [bp-84h]@82
  int v101; // [sp+14h] [bp-80h]@34
  unsigned __int16 v102; // [sp+18h] [bp-7Ch]@6
  int v103; // [sp+18h] [bp-7Ch]@59
  int v104; // [sp+18h] [bp-7Ch]@63
  int v105; // [sp+18h] [bp-7Ch]@71
  int v106; // [sp+1Ch] [bp-78h]@36
  signed int v107; // [sp+20h] [bp-74h]@54
  int v108; // [sp+24h] [bp-70h]@0
  int v109; // [sp+28h] [bp-6Ch]@0
  int v110; // [sp+2Ch] [bp-68h]@20
  int v111; // [sp+2Ch] [bp-68h]@63
  int v112; // [sp+2Ch] [bp-68h]@71
  signed int v113; // [sp+30h] [bp-64h]@2
  int v114; // [sp+30h] [bp-64h]@81
  int v115; // [sp+34h] [bp-60h]@1
  int v116; // [sp+38h] [bp-5Ch]@7
  int v117; // [sp+38h] [bp-5Ch]@20
  unsigned int v118; // [sp+3Ch] [bp-58h]@7
  int v119; // [sp+3Ch] [bp-58h]@53
  int v120; // [sp+40h] [bp-54h]@6
  int v121; // [sp+40h] [bp-54h]@82
  int v122; // [sp+44h] [bp-50h]@1
  int v123; // [sp+48h] [bp-4Ch]@1
  int v124; // [sp+4Ch] [bp-48h]@6
  int v125; // [sp+50h] [bp-44h]@8
  int v126; // [sp+54h] [bp-40h]@1
  int v127; // [sp+58h] [bp-3Ch]@1
  unsigned __int16 v128; // [sp+5Ch] [bp-38h]@1
  int v129; // [sp+60h] [bp-34h]@1
  int v130; // [sp+64h] [bp-30h]@1
  int v131; // [sp+68h] [bp-2Ch]@0
  unsigned int v132; // [sp+68h] [bp-2Ch]@115
  unsigned __int16 v133; // [sp+6Ch] [bp-28h]@1
  int v134; // [sp+70h] [bp-24h]@0
  unsigned __int16 v135; // [sp+74h] [bp-20h]@20
  int v136; // [sp+78h] [bp-1Ch]@20
  __int16 v137; // [sp+7Ch] [bp-18h]@20
  int v138; // [sp+80h] [bp-14h]@20
  unsigned __int32 v139; // [sp+84h] [bp-10h]@20
  int v140; // [sp+88h] [bp-Ch]@115
  unsigned int v141; // [sp+8Ch] [bp-8h]@115

  v5 = 0;
  v6 = *(_DWORD *)(dword_1007CD9C + 320);
  v7 = a1;
  v123 = a1;
  v8 = *(_DWORD *)(dword_1007CD9C + 296) + (*(_DWORD *)(a1 + 520) & (*(_DWORD *)(dword_1007CD9C + 300) - 1));
  v128 = *(_WORD *)(a1 + 576);
  v133 = *(_WORD *)(a1 + 580);
  v115 = *(_DWORD *)(dword_1007CD9C + 320);
  v126 = *(_DWORD *)(dword_1007CD9C + 320);
  v122 = *(_DWORD *)(dword_1007CD9C + 296) + (*(_DWORD *)(a1 + 520) & (*(_DWORD *)(dword_1007CD9C + 300) - 1));
  v130 = 0;
  v127 = 0;
  v129 = 0;
  if ( *(_DWORD *)(a1 + 516) != 1 )
    return 0;
  v9 = 0;
  v113 = 0;
  while ( 1 )
  {
    while ( 1 )
    {
      while ( 1 )
      {
        v10 = _byteswap_ulong(*(_DWORD *)v8);
        v11 = v10 >> 28;
        if ( v10 >> 28 != 12 )
          break;
        v8 += 4;
        *(_DWORD *)(v7 + 768) = v10 & 1;
        v122 = v8;
      }
      if ( v11 != 2 )
        break;
      v124 = v8 + 16;
      v12 = _byteswap_ulong(*(_DWORD *)(v8 + 12));
      v13 = (HIWORD(v12) & 0x1FFF) + 1;
      v14 = (unsigned __int16)((v12 & 0xFFF) + 1);
      v102 = (HIWORD(v12) & 0x1FFF) + 1;
      a3 = (__m64)qword_1007A980;
      v15 = (__m64)qword_1007A998;
      a4 = (__m64)qword_1007A988;
      a5 = (__m64)qword_1007A990;
      v16 = ((_byteswap_ulong(*(_DWORD *)(v8 + 8)) & 0xFFF) << 13)
          + ((_byteswap_ulong(*(_DWORD *)(v8 + 8)) >> 16) & 0x1FFF);
      v17 = v14;
      v120 = v14;
      if ( v14 )
      {
        v18 = v6 + 4 * v16;
        v116 = v14;
        v19 = (unsigned int)v13 >> 2;
        v20 = v17;
        v118 = (unsigned int)v13 >> 2;
        v21 = v13 & 3;
        do
        {
          v125 = v18;
          if ( v19 )
          {
            v22 = v19;
            do
            {
              v23 = *(__m64 *)v124;
              v124 += 8;
              v24 = _m_paddw(_m_psrlw(v23, 8u), _m_psllw(v23, 8u));
              a2 = _m_psrlw(_m_psraw(_m_pand(a3, v24), 4u), 3u);
              v25 = _m_paddw(_m_psrlw(_m_pand(a4, v24), 5u), a2);
              v26 = _m_paddw(_m_pand(a5, v24), _m_psrlw(_m_pand(v24, v15), 2u));
              *(_QWORD *)v125 = _m_punpcklbw(v26, v25);
              *(_QWORD *)(v125 + 8) = _m_punpckhbw(v26, v25);
              v125 += 16;
              --v22;
            }
            while ( v22 );
            v20 = v116;
          }
          if ( v21 )
          {
            v27 = v21;
            do
            {
              LOBYTE(v28) = *(_WORD *)v124 >> 8;
              HIBYTE(v28) = *(_WORD *)v124;
              v124 += 2;
              *(_DWORD *)v125 = ((v28 & 0x1F | 8 * (v28 & 0x3E0) | ((unsigned __int16)(v28 & 0xFC00) << 6)) ^ 0xFF000000)
                              + 0x1000000;
              v125 += 4;
              --v27;
            }
            while ( v27 );
            v20 = v116;
          }
          v19 = v118;
          v18 += 0x8000;
          --v20;
          v116 = v20;
        }
        while ( v20 );
        v17 = v120;
        v6 = v115;
        v13 = v102;
        v8 = v122;
        v7 = v123;
      }
      _m_femms();
      v29 = v13;
      v9 = v113;
      v30 = v17 * v29;
      v5 = v127;
      v8 += 4 * (v30 >> 1) + 16;
      v129 += v30;
      v122 = v8;
    }
    if ( v11 != 1 )
      break;
    v110 = (v10 >> 24) & 1;
    v117 = (v10 >> 25) & 1;
    v31 = _byteswap_ulong(*(_DWORD *)(v8 + 12));
    v139 = _byteswap_ulong(*(_DWORD *)(v8 + 16)) | 0x80000000;
    v32 = (v31 & 0xFFF) + 1;
    v33 = (HIWORD(v31) & 0x1FFF) + 1;
    v34 = _byteswap_ulong(*(_DWORD *)(v8 + 4));
    v35 = _byteswap_ulong(*(_DWORD *)(v8 + 8));
    v36 = v35;
    v137 = v34 & 0xFFF;
    v37 = v35 >> 16;
    v135 = v34 & 0xFFF;
    v136 = (v34 >> 16) & 0x1FFF;
    v138 = (v34 >> 16) & 0x1FFF;
    v38 = _m_punpcklbw(_mm_cvtsi32_si64(v139), 0i64);
    a4 = _m_psrlw(_m_pcmpeqw(a4, a4), 8u);
    if ( v117 )
    {
      v134 = (v10 >> 20) & 7;
      v131 = (v10 >> 16) & 7;
      if ( !((v10 >> 20) & 3) )
      {
        v39 = _mm_cvtsi32_si64(BYTE1(v10));
        v40 = _m_por(_m_pslld(v39, 8u), v39);
        a2 = _m_punpcklbw(_m_por(_m_pslld(v40, 0x10u), v40), 0i64);
        if ( v134 == 4 )
          a2 = _m_pxor(a2, a4);
      }
      if ( !((v10 >> 16) & 3) )
      {
        v41 = _mm_cvtsi32_si64((unsigned __int8)v10);
        v42 = _m_por(_m_pslld(v41, 8u), v41);
        a3 = _m_punpcklbw(_m_por(_m_pslld(v42, 0x10u), v42), 0i64);
        if ( ((v10 >> 16) & 7) == 4 )
          a3 = _m_pxor(a3, a4);
      }
    }
    v43 = v36;
    v98 = (signed __int16)v37;
    if ( *(_DWORD *)(v123 + 768) )
    {
      v44 = (signed __int16)v37;
      if ( v36 + v32 <= v133
        || v36 >= v133 + 240
        || (v44 = (signed __int16)v37, (signed __int16)v37 + v33 <= v128)
        || (signed __int16)v37 >= v128 + 320 )
      {
        v49 = 0;
        v106 = 0;
        v101 = 0;
        goto LABEL_53;
      }
      v45 = 0;
      if ( v36 < (signed int)v133 )
        v45 = v133 - v36;
      v101 = v45;
      v46 = v32;
      if ( v36 + v32 > v133 + 240 )
        v46 = v133 + 240 - v36;
      v47 = 0;
      v106 = v46;
      v44 = (signed __int16)v37;
      if ( (signed __int16)v37 < (signed int)v128 )
        v47 = v128 - (signed __int16)v37;
      v108 = v47;
      v48 = v128 + 320;
      v49 = v101;
      if ( v98 + v33 <= v48 )
      {
        v109 = v33;
        goto LABEL_53;
      }
      v50 = v48 - v98;
    }
    else
    {
      if ( v36 >= 0 )
        v101 = 0;
      else
        v101 = -v36;
      v51 = v32;
      if ( v36 + v32 > 4096 )
        v51 = 4096 - v36;
      v106 = v51;
      v44 = (signed __int16)v37;
      if ( (v37 & 0x8000u) == 0 )
        v108 = 0;
      else
        v108 = -(signed __int16)v37;
      v50 = v33;
      v49 = v101;
      if ( v98 + v33 > 0x2000 )
        v50 = 0x2000 - v98;
    }
    v109 = v50;
LABEL_53:
    v52 = v44 + v108 + ((v49 + v43) << 13);
    v119 = v52;
    if ( v10 & 0x4000000 )
    {
      v107 = -8192;
      v53 = ((v32 + v135 - v49) << 13) + (unsigned __int16)v136 - 0x2000;
    }
    else
    {
      v53 = (signed __int16)v138 + ((v49 + v137) << 13);
      v107 = 0x2000;
    }
    v54 = v108;
    if ( v10 & 0x8000000 )
    {
      v55 = -1;
      v56 = v33 - v108 - 1 + v53;
    }
    else
    {
      v55 = 1;
      v56 = v108 + v53;
    }
    v103 = v56;
    v99 = v55;
    if ( v117 || v139 != -2139062144 )
    {
      v57 = v106;
      v58 = v101;
      if ( v101 < v106 )
      {
        v72 = v106 - v101;
        v114 = v106 - v101;
        do
        {
          v73 = v52;
          v74 = v56 & 0x1FFFFFF;
          v100 = v52;
          v121 = v56 & 0x1FFFFFF;
          if ( v54 < v109 )
          {
            v75 = v109 - v54;
            v76 = v110;
            do
            {
              if ( !v76 || *(_DWORD *)(v115 + 4 * v74) )
              {
                v77 = _m_packuswb(
                        _m_psrlw(
                          _m_pmullw(
                            _m_psllw(_m_punpcklbw(_mm_cvtsi32_si64(*(_DWORD *)(v126 + 4 * v121)), 0i64), 3u),
                            v38),
                          7u),
                        0i64);
                if ( v117 )
                {
                  v78 = _m_punpcklbw(v77, 0i64);
                  v79 = _m_psllw(_m_punpcklbw(_mm_cvtsi32_si64(*(_DWORD *)(v126 + 4 * v100)), 0i64), 3u);
                  switch ( v134 )
                  {
                    case 1:
                      a5 = v78;
                      break;
                    case 2:
                      a5 = v79;
                      break;
                    case 0:
                    case 4:
                      a5 = a2;
                      break;
                    case 5:
                      a5 = _m_pxor(a4, v78);
                      break;
                    case 6:
                      a5 = _m_pxor(a4, v79);
                      break;
                    case 3:
                    case 7:
                      a5 = a4;
                      break;
                    default:
                      break;
                  }
                  v80 = _m_psrlw(a5, 7u);
                  v81 = _m_pmullw(_m_paddw(a5, v80), v78);
                  switch ( v131 )
                  {
                    case 1:
                      v80 = v78;
                      break;
                    case 2:
                      v80 = v79;
                      break;
                    case 0:
                    case 4:
                      v80 = a3;
                      break;
                    case 5:
                      v80 = _m_pxor(a4, v78);
                      break;
                    case 6:
                      v80 = _m_pxor(a4, v79);
                      break;
                    case 3:
                    case 7:
                      v80 = a4;
                      break;
                    default:
                      break;
                  }
                  v82 = _m_pmullw(_m_paddw(v80, _m_psrlw(v80, 7u)), v79);
                  a5 = _m_packuswb(_m_psrlw(_m_paddusw(v81, v82), 0xBu), v82);
                  *(_DWORD *)(v126 + 4 * v100) = _mm_cvtsi64_si32(a5);
                }
                else
                {
                  *(_DWORD *)(v126 + 4 * v100) = _mm_cvtsi64_si32(_m_packuswb(_m_psrlw(_m_punpcklbw(v77, 0i64), 3u), 0i64));
                }
                v76 = v110;
              }
              ++v73;
              v74 = (v55 + v74) & 0x1FFFFFF;
              v100 = v73;
              v121 = v74;
              --v75;
            }
            while ( v75 );
            v56 = v103;
            v52 = v119;
            v72 = v114;
            v54 = v108;
          }
          v56 += v107;
          v52 += 0x2000;
          --v72;
          v119 = v52;
          v103 = v56;
          v114 = v72;
        }
        while ( v72 );
        goto LABEL_107;
      }
    }
    else
    {
      v57 = v106;
      v58 = v101;
      if ( v110 )
      {
        if ( v101 < v106 )
        {
          v65 = v106 - v101;
          v66 = v109;
          v112 = v106 - v101;
          v67 = v115 + 4 * v52;
          v105 = v67;
          do
          {
            v68 = v56 & 0x1FFFFFF;
            if ( v54 < v66 )
            {
              v69 = v66 - v108;
              v70 = v67;
              do
              {
                v71 = *(_DWORD *)(v115 + 4 * v68);
                if ( v71 )
                  *(_DWORD *)v70 = v71;
                v70 += 4;
                v68 = (v55 + v68) & 0x1FFFFFF;
                --v69;
              }
              while ( v69 );
              v67 = v105;
              v65 = v112;
              v54 = v108;
              v66 = v109;
            }
            v56 += v107;
            v67 += 0x8000;
            --v65;
            v105 = v67;
            v112 = v65;
          }
          while ( v65 );
          goto LABEL_107;
        }
      }
      else if ( v101 < v106 )
      {
        v59 = v106 - v101;
        v111 = v106 - v101;
        v60 = v115 + 4 * v52;
        v61 = v109;
        v104 = v60;
        do
        {
          v62 = v56 & 0x1FFFFFF;
          if ( v54 < v61 )
          {
            v63 = v61 - v108;
            v64 = v60;
            do
            {
              v64 += 4;
              *(_DWORD *)(v64 - 4) = *(_DWORD *)(v115 + 4 * v62);
              v62 = (v99 + v62) & 0x1FFFFFF;
              --v63;
            }
            while ( v63 );
            v60 = v104;
            v59 = v111;
            v54 = v108;
            v61 = v109;
          }
          v56 += v107;
          v60 += 0x8000;
          --v59;
          v104 = v60;
          v111 = v59;
        }
        while ( v59 );
LABEL_107:
        v57 = v106;
        v58 = v101;
        goto LABEL_108;
      }
    }
LABEL_108:
    _m_femms();
    v83 = v57 - v58;
    v84 = v109 - v54;
    v6 = v115;
    v8 = v122 + 20;
    v7 = v123;
    v9 = 1;
    v5 = v127;
    v85 = v83 * v84;
    v122 += 20;
    v113 = 1;
    if ( v117 )
    {
      v130 += v85;
    }
    else
    {
      v5 = v85 + v127;
      v127 += v85;
    }
  }
  v86 = v130 + v5 + v129;
  *(_DWORD *)(v7 + 820) = v86;
  if ( byte_102394C0 )
  {
    v87 = (__m128d)(unsigned __int64)qword_1006EDF0;
    v87.m128d_f64[0] = 102400000.0
                     / (double)(signed int)uValue
                     * ((double)(signed int)v86 + *(double *)&qword_1006EEC0[v86 >> 31]);
    sub_10061691(v87);
    v88 = dword_1007CD9C;
    *(_DWORD *)(dword_1007CD9C + 500) = v89;
  }
  else
  {
    v88 = dword_1007CD9C;
    *(_DWORD *)(dword_1007CD9C + 500) = 0;
  }
  *(_BYTE *)(v88 + 496) = 1;
  if ( !v9 )
    return 0;
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, int *))(**(_DWORD **)(v7 + 8) + 56))(
    *(_DWORD *)(v7 + 8),
    *(_DWORD *)(v7 + 784),
    0,
    4,
    0,
    &v140);
  v90 = 240;
  v91 = v140 + 8;
  v132 = 4 * (v141 >> 2);
  v92 = v6 + 4 * (*(_WORD *)(v7 + 532) + (*(_WORD *)(v7 + 536) << 13)) + 8;
  do
  {
    v93 = v92;
    v94 = v91;
    v95 = 80;
    do
    {
      v96 = *(_DWORD *)(v93 - 8);
      v93 += 16;
      v94 += 16;
      *(_DWORD *)(v94 - 24) = 8 * v96;
      *(_DWORD *)(v94 - 20) = 8 * *(_DWORD *)(v93 - 20);
      *(_DWORD *)(v94 - 16) = 8 * *(_DWORD *)(v93 - 16);
      *(_DWORD *)(v94 - 12) = 8 * *(_DWORD *)(v93 - 12);
      --v95;
    }
    while ( v95 );
    v91 += v132;
    v92 += 0x8000;
    --v90;
  }
  while ( v90 );
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v123 + 8) + 60))(
    *(_DWORD *)(v123 + 8),
    *(_DWORD *)(v123 + 784),
    0);
  return 1;
}
// 1006EDF0: using guessed type __int64 qword_1006EDF0;
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];
// 1007A980: using guessed type __int64 qword_1007A980;
// 1007A988: using guessed type __int64 qword_1007A988;
// 1007A990: using guessed type __int64 qword_1007A990;
// 1007A998: using guessed type __int64 qword_1007A998;
// 1007CD9C: using guessed type int dword_1007CD9C;
// 102394C0: using guessed type char byte_102394C0;

//----- (10004350) --------------------------------------------------------
signed int __usercall sub_10004350@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, int a5, int a6, int a7)
{
  _UNKNOWN *v7; // eax@1
  signed int result; // eax@1

  v7 = sub_100011C0();
  result = sub_1002B599(a1, a2, *(_DWORD *)v7, *((_DWORD *)v7 + 1), a3, a4, a5, a6, a7);
  if ( result < 0 )
    result = -1;
  return result;
}

//----- (10004390) --------------------------------------------------------
signed int __usercall sub_10004390@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, int a5, char a6)
{
  return sub_10004350(a1, a2, a3, a4, a5, 0, (int)&a6);
}

//----- (100043B0) --------------------------------------------------------
signed int __usercall sub_100043B0@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, int a5, int a6, int a7)
{
  _UNKNOWN *v7; // eax@1
  signed int result; // eax@1

  v7 = sub_100011C0();
  result = sub_1002B575(a1, a2, *(_DWORD *)v7, *((_DWORD *)v7 + 1), a3, a4, a5, a6, a7);
  if ( result < 0 )
    result = -1;
  return result;
}

//----- (100043F0) --------------------------------------------------------
int __usercall sub_100043F0@<eax>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // edi@1
  unsigned int v3; // eax@1
  LPVOID v4; // esi@1
  bool v5; // cf@3
  unsigned int v6; // eax@5
  int result; // eax@8

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 108);
  v4 = (LPVOID)(a1 + 88);
  if ( v3 >= 8 )
    sub_10001E40(a2, a1, *(LPVOID *)v4, v3 + 1);
  *((_DWORD *)v4 + 5) = 7;
  v5 = *((_DWORD *)v4 + 5) < 8u;
  *((_DWORD *)v4 + 4) = 0;
  if ( !v5 )
    v4 = *(LPVOID *)v4;
  *(_WORD *)v4 = 0;
  v6 = *(_DWORD *)(v2 + 84);
  if ( v6 >= 8 )
    sub_10001E40(a2, v2, *(LPVOID *)(v2 + 64), v6 + 1);
  *(_DWORD *)(v2 + 84) = 7;
  v5 = *(_DWORD *)(v2 + 84) < 8u;
  *(_DWORD *)(v2 + 80) = 0;
  if ( v5 )
  {
    result = 0;
    *(_WORD *)(v2 + 64) = 0;
  }
  else
  {
    result = *(_DWORD *)(v2 + 64);
    *(_WORD *)result = 0;
  }
  return result;
}

//----- (10004470) --------------------------------------------------------
void *__thiscall sub_10004470(void *this, int a2)
{
  void *v2; // esi@1
  int v3; // ecx@1

  v2 = this;
  v3 = (int)((char *)this + 64);
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *((_DWORD *)v2 + 1) = *(_DWORD *)(a2 + 4);
  *((_DWORD *)v2 + 2) = *(_DWORD *)(a2 + 8);
  *((_DWORD *)v2 + 3) = *(_DWORD *)(a2 + 12);
  *((_DWORD *)v2 + 4) = *(_DWORD *)(a2 + 16);
  *((_DWORD *)v2 + 5) = *(_DWORD *)(a2 + 20);
  *((_DWORD *)v2 + 6) = *(_DWORD *)(a2 + 24);
  *((_DWORD *)v2 + 7) = *(_DWORD *)(a2 + 28);
  *((_DWORD *)v2 + 8) = *(_DWORD *)(a2 + 32);
  *((_DWORD *)v2 + 9) = *(_DWORD *)(a2 + 36);
  *((_DWORD *)v2 + 10) = *(_DWORD *)(a2 + 40);
  *((_DWORD *)v2 + 11) = *(_DWORD *)(a2 + 44);
  *((_DWORD *)v2 + 12) = *(_DWORD *)(a2 + 48);
  *((_DWORD *)v2 + 13) = *(_DWORD *)(a2 + 52);
  *((_DWORD *)v2 + 14) = *(_DWORD *)(a2 + 56);
  *((_DWORD *)v2 + 15) = *(_DWORD *)(a2 + 60);
  if ( v3 != a2 + 64 )
    sub_10001560(v3, a2 + 64, 0, 0xFFFFFFFF);
  if ( (char *)v2 + 88 != (void *)(a2 + 88) )
    sub_10001560((int)((char *)v2 + 88), a2 + 88, 0, 0xFFFFFFFF);
  *((_BYTE *)v2 + 112) = *(_BYTE *)(a2 + 112);
  *((_DWORD *)v2 + 29) = *(_DWORD *)(a2 + 116);
  *((_BYTE *)v2 + 120) = *(_BYTE *)(a2 + 120);
  *((_BYTE *)v2 + 121) = *(_BYTE *)(a2 + 121);
  *((_BYTE *)v2 + 122) = *(_BYTE *)(a2 + 122);
  *((_BYTE *)v2 + 123) = *(_BYTE *)(a2 + 123);
  return v2;
}

//----- (10004570) --------------------------------------------------------
int __userpurge sub_10004570@<eax>(int a1@<ecx>, int a2@<ebx>, int a3)
{
  int v3; // ebp@0
  int v4; // edi@1
  int v5; // esi@1
  int v6; // esi@1
  int v7; // esi@1
  LPVOID v8; // eax@2
  int v9; // ebx@4
  unsigned int v10; // eax@5
  bool v11; // cf@7
  LPVOID v12; // eax@8
  int v13; // ebx@11
  LPVOID v14; // esi@14
  signed int v15; // esi@16
  int v17; // [sp-4h] [bp-3Ch]@4
  LPVOID lpMem; // [sp+8h] [bp-30h]@4
  unsigned int v19; // [sp+1Ch] [bp-1Ch]@11
  int v20; // [sp+20h] [bp-18h]@1
  int v21; // [sp+24h] [bp-14h]@1
  int v22; // [sp+28h] [bp-10h]@15
  int v23; // [sp+34h] [bp-4h]@1

  v4 = a1;
  v21 = a1;
  v5 = a1 + 12;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)v5 = 0;
  *(_DWORD *)(v5 + 4) = 0;
  *(_DWORD *)v5 = sub_10005770();
  v6 = v4 + 20;
  v20 = v6;
  *(_DWORD *)v6 = 0;
  *(_DWORD *)(v6 + 4) = 0;
  *(_DWORD *)v6 = sub_100038A0(0, 0);
  *(_DWORD *)(v4 + 28) = 16777217;
  *(_DWORD *)(v4 + 32) = 0;
  v7 = v4 + 36;
  v23 = 1;
  *(_DWORD *)(v7 + 20) = 7;
  *(_DWORD *)(v7 + 16) = 0;
  if ( *(_DWORD *)(v4 + 56) < 8u )
    v8 = (LPVOID)(v4 + 36);
  else
    v8 = *(LPVOID *)v7;
  v17 = a2;
  *(_WORD *)v8 = 0;
  LOBYTE(v23) = 2;
  v9 = sub_10061300(v4 + 36, (int)&lpMem, a2, v3);
  if ( v7 != v9 )
  {
    v10 = *(_DWORD *)(v4 + 56);
    if ( v10 >= 8 )
      sub_10001E40(v9, v4, *(LPVOID *)v7, v10 + 1);
    *(_DWORD *)(v4 + 56) = 7;
    v11 = *(_DWORD *)(v4 + 56) < 8u;
    *(_DWORD *)(v4 + 52) = 0;
    if ( v11 )
      v12 = (LPVOID)(v4 + 36);
    else
      v12 = *(LPVOID *)v7;
    *(_WORD *)v12 = 0;
    sub_100018C0((void *)(v4 + 36), v9);
  }
  LOBYTE(v23) = 2;
  v13 = v17;
  if ( v19 >= 8 )
    sub_10001E40(v17, v4, lpMem, v19 + 1);
  sub_10001680(v4 + 36, L"gpuDX11", 7u);
  sub_10001680(v4 + 36, L".ini", 4u);
  if ( *(_DWORD *)(v4 + 56) >= 8u )
    v14 = *(LPVOID *)v7;
  v22 = 0;
  sub_10028FF8(v13, v4, (int)&v22);
  if ( v22 )
  {
    v15 = sub_10005880(v4, v4, v22);
    sub_100290B5(v13, v3, v4);
  }
  else
  {
    v15 = -3;
  }
  *(_BYTE *)(v4 + 60) = v15 == 0;
  return v4;
}
// 10004570: could not find valid save-restore pair for ebx
// 1006D988: using guessed type wchar_t a_ini[5];

//----- (10004700) --------------------------------------------------------
int __thiscall sub_10004700(int this)
{
  int v1; // edi@1
  void **v2; // edx@1
  void *v3; // eax@1
  void *v4; // esi@2
  int v6; // [sp+0h] [bp-4h]@1

  v6 = this;
  v1 = this;
  sub_10005800(this);
  v2 = *(void ***)(v1 + 20);
  v3 = *v2;
  *v2 = v2;
  *(_DWORD *)(*(_DWORD *)(v1 + 20) + 4) = *(_DWORD *)(v1 + 20);
  *(_DWORD *)(v1 + 24) = 0;
  if ( v3 != *(void **)(v1 + 20) )
  {
    do
    {
      v4 = *(void **)v3;
      sub_1000F409(v3);
      v3 = v4;
    }
    while ( v4 != *(void **)(v1 + 20) );
  }
  sub_1000F409(*(LPVOID *)(v1 + 20));
  sub_10004F30((void *)(v1 + 12), (int)&v6, **(LPVOID **)(v1 + 12), *(_DWORD *)(v1 + 12));
  return sub_1000F409(*(LPVOID *)(v1 + 12));
}

//----- (10004770) --------------------------------------------------------
int __thiscall sub_10004770(int this, int a2, int a3, int a4, int a5)
{
  int v5; // ebx@2
  int v6; // edi@3
  int v7; // esi@3
  int result; // eax@5
  int v9; // [sp+4h] [bp-Ch]@3
  int v10; // [sp+8h] [bp-8h]@3
  int v11; // [sp+Ch] [bp-4h]@3

  if ( a2 && (v5 = a3) != 0 )
  {
    v9 = a2;
    v6 = this + 12;
    v10 = 0;
    v11 = 0;
    sub_10004DB0((void *)(this + 12), (int)&a2, (int)&v9);
    v7 = a2;
    if ( a2 != *(_DWORD *)v6
      && (v9 = v5, v10 = 0, v11 = 0, sub_10004DB0((void *)(a2 + 28), (int)&a2, (int)&v9), a2 != *(_DWORD *)(v7 + 28)) )
      result = *(_DWORD *)(a2 + 28);
    else
      result = a4;
  }
  else
  {
    result = a4;
  }
  return result;
}

//----- (10004810) --------------------------------------------------------
signed int __userpurge sub_10004810@<eax>(int a1@<ecx>, char a2@<bl>, int a3, int a4, signed int a5, int a6)
{
  int v6; // edi@1
  int v7; // eax@1
  const WCHAR *v8; // esi@1
  UINT v9; // eax@3
  int v10; // ecx@5
  signed int v11; // eax@10
  signed int v12; // ecx@12
  CHAR MultiByteStr[4]; // [sp+8h] [bp-40h]@3

  v6 = a1;
  v7 = sub_10004770(a1, a3, a4, 0, a1);
  v8 = (const WCHAR *)v7;
  if ( !v7 || !*(_WORD *)v7 )
    return a5;
  sub_10028330(MultiByteStr, 0, 0x40u);
  v9 = 0;
  if ( *(_BYTE *)(v6 + 28) )
    v9 = 65001;
  if ( WideCharToMultiByte(v9, 0, v8, -1, MultiByteStr, 64, 0, 0) <= 0 )
    return a5;
  a4 = (int)MultiByteStr;
  if ( MultiByteStr[0] != 48 || MultiByteStr[1] != 120 && MultiByteStr[1] != 88 )
  {
    v11 = sub_1002D2AE(v10, a2, v6, (int)MultiByteStr, (int)&a4, 10);
    goto LABEL_12;
  }
  if ( !MultiByteStr[2] )
    return a5;
  v11 = sub_1002D2AE(v10, a2, v6, (int)&MultiByteStr[2], (int)&a4, 16);
LABEL_12:
  v12 = v11;
  if ( *(_BYTE *)a4 )
    v12 = a5;
  return v12;
}

//----- (100048E0) --------------------------------------------------------
char __thiscall sub_100048E0(int this, int a2, int a3, char a4, int a5)
{
  int v5; // eax@1
  int v6; // edx@1
  int v7; // eax@2
  char result; // al@4
  int v9; // eax@6

  v5 = sub_10004770(this, (int)L"main", a3, 0, this);
  v6 = v5;
  if ( v5 && (v7 = *(_WORD *)v5, (_WORD)v7) )
  {
    switch ( v7 )
    {
      case 49:
      case 84:
      case 89:
      case 116:
      case 121:
        return 1;
      case 48:
      case 70:
      case 78:
      case 102:
      case 110:
        goto LABEL_5;
      case 79:
      case 111:
        v9 = *(_WORD *)(v6 + 2);
        if ( v9 == 110 || v9 == 78 )
          return 1;
        if ( v9 != 102 && v9 != 70 )
          goto LABEL_10;
LABEL_5:
        result = 0;
        break;
      default:
        goto LABEL_10;
    }
  }
  else
  {
LABEL_10:
    result = a4;
  }
  return result;
}
// 1006D788: using guessed type wchar_t aMain[5];

//----- (100049A0) --------------------------------------------------------
signed int __userpurge sub_100049A0@<eax>(int a1@<ecx>, int a2@<edi>, int a3, int a4, char a5, int a6, int a7, int a8)
{
  int v8; // ebx@1
  unsigned int v9; // kr00_4@3
  UINT v10; // eax@3
  int v11; // ecx@5
  signed int result; // eax@5
  CHAR MultiByteStr; // [sp+4h] [bp-C0h]@3
  WCHAR WideCharStr; // [sp+44h] [bp-80h]@5

  v8 = a1;
  if ( a3 && a4 )
  {
    sub_100059F0(a1, a2, (int *)&MultiByteStr, (int)"%ld", a5);
    v9 = strlen(&MultiByteStr);
    v10 = 0;
    if ( *(_BYTE *)(v8 + 28) )
      v10 = 65001;
    MultiByteToWideChar(v10, 0, &MultiByteStr, v9 + 1, &WideCharStr, 64);
    result = sub_10004AE0((void *)v8, a3, a4, (int)&WideCharStr, 0, v11, 1);
  }
  else
  {
    result = -1;
  }
  return result;
}

//----- (10004A50) --------------------------------------------------------
signed int __thiscall sub_10004A50(void *this, int a2, int a3, char a4, int a5, int a6)
{
  void *v6; // edi@1
  const char *v7; // edx@2
  unsigned int v8; // kr00_4@4
  UINT v9; // eax@4
  int v10; // ecx@6
  signed int result; // eax@6
  WCHAR WideCharStr; // [sp+4h] [bp-80h]@6

  v6 = this;
  if ( a3 )
  {
    v7 = "true";
    if ( !a4 )
      v7 = "false";
    v8 = strlen(v7);
    v9 = 0;
    if ( *((_BYTE *)v6 + 28) )
      v9 = 65001;
    MultiByteToWideChar(v9, 0, v7, v8 + 1, &WideCharStr, 64);
    result = sub_10004AE0(v6, (int)L"main", a3, (int)&WideCharStr, 0, v10, 1);
  }
  else
  {
    result = -1;
  }
  return result;
}
// 1006D788: using guessed type wchar_t aMain[5];

//----- (10004AE0) --------------------------------------------------------
signed int __thiscall sub_10004AE0(void *this, int a2, int a3, int a4, int a5, int a6, char a7)
{
  void *v7; // edi@1
  int v8; // ebx@2
  signed int result; // eax@3
  int v10; // esi@5
  int v11; // esi@8
  LPVOID v12; // eax@12
  LPVOID v13; // eax@12
  int v14; // ecx@12
  void *v15; // edx@15
  LPVOID v16; // esi@15
  bool v17; // al@15
  int v18; // edi@21
  int v19; // eax@23
  LPVOID v20; // eax@25
  int v21; // ecx@25
  int v22; // [sp+Ch] [bp-3Ch]@12
  int v23; // [sp+10h] [bp-38h]@12
  int v24; // [sp+14h] [bp-34h]@12
  LPVOID v25; // [sp+18h] [bp-30h]@12
  void *v26; // [sp+1Ch] [bp-2Ch]@12
  int v27; // [sp+20h] [bp-28h]@23
  int v28; // [sp+24h] [bp-24h]@5
  LPVOID lpMem; // [sp+28h] [bp-20h]@5
  void *v30; // [sp+2Ch] [bp-1Ch]@5
  int v31; // [sp+30h] [bp-18h]@12
  void *v32; // [sp+34h] [bp-14h]@15
  char v33; // [sp+3Bh] [bp-Dh]@1
  int v34; // [sp+44h] [bp-4h]@12

  v7 = this;
  v33 = 0;
  if ( a7 )
  {
    v8 = a5;
    if ( !a5 )
      goto LABEL_5;
    result = sub_10005930(this, (const void **)&a5);
    if ( result < 0 )
      return result;
  }
  v8 = a5;
LABEL_5:
  v28 = a2;
  lpMem = 0;
  v30 = 0;
  sub_10004DB0((char *)v7 + 12, (int)&a5, (int)&v28);
  v10 = a5;
  if ( a5 == *((_DWORD *)v7 + 3) )
  {
    if ( a7 )
    {
      result = sub_10005930(v7, (const void **)&a2);
      if ( result < 0 )
        return result;
    }
    v11 = *((_DWORD *)v7 + 8) + 1;
    a5 = 0;
    *((_DWORD *)v7 + 8) = v11;
    if ( v8 && (!a3 || !a4) )
      a5 = v8;
    lpMem = 0;
    v30 = 0;
    lpMem = sub_10005650();
    v34 = 0;
    v22 = a2;
    v23 = a5;
    v24 = v11;
    v12 = sub_10005650();
    v25 = lpMem;
    lpMem = v12;
    v26 = v30;
    v30 = 0;
    LOBYTE(v34) = 2;
    sub_10004E80((int)&lpMem, (int)&a5, *(LPVOID *)v12, (int)v12);
    sub_1000F409(lpMem);
    v13 = sub_10006AE0((char *)v7 + 12, (int)&v22);
    sub_10006B80((int)((char *)v7 + 12), (int)&v31, v14, (int)((char *)v13 + 16), v13);
    v10 = v31;
    v34 = -1;
    v33 = 1;
    sub_10004E80((int)&v25, (int)&a5, *(LPVOID *)v25, (int)v25);
    sub_1000F409(v25);
  }
  if ( !a3 || !a4 )
    return (v33 != 0) + 1;
  v28 = a3;
  a2 = v10 + 28;
  lpMem = 0;
  v30 = 0;
  sub_10004DB0((void *)(v10 + 28), (int)&v32, (int)&v28);
  ++*((_DWORD *)v7 + 8);
  v15 = (void *)*((_DWORD *)v7 + 8);
  v16 = v32;
  v17 = *((_BYTE *)v7 + 29) != 0;
  v30 = (void *)*((_DWORD *)v7 + 8);
  BYTE3(a5) = v17;
  if ( !a7 )
  {
LABEL_21:
    v18 = a2;
    if ( v16 == *(LPVOID *)a2 || v17 )
    {
      v19 = 0;
      v27 = a3;
      lpMem = v15;
      if ( v8 )
        v19 = v8;
      v30 = 0;
      v28 = v19;
      v20 = sub_100072E0((void *)a2, (int)&v27);
      sub_10007320(v18, (int)&lpMem, v21, (int)((char *)v20 + 16), v20);
      v16 = lpMem;
      v33 = 1;
    }
    *((_DWORD *)v16 + 7) = a4;
    return (v33 != 0) + 1;
  }
  if ( !v17 && v32 != *(void **)a2 || (result = sub_10005930(v7, (const void **)&a3), result >= 0) )
  {
    result = sub_10005930(v7, (const void **)&a4);
    if ( result >= 0 )
    {
      v17 = BYTE3(a5);
      v15 = v30;
      goto LABEL_21;
    }
  }
  return result;
}

//----- (10004DB0) --------------------------------------------------------
int __thiscall sub_10004DB0(void *this, int a2, int a3)
{
  void *v3; // ebp@1
  int v4; // edi@1
  int v5; // esi@1
  int result; // eax@8

  v3 = this;
  v4 = *(_DWORD *)this;
  v5 = *(_DWORD *)(*(_DWORD *)this + 4);
  while ( !*(_BYTE *)(v5 + 13) )
  {
    if ( sub_1002C672(a3, v4, *(_DWORD *)(v5 + 16), *(WCHAR **)a3) < 0 )
    {
      v5 = *(_DWORD *)(v5 + 8);
    }
    else
    {
      v4 = v5;
      v5 = *(_DWORD *)v5;
    }
  }
  if ( v4 == *(_DWORD *)v3 || sub_1002C672(a3, v4, *(_DWORD *)a3, *(WCHAR **)(v4 + 16)) < 0 )
  {
    result = a2;
    *(_DWORD *)a2 = *(_DWORD *)v3;
  }
  else
  {
    result = a2;
    *(_DWORD *)a2 = v4;
  }
  return result;
}

//----- (10004E20) --------------------------------------------------------
void *__thiscall sub_10004E20(void *this)
{
  void *v1; // edx@1
  int v2; // eax@1
  int v3; // ecx@2
  int j; // eax@3
  int i; // eax@6

  v1 = this;
  v2 = *(_DWORD *)this;
  if ( *(_BYTE *)(*(_DWORD *)this + 13) )
    return v1;
  v3 = *(_DWORD *)(v2 + 8);
  if ( *(_BYTE *)(v3 + 13) )
  {
    for ( i = *(_DWORD *)(v2 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
    {
      if ( *(_DWORD *)v1 != *(_DWORD *)(i + 8) )
        break;
      *(_DWORD *)v1 = i;
    }
    *(_DWORD *)v1 = i;
    return v1;
  }
  for ( j = *(_DWORD *)v3; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
    v3 = j;
  *(_DWORD *)v1 = v3;
  return v1;
}

//----- (10004E80) --------------------------------------------------------
int __thiscall sub_10004E80(int this, int a2, LPVOID lpMem, int a4)
{
  LPVOID v4; // eax@1
  void *v5; // edi@1
  int result; // eax@3
  void *v7; // ecx@5
  int i; // edx@6
  int j; // eax@7
  int v10; // [sp+0h] [bp-4h]@1

  v10 = this;
  v4 = lpMem;
  v5 = (void *)this;
  if ( lpMem != **(LPVOID **)this || a4 != *(_DWORD *)this )
  {
    for ( ; lpMem != (LPVOID)a4; v4 = lpMem )
    {
      v7 = v4;
      if ( !*((_BYTE *)v4 + 13) )
      {
        i = *((_DWORD *)v4 + 2);
        if ( *(_BYTE *)(i + 13) )
        {
          for ( i = *((_DWORD *)v4 + 1); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
          {
            if ( v4 != *(LPVOID *)(i + 8) )
              break;
            v4 = (LPVOID)i;
          }
        }
        else
        {
          for ( j = *(_DWORD *)i; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
            i = j;
        }
        lpMem = (LPVOID)i;
      }
      sub_100050E0(v5, (int)&v10, v7);
    }
    *(_DWORD *)a2 = v4;
    result = a2;
  }
  else
  {
    sub_10005060((void *)this);
    result = a2;
    *(_DWORD *)a2 = **(_DWORD **)v5;
  }
  return result;
}

//----- (10004F30) --------------------------------------------------------
int __thiscall sub_10004F30(void *this, int a2, LPVOID lpMem, int a4)
{
  LPVOID v4; // eax@1
  void *v5; // edi@1
  LPVOID *v6; // edx@1
  int result; // eax@3
  void *v8; // ecx@5
  int i; // edx@6
  int j; // eax@7
  int v11; // [sp+4h] [bp-10h]@14
  int v12; // [sp+10h] [bp-4h]@3

  v4 = lpMem;
  v5 = this;
  v6 = *(LPVOID **)this;
  if ( lpMem != **(LPVOID **)this || (LPVOID *)a4 != v6 )
  {
    for ( ; lpMem != (LPVOID)a4; v4 = lpMem )
    {
      v8 = v4;
      if ( !*((_BYTE *)v4 + 13) )
      {
        i = *((_DWORD *)v4 + 2);
        if ( *(_BYTE *)(i + 13) )
        {
          for ( i = *((_DWORD *)v4 + 1); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
          {
            if ( v4 != *(LPVOID *)(i + 8) )
              break;
            v4 = (LPVOID)i;
          }
        }
        else
        {
          for ( j = *(_DWORD *)i; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
            i = j;
        }
        lpMem = (LPVOID)i;
      }
      sub_10005390(v5, (int)&v11, v8);
    }
    *(_DWORD *)a2 = v4;
    result = a2;
  }
  else
  {
    v12 = 0;
    sub_100057A0(v6[1]);
    *(_DWORD *)(*(_DWORD *)v5 + 4) = *(_DWORD *)v5;
    **(_DWORD **)v5 = *(_DWORD *)v5;
    *(_DWORD *)(*(_DWORD *)v5 + 8) = *(_DWORD *)v5;
    *((_DWORD *)v5 + 1) = 0;
    result = a2;
    *(_DWORD *)a2 = **(_DWORD **)v5;
  }
  return result;
}

//----- (10005020) --------------------------------------------------------
void *__thiscall sub_10005020(void *this)
{
  void *v1; // edi@1
  void *result; // eax@1
  void *v3; // esi@2

  v1 = this;
  result = (void *)**(_DWORD **)this;
  **(_DWORD **)this = *(_DWORD *)this;
  *(_DWORD *)(*(_DWORD *)this + 4) = *(_DWORD *)this;
  *((_DWORD *)this + 1) = 0;
  if ( result != *(void **)this )
  {
    do
    {
      v3 = *(void **)result;
      sub_1000F409(result);
      result = v3;
    }
    while ( v3 != *(void **)v1 );
  }
  return result;
}

//----- (10005060) --------------------------------------------------------
int __thiscall sub_10005060(void *this)
{
  void *v1; // edi@1
  void *v2; // ebx@1
  void *i; // esi@1
  int result; // eax@3

  v1 = this;
  v2 = *(void **)(*(_DWORD *)this + 4);
  for ( i = v2; !*((_BYTE *)i + 13); v2 = i )
  {
    sub_10005730(*((LPVOID *)i + 2));
    i = *(void **)i;
    sub_1000F409(v2);
  }
  *(_DWORD *)(*(_DWORD *)v1 + 4) = *(_DWORD *)v1;
  **(_DWORD **)v1 = *(_DWORD *)v1;
  result = *(_DWORD *)v1;
  *(_DWORD *)(result + 8) = result;
  *((_DWORD *)v1 + 1) = 0;
  return result;
}

//----- (100050E0) --------------------------------------------------------
int __thiscall sub_100050E0(void *this, int a2, LPVOID lpMem)
{
  LPVOID v3; // ebx@1
  void *v4; // ebp@1
  int v5; // edi@2
  LPVOID v6; // edx@5
  int v7; // esi@6
  int i; // ecx@15
  int v9; // eax@16
  int v10; // edx@19
  int v11; // eax@22
  int j; // ecx@22
  int v13; // eax@32
  char v14; // cl@35
  int v15; // edx@38
  int v16; // ecx@39
  int v17; // ecx@41
  int v18; // eax@45
  int v19; // eax@64
  LPVOID v20; // ecx@64
  int result; // eax@66
  int v22; // [sp+14h] [bp-8h]@38
  int v23; // [sp+18h] [bp-4h]@38

  v3 = lpMem;
  v4 = this;
  sub_10004E20(&lpMem);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 13) )
  {
    v5 = *((_DWORD *)v3 + 2);
LABEL_6:
    v7 = *((_DWORD *)v3 + 1);
    if ( !*(_BYTE *)(v5 + 13) )
      *(_DWORD *)(v5 + 4) = v7;
    if ( *(LPVOID *)(*(_DWORD *)v4 + 4) == v3 )
    {
      *(_DWORD *)(*(_DWORD *)v4 + 4) = v5;
    }
    else if ( *(LPVOID *)v7 == v3 )
    {
      *(_DWORD *)v7 = v5;
    }
    else
    {
      *(_DWORD *)(v7 + 8) = v5;
    }
    if ( **(LPVOID **)v4 == v3 )
    {
      if ( *(_BYTE *)(v5 + 13) )
      {
        i = v7;
      }
      else
      {
        v9 = *(_DWORD *)v5;
        for ( i = v5; !*(_BYTE *)(v9 + 13); v9 = *(_DWORD *)v9 )
          i = v9;
      }
      **(_DWORD **)v4 = i;
    }
    v10 = *(_DWORD *)v4;
    if ( *(LPVOID *)(*(_DWORD *)v4 + 8) == v3 )
    {
      if ( *(_BYTE *)(v5 + 13) )
      {
        *(_DWORD *)(v10 + 8) = v7;
      }
      else
      {
        v11 = *(_DWORD *)(v5 + 8);
        for ( j = v5; !*(_BYTE *)(v11 + 13); v11 = *(_DWORD *)(v11 + 8) )
          j = v11;
        *(_DWORD *)(v10 + 8) = j;
      }
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 13) )
  {
    v5 = *(_DWORD *)v3;
    goto LABEL_6;
  }
  v6 = lpMem;
  v5 = *((_DWORD *)lpMem + 2);
  if ( lpMem == v3 )
    goto LABEL_6;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = lpMem;
  *(_DWORD *)v6 = *(_DWORD *)v3;
  if ( v6 == *((LPVOID *)v3 + 2) )
  {
    v7 = (int)v6;
  }
  else
  {
    v7 = *((_DWORD *)v6 + 1);
    if ( !*(_BYTE *)(v5 + 13) )
      *(_DWORD *)(v5 + 4) = v7;
    *(_DWORD *)v7 = v5;
    *((_DWORD *)v6 + 2) = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v6;
  }
  if ( *(LPVOID *)(*(_DWORD *)v4 + 4) == v3 )
  {
    *(_DWORD *)(*(_DWORD *)v4 + 4) = v6;
  }
  else
  {
    v13 = *((_DWORD *)v3 + 1);
    if ( *(LPVOID *)v13 == v3 )
      *(_DWORD *)v13 = v6;
    else
      *(_DWORD *)(v13 + 8) = v6;
  }
  *((_DWORD *)v6 + 1) = *((_DWORD *)v3 + 1);
  v14 = *((_BYTE *)v6 + 12);
  *((_BYTE *)v6 + 12) = *((_BYTE *)v3 + 12);
  *((_BYTE *)v3 + 12) = v14;
LABEL_36:
  if ( *((_BYTE *)v3 + 12) == 1 )
  {
    if ( v5 != *(_DWORD *)(*(_DWORD *)v4 + 4) )
    {
      while ( 1 )
      {
        v15 = v7;
        v22 = v7;
        v23 = v7;
        if ( *(_BYTE *)(v5 + 12) != 1 )
          break;
        v16 = *(_DWORD *)v7;
        if ( v5 == *(_DWORD *)v7 )
        {
          v16 = *(_DWORD *)(v7 + 8);
          if ( !*(_BYTE *)(v16 + 12) )
          {
            *(_BYTE *)(v16 + 12) = 1;
            v17 = *(_DWORD *)(v7 + 8);
            *(_BYTE *)(v7 + 12) = 0;
            *(_DWORD *)(v7 + 8) = *(_DWORD *)v17;
            if ( !*(_BYTE *)(*(_DWORD *)v17 + 13) )
              *(_DWORD *)(*(_DWORD *)v17 + 4) = v7;
            *(_DWORD *)(v17 + 4) = *(_DWORD *)(v7 + 4);
            if ( v7 == *(_DWORD *)(*(_DWORD *)v4 + 4) )
            {
              *(_DWORD *)(*(_DWORD *)v4 + 4) = v17;
            }
            else
            {
              v18 = *(_DWORD *)(v7 + 4);
              if ( v7 == *(_DWORD *)v18 )
                *(_DWORD *)v18 = v17;
              else
                *(_DWORD *)(v18 + 8) = v17;
            }
            *(_DWORD *)v17 = v7;
            *(_DWORD *)(v7 + 4) = v17;
            v16 = *(_DWORD *)(v7 + 8);
          }
          if ( *(_BYTE *)(v16 + 13) )
            goto LABEL_61;
          if ( *(_BYTE *)(*(_DWORD *)v16 + 12) != 1 || *(_BYTE *)(*(_DWORD *)(v16 + 8) + 12) != 1 )
          {
            if ( *(_BYTE *)(*(_DWORD *)(v16 + 8) + 12) == 1 )
            {
              *(_BYTE *)(*(_DWORD *)v16 + 12) = 1;
              *(_BYTE *)(v16 + 12) = 0;
              sub_10005680(v4, v16);
              v16 = *(_DWORD *)(v7 + 8);
            }
            *(_BYTE *)(v16 + 12) = *(_BYTE *)(v7 + 12);
            *(_BYTE *)(v7 + 12) = 1;
            *(_BYTE *)(*(_DWORD *)(v16 + 8) + 12) = 1;
            sub_100056E0(v4, v7);
            break;
          }
        }
        else
        {
          if ( !*(_BYTE *)(v16 + 12) )
          {
            *(_BYTE *)(v16 + 12) = 1;
            *(_BYTE *)(v7 + 12) = 0;
            sub_10005680(v4, v7);
            v16 = *(_DWORD *)v7;
            v15 = v7;
          }
          if ( *(_BYTE *)(v16 + 13) )
            goto LABEL_61;
          if ( *(_BYTE *)(*(_DWORD *)(v16 + 8) + 12) != 1 || *(_BYTE *)(*(_DWORD *)v16 + 12) != 1 )
          {
            if ( *(_BYTE *)(*(_DWORD *)v16 + 12) == 1 )
            {
              *(_BYTE *)(*(_DWORD *)(v16 + 8) + 12) = 1;
              *(_BYTE *)(v16 + 12) = 0;
              sub_100056E0(v4, v16);
              v16 = *(_DWORD *)v7;
            }
            *(_BYTE *)(v16 + 12) = *(_BYTE *)(v7 + 12);
            *(_BYTE *)(v7 + 12) = 1;
            *(_BYTE *)(*(_DWORD *)v16 + 12) = 1;
            sub_10005680(v4, v7);
            break;
          }
        }
        *(_BYTE *)(v16 + 12) = 0;
LABEL_61:
        v7 = *(_DWORD *)(v7 + 4);
        v5 = v22;
        if ( v15 == *(_DWORD *)(*(_DWORD *)v4 + 4) )
        {
          v5 = v23;
          break;
        }
      }
    }
    *(_BYTE *)(v5 + 12) = 1;
  }
  sub_1000F409(v3);
  v19 = *((_DWORD *)v4 + 1);
  v20 = lpMem;
  if ( v19 )
    *((_DWORD *)v4 + 1) = v19 - 1;
  result = a2;
  *(_DWORD *)a2 = v20;
  return result;
}

//----- (10005390) --------------------------------------------------------
int __thiscall sub_10005390(void *this, int a2, LPVOID lpMem)
{
  LPVOID v3; // ebx@1
  void *v4; // ebp@1
  int v5; // edi@2
  LPVOID v6; // edx@5
  int v7; // esi@6
  int i; // ecx@15
  int v9; // eax@16
  int v10; // edx@19
  int v11; // eax@22
  int j; // ecx@22
  int v13; // eax@32
  char v14; // cl@35
  bool v15; // zf@38
  int v16; // edx@38
  int v17; // ecx@39
  int v18; // ecx@41
  int v19; // eax@45
  int v20; // eax@64
  LPVOID v21; // ecx@64
  int result; // eax@66
  int v23; // [sp+14h] [bp-8h]@38
  int v24; // [sp+18h] [bp-4h]@38

  v3 = lpMem;
  v4 = this;
  sub_10004E20(&lpMem);
  if ( *(_BYTE *)(*(_DWORD *)v3 + 13) )
  {
    v5 = *((_DWORD *)v3 + 2);
LABEL_6:
    v7 = *((_DWORD *)v3 + 1);
    if ( !*(_BYTE *)(v5 + 13) )
      *(_DWORD *)(v5 + 4) = v7;
    if ( *(LPVOID *)(*(_DWORD *)v4 + 4) == v3 )
    {
      *(_DWORD *)(*(_DWORD *)v4 + 4) = v5;
    }
    else if ( *(LPVOID *)v7 == v3 )
    {
      *(_DWORD *)v7 = v5;
    }
    else
    {
      *(_DWORD *)(v7 + 8) = v5;
    }
    if ( **(LPVOID **)v4 == v3 )
    {
      if ( *(_BYTE *)(v5 + 13) )
      {
        i = v7;
      }
      else
      {
        v9 = *(_DWORD *)v5;
        for ( i = v5; !*(_BYTE *)(v9 + 13); v9 = *(_DWORD *)v9 )
          i = v9;
      }
      **(_DWORD **)v4 = i;
    }
    v10 = *(_DWORD *)v4;
    if ( *(LPVOID *)(*(_DWORD *)v4 + 8) == v3 )
    {
      if ( *(_BYTE *)(v5 + 13) )
      {
        *(_DWORD *)(v10 + 8) = v7;
      }
      else
      {
        v11 = *(_DWORD *)(v5 + 8);
        for ( j = v5; !*(_BYTE *)(v11 + 13); v11 = *(_DWORD *)(v11 + 8) )
          j = v11;
        *(_DWORD *)(v10 + 8) = j;
      }
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(*((_DWORD *)v3 + 2) + 13) )
  {
    v5 = *(_DWORD *)v3;
    goto LABEL_6;
  }
  v6 = lpMem;
  v5 = *((_DWORD *)lpMem + 2);
  if ( lpMem == v3 )
    goto LABEL_6;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = lpMem;
  *(_DWORD *)v6 = *(_DWORD *)v3;
  if ( v6 == *((LPVOID *)v3 + 2) )
  {
    v7 = (int)v6;
  }
  else
  {
    v7 = *((_DWORD *)v6 + 1);
    if ( !*(_BYTE *)(v5 + 13) )
      *(_DWORD *)(v5 + 4) = v7;
    *(_DWORD *)v7 = v5;
    *((_DWORD *)v6 + 2) = *((_DWORD *)v3 + 2);
    *(_DWORD *)(*((_DWORD *)v3 + 2) + 4) = v6;
  }
  if ( *(LPVOID *)(*(_DWORD *)v4 + 4) == v3 )
  {
    *(_DWORD *)(*(_DWORD *)v4 + 4) = v6;
  }
  else
  {
    v13 = *((_DWORD *)v3 + 1);
    if ( *(LPVOID *)v13 == v3 )
      *(_DWORD *)v13 = v6;
    else
      *(_DWORD *)(v13 + 8) = v6;
  }
  *((_DWORD *)v6 + 1) = *((_DWORD *)v3 + 1);
  v14 = *((_BYTE *)v6 + 12);
  *((_BYTE *)v6 + 12) = *((_BYTE *)v3 + 12);
  *((_BYTE *)v3 + 12) = v14;
LABEL_36:
  if ( *((_BYTE *)v3 + 12) == 1 )
  {
    if ( v5 != *(_DWORD *)(*(_DWORD *)v4 + 4) )
    {
      while ( 1 )
      {
        v15 = *(_BYTE *)(v5 + 12) == 1;
        v16 = v7;
        v23 = v7;
        v24 = v7;
        if ( !v15 )
          break;
        v17 = *(_DWORD *)v7;
        if ( v5 == *(_DWORD *)v7 )
        {
          v17 = *(_DWORD *)(v7 + 8);
          if ( !*(_BYTE *)(v17 + 12) )
          {
            *(_BYTE *)(v17 + 12) = 1;
            v18 = *(_DWORD *)(v7 + 8);
            *(_BYTE *)(v7 + 12) = 0;
            *(_DWORD *)(v7 + 8) = *(_DWORD *)v18;
            if ( !*(_BYTE *)(*(_DWORD *)v18 + 13) )
              *(_DWORD *)(*(_DWORD *)v18 + 4) = v7;
            *(_DWORD *)(v18 + 4) = *(_DWORD *)(v7 + 4);
            if ( v7 == *(_DWORD *)(*(_DWORD *)v4 + 4) )
            {
              *(_DWORD *)(*(_DWORD *)v4 + 4) = v18;
            }
            else
            {
              v19 = *(_DWORD *)(v7 + 4);
              if ( v7 == *(_DWORD *)v19 )
                *(_DWORD *)v19 = v18;
              else
                *(_DWORD *)(v19 + 8) = v18;
            }
            *(_DWORD *)v18 = v7;
            *(_DWORD *)(v7 + 4) = v18;
            v17 = *(_DWORD *)(v7 + 8);
          }
          if ( *(_BYTE *)(v17 + 13) )
            goto LABEL_61;
          if ( *(_BYTE *)(*(_DWORD *)v17 + 12) != 1 || *(_BYTE *)(*(_DWORD *)(v17 + 8) + 12) != 1 )
          {
            if ( *(_BYTE *)(*(_DWORD *)(v17 + 8) + 12) == 1 )
            {
              *(_BYTE *)(*(_DWORD *)v17 + 12) = 1;
              *(_BYTE *)(v17 + 12) = 0;
              sub_10005680(v4, v17);
              v17 = *(_DWORD *)(v7 + 8);
            }
            *(_BYTE *)(v17 + 12) = *(_BYTE *)(v7 + 12);
            *(_BYTE *)(v7 + 12) = 1;
            *(_BYTE *)(*(_DWORD *)(v17 + 8) + 12) = 1;
            sub_100056E0(v4, v7);
            break;
          }
        }
        else
        {
          if ( !*(_BYTE *)(v17 + 12) )
          {
            *(_BYTE *)(v17 + 12) = 1;
            *(_BYTE *)(v7 + 12) = 0;
            sub_10005680(v4, v7);
            v17 = *(_DWORD *)v7;
            v16 = v7;
          }
          if ( *(_BYTE *)(v17 + 13) )
            goto LABEL_61;
          if ( *(_BYTE *)(*(_DWORD *)(v17 + 8) + 12) != 1 || *(_BYTE *)(*(_DWORD *)v17 + 12) != 1 )
          {
            if ( *(_BYTE *)(*(_DWORD *)v17 + 12) == 1 )
            {
              *(_BYTE *)(*(_DWORD *)(v17 + 8) + 12) = 1;
              *(_BYTE *)(v17 + 12) = 0;
              sub_100056E0(v4, v17);
              v17 = *(_DWORD *)v7;
            }
            *(_BYTE *)(v17 + 12) = *(_BYTE *)(v7 + 12);
            *(_BYTE *)(v7 + 12) = 1;
            *(_BYTE *)(*(_DWORD *)v17 + 12) = 1;
            sub_10005680(v4, v7);
            break;
          }
        }
        *(_BYTE *)(v17 + 12) = 0;
LABEL_61:
        v7 = *(_DWORD *)(v7 + 4);
        v5 = v23;
        if ( v16 == *(_DWORD *)(*(_DWORD *)v4 + 4) )
        {
          v5 = v24;
          break;
        }
      }
    }
    *(_BYTE *)(v5 + 12) = 1;
  }
  sub_10004E80((int)((char *)v3 + 28), (int)&v24, **((LPVOID **)v3 + 7), *((_DWORD *)v3 + 7));
  sub_1000F409(*((LPVOID *)v3 + 7));
  sub_1000F409(v3);
  v20 = *((_DWORD *)v4 + 1);
  v21 = lpMem;
  if ( v20 )
    *((_DWORD *)v4 + 1) = v20 - 1;
  result = a2;
  *(_DWORD *)a2 = v21;
  return result;
}

//----- (10005650) --------------------------------------------------------
LPVOID sub_10005650()
{
  LPVOID result; // eax@1

  result = sub_1000F0A6(0x20u);
  if ( result )
    *(_DWORD *)result = result;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = result;
  if ( result != (LPVOID)-8 )
    *((_DWORD *)result + 2) = result;
  *((_WORD *)result + 6) = 257;
  return result;
}

//----- (10005680) --------------------------------------------------------
int __thiscall sub_10005680(void *this, int a2)
{
  int v2; // esi@1
  int v3; // eax@1
  int result; // eax@3

  v2 = *(_DWORD *)a2;
  *(_DWORD *)a2 = *(_DWORD *)(*(_DWORD *)a2 + 8);
  v3 = *(_DWORD *)(v2 + 8);
  if ( !*(_BYTE *)(v3 + 13) )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 4);
  result = *(_DWORD *)this;
  if ( a2 == *(_DWORD *)(*(_DWORD *)this + 4) )
  {
    *(_DWORD *)(result + 4) = v2;
    *(_DWORD *)(v2 + 8) = a2;
    *(_DWORD *)(a2 + 4) = v2;
  }
  else
  {
    result = *(_DWORD *)(a2 + 4);
    if ( a2 == *(_DWORD *)(result + 8) )
    {
      *(_DWORD *)(result + 8) = v2;
      *(_DWORD *)(v2 + 8) = a2;
      *(_DWORD *)(a2 + 4) = v2;
    }
    else
    {
      *(_DWORD *)result = v2;
      *(_DWORD *)(v2 + 8) = a2;
      *(_DWORD *)(a2 + 4) = v2;
    }
  }
  return result;
}

//----- (100056E0) --------------------------------------------------------
int __thiscall sub_100056E0(void *this, int a2)
{
  int v2; // esi@1
  int result; // eax@3

  v2 = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *(_DWORD *)v2;
  if ( !*(_BYTE *)(*(_DWORD *)v2 + 13) )
    *(_DWORD *)(*(_DWORD *)v2 + 4) = a2;
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 4);
  result = *(_DWORD *)this;
  if ( a2 == *(_DWORD *)(*(_DWORD *)this + 4) )
  {
    *(_DWORD *)(result + 4) = v2;
    *(_DWORD *)v2 = a2;
    *(_DWORD *)(a2 + 4) = v2;
  }
  else
  {
    result = *(_DWORD *)(a2 + 4);
    if ( a2 == *(_DWORD *)result )
    {
      *(_DWORD *)result = v2;
      *(_DWORD *)v2 = a2;
      *(_DWORD *)(a2 + 4) = v2;
    }
    else
    {
      *(_DWORD *)(result + 8) = v2;
      *(_DWORD *)v2 = a2;
      *(_DWORD *)(a2 + 4) = v2;
    }
  }
  return result;
}

//----- (10005730) --------------------------------------------------------
int __stdcall sub_10005730(LPVOID lpMem)
{
  LPVOID v1; // edi@1
  LPVOID i; // esi@1
  int result; // eax@2

  v1 = lpMem;
  for ( i = lpMem; !*((_BYTE *)i + 13); v1 = i )
  {
    sub_10005730(*((LPVOID *)i + 2));
    i = *(LPVOID *)i;
    result = sub_1000F409(v1);
  }
  return result;
}

//----- (10005770) --------------------------------------------------------
LPVOID sub_10005770()
{
  LPVOID result; // eax@1

  result = sub_1000F0A6(0x24u);
  if ( result )
    *(_DWORD *)result = result;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = result;
  if ( result != (LPVOID)-8 )
    *((_DWORD *)result + 2) = result;
  *((_WORD *)result + 6) = 257;
  return result;
}

//----- (100057A0) --------------------------------------------------------
int __stdcall sub_100057A0(LPVOID lpMem)
{
  LPVOID v1; // ebx@1
  LPVOID i; // esi@1
  int result; // eax@2

  v1 = lpMem;
  for ( i = lpMem; !*((_BYTE *)i + 13); v1 = i )
  {
    sub_100057A0(*((LPVOID *)i + 2));
    i = *(LPVOID *)i;
    sub_10004E80((int)((char *)v1 + 28), (int)&lpMem, **((LPVOID **)v1 + 7), *((_DWORD *)v1 + 7));
    sub_1000F409(*((LPVOID *)v1 + 7));
    result = sub_1000F409(v1);
  }
  return result;
}

//----- (10005800) --------------------------------------------------------
int __thiscall sub_10005800(int this)
{
  int v1; // esi@1
  int result; // eax@1
  int v3; // eax@4
  void *v4; // edi@4
  int v5; // esi@4
  int v6; // [sp+0h] [bp-4h]@1

  v6 = this;
  v1 = this;
  result = sub_1000F0A1(*(LPVOID *)this);
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 0;
  if ( *(_DWORD *)(v1 + 16) )
    result = sub_10004F30((void *)(v1 + 12), (int)&v6, **(LPVOID **)(v1 + 12), *(_DWORD *)(v1 + 12));
  if ( *(_DWORD *)(v1 + 24) )
  {
    v3 = *(_DWORD *)(v1 + 20);
    v4 = (void *)(v1 + 20);
    v5 = *(_DWORD *)v3;
    if ( *(_DWORD *)v3 != v3 )
    {
      do
      {
        sub_1000F0A1(*(LPVOID *)(v5 + 8));
        v5 = *(_DWORD *)v5;
      }
      while ( v5 != *(_DWORD *)v4 );
    }
    result = sub_10005A40(v4, (int)&v6, **(LPVOID **)v4, *(_DWORD *)v4);
  }
  return result;
}

//----- (10005880) --------------------------------------------------------
signed int __userpurge sub_10005880@<eax>(int a1@<ecx>, int a2@<edi>, int a3)
{
  int v3; // ebp@1
  signed int result; // eax@2
  int v5; // eax@3
  int v6; // esi@3
  int v7; // edi@7
  int v8; // eax@9
  int v9; // esi@11

  v3 = a1;
  if ( sub_1002C003(a3, a2) )
  {
    result = -3;
  }
  else
  {
    v5 = sub_1002BD3E(a3, a2, a3);
    v6 = v5;
    if ( v5 >= 0 )
    {
      if ( v5 )
      {
        v7 = (int)sub_1000F40E(v5);
        if ( v7 )
        {
          sub_1002C003(a3, v7);
          v8 = sub_1002C2BD(a3, v7);
          if ( v8 == v6 )
          {
            v9 = sub_10005B50(v3, (LPCSTR)v7, v8);
            sub_1000F0A1((LPVOID)v7);
            result = v9;
          }
          else
          {
            sub_1000F0A1((LPVOID)v7);
            result = -3;
          }
        }
        else
        {
          result = -2;
        }
      }
      else
      {
        result = 0;
      }
    }
    else
    {
      result = -3;
    }
  }
  return result;
}

//----- (10005930) --------------------------------------------------------
signed int __thiscall sub_10005930(void *this, const void **a2)
{
  void *v2; // ebp@1
  const void *v3; // esi@1
  __int16 v4; // ax@2
  int v5; // esi@3
  LPVOID v6; // eax@3
  int v7; // edi@3
  signed int result; // eax@4
  int v9; // esi@5
  LPVOID v10; // edx@5
  int v11; // eax@5
  int v12; // [sp+10h] [bp-Ch]@5
  int v13; // [sp+14h] [bp-8h]@5
  int v14; // [sp+18h] [bp-4h]@5

  v2 = this;
  v3 = *a2;
  do
  {
    v4 = *(_WORD *)v3;
    v3 = (char *)v3 + 2;
  }
  while ( v4 );
  v5 = (((_BYTE *)v3 - ((_BYTE *)*a2 + 2)) >> 1) + 1;
  v6 = sub_1000F40E(2 * v5 | -((unsigned __int64)(unsigned int)v5 >> 31 != 0));
  v7 = (int)v6;
  if ( v6 )
  {
    sub_100278E0(v6, *a2, 2 * v5);
    v9 = *((_DWORD *)v2 + 5);
    v12 = v7;
    v13 = 0;
    v14 = 0;
    v10 = sub_10006CB0((void *)v9, *(void **)(v9 + 4), (int)&v12);
    v11 = *((_DWORD *)v2 + 6);
    if ( (unsigned int)(214748363 - v11) < 1 )
      sub_1000DA74((int)"list<T> too long");
    *((_DWORD *)v2 + 6) = v11 + 1;
    *(_DWORD *)(v9 + 4) = v10;
    **((_DWORD **)v10 + 1) = v10;
    result = 0;
    *a2 = (const void *)v7;
  }
  else
  {
    result = -2;
  }
  return result;
}

//----- (100059F0) --------------------------------------------------------
signed int __usercall sub_100059F0@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, char a5)
{
  return sub_100043B0(a1, a2, a3, 64, a4, 0, (int)&a5);
}

//----- (10005A20) --------------------------------------------------------
int __userpurge sub_10005A20@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, const char *a4)
{
  return sub_1002D3CD(a2, a3, a4, *(_DWORD *)(a1 + 4));
}

//----- (10005A40) --------------------------------------------------------
int __thiscall sub_10005A40(void *this, int a2, LPVOID lpMem, int a4)
{
  int v4; // eax@1
  void *v5; // ebx@1
  LPVOID v6; // edi@1
  int result; // eax@3
  void *v8; // esi@5

  v4 = a4;
  v5 = this;
  v6 = lpMem;
  if ( lpMem != **(LPVOID **)this || a4 != *(_DWORD *)this )
  {
    if ( lpMem != (LPVOID)a4 )
    {
      do
      {
        v8 = *(void **)v6;
        **((_DWORD **)v6 + 1) = *(_DWORD *)v6;
        *(_DWORD *)(*(_DWORD *)v6 + 4) = *((_DWORD *)v6 + 1);
        --*((_DWORD *)v5 + 1);
        sub_1000F409(v6);
        v4 = a4;
        v6 = v8;
      }
      while ( v8 != (void *)a4 );
    }
    *(_DWORD *)a2 = v4;
    result = a2;
  }
  else
  {
    sub_10005020(this);
    result = a2;
    *(_DWORD *)a2 = *(_DWORD *)v5;
  }
  return result;
}

//----- (10005AB0) --------------------------------------------------------
int __thiscall sub_10005AB0(void **this, int a2)
{
  void **v2; // esi@1
  void *v3; // edi@1
  LPVOID v4; // edx@1
  void *v5; // eax@1
  int result; // eax@2

  v2 = this;
  v3 = *this;
  v4 = sub_10006CB0(*this, *((void **)*this + 1), a2);
  v5 = v2[1];
  if ( (unsigned int)(214748363 - (_DWORD)v5) < 1 )
    sub_1000DA74((int)"list<T> too long");
  v2[1] = (char *)v5 + 1;
  *((_DWORD *)v3 + 1) = v4;
  result = *((_DWORD *)v4 + 1);
  *(_DWORD *)result = v4;
  return result;
}

//----- (10005AF0) --------------------------------------------------------
LPVOID __thiscall sub_10005AF0(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_1006DA08;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 1006DA08: using guessed type int (__thiscall *off_1006DA08)(LPVOID lpMem, char);

//----- (10005B20) --------------------------------------------------------
LPVOID __thiscall sub_10005B20(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_1006DA08;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 1006DA08: using guessed type int (__thiscall *off_1006DA08)(LPVOID lpMem, char);

//----- (10005B50) --------------------------------------------------------
int __thiscall sub_10005B50(int this, LPCSTR lpMultiByteStr, int cbMultiByte)
{
  int v3; // edi@1
  UINT v4; // esi@1
  char v5; // al@1
  int v6; // ecx@3
  const CHAR *v7; // ebx@6
  int v8; // eax@10
  int v9; // ecx@10
  WCHAR *v10; // ecx@13
  int result; // eax@14
  int v12; // eax@18
  LPWSTR v13; // ebx@18
  bool v14; // zf@18
  int v15; // ecx@22
  char v16; // si@23
  int v17; // eax@28
  LPWSTR lpWideCharStr; // [sp+10h] [bp-20h]@13
  int v19; // [sp+14h] [bp-1Ch]@18
  int v20; // [sp+18h] [bp-18h]@18
  int v21; // [sp+1Ch] [bp-14h]@18
  int cchWideChar; // [sp+20h] [bp-10h]@12
  int v23; // [sp+24h] [bp-Ch]@18
  int v24; // [sp+28h] [bp-8h]@18
  int v25; // [sp+2Ch] [bp-4h]@13

  v3 = this;
  v4 = 0;
  v5 = *(_BYTE *)(this + 28);
  if ( v5 )
    v4 = 65001;
  v6 = cbMultiByte;
  if ( !cbMultiByte )
    goto LABEL_29;
  if ( v5 && (unsigned int)cbMultiByte >= 3 )
  {
    v7 = lpMultiByteStr;
    if ( *(_WORD *)lpMultiByteStr == -17425 && lpMultiByteStr[2] == -65 )
    {
      v7 = lpMultiByteStr + 3;
      v6 = cbMultiByte - 3;
      cbMultiByte -= 3;
    }
  }
  else
  {
    v7 = lpMultiByteStr;
  }
  v8 = MultiByteToWideChar(v4, 0, v7, v6, 0, 0);
  v9 = -1;
  if ( v8 > 0 )
    v9 = v8;
  cchWideChar = v9;
  if ( v9 == -1 )
    return -1;
  v25 = v9 + 1;
  v10 = (WCHAR *)sub_1000F40E(2 * (v9 + 1) | -((unsigned __int64)(unsigned int)(v9 + 1) >> 31 != 0));
  lpWideCharStr = v10;
  if ( !v10 )
    return -2;
  sub_10028330(v10, 0, 2 * cchWideChar + 2);
  if ( MultiByteToWideChar(v4, 0, v7, cbMultiByte, lpWideCharStr, cchWideChar) <= 0 )
  {
    sub_1000F0A1(lpWideCharStr);
    return -1;
  }
  v12 = *(_DWORD *)v3;
  v13 = lpWideCharStr;
  v14 = *(_DWORD *)v3 == 0;
  cchWideChar = (int)lpWideCharStr;
  LOBYTE(v24) = !v14;
  v21 = (int)&unk_1006DA00;
  v14 = *(_DWORD *)(v3 + 8) == 0;
  v20 = 0;
  v19 = 0;
  lpWideCharStr = 0;
  v23 = v12;
  if ( !v14
    || !sub_10006E00((int)&cchWideChar, v3 + 8, 0, 0)
    || !v23
    || (result = sub_10005930((void *)v3, (const void **)(v3 + 8)), result >= 0) )
  {
    if ( sub_10006780(
           (void *)v3,
           (int)&cchWideChar,
           (unsigned int *)&v21,
           (unsigned int *)&v20,
           (int)&v19,
           (int)&lpWideCharStr) )
    {
      v16 = v24;
      do
      {
        result = sub_10004AE0((void *)v3, v21, v20, v19, (int)lpWideCharStr, v15, v16);
        if ( result < 0 )
          return result;
      }
      while ( sub_10006780(
                (void *)v3,
                (int)&cchWideChar,
                (unsigned int *)&v21,
                (unsigned int *)&v20,
                (int)&v19,
                (int)&lpWideCharStr) );
    }
    if ( v23 )
    {
      sub_1000F0A1(v13);
      return 0;
    }
    v17 = v25;
    *(_DWORD *)v3 = v13;
    *(_DWORD *)(v3 + 4) = v17;
LABEL_29:
    result = 0;
  }
  return result;
}

//----- (10005D40) --------------------------------------------------------
int __userpurge sub_10005D40@<eax>(int a1@<ecx>, int a2@<edi>, int a3, int a4)
{
  int v4; // ebx@1
  int v5; // esi@1
  char v6; // cl@3
  int v7; // eax@6
  int *v8; // eax@16
  int v9; // esi@19
  LPVOID v10; // eax@19
  LPVOID v11; // ecx@20
  void *v12; // esi@20
  int *v13; // eax@24
  const char *v14; // eax@27
  int v15; // eax@30
  int v16; // ecx@30
  int v17; // eax@38
  int *v18; // eax@44
  void *v19; // eax@48
  void *v20; // esi@49
  void *v21; // ecx@51
  LPVOID v22; // eax@51
  void *v23; // esi@52
  LPVOID v24; // edi@55
  void *v25; // eax@55
  void *v26; // esi@56
  int v27; // ecx@57
  LPVOID v28; // eax@57
  void *v29; // esi@58
  int v30; // edi@60
  void *v31; // ecx@62
  void *v32; // eax@62
  void *v33; // esi@63
  int v35; // [sp+Ch] [bp-4Ch]@1
  void *v36; // [sp+10h] [bp-48h]@16
  unsigned int v37; // [sp+24h] [bp-34h]@16
  LPVOID lpMem; // [sp+28h] [bp-30h]@20
  int v39; // [sp+2Ch] [bp-2Ch]@20
  int v40; // [sp+30h] [bp-28h]@3
  unsigned int v41; // [sp+34h] [bp-24h]@3
  LPVOID v42; // [sp+38h] [bp-20h]@19
  unsigned int v43; // [sp+3Ch] [bp-1Ch]@19
  char v44; // [sp+40h] [bp-18h]@3
  int v45; // [sp+44h] [bp-14h]@1
  char v46; // [sp+48h] [bp-10h]@3
  int v47; // [sp+54h] [bp-4h]@1

  v4 = a1;
  v45 = a1;
  sub_10006330(&v35, *(_BYTE *)(a1 + 28));
  v47 = 0;
  v5 = a3;
  if ( *(_BYTE *)(v4 + 28) )
    sub_1002D3CD(v4, a2, "", *(_DWORD *)(a3 + 4));
  v40 = 0;
  v41 = 0;
  v40 = (int)sub_100038A0(0, 0);
  LOBYTE(v47) = 1;
  sub_100063E0((void *)v4, (int)&v40);
  v46 = BYTE3(a3);
  sub_10006FE0(&v40, (int)&v44, *(_DWORD *)v40, v40, (int)&v46, v41);
  v6 = 0;
  if ( *(_DWORD *)(v4 + 8) )
  {
    if ( !sub_10006A50(a3, (int)&v35, *(LPCWSTR *)(v4 + 8)) )
    {
LABEL_60:
      v7 = v40;
      v30 = -1;
      goto LABEL_62;
    }
    v6 = 1;
  }
  v7 = v40;
  v4 = *(_DWORD *)v40;
  if ( *(_DWORD *)v40 != v40 )
  {
    while ( 1 )
    {
      if ( *(_DWORD *)(v4 + 12) )
      {
        if ( v6 )
        {
          sub_1002D3CD(v4, a2, "\r\n", *(_DWORD *)(v5 + 4));
          sub_1002D3CD(v4, a2, "\r\n", *(_DWORD *)(v5 + 4));
        }
        if ( !sub_10006A50(v5, (int)&v35, *(LPCWSTR *)(v4 + 12)) )
          goto LABEL_60;
      }
      else if ( v6 )
      {
        sub_1002D3CD(v4, a2, "\r\n", *(_DWORD *)(v5 + 4));
        sub_1002D3CD(v4, a2, "\r\n", *(_DWORD *)(v5 + 4));
      }
      if ( **(_WORD **)(v4 + 8) )
      {
        if ( !sub_10006280((UINT *)&v35, *(LPCWSTR *)(v4 + 8)) )
          goto LABEL_60;
        sub_1002D3CD(v4, a2, "[", *(_DWORD *)(v5 + 4));
        v8 = (int *)&v36;
        if ( v37 >= 0x10 )
          v8 = (int *)v36;
        sub_1002D3CD(v4, a2, (const char *)v8, *(_DWORD *)(v5 + 4));
        sub_1002D3CD(v4, a2, "]", *(_DWORD *)(v5 + 4));
        sub_1002D3CD(v4, a2, "\r\n", *(_DWORD *)(v5 + 4));
      }
      v42 = 0;
      v43 = 0;
      v42 = sub_100038A0(0, 0);
      v9 = v45;
      LOBYTE(v47) = 2;
      sub_100064B0((void *)v45, *(_DWORD *)(v4 + 8), (int)&v42);
      v46 = BYTE3(a3);
      sub_10006FE0(&v42, (int)&v44, *(_DWORD *)v42, (int)v42, (int)&v46, v43);
      v10 = v42;
      a2 = *(_DWORD *)v42;
      if ( *(LPVOID *)v42 != v42 )
        break;
LABEL_51:
      LOBYTE(v47) = 1;
      v21 = *(void **)v10;
      *(_DWORD *)v10 = v10;
      v46 = 1;
      *((_DWORD *)v42 + 1) = v42;
      v22 = v42;
      v43 = 0;
      if ( v21 != v42 )
      {
        do
        {
          v23 = *(void **)v21;
          sub_1000F409(v21);
          v22 = v42;
          v21 = v23;
        }
        while ( v23 != v42 );
      }
      sub_1000F409(v22);
      v4 = *(_DWORD *)v4;
      v7 = v40;
      if ( v4 == v40 )
        goto LABEL_61;
      v5 = a3;
      v6 = v46;
    }
    while ( 1 )
    {
      lpMem = 0;
      v39 = 0;
      lpMem = sub_100038A0(0, 0);
      LOBYTE(v47) = 3;
      sub_100065F0(v9, *(_DWORD *)(v4 + 8), *(_DWORD *)(a2 + 8), (int)&lpMem);
      v11 = lpMem;
      v12 = *(void **)lpMem;
      if ( *(LPVOID *)lpMem != lpMem )
        break;
LABEL_48:
      LOBYTE(v47) = 2;
      v19 = *(void **)v11;
      *(_DWORD *)v11 = v11;
      *((_DWORD *)v11 + 1) = v11;
      v39 = 0;
      if ( v19 != v11 )
      {
        do
        {
          v20 = *(void **)v19;
          sub_1000F409(v19);
          v11 = lpMem;
          v19 = v20;
        }
        while ( v20 != lpMem );
      }
      sub_1000F409(v11);
      a2 = *(_DWORD *)a2;
      v10 = v42;
      v9 = v45;
      if ( (LPVOID)a2 == v42 )
        goto LABEL_51;
    }
    while ( 1 )
    {
      if ( *((_DWORD *)v12 + 3) )
      {
        sub_1002D3CD(v4, a2, "\r\n", *(_DWORD *)(a3 + 4));
        if ( !sub_10006A50(a3, (int)&v35, *((LPCWSTR *)v12 + 3)) )
          break;
      }
      if ( !sub_10006280((UINT *)&v35, *(LPCWSTR *)(a2 + 8)) )
        break;
      v13 = (int *)&v36;
      if ( v37 >= 0x10 )
        v13 = (int *)v36;
      sub_1002D3CD(v4, a2, (const char *)v13, *(_DWORD *)(a3 + 4));
      if ( !sub_10006280((UINT *)&v35, *((LPCWSTR *)v12 + 2)) )
        break;
      v14 = " = ";
      if ( !*(_BYTE *)(v45 + 31) )
        v14 = "=";
      sub_1002D3CD(v4, a2, v14, *(_DWORD *)(a3 + 4));
      if ( *(_BYTE *)(v45 + 30) && (v15 = *((_DWORD *)v12 + 2), v16 = *(_WORD *)v15, (_WORD)v16) )
      {
        if ( v16 != 32 && v16 != 9 && v16 != 13 && v16 != 10 )
        {
          while ( 1 )
          {
            v16 = (unsigned __int16)v16;
            if ( (unsigned __int16)v16 == 10 || v16 == 13 )
              break;
            LOWORD(v16) = *(_WORD *)(v15 + 2);
            v15 += 2;
            if ( !(_WORD)v16 )
            {
              v17 = *(_WORD *)(v15 - 2);
              if ( v17 != 32 && v17 != 9 && v17 != 13 && v17 != 10 )
                goto LABEL_44;
              break;
            }
          }
        }
        sub_1002D3CD(v4, a2, "<<<SI-END-OF-MULTILINE-TEXT\r\n", *(_DWORD *)(a3 + 4));
        if ( !sub_10006A50(a3, (int)&v35, *((LPCWSTR *)v12 + 2)) )
          break;
        sub_1002D3CD(v4, a2, "SI-END-OF-MULTILINE-TEXT", *(_DWORD *)(a3 + 4));
      }
      else
      {
LABEL_44:
        v18 = (int *)&v36;
        if ( v37 >= 0x10 )
          v18 = (int *)v36;
        sub_1002D3CD(v4, a2, (const char *)v18, *(_DWORD *)(a3 + 4));
      }
      sub_1002D3CD(v4, a2, "\r\n", *(_DWORD *)(a3 + 4));
      v12 = *(void **)v12;
      v11 = lpMem;
      if ( v12 == lpMem )
        goto LABEL_48;
    }
    v24 = lpMem;
    v25 = *(void **)lpMem;
    *(_DWORD *)v24 = v24;
    *((_DWORD *)v24 + 1) = v24;
    if ( v25 != v24 )
    {
      do
      {
        v26 = *(void **)v25;
        sub_1000F409(v25);
        v25 = v26;
      }
      while ( v26 != v24 );
    }
    sub_1000F409(v24);
    v27 = *(_DWORD *)v42;
    *(_DWORD *)v42 = v42;
    *((_DWORD *)v42 + 1) = v42;
    v28 = v42;
    v43 = 0;
    if ( (LPVOID)v27 != v42 )
    {
      do
      {
        v29 = *(void **)v27;
        sub_1000F409((LPVOID)v27);
        v28 = v42;
        v27 = (int)v29;
      }
      while ( v29 != v42 );
    }
    sub_1000F409(v28);
    goto LABEL_60;
  }
LABEL_61:
  v30 = 0;
LABEL_62:
  v31 = *(void **)v7;
  *(_DWORD *)v7 = v7;
  *(_DWORD *)(v40 + 4) = v40;
  v32 = (void *)v40;
  v41 = 0;
  if ( v31 != (void *)v40 )
  {
    do
    {
      v33 = *(void **)v31;
      sub_1000F409(v31);
      v32 = (void *)v40;
      v31 = v33;
    }
    while ( v33 != (void *)v40 );
  }
  sub_100011F0(v4, v30, v32, 1, 0x14u);
  if ( v37 >= 0x10 )
    sub_100011F0(v4, v30, v36, v37 + 1, 1u);
  return v30;
}

//----- (10006270) --------------------------------------------------------
int __thiscall sub_10006270(int this)
{
  int result; // eax@1

  result = this + 4;
  if ( *(_DWORD *)(this + 24) >= 0x10u )
    result = *(_DWORD *)result;
  return result;
}

//----- (10006280) --------------------------------------------------------
bool __thiscall sub_10006280(UINT *this, LPCWSTR lpWideCharStr)
{
  int (__stdcall *v2)(UINT, DWORD, LPCWSTR, int, LPSTR, int, LPCSTR, LPBOOL); // esi@1
  UINT *v3; // edi@1
  int v4; // eax@1
  signed int v5; // ebx@1
  bool result; // al@4
  unsigned int v7; // eax@5
  unsigned int v8; // ecx@6
  int v9; // eax@6
  CHAR *v10; // eax@13

  v2 = WideCharToMultiByte;
  v3 = this;
  v4 = WideCharToMultiByte(*this, 0, lpWideCharStr, -1, 0, 0, 0, 0);
  v5 = -1;
  if ( v4 > 0 )
    v5 = v4;
  if ( v5 == -1 )
  {
    result = 0;
  }
  else
  {
    v7 = v3[5];
    if ( v5 > v7 )
    {
      do
      {
        v8 = v3[5];
        v9 = 2 * v7;
        if ( v9 > v8 )
        {
          sub_10002130((int)(v3 + 1), v9 - v8, v3[5]);
        }
        else
        {
          v3[5] = v9;
          if ( v3[6] < 0x10 )
            *((_BYTE *)v3 + v9 + 4) = 0;
          else
            *(_BYTE *)(v3[1] + v9) = 0;
        }
        v7 = v3[5];
      }
      while ( v5 > v7 );
      v2 = WideCharToMultiByte;
    }
    v10 = (CHAR *)(v3 + 1);
    if ( v3[6] >= 0x10 )
      v10 = *(CHAR **)v10;
    result = v2(*v3, 0, lpWideCharStr, -1, v10, v3[5], 0, 0) > 0;
  }
  return result;
}

//----- (10006330) --------------------------------------------------------
void *__thiscall sub_10006330(void *this, char a2)
{
  signed int v2; // eax@1
  void *v3; // esi@1
  int v4; // ecx@3
  int v5; // eax@4
  unsigned int v6; // edx@6
  void *result; // eax@9

  v2 = 0;
  v3 = this;
  if ( a2 )
    v2 = 65001;
  v4 = (int)((char *)this + 4);
  *(_DWORD *)v3 = v2;
  *(_DWORD *)(v4 + 20) = 15;
  *(_DWORD *)(v4 + 16) = 0;
  if ( *((_DWORD *)v3 + 6) < 0x10u )
    v5 = (int)((char *)v3 + 4);
  else
    v5 = *(_DWORD *)v4;
  *(_BYTE *)v5 = 0;
  v6 = *((_DWORD *)v3 + 5);
  if ( v6 < 0x400 )
  {
    sub_10002130(v4, 1024 - v6, (int)((char *)v3 + 4));
    result = v3;
  }
  else
  {
    *((_DWORD *)v3 + 5) = 1024;
    if ( *((_DWORD *)v3 + 6) >= 0x10u )
      v4 = *(_DWORD *)v4;
    result = v3;
    *(_BYTE *)(v4 + 1024) = 0;
  }
  return result;
}

//----- (100063E0) --------------------------------------------------------
int __thiscall sub_100063E0(void *this, int a2)
{
  void *v2; // ebp@1
  void *v3; // edx@1
  void *v4; // esi@2
  int result; // eax@3
  int v6; // esi@3
  void **v7; // ebx@4
  LPVOID v8; // edx@4
  int v9; // eax@4
  int v10; // eax@6

  v2 = this;
  v3 = (void *)**(_DWORD **)a2;
  **(_DWORD **)a2 = *(_DWORD *)a2;
  *(_DWORD *)(*(_DWORD *)a2 + 4) = *(_DWORD *)a2;
  *(_DWORD *)(a2 + 4) = 0;
  if ( v3 != *(void **)a2 )
  {
    do
    {
      v4 = *(void **)v3;
      sub_1000F409(v3);
      v3 = v4;
    }
    while ( v4 != *(void **)a2 );
  }
  result = *((_DWORD *)v2 + 3);
  v6 = *(_DWORD *)result;
  if ( *(_DWORD *)result != result )
  {
    do
    {
      v7 = *(void ***)a2;
      v8 = sub_10006CB0(*(void **)a2, *(void **)(*(_DWORD *)a2 + 4), v6 + 16);
      v9 = *(_DWORD *)(a2 + 4);
      if ( (unsigned int)(214748363 - v9) < 1 )
        sub_1000DA74((int)"list<T> too long");
      *(_DWORD *)(a2 + 4) = v9 + 1;
      v7[1] = v8;
      result = *((_DWORD *)v8 + 1);
      *(_DWORD *)result = v8;
      if ( !*(_BYTE *)(v6 + 13) )
      {
        v10 = *(_DWORD *)(v6 + 8);
        if ( *(_BYTE *)(v10 + 13) )
        {
          for ( result = *(_DWORD *)(v6 + 4); !*(_BYTE *)(result + 13); result = *(_DWORD *)(result + 4) )
          {
            if ( v6 != *(_DWORD *)(result + 8) )
              break;
            v6 = result;
          }
          v6 = result;
        }
        else
        {
          v6 = *(_DWORD *)(v6 + 8);
          for ( result = *(_DWORD *)v10; !*(_BYTE *)(result + 13); result = *(_DWORD *)result )
            v6 = result;
        }
      }
    }
    while ( v6 != *((_DWORD *)v2 + 3) );
  }
  return result;
}

//----- (100064B0) --------------------------------------------------------
char __thiscall sub_100064B0(void *this, int a2, int a3)
{
  int v3; // ebx@1
  void *v4; // edi@1
  void *v5; // edx@1
  void *v6; // esi@2
  char result; // al@4
  int v8; // esi@5
  int v9; // edi@5
  int v10; // eax@6
  int v11; // ebp@6
  int v12; // esi@6
  int v13; // ebx@9
  LPVOID v14; // edx@9
  int v15; // eax@9
  int v16; // eax@12
  int j; // eax@13
  int i; // eax@16
  int v19; // [sp+Ch] [bp-Ch]@5
  int v20; // [sp+10h] [bp-8h]@5
  int v21; // [sp+14h] [bp-4h]@5

  v3 = a3;
  v4 = this;
  v5 = (void *)**(_DWORD **)a3;
  **(_DWORD **)a3 = *(_DWORD *)a3;
  *(_DWORD *)(*(_DWORD *)v3 + 4) = *(_DWORD *)v3;
  *(_DWORD *)(v3 + 4) = 0;
  if ( v5 != *(void **)v3 )
  {
    do
    {
      v6 = *(void **)v5;
      sub_1000F409(v5);
      v5 = v6;
    }
    while ( v6 != *(void **)v3 );
  }
  if ( a2
    && (v19 = a2,
        v8 = (int)((char *)v4 + 12),
        v20 = 0,
        v21 = 0,
        sub_10004DB0((char *)v4 + 12, (int)&a2, (int)&v19),
        v9 = a2,
        a2 != *(_DWORD *)v8) )
  {
    v10 = *(_DWORD *)(a2 + 28);
    v11 = 0;
    v12 = *(_DWORD *)v10;
    if ( *(_DWORD *)v10 != v10 )
    {
      do
      {
        if ( !v11 || sub_1002C672(v3, v9, v11, *(WCHAR **)(v12 + 16)) < 0 )
        {
          v13 = *(_DWORD *)v3;
          v14 = sub_10006CB0((void *)v13, *(void **)(v13 + 4), v12 + 16);
          v15 = *(_DWORD *)(a3 + 4);
          if ( (unsigned int)(214748363 - v15) < 1 )
            sub_1000DA74((int)"list<T> too long");
          *(_DWORD *)(a3 + 4) = v15 + 1;
          *(_DWORD *)(v13 + 4) = v14;
          v3 = a3;
          **((_DWORD **)v14 + 1) = v14;
          v11 = *(_DWORD *)(v12 + 16);
        }
        if ( !*(_BYTE *)(v12 + 13) )
        {
          v16 = *(_DWORD *)(v12 + 8);
          if ( *(_BYTE *)(v16 + 13) )
          {
            for ( i = *(_DWORD *)(v12 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
            {
              if ( v12 != *(_DWORD *)(i + 8) )
                break;
              v12 = i;
            }
            v12 = i;
          }
          else
          {
            v12 = *(_DWORD *)(v12 + 8);
            for ( j = *(_DWORD *)v16; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
              v12 = j;
          }
        }
      }
      while ( v12 != *(_DWORD *)(v9 + 28) );
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (100065F0) --------------------------------------------------------
char __thiscall sub_100065F0(int this, int a2, int a3, int a4)
{
  int v4; // ebx@1
  void *v5; // edx@1
  void *v6; // esi@2
  int v7; // esi@6
  int v8; // edi@6
  char result; // al@8
  int v10; // ecx@9
  int v11; // edx@9
  int i; // esi@10
  int v13; // eax@12
  void *v14; // esi@12
  LPVOID v15; // edx@12
  int v16; // eax@12
  int v17; // [sp+Ch] [bp-10h]@1
  int v18; // [sp+10h] [bp-Ch]@6
  int v19; // [sp+14h] [bp-8h]@6
  int v20; // [sp+18h] [bp-4h]@6

  v4 = a4;
  v17 = this;
  v5 = (void *)**(_DWORD **)a4;
  **(_DWORD **)a4 = *(_DWORD *)a4;
  *(_DWORD *)(*(_DWORD *)v4 + 4) = *(_DWORD *)v4;
  *(_DWORD *)(v4 + 4) = 0;
  if ( v5 != *(void **)v4 )
  {
    do
    {
      v6 = *(void **)v5;
      sub_1000F409(v5);
      v5 = v6;
    }
    while ( v6 != *(void **)v4 );
    this = v17;
  }
  if ( a2 && a3 )
  {
    v18 = a2;
    v7 = this + 12;
    v19 = 0;
    v20 = 0;
    sub_10004DB0((void *)(this + 12), (int)&a4, (int)&v18);
    v8 = a4;
    if ( a4 != *(_DWORD *)v7
      && (v18 = a3, v19 = 0, v20 = 0, sub_10004DB0((void *)(a4 + 28), (int)&a4, (int)&v18), a4 != *(_DWORD *)(v8 + 28)) )
    {
      v10 = *(_DWORD *)(a4 + 20);
      v11 = *(_DWORD *)(a4 + 24);
      v18 = *(_DWORD *)(a4 + 28);
      v19 = v10;
      v20 = v11;
      sub_10005AB0((void **)v4, (int)&v18);
      if ( *(_BYTE *)(v17 + 29) )
      {
        sub_10004E20(&a4);
        for ( i = a4; a4 != *(_DWORD *)(v8 + 28); i = a4 )
        {
          if ( sub_1002C672(v4, v8, a3, *(WCHAR **)(i + 16)) < 0 )
            break;
          v18 = *(_DWORD *)(i + 28);
          v19 = *(_DWORD *)(i + 20);
          v13 = *(_DWORD *)(i + 24);
          v14 = *(void **)v4;
          v20 = v13;
          v15 = sub_10006CB0(v14, *((void **)v14 + 1), (int)&v18);
          v16 = *(_DWORD *)(v4 + 4);
          if ( (unsigned int)(214748363 - v16) < 1 )
            sub_1000DA74((int)"list<T> too long");
          *(_DWORD *)(v4 + 4) = v16 + 1;
          *((_DWORD *)v14 + 1) = v15;
          **((_DWORD **)v15 + 1) = v15;
          sub_10004E20(&a4);
        }
      }
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10006780) --------------------------------------------------------
char __thiscall sub_10006780(void *this, int a2, unsigned int *a3, unsigned int *a4, int a5, int a6)
{
  _WORD *v6; // edx@3
  int v7; // ecx@3
  unsigned int v8; // eax@6
  int v9; // ecx@6
  int v10; // eax@10
  unsigned int v11; // edx@11
  int v12; // ecx@11
  unsigned int v13; // eax@14
  unsigned int v14; // ecx@15
  int v15; // eax@15
  unsigned int v16; // eax@19
  unsigned int v17; // edi@20
  int i; // edx@20
  int v19; // ecx@21
  unsigned int j; // eax@24
  int v21; // ecx@25
  unsigned int v23; // ecx@31
  int v24; // eax@31
  unsigned int v25; // eax@35
  unsigned int v26; // ecx@37
  int v27; // eax@37
  unsigned int v28; // edi@44
  int k; // edx@44
  int v30; // ecx@45
  unsigned int l; // edx@48
  int v32; // ecx@49
  int v33; // eax@49
  unsigned int v34; // ecx@55
  int v35; // eax@55
  int v36; // ecx@58
  int v37; // edi@58
  unsigned int m; // edx@62
  int v39; // ecx@63
  unsigned int v40; // ecx@67
  void *v41; // [sp+10h] [bp-4h]@1

  v41 = this;
  *(_DWORD *)a6 = 0;
  if ( !**(_WORD **)a2 )
    return 0;
  while ( 1 )
  {
    if ( **(_WORD **)a2 )
    {
      do
      {
        v6 = *(_WORD **)a2;
        v7 = **(_WORD **)a2;
        if ( v7 != 32 && !sub_10006D80(v7) )
          break;
        *(_DWORD *)a2 = v6 + 1;
      }
      while ( v6[1] );
    }
    v8 = *(_DWORD *)a2;
    v9 = **(_WORD **)a2;
    if ( !(_WORD)v9 )
      return 0;
    if ( v9 == 59 || v9 == 35 )
    {
      sub_10006E00(a2, a6, 0, 1);
      goto LABEL_42;
    }
    if ( v9 != 91 )
      break;
    v10 = v8 + 2;
    *(_DWORD *)a2 = v10;
    if ( *(_WORD *)v10 )
    {
      do
      {
        v11 = *(_DWORD *)a2;
        v12 = **(_WORD **)a2;
        if ( v12 != 32 && !sub_10006D80(v12) )
          break;
        *(_DWORD *)a2 = v11 + 2;
      }
      while ( *(_WORD *)(v11 + 2) );
    }
    v13 = *(_DWORD *)a2;
    *a3 = *(_DWORD *)a2;
    if ( *(_WORD *)v13 )
    {
      do
      {
        v14 = *(_DWORD *)a2;
        v15 = **(_WORD **)a2;
        if ( v15 == 93 )
          break;
        if ( v15 == 10 )
          break;
        if ( v15 == 13 )
          break;
        *(_DWORD *)a2 = v14 + 2;
      }
      while ( *(_WORD *)(v14 + 2) );
    }
    v16 = *(_DWORD *)a2;
    if ( **(_WORD **)a2 == 93 )
    {
      v17 = *a3;
      for ( i = v16 - 2; i >= v17; i -= 2 )
      {
        v19 = *(_WORD *)i;
        if ( v19 != 32 && !sub_10006D80(v19) )
          break;
      }
      *(_WORD *)(i + 2) = 0;
      *(_DWORD *)a2 += 2;
      for ( j = *(_DWORD *)a2; *(_WORD *)j; *(_DWORD *)a2 = j )
      {
        v21 = *(_WORD *)j;
        if ( v21 == 10 )
          break;
        if ( v21 == 13 )
          break;
        j += 2;
      }
      *a4 = 0;
      *(_DWORD *)a5 = 0;
      return 1;
    }
LABEL_42:
    if ( !**(_WORD **)a2 )
      return 0;
  }
  *a4 = v8;
  do
  {
    v23 = *(_DWORD *)a2;
    v24 = **(_WORD **)a2;
    if ( v24 == 61 )
      break;
    if ( v24 == 10 )
      break;
    if ( v24 == 13 )
      break;
    *(_DWORD *)a2 = v23 + 2;
  }
  while ( *(_WORD *)(v23 + 2) );
  v25 = *(_DWORD *)a2;
  if ( **(_WORD **)a2 != 61 )
    goto LABEL_42;
  if ( *a4 == v25 )
  {
    do
    {
      v26 = *(_DWORD *)a2;
      v27 = **(_WORD **)a2;
      if ( v27 == 10 )
        break;
      if ( v27 == 13 )
        break;
      *(_DWORD *)a2 = v26 + 2;
    }
    while ( *(_WORD *)(v26 + 2) );
    goto LABEL_42;
  }
  v28 = *a4;
  for ( k = v25 - 2; k >= v28; k -= 2 )
  {
    v30 = *(_WORD *)k;
    if ( v30 != 32 && !sub_10006D80(v30) )
      break;
  }
  *(_WORD *)(k + 2) = 0;
  *(_DWORD *)a2 += 2;
  for ( l = *(_DWORD *)a2; *(_WORD *)l; *(_DWORD *)a2 = l )
  {
    v32 = *(_WORD *)l;
    v33 = *(_WORD *)l;
    if ( v33 == 10 || v33 == 13 || v32 != 32 && !sub_10006D80(v32) )
      break;
    l += 2;
  }
  *(_DWORD *)a5 = *(_DWORD *)a2;
  if ( **(_WORD **)a2 )
  {
    do
    {
      v34 = *(_DWORD *)a2;
      v35 = **(_WORD **)a2;
      if ( v35 == 10 )
        break;
      if ( v35 == 13 )
        break;
      *(_DWORD *)a2 = v34 + 2;
    }
    while ( *(_WORD *)(v34 + 2) );
  }
  v36 = **(_WORD **)a2;
  v37 = *(_DWORD *)a2 - 2;
  if ( (_WORD)v36 )
  {
    if ( v36 == 13 )
      sub_10006D60((void *)a2);
    else
      *(_DWORD *)a2 += 2;
  }
  for ( m = *(_DWORD *)a5; v37 >= m; v37 -= 2 )
  {
    v39 = *(_WORD *)v37;
    if ( v39 != 32 && !sub_10006D80(v39) )
      break;
  }
  *(_WORD *)(v37 + 2) = 0;
  if ( !*((_BYTE *)v41 + 30) )
    return 1;
  v40 = *(_DWORD *)a5;
  if ( **(_WORD **)a5 != 60 || *(_WORD *)(v40 + 2) != 60 || *(_WORD *)(v40 + 4) != 60 )
    return 1;
  return sub_10006E00(a2, a5, *(_DWORD *)a5 + 6, 0);
}

//----- (10006A50) --------------------------------------------------------
char __stdcall sub_10006A50(int a1, int a2, LPCWSTR lpWideCharStr)
{
  const WCHAR *v3; // edi@1
  int *v4; // esi@2
  int v5; // ebx@5
  int v6; // ST0C_4@6
  int v7; // eax@6
  char result; // al@7

  v3 = lpWideCharStr;
  if ( *lpWideCharStr )
  {
    while ( 1 )
    {
      v4 = (int *)v3;
      if ( *v3 )
      {
        do
        {
          if ( *(_WORD *)v4 == 10 )
            break;
          v4 = (int *)((char *)v4 + 2);
        }
        while ( *(_WORD *)v4 );
      }
      v5 = *(_WORD *)v4;
      *(_WORD *)v4 = 0;
      if ( !sub_10006280((UINT *)a2, v3) )
        break;
      *(_WORD *)v4 = v5;
      v3 += (((char *)v4 - (char *)v3) >> 1) + 1;
      v6 = *(_DWORD *)(a1 + 4);
      v7 = sub_10006270(a2);
      sub_1002D3CD(v5, (int)v3, (const char *)v7, v6);
      sub_1002D3CD(v5, (int)v3, "\r\n", *(_DWORD *)(a1 + 4));
      if ( !(_WORD)v5 )
        goto LABEL_7;
    }
    result = 0;
  }
  else
  {
LABEL_7:
    result = 1;
  }
  return result;
}

//----- (10006AE0) --------------------------------------------------------
LPVOID __thiscall sub_10006AE0(void *this, int a2)
{
  LPVOID v2; // eax@1
  LPVOID v3; // esi@1
  int v5; // [sp+0h] [bp-28h]@1
  char *v6; // [sp+Ch] [bp-1Ch]@1
  char *v7; // [sp+10h] [bp-18h]@1
  LPVOID v8; // [sp+14h] [bp-14h]@1
  int *v9; // [sp+18h] [bp-10h]@1
  int v10; // [sp+24h] [bp-4h]@1

  v9 = &v5;
  v2 = sub_10006CF0(this);
  v3 = v2;
  v10 = 0;
  v8 = v2;
  *((_WORD *)v2 + 6) = 0;
  v7 = (char *)v2 + 16;
  v6 = (char *)v2 + 16;
  LOBYTE(v10) = 1;
  if ( v2 != (LPVOID)-16 )
  {
    *((_DWORD *)v2 + 4) = *(_DWORD *)a2;
    *((_DWORD *)v2 + 5) = *(_DWORD *)(a2 + 4);
    *((_DWORD *)v2 + 6) = *(_DWORD *)(a2 + 8);
    sub_10007680((int)((char *)v2 + 28), a2 + 12, (int)((char *)v2 + 28));
  }
  return v3;
}

//----- (10006B80) --------------------------------------------------------
int __thiscall sub_10006B80(int this, int a2, int a3, int a4, LPVOID lpMem)
{
  bool v5; // al@1
  int v6; // ebx@1
  int v7; // edi@1
  int v8; // esi@1
  int v9; // esi@7
  int v10; // eax@9
  int v11; // ecx@10
  int result; // eax@10
  int v13; // ecx@12
  LPVOID v14; // ebx@14
  int v15; // [sp+0h] [bp-28h]@1
  void *v16; // [sp+10h] [bp-18h]@1
  int v17; // [sp+14h] [bp-14h]@1
  int *v18; // [sp+18h] [bp-10h]@1
  int v19; // [sp+24h] [bp-4h]@1

  v19 = 0;
  v5 = 1;
  v6 = a4;
  v7 = *(_DWORD *)this;
  v18 = &v15;
  v16 = (void *)this;
  LOBYTE(v17) = 1;
  v8 = *(_DWORD *)(v7 + 4);
  if ( !*(_BYTE *)(v8 + 13) )
  {
    do
    {
      v7 = v8;
      v5 = sub_1002C672(v6, v8, *(_DWORD *)v6, *(WCHAR **)(v8 + 16)) < 0;
      LOBYTE(v17) = v5;
      if ( v5 )
        v8 = *(_DWORD *)v8;
      else
        v8 = *(_DWORD *)(v8 + 8);
    }
    while ( !*(_BYTE *)(v8 + 13) );
    this = (int)v16;
  }
  v9 = v7;
  a4 = v7;
  if ( v5 )
  {
    if ( v7 == **(_DWORD **)this )
    {
      v10 = sub_100070F0((void *)this, (int)&a4, 1, v7, this, lpMem);
LABEL_10:
      v11 = *(_DWORD *)v10;
      result = a2;
      *(_DWORD *)a2 = v11;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_10006DA0(&a4);
    v9 = a4;
  }
  if ( sub_1002C672(v6, v7, *(_DWORD *)(v9 + 16), *(WCHAR **)v6) < 0 )
  {
    v10 = sub_100070F0(v16, (int)&a4, v17, v7, v13, lpMem);
    goto LABEL_10;
  }
  v14 = lpMem;
  sub_10004E80((int)((char *)lpMem + 28), (int)&lpMem, **((LPVOID **)lpMem + 7), *((_DWORD *)lpMem + 7));
  sub_1000F409(*((LPVOID *)v14 + 7));
  sub_1000F409(v14);
  result = a2;
  *(_DWORD *)a2 = v9;
  *(_BYTE *)(a2 + 4) = 0;
  return result;
}

//----- (10006CB0) --------------------------------------------------------
LPVOID __stdcall sub_10006CB0(void *a1, void *a2, int a3)
{
  LPVOID result; // eax@1

  result = sub_100038A0(a1, a2);
  if ( result != (LPVOID)-8 )
  {
    *((_DWORD *)result + 2) = *(_DWORD *)a3;
    *((_DWORD *)result + 3) = *(_DWORD *)(a3 + 4);
    *((_DWORD *)result + 4) = *(_DWORD *)(a3 + 8);
  }
  return result;
}

//----- (10006CF0) --------------------------------------------------------
LPVOID __thiscall sub_10006CF0(void *this)
{
  void *v1; // edi@1
  LPVOID result; // eax@1

  v1 = this;
  result = sub_1000F0A6(0x24u);
  if ( result )
    *(_DWORD *)result = *(_DWORD *)v1;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = *(_DWORD *)v1;
  if ( result != (LPVOID)-8 )
    *((_DWORD *)result + 2) = *(_DWORD *)v1;
  return result;
}

//----- (10006D30) --------------------------------------------------------
int __stdcall sub_10006D30(LPVOID lpMem)
{
  LPVOID v1; // edi@1

  v1 = lpMem;
  sub_10004E80((int)((char *)lpMem + 28), (int)&lpMem, **((LPVOID **)lpMem + 7), *((_DWORD *)lpMem + 7));
  sub_1000F409(*((LPVOID *)v1 + 7));
  return sub_1000F409(v1);
}

//----- (10006D60) --------------------------------------------------------
int __thiscall sub_10006D60(void *this)
{
  int result; // eax@1

  result = *(_DWORD *)this;
  *(_DWORD *)this += 2 * (*(_WORD *)(*(_DWORD *)this + 2) == 10) + 2;
  return result;
}

//----- (10006D80) --------------------------------------------------------
bool __fastcall sub_10006D80(__int16 a1)
{
  return a1 == 9 || a1 == 13 || a1 == 10;
}

//----- (10006DA0) --------------------------------------------------------
void *__thiscall sub_10006DA0(void *this)
{
  void *v1; // edx@1
  int v2; // eax@1
  int i; // ecx@3
  int v5; // eax@4
  int v6; // ecx@5

  v1 = this;
  v2 = *(_DWORD *)this;
  if ( *(_BYTE *)(*(_DWORD *)this + 13) )
  {
    *(_DWORD *)this = *(_DWORD *)(v2 + 8);
    return this;
  }
  i = *(_DWORD *)v2;
  if ( *(_BYTE *)(*(_DWORD *)v2 + 13) )
  {
    for ( i = *(_DWORD *)(v2 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
    {
      if ( *(_DWORD *)v1 != *(_DWORD *)i )
        break;
      *(_DWORD *)v1 = i;
    }
    if ( *(_BYTE *)(*(_DWORD *)v1 + 13) )
      return v1;
    goto LABEL_11;
  }
  v5 = *(_DWORD *)(i + 8);
  if ( *(_BYTE *)(v5 + 13) )
  {
LABEL_11:
    *(_DWORD *)v1 = i;
    return v1;
  }
  do
  {
    v6 = v5;
    v5 = *(_DWORD *)(v5 + 8);
  }
  while ( !*(_BYTE *)(v5 + 13) );
  *(_DWORD *)v1 = v6;
  return v1;
}

//----- (10006E00) --------------------------------------------------------
char __stdcall sub_10006E00(int a1, int a2, int a3, char a4)
{
  int v4; // ebx@1
  int v5; // ebp@1
  int v6; // esi@1
  WCHAR *v7; // edx@2
  int v8; // edx@4
  int v9; // eax@4
  unsigned int v10; // esi@7
  int v11; // ecx@8
  int v12; // eax@8
  signed int v13; // eax@15
  int v14; // eax@18
  void *v15; // edi@21
  int v16; // edi@21
  int i; // ecx@21
  int v18; // edi@26
  int v19; // ecx@27
  int v20; // eax@27
  bool v21; // zf@29
  unsigned int v22; // esi@31
  int v23; // ecx@37
  int v24; // eax@37
  int v25; // ebp@37
  signed int v26; // eax@38
  int v27; // eax@42
  signed int v29; // eax@47
  int v30; // [sp+18h] [bp+4h]@1

  v4 = a1;
  v5 = *(_DWORD *)a1;
  *(_DWORD *)a2 = *(_DWORD *)a1;
  LOWORD(v6) = *(_WORD *)v5;
  v30 = *(_WORD *)v5;
  while ( 2 )
  {
    v7 = (WCHAR *)a3;
    while ( 1 )
    {
      if ( v7 )
        goto LABEL_26;
      v8 = *(_DWORD *)v4;
      v9 = **(_WORD **)v4;
      if ( v9 != 59 && v9 != 35 )
        break;
      v7 = (WCHAR *)a3;
LABEL_26:
      v18 = *(_DWORD *)v4;
      if ( **(_WORD **)v4 )
      {
        do
        {
          v19 = *(_DWORD *)v4;
          v20 = **(_WORD **)v4;
          if ( v20 == 10 )
            break;
          if ( v20 == 13 )
            break;
          v21 = *(_WORD *)(v19 + 2) == 0;
          *(_DWORD *)v4 = v19 + 2;
        }
        while ( !v21 );
      }
      if ( v5 < (unsigned int)v18 )
      {
        v22 = 2 * ((*(_DWORD *)v4 - v18) >> 1);
        sub_100260E0((void *)v5, (const void *)v18, v22);
        v7 = (WCHAR *)a3;
        *(_WORD *)(v22 + v5) = 0;
      }
      v6 = **(_WORD **)v4;
      v30 = **(_WORD **)v4;
      **(_WORD **)v4 = 0;
      if ( v7 )
      {
        if ( sub_1002C672(v4, v18, v5, v7) >= 0 && sub_1002C672(v4, v18, a3, (WCHAR *)v5) >= 0 )
          goto LABEL_42;
        v7 = (WCHAR *)a3;
      }
      if ( !(_WORD)v6 )
        return 1;
      v23 = *(_DWORD *)v4;
      v24 = (*(_DWORD *)v4 - v18) >> 1;
      **(_WORD **)v4 = v6;
      v25 = v5 + 2 * v24;
      if ( v6 != 13 || (v26 = 4, *(_WORD *)(v23 + 2) != 10) )
        v26 = 2;
      *(_DWORD *)v4 += v26;
      *(_WORD *)v25 = 10;
      v5 = v25 + 2;
    }
    if ( a4 )
    {
      v10 = 0;
      while ( 1 )
      {
        v11 = *(_WORD *)v8;
        v12 = *(_WORD *)v8;
        if ( v12 != 32 && v12 != 9 && v12 != 13 && v12 != 10 )
          break;
        if ( v11 != 10 && v11 != 13 || (++v10, v11 != 13) || (v13 = 4, *(_WORD *)(v8 + 2) != 10) )
          v13 = 2;
        v8 += v13;
      }
      v14 = *(_WORD *)v8;
      if ( v14 == 59 || v14 == 35 )
      {
        if ( (signed int)v10 > 0 )
        {
          v15 = (void *)v5;
          v5 += 2 * v10;
          memset32(v15, 655370, v10 >> 1);
          v16 = (int)((char *)v15 + 4 * (v10 >> 1));
          for ( i = v10 & 1; i; --i )
          {
            *(_WORD *)v16 = 10;
            v16 += 2;
          }
        }
        LOWORD(v6) = v30;
        *(_DWORD *)v4 = v8;
        continue;
      }
      LOWORD(v6) = v30;
    }
    break;
  }
LABEL_42:
  v27 = *(_DWORD *)v4;
  if ( *(_DWORD *)a2 == *(_DWORD *)v4 )
  {
    *(_DWORD *)a2 = 0;
    return 0;
  }
  *(_WORD *)(v5 - 2) = 0;
  if ( a3 && (_WORD)v6 )
  {
    *(_WORD *)v27 = v6;
    if ( (_WORD)v6 != 13 || (v21 = *(_WORD *)(v27 + 2) == 10, v29 = 4, !v21) )
      v29 = 2;
    *(_DWORD *)v4 += v29;
  }
  return 1;
}

//----- (10006FE0) --------------------------------------------------------
int __thiscall sub_10006FE0(void *this, int a2, int a3, int a4, int a5, unsigned int a6)
{
  int v6; // ebx@1
  int result; // eax@2
  unsigned int v8; // ebp@3
  int v9; // esi@3
  unsigned int v10; // ecx@3
  int v11; // ecx@6
  int v12; // edi@8
  int *v13; // eax@8
  int v14; // esi@8
  int v15; // eax@8
  int v16; // edi@8
  int v17; // ecx@9
  int v18; // edx@9
  bool v19; // cl@10
  bool v20; // sf@11
  int v21; // ecx@13
  int v22; // edx@16
  bool v23; // zf@19
  int v24; // [sp+10h] [bp+8h]@8

  v6 = (int)this;
  if ( a6 >= 2 )
  {
    v8 = a6 >> 1;
    v9 = a3;
    v10 = a6 >> 1;
    if ( a6 >> 1 )
    {
      do
      {
        v9 = *(_DWORD *)v9;
        --v10;
      }
      while ( (signed int)v10 > 0 );
    }
    if ( (v10 & 0x80000000) != 0 )
    {
      v11 = -v10;
      do
      {
        v9 = *(_DWORD *)(v9 + 4);
        --v11;
      }
      while ( v11 );
    }
    v12 = a5;
    v24 = *(_DWORD *)sub_10006FE0(&a5, a3, v9, a5, v8);
    v13 = (int *)sub_10006FE0(&a5, v9, a4, v12, a6 - v8);
    LOBYTE(a6) = 1;
    v14 = *v13;
    v15 = v24;
    v16 = v24;
    while ( 1 )
    {
      v17 = *(_DWORD *)(v14 + 16);
      v18 = *(_DWORD *)(v15 + 16);
      if ( v17 == v18 )
      {
        v20 = sub_1002C672(v6, v16, *(_DWORD *)(v14 + 8), *(WCHAR **)(v15 + 8)) < 0;
        v15 = v24;
        v19 = v20;
      }
      else
      {
        v19 = v17 < v18;
      }
      if ( v19 )
      {
        v21 = v14;
        if ( (_BYTE)a6 )
          v16 = v14;
        v14 = *(_DWORD *)v14;
        if ( v21 != *(_DWORD *)v6 )
        {
          v22 = *(_DWORD *)v21;
          if ( v15 != v21 && v15 != v22 )
          {
            sub_10007420(v6, v15, v6, v21, v22, v21);
            v15 = v24;
          }
        }
        v23 = v14 == a4;
      }
      else
      {
        v15 = *(_DWORD *)v15;
        v23 = v15 == v14;
        v24 = v15;
      }
      if ( v23 )
        break;
      LOBYTE(a6) = 0;
    }
    result = a2;
    *(_DWORD *)a2 = v16;
  }
  else
  {
    result = a2;
    *(_DWORD *)a2 = a3;
  }
  return result;
}

//----- (100070F0) --------------------------------------------------------
int __thiscall sub_100070F0(void *this, int a2, int a3, int a4, int a5, LPVOID lpMem)
{
  void *v6; // edi@1
  unsigned int v7; // eax@1
  LPVOID v8; // ebx@2
  int v9; // eax@2
  LPVOID v10; // esi@9
  int v11; // eax@10
  int v12; // edx@10
  int v13; // ecx@10
  int v14; // ecx@13
  int v15; // eax@17
  int v16; // ecx@21
  int v17; // edx@21
  int v18; // eax@21
  int v19; // eax@25
  int v20; // eax@36
  int result; // eax@42
  LPVOID v22; // edi@43

  v6 = this;
  v7 = *((_DWORD *)this + 1);
  if ( v7 >= 0x71C71C6 )
  {
    v22 = lpMem;
    sub_10004E80((int)((char *)lpMem + 28), (int)&a3, **((LPVOID **)lpMem + 7), *((_DWORD *)lpMem + 7));
    sub_1000F409(*((LPVOID *)v22 + 7));
    sub_1000F409(v22);
    sub_1000DA74((int)"map/set<T> too long");
  }
  v8 = lpMem;
  *((_DWORD *)this + 1) = v7 + 1;
  v9 = a4;
  *((_DWORD *)v8 + 1) = a4;
  if ( v9 == *(_DWORD *)this )
  {
    *(_DWORD *)(*(_DWORD *)this + 4) = v8;
    **(_DWORD **)this = v8;
    *(_DWORD *)(*(_DWORD *)this + 8) = v8;
  }
  else if ( (_BYTE)a3 )
  {
    *(_DWORD *)v9 = v8;
    if ( v9 == **(_DWORD **)this )
      **(_DWORD **)this = v8;
  }
  else
  {
    *(_DWORD *)(v9 + 8) = v8;
    if ( v9 == *(_DWORD *)(*(_DWORD *)this + 8) )
      *(_DWORD *)(*(_DWORD *)this + 8) = v8;
  }
  v10 = v8;
  while ( !*(_BYTE *)(*((_DWORD *)v10 + 1) + 12) )
  {
    v11 = *((_DWORD *)v10 + 1);
    v12 = *(_DWORD *)(v11 + 4);
    v13 = *(_DWORD *)v12;
    if ( v11 == *(_DWORD *)v12 )
    {
      v13 = *(_DWORD *)(v12 + 8);
      if ( *(_BYTE *)(v13 + 12) )
      {
        if ( v10 == *(LPVOID *)(v11 + 8) )
        {
          v10 = (LPVOID)*((_DWORD *)v10 + 1);
          v14 = *(_DWORD *)(v11 + 8);
          *(_DWORD *)(v11 + 8) = *(_DWORD *)v14;
          if ( !*(_BYTE *)(*(_DWORD *)v14 + 13) )
            *(_DWORD *)(*(_DWORD *)v14 + 4) = v11;
          *(_DWORD *)(v14 + 4) = *(_DWORD *)(v11 + 4);
          if ( v11 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
          {
            *(_DWORD *)(*(_DWORD *)v6 + 4) = v14;
          }
          else
          {
            v15 = *(_DWORD *)(v11 + 4);
            if ( v10 == *(LPVOID *)v15 )
              *(_DWORD *)v15 = v14;
            else
              *(_DWORD *)(v15 + 8) = v14;
          }
          *(_DWORD *)v14 = v10;
          *((_DWORD *)v10 + 1) = v14;
        }
        *(_BYTE *)(*((_DWORD *)v10 + 1) + 12) = 1;
        *(_BYTE *)(*(_DWORD *)(*((_DWORD *)v10 + 1) + 4) + 12) = 0;
        v16 = *(_DWORD *)(*((_DWORD *)v10 + 1) + 4);
        v17 = *(_DWORD *)v16;
        *(_DWORD *)v16 = *(_DWORD *)(*(_DWORD *)v16 + 8);
        v18 = *(_DWORD *)(v17 + 8);
        if ( !*(_BYTE *)(v18 + 13) )
          *(_DWORD *)(v18 + 4) = v16;
        *(_DWORD *)(v17 + 4) = *(_DWORD *)(v16 + 4);
        if ( v16 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v17;
          *(_DWORD *)(v17 + 8) = v16;
        }
        else
        {
          v19 = *(_DWORD *)(v16 + 4);
          if ( v16 == *(_DWORD *)(v19 + 8) )
          {
            *(_DWORD *)(v19 + 8) = v17;
            *(_DWORD *)(v17 + 8) = v16;
          }
          else
          {
            *(_DWORD *)v19 = v17;
            *(_DWORD *)(v17 + 8) = v16;
          }
        }
LABEL_40:
        *(_DWORD *)(v16 + 4) = v17;
        continue;
      }
    }
    else if ( *(_BYTE *)(v13 + 12) )
    {
      if ( v10 == *(LPVOID *)v11 )
      {
        v10 = (LPVOID)*((_DWORD *)v10 + 1);
        sub_10005680(v6, v11);
      }
      *(_BYTE *)(*((_DWORD *)v10 + 1) + 12) = 1;
      *(_BYTE *)(*(_DWORD *)(*((_DWORD *)v10 + 1) + 4) + 12) = 0;
      v16 = *(_DWORD *)(*((_DWORD *)v10 + 1) + 4);
      v17 = *(_DWORD *)(v16 + 8);
      *(_DWORD *)(v16 + 8) = *(_DWORD *)v17;
      if ( !*(_BYTE *)(*(_DWORD *)v17 + 13) )
        *(_DWORD *)(*(_DWORD *)v17 + 4) = v16;
      *(_DWORD *)(v17 + 4) = *(_DWORD *)(v16 + 4);
      if ( v16 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
      {
        *(_DWORD *)(*(_DWORD *)v6 + 4) = v17;
      }
      else
      {
        v20 = *(_DWORD *)(v16 + 4);
        if ( v16 == *(_DWORD *)v20 )
          *(_DWORD *)v20 = v17;
        else
          *(_DWORD *)(v20 + 8) = v17;
      }
      *(_DWORD *)v17 = v16;
      goto LABEL_40;
    }
    *(_BYTE *)(v11 + 12) = 1;
    *(_BYTE *)(v13 + 12) = 1;
    *(_BYTE *)(*(_DWORD *)(*((_DWORD *)v10 + 1) + 4) + 12) = 0;
    v10 = *(LPVOID *)(*((_DWORD *)v10 + 1) + 4);
  }
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)v6 + 4) + 12) = 1;
  result = a2;
  *(_DWORD *)a2 = v8;
  return result;
}

//----- (100072E0) --------------------------------------------------------
LPVOID __thiscall sub_100072E0(void *this, int a2)
{
  LPVOID result; // eax@1

  result = sub_100073E0(this);
  *((_WORD *)result + 6) = 0;
  if ( result != (LPVOID)-16 )
  {
    *((_DWORD *)result + 4) = *(_DWORD *)a2;
    *((_DWORD *)result + 5) = *(_DWORD *)(a2 + 4);
    *((_DWORD *)result + 6) = *(_DWORD *)(a2 + 8);
    *((_DWORD *)result + 7) = *(_DWORD *)(a2 + 12);
  }
  return result;
}

//----- (10007320) --------------------------------------------------------
int __thiscall sub_10007320(int this, int a2, int a3, int a4, LPVOID lpMem)
{
  void *v5; // eax@1
  int v6; // edi@1
  int v7; // esi@1
  int v8; // ebx@2
  int v9; // ecx@8
  int result; // eax@8
  int v11; // [sp+0h] [bp-28h]@1
  int v12; // [sp+10h] [bp-18h]@1
  char v13[4]; // [sp+14h] [bp-14h]@1
  int *v14; // [sp+18h] [bp-10h]@1
  int v15; // [sp+24h] [bp-4h]@1

  v5 = (void *)this;
  v15 = 0;
  v14 = &v11;
  v6 = *(_DWORD *)this;
  v12 = this;
  v13[0] = 1;
  v7 = *(_DWORD *)(v6 + 4);
  if ( !*(_BYTE *)(v7 + 13) )
  {
    v8 = a4;
    do
    {
      v6 = v7;
      v13[0] = sub_1002C672(v8, v7, *(_DWORD *)v8, *(WCHAR **)(v7 + 16)) < 0;
      if ( v13[0] )
        v7 = *(_DWORD *)v7;
      else
        v7 = *(_DWORD *)(v7 + 8);
    }
    while ( !*(_BYTE *)(v7 + 13) );
    v5 = (void *)v12;
  }
  v9 = *(_DWORD *)sub_100074A0(v5, (int)&a4, v13[0], v6, this, lpMem);
  result = a2;
  *(_DWORD *)a2 = v9;
  *(_BYTE *)(a2 + 4) = 1;
  return result;
}

//----- (100073E0) --------------------------------------------------------
LPVOID __thiscall sub_100073E0(void *this)
{
  void *v1; // edi@1
  LPVOID result; // eax@1

  v1 = this;
  result = sub_1000F0A6(0x20u);
  if ( result )
    *(_DWORD *)result = *(_DWORD *)v1;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = *(_DWORD *)v1;
  if ( result != (LPVOID)-8 )
    *((_DWORD *)result + 2) = *(_DWORD *)v1;
  return result;
}

//----- (10007420) --------------------------------------------------------
int __thiscall sub_10007420(int this, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // esi@2
  int v7; // edx@4
  int result; // eax@4

  if ( this != a3 )
  {
    v6 = *(_DWORD *)(this + 4);
    if ( (unsigned int)(214748363 - v6) < 1 )
      sub_1000DA74((int)"list<T> too long");
    *(_DWORD *)(this + 4) = v6 + 1;
    --*(_DWORD *)(a3 + 4);
  }
  **(_DWORD **)(a4 + 4) = a5;
  **(_DWORD **)(a5 + 4) = a2;
  **(_DWORD **)(a2 + 4) = a4;
  v7 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(a2 + 4) = *(_DWORD *)(a5 + 4);
  *(_DWORD *)(a5 + 4) = *(_DWORD *)(a4 + 4);
  result = a4;
  *(_DWORD *)(a4 + 4) = v7;
  return result;
}

//----- (100074A0) --------------------------------------------------------
int __thiscall sub_100074A0(void *this, int a2, char a3, int a4, int a5, LPVOID lpMem)
{
  void *v6; // edi@1
  unsigned int v7; // eax@1
  LPVOID v8; // esi@9
  int v9; // eax@10
  int v10; // edx@10
  int v11; // ecx@10
  int v12; // ecx@13
  int v13; // eax@17
  int v14; // ecx@21
  int v15; // edx@21
  int v16; // eax@21
  int v17; // eax@25
  int v18; // eax@36
  int result; // eax@42

  v6 = this;
  v7 = *((_DWORD *)this + 1);
  if ( v7 >= 0x7FFFFFE )
  {
    sub_1000F409(lpMem);
    sub_1000DA74((int)"map/set<T> too long");
  }
  *((_DWORD *)this + 1) = v7 + 1;
  *((_DWORD *)lpMem + 1) = a4;
  if ( a4 == *(_DWORD *)this )
  {
    *(_DWORD *)(*(_DWORD *)this + 4) = lpMem;
    **(_DWORD **)this = lpMem;
    *(_DWORD *)(*(_DWORD *)this + 8) = lpMem;
  }
  else if ( a3 )
  {
    *(_DWORD *)a4 = lpMem;
    if ( a4 == **(_DWORD **)this )
      **(_DWORD **)this = lpMem;
  }
  else
  {
    *(_DWORD *)(a4 + 8) = lpMem;
    if ( a4 == *(_DWORD *)(*(_DWORD *)this + 8) )
      *(_DWORD *)(*(_DWORD *)this + 8) = lpMem;
  }
  v8 = lpMem;
  while ( !*(_BYTE *)(*((_DWORD *)v8 + 1) + 12) )
  {
    v9 = *((_DWORD *)v8 + 1);
    v10 = *(_DWORD *)(v9 + 4);
    v11 = *(_DWORD *)v10;
    if ( v9 == *(_DWORD *)v10 )
    {
      v11 = *(_DWORD *)(v10 + 8);
      if ( *(_BYTE *)(v11 + 12) )
      {
        if ( v8 == *(LPVOID *)(v9 + 8) )
        {
          v8 = (LPVOID)*((_DWORD *)v8 + 1);
          v12 = *(_DWORD *)(v9 + 8);
          *(_DWORD *)(v9 + 8) = *(_DWORD *)v12;
          if ( !*(_BYTE *)(*(_DWORD *)v12 + 13) )
            *(_DWORD *)(*(_DWORD *)v12 + 4) = v9;
          *(_DWORD *)(v12 + 4) = *(_DWORD *)(v9 + 4);
          if ( v9 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
          {
            *(_DWORD *)(*(_DWORD *)v6 + 4) = v12;
          }
          else
          {
            v13 = *(_DWORD *)(v9 + 4);
            if ( v8 == *(LPVOID *)v13 )
              *(_DWORD *)v13 = v12;
            else
              *(_DWORD *)(v13 + 8) = v12;
          }
          *(_DWORD *)v12 = v8;
          *((_DWORD *)v8 + 1) = v12;
        }
        *(_BYTE *)(*((_DWORD *)v8 + 1) + 12) = 1;
        *(_BYTE *)(*(_DWORD *)(*((_DWORD *)v8 + 1) + 4) + 12) = 0;
        v14 = *(_DWORD *)(*((_DWORD *)v8 + 1) + 4);
        v15 = *(_DWORD *)v14;
        *(_DWORD *)v14 = *(_DWORD *)(*(_DWORD *)v14 + 8);
        v16 = *(_DWORD *)(v15 + 8);
        if ( !*(_BYTE *)(v16 + 13) )
          *(_DWORD *)(v16 + 4) = v14;
        *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
        {
          *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
          *(_DWORD *)(v15 + 8) = v14;
        }
        else
        {
          v17 = *(_DWORD *)(v14 + 4);
          if ( v14 == *(_DWORD *)(v17 + 8) )
          {
            *(_DWORD *)(v17 + 8) = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
          else
          {
            *(_DWORD *)v17 = v15;
            *(_DWORD *)(v15 + 8) = v14;
          }
        }
LABEL_40:
        *(_DWORD *)(v14 + 4) = v15;
        continue;
      }
    }
    else if ( *(_BYTE *)(v11 + 12) )
    {
      if ( v8 == *(LPVOID *)v9 )
      {
        v8 = (LPVOID)*((_DWORD *)v8 + 1);
        sub_10005680(v6, v9);
      }
      *(_BYTE *)(*((_DWORD *)v8 + 1) + 12) = 1;
      *(_BYTE *)(*(_DWORD *)(*((_DWORD *)v8 + 1) + 4) + 12) = 0;
      v14 = *(_DWORD *)(*((_DWORD *)v8 + 1) + 4);
      v15 = *(_DWORD *)(v14 + 8);
      *(_DWORD *)(v14 + 8) = *(_DWORD *)v15;
      if ( !*(_BYTE *)(*(_DWORD *)v15 + 13) )
        *(_DWORD *)(*(_DWORD *)v15 + 4) = v14;
      *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
      if ( v14 == *(_DWORD *)(*(_DWORD *)v6 + 4) )
      {
        *(_DWORD *)(*(_DWORD *)v6 + 4) = v15;
      }
      else
      {
        v18 = *(_DWORD *)(v14 + 4);
        if ( v14 == *(_DWORD *)v18 )
          *(_DWORD *)v18 = v15;
        else
          *(_DWORD *)(v18 + 8) = v15;
      }
      *(_DWORD *)v15 = v14;
      goto LABEL_40;
    }
    *(_BYTE *)(v9 + 12) = 1;
    *(_BYTE *)(v11 + 12) = 1;
    *(_BYTE *)(*(_DWORD *)(*((_DWORD *)v8 + 1) + 4) + 12) = 0;
    v8 = *(LPVOID *)(*((_DWORD *)v8 + 1) + 4);
  }
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)v6 + 4) + 12) = 1;
  result = a2;
  *(_DWORD *)a2 = lpMem;
  return result;
}

//----- (10007680) --------------------------------------------------------
void *__thiscall sub_10007680(int this, int a2, int a3)
{
  void *v3; // esi@1
  int v5; // [sp+0h] [bp-20h]@1
  int v6; // [sp+Ch] [bp-14h]@1
  int *v7; // [sp+10h] [bp-10h]@1
  int v8; // [sp+1Ch] [bp-4h]@1

  v3 = (void *)this;
  v6 = this;
  v7 = &v5;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = sub_10005650();
  v8 = 0;
  LOBYTE(v8) = 1;
  sub_10007710(v3, a2, a2);
  return v3;
}

//----- (10007710) --------------------------------------------------------
int __thiscall sub_10007710(void *this, int a2, int a3)
{
  void *v3; // ebx@1
  int v4; // esi@1
  int v5; // edx@1
  int v6; // ecx@1
  int i; // eax@2
  int v8; // ecx@4
  int result; // eax@4

  v3 = this;
  v4 = *(_DWORD *)this;
  *(_DWORD *)(v4 + 4) = sub_10007790(this, *(_DWORD *)(*(_DWORD *)a2 + 4), *(_DWORD *)this, a3);
  *((_DWORD *)v3 + 1) = *(_DWORD *)(a2 + 4);
  v5 = *(_DWORD *)v3;
  v6 = *(_DWORD *)(*(_DWORD *)v3 + 4);
  if ( *(_BYTE *)(v6 + 13) )
  {
    *(_DWORD *)v5 = v5;
    result = *(_DWORD *)v3;
    *(_DWORD *)(result + 8) = result;
  }
  else
  {
    for ( i = *(_DWORD *)v6; !*(_BYTE *)(i + 13); i = *(_DWORD *)i )
      v6 = i;
    *(_DWORD *)v5 = v6;
    v8 = *(_DWORD *)(*(_DWORD *)v3 + 4);
    for ( result = *(_DWORD *)(v8 + 8); !*(_BYTE *)(result + 13); result = *(_DWORD *)(result + 8) )
      v8 = result;
    *(_DWORD *)(*(_DWORD *)v3 + 8) = v8;
  }
  return result;
}

//----- (10007790) --------------------------------------------------------
LPVOID __thiscall sub_10007790(void *this, int a2, int a3, int a4)
{
  bool v4; // zf@1
  LPVOID v5; // edi@1
  LPVOID v6; // eax@2
  LPVOID v7; // ebx@2
  int v9; // [sp+0h] [bp-20h]@1
  void *v10; // [sp+Ch] [bp-14h]@1
  int *v11; // [sp+10h] [bp-10h]@1
  int v12; // [sp+1Ch] [bp-4h]@2

  v4 = *(_BYTE *)(a2 + 13) == 0;
  v11 = &v9;
  v5 = *(LPVOID *)this;
  v10 = this;
  if ( v4 )
  {
    v6 = sub_100072E0(this, a2 + 16);
    v7 = v6;
    *((_DWORD *)v6 + 1) = a3;
    *((_BYTE *)v6 + 12) = *(_BYTE *)(a2 + 12);
    v4 = *((_BYTE *)v5 + 13) == 0;
    v12 = 0;
    if ( !v4 )
      v5 = v6;
    *(_DWORD *)v6 = sub_10007790(*(_DWORD *)a2, v6, a4);
    *((_DWORD *)v7 + 2) = sub_10007790(*(_DWORD *)(a2 + 8), v7, a4);
  }
  return v5;
}

//----- (10007840) --------------------------------------------------------
int __stdcall sub_10007840(int a1, int a2, int a3, int (__thiscall *a4)(_DWORD))
{
  int v4; // esi@1
  int v5; // edi@2
  int result; // eax@3

  v4 = a3;
  if ( a3 )
  {
    v5 = a1;
    do
    {
      result = a4(v5);
      v5 += a2;
      --v4;
    }
    while ( v4 );
  }
  return result;
}

//----- (10007870) --------------------------------------------------------
int __thiscall sub_10007870(int this, int a2)
{
  int result; // eax@2

  switch ( a2 )
  {
    case 0:
      goto LABEL_4;
    case 1:
    case 3:
      goto LABEL_5;
    case 2:
    case 4:
    case 7:
      *(_DWORD *)(this + 16) = -1;
LABEL_4:
      *(_DWORD *)(this + 12) = 0;
LABEL_5:
      *(_DWORD *)(this + 8) = 0;
      goto LABEL_6;
    case 5:
LABEL_6:
      result = this;
      break;
    case 6:
      *(_DWORD *)(this + 12) = -1;
      result = this;
      *(_DWORD *)(this + 8) = 0;
      break;
  }
  return result;
}

//----- (100078D0) --------------------------------------------------------
int __thiscall sub_100078D0(LPCRITICAL_SECTION lpCriticalSection)
{
  int result; // eax@2

  if ( InitializeCriticalSectionEx(lpCriticalSection, 0, 0) )
  {
    result = 0;
  }
  else
  {
    result = GetLastError();
    if ( result > 0 )
      result = (unsigned __int16)result | 0x80070000;
  }
  return result;
}

//----- (10007900) --------------------------------------------------------
int __thiscall sub_10007900(void *this)
{
  int v1; // ecx@1
  int result; // eax@2

  v1 = *(_DWORD *)this;
  if ( v1 )
    result = (*(int (__stdcall **)(int))(*(_DWORD *)v1 + 8))(v1);
  return result;
}

//----- (10007940) --------------------------------------------------------
void *__thiscall sub_10007940(void *this, int a2, int a3)
{
  void *v3; // edi@1
  int v4; // ebx@1
  int v5; // ecx@1
  void *result; // eax@3
  int v7; // [sp+0h] [bp-28h]@0
  int v8; // [sp+4h] [bp-24h]@0
  char v9; // [sp+14h] [bp-14h]@3
  void *v10; // [sp+18h] [bp-10h]@1
  int v11; // [sp+24h] [bp-4h]@1

  v3 = this;
  v10 = this;
  v4 = (int)((char *)this + 4);
  *(_DWORD *)this = *(_DWORD *)a2;
  a2 = v4;
  *(_DWORD *)v4 = 0;
  *(_DWORD *)(v4 + 4) = 0;
  *(_DWORD *)v4 = sub_10007E00(v7, v8);
  v11 = 0;
  *((_DWORD *)v3 + 3) = 0;
  *((_DWORD *)v3 + 4) = 0;
  *((_DWORD *)v3 + 5) = 0;
  LOBYTE(v11) = 1;
  *(_DWORD *)v3 = 1065353216;
  if ( (unsigned int)((*((_DWORD *)v3 + 5) - *((_DWORD *)v3 + 3)) >> 2) < 0x10 )
    sub_10007B80((char *)v3 + 12, v5);
  a2 = *(_DWORD *)v4;
  *((_DWORD *)v3 + 4) = *((_DWORD *)v3 + 3);
  sub_10007BE0((int)((char *)v3 + 12), (int)&v9, *((_DWORD *)v3 + 3), v5, (int)&a2);
  result = v3;
  *((_DWORD *)v3 + 6) = 7;
  *((_DWORD *)v3 + 7) = 8;
  return result;
}

//----- (10007A10) --------------------------------------------------------
int __thiscall sub_10007A10(void *this, int a2, int a3)
{
  int v3; // ebx@1
  void *v4; // ebp@1
  bool v5; // cf@1
  int v6; // ecx@1
  int v7; // esi@2
  int v8; // edi@4
  int v9; // edx@4
  unsigned int v10; // ecx@4
  int v11; // eax@5
  int v12; // ecx@6
  int v13; // edx@6
  int v14; // ebp@6
  int v15; // eax@6
  int v16; // esi@6
  int v17; // ecx@6
  int v18; // ecx@8
  int v19; // edx@11
  int v20; // esi@12
  int v21; // ecx@14
  unsigned int v22; // ebp@16
  unsigned int v23; // edi@16
  bool j; // zf@18
  signed int v25; // ecx@20
  int v26; // edx@28
  unsigned int v27; // edi@32
  unsigned int v28; // esi@32
  bool k; // zf@34
  signed int v30; // ecx@36
  int result; // eax@41
  int v32; // [sp+10h] [bp-Ch]@6
  int v33; // [sp+14h] [bp-8h]@6
  int i; // [sp+18h] [bp-4h]@6
  unsigned int v35; // [sp+24h] [bp+8h]@1

  v3 = a3;
  v4 = this;
  v5 = *(_DWORD *)(a3 + 20) < 8u;
  v6 = *(_DWORD *)(a3 + 16);
  v35 = *(_DWORD *)(a3 + 16);
  if ( v5 )
    v7 = v3;
  else
    v7 = *(_DWORD *)v3;
  v8 = 2 * v6;
  v9 = -2128831035;
  v10 = 0;
  if ( v8 )
  {
    do
    {
      v11 = *(_BYTE *)(v7 + v10++);
      v9 = 16777619 * (v9 ^ v11);
    }
    while ( v10 < v8 );
  }
  v12 = v9 & *((_DWORD *)v4 + 6);
  v13 = *((_DWORD *)v4 + 3);
  v14 = *((_DWORD *)v4 + 1);
  v32 = v14;
  v15 = *(_DWORD *)(v13 + 8 * v12);
  v12 *= 2;
  v16 = *(_DWORD *)(v13 + 4 * v12);
  v33 = *(_DWORD *)(v13 + 4 * v12);
  v17 = v13 + 4 * (v12 + 1);
  for ( i = v17; ; v17 = i )
  {
    if ( v16 == v14 )
      v18 = v14;
    else
      v18 = **(_DWORD **)v17;
    if ( v15 == v18 )
    {
      result = a2;
      *(_DWORD *)a2 = v14;
      return result;
    }
    v19 = v15 + 8;
    if ( *(_DWORD *)(v3 + 20) < 8u )
      v20 = v3;
    else
      v20 = *(_DWORD *)v3;
    v21 = v15 + 24;
    if ( *(_DWORD *)(v15 + 28) >= 8u )
      v19 = *(_DWORD *)v19;
    v22 = *(_DWORD *)v21;
    v23 = v35;
    if ( *(_DWORD *)v21 < v35 )
      v23 = *(_DWORD *)v21;
    for ( j = v23 == 0; ; j = v23 == 0 )
    {
      if ( j )
      {
        v25 = 0;
        goto LABEL_21;
      }
      if ( *(_WORD *)v19 != *(_WORD *)v20 )
        break;
      v19 += 2;
      v20 += 2;
      --v23;
    }
    v25 = *(_WORD *)v19 < *(_WORD *)v20 ? -1 : 1;
LABEL_21:
    if ( !v25 && v22 >= v35 && v22 <= v35 )
      break;
    v15 = *(_DWORD *)v15;
    v14 = v32;
    v16 = v33;
  }
  v26 = v15 + 8;
  if ( *(_DWORD *)(v15 + 28) >= 8u )
    v26 = *(_DWORD *)v26;
  if ( *(_DWORD *)(v3 + 20) >= 8u )
    v3 = *(_DWORD *)v3;
  v27 = *(_DWORD *)(v15 + 24);
  v28 = *(_DWORD *)(v15 + 24);
  if ( v35 < v27 )
    v28 = v35;
  for ( k = v28 == 0; ; k = v28 == 0 )
  {
    if ( k )
    {
      v30 = 0;
      goto LABEL_37;
    }
    if ( *(_WORD *)v3 != *(_WORD *)v26 )
      break;
    v3 += 2;
    v26 += 2;
    --v28;
  }
  v30 = *(_WORD *)v3 < *(_WORD *)v26 ? -1 : 1;
LABEL_37:
  if ( v30 || v35 < v27 || v35 > v27 )
    v15 = v32;
  *(_DWORD *)a2 = v15;
  return a2;
}

//----- (10007B80) --------------------------------------------------------
int __thiscall sub_10007B80(void *this, int a2)
{
  void *v2; // esi@1
  int v3; // edi@1
  int v4; // ebx@1
  int result; // eax@3

  v2 = this;
  v3 = (int)sub_1000F0A6(0x40u);
  sub_100038D0(*((_DWORD *)v2 + 1), *(_DWORD *)v2, v3);
  v4 = (*((_DWORD *)v2 + 1) - *(_DWORD *)v2) >> 2;
  if ( *(_DWORD *)v2 )
    sub_10002AD0(v4, v3, *(LPVOID *)v2, (*((_DWORD *)v2 + 2) - *(_DWORD *)v2) >> 2);
  *((_DWORD *)v2 + 2) = v3 + 64;
  result = v3 + 4 * v4;
  *((_DWORD *)v2 + 1) = result;
  *(_DWORD *)v2 = v3;
  return result;
}

//----- (10007BE0) --------------------------------------------------------
int __thiscall sub_10007BE0(int this, int a2, unsigned int a3, int a4, int a5)
{
  int v5; // edi@1
  unsigned int v6; // edx@1
  int v7; // esi@1
  int v8; // ebx@1
  int v9; // edx@2
  unsigned int v10; // edx@3
  int v11; // ebp@3
  int v12; // ecx@3
  int v13; // ebp@7
  int v14; // esi@7
  int v15; // esi@7
  int result; // eax@9
  int v17; // edx@12
  unsigned int v18; // [sp+10h] [bp-4h]@7

  v5 = this;
  v6 = *(_DWORD *)(this + 4);
  v7 = *(_DWORD *)this;
  v8 = (signed int)(a3 - *(_DWORD *)this) >> 2;
  if ( (unsigned int)((signed int)(*(_DWORD *)(this + 8) - v6) >> 2) >= 0x10 )
  {
    a5 = *(_DWORD *)a5;
    if ( (unsigned int)((signed int)(v6 - a3) >> 2) >= 0x10 )
    {
      *(_DWORD *)(this + 4) = sub_100038D0(v6, v6 - 64, v6);
      sub_100260E0((void *)(v17 - (v17 - a3 - 64)), (const void *)a3, v17 - a3 - 64);
      sub_100037B0(a3 + 64, a3, (int)&a5);
      result = a2;
      *(_DWORD *)a2 = *(_DWORD *)v5 + 4 * v8;
    }
    else
    {
      sub_100038D0(v6, a3, a3 + 64);
      sub_10003840(16 - ((signed int)(*(_DWORD *)(v5 + 4) - a3) >> 2), *(_DWORD *)(v5 + 4), (int)&a5);
      *(_DWORD *)(v5 + 4) += 64;
      sub_100037B0(*(_DWORD *)(v5 + 4) - 64, a3, (int)&a5);
      result = a2;
      *(_DWORD *)a2 = *(_DWORD *)v5 + 4 * v8;
    }
  }
  else
  {
    v9 = (signed int)(v6 - v7) >> 2;
    if ( (unsigned int)(0x3FFFFFFF - v9) < 0x10 )
      sub_1000DA74((int)"vector<T> too long");
    v10 = v9 + 16;
    v11 = (*(_DWORD *)(this + 8) - v7) >> 2;
    v12 = 0;
    if ( 0x3FFFFFFF - ((unsigned int)v11 >> 1) >= v11 )
      v12 = v11 + ((unsigned int)v11 >> 1);
    if ( v12 >= v10 )
      v10 = v12;
    v18 = v10;
    v13 = (int)sub_10003560(v10);
    v14 = 4 * ((signed int)(a3 - *(_DWORD *)v5) >> 2);
    sub_10003840(16, v14 + v13, a5);
    sub_100038D0(a3, *(_DWORD *)v5, v13);
    sub_100038D0(*(_DWORD *)(v5 + 4), a3, v13 + v14 + 64);
    v15 = (*(_DWORD *)(v5 + 4) - *(_DWORD *)v5) >> 2;
    if ( *(_DWORD *)v5 )
      sub_10002AD0(v8, v5, *(LPVOID *)v5, (*(_DWORD *)(v5 + 8) - *(_DWORD *)v5) >> 2);
    *(_DWORD *)(v5 + 8) = v13 + 4 * v18;
    *(_DWORD *)(v5 + 4) = v13 + 4 * v15 + 64;
    *(_DWORD *)v5 = v13;
    result = a2;
    *(_DWORD *)a2 = v13 + 4 * v8;
  }
  return result;
}

//----- (10007DD0) --------------------------------------------------------
LPVOID __stdcall sub_10007DD0(void *a1, void *a2)
{
  LPVOID result; // eax@1
  LPVOID v3; // ecx@1
  LPVOID v4; // edx@2

  result = sub_1000F0A6(0x10u);
  v3 = a1;
  if ( a1 )
  {
    v4 = a2;
  }
  else
  {
    v3 = result;
    v4 = result;
  }
  if ( result )
    *(_DWORD *)result = v3;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = v4;
  return result;
}

//----- (10007E00) --------------------------------------------------------
LPVOID __stdcall sub_10007E00(int a1, int a2)
{
  LPVOID result; // eax@1

  result = sub_1000F0A6(0x18u);
  if ( result )
    *(_DWORD *)result = result;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = result;
  return result;
}

//----- (10007E20) --------------------------------------------------------
LPVOID __stdcall sub_10007E20(void *a1, void *a2)
{
  LPVOID result; // eax@1
  LPVOID v3; // ecx@1
  LPVOID v4; // edx@2

  result = sub_1000F0A6(0x2Cu);
  v3 = a1;
  if ( a1 )
  {
    v4 = a2;
  }
  else
  {
    v3 = result;
    v4 = result;
  }
  if ( result )
    *(_DWORD *)result = v3;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = v4;
  return result;
}

//----- (10007E50) --------------------------------------------------------
int __thiscall sub_10007E50(int this, int a2, int a3, int *a4, int a5)
{
  int v5; // edi@1
  void **v6; // eax@1
  void *v7; // esi@1
  LPVOID v8; // edx@1
  int v9; // eax@1

  v5 = this;
  v6 = *(void ***)(this + 4);
  v7 = *v6;
  v8 = sub_100082E0(*v6, *((void **)*v6 + 1), this, a4, this);
  v9 = *(_DWORD *)(v5 + 8);
  if ( (unsigned int)(97612892 - v9) < 1 )
    sub_1000DA74((int)"list<T> too long");
  *(_DWORD *)(v5 + 8) = v9 + 1;
  *((_DWORD *)v7 + 1) = v8;
  **((_DWORD **)v8 + 1) = v8;
  sub_10007F10((void *)v5, a2, **(_DWORD **)(v5 + 4) + 8, **(LPVOID **)(v5 + 4));
  return a2;
}

//----- (10007EB0) --------------------------------------------------------
int __thiscall sub_10007EB0(int this, int a2, int a3, int a4, int a5)
{
  int v5; // edi@1
  void **v6; // eax@1
  void *v7; // esi@1
  LPVOID v8; // edx@1
  int v9; // eax@1

  v5 = this;
  v6 = *(void ***)(this + 4);
  v7 = *v6;
  v8 = sub_10008330(*v6, *((void **)*v6 + 1), this, a4, this);
  v9 = *(_DWORD *)(v5 + 8);
  if ( (unsigned int)(268435454 - v9) < 1 )
    sub_1000DA74((int)"list<T> too long");
  *(_DWORD *)(v5 + 8) = v9 + 1;
  *((_DWORD *)v7 + 1) = v8;
  **((_DWORD **)v8 + 1) = v8;
  sub_10003050(v5, a2, **(_DWORD **)(v5 + 4) + 8, **(LPVOID **)(v5 + 4));
  return a2;
}

//----- (10007F10) --------------------------------------------------------
int __thiscall sub_10007F10(void *this, int a2, int a3, LPVOID lpMem)
{
  int v4; // ebx@1
  int v5; // esi@2
  unsigned int v6; // ecx@4
  int v7; // edx@4
  int v8; // eax@5
  int v9; // ebx@6
  int v10; // edi@6
  int v11; // ecx@6
  int v12; // eax@6
  int v13; // edi@7
  bool v14; // cf@10
  int v15; // ecx@10
  int v16; // esi@13
  unsigned int v17; // ebx@15
  bool i; // zf@17
  signed int v19; // ecx@19
  unsigned int v20; // ebx@21
  int v21; // eax@25
  int v22; // edx@26
  int v23; // edx@27
  int v24; // ecx@27
  LPVOID v25; // esi@32
  unsigned int v26; // eax@32
  int result; // eax@36
  void *v28; // eax@39
  int v29; // [sp+0h] [bp-30h]@1
  int v30; // [sp+Ch] [bp-24h]@6
  int v31; // [sp+10h] [bp-20h]@10
  int v32; // [sp+14h] [bp-1Ch]@6
  unsigned int v33; // [sp+18h] [bp-18h]@1
  int v34; // [sp+1Ch] [bp-14h]@1
  int *v35; // [sp+20h] [bp-10h]@1
  int v36; // [sp+2Ch] [bp-4h]@1

  v36 = 0;
  v34 = (int)this;
  v4 = *(_DWORD *)(a3 + 16);
  v33 = *(_DWORD *)(a3 + 20);
  v35 = &v29;
  if ( v33 < 8 )
    v5 = a3;
  else
    v5 = *(_DWORD *)a3;
  v6 = 0;
  v7 = -2128831035;
  if ( 2 * v4 )
  {
    do
    {
      v8 = *(_BYTE *)(v5 + v6++);
      v7 = 16777619 * (v7 ^ v8);
    }
    while ( v6 < 2 * v4 );
  }
  v9 = v34;
  v10 = *(_DWORD *)(v34 + 12);
  v11 = 8 * (v7 & *(_DWORD *)(v34 + 24));
  v12 = *(_DWORD *)(v10 + v11);
  v30 = 8 * (v7 & *(_DWORD *)(v34 + 24));
  v32 = v12;
  if ( v12 == *(_DWORD *)(v34 + 4) )
    v13 = *(_DWORD *)(v34 + 4);
  else
    v13 = **(_DWORD **)(v10 + v11 + 4);
  if ( v13 == v12 )
  {
LABEL_25:
    v21 = *(_DWORD *)lpMem;
    if ( v13 != *(_DWORD *)lpMem )
    {
      **((_DWORD **)lpMem + 1) = v21;
      **(_DWORD **)(v21 + 4) = v13;
      **(_DWORD **)(v13 + 4) = lpMem;
      v22 = *(_DWORD *)(v13 + 4);
      *(_DWORD *)(v13 + 4) = *(_DWORD *)(v21 + 4);
      *(_DWORD *)(v21 + 4) = *((_DWORD *)lpMem + 1);
      *((_DWORD *)lpMem + 1) = v22;
    }
    v23 = v30;
    v24 = v30 + *(_DWORD *)(v9 + 12);
    if ( *(_DWORD *)v24 == *(_DWORD *)(v9 + 4) )
    {
      *(_DWORD *)v24 = lpMem;
      *(_DWORD *)(*(_DWORD *)(v9 + 12) + v23 + 4) = lpMem;
    }
    else if ( *(_DWORD *)v24 == v13 )
    {
      *(_DWORD *)v24 = lpMem;
    }
    else
    {
      v28 = (void *)**(_DWORD **)(v24 + 4);
      *(_DWORD *)(v24 + 4) = v28;
      if ( v28 != lpMem )
        *(_DWORD *)(*(_DWORD *)(v9 + 12) + v23 + 4) = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v9 + 12) + v23 + 4) + 4);
    }
    v36 = 2;
    sub_10008140(v9);
    result = a2;
    *(_DWORD *)a2 = lpMem;
    *(_BYTE *)(a2 + 4) = 1;
  }
  else
  {
    while ( 1 )
    {
      v13 = *(_DWORD *)(v13 + 4);
      v14 = *(_DWORD *)(v13 + 28) < 8u;
      v15 = v13 + 8;
      v31 = v13 + 24;
      if ( !v14 )
        v15 = *(_DWORD *)v15;
      if ( v33 < 8 )
        v16 = a3;
      else
        v16 = *(_DWORD *)a3;
      v17 = *(_DWORD *)(v13 + 24);
      if ( *(_DWORD *)(a3 + 16) < v17 )
        v17 = *(_DWORD *)(a3 + 16);
      for ( i = v17 == 0; ; i = v17 == 0 )
      {
        if ( i )
        {
          v19 = 0;
          goto LABEL_20;
        }
        if ( *(_WORD *)v16 != *(_WORD *)v15 )
          break;
        v16 += 2;
        v15 += 2;
        --v17;
      }
      v19 = *(_WORD *)v16 < *(_WORD *)v15 ? -1 : 1;
LABEL_20:
      if ( !v19 )
      {
        v20 = *(_DWORD *)(a3 + 16);
        if ( v20 >= *(_DWORD *)v31 && v20 <= *(_DWORD *)v31 )
          break;
      }
      if ( v13 == v32 )
      {
        v9 = v34;
        goto LABEL_25;
      }
    }
    v25 = (char *)lpMem + 8;
    **((_DWORD **)lpMem + 1) = *(_DWORD *)lpMem;
    *(_DWORD *)(*(_DWORD *)lpMem + 4) = *((_DWORD *)lpMem + 1);
    --*(_DWORD *)(v34 + 8);
    v26 = *((_DWORD *)lpMem + 7);
    if ( v26 >= 8 )
      sub_10001E40((int)lpMem, v13, *(LPVOID *)v25, v26 + 1);
    *((_DWORD *)lpMem + 7) = 7;
    v14 = *((_DWORD *)lpMem + 7) < 8u;
    *((_DWORD *)lpMem + 6) = 0;
    if ( !v14 )
      v25 = *(LPVOID *)v25;
    *(_WORD *)v25 = 0;
    sub_1000F409(lpMem);
    result = a2;
    *(_DWORD *)a2 = v13;
    *(_BYTE *)(a2 + 4) = 0;
  }
  return result;
}

//----- (10008140) --------------------------------------------------------
int __fastcall sub_10008140(int a1)
{
  int v1; // ebx@1
  unsigned int v2; // eax@1
  int v3; // ecx@1
  __m128d v4; // xmm0@1
  int result; // eax@1
  float v6; // xmm1_4@1
  __m128d v7; // xmm0@1
  int v8; // edi@6
  void *v9; // edi@7
  void *v10; // esi@8
  int v11; // [sp+4h] [bp-8h]@8

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 8);
  v3 = *(_DWORD *)(a1 + 28);
  v4 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v2);
  v4.m128d_f64[0] = v4.m128d_f64[0] + *(double *)&qword_1006EEC0[v2 >> 31];
  result = (unsigned int)v3 >> 31;
  LODWORD(v6) = (unsigned __int128)_mm_cvtpd_ps(v4);
  v7 = (__m128d)COERCE_UNSIGNED_INT64((double)v3);
  v7.m128d_f64[0] = v7.m128d_f64[0] + *(double *)&qword_1006EEC0[(unsigned int)v3 >> 31];
  if ( (float)(v6 / COERCE_FLOAT(_mm_cvtpd_ps(v7))) > *(float *)v1 )
  {
    if ( (unsigned int)v3 >= 0x200 )
    {
      if ( (unsigned int)v3 < 0x1FFFFFFF )
        v3 *= 2;
    }
    else
    {
      v3 *= 8;
    }
    result = sub_10003450(v1, v3);
    v8 = *(_DWORD *)(v1 + 4);
    if ( *(_DWORD *)v8 != v8 )
    {
      v9 = *(void **)(v8 + 4);
      do
      {
        v10 = (void *)**(_DWORD **)(v1 + 4);
        result = sub_10007F10((void *)v1, (int)&v11, (int)((char *)v10 + 8), v10);
      }
      while ( v10 != v9 );
    }
  }
  return result;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];

//----- (100081E0) --------------------------------------------------------
int __thiscall sub_100081E0(void *this, int a2, char *lpMem)
{
  LPVOID v3; // eax@1
  char *v4; // esi@1
  void *v5; // ebp@1
  unsigned int v6; // edx@3
  int v7; // edi@3
  int v8; // ebx@3
  int v9; // ecx@4
  int v10; // edx@5
  int v11; // ecx@5

  v3 = lpMem;
  v4 = lpMem + 8;
  v5 = this;
  if ( *((_DWORD *)lpMem + 7) >= 8u )
    v4 = *(char **)v4;
  v6 = 0;
  v7 = -2128831035;
  v8 = 2 * *((_DWORD *)lpMem + 6);
  if ( v8 )
  {
    do
    {
      v9 = (unsigned __int8)v4[v6++];
      v7 = 16777619 * (v7 ^ v9);
    }
    while ( v6 < v8 );
  }
  v10 = 8 * (v7 & *((_DWORD *)v5 + 6));
  v11 = v10 + *((_DWORD *)v5 + 3);
  if ( *(char **)(v11 + 4) == lpMem )
  {
    if ( *(char **)v11 == lpMem )
    {
      *(_DWORD *)v11 = *((_DWORD *)v5 + 1);
      *(_DWORD *)(v10 + *((_DWORD *)v5 + 3) + 4) = *((_DWORD *)v5 + 1);
    }
    else
    {
      *(_DWORD *)(v11 + 4) = *((_DWORD *)lpMem + 1);
    }
    goto LABEL_11;
  }
  if ( *(char **)v11 == lpMem )
  {
    *(_DWORD *)v11 = *(_DWORD *)lpMem;
LABEL_11:
    v3 = lpMem;
  }
  sub_10008270((int)((char *)v5 + 4), v8, a2, v3);
  return a2;
}

//----- (10008270) --------------------------------------------------------
int __userpurge sub_10008270@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, LPVOID lpMem)
{
  LPVOID v4; // esi@1
  LPVOID *v5; // edi@1
  unsigned int v6; // eax@1
  bool v7; // cf@3
  int result; // eax@5
  LPVOID lpMema; // [sp+10h] [bp+8h]@1

  v4 = lpMem;
  lpMema = *(LPVOID *)lpMem;
  **((_DWORD **)v4 + 1) = *(_DWORD *)v4;
  *(_DWORD *)(*(_DWORD *)v4 + 4) = *((_DWORD *)v4 + 1);
  --*(_DWORD *)(a1 + 4);
  v5 = (LPVOID *)((char *)v4 + 8);
  v6 = *((_DWORD *)v4 + 7);
  if ( v6 >= 8 )
    sub_10001E40(a2, (int)v5, *v5, v6 + 1);
  *((_DWORD *)v4 + 7) = 7;
  v7 = *((_DWORD *)v4 + 7) < 8u;
  *((_DWORD *)v4 + 6) = 0;
  if ( !v7 )
    v5 = (LPVOID *)*v5;
  *(_WORD *)v5 = 0;
  sub_1000F409(v4);
  result = a3;
  *(_DWORD *)a3 = lpMema;
  return result;
}

//----- (100082E0) --------------------------------------------------------
LPVOID __stdcall sub_100082E0(void *a1, void *a2, int a3, int *a4, int a5)
{
  LPVOID result; // eax@1
  LPVOID v6; // edi@1
  int v7; // esi@1
  int v8; // ST04_4@2

  result = sub_10007E20(a1, a2);
  v6 = result;
  v7 = (int)((char *)result + 8);
  if ( result != (LPVOID)-8 )
  {
    v8 = *a4;
    *((_DWORD *)result + 7) = 7;
    *((_DWORD *)result + 6) = 0;
    *(_WORD *)v7 = 0;
    sub_100018C0((void *)v7, v8);
    result = v6;
    _mm_storel_epi64((__m128i *)(v7 + 24), 0i64);
    *(_DWORD *)(v7 + 32) = 0;
  }
  return result;
}

//----- (10008330) --------------------------------------------------------
LPVOID __stdcall sub_10008330(void *a1, void *a2, int a3, int a4, int a5)
{
  LPVOID result; // eax@1

  result = sub_10007DD0(a1, a2);
  if ( result != (LPVOID)-8 )
  {
    *((_DWORD *)result + 2) = **(_DWORD **)a4;
    *((_DWORD *)result + 3) = 0;
  }
  return result;
}

//----- (10008360) --------------------------------------------------------
int __cdecl sub_10008360(unsigned __int64 a1)
{
  int v1; // ecx@0
  int v2; // esi@1

  v2 = v1;
  sub_10008DF0(a1);
  return v2;
}

//----- (10008390) --------------------------------------------------------
void __usercall sub_10008390(int a1@<ecx>, __m128 a2@<xmm0>)
{
  __m128 v2; // xmm0@1

  v2 = _mm_add_ps(
         _mm_add_ps(
           _mm_mul_ps(_mm_shuffle_ps(a2, a2, -86), *(__m128 *)(a1 + 32)),
           _mm_mul_ps(_mm_shuffle_ps(a2, a2, 0), *(__m128 *)a1)),
         _mm_add_ps(
           _mm_mul_ps(_mm_shuffle_ps(a2, a2, -1), *(__m128 *)(a1 + 48)),
           _mm_mul_ps(_mm_shuffle_ps(a2, a2, 85), *(__m128 *)(a1 + 16))));
}

//----- (10008490) --------------------------------------------------------
void sub_10008490()
{
  ;
}

//----- (10008670) --------------------------------------------------------
void sub_10008670()
{
  ;
}

//----- (10008760) --------------------------------------------------------
int __thiscall sub_10008760(int this, int a2, int a3, int a4, int a5)
{
  int v5; // esi@1
  int v6; // ebx@1
  int v7; // eax@1

  v5 = this;
  v6 = this + 4;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  v7 = (*(int (__stdcall **)(_DWORD, int, int, int))(**(_DWORD **)(a2 + 4) + 20))(*(_DWORD *)(a2 + 4), a3, a5, this);
  sub_100410C0(a2, v6, v7, L"Failed create texture");
  if ( *(_DWORD *)v5 && a4 )
    (*(void (__stdcall **)(_DWORD, _DWORD, int, int))(**(_DWORD **)(a2 + 4) + 28))(
      *(_DWORD *)(a2 + 4),
      *(_DWORD *)v5,
      a4,
      v6);
  return v5;
}
// 1006DD2C: using guessed type wchar_t aFailedCreateTe[22];

//----- (100087E0) --------------------------------------------------------
int __stdcall sub_100087E0(int a1, int a2)
{
  int v2; // ecx@1
  int result; // eax@2

  v2 = a1 & 0x1FFFFFFF;
  if ( (a1 & 0x1FFFFFFFu) - 352321536 > 0xFF )
  {
    if ( (unsigned int)(v2 - 436207616) > 0x13F )
    {
      if ( (unsigned int)(v2 - 436208000) > 0x3F )
      {
        result = v2 - 436208128;
        if ( (unsigned int)(v2 - 436208128) <= 0x3F )
        {
          result = a2;
          *(_DWORD *)((v2 & 0x3F) + dword_1007CDB4 + 1604) = a2;
        }
      }
      else
      {
        result = a2;
        *(_DWORD *)((v2 & 0x3F) + dword_1007CDB4 + 1540) = a2;
      }
    }
    else
    {
      result = a2;
      *(_DWORD *)((v2 & 0x1FF) + dword_1007CDB4 + 1028) = a2;
    }
  }
  else
  {
    result = a2;
    *(_DWORD *)((unsigned __int8)v2 + dword_1007CDB4 + 516) = a2;
  }
  return result;
}
// 1007CDB4: using guessed type int dword_1007CDB4;

//----- (10008870) --------------------------------------------------------
signed int __stdcall sub_10008870(int a1)
{
  int v1; // edx@1
  signed int result; // eax@2

  v1 = a1 & 0x1FFFFFFF;
  if ( (a1 & 0x1FFFFFFFu) - 352321536 > 0xFF )
  {
    if ( (unsigned int)(v1 - 436207616) > 0x13F )
    {
      if ( (unsigned int)(v1 - 436208000) > 0x3F )
      {
        if ( (unsigned int)(v1 - 436208128) > 0x3F )
          result = -1;
        else
          result = *(_DWORD *)((v1 & 0x3F) + dword_1007CDB4 + 1604);
      }
      else
      {
        result = *(_DWORD *)((v1 & 0x3F) + dword_1007CDB4 + 1540);
      }
    }
    else
    {
      result = *(_DWORD *)((v1 & 0x1FF) + dword_1007CDB4 + 1028);
    }
  }
  else
  {
    result = *(_DWORD *)((unsigned __int8)v1 + dword_1007CDB4 + 516);
  }
  return result;
}
// 1007CDB4: using guessed type int dword_1007CDB4;

//----- (10008930) --------------------------------------------------------
int __thiscall sub_10008930(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)this = *(_DWORD *)a2;
  *(_DWORD *)(this + 4) = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(this + 8) = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(this + 12) = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(this + 16) = *(_DWORD *)(a2 + 16);
  *(_DWORD *)(this + 20) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(this + 24) = *(_DWORD *)(a2 + 24);
  *(_DWORD *)(this + 28) = *(_DWORD *)(a2 + 28);
  *(_DWORD *)(this + 32) = *(_DWORD *)(a2 + 32);
  *(_DWORD *)(this + 36) = *(_DWORD *)(a2 + 36);
  *(_DWORD *)(this + 40) = *(_DWORD *)(a2 + 40);
  *(_DWORD *)(this + 44) = *(_DWORD *)(a2 + 44);
  *(_DWORD *)(this + 48) = *(_DWORD *)(a2 + 48);
  *(_DWORD *)(this + 52) = *(_DWORD *)(a2 + 52);
  *(_DWORD *)(this + 56) = *(_DWORD *)(a2 + 56);
  *(_BYTE *)(this + 60) = *(_BYTE *)(a2 + 60);
  *(_BYTE *)(this + 61) = *(_BYTE *)(a2 + 61);
  *(_DWORD *)(this + 64) = *(_DWORD *)(a2 + 64);
  *(_DWORD *)(this + 68) = *(_DWORD *)(a2 + 68);
  *(_DWORD *)(this + 72) = *(_DWORD *)(a2 + 72);
  *(_DWORD *)(this + 76) = *(_DWORD *)(a2 + 76);
  *(_DWORD *)(this + 80) = *(_DWORD *)(a2 + 80);
  *(_DWORD *)(this + 84) = *(_DWORD *)(a2 + 84);
  *(_DWORD *)(this + 88) = *(_DWORD *)(a2 + 88);
  result = this;
  *(_OWORD *)(this + 96) = *(_OWORD *)(a2 + 96);
  *(_OWORD *)(this + 112) = *(_OWORD *)(a2 + 112);
  *(_OWORD *)(this + 128) = *(_OWORD *)(a2 + 128);
  *(_OWORD *)(this + 144) = *(_OWORD *)(a2 + 144);
  return result;
}

//----- (10008A00) --------------------------------------------------------
LPVOID __thiscall sub_10008A00(LPVOID lpMem, int a2)
{
  LPVOID v2; // esi@1
  int v3; // ecx@1
  int v4; // ecx@3
  int v5; // ecx@5

  v2 = lpMem;
  v3 = *((_DWORD *)lpMem + 3);
  if ( v3 )
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)v3 + 8))(v3);
    *((_DWORD *)v2 + 3) = 0;
  }
  v4 = *((_DWORD *)v2 + 2);
  if ( v4 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v4 + 8))(*((_DWORD *)v2 + 2));
    *((_DWORD *)v2 + 2) = 0;
  }
  v5 = *((_DWORD *)v2 + 1);
  if ( v5 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v5 + 8))(*((_DWORD *)v2 + 1));
    *((_DWORD *)v2 + 1) = 0;
  }
  if ( *(_DWORD *)v2 )
  {
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)v2 + 8))(*(_DWORD *)v2);
    *(_DWORD *)v2 = 0;
  }
  sub_1000F417(v2);
  return v2;
}

//----- (10008A90) --------------------------------------------------------
int __userpurge sub_10008A90@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4)
{
  int v4; // esi@1
  unsigned int v5; // ecx@1
  unsigned int v6; // eax@1
  unsigned int v7; // eax@4

  v4 = a1;
  *(_DWORD *)(v4 + 4) += 3;
  v5 = *(_DWORD *)(a1 + 4);
  v6 = *(_DWORD *)(v4 + 8);
  if ( v5 >= v6 )
  {
    if ( !v6 )
      *(_DWORD *)(v4 + 8) = 1;
    v7 = *(_DWORD *)(v4 + 8);
    if ( v5 >= v7 )
    {
      do
        v7 *= 2;
      while ( v5 >= v7 );
      *(_DWORD *)(v4 + 8) = v7;
    }
    *(_DWORD *)v4 = sub_1002D6F7(a2, a3, *(_DWORD *)v4, 4 * *(_DWORD *)(v4 + 8), 0x10u);
  }
  return *(_DWORD *)v4 + 4 * *(_DWORD *)(v4 + 4) - 12;
}

//----- (10008AE0) --------------------------------------------------------
int __thiscall sub_10008AE0(void *this)
{
  void *v1; // esi@1
  int result; // eax@1

  v1 = this;
  result = sub_1002D4A8(*(_DWORD *)this);
  *(_DWORD *)v1 = 0;
  return result;
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);

//----- (10008B00) --------------------------------------------------------
int __userpurge sub_10008B00@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4)
{
  int v4; // esi@1
  unsigned int v5; // ecx@1
  unsigned int v6; // eax@1
  unsigned int v7; // eax@4

  v4 = a1;
  *(_DWORD *)(v4 + 4) += 2;
  v5 = *(_DWORD *)(a1 + 4);
  v6 = *(_DWORD *)(v4 + 8);
  if ( v5 >= v6 )
  {
    if ( !v6 )
      *(_DWORD *)(v4 + 8) = 1;
    v7 = *(_DWORD *)(v4 + 8);
    if ( v5 >= v7 )
    {
      do
        v7 *= 2;
      while ( v5 >= v7 );
      *(_DWORD *)(v4 + 8) = v7;
    }
    *(_DWORD *)v4 = sub_1002D6F7(a2, a3, *(_DWORD *)v4, 40 * *(_DWORD *)(v4 + 8), 0x10u);
  }
  return *(_DWORD *)v4 + 40 * (*(_DWORD *)(v4 + 4) - 2);
}

//----- (10008B60) --------------------------------------------------------
int __thiscall sub_10008B60(int this, unsigned int a2)
{
  int v2; // esi@1
  int v3; // edx@1
  int result; // eax@1
  int v5; // ecx@1

  v2 = this;
  v3 = *(_DWORD *)(this + 4);
  result = *(_DWORD *)this;
  v5 = *(_DWORD *)(this + 4) - *(_DWORD *)this;
  if ( v5 <= a2 )
  {
    if ( v5 >= a2 )
      return result;
    sub_10008CA0(v2, a2 + result - v3);
    sub_10028330(*(void **)(v2 + 4), 0, a2 + *(_DWORD *)v2 - *(_DWORD *)(v2 + 4));
    result = *(_DWORD *)v2;
  }
  result += a2;
  *(_DWORD *)(v2 + 4) = result;
  return result;
}

//----- (10008BC0) --------------------------------------------------------
int __usercall sub_10008BC0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  unsigned int v4; // ecx@1
  int v5; // eax@1
  unsigned int v6; // eax@4

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 4);
  v5 = *(_DWORD *)(v3 + 8);
  if ( v4 == v5 )
  {
    if ( !v5 )
      *(_DWORD *)(v3 + 8) = 1;
    v6 = *(_DWORD *)(v3 + 8);
    if ( v4 >= v6 )
    {
      do
        v6 *= 2;
      while ( v4 >= v6 );
      *(_DWORD *)(v3 + 8) = v6;
    }
    *(_DWORD *)v3 = sub_1002D6F7(a2, a3, *(_DWORD *)v3, *(_DWORD *)(v3 + 8) << 6, 0x10u);
  }
  return *(_DWORD *)v3 + ((*(_DWORD *)(v3 + 4))++ << 6);
}

//----- (10008C30) --------------------------------------------------------
void __usercall sub_10008C30(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  void *v4; // edx@1
  void *v5; // eax@4
  int v6; // edx@5

  v3 = a1;
  v4 = *(void **)a1;
  if ( *(_DWORD *)a1 )
  {
    if ( (unsigned int)(*(_DWORD *)(a1 + 8) - (_DWORD)v4) >= 0x1000 )
    {
      if ( (unsigned __int8)v4 & 0x1F )
        sub_1002B797(a2, a3);
      v5 = (void *)*((_DWORD *)v4 - 1);
      if ( v5 >= v4 )
        sub_1002B797(a2, a3);
      v6 = (_BYTE *)v4 - (_BYTE *)v5;
      if ( (unsigned int)v6 < 4 )
        sub_1002B797(a2, a3);
      if ( (unsigned int)v6 > 0x23 )
        sub_1002B797(a2, a3);
      v4 = v5;
    }
    sub_1000F409(v4);
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 0;
    *(_DWORD *)(v3 + 8) = 0;
  }
}

//----- (10008CA0) --------------------------------------------------------
int __thiscall sub_10008CA0(int this, unsigned int a2)
{
  int v2; // esi@1
  int result; // eax@1
  int v4; // edx@2
  unsigned int v5; // ebx@3
  unsigned int v6; // esi@3
  int v7; // edx@3

  v2 = *(_DWORD *)(this + 4);
  result = *(_DWORD *)(this + 8) - v2;
  if ( result < a2 )
  {
    v4 = *(_DWORD *)this;
    if ( *(_DWORD *)this - v2 - 1 < a2 )
      sub_1000DA74((int)"vector<T> too long");
    v5 = *(_DWORD *)(this + 8) - v4;
    v6 = a2 + v2 - v4;
    v7 = 0;
    if ( ~(v5 >> 1) >= v5 )
      v7 = v5 + (v5 >> 1);
    if ( v7 >= v6 )
      v6 = v7;
    result = sub_10008D00((void *)this, v6);
  }
  return result;
}

//----- (10008D00) --------------------------------------------------------
int __thiscall sub_10008D00(void *this, unsigned int a2)
{
  int v2; // ebx@1
  LPVOID v3; // esi@2
  LPVOID v4; // eax@5
  const void *v5; // ecx@7
  int v6; // ebp@7
  const void *v7; // eax@10
  int v8; // ecx@11
  int result; // eax@15

  v2 = (int)this;
  if ( a2 )
  {
    if ( a2 < 0x1000 )
    {
      v3 = sub_1000F0A6(a2);
    }
    else
    {
      if ( a2 + 35 <= a2 )
        sub_1000DA57();
      v4 = sub_1000F0A6(a2 + 35);
      v3 = (LPVOID)((unsigned int)((char *)v4 + 35) & 0xFFFFFFE0);
      *((_DWORD *)v3 - 1) = v4;
    }
  }
  else
  {
    v3 = 0;
  }
  sub_100260E0(v3, *(const void **)v2, *(_DWORD *)(v2 + 4) - *(_DWORD *)v2);
  v5 = *(const void **)v2;
  v6 = *(_DWORD *)(v2 + 4) - *(_DWORD *)v2;
  if ( *(_DWORD *)v2 )
  {
    if ( (unsigned int)(*(_DWORD *)(v2 + 8) - (_DWORD)v5) >= 0x1000 )
    {
      if ( (unsigned __int8)v5 & 0x1F )
        sub_1002B797(v2, a2);
      v7 = (const void *)*((_DWORD *)v5 - 1);
      if ( v7 >= v5 )
        sub_1002B797(v2, a2);
      v8 = (_BYTE *)v5 - (_BYTE *)v7;
      if ( (unsigned int)v8 < 4 )
        sub_1002B797(v2, a2);
      if ( (unsigned int)v8 > 0x23 )
        sub_1002B797(v2, a2);
      v5 = v7;
    }
    sub_1000F409((LPVOID)v5);
  }
  *(_DWORD *)(v2 + 8) = (char *)v3 + a2;
  result = (int)((char *)v3 + v6);
  *(_DWORD *)(v2 + 4) = (char *)v3 + v6;
  *(_DWORD *)v2 = v3;
  return result;
}

//----- (10008DC0) --------------------------------------------------------
LPVOID __stdcall sub_10008DC0(void *a1, void *a2)
{
  LPVOID result; // eax@1
  LPVOID v3; // ecx@1
  LPVOID v4; // edx@2

  result = sub_1000F0A6(0xCu);
  v3 = a1;
  if ( a1 )
  {
    v4 = a2;
  }
  else
  {
    v3 = result;
    v4 = result;
  }
  if ( result )
    *(_DWORD *)result = v3;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = v4;
  return result;
}

//----- (10008DF0) --------------------------------------------------------
int __cdecl sub_10008DF0(unsigned __int64 a1)
{
  int v1; // ecx@0
  int v2; // esi@1
  int v3; // eax@1
  char v5[2]; // [sp+36h] [bp-2h]@1

  v2 = v1;
  v3 = sub_10008E50(a1);
  *(_DWORD *)(v2 + 20) = 7;
  *(_DWORD *)(v2 + 16) = 0;
  *(_WORD *)v2 = 0;
  if ( (char *)v3 != v5 )
    sub_10001460(v2, (const void *)v3, (signed int)&v5[-v3] >> 1);
  return v2;
}
// 10008DF0: using guessed type char var_2[2];

//----- (10008E50) --------------------------------------------------------
int __cdecl sub_10008E50(unsigned __int64 a1)
{
  int v1; // ecx@0
  unsigned int v2; // ebp@1
  int v3; // esi@1
  unsigned int v4; // edi@1
  __int64 v5; // rax@2
  signed int v6; // ebx@2
  unsigned int v7; // ecx@2

  v2 = HIDWORD(a1);
  v3 = v1;
  v4 = a1;
  if ( a1 > 0xFFFFFFFF )
  {
    do
    {
      v5 = sub_10061440(__PAIR__(v2, v4), 0x3B9ACA00u, 0);
      v2 = HIDWORD(v5);
      v6 = 9;
      v7 = v4 - 1000000000 * v5;
      v4 = v5;
      do
      {
        v3 -= 2;
        *(_WORD *)v3 = v7 % 0xA + 48;
        v7 /= 0xAu;
        --v6;
      }
      while ( v6 );
    }
    while ( (unsigned __int64)v5 > 0xFFFFFFFF );
  }
  do
  {
    v3 -= 2;
    *(_WORD *)v3 = v4 % 0xA + 48;
    v4 /= 0xAu;
  }
  while ( v4 );
  return v3;
}

//----- (10008EF0) --------------------------------------------------------
LPVOID __stdcall sub_10008EF0(void *a1, void *a2, int a3)
{
  LPVOID result; // eax@1

  result = sub_10008DC0(a1, a2);
  if ( result != (LPVOID)-8 )
    *((_DWORD *)result + 2) = *(_DWORD *)a3;
  return result;
}

//----- (10008F10) --------------------------------------------------------
int __thiscall sub_10008F10(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 8) = 0;
  result = this;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = 0;
  *(_DWORD *)(this + 20) = 0;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 40) = 0;
  *(_DWORD *)(this + 44) = 0;
  *(_DWORD *)(this + 48) = 0;
  *(_DWORD *)(this + 52) = 0;
  *(_DWORD *)(this + 56) = 0;
  *(_DWORD *)(this + 60) = 0;
  *(_DWORD *)(this + 64) = 0;
  *(_DWORD *)(this + 68) = 0;
  *(_DWORD *)(this + 72) = 0;
  *(_DWORD *)(this + 76) = 0;
  return result;
}

//----- (10008FA0) --------------------------------------------------------
int __thiscall sub_10008FA0(int this)
{
  int v1; // esi@1
  int result; // eax@1

  v1 = this;
  sub_1002D4A8(*(_DWORD *)(this + 68));
  *(_DWORD *)(v1 + 68) = 0;
  sub_1002D4A8(*(_DWORD *)(v1 + 56));
  *(_DWORD *)(v1 + 56) = 0;
  sub_1002D4A8(*(_DWORD *)(v1 + 44));
  *(_DWORD *)(v1 + 44) = 0;
  sub_1002D4A8(*(_DWORD *)(v1 + 32));
  *(_DWORD *)(v1 + 32) = 0;
  sub_1002D4A8(*(_DWORD *)(v1 + 20));
  *(_DWORD *)(v1 + 20) = 0;
  result = sub_1002D4A8(*(_DWORD *)(v1 + 8));
  *(_DWORD *)(v1 + 8) = 0;
  return result;
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);

//----- (10009010) --------------------------------------------------------
int __userpurge sub_10009010@<eax>(int a1@<ecx>, int a2@<ebx>, int a3)
{
  int v3; // ebp@0
  int v4; // esi@1

  v4 = a1;
  sub_1000F684(v3, a1 + 70856, 8, 0x2000, (int)&loc_10002970);
  sub_1000F684(v3, v4 + 66760, 8, 512, (int)&loc_10002970);
  sub_10008FA0(v4 + 66092);
  sub_100026E0(v4, a2);
  sub_1002D4A8(v4);
  return v4;
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);

//----- (10009090) --------------------------------------------------------
signed int __usercall sub_10009090@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, char a5)
{
  return sub_100043B0(a1, a2, a3, 4, a4, 0, (int)&a5);
}

//----- (100090B0) --------------------------------------------------------
int __thiscall sub_100090B0(void *this, int a2, int a3)
{
  signed int v3; // esi@1
  int v4; // edx@1
  __int128 v5; // xmm0@2
  int v6; // et1@2
  int result; // eax@2

  v3 = 0;
  v4 = a3;
  while ( 1 )
  {
    v5 = *(_DWORD *)(a2 - a3 + v4);
    v6 = *(_DWORD *)v4;
    __asm { lahf }
    if ( __SETP__(BYTE1(result) & 0x44, 0) )
      break;
    ++v3;
    v4 += 4;
    if ( v3 >= 4 )
      return result;
  }
  *(_DWORD *)a2 = *(_DWORD *)a3;
  *(_DWORD *)(a2 + 4) = *(_DWORD *)(a3 + 4);
  *(_DWORD *)(a2 + 8) = *(_DWORD *)(a3 + 8);
  result = *(_DWORD *)(a3 + 12);
  *(_DWORD *)(a2 + 12) = result;
  *(_BYTE *)this = 1;
  return result;
}

//----- (10009110) --------------------------------------------------------
signed int __usercall sub_10009110@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, char a5)
{
  return sub_100043B0(a1, a2, a3, 8, a4, 0, (int)&a5);
}

//----- (10009130) --------------------------------------------------------
signed int __cdecl sub_10009130(int a1)
{
  signed int result; // eax@1
  signed int v2; // esi@1

  result = sub_1000E554(a1);
  v2 = result;
  if ( result )
  {
    sub_1000E0B3(result);
    result = v2;
  }
  return result;
}

//----- (10009150) --------------------------------------------------------
int __cdecl sub_10009150(int a1)
{
  int result; // eax@1
  int v2; // esi@1

  result = sub_1000E579(a1);
  v2 = result;
  if ( result )
  {
    sub_1000E0B3(result);
    result = v2;
  }
  return result;
}

//----- (10009170) --------------------------------------------------------
signed int __cdecl sub_10009170(int a1, int a2)
{
  signed int result; // eax@1
  signed int v3; // esi@1

  result = sub_1000DE41(a1, a2);
  v3 = result;
  if ( result )
  {
    sub_1000E0B3(result);
    result = v3;
  }
  return result;
}

//----- (100091C0) --------------------------------------------------------
void *__thiscall sub_100091C0(void *this)
{
  void *v1; // esi@1
  int v2; // edi@1
  signed int v3; // eax@1
  int v4; // ST1C_4@3
  signed int v5; // eax@3
  int v6; // ST14_4@5
  signed int v7; // eax@5

  v1 = this;
  v2 = (int)((char *)this + 4);
  *(_DWORD *)this = &off_1006EC70;
  v3 = sub_1000DDF0((int)((char *)this + 4));
  if ( v3 )
    sub_1000E0B3(v3);
  v4 = *(_DWORD *)v2;
  v5 = sub_1000E501((int)((char *)v1 + 8), 1);
  if ( v5 )
    sub_1000E0B3(v5);
  v6 = *((_DWORD *)v1 + 2);
  *((_BYTE *)v1 + 12) = 0;
  v7 = sub_1000E554(v6);
  if ( v7 )
    sub_1000E0B3(v7);
  return v1;
}
// 1006EC70: using guessed type int (*off_1006EC70)();

//----- (10009270) --------------------------------------------------------
signed int __userpurge sub_10009270@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4)
{
  int v4; // esi@1
  signed int result; // eax@1
  signed int v6; // ecx@1

  v4 = a1;
  result = sub_1000E6FA(a2, a3, a4, (LPCWSTR)sub_100092D0, a1);
  v6 = 1;
  if ( result != 4 )
    v6 = result;
  if ( v6 )
    result = sub_1000E0B3(v6);
  while ( !*(_BYTE *)(v4 + 12) )
  {
    result = sub_1000DE41(*(_DWORD *)(v4 + 4), *(_DWORD *)(v4 + 8));
    if ( result )
      result = sub_1000E0B3(result);
  }
  return result;
}
// 100092D0: using guessed type int __stdcall sub_100092D0(int);

//----- (100092F0) --------------------------------------------------------
int __thiscall sub_100092F0(int this)
{
  int v1; // esi@1
  int result; // eax@5

  v1 = this;
  if ( !*(_DWORD *)(this + 4) )
    sub_1000E0E0(1);
  if ( *(_DWORD *)(this + 4) == GetCurrentThreadId() )
    sub_1000E0E0(5);
  result = sub_1000E6AB(*(HANDLE *)v1, *(_DWORD *)(v1 + 4), 0);
  if ( result )
    sub_1000E0E0(2);
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)v1 = 0;
  return result;
}

//----- (10009360) --------------------------------------------------------
signed int __usercall sub_10009360@<eax>(int a1@<edx>, int a2@<ecx>, float a3@<xmm2>)
{
  signed int result; // eax@1
  float v4; // xmm3_4@1
  float v5; // xmm0_4@2
  float v6; // xmm5_4@5

  result = (signed int)ffloor((float)(a3 * 0.15915494) + 0.5);
  v4 = a3 - (float)((float)result * 6.2831855);
  if ( v4 <= 1.5707964 )
  {
    if ( v4 >= -1.5707964 )
    {
      v6 = 1.0;
      goto LABEL_7;
    }
    v5 = -3.1415927;
  }
  else
  {
    v5 = 3.1415927;
  }
  v6 = -1.0;
  v4 = v5 - v4;
LABEL_7:
  *(float *)a2 = (float)((float)((float)((float)((float)((float)((float)((float)((float)(0.0000027525562
                                                                                       - (float)((float)(v4 * v4)
                                                                                               * 0.000000023889859))
                                                                               * (float)(v4 * v4))
                                                                       - 0.00019840874)
                                                               * (float)(v4 * v4))
                                                       + 0.008333331)
                                               * (float)(v4 * v4))
                                       - 0.16666667)
                               * (float)(v4 * v4))
                       + 1.0)
               * v4;
  *(float *)a1 = (float)((float)((float)((float)((float)((float)((float)((float)((float)(0.000024760495
                                                                                       - (float)((float)(v4 * v4)
                                                                                               * 0.00000026051615))
                                                                               * (float)(v4 * v4))
                                                                       - 0.0013888378)
                                                               * (float)(v4 * v4))
                                                       + 0.041666638)
                                               * (float)(v4 * v4))
                                       - 0.5)
                               * (float)(v4 * v4))
                       + 1.0)
               * v6;
  return result;
}

//----- (10009480) --------------------------------------------------------
void __usercall sub_10009480(int a1@<ecx>, __m128 a2@<xmm0>)
{
  __m128 v2; // xmm0@1
  __m128i v3; // xmm0@1
  __m128i v4; // xmm0@1

  v2 = _mm_mul_ps(
         _mm_min_ps(_mm_max_ps(a2, (__m128)xmmword_1006DB10), (__m128)xmmword_1006DDB0),
         (__m128)xmmword_1006EC80);
  v3 = _mm_cvtps_epi32(_mm_shuffle_ps(v2, v2, -58));
  v4 = _mm_packs_epi32(v3, v3);
  *(_DWORD *)a1 = (unsigned __int128)_mm_packus_epi16(v4, v4);
}
// 1006DB10: using guessed type __int128 xmmword_1006DB10;
// 1006DDB0: using guessed type __int128 xmmword_1006DDB0;
// 1006EC80: using guessed type __int128 xmmword_1006EC80;

//----- (100094B0) --------------------------------------------------------
char __thiscall sub_100094B0(int this, int a2)
{
  int v2; // ebx@1
  int v3; // edx@2
  int v4; // esi@2
  signed int v5; // ecx@2
  bool v6; // cf@4
  char result; // al@5

  v2 = this;
  if ( *(_DWORD *)(a2 + 8) & 0x40000000 )
  {
    v3 = this;
    v4 = a2;
    v5 = 28;
    while ( *(_DWORD *)v3 == *(_DWORD *)v4 )
    {
      v3 += 4;
      v4 += 4;
      v6 = (unsigned int)v5 < 4;
      v5 -= 4;
      if ( v6 )
        return 0;
    }
    result = 1;
    *(_OWORD *)v2 = *(_OWORD *)a2;
    *(_OWORD *)(v2 + 16) = *(_OWORD *)(a2 + 16);
  }
  else if ( *(_DWORD *)this != *(_DWORD *)a2
         || *(_DWORD *)(this + 4) != *(_DWORD *)(a2 + 4)
         || *(_DWORD *)(this + 8) != *(_DWORD *)(a2 + 8) )
  {
    _mm_storel_epi64((__m128i *)this, _mm_loadl_epi64((const __m128i *)a2));
    *(_DWORD *)(this + 8) = *(_DWORD *)(a2 + 8);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10009540) --------------------------------------------------------
int __thiscall sub_10009540(int this, int a2)
{
  int v2; // ebx@1
  int v3; // edi@1
  int v4; // eax@1
  int v5; // ecx@1
  int v6; // eax@1
  int result; // eax@1
  int v8; // xmm0_4@2
  int v9; // xmm0_4@2
  int v10; // [sp+10h] [bp+4h]@2

  v2 = a2;
  v3 = this;
  *(_DWORD *)this = dword_1006D0F0[*(_BYTE *)(a2 + 7)];
  *(_DWORD *)(this + 4) = dword_1006D0F0[*(_BYTE *)(a2 + 6)];
  v4 = *(_BYTE *)(a2 + 5);
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 8) = dword_1006D0F0[v4];
  v5 = ((unsigned __int8)*(_DWORD *)v2 >> 4) | 16 * *(_BYTE *)(v2 + 9);
  v6 = *(_DWORD *)a2 & 0xF | 16 * *(_BYTE *)(a2 + 8);
  *(float *)(v3 + 16) = (float)((*(_DWORD *)a2 >> 16) & 0xF | 16 * *(_BYTE *)(a2 + 10)) * -0.00048828125;
  *(float *)(v3 + 20) = (float)v5 * -0.00048828125;
  *(float *)(v3 + 24) = (float)v6 * -0.00048828125;
  result = *(_BYTE *)(a2 + 11);
  *(_DWORD *)(v3 + 28) = result | (*(_DWORD *)v2 >> 4) & 0x10000 | 8 * (*(_DWORD *)(v2 + 4) & 0xE0);
  if ( *(_BYTE *)(a2 + 11) & 0x40 )
  {
    *(_DWORD *)(v3 + 32) = *(_DWORD *)(a2 + 12);
    *(_DWORD *)(v3 + 36) = *(_DWORD *)(a2 + 16);
    *(_DWORD *)(v3 + 40) = *(_DWORD *)(a2 + 20);
    LOWORD(v10) = 0;
    *(_DWORD *)(v3 + 44) = 0;
    HIWORD(v10) = *(_WORD *)(v2 + 26);
    v8 = v10;
    LOWORD(v10) = 0;
    *(_DWORD *)(v3 + 48) = v8;
    HIWORD(v10) = *(_WORD *)(v2 + 24);
    v9 = v10;
    LOWORD(v10) = 0;
    *(_DWORD *)(v3 + 52) = v9;
    HIWORD(v10) = *(_WORD *)(v2 + 30);
    *(_DWORD *)(v3 + 56) = v10;
    LOWORD(v10) = 0;
    result = *(_WORD *)(v2 + 28);
    HIWORD(v10) = *(_WORD *)(v2 + 28);
    *(_DWORD *)(v3 + 60) = v10;
  }
  return result;
}
// 1006D0F0: using guessed type int dword_1006D0F0[];

//----- (100096A0) --------------------------------------------------------
int __thiscall sub_100096A0(int this, int a2)
{
  __m128 v2; // xmm0@1
  __m128 v3; // xmm3@1
  __m128 v4; // xmm4@1
  __m128 v5; // xmm1@1
  __m128 v6; // xmm6@1
  __m128 v7; // xmm3@1
  __m128 v8; // xmm1@1
  __m128 v9; // xmm3@1
  __m128 v10; // xmm4@1
  __m128 v11; // xmm5@1
  __m128 v12; // xmm2@1
  __m128 v13; // xmm0@1
  __m128 v14; // xmm6@1
  __m128 v15; // xmm5@1
  int result; // eax@1

  v2 = *(__m128 *)(a2 + 8);
  v3 = *(__m128 *)(a2 + 24);
  v4 = *(__m128 *)(a2 + 40);
  v5 = v3;
  v6 = _mm_and_ps((__m128)xmmword_1006DAD0, v2);
  v7 = _mm_shuffle_ps(v3, v2, -12);
  v8 = _mm_shuffle_ps(v5, v4, 14);
  v9 = _mm_and_ps(_mm_shuffle_ps(v7, v7, 82), (__m128)xmmword_1006DAD0);
  v10 = (__m128)_mm_or_si128(_mm_srli_si128((__m128i)v4, 4), (__m128i)xmmword_1006EE70);
  v11 = _mm_and_ps((__m128)xmmword_1006DAD0, v8);
  v12 = _mm_shuffle_ps(v6, v9, 68);
  v13 = _mm_shuffle_ps(v11, v10, 68);
  v14 = _mm_shuffle_ps(v6, v9, -18);
  v15 = _mm_shuffle_ps(v11, v10, -18);
  *(_OWORD *)this = _mm_shuffle_ps(v12, v13, -120);
  *(_OWORD *)(this + 16) = _mm_shuffle_ps(v12, v13, -35);
  *(_OWORD *)(this + 32) = _mm_shuffle_ps(v14, v15, -120);
  *(_OWORD *)(this + 48) = _mm_shuffle_ps(v14, v15, -35);
  *(_DWORD *)(this + 64) = *(_DWORD *)(a2 + 4);
  result = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(this + 68) = result;
  return result;
}
// 1006DAD0: using guessed type __int128 xmmword_1006DAD0;
// 1006EE70: using guessed type __int128 xmmword_1006EE70;

//----- (10009740) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
int __thiscall sub_10009740(int this, int a2)
{
  int result; // eax@1
  int v3; // ST3C_4@1 OVERLAPPED
  int v4; // ST00_4@1 OVERLAPPED
  int v5; // ST10_4@1 OVERLAPPED
  int v6; // ST20_4@1 OVERLAPPED
  int v7; // ST30_4@1
  int v8; // ST04_4@1
  int v9; // ST14_4@1
  int v10; // ST24_4@1
  __int64 v11; // ST34_8@1
  int v12; // ST08_4@1
  int v13; // ST18_4@1
  int v14; // ST28_4@1
  int v15; // ST0C_4@1
  int v16; // ST1C_4@1
  int v17; // ST2C_4@1

  result = a2;
  v3 = 0;
  v4 = *(_DWORD *)(a2 + 8);
  v5 = *(_DWORD *)(a2 + 20);
  v6 = *(_DWORD *)(a2 + 32);
  v7 = *(_DWORD *)(a2 + 4);
  v8 = *(_DWORD *)(a2 + 12);
  v9 = *(_DWORD *)(a2 + 24);
  v10 = *(_DWORD *)(a2 + 36);
  v11 = *(_DWORD *)(a2 + 44);
  v12 = *(_DWORD *)(a2 + 16);
  v13 = *(_DWORD *)(a2 + 28);
  v14 = *(_DWORD *)(a2 + 40);
  v15 = *(_DWORD *)(a2 + 48);
  v16 = *(_DWORD *)(a2 + 52);
  v17 = *(_DWORD *)(a2 + 56);
  *(_OWORD *)this = *(_OWORD *)&v4;
  *(_OWORD *)(this + 16) = *(_OWORD *)&v5;
  *(_OWORD *)(this + 32) = *(_OWORD *)&v6;
  *(_OWORD *)(this + 48) = *(_OWORD *)(&v3 - 3);
  return result;
}
// 10009740: failed to expand linear variable var40
// 10009740: failed to expand linear variable var30
// 10009740: failed to expand linear variable var20
// 10009740: failed to expand linear variable var10_12

//----- (10009820) --------------------------------------------------------
bool __thiscall sub_10009820(int this, int a2, int a3)
{
  return *(_DWORD *)a2 == *(_DWORD *)this
      && *(_DWORD *)(a2 + 4) == *(_DWORD *)(this + 4)
      && *(_DWORD *)(a2 + 8) == *(_DWORD *)(this + 8)
      && *(_DWORD *)(a2 + 12) == *(_DWORD *)(this + 12)
      && *(_WORD *)a3 == *(_WORD *)(this + 24)
      && *(_WORD *)(a3 + 2) == *(_WORD *)(this + 26)
      && *(_WORD *)(a3 + 4) == *(_WORD *)(this + 28)
      && *(_WORD *)(a3 + 6) == *(_WORD *)(this + 30);
}

//----- (10009880) --------------------------------------------------------
bool __thiscall sub_10009880(int this, int a2, int a3)
{
  return *(_DWORD *)a2 == *(_DWORD *)this
      && *(_DWORD *)(a2 + 4) == *(_DWORD *)(this + 4)
      && *(_DWORD *)(a2 + 8) == *(_DWORD *)(this + 8)
      && *(_DWORD *)(a2 + 12) == *(_DWORD *)(this + 12)
      && *(_WORD *)a3 == *(_WORD *)(this + 24)
      && *(_WORD *)(a3 + 2) == *(_WORD *)(this + 26)
      && *(_WORD *)(a3 + 4) == *(_WORD *)(this + 28)
      && *(_WORD *)(a3 + 6) == *(_WORD *)(this + 30)
      && *(_DWORD *)(a2 + 16) == *(_DWORD *)(this + 16)
      && *(_DWORD *)(a2 + 20) == *(_DWORD *)(this + 20);
}

//----- (100098F0) --------------------------------------------------------
int __thiscall sub_100098F0(int this, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // esi@1
  int v7; // edi@1
  int v8; // eax@1
  int v9; // eax@5

  v6 = this;
  v7 = this + 4;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  v8 = (*(int (__stdcall **)(_DWORD, int, _DWORD, int))(**(_DWORD **)(a2 + 4) + 20))(*(_DWORD *)(a2 + 4), a3, 0, this);
  sub_100410C0(a2, a2, v8, L"Failed create texture");
  if ( *(_DWORD *)v6 )
  {
    if ( a4 )
      (*(void (__stdcall **)(_DWORD, _DWORD, int, int))(**(_DWORD **)(a2 + 4) + 28))(
        *(_DWORD *)(a2 + 4),
        *(_DWORD *)v6,
        a4,
        v7);
    if ( a5 )
    {
      v9 = (*(int (__stdcall **)(_DWORD, _DWORD, int, int))(**(_DWORD **)(a2 + 4) + 40))(
             *(_DWORD *)(a2 + 4),
             *(_DWORD *)v6,
             a5,
             v6 + 8);
      sub_100410C0(a2, a2, v9, L"Create depth stencil view");
    }
  }
  return v6;
}
// 1006DCF8: using guessed type wchar_t aCreateDepthSte[26];
// 1006DD2C: using guessed type wchar_t aFailedCreateTe[22];

//----- (10009980) --------------------------------------------------------
int __thiscall sub_10009980(int this, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // esi@1
  int v7; // edi@1
  int v8; // eax@1
  int v9; // eax@5

  v6 = this;
  v7 = this + 4;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  v8 = (*(int (__stdcall **)(_DWORD, int, _DWORD, int))(**(_DWORD **)(a2 + 4) + 20))(*(_DWORD *)(a2 + 4), a3, 0, this);
  sub_100410C0(a2, a2, v8, L"Failed create texture");
  if ( *(_DWORD *)v6 )
  {
    if ( a4 )
      (*(void (__stdcall **)(_DWORD, _DWORD, int, int))(**(_DWORD **)(a2 + 4) + 28))(
        *(_DWORD *)(a2 + 4),
        *(_DWORD *)v6,
        a4,
        v7);
    if ( a5 )
    {
      v9 = (*(int (__stdcall **)(_DWORD, _DWORD, int, int))(**(_DWORD **)(a2 + 4) + 36))(
             *(_DWORD *)(a2 + 4),
             *(_DWORD *)v6,
             a5,
             v6 + 12);
      sub_100410C0(a2, a2, v9, L"Create render targetView");
    }
  }
  return v6;
}
// 1006DCC4: using guessed type wchar_t aCreateRenderTa[25];
// 1006DD2C: using guessed type wchar_t aFailedCreateTe[22];

//----- (10009A10) --------------------------------------------------------
int __thiscall sub_10009A10(int this)
{
  int v1; // eax@1
  signed int v2; // edx@1
  int result; // eax@3
  signed int v4; // edx@3

  *(_DWORD *)this = 2139095039;
  v1 = this + 236;
  *(_DWORD *)(this + 4) = 0x800000;
  v2 = 16;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 20) = 0;
  *(_DWORD *)(this + 16) = 0;
  do
  {
    *(_DWORD *)(v1 - 192) = 0;
    v1 += 12;
    *(_DWORD *)(v1 - 12) = 0;
    *(_DWORD *)(v1 + 180) = 0;
    *(_DWORD *)(v1 + 372) = 0;
    *(_DWORD *)(v1 + 564) = 0;
    --v2;
  }
  while ( v2 );
  *(_DWORD *)(this + 1004) = 0;
  result = this + 1052;
  *(_DWORD *)(this + 1016) = 0;
  *(_DWORD *)(this + 1028) = 0;
  *(_DWORD *)(this + 1040) = 0;
  v4 = 16;
  do
  {
    *(_DWORD *)result = 0;
    result += 12;
    --v4;
  }
  while ( v4 );
  *(_DWORD *)(this + 1244) = 0;
  *(_DWORD *)(this + 1256) = 0;
  *(_DWORD *)(this + 32) = 0;
  return result;
}

//----- (10009AC0) --------------------------------------------------------
int __userpurge sub_10009AC0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // edi@1
  unsigned int v8; // ecx@1
  int v9; // eax@1
  unsigned int v10; // eax@4
  int v11; // ecx@8
  unsigned int v12; // ecx@8
  int v13; // eax@8
  unsigned int v14; // eax@11
  int v15; // eax@15
  int v16; // ecx@15
  unsigned int v17; // ecx@15
  int v18; // eax@15
  unsigned int v19; // eax@18
  int v20; // eax@22
  int v21; // edx@22
  unsigned int v22; // ecx@22
  int v23; // eax@22
  unsigned int v24; // eax@25
  int v25; // eax@29
  int v26; // edx@29
  int v27; // ebx@29
  int v28; // esi@29
  int v29; // esi@29
  int v30; // edi@29
  unsigned int v31; // ecx@30
  unsigned int v32; // eax@33
  int v33; // ecx@37
  int result; // eax@37

  v7 = a1;
  v8 = *(_DWORD *)(a1 + 1028);
  v9 = *(_DWORD *)(v7 + 1032);
  if ( v8 == v9 )
  {
    if ( !v9 )
      *(_DWORD *)(v7 + 1032) = 1;
    v10 = *(_DWORD *)(v7 + 1032);
    if ( v8 >= v10 )
    {
      do
        v10 *= 2;
      while ( v8 >= v10 );
      *(_DWORD *)(v7 + 1032) = v10;
    }
    *(_DWORD *)(v7 + 1024) = sub_1002D6F7(a2, v7, *(_DWORD *)(v7 + 1024), *(_DWORD *)(v7 + 1032) << 6, 0x10u);
  }
  v11 = *(_DWORD *)(v7 + 1024) + ((*(_DWORD *)(v7 + 1028))++ << 6);
  sub_10009740(v11, a5);
  v12 = *(_DWORD *)(v7 + 1016);
  v13 = *(_DWORD *)(v7 + 1020);
  if ( v12 == v13 )
  {
    if ( !v13 )
      *(_DWORD *)(v7 + 1020) = 1;
    v14 = *(_DWORD *)(v7 + 1020);
    if ( v12 >= v14 )
    {
      do
        v14 *= 2;
      while ( v12 >= v14 );
      *(_DWORD *)(v7 + 1020) = v14;
    }
    *(_DWORD *)(v7 + 1012) = sub_1002D6F7(a2, v7, *(_DWORD *)(v7 + 1012), 80 * *(_DWORD *)(v7 + 1020), 0x10u);
  }
  v15 = *(_DWORD *)(v7 + 1016);
  v16 = *(_DWORD *)(v7 + 1012) + 80 * v15;
  *(_DWORD *)(v7 + 1016) = v15 + 1;
  sub_100096A0(v16, a4);
  v17 = *(_DWORD *)(v7 + 1004);
  v18 = *(_DWORD *)(v7 + 1008);
  if ( v17 == v18 )
  {
    if ( !v18 )
      *(_DWORD *)(v7 + 1008) = 1;
    v19 = *(_DWORD *)(v7 + 1008);
    if ( v17 >= v19 )
    {
      do
        v19 *= 2;
      while ( v17 >= v19 );
      *(_DWORD *)(v7 + 1008) = v19;
    }
    *(_DWORD *)(v7 + 1000) = sub_1002D6F7(a2, v7, *(_DWORD *)(v7 + 1000), 16 * *(_DWORD *)(v7 + 1008), 0x10u);
  }
  v20 = *(_DWORD *)(v7 + 1004);
  *(_DWORD *)(v7 + 1004) = v20 + 1;
  v21 = *(_DWORD *)(v7 + 1000) + 16 * v20;
  *(_DWORD *)v21 = *(_DWORD *)(a6 + 8);
  *(_DWORD *)(v21 + 8) = *(_DWORD *)(a6 + 12);
  *(_DWORD *)(v21 + 4) = *(_DWORD *)(a6 + 16);
  *(_DWORD *)(v21 + 12) = *(_DWORD *)(a6 + 20);
  v22 = *(_DWORD *)(v7 + 1040);
  v23 = *(_DWORD *)(v7 + 1044);
  if ( v22 == v23 )
  {
    if ( !v23 )
      *(_DWORD *)(v7 + 1044) = 1;
    v24 = *(_DWORD *)(v7 + 1044);
    if ( v22 >= v24 )
    {
      do
        v24 *= 2;
      while ( v22 >= v24 );
      *(_DWORD *)(v7 + 1044) = v24;
    }
    *(_DWORD *)(v7 + 1036) = sub_1002D6F7(a2, v7, *(_DWORD *)(v7 + 1036), 24 * *(_DWORD *)(v7 + 1044), 0x10u);
  }
  v25 = *(_DWORD *)(v7 + 1040);
  v26 = *(_DWORD *)(v7 + 1036);
  v27 = a3;
  v28 = 3 * v25;
  *(_DWORD *)(v7 + 1040) = v25 + 1;
  *(_DWORD *)(v26 + 8 * v28) = *(_DWORD *)(a7 + 4);
  *(_DWORD *)(v26 + 8 * v28 + 4) = *(_DWORD *)(a7 + 8);
  *(_DWORD *)(v26 + 8 * v28 + 8) = *(_DWORD *)(a7 + 12);
  *(_DWORD *)(v26 + 8 * v28 + 12) = *(_DWORD *)(a7 + 16);
  *(_DWORD *)(v26 + 8 * v28 + 16) = *(_DWORD *)(a7 + 20);
  *(_DWORD *)(v26 + 8 * v28 + 20) = *(_DWORD *)(a7 + 24);
  v29 = v7 + 1056;
  v30 = 16;
  do
  {
    v31 = *(_DWORD *)(v29 - 4);
    if ( v31 == *(_DWORD *)v29 )
    {
      if ( !*(_DWORD *)v29 )
        *(_DWORD *)v29 = 1;
      v32 = *(_DWORD *)v29;
      if ( v31 >= *(_DWORD *)v29 )
      {
        do
          v32 *= 2;
        while ( v31 >= v32 );
        *(_DWORD *)v29 = v32;
      }
      *(_DWORD *)(v29 - 8) = sub_1002D6F7(v27, v30, *(_DWORD *)(v29 - 8), *(_DWORD *)v29 << 6, 0x10u);
    }
    v33 = *(_DWORD *)(v29 - 8) + ((*(_DWORD *)(v29 - 4))++ << 6);
    result = sub_10009540(v33, v27);
    v29 += 12;
    v27 += 32;
    --v30;
  }
  while ( v30 );
  return result;
}

//----- (10009D50) --------------------------------------------------------
DWORD __usercall sub_10009D50@<eax>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // edi@1
  DWORD result; // eax@2
  int v4; // eax@5
  int v5; // ebp@5
  int v6; // esi@5
  bool v7; // zf@5
  int v8; // ecx@13
  int v9; // eax@28

  v2 = a1;
  while ( 1 )
  {
    do
      result = WaitForSingleObject(*(HANDLE *)(v2 + 32156), 0xFFFFFFFF);
    while ( result == -1 );
    if ( *(_BYTE *)(v2 + 31632) )
      return result;
    AcquireSRWLockShared((PSRWLOCK)(dword_1007CD9C + 292));
    if ( *(_DWORD *)(v2 + 31636) != *(_DWORD *)(v2 + 31640) )
    {
      do
      {
        v4 = 32 * *(_DWORD *)(v2 + 31636);
        v5 = v4 + v2 + 31676;
        *(_DWORD *)(v2 + 9624) = 0;
        v6 = v4 + v2 + 31644;
        *(_DWORD *)(v2 + 9620) = 0;
        v7 = *(_DWORD *)(v2 + 31412) == 0;
        *(_BYTE *)(v2 + 9612) = 0;
        if ( !v7 )
          sub_1005B6F0(v2, a2);
        while ( v6 != v5 )
        {
          if ( *(_DWORD *)v6 & 0x8000000 )
          {
            if ( (*(_DWORD *)v6 & 0xF00) == 3840 )
            {
              if ( !byte_102394C8 )
              {
                if ( (*(_DWORD *)(v6 + 4) >> 29) & 3 )
                  (*(void (__fastcall **)(int, int))(dword_1007CD9C + 384))(
                    ((*(_DWORD *)(v6 + 4) >> 29) & 3) + 0x20000,
                    10 * *(_DWORD *)(v2 + 9620));
              }
              v8 = *(_DWORD *)(v2 + 8720);
              v5 = v8 + ((*(_DWORD *)(v6 + 4) + *(_DWORD *)(v6 + 12)) & 0x1FFFFFF);
              v6 = v8 + (*(_DWORD *)(v6 + 4) & 0x1FFFFFF);
            }
            else
            {
              v6 = (*(int (__thiscall **)(int, int, int))(v2 + 4 * ((*(_DWORD *)v6 >> 8) & 0xF) + 48548))(v2, v6, v5);
            }
            if ( *(_BYTE *)(v2 + 9612) )
              break;
          }
          else
          {
            a2 = v6 + 32;
            if ( *(_DWORD *)(v2 + 31412) )
              sub_1005B6F0(v2, a2);
            for ( ; v6 != a2; v6 = (*(int (__fastcall **)(int, int, int))(v2 + 31624))(v2, v6, a2) )
              ;
            v6 = a2;
            if ( *(int (__userpurge **)@<eax>(int@<edx>, int@<ecx>, int@<ebx>, int))(v2 + 31624) != sub_10056440 )
            {
              a2 += 32;
              if ( *(_DWORD *)(v2 + 31412) )
                sub_1005B6F0(v2, a2);
              for ( ; v6 != a2; v6 = (*(int (__fastcall **)(int, int, int))(v2 + 31624))(v2, v6, a2) )
                ;
              v6 = a2;
            }
          }
        }
        v9 = ((unsigned __int8)*(_DWORD *)(v2 + 31636) + 1) & 0xF;
        *(_DWORD *)(v2 + 31636) = v9;
      }
      while ( v9 != *(_DWORD *)(v2 + 31640) );
    }
    ReleaseSRWLockShared((PSRWLOCK)(dword_1007CD9C + 292));
  }
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 102394C8: using guessed type char byte_102394C8;

//----- (10009F40) --------------------------------------------------------
int __userpurge sub_10009F40@<eax>(int a1@<ebx>, int a2)
{
  int v2; // edi@1
  HANDLE *v3; // esi@3
  int v4; // eax@3
  int v5; // eax@8
  void *v6; // ST0C_4@8
  int result; // eax@8
  LPVOID lpMem; // [sp+Ch] [bp-18h]@3
  DWORD (__usercall *v9)@<eax>(int@<ecx>, int@<ebx>); // [sp+10h] [bp-14h]@3
  int v10; // [sp+14h] [bp-10h]@3
  int v11; // [sp+20h] [bp-4h]@3

  v2 = dword_1007CE14;
  if ( !*(_BYTE *)(dword_1007CE14 + 8732) )
  {
    sub_10059D20(dword_1007CE14, a1, dword_1007CE14);
    if ( !*(_DWORD *)(v2 + 32160) )
    {
      *(_DWORD *)(v2 + 32156) = CreateEventW(0, 0, 0, 0);
      *(_BYTE *)(v2 + 31632) = 0;
      v3 = (HANDLE *)sub_1000F0A6(8u);
      v11 = 0;
      v10 = v2;
      v9 = sub_10009D50;
      v4 = sub_1000A840((int)&v9, (int)&lpMem, (int)&v10);
      LOBYTE(v11) = 1;
      sub_1000A880((void **)v4, (int)v3, a1);
      if ( lpMem )
        sub_1000F417(lpMem);
      v11 = -1;
      *(_DWORD *)(v2 + 32160) = v3;
      SetThreadPriority(*v3, 15);
    }
    *(_BYTE *)(v2 + 8732) = 1;
    *(_DWORD *)(v2 + 31640) = 0;
    *(_DWORD *)(v2 + 31636) = 0;
  }
  if ( byte_102394C8 )
  {
    sub_10056CA0(v2, a2);
    v5 = 32 * *(_DWORD *)(v2 + 31640);
    *(_OWORD *)(v5 + v2 + 31644) = *(_OWORD *)a2;
    *(_OWORD *)(v5 + v2 + 31660) = *(_OWORD *)(a2 + 16);
    v6 = *(void **)(v2 + 32156);
    *(_DWORD *)(v2 + 31640) = ((unsigned __int8)*(_DWORD *)(v2 + 31640) + 1) & 0xF;
    result = SetEvent(v6);
  }
  else
  {
    *(_DWORD *)(v2 + 9624) = 0;
    *(_DWORD *)(v2 + 9620) = 0;
    *(_BYTE *)(v2 + 9612) = 0;
    sub_10056B50(a2, v2, a1, a2 + 32);
    result = (*(int (__fastcall **)(signed int, int))(dword_1007CD9C + 384))(131076, 10 * *(_DWORD *)(v2 + 9620));
  }
  return result;
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CE14: using guessed type int dword_1007CE14;
// 102394C8: using guessed type char byte_102394C8;

//----- (1000A0E0) --------------------------------------------------------
void *__thiscall sub_1000A0E0(void *this)
{
  int v1; // ebp@0
  void *v2; // esi@1
  void *result; // eax@1

  v2 = this;
  sub_1000F76B(v1, (int)((char *)this + 40), 12, 16, (int)sub_10008C10, (int)sub_10008AE0);
  sub_1000F76B(v1, (int)((char *)v2 + 232), 12, 16, (int)sub_10008C10, (int)sub_10008AE0);
  sub_1000F76B(v1, (int)((char *)v2 + 424), 12, 16, (int)sub_10008C10, (int)sub_10008AE0);
  sub_1000F76B(v1, (int)((char *)v2 + 616), 12, 16, (int)sub_10008C10, (int)sub_10008AE0);
  sub_1000F76B(v1, (int)((char *)v2 + 808), 12, 16, (int)sub_10008C10, (int)sub_10008AE0);
  *((_DWORD *)v2 + 250) = 0;
  *((_DWORD *)v2 + 251) = 0;
  *((_DWORD *)v2 + 252) = 0;
  *((_DWORD *)v2 + 253) = 0;
  *((_DWORD *)v2 + 254) = 0;
  *((_DWORD *)v2 + 255) = 0;
  *((_DWORD *)v2 + 256) = 0;
  *((_DWORD *)v2 + 257) = 0;
  *((_DWORD *)v2 + 258) = 0;
  *((_DWORD *)v2 + 259) = 0;
  *((_DWORD *)v2 + 260) = 0;
  *((_DWORD *)v2 + 261) = 0;
  sub_1000F76B(v1, (int)((char *)v2 + 1048), 12, 16, (int)sub_10008C10, (int)sub_10008AE0);
  result = v2;
  *((_DWORD *)v2 + 310) = 0;
  *((_DWORD *)v2 + 311) = 0;
  *((_DWORD *)v2 + 312) = 0;
  *((_DWORD *)v2 + 313) = 0;
  *((_DWORD *)v2 + 314) = 0;
  *((_DWORD *)v2 + 315) = 0;
  return result;
}
// 10008C10: using guessed type int sub_10008C10();

//----- (1000A280) --------------------------------------------------------
int __thiscall sub_1000A280(int this)
{
  int v1; // ebp@0
  int v2; // esi@1

  v2 = this;
  sub_1002D4A8(*(_DWORD *)(this + 1252));
  *(_DWORD *)(v2 + 1252) = 0;
  sub_1002D4A8(*(_DWORD *)(v2 + 1240));
  *(_DWORD *)(v2 + 1240) = 0;
  sub_1000F684(v1, v2 + 1048, 12, 16, (int)sub_10008AE0);
  sub_1002D4A8(*(_DWORD *)(v2 + 1036));
  *(_DWORD *)(v2 + 1036) = 0;
  sub_1002D4A8(*(_DWORD *)(v2 + 1024));
  *(_DWORD *)(v2 + 1024) = 0;
  sub_1002D4A8(*(_DWORD *)(v2 + 1012));
  *(_DWORD *)(v2 + 1012) = 0;
  sub_1002D4A8(*(_DWORD *)(v2 + 1000));
  *(_DWORD *)(v2 + 1000) = 0;
  sub_1000F684(v1, v2 + 808, 12, 16, (int)sub_10008AE0);
  sub_1000F684(v1, v2 + 616, 12, 16, (int)sub_10008AE0);
  sub_1000F684(v1, v2 + 424, 12, 16, (int)sub_10008AE0);
  sub_1000F684(v1, v2 + 232, 12, 16, (int)sub_10008AE0);
  return sub_1000F684(v1, v2 + 40, 12, 16, (int)sub_10008AE0);
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);

//----- (1000A3B0) --------------------------------------------------------
void __thiscall sub_1000A3B0(int this, unsigned int a2)
{
  int v2; // esi@1
  int v3; // ecx@1
  int v4; // edi@3
  int v5; // edx@5
  int v6; // eax@6
  int v7; // ecx@9

  v2 = this;
  v3 = *(_DWORD *)(this + 4);
  if ( a2 >= v3 || *(_DWORD *)v2 > a2 )
  {
    if ( v3 == *(_DWORD *)(v2 + 8) )
      sub_1000A660(v2, v3);
    v7 = *(_DWORD *)(v2 + 4);
    if ( v7 )
    {
      _mm_storel_epi64((__m128i *)v7, _mm_loadl_epi64((const __m128i *)a2));
      *(_DWORD *)(v7 + 8) = *(_DWORD *)(a2 + 8);
    }
  }
  else
  {
    v4 = (signed int)(a2 - *(_DWORD *)v2) / 12;
    if ( v3 == *(_DWORD *)(v2 + 8) )
      sub_1000A660(v2, v3);
    v5 = *(_DWORD *)(v2 + 4);
    if ( v5 )
    {
      v6 = *(_DWORD *)v2;
      _mm_storel_epi64((__m128i *)v5, _mm_loadl_epi64((const __m128i *)(*(_DWORD *)v2 + 12 * v4)));
      *(_DWORD *)(v5 + 8) = *(_DWORD *)(v6 + 12 * v4 + 8);
      *(_DWORD *)(v2 + 4) += 12;
      return;
    }
  }
  *(_DWORD *)(v2 + 4) += 12;
}

//----- (1000A480) --------------------------------------------------------
int __usercall sub_1000A480@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  unsigned int v4; // ecx@1
  int v5; // eax@1
  unsigned int v6; // eax@4
  int v7; // edx@8
  int result; // eax@8

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 4);
  v5 = *(_DWORD *)(v3 + 8);
  if ( v4 == v5 )
  {
    if ( !v5 )
      *(_DWORD *)(v3 + 8) = 1;
    v6 = *(_DWORD *)(v3 + 8);
    if ( v4 >= v6 )
    {
      do
        v6 *= 2;
      while ( v4 >= v6 );
      *(_DWORD *)(v3 + 8) = v6;
    }
    *(_DWORD *)v3 = sub_1002D6F7(a2, a3, *(_DWORD *)v3, 24 * *(_DWORD *)(v3 + 8), 0x10u);
  }
  v7 = *(_DWORD *)(v3 + 4);
  result = *(_DWORD *)v3 + 24 * v7;
  *(_DWORD *)(v3 + 4) = v7 + 1;
  return result;
}

//----- (1000A4E0) --------------------------------------------------------
int __usercall sub_1000A4E0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  unsigned int v4; // ecx@1
  int v5; // eax@1
  unsigned int v6; // eax@4
  int v7; // ecx@8
  int result; // eax@8

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 4);
  v5 = *(_DWORD *)(v3 + 8);
  if ( v4 == v5 )
  {
    if ( !v5 )
      *(_DWORD *)(v3 + 8) = 1;
    v6 = *(_DWORD *)(v3 + 8);
    if ( v4 >= v6 )
    {
      do
        v6 *= 2;
      while ( v4 >= v6 );
      *(_DWORD *)(v3 + 8) = v6;
    }
    *(_DWORD *)v3 = sub_1002D6F7(a2, a3, *(_DWORD *)v3, 80 * *(_DWORD *)(v3 + 8), 0x10u);
  }
  v7 = *(_DWORD *)(v3 + 4);
  result = *(_DWORD *)v3 + 80 * v7;
  *(_DWORD *)(v3 + 4) = v7 + 1;
  return result;
}

//----- (1000A540) --------------------------------------------------------
int __usercall sub_1000A540@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  unsigned int v4; // ecx@1
  int v5; // eax@1
  unsigned int v6; // eax@4

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 4);
  v5 = *(_DWORD *)(v3 + 8);
  if ( v4 == v5 )
  {
    if ( !v5 )
      *(_DWORD *)(v3 + 8) = 1;
    v6 = *(_DWORD *)(v3 + 8);
    if ( v4 >= v6 )
    {
      do
        v6 *= 2;
      while ( v4 >= v6 );
      *(_DWORD *)(v3 + 8) = v6;
    }
    *(_DWORD *)v3 = sub_1002D6F7(a2, a3, *(_DWORD *)v3, 16 * *(_DWORD *)(v3 + 8), 0x10u);
  }
  return *(_DWORD *)v3 + 16 * (*(_DWORD *)(v3 + 4))++;
}

//----- (1000A590) --------------------------------------------------------
int __userpurge sub_1000A590@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, const void *a4)
{
  int v4; // esi@1
  unsigned int v5; // ecx@1
  int v6; // eax@1
  unsigned int v7; // eax@4
  int v8; // eax@8
  int v9; // edi@8
  int result; // eax@8

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 4);
  v6 = *(_DWORD *)(v4 + 8);
  if ( v5 == v6 )
  {
    if ( !v6 )
      *(_DWORD *)(v4 + 8) = 1;
    v7 = *(_DWORD *)(v4 + 8);
    if ( v5 >= v7 )
    {
      do
        v7 *= 2;
      while ( v5 >= v7 );
      *(_DWORD *)(v4 + 8) = v7;
    }
    *(_DWORD *)v4 = sub_1002D6F7(a2, a3, *(_DWORD *)v4, 112 * *(_DWORD *)(v4 + 8), 0x10u);
  }
  v8 = *(_DWORD *)(v4 + 4);
  v9 = 112 * v8;
  result = v8 + 1;
  *(_DWORD *)(v4 + 4) = result;
  qmemcpy((void *)(*(_DWORD *)v4 + v9), a4, 0x70u);
  return result;
}

//----- (1000A5F0) --------------------------------------------------------
int __usercall sub_1000A5F0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  unsigned int v4; // ecx@1
  int v5; // eax@1
  unsigned int v6; // eax@4
  int v7; // ecx@8

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 4);
  v5 = *(_DWORD *)(v3 + 8);
  if ( v4 == v5 )
  {
    if ( !v5 )
      *(_DWORD *)(v3 + 8) = 1;
    v6 = *(_DWORD *)(v3 + 8);
    if ( v4 >= v6 )
    {
      do
        v6 *= 2;
      while ( v4 >= v6 );
      *(_DWORD *)(v3 + 8) = v6;
    }
    *(_DWORD *)v3 = sub_1002D6F7(a2, a3, *(_DWORD *)v3, 112 * *(_DWORD *)(v3 + 8), 0x10u);
  }
  v7 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)(v3 + 4) = v7 + 1;
  return *(_DWORD *)v3 + 112 * v7;
}

//----- (1000A640) --------------------------------------------------------
int __thiscall sub_1000A640(int this)
{
  int v1; // eax@2
  int result; // eax@3

  if ( *(_DWORD *)(this + 8) )
  {
    v1 = *(_DWORD *)(this + 4);
    if ( v1 )
      result = 112 * v1 + *(_DWORD *)this - 112;
    else
      result = *(_DWORD *)this;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1000A660) --------------------------------------------------------
int __thiscall sub_1000A660(int this, int a2)
{
  int v2; // ebx@1
  int v3; // ecx@1
  int v4; // esi@1
  int result; // eax@1
  int v6; // edi@2
  unsigned int v7; // edx@3
  int v8; // ecx@3
  int v9; // edi@3
  unsigned int v10; // esi@3

  v2 = this;
  v3 = *(_DWORD *)(this + 8);
  v4 = *(_DWORD *)(v2 + 4);
  result = (v3 - v4) / 12;
  if ( (unsigned int)result < 1 )
  {
    v6 = (v4 - *(_DWORD *)v2) / 12;
    if ( (unsigned int)(357913941 - v6) < 1 )
      sub_1000DA74((int)"vector<T> too long");
    v7 = (unsigned __int64)(715827883i64 * (v3 - *(_DWORD *)v2)) >> 32;
    v8 = 0;
    v9 = v6 + 1;
    v10 = ((signed int)v7 >> 1) + (v7 >> 31);
    if ( 357913941 - (v10 >> 1) >= v10 )
      v8 = v10 + (v10 >> 1);
    if ( v8 >= (unsigned int)v9 )
      v9 = v8;
    result = sub_1000A750((void *)v2, v9);
  }
  return result;
}

//----- (1000A6F0) --------------------------------------------------------
int __userpurge sub_1000A6F0@<eax>(int a1@<ebx>, int a2@<edi>, LPVOID lpMem, int a4)
{
  LPVOID v4; // ecx@1
  unsigned int v5; // eax@4

  v4 = lpMem;
  if ( (unsigned int)a4 > 0x15555555 )
    sub_1002B797(a1, a2);
  if ( (unsigned int)(12 * a4) >= 0x1000 )
  {
    if ( (unsigned __int8)lpMem & 0x1F )
      sub_1002B797(a1, a2);
    v5 = *((_DWORD *)lpMem - 1);
    if ( v5 >= (unsigned int)lpMem )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) < 4 )
      sub_1002B797(a1, a2);
    if ( (unsigned int)((char *)lpMem - v5) > 0x23 )
      sub_1002B797(a1, a2);
    v4 = (LPVOID)*((_DWORD *)lpMem - 1);
  }
  return sub_1000F409(v4);
}

//----- (1000A750) --------------------------------------------------------
int __thiscall sub_1000A750(void *this, int a2)
{
  int v2; // ebx@1
  LPVOID v3; // esi@2
  int v4; // eax@4
  LPVOID v5; // eax@6
  int v6; // ebp@8
  int result; // eax@10

  v2 = (int)this;
  if ( a2 )
  {
    if ( (unsigned int)a2 > 0x15555555 )
      sub_1000DA57();
    v4 = 12 * a2;
    if ( (unsigned int)(12 * a2) < 0x1000 )
    {
      v3 = sub_1000F0A6(12 * a2);
    }
    else
    {
      if ( v4 + 35 <= (unsigned int)v4 )
        sub_1000DA57();
      v5 = sub_1000F0A6(v4 + 35);
      v3 = (LPVOID)((unsigned int)((char *)v5 + 35) & 0xFFFFFFE0);
      *((_DWORD *)v3 - 1) = v5;
    }
  }
  else
  {
    v3 = 0;
  }
  sub_100260E0(v3, *(const void **)v2, *(_DWORD *)(v2 + 4) - *(_DWORD *)v2);
  v6 = (*(_DWORD *)(v2 + 4) - *(_DWORD *)v2) / 12;
  if ( *(_DWORD *)v2 )
    sub_1000A6F0(v2, a2, *(LPVOID *)v2, (*(_DWORD *)(v2 + 8) - *(_DWORD *)v2) / 12);
  *(_DWORD *)(v2 + 8) = (char *)v3 + 12 * a2;
  result = (int)((char *)v3 + 12 * v6);
  *(_DWORD *)(v2 + 4) = result;
  *(_DWORD *)v2 = v3;
  return result;
}

//----- (1000A840) --------------------------------------------------------
int __usercall sub_1000A840@<eax>(int a1@<edx>, int a2@<ecx>, int a3)
{
  int v3; // edi@1
  int v4; // esi@1
  LPVOID v5; // eax@1

  v3 = a2;
  v4 = a1;
  v5 = sub_1000F0A6(8u);
  *(_DWORD *)v5 = *(_DWORD *)a3;
  *((_DWORD *)v5 + 1) = *(_DWORD *)v4;
  *(_DWORD *)v3 = v5;
  return v3;
}

//----- (1000A880) --------------------------------------------------------
void __usercall sub_1000A880(void **a1@<edx>, int a2@<ecx>, int a3@<ebx>)
{
  int v3; // edi@1
  void **v4; // esi@1
  void *v5; // eax@1
  void *v6; // esi@3
  void *v7; // edi@3
  int v8; // eax@3
  int (**v9)(); // [sp+8h] [bp-20h]@1
  void *v10; // [sp+Ch] [bp-1Ch]@3
  int v11; // [sp+10h] [bp-18h]@3
  LPVOID lpMem; // [sp+18h] [bp-10h]@1
  int v13; // [sp+24h] [bp-4h]@1

  v3 = a2;
  v4 = a1;
  sub_100091C0(&v9);
  v5 = *v4;
  v9 = &off_1006ECD4;
  *v4 = 0;
  lpMem = v5;
  v13 = 0;
  sub_10009270((int)&v9, a3, v3, v3);
  if ( lpMem )
    sub_1000F417(lpMem);
  v13 = 1;
  v6 = (void *)v11;
  v7 = v10;
  v9 = &off_1006EC70;
  v8 = sub_1000E579(v11);
  if ( v8 )
    sub_1000E0B3(v8);
  sub_1000E4BE(v6);
  sub_1000DDBA(v7);
}
// 1006EC70: using guessed type int (*off_1006EC70)();
// 1006ECD4: using guessed type int (*off_1006ECD4)();

//----- (1000A930) --------------------------------------------------------
void __thiscall sub_1000A930(int this)
{
  int v1; // esi@1
  void *v2; // eax@1
  void *v3; // edi@3
  int v4; // esi@3
  int v5; // eax@3

  v1 = this;
  v2 = *(void **)(this + 16);
  if ( v2 )
    sub_1000F417(v2);
  v3 = *(void **)(v1 + 4);
  *(_DWORD *)v1 = &off_1006EC70;
  v4 = *(_DWORD *)(v1 + 8);
  v5 = sub_1000E579(v4);
  if ( v5 )
    sub_1000E0B3(v5);
  sub_1000E4BE((LPVOID)v4);
  sub_1000DDBA(v3);
}
// 1006EC70: using guessed type int (*off_1006EC70)();

//----- (1000A9C0) --------------------------------------------------------
int __thiscall sub_1000A9C0(int this)
{
  int v1; // esi@1
  void *v2; // edi@1
  signed int v3; // eax@1
  int v4; // ST04_4@3
  int v5; // eax@3
  int v6; // eax@5

  v1 = this;
  v2 = *(void **)(this + 16);
  *(_DWORD *)(this + 16) = 0;
  v3 = sub_1000E554(*(_DWORD *)(this + 8));
  if ( v3 )
    sub_1000E0B3(v3);
  v4 = *(_DWORD *)(v1 + 4);
  *(_BYTE *)(v1 + 12) = 1;
  v5 = sub_1000DE23(v4);
  if ( v5 )
    sub_1000E0B3(v5);
  v6 = sub_1000E579(*(_DWORD *)(v1 + 8));
  if ( v6 )
    sub_1000E0B3(v6);
  (*((void (__thiscall **)(_DWORD))v2 + 1))(*(_DWORD *)v2);
  return sub_1000F417(v2);
}

//----- (1000AA60) --------------------------------------------------------
LPVOID __stdcall sub_1000AA60(void *a1, void *a2)
{
  LPVOID result; // eax@1
  LPVOID v3; // ecx@1
  LPVOID v4; // edx@2

  result = sub_1000F0A6(0x28u);
  v3 = a1;
  if ( a1 )
  {
    v4 = a2;
  }
  else
  {
    v3 = result;
    v4 = result;
  }
  if ( result )
    *(_DWORD *)result = v3;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = v4;
  return result;
}

//----- (1000AA90) --------------------------------------------------------
int __thiscall sub_1000AA90(int this, int a2, int a3, int a4, int a5)
{
  int v5; // edi@1
  void **v6; // eax@1
  void *v7; // esi@1
  LPVOID v8; // edx@1
  int v9; // eax@1

  v5 = this;
  v6 = *(void ***)(this + 4);
  v7 = *v6;
  v8 = sub_1000AAF0(*v6, *((void **)*v6 + 1), this, a4, this);
  v9 = *(_DWORD *)(v5 + 8);
  if ( (unsigned int)(107374181 - v9) < 1 )
    sub_1000DA74((int)"list<T> too long");
  *(_DWORD *)(v5 + 8) = v9 + 1;
  *((_DWORD *)v7 + 1) = v8;
  **((_DWORD **)v8 + 1) = v8;
  sub_10003050(v5, a2, **(_DWORD **)(v5 + 4) + 8, **(LPVOID **)(v5 + 4));
  return a2;
}

//----- (1000AAF0) --------------------------------------------------------
LPVOID __stdcall sub_1000AAF0(void *a1, void *a2, int a3, int a4, int a5)
{
  LPVOID result; // eax@1

  result = sub_1000AA60(a1, a2);
  if ( result != (LPVOID)-8 )
  {
    *((_DWORD *)result + 2) = **(_DWORD **)a4;
    *(_OWORD *)((char *)result + 12) = 0i64;
    _mm_storel_epi64((__m128i *)((char *)result + 28), 0i64);
    *((_DWORD *)result + 9) = 0;
  }
  return result;
}

//----- (1000AB30) --------------------------------------------------------
int __thiscall sub_1000AB30(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 262188) = 1;
  result = this;
  *(_DWORD *)(this + 262192) = 1;
  *(_DWORD *)(this + 262196) = 1;
  *(_DWORD *)(this + 262200) = 1;
  *(_DWORD *)(this + 262172) = 1;
  *(_DWORD *)(this + 393276) = 1;
  *(_DWORD *)(this + 262176) = 1;
  *(_DWORD *)(this + 393280) = 1;
  *(_DWORD *)(this + 262180) = 1;
  *(_DWORD *)(this + 393284) = 1;
  *(_DWORD *)(this + 262184) = 1;
  *(_DWORD *)(this + 393288) = 1;
  *(_BYTE *)(this + 0x40000) = 1;
  return result;
}

//----- (1000ABC0) --------------------------------------------------------
int __thiscall sub_1000ABC0(void *this, unsigned int a2, int a3)
{
  void *v3; // esi@1
  int v4; // edi@1
  int v5; // ecx@1
  int v6; // ecx@1
  int v7; // ecx@1
  int v8; // edx@1
  int v9; // ecx@1
  int v10; // ecx@1
  int v11; // edx@1
  int v12; // ecx@1
  int v13; // ecx@1
  int v14; // edx@1
  int v15; // ecx@1
  int v16; // ecx@1
  int v17; // edx@1
  int v18; // ecx@1
  int v19; // ecx@1
  int v20; // edx@1
  int v21; // ecx@1
  int v22; // edx@1
  int v23; // ecx@1
  int v24; // ecx@1
  int v25; // ecx@1
  int v26; // edx@1
  int v27; // ecx@1
  int result; // eax@1

  v3 = this;
  v4 = 8 * ((a2 >> 15) & 1 | 2 * (a2 & 0x3FFF));
  v5 = dword_10119430[v4];
  *(_WORD *)a3 = a2 & 0x7F00 | ((unsigned int)dword_10119430[v4] >> 24);
  *(_WORD *)(a3 + 2) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v5 >> 16);
  *(_WORD *)(a3 + 4) = a2 & 0x7F00 | BYTE1(v5);
  *(_WORD *)(a3 + 6) = a2 & 0x7F00 | (unsigned __int8)v5;
  v6 = dword_10119434[v4];
  *(_WORD *)(a3 + 8) = a2 & 0x7F00 | ((unsigned int)dword_10119434[v4] >> 24);
  *(_WORD *)(a3 + 10) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v6 >> 16);
  *(_WORD *)(a3 + 12) = a2 & 0x7F00 | BYTE1(v6);
  *(_WORD *)(a3 + 14) = a2 & 0x7F00 | (unsigned __int8)v6;
  v7 = dword_10119438[v4];
  v8 = a3 + 14 + 2 * *((_DWORD *)v3 + 65537);
  *(_WORD *)(v8 - 14) = a2 & 0x7F00 | ((unsigned int)dword_10119438[v4] >> 24);
  *(_WORD *)(v8 - 12) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v7 >> 16);
  *(_WORD *)(v8 - 10) = a2 & 0x7F00 | BYTE1(v7);
  *(_WORD *)(v8 - 8) = a2 & 0x7F00 | (unsigned __int8)v7;
  v9 = dword_1011943C[v4];
  *(_WORD *)(v8 - 6) = a2 & 0x7F00 | ((unsigned int)dword_1011943C[v4] >> 24);
  *(_WORD *)(v8 - 4) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v9 >> 16);
  *(_WORD *)(v8 - 2) = a2 & 0x7F00 | BYTE1(v9);
  *(_WORD *)v8 = a2 & 0x7F00 | (unsigned __int8)v9;
  v10 = dword_10119440[v4];
  v11 = v8 + 2 * *((_DWORD *)v3 + 65537);
  *(_WORD *)(v11 - 14) = a2 & 0x7F00 | ((unsigned int)dword_10119440[v4] >> 24);
  *(_WORD *)(v11 - 12) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v10 >> 16);
  *(_WORD *)(v11 - 10) = a2 & 0x7F00 | BYTE1(v10);
  *(_WORD *)(v11 - 8) = a2 & 0x7F00 | (unsigned __int8)v10;
  v12 = dword_10119444[v4];
  *(_WORD *)(v11 - 6) = a2 & 0x7F00 | ((unsigned int)dword_10119444[v4] >> 24);
  *(_WORD *)(v11 - 4) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v12 >> 16);
  *(_WORD *)(v11 - 2) = a2 & 0x7F00 | BYTE1(v12);
  *(_WORD *)v11 = a2 & 0x7F00 | (unsigned __int8)v12;
  v13 = dword_10119448[v4];
  v14 = v11 + 2 * *((_DWORD *)v3 + 65537);
  *(_WORD *)(v14 - 14) = a2 & 0x7F00 | ((unsigned int)dword_10119448[v4] >> 24);
  *(_WORD *)(v14 - 12) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v13 >> 16);
  *(_WORD *)(v14 - 10) = a2 & 0x7F00 | BYTE1(v13);
  *(_WORD *)(v14 - 8) = a2 & 0x7F00 | (unsigned __int8)v13;
  v15 = dword_1011944C[v4];
  *(_WORD *)(v14 - 6) = a2 & 0x7F00 | ((unsigned int)dword_1011944C[v4] >> 24);
  *(_WORD *)(v14 - 4) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v15 >> 16);
  *(_WORD *)(v14 - 2) = a2 & 0x7F00 | BYTE1(v15);
  *(_WORD *)v14 = a2 & 0x7F00 | (unsigned __int8)v15;
  v16 = dword_10119450[v4];
  v17 = v14 + 2 * *((_DWORD *)v3 + 65537);
  *(_WORD *)(v17 - 14) = a2 & 0x7F00 | ((unsigned int)dword_10119450[v4] >> 24);
  *(_WORD *)(v17 - 12) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v16 >> 16);
  *(_WORD *)(v17 - 10) = a2 & 0x7F00 | BYTE1(v16);
  *(_WORD *)(v17 - 8) = a2 & 0x7F00 | (unsigned __int8)v16;
  v18 = dword_10119454[v4];
  *(_WORD *)(v17 - 6) = a2 & 0x7F00 | ((unsigned int)dword_10119454[v4] >> 24);
  *(_WORD *)(v17 - 4) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v18 >> 16);
  *(_WORD *)(v17 - 2) = a2 & 0x7F00 | BYTE1(v18);
  *(_WORD *)v17 = a2 & 0x7F00 | (unsigned __int8)v18;
  v19 = dword_10119458[v4];
  v20 = v17 + 2 * *((_DWORD *)v3 + 65537);
  *(_WORD *)(v20 - 14) = a2 & 0x7F00 | ((unsigned int)dword_10119458[v4] >> 24);
  *(_WORD *)(v20 - 12) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v19 >> 16);
  *(_WORD *)(v20 - 10) = a2 & 0x7F00 | BYTE1(v19);
  *(_WORD *)(v20 - 8) = a2 & 0x7F00 | (unsigned __int8)v19;
  v21 = dword_1011945C[v4];
  *(_WORD *)(v20 - 6) = a2 & 0x7F00 | ((unsigned int)dword_1011945C[v4] >> 24);
  *(_WORD *)(v20 - 4) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v21 >> 16);
  *(_WORD *)(v20 - 2) = a2 & 0x7F00 | BYTE1(v21);
  *(_WORD *)v20 = a2 & 0x7F00 | (unsigned __int8)v21;
  v22 = v20 + 2 * *((_DWORD *)v3 + 65537);
  v23 = dword_10119460[v4];
  *(_WORD *)(v22 - 14) = a2 & 0x7F00 | ((unsigned int)dword_10119460[v4] >> 24);
  *(_WORD *)(v22 - 12) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v23 >> 16);
  *(_WORD *)(v22 - 10) = a2 & 0x7F00 | BYTE1(v23);
  *(_WORD *)(v22 - 8) = a2 & 0x7F00 | (unsigned __int8)v23;
  v24 = dword_10119464[v4];
  *(_WORD *)(v22 - 6) = a2 & 0x7F00 | ((unsigned int)dword_10119464[v4] >> 24);
  *(_WORD *)(v22 - 4) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v24 >> 16);
  *(_WORD *)(v22 - 2) = a2 & 0x7F00 | BYTE1(v24);
  *(_WORD *)v22 = a2 & 0x7F00 | (unsigned __int8)v24;
  v25 = dword_10119468[v4];
  v26 = v22 + 2 * *((_DWORD *)v3 + 65537);
  *(_WORD *)(v26 - 14) = a2 & 0x7F00 | ((unsigned int)dword_10119468[v4] >> 24);
  *(_WORD *)(v26 - 12) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v25 >> 16);
  *(_WORD *)(v26 - 10) = a2 & 0x7F00 | BYTE1(v25);
  *(_WORD *)(v26 - 8) = a2 & 0x7F00 | (unsigned __int8)v25;
  v27 = dword_1011946C[v4];
  *(_WORD *)(v26 - 6) = a2 & 0x7F00 | ((unsigned int)dword_1011946C[v4] >> 24);
  *(_WORD *)(v26 - 4) = a2 & 0x7F00 | (unsigned __int8)((unsigned int)v27 >> 16);
  *(_WORD *)(v26 - 2) = a2 & 0x7F00 | BYTE1(v27);
  result = a2 & 0x7F00 | (unsigned __int8)v27;
  *(_WORD *)v26 = result;
  return result;
}
// 10119430: using guessed type int dword_10119430[];
// 10119434: using guessed type int dword_10119434[];
// 10119438: using guessed type int dword_10119438[];
// 1011943C: using guessed type int dword_1011943C[];
// 10119440: using guessed type int dword_10119440[];
// 10119444: using guessed type int dword_10119444[];
// 10119448: using guessed type int dword_10119448[];
// 1011944C: using guessed type int dword_1011944C[];
// 10119450: using guessed type int dword_10119450[];
// 10119454: using guessed type int dword_10119454[];
// 10119458: using guessed type int dword_10119458[];
// 1011945C: using guessed type int dword_1011945C[];
// 10119460: using guessed type int dword_10119460[];
// 10119464: using guessed type int dword_10119464[];
// 10119468: using guessed type int dword_10119468[];
// 1011946C: using guessed type int dword_1011946C[];

//----- (1000AF90) --------------------------------------------------------
int __thiscall sub_1000AF90(int this, unsigned int a2, int a3)
{
  int v3; // esi@1
  int v4; // edi@1
  unsigned int v5; // edx@1
  int v6; // edx@1
  unsigned int v7; // ecx@1
  unsigned int v8; // ecx@1
  int v9; // edx@1
  unsigned int v10; // ecx@1
  int v11; // edx@1
  unsigned int v12; // ecx@1
  int v13; // edx@1
  unsigned int v14; // ecx@1
  int v15; // edx@1
  unsigned int v16; // ecx@1
  int v17; // edx@1
  unsigned int v18; // ecx@1
  int v19; // edx@1
  int result; // eax@1

  v3 = 8 * ((a2 >> 15) & 1 | 2 * (a2 & 0x3FFF));
  v4 = this;
  v5 = dword_10119430[v3];
  *(_WORD *)a3 = a2 & 0x7FF0 | ((unsigned int)dword_10119430[v3] >> 28) & 0xF;
  *(_WORD *)(a3 + 2) = a2 & 0x7FF0 | (v5 >> 24) & 0xF;
  *(_WORD *)(a3 + 4) = a2 & 0x7FF0 | (v5 >> 20) & 0xF;
  *(_WORD *)(a3 + 6) = a2 & 0x7FF0 | BYTE2(v5) & 0xF;
  *(_WORD *)(a3 + 8) = a2 & 0x7FF0 | (v5 >> 12) & 0xF;
  *(_WORD *)(a3 + 10) = a2 & 0x7FF0 | (v5 >> 8) & 0xF;
  *(_WORD *)(a3 + 12) = a2 & 0x7FF0 | (v5 >> 4) & 0xF;
  *(_WORD *)(a3 + 14) = a2 & 0x7FF0 | v5 & 0xF;
  v6 = a3 + 14 + 2 * *(_DWORD *)(this + 262148);
  v7 = dword_10119434[v3];
  *(_WORD *)(v6 - 14) = a2 & 0x7FF0 | ((unsigned int)dword_10119434[v3] >> 28) & 0xF;
  *(_WORD *)(v6 - 12) = a2 & 0x7FF0 | (v7 >> 24) & 0xF;
  *(_WORD *)(v6 - 10) = a2 & 0x7FF0 | (v7 >> 20) & 0xF;
  *(_WORD *)(v6 - 8) = a2 & 0x7FF0 | BYTE2(v7) & 0xF;
  *(_WORD *)(v6 - 6) = a2 & 0x7FF0 | (v7 >> 12) & 0xF;
  *(_WORD *)(v6 - 4) = a2 & 0x7FF0 | (v7 >> 8) & 0xF;
  *(_WORD *)(v6 - 2) = a2 & 0x7FF0 | (v7 >> 4) & 0xF;
  *(_WORD *)v6 = a2 & 0x7FF0 | v7 & 0xF;
  v8 = dword_10119438[v3];
  v9 = v6 + 2 * *(_DWORD *)(v4 + 262148);
  *(_WORD *)(v9 - 14) = a2 & 0x7FF0 | ((unsigned int)dword_10119438[v3] >> 28) & 0xF;
  *(_WORD *)(v9 - 12) = a2 & 0x7FF0 | (v8 >> 24) & 0xF;
  *(_WORD *)(v9 - 10) = a2 & 0x7FF0 | (v8 >> 20) & 0xF;
  *(_WORD *)(v9 - 8) = a2 & 0x7FF0 | BYTE2(v8) & 0xF;
  *(_WORD *)(v9 - 6) = a2 & 0x7FF0 | (v8 >> 12) & 0xF;
  *(_WORD *)(v9 - 4) = a2 & 0x7FF0 | (v8 >> 8) & 0xF;
  *(_WORD *)(v9 - 2) = a2 & 0x7FF0 | (v8 >> 4) & 0xF;
  *(_WORD *)v9 = a2 & 0x7FF0 | v8 & 0xF;
  v10 = dword_1011943C[v3];
  v11 = v9 + 2 * *(_DWORD *)(v4 + 262148);
  *(_WORD *)(v11 - 14) = a2 & 0x7FF0 | ((unsigned int)dword_1011943C[v3] >> 28) & 0xF;
  *(_WORD *)(v11 - 12) = a2 & 0x7FF0 | (v10 >> 24) & 0xF;
  *(_WORD *)(v11 - 10) = a2 & 0x7FF0 | (v10 >> 20) & 0xF;
  *(_WORD *)(v11 - 8) = a2 & 0x7FF0 | BYTE2(v10) & 0xF;
  *(_WORD *)(v11 - 6) = a2 & 0x7FF0 | (v10 >> 12) & 0xF;
  *(_WORD *)(v11 - 4) = a2 & 0x7FF0 | (v10 >> 8) & 0xF;
  *(_WORD *)(v11 - 2) = a2 & 0x7FF0 | (v10 >> 4) & 0xF;
  *(_WORD *)v11 = a2 & 0x7FF0 | v10 & 0xF;
  v12 = dword_10119440[v3];
  v13 = v11 + 2 * *(_DWORD *)(v4 + 262148);
  *(_WORD *)(v13 - 14) = a2 & 0x7FF0 | ((unsigned int)dword_10119440[v3] >> 28) & 0xF;
  *(_WORD *)(v13 - 12) = a2 & 0x7FF0 | (v12 >> 24) & 0xF;
  *(_WORD *)(v13 - 10) = a2 & 0x7FF0 | (v12 >> 20) & 0xF;
  *(_WORD *)(v13 - 8) = a2 & 0x7FF0 | BYTE2(v12) & 0xF;
  *(_WORD *)(v13 - 6) = a2 & 0x7FF0 | (v12 >> 12) & 0xF;
  *(_WORD *)(v13 - 4) = a2 & 0x7FF0 | (v12 >> 8) & 0xF;
  *(_WORD *)(v13 - 2) = a2 & 0x7FF0 | (v12 >> 4) & 0xF;
  *(_WORD *)v13 = a2 & 0x7FF0 | v12 & 0xF;
  v14 = dword_10119444[v3];
  v15 = v13 + 2 * *(_DWORD *)(v4 + 262148);
  *(_WORD *)(v15 - 14) = a2 & 0x7FF0 | ((unsigned int)dword_10119444[v3] >> 28) & 0xF;
  *(_WORD *)(v15 - 12) = a2 & 0x7FF0 | (v14 >> 24) & 0xF;
  *(_WORD *)(v15 - 10) = a2 & 0x7FF0 | (v14 >> 20) & 0xF;
  *(_WORD *)(v15 - 8) = a2 & 0x7FF0 | BYTE2(v14) & 0xF;
  *(_WORD *)(v15 - 6) = a2 & 0x7FF0 | (v14 >> 12) & 0xF;
  *(_WORD *)(v15 - 4) = a2 & 0x7FF0 | (v14 >> 8) & 0xF;
  *(_WORD *)(v15 - 2) = a2 & 0x7FF0 | (v14 >> 4) & 0xF;
  *(_WORD *)v15 = a2 & 0x7FF0 | v14 & 0xF;
  v16 = dword_10119448[v3];
  v17 = v15 + 2 * *(_DWORD *)(v4 + 262148);
  *(_WORD *)(v17 - 14) = a2 & 0x7FF0 | ((unsigned int)dword_10119448[v3] >> 28) & 0xF;
  *(_WORD *)(v17 - 12) = a2 & 0x7FF0 | (v16 >> 24) & 0xF;
  *(_WORD *)(v17 - 10) = a2 & 0x7FF0 | (v16 >> 20) & 0xF;
  *(_WORD *)(v17 - 8) = a2 & 0x7FF0 | BYTE2(v16) & 0xF;
  *(_WORD *)(v17 - 6) = a2 & 0x7FF0 | (v16 >> 12) & 0xF;
  *(_WORD *)(v17 - 4) = a2 & 0x7FF0 | (v16 >> 8) & 0xF;
  *(_WORD *)(v17 - 2) = a2 & 0x7FF0 | (v16 >> 4) & 0xF;
  *(_WORD *)v17 = a2 & 0x7FF0 | v16 & 0xF;
  v18 = dword_1011944C[v3];
  v19 = v17 + 2 * *(_DWORD *)(v4 + 262148);
  *(_WORD *)(v19 - 14) = a2 & 0x7FF0 | ((unsigned int)dword_1011944C[v3] >> 28) & 0xF;
  *(_WORD *)(v19 - 12) = a2 & 0x7FF0 | (v18 >> 24) & 0xF;
  *(_WORD *)(v19 - 10) = a2 & 0x7FF0 | (v18 >> 20) & 0xF;
  *(_WORD *)(v19 - 8) = a2 & 0x7FF0 | BYTE2(v18) & 0xF;
  *(_WORD *)(v19 - 6) = a2 & 0x7FF0 | (v18 >> 12) & 0xF;
  *(_WORD *)(v19 - 4) = a2 & 0x7FF0 | (v18 >> 8) & 0xF;
  result = a2 & 0x7FF0 | ((unsigned __int8)v18 >> 4);
  *(_WORD *)(v19 - 2) = result;
  *(_WORD *)v19 = a2 & 0x7FF0 | v18 & 0xF;
  return result;
}
// 10119430: using guessed type int dword_10119430[];
// 10119434: using guessed type int dword_10119434[];
// 10119438: using guessed type int dword_10119438[];
// 1011943C: using guessed type int dword_1011943C[];
// 10119440: using guessed type int dword_10119440[];
// 10119444: using guessed type int dword_10119444[];
// 10119448: using guessed type int dword_10119448[];
// 1011944C: using guessed type int dword_1011944C[];

//----- (1000B390) --------------------------------------------------------
int __thiscall sub_1000B390(void *this, int a2, int a3)
{
  int v3; // ebp@1
  int v4; // ebx@1
  int v5; // edx@1
  int result; // eax@1
  int v7; // edi@1
  int v8; // esi@2
  signed int v9; // eax@2
  bool v10; // zf@10
  void *v11; // [sp+10h] [bp-Ch]@1
  int v12; // [sp+14h] [bp-8h]@1
  signed int v13; // [sp+18h] [bp-4h]@1
  signed int v14; // [sp+20h] [bp+4h]@2
  int v15; // [sp+24h] [bp+8h]@1

  *((_DWORD *)this + a3 + 65543) = 0;
  v3 = (a3 + 124) << 13;
  v4 = 0;
  v11 = this;
  v5 = (int)((char *)this + 4 * (a3 + 98319));
  result = a3 << 12;
  v7 = a2;
  v12 = (int)((char *)this + 4 * (a3 + 98319));
  v15 = a3 << 12;
  v13 = 64;
  do
  {
    v8 = (int)((char *)this + 4 * (v4 + result + 65552));
    v9 = 32;
    v14 = 32;
    do
    {
      if ( *(_DWORD *)v5 || *(_DWORD *)(v8 - 4) )
      {
        *(_DWORD *)(v8 - 4) = 0;
        *((_DWORD *)this + v4 + v15 + 81935) = 0;
        sub_1000ABC0(this, *(_WORD *)((char *)&dword_10119430[0] + v3 + 2), v7);
        this = v11;
        v5 = v12;
        v9 = v14;
      }
      if ( *(_DWORD *)v5 || *(_DWORD *)v8 )
      {
        *(_DWORD *)v8 = 0;
        *((_DWORD *)this + v4 + v15 + 81936) = 0;
        sub_1000ABC0(this, *(_WORD *)((char *)dword_10119430 + v3), v7 + 16);
        v5 = v12;
        v9 = v14;
      }
      this = v11;
      v3 += 4;
      v7 += 32;
      v4 += 2;
      v8 += 8;
      --v9;
      v14 = v9;
    }
    while ( v9 );
    v7 += 16 * (*((_DWORD *)v11 + 65537) - 64);
    v10 = v13-- == 1;
    result = v15;
  }
  while ( !v10 );
  *(_DWORD *)v5 = 0;
  return result;
}
// 10119430: using guessed type int dword_10119430[];

//----- (1000B4B0) --------------------------------------------------------
int __thiscall sub_1000B4B0(int this, int a2, int a3)
{
  int v3; // ebp@1
  int v4; // ebx@1
  int v5; // edx@1
  int result; // eax@1
  int v7; // edi@1
  int v8; // esi@2
  signed int v9; // eax@2
  bool v10; // zf@10
  int v11; // [sp+10h] [bp-Ch]@1
  int v12; // [sp+14h] [bp-8h]@1
  signed int v13; // [sp+18h] [bp-4h]@1
  signed int v14; // [sp+20h] [bp+4h]@2
  int v15; // [sp+24h] [bp+8h]@1

  *(_DWORD *)(this + 4 * a3 + 262172) = 0;
  v3 = (a3 + 124) << 13;
  v4 = 0;
  v11 = this;
  v5 = this + 4 * (a3 + 98319);
  result = a3 << 12;
  v7 = a2;
  v12 = this + 4 * (a3 + 98319);
  v15 = a3 << 12;
  v13 = 64;
  do
  {
    v8 = this + 4 * (v4 + result + 65552);
    v9 = 32;
    v14 = 32;
    do
    {
      if ( *(_DWORD *)v5 || *(_DWORD *)(v8 - 4) )
      {
        *(_DWORD *)(v8 - 4) = 0;
        *(_DWORD *)(this + 4 * (v4 + v15) + 327740) = 1;
        sub_1000AF90(this, *(_WORD *)((char *)&dword_10119430[0] + v3 + 2), v7);
        this = v11;
        v5 = v12;
        v9 = v14;
      }
      if ( *(_DWORD *)v5 || *(_DWORD *)v8 )
      {
        *(_DWORD *)v8 = 0;
        *(_DWORD *)(this + 4 * (v4 + v15) + 327740) = 1;
        sub_1000AF90(this, *(_WORD *)((char *)dword_10119430 + v3), v7 + 16);
        v5 = v12;
        v9 = v14;
      }
      this = v11;
      v3 += 4;
      v7 += 32;
      v4 += 2;
      v8 += 8;
      --v9;
      v14 = v9;
    }
    while ( v9 );
    v7 += 16 * (*(_DWORD *)(v11 + 262148) - 64);
    v10 = v13-- == 1;
    result = v15;
  }
  while ( !v10 );
  *(_DWORD *)v5 = 0;
  return result;
}
// 10119430: using guessed type int dword_10119430[];

//----- (1000B5D0) --------------------------------------------------------
int __thiscall sub_1000B5D0(void *this)
{
  unsigned int v1; // edi@1
  unsigned int *v2; // esi@1
  int v3; // ebx@1
  int v4; // ebp@4
  unsigned int v5; // ebx@5
  int v6; // edi@5
  int v7; // ebx@5
  unsigned int v8; // ecx@5
  signed int v9; // edx@5
  bool v10; // zf@7
  int v12; // [sp+18h] [bp-14h]@1
  signed int v13; // [sp+1Ch] [bp-10h]@4
  signed int v14; // [sp+20h] [bp-Ch]@3
  int v15; // [sp+28h] [bp-4h]@3
  int v16; // [sp+2Ch] [bp+0h]@1
  unsigned int v17; // [sp+30h] [bp+4h]@2

  v1 = 0;
  v2 = (unsigned int *)this;
  v3 = 0;
  v12 = 0;
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, int *))(**(_DWORD **)(dword_1011942C + 8) + 56))(
    *(_DWORD *)(dword_1011942C + 8),
    **(_DWORD **)(dword_1011942C + 27280016),
    0,
    4,
    0,
    &v16);
  if ( v16 )
  {
    v3 = v16;
    v12 = v16;
    v1 = v17 >> 2;
  }
  v15 = 4 * v1;
  v14 = 128;
  do
  {
    v4 = v3;
    v13 = 256;
    do
    {
      v4 += 4;
      v5 = *(_WORD *)v2;
      v6 = v5 & 0x1F;
      v7 = (v5 >> 10) & 0x1F;
      v8 = ((unsigned int)*(_WORD *)v2 >> 5) & 0x1F;
      v9 = 8160;
      if ( *(_WORD *)v2 < 0 )
        v9 = 0;
      v2 = (unsigned int *)((char *)v2 + 2);
      v10 = v13-- == 1;
      *(_DWORD *)(v4 - 4) = ((unsigned int)v7 >> 2) | 8
                                                    * (v7 | 8
                                                          * ((v8 | ((v6 & 0xFFFFFFFC) << 8)) & 0xFFFFFFFC | 32 * (v8 | ((v6 | v9) << 8))));
    }
    while ( !v10 );
    v3 = v15 + v12;
    v10 = v14-- == 1;
    v12 += v15;
  }
  while ( !v10 );
  return (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(dword_1011942C + 8) + 60))(
           *(_DWORD *)(dword_1011942C + 8),
           **(_DWORD **)(dword_1011942C + 27280016),
           0);
}
// 1011942C: using guessed type int dword_1011942C;

//----- (1000B6E0) --------------------------------------------------------
signed int __usercall sub_1000B6E0@<eax>(int a1@<ebp>, int a2@<edi>, int a3@<esi>, unsigned int a4)
{
  signed int v4; // ecx@1
  int v5; // ebx@1
  signed int result; // eax@1
  int v7; // edi@3
  signed int v8; // esi@3
  int v9; // eax@6
  int v10; // ebp@6
  int v11; // [sp+14h] [bp-28h]@1
  int v12; // [sp+18h] [bp-24h]@1
  int v13; // [sp+1Ch] [bp-20h]@1
  signed int v14; // [sp+24h] [bp-18h]@1
  signed int v15; // [sp+28h] [bp-14h]@1
  char v16; // [sp+30h] [bp-Ch]@6
  int v17; // [sp+38h] [bp-4h]@8
  int retaddr; // [sp+3Ch] [bp+0h]@6

  v4 = 0x100000;
  v5 = dword_1007CF18;
  v13 = a1;
  result = 1;
  v12 = a3;
  v11 = a2;
  v14 = 0x100000;
  v15 = 1;
  if ( *(_BYTE *)(dword_1007CF18 + 0x40000) )
  {
    sub_1000B5D0((void *)dword_1007CF18);
    result = 1;
    v4 = 0x100000;
  }
  v7 = 0;
  v8 = 27280000;
  do
  {
    if ( result && *(_DWORD *)(v5 + v8 - 27017828) )
    {
      v9 = dword_1011942C;
      v10 = 0;
      *(_DWORD *)(v5 + 262148) = 0;
      (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, char *, int, int, int))(**(_DWORD **)(v9 + 8)
                                                                                               + 56))(
        *(_DWORD *)(v9 + 8),
        **(_DWORD **)(v8 + dword_1011942C),
        0,
        4,
        0,
        &v16,
        v11,
        v12,
        v13);
      if ( retaddr )
      {
        v10 = retaddr;
        *(_DWORD *)(v5 + 262148) = a4 >> 1;
      }
      if ( v17 & *(_DWORD *)&v16 )
        sub_1000B4B0(v5, v10, v7);
      else
        sub_1000B390((void *)v5, v10, v7);
      v13 = 0;
      v12 = **(_DWORD **)(v8 + dword_1011942C);
      v11 = *(_DWORD *)(dword_1011942C + 8);
      (*(void (**)(void))(**(_DWORD **)(dword_1011942C + 8) + 60))();
      result = v15;
      v4 = v14;
    }
    v4 *= 2;
    result *= 2;
    v8 += 4;
    v14 = v4;
    ++v7;
    v15 = result;
  }
  while ( v8 < 27280016 );
  return result;
}
// 1000B6E0: could not find valid save-restore pair for ebp
// 1000B6E0: could not find valid save-restore pair for edi
// 1000B6E0: could not find valid save-restore pair for esi
// 1007CF18: using guessed type int dword_1007CF18;
// 1007CF48: using guessed type int dword_1007CF48;
// 1011942C: using guessed type int dword_1011942C;

//----- (1000B7E0) --------------------------------------------------------
void *__thiscall sub_1000B7E0(void *this)
{
  void *v1; // ebx@1
  int v2; // ST34_4@1
  int v3; // ST30_4@1
  void *result; // eax@1

  v1 = this;
  sub_10042AF0(this);
  v2 = (int)((char *)v1 + 27280036);
  *(_DWORD *)v2 = 0;
  v3 = (int)((char *)v1 + 27280040);
  *(_DWORD *)v3 = 0;
  *(_DWORD *)(v3 + 4) = 0;
  *(_DWORD *)v3 = sub_1000C2C0(0, 0);
  *((_DWORD *)v1 + 6820012) = 0;
  *((_DWORD *)v1 + 6820013) = 0;
  *((_DWORD *)v1 + 6820014) = 0;
  *(_DWORD *)v2 = 1065353216;
  sub_10003450((int)((char *)v1 + 27280036), 8);
  sub_10028330((char *)v1 + 512, 0, 0x100000u);
  sub_10028330((char *)v1 + 1049092, 0, 0x1000000u);
  sub_10028330((char *)v1 + 17826308, 0, 0x900000u);
  *((_DWORD *)v1 + 6819997) = 0;
  result = v1;
  *((_DWORD *)v1 + 262272) = 0;
  *((_BYTE *)v1 + 27279992) = 0;
  return result;
}

//----- (1000B8D0) --------------------------------------------------------
unsigned int __userpurge sub_1000B8D0@<eax>(unsigned int result@<eax>, int a2@<ecx>, int a3, int a4, unsigned int a5, unsigned int a6, int a7, int a8)
{
  unsigned int v8; // edx@1
  unsigned int v9; // ecx@2
  int v10; // ebp@2
  int v11; // esi@2
  bool v12; // bl@4
  bool v13; // cl@5
  int v14; // ebx@5
  signed int v15; // edi@5
  int v16; // eax@5
  int v17; // edx@8
  unsigned int v18; // [sp+0h] [bp-10h]@1
  int v19; // [sp+4h] [bp-Ch]@1
  int v20; // [sp+24h] [bp+14h]@4
  unsigned int v21; // [sp+28h] [bp+18h]@3

  v8 = 0;
  v19 = a2;
  v18 = 0;
  if ( a6 )
  {
    v9 = a5;
    v10 = a8;
    v11 = a7;
    do
    {
      result = 0;
      v21 = 0;
      if ( v9 )
      {
        v20 = v8 + a4;
        v12 = v10 != 2;
        do
        {
          v13 = v12;
          v14 = 0;
          v15 = 2;
          v16 = v19 + 1049092 + 2 * (a3 + (result >> v13) + (v20 << 11));
          do
          {
            if ( v10 == 2 )
            {
              *(_WORD *)v16 = *(_WORD *)(v11 + 2 * dword_1006D4F0[(v15 - 2) ^ 1]);
              *(_WORD *)(v16 + 2) = *(_WORD *)(v11 + 2 * dword_1006D4F0[(v15 - 1) ^ 1]);
              *(_WORD *)(v16 + 4) = *(_WORD *)(v11 + 2 * dword_1006D4F0[v15 ^ 1]);
              *(_WORD *)(v16 + 6) = *(_WORD *)(v11 + 2 * dword_1006D4F0[(v15 + 1) ^ 1]);
              *(_WORD *)(v16 + 8) = *(_WORD *)(v11 + 2 * dword_1006D4F0[(v15 + 2) ^ 1]);
              *(_WORD *)(v16 + 10) = *(_WORD *)(v11 + 2 * dword_1006D4F0[(v15 + 3) ^ 1]);
              *(_WORD *)(v16 + 12) = *(_WORD *)(v11 + 2 * dword_1006D4F0[(v15 + 4) ^ 1]);
              *(_WORD *)(v16 + 14) = *(_WORD *)(v11 + 2 * dword_1006D4F0[(v15 + 5) ^ 1]);
            }
            else
            {
              v17 = 8 * (v14 ^ 1);
              *(_BYTE *)v16 = *(_BYTE *)(v11 + dword_1006D4F4[v17]);
              *(_BYTE *)(v16 + 1) = *(_BYTE *)(v11 + dword_1006D4F0[v17]);
              *(_BYTE *)(v16 + 2) = *(_BYTE *)(v11 + dword_1006D4FC[v17]);
              *(_BYTE *)(v16 + 3) = *(_BYTE *)(v11 + dword_1006D4F8[v17]);
              *(_BYTE *)(v16 + 4) = *(_BYTE *)(v11 + dword_1006D504[v17]);
              *(_BYTE *)(v16 + 5) = *(_BYTE *)(v11 + dword_1006D500[v17]);
              *(_BYTE *)(v16 + 6) = *(_BYTE *)(v11 + dword_1006D50C[v17]);
              *(_BYTE *)(v16 + 7) = *(_BYTE *)(v11 + dword_1006D508[v17]);
            }
            v15 += 8;
            ++v14;
            v16 += 4096;
          }
          while ( (unsigned int)v15 < 0x42 );
          v11 += v10 << 6;
          result = v21 + 8;
          v9 = a5;
          v12 = v10 != 2;
          v21 = result;
        }
        while ( result < a5 );
        v8 = v18;
      }
      v8 += 8;
      v18 = v8;
    }
    while ( v8 < a6 );
  }
  return result;
}
// 1006D4F0: using guessed type int dword_1006D4F0[];
// 1006D4F4: using guessed type int dword_1006D4F4[];
// 1006D4F8: using guessed type int dword_1006D4F8[];
// 1006D4FC: using guessed type int dword_1006D4FC[];
// 1006D500: using guessed type int dword_1006D500[];
// 1006D504: using guessed type int dword_1006D504[];
// 1006D508: using guessed type int dword_1006D508[];
// 1006D50C: using guessed type int dword_1006D50C[];

//----- (1000BAC0) --------------------------------------------------------
int __thiscall sub_1000BAC0(int this, unsigned int a2, int a3)
{
  unsigned int v3; // esi@1
  int v4; // ebp@1
  unsigned int v5; // edi@1
  int v6; // edx@1
  int v7; // ecx@1
  int v8; // ebx@1
  int v9; // eax@1
  unsigned int v10; // ebx@3
  unsigned int v11; // edi@4
  int v12; // edi@10
  unsigned int v13; // ebx@21
  int result; // eax@27
  bool v15; // zf@32
  signed int v16; // [sp+10h] [bp-18h]@1
  signed int v17; // [sp+14h] [bp-14h]@1
  int v18; // [sp+18h] [bp-10h]@1
  int v19; // [sp+1Ch] [bp-Ch]@7
  unsigned int v20; // [sp+1Ch] [bp-Ch]@10
  int v21; // [sp+20h] [bp-8h]@15
  int v22; // [sp+20h] [bp-8h]@22

  v18 = this;
  v3 = 32 << ((a2 >> 14) & 7);
  v4 = 32 * (a2 & 0x3F);
  v5 = 32 << ((a2 >> 17) & 7);
  v6 = 32 * ((a2 & 0xF80 | (a2 >> 8) & 0x1000) >> 7);
  v16 = 32 << ((a2 >> 14) & 7);
  v17 = 32 << ((a2 >> 17) & 7);
  v7 = *(_DWORD *)(this + 27280040);
  v8 = ((a2 & 0xE00000) != 0) + 1;
  v9 = *(_DWORD *)v7;
  if ( *(_DWORD *)v7 != v7 )
  {
    while ( !*(_BYTE *)(v9 + 28) )
    {
LABEL_25:
      v9 = *(_DWORD *)v9;
      if ( v9 == v7 )
      {
        v8 = ((a2 & 0xE00000) != 0) + 1;
        goto LABEL_27;
      }
    }
    v10 = *(_DWORD *)(v9 + 12);
    if ( v10 >= v4 )
    {
      v11 = *(_DWORD *)(v9 + 16);
      if ( v11 >= v6 && v10 < v4 + v3 && v11 < v6 + v17 )
        goto LABEL_31;
      v19 = v11 + *(_DWORD *)(v9 + 24);
      if ( v19 > (unsigned int)v6 && v10 < v4 + v16 )
      {
        v5 = 32 << ((a2 >> 17) & 7);
        if ( v19 <= (unsigned int)(v17 + v6) )
          goto LABEL_32;
      }
    }
    v12 = v10 + *(_DWORD *)(v9 + 20);
    v20 = v12;
    if ( v12 <= (unsigned int)v4 )
      goto LABEL_19;
    if ( *(_DWORD *)(v9 + 16) < (unsigned int)v6
      || v12 > (unsigned int)(v4 + v16)
      || *(_DWORD *)(v9 + 16) >= (unsigned int)(v6 + v17) )
    {
      if ( v12 > (unsigned int)v4 )
      {
        v5 = 32 << ((a2 >> 17) & 7);
        v21 = *(_DWORD *)(v9 + 24) + *(_DWORD *)(v9 + 16);
        if ( v21 > (unsigned int)v6 && v20 <= v4 + v16 && v21 <= (unsigned int)(v17 + v6) )
          goto LABEL_32;
        goto LABEL_20;
      }
LABEL_19:
      v5 = 32 << ((a2 >> 17) & 7);
LABEL_20:
      if ( v10 >= v4
        || (v13 = *(_DWORD *)(v9 + 16), v13 >= v6)
        || (v22 = v13 + *(_DWORD *)(v9 + 24), v22 <= (unsigned int)(v4 + v16))
        || v22 <= v5 + v6 )
      {
LABEL_24:
        v3 = 32 << ((a2 >> 14) & 7);
        goto LABEL_25;
      }
LABEL_32:
      v15 = *(_BYTE *)(v9 + 30) == 0;
      *(_BYTE *)(v9 + 28) = 0;
      if ( !v15 && BYTE3(a2) < 2u )
      {
        v3 = 32 << ((a2 >> 14) & 7);
        if ( *(_BYTE *)(v9 + 29) != (BYTE3(a2) == 1) )
        {
          *(_DWORD *)(v9 + 32) = 0;
          *(_BYTE *)(v9 + 29) = BYTE3(a2) == 1;
        }
        goto LABEL_25;
      }
      goto LABEL_24;
    }
LABEL_31:
    v5 = 32 << ((a2 >> 17) & 7);
    goto LABEL_32;
  }
LABEL_27:
  result = BYTE3(a2);
  if ( !BYTE3(a2) || (result = BYTE3(a2) - 1, BYTE3(a2) == 1) )
    result = sub_1000B8D0(result, v18, v4, v6, v3, v5, a3, v8);
  return result;
}

//----- (1000BCA0) --------------------------------------------------------
int sub_1000BCA0()
{
  int v0; // eax@1
  int v1; // edi@1
  int v2; // esi@1
  int result; // eax@4

  v0 = dword_10239510;
  v1 = *(_DWORD *)(dword_10239510 + 4);
  v2 = v1;
  if ( !*(_BYTE *)(v1 + 13) )
  {
    do
    {
      sub_10005730(*(LPVOID *)(v2 + 8));
      v2 = *(_DWORD *)v2;
      sub_1000F409((LPVOID)v1);
      v1 = v2;
    }
    while ( !*(_BYTE *)(v2 + 13) );
    v0 = dword_10239510;
  }
  *(_DWORD *)(v0 + 4) = v0;
  *(_DWORD *)dword_10239510 = dword_10239510;
  result = dword_10239510;
  *(_DWORD *)(result + 8) = result;
  dword_10239514 = 0;
  return result;
}
// 10239514: using guessed type int dword_10239514;

//----- (1000BD30) --------------------------------------------------------
int __usercall sub_1000BD30@<eax>(int a1@<ebx>, int a2@<edi>)
{
  void *v2; // ecx@3
  LPVOID v3; // eax@3
  void *v4; // esi@4

  if ( dword_1023964C )
  {
    sub_10002AD0(a1, a2, dword_1023964C, (dword_10239654 - (signed int)dword_1023964C) >> 2);
    dword_1023964C = 0;
    dword_10239650 = 0;
    dword_10239654 = 0;
  }
  v2 = *(void **)dword_10239644;
  *(_DWORD *)dword_10239644 = dword_10239644;
  *((_DWORD *)dword_10239644 + 1) = dword_10239644;
  v3 = dword_10239644;
  dword_10239648 = 0;
  if ( v2 != dword_10239644 )
  {
    do
    {
      v4 = *(void **)v2;
      sub_1000F409(v2);
      v3 = dword_10239644;
      v2 = v4;
    }
    while ( v4 != dword_10239644 );
  }
  return sub_1000F409(v3);
}
// 10239648: using guessed type int dword_10239648;
// 10239650: using guessed type int dword_10239650;
// 10239654: using guessed type int dword_10239654;

//----- (1000BDB0) --------------------------------------------------------
int *__stdcall sub_1000BDB0(int a1, int a2)
{
  int v2; // ecx@1
  int v4; // [sp-8h] [bp-18h]@0
  int v5; // [sp-4h] [bp-14h]@0

  dword_10239640 = *(_DWORD *)a1;
  dword_10239644 = 0;
  dword_10239648 = 0;
  dword_10239644 = sub_10007E00(v4, v5);
  dword_1023964C = 0;
  dword_10239650 = 0;
  dword_10239654 = 0;
  dword_10239640 = 1065353216;
  sub_1000BEF0(v2);
  return &dword_10239640;
}
// 10239640: using guessed type int dword_10239640;
// 10239648: using guessed type int dword_10239648;
// 10239650: using guessed type int dword_10239650;
// 10239654: using guessed type int dword_10239654;

//----- (1000BE50) --------------------------------------------------------
int __thiscall sub_1000BE50(int this, int a2, LPVOID lpMem, int a4)
{
  LPVOID v4; // eax@1
  int result; // eax@3
  void *v6; // ecx@5
  int i; // edx@6
  int j; // eax@7
  int v9; // [sp+0h] [bp-4h]@1

  v9 = this;
  v4 = lpMem;
  if ( lpMem != *(LPVOID *)dword_10239510 || a4 != dword_10239510 )
  {
    for ( ; lpMem != (LPVOID)a4; v4 = lpMem )
    {
      v6 = v4;
      if ( !*((_BYTE *)v4 + 13) )
      {
        i = *((_DWORD *)v4 + 2);
        if ( *(_BYTE *)(i + 13) )
        {
          for ( i = *((_DWORD *)v4 + 1); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
          {
            if ( v4 != *(LPVOID *)(i + 8) )
              break;
            v4 = (LPVOID)i;
          }
        }
        else
        {
          for ( j = *(_DWORD *)i; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
            i = j;
        }
        lpMem = (LPVOID)i;
      }
      sub_1000BF60((int)&v9, v6);
    }
    *(_DWORD *)a2 = v4;
    result = a2;
  }
  else
  {
    sub_1000BCA0();
    result = a2;
    *(_DWORD *)a2 = *(_DWORD *)dword_10239510;
  }
  return result;
}

//----- (1000BEF0) --------------------------------------------------------
int __stdcall sub_1000BEF0(int a1)
{
  int v1; // ecx@1
  int result; // eax@3
  LPVOID v3; // [sp+0h] [bp-8h]@3
  char v4; // [sp+4h] [bp-4h]@3

  v1 = (int)dword_1023964C;
  if ( (unsigned int)((dword_10239654 - (signed int)dword_1023964C) >> 2) < 0x10 )
  {
    sub_10007B80(&dword_1023964C, (int)dword_1023964C);
    v1 = (int)dword_1023964C;
  }
  v3 = dword_10239644;
  dword_10239650 = v1;
  result = sub_10007BE0((int)&dword_1023964C, (int)&v4, v1, v1, (int)&v3);
  dword_10239658 = 7;
  dword_1023965C = 8;
  return result;
}
// 10239650: using guessed type int dword_10239650;
// 10239654: using guessed type int dword_10239654;
// 10239658: using guessed type int dword_10239658;
// 1023965C: using guessed type int dword_1023965C;

//----- (1000BF60) --------------------------------------------------------
int __stdcall sub_1000BF60(int a1, LPVOID lpMem)
{
  LPVOID v2; // ebx@1
  int v3; // edi@2
  LPVOID v4; // edx@5
  int v5; // esi@6
  int i; // ecx@15
  int v7; // eax@16
  int v8; // eax@22
  int j; // ecx@22
  int v10; // eax@32
  char v11; // cl@35
  int v12; // edx@38
  int v13; // ebp@38
  int v14; // ecx@39
  int result; // eax@59
  int v16; // [sp+10h] [bp-4h]@38

  v2 = lpMem;
  sub_10004E20(&lpMem);
  if ( *(_BYTE *)(*(_DWORD *)v2 + 13) )
  {
    v3 = *((_DWORD *)v2 + 2);
LABEL_6:
    v5 = *((_DWORD *)v2 + 1);
    if ( !*(_BYTE *)(v3 + 13) )
      *(_DWORD *)(v3 + 4) = v5;
    if ( *(LPVOID *)(dword_10239510 + 4) == v2 )
    {
      *(_DWORD *)(dword_10239510 + 4) = v3;
    }
    else if ( *(LPVOID *)v5 == v2 )
    {
      *(_DWORD *)v5 = v3;
    }
    else
    {
      *(_DWORD *)(v5 + 8) = v3;
    }
    if ( *(LPVOID *)dword_10239510 == v2 )
    {
      if ( *(_BYTE *)(v3 + 13) )
      {
        i = v5;
      }
      else
      {
        v7 = *(_DWORD *)v3;
        for ( i = v3; !*(_BYTE *)(v7 + 13); v7 = *(_DWORD *)v7 )
          i = v7;
      }
      *(_DWORD *)dword_10239510 = i;
    }
    if ( *(LPVOID *)(dword_10239510 + 8) == v2 )
    {
      if ( *(_BYTE *)(v3 + 13) )
      {
        *(_DWORD *)(dword_10239510 + 8) = v5;
      }
      else
      {
        v8 = *(_DWORD *)(v3 + 8);
        for ( j = v3; !*(_BYTE *)(v8 + 13); v8 = *(_DWORD *)(v8 + 8) )
          j = v8;
        *(_DWORD *)(dword_10239510 + 8) = j;
      }
    }
    goto LABEL_36;
  }
  if ( *(_BYTE *)(*((_DWORD *)v2 + 2) + 13) )
  {
    v3 = *(_DWORD *)v2;
    goto LABEL_6;
  }
  v4 = lpMem;
  v3 = *((_DWORD *)lpMem + 2);
  if ( lpMem == v2 )
    goto LABEL_6;
  *(_DWORD *)(*(_DWORD *)v2 + 4) = lpMem;
  *(_DWORD *)v4 = *(_DWORD *)v2;
  if ( v4 == *((LPVOID *)v2 + 2) )
  {
    v5 = (int)v4;
  }
  else
  {
    v5 = *((_DWORD *)v4 + 1);
    if ( !*(_BYTE *)(v3 + 13) )
      *(_DWORD *)(v3 + 4) = v5;
    *(_DWORD *)v5 = v3;
    *((_DWORD *)v4 + 2) = *((_DWORD *)v2 + 2);
    *(_DWORD *)(*((_DWORD *)v2 + 2) + 4) = v4;
  }
  if ( *(LPVOID *)(dword_10239510 + 4) == v2 )
  {
    *(_DWORD *)(dword_10239510 + 4) = v4;
  }
  else
  {
    v10 = *((_DWORD *)v2 + 1);
    if ( *(LPVOID *)v10 == v2 )
      *(_DWORD *)v10 = v4;
    else
      *(_DWORD *)(v10 + 8) = v4;
  }
  *((_DWORD *)v4 + 1) = *((_DWORD *)v2 + 1);
  v11 = *((_BYTE *)v4 + 12);
  *((_BYTE *)v4 + 12) = *((_BYTE *)v2 + 12);
  *((_BYTE *)v2 + 12) = v11;
LABEL_36:
  if ( *((_BYTE *)v2 + 12) == 1 )
  {
    if ( v3 != *(_DWORD *)(dword_10239510 + 4) )
    {
      while ( 1 )
      {
        v12 = v5;
        v13 = v5;
        v16 = v5;
        if ( *(_BYTE *)(v3 + 12) != 1 )
          break;
        v14 = *(_DWORD *)v5;
        if ( v3 == *(_DWORD *)v5 )
        {
          v14 = *(_DWORD *)(v5 + 8);
          if ( !*(_BYTE *)(v14 + 12) )
          {
            *(_BYTE *)(v14 + 12) = 1;
            *(_BYTE *)(v5 + 12) = 0;
            sub_1000C240(v5);
            v14 = *(_DWORD *)(v5 + 8);
            v12 = v5;
          }
          if ( *(_BYTE *)(v14 + 13) )
            goto LABEL_54;
          if ( *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 || *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 )
          {
            if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) == 1 )
            {
              *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
              *(_BYTE *)(v14 + 12) = 0;
              sub_1000C1E0(v14);
              v14 = *(_DWORD *)(v5 + 8);
            }
            *(_BYTE *)(v14 + 12) = *(_BYTE *)(v5 + 12);
            *(_BYTE *)(v5 + 12) = 1;
            *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
            sub_1000C240(v5);
            break;
          }
        }
        else
        {
          if ( !*(_BYTE *)(v14 + 12) )
          {
            *(_BYTE *)(v14 + 12) = 1;
            *(_BYTE *)(v5 + 12) = 0;
            sub_1000C1E0(v5);
            v14 = *(_DWORD *)v5;
            v12 = v5;
          }
          if ( *(_BYTE *)(v14 + 13) )
            goto LABEL_54;
          if ( *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) != 1 || *(_BYTE *)(*(_DWORD *)v14 + 12) != 1 )
          {
            if ( *(_BYTE *)(*(_DWORD *)v14 + 12) == 1 )
            {
              *(_BYTE *)(*(_DWORD *)(v14 + 8) + 12) = 1;
              *(_BYTE *)(v14 + 12) = 0;
              sub_1000C240(v14);
              v14 = *(_DWORD *)v5;
            }
            *(_BYTE *)(v14 + 12) = *(_BYTE *)(v5 + 12);
            *(_BYTE *)(v5 + 12) = 1;
            *(_BYTE *)(*(_DWORD *)v14 + 12) = 1;
            sub_1000C1E0(v5);
            break;
          }
        }
        *(_BYTE *)(v14 + 12) = 0;
LABEL_54:
        v3 = v12;
        v5 = *(_DWORD *)(v5 + 4);
        if ( v13 == *(_DWORD *)(dword_10239510 + 4) )
        {
          v3 = v16;
          break;
        }
      }
    }
    *(_BYTE *)(v3 + 12) = 1;
  }
  sub_1000F409(v2);
  if ( dword_10239514 )
    --dword_10239514;
  result = a1;
  *(_DWORD *)a1 = lpMem;
  return result;
}
// 10239514: using guessed type int dword_10239514;

//----- (1000C1E0) --------------------------------------------------------
int __stdcall sub_1000C1E0(int a1)
{
  int v1; // edx@1
  int v2; // eax@1
  int result; // eax@3

  v1 = *(_DWORD *)a1;
  *(_DWORD *)a1 = *(_DWORD *)(*(_DWORD *)a1 + 8);
  v2 = *(_DWORD *)(v1 + 8);
  if ( !*(_BYTE *)(v2 + 13) )
    *(_DWORD *)(v2 + 4) = a1;
  *(_DWORD *)(v1 + 4) = *(_DWORD *)(a1 + 4);
  result = dword_10239510;
  if ( a1 == *(_DWORD *)(dword_10239510 + 4) )
  {
    *(_DWORD *)(dword_10239510 + 4) = v1;
    *(_DWORD *)(v1 + 8) = a1;
    *(_DWORD *)(a1 + 4) = v1;
  }
  else
  {
    result = *(_DWORD *)(a1 + 4);
    if ( a1 == *(_DWORD *)(result + 8) )
    {
      *(_DWORD *)(result + 8) = v1;
      *(_DWORD *)(v1 + 8) = a1;
      *(_DWORD *)(a1 + 4) = v1;
    }
    else
    {
      *(_DWORD *)result = v1;
      *(_DWORD *)(v1 + 8) = a1;
      *(_DWORD *)(a1 + 4) = v1;
    }
  }
  return result;
}

//----- (1000C240) --------------------------------------------------------
int __stdcall sub_1000C240(int a1)
{
  int v1; // edx@1
  int result; // eax@3

  v1 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(a1 + 8) = *(_DWORD *)v1;
  if ( !*(_BYTE *)(*(_DWORD *)v1 + 13) )
    *(_DWORD *)(*(_DWORD *)v1 + 4) = a1;
  *(_DWORD *)(v1 + 4) = *(_DWORD *)(a1 + 4);
  result = dword_10239510;
  if ( a1 == *(_DWORD *)(dword_10239510 + 4) )
  {
    *(_DWORD *)(dword_10239510 + 4) = v1;
    *(_DWORD *)v1 = a1;
    *(_DWORD *)(a1 + 4) = v1;
  }
  else
  {
    result = *(_DWORD *)(a1 + 4);
    if ( a1 == *(_DWORD *)result )
    {
      *(_DWORD *)result = v1;
      *(_DWORD *)v1 = a1;
      *(_DWORD *)(a1 + 4) = v1;
    }
    else
    {
      *(_DWORD *)(result + 8) = v1;
      *(_DWORD *)v1 = a1;
      *(_DWORD *)(a1 + 4) = v1;
    }
  }
  return result;
}

//----- (1000C290) --------------------------------------------------------
signed int __usercall sub_1000C290@<eax>(int a1@<ebx>, int a2@<edi>, int *a3, int a4, char a5)
{
  return sub_10004350(a1, a2, a3, 512, a4, 0, (int)&a5);
}

//----- (1000C2B0) --------------------------------------------------------
int *sub_1000C2B0()
{
  return &dword_10239510;
}

//----- (1000C2C0) --------------------------------------------------------
LPVOID __stdcall sub_1000C2C0(void *a1, void *a2)
{
  LPVOID result; // eax@1
  LPVOID v3; // ecx@1
  LPVOID v4; // edx@2

  result = sub_1000F0A6(0x24u);
  v3 = a1;
  if ( a1 )
  {
    v4 = a2;
  }
  else
  {
    v3 = result;
    v4 = result;
  }
  if ( result )
    *(_DWORD *)result = v3;
  if ( result != (LPVOID)-4 )
    *((_DWORD *)result + 1) = v4;
  return result;
}

//----- (1000C2F0) --------------------------------------------------------
int __thiscall sub_1000C2F0(int this, int a2, int a3, int a4, int a5)
{
  int v5; // edi@1
  void **v6; // eax@1
  void *v7; // esi@1
  LPVOID v8; // edx@1
  int v9; // eax@1

  v5 = this;
  v6 = *(void ***)(this + 4);
  v7 = *v6;
  v8 = sub_1000C350(*v6, *((void **)*v6 + 1), this, a4, this);
  v9 = *(_DWORD *)(v5 + 8);
  if ( (unsigned int)(119304646 - v9) < 1 )
    sub_1000DA74((int)"list<T> too long");
  *(_DWORD *)(v5 + 8) = v9 + 1;
  *((_DWORD *)v7 + 1) = v8;
  **((_DWORD **)v8 + 1) = v8;
  sub_10003050(v5, a2, **(_DWORD **)(v5 + 4) + 8, **(LPVOID **)(v5 + 4));
  return a2;
}

//----- (1000C350) --------------------------------------------------------
LPVOID __stdcall sub_1000C350(void *a1, void *a2, int a3, int a4, int a5)
{
  LPVOID result; // eax@1

  result = sub_1000C2C0(a1, a2);
  if ( result != (LPVOID)-8 )
  {
    *((_DWORD *)result + 2) = **(_DWORD **)a4;
    *(_OWORD *)((char *)result + 12) = 0i64;
    _mm_storel_epi64((__m128i *)((char *)result + 28), 0i64);
  }
  return result;
}

//----- (1000C380) --------------------------------------------------------
int __userpurge sub_1000C380@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4)
{
  int v4; // edx@1
  int v5; // ecx@1
  int v6; // esi@1
  int v7; // ST3C_4@1
  int v8; // eax@1
  int v9; // ecx@1
  int v10; // ST28_4@1
  int v11; // ecx@1
  int v12; // ecx@1
  int v13; // eax@1
  int v14; // ecx@1
  int v15; // ST28_4@1
  int v16; // ecx@1
  int v17; // ST24_4@1
  const unsigned __int16 *v19; // [sp+30h] [bp-70h]@0
  __int64 v20; // [sp+40h] [bp-60h]@1
  int v21; // [sp+48h] [bp-58h]@1
  int v22; // [sp+4Ch] [bp-54h]@1
  int v23; // [sp+50h] [bp-50h]@1
  int v24; // [sp+54h] [bp-4Ch]@1
  __int128 v25; // [sp+60h] [bp-40h]@1
  __m128i v26; // [sp+70h] [bp-30h]@1
  __int128 v27; // [sp+80h] [bp-20h]@1
  __int64 v28; // [sp+90h] [bp-10h]@1

  v4 = a1;
  v25 = 0i64;
  v5 = *(_DWORD *)(a1 + 4);
  v6 = v4 + 888;
  _mm_storel_epi64(&v26, 0i64);
  v7 = v4;
  LODWORD(v25) = 4 * a4 * a3;
  v26.m128i_i64[0] = 17179869248i64;
  DWORD2(v25) = 136;
  v8 = (*(int (__stdcall **)(int, __int128 *, _DWORD, int, _DWORD))(*(_DWORD *)v5 + 12))(
         v5,
         &v25,
         0,
         v4 + 888,
         L"Failed create buffer");
  sub_100410C0(v20, a2, v8, v19);
  *(_OWORD *)((char *)&v20 + 4) = 0i64;
  v24 = 0;
  v21 = 1;
  v9 = *(_DWORD *)(v20 + 4);
  v22 = 0;
  v10 = *(_DWORD *)v6;
  HIDWORD(v20) = 0;
  v23 = a4 * a3;
  (*(void (__stdcall **)(int, int, char *))(*(_DWORD *)v9 + 32))(v9, v10, (char *)&v20 + 4);
  v27 = 0i64;
  DWORD3(v27) = a4 * a3;
  _mm_storel_epi64((__m128i *)&v28, 0i64);
  DWORD2(v27) = 0;
  v11 = *(_DWORD *)(v7 + 4);
  *(_QWORD *)&v27 = 0x100000000i64;
  (*(void (__stdcall **)(int, int, __int128 *, int))(*(_DWORD *)v11 + 28))(v11, *(_DWORD *)v6, &v27, v7 + 892);
  v12 = *(_DWORD *)(v7 + 4);
  v25 = 0i64;
  _mm_storel_epi64(&v26, 0i64);
  LODWORD(v25) = 40;
  v26.m128i_i64[0] = 17179869248i64;
  DWORD2(v25) = 136;
  v13 = (*(int (__stdcall **)(int, __int128 *, _DWORD, int, _DWORD))(*(_DWORD *)v12 + 12))(
          v12,
          &v25,
          0,
          v7 + 900,
          L"Failed create buffer");
  sub_100410C0(v7, a2, v13, (const unsigned __int16 *)(v20 + 896));
  v14 = *(_DWORD *)(v7 + 4);
  v24 = 0;
  *(_OWORD *)((char *)&v20 + 4) = 0i64;
  v15 = *(_DWORD *)(v7 + 900);
  v21 = 1;
  v22 = 0;
  HIDWORD(v20) = 0;
  v23 = 10;
  (*(void (__stdcall **)(int, int, char *))(*(_DWORD *)v14 + 32))(v14, v15, (char *)&v20 + 4);
  v16 = *(_DWORD *)(v7 + 4);
  v27 = 0i64;
  v17 = *(_DWORD *)(v7 + 900);
  _mm_storel_epi64((__m128i *)&v28, 0i64);
  *((_QWORD *)&v27 + 1) = 42949672960i64;
  *(_QWORD *)&v27 = 0x100000000i64;
  return (*(int (__stdcall **)(int, int, __int128 *, int))(*(_DWORD *)v16 + 28))(v16, v17, &v27, v7 + 904);
}
// 1006DD58: using guessed type wchar_t aFailedCreateBu[21];

//----- (1000C560) --------------------------------------------------------
int __thiscall sub_1000C560(int this)
{
  int v1; // esi@1
  int v2; // ecx@1
  int result; // eax@2
  int v4; // ecx@3
  int v5; // ecx@5
  int v6; // ecx@7
  int v7; // ecx@9
  int v8; // ecx@11

  v1 = this;
  v2 = *(_DWORD *)(this + 888);
  if ( v2 )
  {
    result = (*(int (__stdcall **)(int))(*(_DWORD *)v2 + 8))(v2);
    *(_DWORD *)(v1 + 888) = 0;
  }
  v4 = *(_DWORD *)(v1 + 896);
  if ( v4 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v4 + 8))(*(_DWORD *)(v1 + 896));
    *(_DWORD *)(v1 + 896) = 0;
  }
  v5 = *(_DWORD *)(v1 + 892);
  if ( v5 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v5 + 8))(*(_DWORD *)(v1 + 892));
    *(_DWORD *)(v1 + 892) = 0;
  }
  v6 = *(_DWORD *)(v1 + 900);
  if ( v6 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v6 + 8))(*(_DWORD *)(v1 + 900));
    *(_DWORD *)(v1 + 900) = 0;
  }
  v7 = *(_DWORD *)(v1 + 908);
  if ( v7 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v7 + 8))(*(_DWORD *)(v1 + 908));
    *(_DWORD *)(v1 + 908) = 0;
  }
  v8 = *(_DWORD *)(v1 + 904);
  if ( v8 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v8 + 8))(*(_DWORD *)(v1 + 904));
    *(_DWORD *)(v1 + 904) = 0;
  }
  return result;
}

//----- (1000C610) --------------------------------------------------------
__int16 __stdcall sub_1000C610(char a1)
{
  __int16 result; // ax@2

  switch ( a1 )
  {
    case 0x10:
      result = *(_WORD *)(dword_10239430 + 2834);
      break;
    case 0x12:
      result = *(_WORD *)(dword_10239430 + 2836);
      break;
    case 0x14:
      result = *(_WORD *)(dword_10239430 + 2838);
      break;
    case 0x16:
      result = *(_WORD *)(dword_10239430 + 2840);
      break;
    default:
      result = 0;
      break;
  }
  return result;
}
// 10239430: using guessed type int dword_10239430;

//----- (1000C680) --------------------------------------------------------
__int16 __stdcall sub_1000C680(unsigned __int8 a1, __int16 a2)
{
  __int16 result; // ax@1

  result = a1;
  switch ( a1 )
  {
    case 0u:
      result = a2;
      *(_WORD *)(dword_10239430 + 2820) = a2;
      break;
    case 2u:
      result = a2;
      *(_WORD *)(dword_10239430 + 2822) = a2;
      break;
    case 4u:
      result = a2;
      *(_WORD *)(dword_10239430 + 2824) = a2;
      break;
    case 6u:
      result = a2;
      *(_WORD *)(dword_10239430 + 2826) = a2;
      break;
    case 8u:
      result = a2;
      *(_WORD *)(dword_10239430 + 2828) = a2;
      break;
    case 0xAu:
      result = a2;
      *(_WORD *)(dword_10239430 + 2830) = a2;
      break;
    case 0xCu:
      result = a2;
      *(_WORD *)(dword_10239430 + 2832) = a2;
      break;
    default:
      return result;
  }
  return result;
}
// 10239430: using guessed type int dword_10239430;

//----- (1000C740) --------------------------------------------------------
int __stdcall sub_1000C740(__int16 a1, unsigned __int16 a2)
{
  int result; // eax@1
  int v3; // edx@1
  int v4; // edx@50
  unsigned int v5; // ebx@50
  unsigned int v6; // esi@51
  int v7; // esi@52

  result = dword_10239430;
  v3 = a1 & 0x1FF;
  *(_BYTE *)(v3 + dword_10239430 + 1796) = a2;
  *(_BYTE *)(v3 + result + 1797) = HIBYTE(a2);
  switch ( v3 )
  {
    case 0:
      *(_WORD *)(result + 2896) = a2;
      return sub_1005F040(result, a2);
    case 2:
      *(_WORD *)(result + 2898) = a2;
      return result;
    case 6:
      *(_WORD *)(result + 2902) = a2;
      return result;
    case 14:
      *(_WORD *)(result + 2908) = a2;
      return result;
    case 16:
      *(_WORD *)(result + 2910) = a2;
      return result;
    case 18:
      *(_WORD *)(result + 2912) = a2;
      return result;
    case 20:
      *(_WORD *)(result + 2914) = a2;
      return result;
    case 22:
      *(_WORD *)(result + 2916) = a2;
      return result;
    case 24:
      *(_WORD *)(result + 2918) = a2;
      return result;
    case 26:
      *(_WORD *)(result + 2920) = a2;
      return result;
    case 28:
      *(_WORD *)(result + 2922) = a2;
      return result;
    case 30:
      *(_WORD *)(result + 2924) = a2;
      return result;
    case 32:
      *(_WORD *)(result + 2926) = a2;
      *(_DWORD *)(result + 912) = a2 & 1;
      *(_DWORD *)(result + 1084) = a2 & 2;
      *(_DWORD *)(result + 1256) = a2 & 4;
      *(_DWORD *)(result + 1428) = a2 & 8;
      *(_DWORD *)(result + 1600) = a2 & 0x10;
      *(_DWORD *)(result + 916) = ~HIBYTE(a2) & 1;
      *(_DWORD *)(result + 1088) = ~((unsigned int)a2 >> 9) & 1;
      *(_DWORD *)(result + 1260) = ~((unsigned int)a2 >> 10) & 1;
      *(_DWORD *)(result + 1432) = ~((unsigned int)a2 >> 11) & 1;
      *(_DWORD *)(result + 1604) = ~((unsigned int)a2 >> 12) & 1;
      return result;
    case 34:
      *(_WORD *)(result + 2928) = a2;
      return result;
    case 36:
      *(_WORD *)(result + 2930) = a2;
      return result;
    case 38:
      *(_WORD *)(result + 2932) = a2;
      return result;
    case 40:
      *(_WORD *)(result + 2934) = a2;
      *(_DWORD *)(result + 924) = ((unsigned int)a2 >> 4) & 7;
      *(_DWORD *)(result + 1096) = ((unsigned int)a2 >> 12) & 3;
      *(_DWORD *)(result + 1076) = a2 & 2;
      *(_DWORD *)(result + 1248) = a2 & 0x200;
      if ( a2 & 1 )
      {
        *(_DWORD *)(result + 980) = 2;
        *(_DWORD *)(result + 984) = 1;
      }
      else
      {
        *(_DWORD *)(result + 980) = 1;
        *(_DWORD *)(result + 984) = 0;
      }
      if ( a2 & 0x100 )
      {
        *(_DWORD *)(result + 1152) = 2;
        *(_DWORD *)(result + 1156) = 1;
      }
      else
      {
        *(_DWORD *)(result + 1152) = 1;
        *(_DWORD *)(result + 1156) = 0;
      }
      return result;
    case 42:
      *(_WORD *)(result + 2936) = a2;
      *(_DWORD *)(result + 1268) = ((unsigned int)a2 >> 1) & 1;
      *(_DWORD *)(result + 1440) = ((unsigned int)a2 >> 5) & 1;
      *(_DWORD *)(result + 1612) = ((unsigned int)a2 >> 12) & 7;
      if ( a2 & 1 )
      {
        *(_DWORD *)(result + 1324) = 2;
        *(_DWORD *)(result + 1328) = 1;
      }
      else
      {
        *(_DWORD *)(result + 1324) = 1;
        *(_DWORD *)(result + 1328) = 0;
      }
      if ( a2 & 0x10 )
      {
        *(_DWORD *)(result + 1496) = 2;
        *(_DWORD *)(result + 1500) = 1;
      }
      else
      {
        *(_DWORD *)(result + 1496) = 1;
        *(_DWORD *)(result + 1500) = 0;
      }
      if ( a2 & 0x100 )
      {
        *(_DWORD *)(result + 1668) = 2;
        *(_DWORD *)(result + 1672) = 1;
      }
      else
      {
        *(_DWORD *)(result + 1668) = 1;
        *(_DWORD *)(result + 1672) = 0;
      }
      return result;
    case 44:
      *(_WORD *)(result + 2938) = a2;
      return result;
    case 46:
      *(_WORD *)(result + 2940) = a2;
      return result;
    case 48:
      *(_WORD *)(result + 2942) = a2;
      *(_DWORD *)(result + 928) = a2 & 0x3FF;
      *(_DWORD *)(result + 932) = ((unsigned int)a2 >> 14) & 1;
      if ( a2 & 0x8000 )
      {
        *(_DWORD *)(result + 972) = 1;
        *(_DWORD *)(result + 976) = 0;
      }
      else
      {
        *(_DWORD *)(result + 972) = 2;
        *(_DWORD *)(result + 976) = 1;
      }
      return result;
    case 50:
      *(_WORD *)(result + 2944) = a2;
      *(_DWORD *)(result + 1100) = a2 & 0x3FF;
      *(_DWORD *)(result + 1104) = ((unsigned int)a2 >> 14) & 1;
      if ( a2 & 0x8000 )
      {
        *(_DWORD *)(result + 1144) = 1;
        *(_DWORD *)(result + 1148) = 0;
      }
      else
      {
        *(_DWORD *)(result + 1144) = 2;
        *(_DWORD *)(result + 1148) = 1;
      }
      return result;
    case 52:
      *(_WORD *)(result + 2946) = a2;
      *(_DWORD *)(result + 1272) = a2 & 0x3FF;
      *(_DWORD *)(result + 1276) = ((unsigned int)a2 >> 14) & 1;
      if ( a2 & 0x8000 )
      {
        *(_DWORD *)(result + 1316) = 1;
        *(_DWORD *)(result + 1320) = 0;
      }
      else
      {
        *(_DWORD *)(result + 1316) = 2;
        *(_DWORD *)(result + 1320) = 1;
      }
      return result;
    case 54:
      *(_WORD *)(result + 2948) = a2;
      *(_DWORD *)(result + 1444) = a2 & 0x3FF;
      *(_DWORD *)(result + 1448) = ((unsigned int)a2 >> 14) & 1;
      if ( a2 & 0x8000 )
      {
        *(_DWORD *)(result + 1488) = 1;
        *(_DWORD *)(result + 1492) = 0;
      }
      else
      {
        *(_DWORD *)(result + 1488) = 2;
        *(_DWORD *)(result + 1492) = 1;
      }
      return result;
    case 56:
      *(_WORD *)(result + 2950) = a2;
      *(_DWORD *)(result + 1616) = a2 & 0x3FF;
      *(_DWORD *)(result + 1620) = ((unsigned int)a2 >> 14) & 1;
      if ( a2 & 0x8000 )
      {
        *(_DWORD *)(result + 1660) = 1;
        *(_DWORD *)(result + 1664) = 0;
      }
      else
      {
        *(_DWORD *)(result + 1660) = 2;
        *(_DWORD *)(result + 1664) = 1;
      }
      return result;
    case 58:
      *(_WORD *)(result + 2952) = a2;
      v4 = result + 944;
      v5 = 0;
      break;
    case 60:
      *(_WORD *)(result + 2954) = a2;
      *(_DWORD *)(result + 960) = (a2 & 7) << 6;
      *(_DWORD *)(result + 1132) = 4 * (a2 & 0x70);
      *(_DWORD *)(result + 1304) = ((unsigned int)a2 >> 2) & 0x1C0;
      *(_DWORD *)(result + 1476) = ((unsigned int)a2 >> 6) & 0x1C0;
      return result;
    case 62:
      *(_WORD *)(result + 2956) = a2;
      return result;
    case 64:
      *(_WORD *)(result + 2958) = a2;
      *(_DWORD *)(result + 964) = a2;
      return result;
    case 66:
      *(_WORD *)(result + 2960) = a2;
      *(_DWORD *)(result + 968) = a2;
      return result;
    case 68:
      *(_WORD *)(result + 2962) = a2;
      *(_DWORD *)(result + 1136) = a2;
      return result;
    case 70:
      *(_WORD *)(result + 2964) = a2;
      *(_DWORD *)(result + 1140) = a2;
      return result;
    case 72:
      *(_WORD *)(result + 2966) = a2;
      *(_DWORD *)(result + 1308) = a2;
      return result;
    case 74:
      *(_WORD *)(result + 2968) = a2;
      *(_DWORD *)(result + 1312) = a2;
      return result;
    case 76:
      *(_WORD *)(result + 2970) = a2;
      *(_DWORD *)(result + 1480) = a2;
      return result;
    case 78:
      *(_WORD *)(result + 2972) = a2;
      *(_DWORD *)(result + 1484) = a2;
      return result;
    case 80:
      *(_WORD *)(result + 2974) = a2;
      return result;
    case 82:
      *(_WORD *)(result + 2976) = a2;
      return result;
    case 84:
      *(_WORD *)(result + 2978) = a2;
      return result;
    case 86:
      *(_WORD *)(result + 2980) = a2;
      return result;
    case 88:
      *(_WORD *)(result + 2982) = a2;
      return result;
    case 90:
      *(_WORD *)(result + 2984) = a2;
      return result;
    case 92:
      *(_WORD *)(result + 2986) = a2;
      return result;
    case 94:
      *(_WORD *)(result + 2988) = a2;
      return result;
    case 96:
      *(_WORD *)(result + 2990) = a2;
      return result;
    case 98:
      *(_WORD *)(result + 2992) = a2;
      return result;
    case 100:
      *(_WORD *)(result + 2994) = a2;
      return result;
    case 102:
      *(_WORD *)(result + 2996) = a2;
      return result;
    case 104:
      *(_WORD *)(result + 2998) = a2;
      return result;
    case 106:
      *(_WORD *)(result + 3000) = a2;
      return result;
    case 108:
      *(_WORD *)(result + 3002) = a2;
      return result;
    case 110:
      *(_WORD *)(result + 3004) = a2;
      return result;
    case 112:
      *(_WORD *)(result + 3006) = a2;
      return result;
    case 114:
      *(_WORD *)(result + 3008) = a2;
      return result;
    case 116:
      *(_WORD *)(result + 3010) = a2;
      return result;
    case 118:
      *(_WORD *)(result + 3012) = a2;
      return result;
    case 120:
      *(_WORD *)(result + 3018) = a2;
      return result;
    case 122:
      *(_WORD *)(result + 3016) = a2;
      return result;
    case 124:
      *(_WORD *)(result + 3022) = a2;
      return result;
    case 126:
      *(_WORD *)(result + 3020) = a2;
      return result;
    case 128:
      *(_WORD *)(result + 3024) = a2;
      return result;
    case 130:
      *(_WORD *)(result + 3026) = a2;
      return result;
    case 132:
      *(_WORD *)(result + 3028) = a2;
      return result;
    case 134:
      *(_WORD *)(result + 3030) = a2;
      return result;
    case 136:
      *(_WORD *)(result + 3034) = a2;
      return result;
    case 138:
      *(_WORD *)(result + 3032) = a2;
      return result;
    case 140:
      *(_WORD *)(result + 3038) = a2;
      return result;
    case 142:
      *(_WORD *)(result + 3036) = a2;
      return result;
    case 144:
      *(_WORD *)(result + 3040) = a2;
      return result;
    case 146:
      *(_WORD *)(result + 3042) = a2;
      return result;
    case 148:
      *(_WORD *)(result + 3044) = a2;
      return result;
    case 150:
      *(_WORD *)(result + 3046) = a2;
      return result;
    case 152:
      *(_WORD *)(result + 3048) = a2;
      return result;
    case 154:
      *(_WORD *)(result + 3050) = a2;
      return result;
    case 156:
      *(_WORD *)(result + 3054) = a2;
      return result;
    case 158:
      *(_WORD *)(result + 3052) = a2;
      return result;
    case 160:
      *(_WORD *)(result + 3058) = a2;
      return result;
    case 162:
      *(_WORD *)(result + 3056) = a2;
      return result;
    case 164:
      *(_WORD *)(result + 3062) = a2;
      return result;
    case 166:
      *(_WORD *)(result + 3060) = a2;
      return result;
    case 168:
      *(_WORD *)(result + 3066) = a2;
      return result;
    case 170:
      *(_WORD *)(result + 3064) = a2;
      return result;
    case 172:
      *(_WORD *)(result + 3068) = a2;
      return result;
    case 174:
      *(_WORD *)(result + 3070) = a2;
      return result;
    case 176:
      *(_WORD *)(result + 3072) = a2;
      return result;
    case 178:
      *(_WORD *)(result + 3074) = a2;
      return result;
    case 180:
      *(_WORD *)(result + 3076) = a2;
      return result;
    case 182:
      *(_WORD *)(result + 3078) = a2;
      return result;
    case 184:
      *(_WORD *)(result + 3080) = a2;
      return result;
    case 186:
      *(_WORD *)(result + 3082) = a2;
      return result;
    case 188:
      *(_WORD *)(result + 3086) = a2;
      return result;
    case 190:
      *(_WORD *)(result + 3084) = a2;
      return result;
    case 192:
      *(_WORD *)(result + 3088) = a2;
      return result;
    case 194:
      *(_WORD *)(result + 3090) = a2;
      return result;
    case 196:
      *(_WORD *)(result + 3092) = a2;
      return result;
    case 198:
      *(_WORD *)(result + 3094) = a2;
      return result;
    case 200:
      *(_WORD *)(result + 3096) = a2;
      return result;
    case 202:
      *(_WORD *)(result + 3098) = a2;
      return result;
    case 204:
      *(_WORD *)(result + 3100) = a2;
      return result;
    case 206:
      *(_WORD *)(result + 3102) = a2;
      return result;
    case 208:
      *(_WORD *)(result + 3104) = a2;
      *(_DWORD *)(result + 1080) = a2;
      *(_DWORD *)(result + 1252) = (unsigned int)a2 >> 8;
      return result;
    case 210:
      *(_WORD *)(result + 3106) = a2;
      *(_DWORD *)(result + 1424) = a2;
      *(_DWORD *)(result + 1596) = (unsigned int)a2 >> 8;
      return result;
    case 212:
      *(_WORD *)(result + 3108) = a2;
      *(_DWORD *)(result + 1768) = a2;
      return result;
    case 214:
      *(_WORD *)(result + 3110) = a2;
      return result;
    case 216:
      *(_WORD *)(result + 3114) = a2;
      return result;
    case 218:
      *(_WORD *)(result + 3112) = a2;
      return result;
    case 220:
      *(_WORD *)(result + 3118) = a2;
      return result;
    case 222:
      *(_WORD *)(result + 3116) = a2;
      return result;
    case 224:
      *(_WORD *)(result + 3120) = a2;
      return result;
    case 226:
      *(_WORD *)(result + 3122) = a2;
      return result;
    case 228:
      *(_WORD *)(result + 3124) = a2;
      *(_DWORD *)(result + 1016) = (a2 & 7) << 8;
      *(_DWORD *)(result + 1188) = 16 * (a2 & 0x70);
      *(_DWORD *)(result + 1360) = a2 & 0x700;
      *(_DWORD *)(result + 1532) = ((unsigned int)a2 >> 4) & 0x700;
      return result;
    case 230:
      *(_WORD *)(result + 3126) = a2;
      *(_DWORD *)(result + 1704) = (a2 & 7) << 8;
      return result;
    case 232:
      *(_WORD *)(result + 3128) = a2;
      return result;
    case 234:
      *(_WORD *)(result + 3130) = a2;
      *(_DWORD *)(result + 920) = a2 & 3;
      *(_DWORD *)(result + 1092) = ((unsigned int)a2 >> 2) & 3;
      *(_DWORD *)(result + 1264) = ((unsigned int)a2 >> 4) & 3;
      *(_DWORD *)(result + 1436) = ((unsigned int)a2 >> 6) & 3;
      *(_DWORD *)(result + 1608) = ((unsigned int)a2 >> 8) & 3;
      return result;
    case 236:
      *(_WORD *)(result + 3132) = a2;
      if ( a2 & 1 )
        *(_DWORD *)(result + 1004) = 8 * (~(unsigned __int8)*(_WORD *)(result + 3158) & 0x1F) + 7;
      else
        *(_DWORD *)(result + 1004) = 255;
      if ( *(_BYTE *)(result + 3132) & 2 )
        *(_DWORD *)(result + 1176) = ((~*(_WORD *)(result + 3158) >> 5) & 0xF8) + 7;
      else
        *(_DWORD *)(result + 1176) = 255;
      if ( *(_BYTE *)(result + 3132) & 4 )
        *(_DWORD *)(result + 1348) = 8 * (~(unsigned __int8)*(_WORD *)(result + 3160) & 0x1F) + 7;
      else
        *(_DWORD *)(result + 1348) = 255;
      if ( *(_BYTE *)(result + 3132) & 8 )
        *(_DWORD *)(result + 1520) = ((~*(_WORD *)(result + 3160) >> 5) & 0xF8) + 7;
      else
        *(_DWORD *)(result + 1520) = 255;
      if ( *(_BYTE *)(result + 3132) & 0x10 )
        *(_DWORD *)(result + 1692) = 8 * (~(unsigned __int8)*(_WORD *)(result + 3162) & 0x1F) + 7;
      else
        *(_DWORD *)(result + 1692) = 255;
      return result;
    case 238:
      *(_WORD *)(result + 3134) = a2;
      return result;
    case 240:
      *(_WORD *)(result + 3136) = a2;
      return result;
    case 242:
      *(_WORD *)(result + 3138) = a2;
      return result;
    case 244:
      *(_WORD *)(result + 3140) = a2;
      return result;
    case 246:
      *(_WORD *)(result + 3142) = a2;
      return result;
    case 248:
      *(_WORD *)(result + 3144) = a2;
      *(_DWORD *)(result + 1056) = a2 & 7;
      *(_DWORD *)(result + 1228) = ((unsigned int)a2 >> 8) & 7;
      return result;
    case 250:
      *(_WORD *)(result + 3146) = a2;
      *(_DWORD *)(result + 1400) = a2 & 7;
      *(_DWORD *)(result + 1572) = ((unsigned int)a2 >> 8) & 7;
      return result;
    case 252:
      *(_WORD *)(result + 3148) = a2;
      *(_DWORD *)(result + 1744) = a2 & 7;
      return result;
    case 256:
      *(_WORD *)(result + 3150) = a2;
      return result;
    case 258:
      *(_WORD *)(result + 3152) = a2;
      return result;
    case 260:
      *(_WORD *)(result + 3154) = a2;
      return result;
    case 262:
      *(_WORD *)(result + 3156) = a2;
      return result;
    case 264:
      *(_WORD *)(result + 3158) = a2;
      return result;
    case 266:
      *(_WORD *)(result + 3160) = a2;
      return result;
    case 268:
      *(_WORD *)(result + 3162) = a2;
      return result;
    case 270:
      *(_WORD *)(result + 3164) = a2;
      return result;
    case 272:
      *(_WORD *)(result + 3166) = a2;
      *(_DWORD *)(result + 1008) = a2 & 1;
      *(_DWORD *)(result + 1180) = a2 & 2;
      *(_DWORD *)(result + 1352) = a2 & 4;
      *(_DWORD *)(result + 1524) = a2 & 8;
      *(_DWORD *)(result + 1696) = a2 & 0x10;
      *(_DWORD *)(result + 1772) = a2 & 0x40;
      return result;
    case 274:
      *(_WORD *)(result + 3168) = a2;
      *(_DWORD *)(result + 1012) = a2 & 1;
      *(_DWORD *)(result + 1184) = a2 & 2;
      *(_DWORD *)(result + 1356) = a2 & 4;
      *(_DWORD *)(result + 1528) = a2 & 8;
      *(_DWORD *)(result + 1700) = a2 & 0x10;
      *(_DWORD *)(result + 1776) = a2 & 0x40;
      return result;
    case 276:
      *(_WORD *)(result + 3170) = a2;
      return result;
    case 278:
      *(_WORD *)(result + 3172) = a2;
      return result;
    case 280:
      *(_WORD *)(result + 3174) = a2;
      return result;
    case 282:
      *(_WORD *)(result + 3176) = a2;
      return result;
    case 284:
      *(_WORD *)(result + 3178) = a2;
      return result;
    case 286:
      *(_WORD *)(result + 3180) = a2;
      return result;
    default:
      return result;
  }
  while ( 1 )
  {
    v6 = (unsigned int)*(_WORD *)(result + 2952) >> 2 * v5;
    if ( !v6 )
      break;
    v7 = v6 - 1;
    if ( !v7 )
    {
      *(_DWORD *)v4 = 2;
      *(_DWORD *)(v4 + 8) = 1;
LABEL_57:
      *(_DWORD *)(v4 + 4) = 1;
      *(_DWORD *)(v4 + 12) = 0;
      goto LABEL_58;
    }
    if ( v7 != 2 )
      break;
    *(_DWORD *)(v4 + 4) = 2;
    *(_DWORD *)v4 = 2;
    *(_DWORD *)(v4 + 12) = 1;
    *(_DWORD *)(v4 + 8) = 1;
LABEL_58:
    ++v5;
    v4 += 172;
    if ( v5 >= 5 )
      return result;
  }
  *(_DWORD *)(v4 + 8) = 0;
  *(_DWORD *)v4 = 1;
  goto LABEL_57;
}
// 10239430: using guessed type int dword_10239430;

//----- (1000D840) --------------------------------------------------------
int __thiscall sub_1000D840(int this, int a2, int a3, unsigned int a4)
{
  int v4; // ebx@1
  unsigned int v5; // ebp@1
  int result; // eax@1
  int v7; // eax@3
  int v8; // edi@5
  int v9; // ecx@5
  __int16 v10; // ax@5
  unsigned int v11; // esi@7
  int v12; // edx@7
  int v13; // eax@7
  int v14; // [sp+18h] [bp+Ch]@5

  v4 = this;
  v5 = a4;
  result = *(_DWORD *)(this + 16);
  if ( a4 )
  {
    if ( a4 > result )
    {
LABEL_16:
      result = -1;
    }
    else
    {
      v7 = result - a4;
      if ( *(_DWORD *)(this + 20) >= 8u )
        this = *(_DWORD *)this;
      v8 = this + 2 * v7;
      v9 = a2;
      v10 = *(_WORD *)a2;
      v14 = *(_WORD *)a2;
      while ( 1 )
      {
        if ( *(_WORD *)v8 == v10 )
        {
          v11 = v5;
          v12 = v9;
          v13 = v8;
          if ( !v5 )
            break;
          while ( *(_WORD *)v13 == *(_WORD *)v12 )
          {
            v13 += 2;
            v12 += 2;
            --v11;
            if ( !v11 )
              goto LABEL_10;
          }
          if ( (*(_WORD *)v13 < *(_WORD *)v12 ? 0xFFFFFFFE : 0) == -1 )
            break;
        }
        if ( v8 == sub_10001450(v4) )
          goto LABEL_16;
        v10 = v14;
        v8 -= 2;
        v9 = a2;
      }
LABEL_10:
      if ( *(_DWORD *)(v4 + 20) >= 8u )
        v4 = *(_DWORD *)v4;
      result = (v8 - v4) >> 1;
    }
  }
  return result;
}

//----- (1000D8D7) --------------------------------------------------------
void *__thiscall sub_1000D8D7(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_100652F4;
  return v2;
}
// 100652F4: using guessed type int (__thiscall *off_100652F4)(LPVOID lpMem, char);

//----- (1000D8F2) --------------------------------------------------------
int __thiscall sub_1000D8F2(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 4) = "bad allocation";
  *(_DWORD *)this = &off_100652F4;
  return result;
}
// 100652F4: using guessed type int (__thiscall *off_100652F4)(LPVOID lpMem, char);

//----- (1000D90A) --------------------------------------------------------
void *__thiscall sub_1000D90A(void *this, int a2)
{
  void *v2; // esi@1
  int v3; // eax@1

  v2 = this;
  v3 = (int)((char *)this + 4);
  *(_DWORD *)this = &off_100652D4;
  *(_DWORD *)v3 = 0;
  *(_DWORD *)(v3 + 4) = 0;
  sub_10027412(a2 + 4, (int)((char *)this + 4));
  return v2;
}
// 100652D4: using guessed type int (__thiscall *off_100652D4)(LPVOID lpMem, char);

//----- (1000D936) --------------------------------------------------------
void *__thiscall sub_1000D936(void *this, int a2)
{
  void *v2; // esi@1
  int v3; // edx@1
  int v5; // [sp+4h] [bp-8h]@1
  char v6; // [sp+8h] [bp-4h]@1

  v2 = this;
  v5 = a2;
  v6 = 1;
  v3 = (int)((char *)this + 4);
  *(_DWORD *)this = &off_100652D4;
  *(_DWORD *)v3 = 0;
  *(_DWORD *)(v3 + 4) = 0;
  sub_10027412((int)&v5, (int)((char *)this + 4));
  return v2;
}
// 100652D4: using guessed type int (__thiscall *off_100652D4)(LPVOID lpMem, char);

//----- (1000D96D) --------------------------------------------------------
void *__thiscall sub_1000D96D(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_1006531C;
  return v2;
}
// 1006531C: using guessed type int (__thiscall *off_1006531C)(LPVOID lpMem, char);

//----- (1000D988) --------------------------------------------------------
void *__thiscall sub_1000D988(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D936(this, a2);
  *(_DWORD *)v2 = &off_1006531C;
  return v2;
}
// 1006531C: using guessed type int (__thiscall *off_1006531C)(LPVOID lpMem, char);

//----- (1000D9A9) --------------------------------------------------------
void *__thiscall sub_1000D9A9(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10065328;
  return v2;
}
// 10065328: using guessed type int (__thiscall *off_10065328)(LPVOID lpMem, char);

//----- (1000D9C4) --------------------------------------------------------
void *__thiscall sub_1000D9C4(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D936(this, a2);
  *(_DWORD *)v2 = &off_10065328;
  return v2;
}
// 10065328: using guessed type int (__thiscall *off_10065328)(LPVOID lpMem, char);

//----- (1000D9E5) --------------------------------------------------------
void *__thiscall sub_1000D9E5(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10065310;
  return v2;
}
// 10065310: using guessed type int (__thiscall *off_10065310)(LPVOID lpMem, char);

//----- (1000DA00) --------------------------------------------------------
void *__thiscall sub_1000DA00(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10065334;
  return v2;
}
// 10065334: using guessed type int (__thiscall *off_10065334)(LPVOID lpMem, char);

//----- (1000DA1B) --------------------------------------------------------
void *__thiscall sub_1000DA1B(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D936(this, a2);
  *(_DWORD *)v2 = &off_10065334;
  return v2;
}
// 10065334: using guessed type int (__thiscall *off_10065334)(LPVOID lpMem, char);

//----- (1000DA3C) --------------------------------------------------------
void *__thiscall sub_1000DA3C(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10065340;
  return v2;
}
// 10065340: using guessed type int (__thiscall *off_10065340)(LPVOID lpMem, char);

//----- (1000DA57) --------------------------------------------------------
void __noreturn sub_1000DA57()
{
  char v0; // [sp+0h] [bp-Ch]@1

  sub_1000D8F2((int)&v0);
  sub_10027494((int)&v0, (int)&unk_10075430);
  __debugbreak();
  JUMPOUT(*(_DWORD *)sub_1000DA74);
}

//----- (1000DA74) --------------------------------------------------------
void __cdecl __noreturn sub_1000DA74(int a1)
{
  char v1; // [sp+0h] [bp-Ch]@1

  sub_1000D9C4(&v1, a1);
  sub_10027494((int)&v1, (int)&unk_100754DC);
  __debugbreak();
  JUMPOUT(*(_DWORD *)sub_1000DA94);
}

//----- (1000DA94) --------------------------------------------------------
void __cdecl __noreturn sub_1000DA94(int a1)
{
  char v1; // [sp+0h] [bp-Ch]@1

  sub_1000DA1B(&v1, a1);
  sub_10027494((int)&v1, (int)&unk_10075518);
  __debugbreak();
  JUMPOUT(*(_DWORD *)sub_1000DAB4);
}

//----- (1000DAB4) --------------------------------------------------------
int __thiscall sub_1000DAB4(int this)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 4);
  if ( !result )
    result = (int)"Unknown exception";
  return result;
}

//----- (1000DAC1) --------------------------------------------------------
void *__thiscall sub_1000DAC1(void *this)
{
  void *v1; // esi@1

  v1 = this;
  *(_DWORD *)this = &off_1006534C;
  sub_1000EE1B((int)((char *)this + 4));
  return v1;
}
// 1006534C: using guessed type int (__stdcall *off_1006534C)(int);

//----- (1000DAD8) --------------------------------------------------------
void *__thiscall sub_1000DAD8(void *this)
{
  void *v1; // esi@1

  v1 = this;
  *(_DWORD *)this = &off_10065364;
  sub_1000EE1B((int)((char *)this + 4));
  return v1;
}
// 10065364: using guessed type int (__stdcall *off_10065364)(int);

//----- (1000DAEF) --------------------------------------------------------
int __thiscall sub_1000DAEF(int this)
{
  return sub_1000F417(*(LPVOID *)(this + 32));
}

//----- (1000DAFC) --------------------------------------------------------
char *__thiscall sub_1000DAFC(LPVOID lpMem, char a2)
{
  int v2; // ebp@0
  LPVOID v3; // esi@1
  char *v4; // edi@2
  int v5; // ST0C_4@3
  char *result; // eax@4

  v3 = lpMem;
  if ( a2 & 2 )
  {
    v4 = (char *)lpMem - 4;
    sub_1000F684(v2, (int)lpMem, 36, *((_DWORD *)lpMem - 1), (int)sub_1000DAEF);
    if ( a2 & 1 )
    {
      v5 = 36 * *(_DWORD *)v4 + 4;
      sub_1000FAFF((char *)v3 - 4);
    }
    result = (char *)v3 - 4;
  }
  else
  {
    sub_1000F417(*((LPVOID *)lpMem + 8));
    if ( a2 & 1 )
      sub_1000F417(v3);
    result = (char *)v3;
  }
  return result;
}

//----- (1000DB84) --------------------------------------------------------
int __usercall sub_1000DB84@<eax>(int a1@<ebp>)
{
  int v1; // ecx@4
  void *v3; // ecx@8
  void *v4; // ecx@11

  sub_1000FB4A();
  if ( dword_1007BE3C < 0 )
    goto LABEL_4;
  if ( dword_1007BE3C > 1 )
  {
    if ( dword_1007BE3C != 2 )
      goto LABEL_4;
LABEL_10:
    if ( __security_cookie != dword_1007C03C )
    {
      v4 = *(void **)(a1 + 8);
      if ( v4 )
        sub_1000DAC1(v4);
      return sub_1000FB24(4);
    }
LABEL_4:
    v1 = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 - 16) = v1;
    *(_DWORD *)(a1 - 4) = 0;
    if ( v1 )
    {
      *(_DWORD *)v1 = &off_1006537C;
      sub_10010477((void *)(v1 + 4));
    }
    return sub_1000FB24(4);
  }
  if ( __security_cookie == dword_1007C054 )
    goto LABEL_10;
  v3 = *(void **)(a1 + 8);
  if ( v3 )
    sub_1000DAD8(v3);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1006537C: using guessed type int (__stdcall *off_1006537C)(int);
// 1007BE3C: using guessed type int dword_1007BE3C;
// 1007C03C: using guessed type int dword_1007C03C;
// 1007C054: using guessed type int dword_1007C054;

//----- (1000DBF9) --------------------------------------------------------
int __thiscall sub_1000DBF9(int this)
{
  return sub_100104E3((void *)(this + 4));
}

//----- (1000DC01) --------------------------------------------------------
signed int __cdecl sub_1000DC01(int a1, int a2, int a3)
{
  signed int v3; // ebx@1
  void (__thiscall *v4)(_DWORD, _DWORD); // esi@2
  int v5; // esi@3
  int v6; // eax@3
  int (__thiscall *v7)(_DWORD, _DWORD, _DWORD); // esi@3
  int v8; // ST10_4@3
  int v10; // [sp+10h] [bp-1Ch]@1
  char v11; // [sp+18h] [bp-14h]@3

  v3 = 0;
  v10 = sub_1000E4F6(a2);
  if ( a3 )
  {
    sub_1000E82F((int)&v11, 1);
    sub_1000E4AF(a2);
    v5 = *(_DWORD *)a1;
    v6 = sub_1000E727(a3, (int)&v11);
    v7 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(v5 + 4);
    v8 = v6;
    j_nullsub_1(v7);
    if ( !(unsigned __int8)v7(a1, v10, v8) )
    {
      sub_1000E82F((int)&v11, 1);
      if ( !sub_1000E727(a3, (int)&v11) )
        v3 = 2;
    }
  }
  else
  {
    sub_1000E4AF(a2);
    v4 = (void (__thiscall *)(_DWORD, _DWORD))**(_DWORD **)a1;
    j_nullsub_1(**(_DWORD **)a1);
    v4(a1, v10);
  }
  sub_1000E565(a2);
  return v3;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000DCC9) --------------------------------------------------------
char __thiscall sub_1000DCC9(int this)
{
  return sub_10010D8C((void *)(this + 4));
}

//----- (1000DCD1) --------------------------------------------------------
int __thiscall sub_1000DCD1(void *this)
{
  return sub_1000EF91((int)((char *)this + 4));
}

//----- (1000DCDC) --------------------------------------------------------
int __usercall sub_1000DCDC@<eax>(int a1@<ebp>)
{
  int *v1; // ecx@1
  int *v2; // ebx@1
  int v3; // edi@2
  int v4; // esi@4
  int v5; // edi@6
  void (__thiscall *v6)(_DWORD); // esi@6

  sub_1000FB4A();
  v2 = v1;
  if ( *v1 )
  {
    sub_100115BE(a1, (int)(v1 + 1));
    v3 = *v2;
    *(_DWORD *)(a1 - 4) = 0;
    *(_DWORD *)(a1 - 16) = 0;
    if ( !v3 )
      goto LABEL_12;
    do
    {
      if ( (unsigned __int8)sub_10010808(v3, a1 - 16) )
        break;
      v4 = *(_DWORD *)v3;
      sub_100105E1(v3);
      v3 = v4;
    }
    while ( v4 );
    if ( v3 )
    {
      *v2 = *(_DWORD *)v3;
      sub_100105E1(v3);
      v5 = *(_DWORD *)(a1 - 16);
      v6 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v5 + 12);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v5 + 12));
      v6(v5);
    }
    else
    {
LABEL_12:
      *v2 = 0;
    }
    sub_1001160B((int *)(a1 - 44));
  }
  return sub_1000FB24(32);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1000DCE4) --------------------------------------------------------
int __thiscall sub_1000DCE4(void *this)
{
  return sub_1000EFB0((int)((char *)this + 4));
}

//----- (1000DCEF) --------------------------------------------------------
int __stdcall sub_1000DCEF(int a1)
{
  int v1; // ebp@0

  return sub_10010FAC(v1, a1 + 4);
}

//----- (1000DD05) --------------------------------------------------------
BOOL __userpurge sub_1000DD05@<eax>(void *a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4)
{
  int v4; // ebp@0
  BOOL result; // eax@1

  result = sub_1000DD54(a1, a4, -1);
  if ( !(_BYTE)result )
    sub_1002C84B(a2, v4, a3);
  return result;
}

//----- (1000DD20) --------------------------------------------------------
BOOL __userpurge sub_1000DD20@<eax>(void *a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4)
{
  int v4; // ebp@0
  BOOL result; // eax@1

  result = sub_1000DD77(a1, a4, -1);
  if ( !(_BYTE)result )
    sub_1002C84B(a2, v4, a3);
  return result;
}

//----- (1000DD3B) --------------------------------------------------------
int __stdcall sub_1000DD3B(int a1, int a2)
{
  int v2; // ebp@0

  return sub_100110EC(v2, a1 + 4, a2);
}

//----- (1000DD54) --------------------------------------------------------
BOOL __thiscall sub_1000DD54(void *this, int a2, int a3)
{
  return sub_1000EF01((int)((char *)this + 4), a2 + 4, a3) != 0;
}

//----- (1000DD77) --------------------------------------------------------
BOOL __thiscall sub_1000DD77(void *this, int a2, int a3)
{
  return sub_1000EF26((int)((char *)this + 4), a2 + 4, a3, 0) != 0;
}

//----- (1000DD9C) --------------------------------------------------------
int __cdecl sub_1000DD9C(int a1)
{
  void (__thiscall *v1)(_DWORD); // esi@1

  v1 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)a1 + 12);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a1 + 12));
  v1(a1);
  return 0;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000DDBA) --------------------------------------------------------
void __cdecl sub_1000DDBA(LPVOID lpMem)
{
  if ( lpMem )
  {
    sub_1000DDD4((int)lpMem);
    sub_1002D7BC(lpMem);
  }
}

//----- (1000DDD4) --------------------------------------------------------
int __cdecl sub_1000DDD4(int a1)
{
  int (__thiscall *v1)(_DWORD); // esi@1

  v1 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a1 + 16);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a1 + 16));
  return v1(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000DDF0) --------------------------------------------------------
signed int __cdecl sub_1000DDF0(int a1)
{
  int v1; // ebp@0
  LPVOID v2; // esi@1
  signed int result; // eax@2

  *(_DWORD *)a1 = 0;
  v2 = sub_1002D75F(1u, 0x28u);
  if ( v2 )
  {
    sub_1000DB84(v1);
    *(_DWORD *)a1 = v2;
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (1000DE23) --------------------------------------------------------
int __cdecl sub_1000DE23(int a1)
{
  void (__thiscall *v1)(_DWORD); // esi@1

  v1 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)a1 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a1 + 8));
  v1(a1);
  return 0;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000DE41) --------------------------------------------------------
signed int __cdecl sub_1000DE41(int a1, int a2)
{
  return sub_1000DC01(a1, a2, 0);
}

//----- (1000DE56) --------------------------------------------------------
int *sub_1000DE56()
{
  if ( !(dword_1007BE38 & 1) )
  {
    dword_1007BE38 |= 1u;
    dword_1007BE30 = (int)&off_100654AC;
    dword_1007BE34 = 3;
    sub_1000F3F4((int)nullsub_5);
  }
  return &dword_1007BE30;
}
// 10064188: using guessed type int nullsub_5();
// 100654AC: using guessed type int (__thiscall *off_100654AC)(LPVOID lpMem, char);
// 1007BE30: using guessed type int dword_1007BE30;
// 1007BE34: using guessed type int dword_1007BE34;
// 1007BE38: using guessed type int dword_1007BE38;

//----- (1000DE8C) --------------------------------------------------------
void *__thiscall sub_1000DE8C(void *this, int a2, int a3, int a4)
{
  int v4; // ebp@0
  void *v5; // esi@1
  int v6; // eax@1
  void *result; // eax@1
  int v8; // [sp-18h] [bp-3Ch]@1
  void *v9; // [sp+4h] [bp-20h]@1
  char v10; // [sp+8h] [bp-1Ch]@1

  v5 = this;
  v9 = this;
  sub_10001410((int)&v8, a4);
  v6 = sub_1000E030(v4);
  sub_1000DF25(v5, v6);
  sub_10001930((int)&v10, 1, 0);
  result = v5;
  *((_DWORD *)v5 + 3) = a2;
  *((_DWORD *)v5 + 4) = a3;
  *(_DWORD *)v5 = &off_10065490;
  return result;
}
// 10065490: using guessed type int (__thiscall *off_10065490)(LPVOID lpMem, char);

//----- (1000DEFB) --------------------------------------------------------
void *__thiscall sub_1000DEFB(void *this, int a2)
{
  void *v2; // edi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10065490;
  *((_DWORD *)v2 + 3) = *(_DWORD *)(a2 + 12);
  *((_DWORD *)v2 + 4) = *(_DWORD *)(a2 + 16);
  return v2;
}
// 10065490: using guessed type int (__thiscall *off_10065490)(LPVOID lpMem, char);

//----- (1000DF25) --------------------------------------------------------
void *__thiscall sub_1000DF25(void *this, int a2)
{
  int v2; // eax@1
  void *v3; // esi@1

  v2 = a2;
  v3 = this;
  if ( *(_DWORD *)(a2 + 20) >= 0x10u )
    v2 = *(_DWORD *)a2;
  sub_1000D936(this, v2);
  *(_DWORD *)v3 = &off_10065340;
  return v3;
}
// 10065340: using guessed type int (__thiscall *off_10065340)(LPVOID lpMem, char);

//----- (1000DF4F) --------------------------------------------------------
void *__thiscall sub_1000DF4F(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000DEFB(this, a2);
  *(_DWORD *)v2 = &off_100654A0;
  return v2;
}
// 100654A0: using guessed type int (__thiscall *off_100654A0)(LPVOID lpMem, char);

//----- (1000DF6A) --------------------------------------------------------
int __userpurge sub_1000DF6A@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  void *v4; // ecx@1
  void *v5; // esi@1

  sub_1000FB7E();
  v5 = v4;
  *(_DWORD *)(a1 - 44) = v4;
  sub_100013C0(a1 - 40, *(const void **)(a1 + 16));
  *(_DWORD *)(a1 - 4) = 0;
  sub_1000DE8C(v5, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12), a1 - 40);
  sub_10001930(a1 - 40, 1, 0);
  *(_DWORD *)v5 = &off_100654A0;
  return sub_1000FB39(32);
}
// 1000FB39: using guessed type int __cdecl sub_1000FB39(_DWORD);
// 100654A0: using guessed type int (__thiscall *off_100654A0)(LPVOID lpMem, char);

//----- (1000DFB8) --------------------------------------------------------
BOOL __cdecl sub_1000DFB8(int a1, int a2)
{
  return *(_DWORD *)(*(_DWORD *)(a1 + 4) + 4) == *(_DWORD *)(*(_DWORD *)(a2 + 4) + 4) && *(_DWORD *)a1 == *(_DWORD *)a2;
}

//----- (1000DFE0) --------------------------------------------------------
LPVOID __thiscall sub_1000DFE0(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_10065474;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 10065474: using guessed type int (__thiscall *off_10065474)(LPVOID lpMem, char);

//----- (1000E003) --------------------------------------------------------
LPVOID __thiscall sub_1000E003(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_100652D4;
  sub_10027475((int)((char *)lpMem + 4));
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}
// 100652D4: using guessed type int (__thiscall *off_100652D4)(LPVOID lpMem, char);

//----- (1000E030) --------------------------------------------------------
int __usercall sub_1000E030@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // eax@2
  int v3; // eax@3

  sub_1000FB7E();
  v1 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(a1 - 44) = 0;
  *(_DWORD *)(a1 - 4) = 0;
  if ( *(_DWORD *)(a1 + 36) )
  {
    v2 = sub_100011D0((int)&unk_10065498);
    sub_10001BA0(a1 + 20, &unk_10065498, v2);
  }
  v3 = sub_1000E1A7(a1 + 12, a1 - 40);
  *(_BYTE *)(a1 - 4) = 1;
  sub_10001CD0(a1 + 20, v3, 0, 0xFFFFFFFF);
  sub_10001930(a1 - 40, 1, 0);
  *(_DWORD *)(v1 + 20) = 15;
  *(_DWORD *)(v1 + 16) = 0;
  *(_BYTE *)v1 = 0;
  sub_10001DD0((void *)v1, a1 + 20);
  sub_10001930(a1 + 20, 1, 0);
  return sub_1000FB39(32);
}
// 1000FB39: using guessed type int __cdecl sub_1000FB39(_DWORD);

//----- (1000E0B3) --------------------------------------------------------
signed int __cdecl sub_1000E0B3(signed int a1)
{
  signed int result; // eax@1

  result = a1;
  if ( a1 > 0 )
  {
    if ( a1 <= 2 )
      sub_1000E0E0(6);
    if ( a1 == 3 )
      sub_1000E0E0(0);
    if ( a1 == 4 )
      sub_1000E0E0(1);
  }
  return result;
}

//----- (1000E0E0) --------------------------------------------------------
void __cdecl __noreturn sub_1000E0E0(int a1)
{
  int v1; // ebp@0
  int v2; // ST08_4@1
  int v3; // eax@1
  char v4; // [sp+4h] [bp-14h]@1

  v2 = (int)off_10065390[a1];
  v3 = sub_1000E17F();
  sub_1000DF6A(v1, dword_100653AC[a1], v3, v2);
  sub_10027494((int)&v4, (int)&unk_100755D0);
  __debugbreak();
  JUMPOUT(*(_DWORD *)sub_1000E115);
}
// 1000E17F: using guessed type int sub_1000E17F(void);
// 10065390: using guessed type char *off_10065390[7];
// 100653AC: using guessed type int dword_100653AC[];

//----- (1000E115) --------------------------------------------------------
int __thiscall sub_1000E115(void *this, int a2, int a3)
{
  int result; // eax@1

  result = a2;
  *(_DWORD *)a2 = a3;
  *(_DWORD *)(a2 + 4) = this;
  return result;
}

//----- (1000E127) --------------------------------------------------------
BOOL __thiscall sub_1000E127(int this, int a2, int a3)
{
  return *(_DWORD *)(this + 4) == *(_DWORD *)(*(_DWORD *)(a2 + 4) + 4) && *(_DWORD *)a2 == a3;
}

//----- (1000E14C) --------------------------------------------------------
BOOL __thiscall sub_1000E14C(void *this, int a2, int a3)
{
  void *v3; // edi@1
  int (__thiscall *v4)(_DWORD); // esi@1
  int v5; // eax@1
  char v7; // [sp+8h] [bp-8h]@1

  v3 = this;
  v4 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)this + 12);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 12));
  v5 = v4(v3);
  return sub_1000DFB8(v5, (int)&v7);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000E184) --------------------------------------------------------
int __stdcall sub_1000E184(int a1, int a2)
{
  int v2; // eax@1

  v2 = sub_1000EFCF(a2);
  sub_100013C0(a1, (const void *)v2);
  return a1;
}

//----- (1000E1A7) --------------------------------------------------------
int __thiscall sub_1000E1A7(int this, int a2)
{
  int v2; // edi@1
  int v3; // ST04_4@1
  void (__thiscall *v4)(_DWORD, _DWORD, _DWORD); // esi@1

  v2 = *(_DWORD *)(this + 4);
  v3 = *(_DWORD *)this;
  v4 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v2 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 8));
  v4(v2, a2, v3);
  return a2;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000E1D4) --------------------------------------------------------
int sub_1000E1D4()
{
  return (int)"generic";
}

//----- (1000E1DA) --------------------------------------------------------
int __thiscall sub_1000E1DA(int this)
{
  int v1; // esi@1

  v1 = this;
  *(_DWORD *)this = off_100654D0;
  sub_1000EE3A((LPCRITICAL_SECTION)(this + 4), 0xFA0u, 0);
  return v1;
}
// 100654D0: using guessed type int (*off_100654D0[2])();

//----- (1000E1FA) --------------------------------------------------------
void *__thiscall sub_1000E1FA(void *this)
{
  void *v1; // esi@1

  v1 = this;
  *(_DWORD *)this = off_100654E8;
  sub_1000EE72((int)((char *)this + 4));
  return v1;
}
// 100654E8: using guessed type int (*off_100654E8[2])();

//----- (1000E211) --------------------------------------------------------
int __usercall sub_1000E211@<eax>(int a1@<ebp>)
{
  int v1; // ecx@4
  void *v3; // ecx@8
  int v4; // ecx@11

  sub_1000FB4A();
  if ( dword_1007BE3C < 0 )
    goto LABEL_4;
  if ( dword_1007BE3C > 1 )
  {
    if ( dword_1007BE3C != 2 )
      goto LABEL_4;
LABEL_10:
    if ( __security_cookie != dword_1007C03C )
    {
      v4 = *(_DWORD *)(a1 + 8);
      if ( v4 )
        sub_1000E1DA(v4);
      return sub_1000FB24(4);
    }
LABEL_4:
    v1 = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 - 16) = v1;
    *(_DWORD *)(a1 - 4) = 0;
    if ( v1 )
    {
      *(_DWORD *)v1 = off_10065500;
      sub_10011579(v1 + 4);
    }
    return sub_1000FB24(4);
  }
  if ( __security_cookie == dword_1007C054 )
    goto LABEL_10;
  v3 = *(void **)(a1 + 8);
  if ( v3 )
    sub_1000E1FA(v3);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 10065500: using guessed type int (*off_10065500[2])();
// 1007BE3C: using guessed type int dword_1007BE3C;
// 1007C03C: using guessed type int dword_1007C03C;
// 1007C054: using guessed type int dword_1007C054;

//----- (1000E286) --------------------------------------------------------
int __thiscall sub_1000E286(void *this)
{
  return nullsub_1((char *)this + 4);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (1000E28E) --------------------------------------------------------
void __thiscall sub_1000E28E(int this)
{
  DeleteCriticalSection((LPCRITICAL_SECTION)(this + 4));
}

//----- (1000E299) --------------------------------------------------------
signed __int32 __thiscall sub_1000E299(int this)
{
  return sub_10011A92((void *)(this + 4));
}

//----- (1000E2A1) --------------------------------------------------------
void __thiscall sub_1000E2A1(int this)
{
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 4));
}

//----- (1000E2AC) --------------------------------------------------------
int __thiscall sub_1000E2AC(void *this)
{
  return sub_1000EC20((int)((char *)this + 4));
}

//----- (1000E2B7) --------------------------------------------------------
signed int __cdecl sub_1000E2B7(int a1, int a2)
{
  int v2; // esi@1
  void (__thiscall *v3)(_DWORD); // esi@3
  void (__thiscall *v4)(_DWORD); // esi@7
  int v5; // esi@16
  int v6; // eax@16
  int (__thiscall *v7)(_DWORD, _DWORD); // esi@16
  int v8; // ST04_4@16
  int (__thiscall *v9)(_DWORD); // esi@19
  signed int v10; // eax@20
  signed int v12; // [sp-4h] [bp-28h]@26
  __int64 v13; // [sp+10h] [bp-14h]@11
  int v14; // [sp+18h] [bp-Ch]@14

  v2 = a2;
  if ( (*(_DWORD *)a1 & 0xFFFFFEFF) == 1 )
  {
    if ( *(_DWORD *)(a1 + 40) != GetCurrentThreadId() )
    {
      v3 = (void (__thiscall *)(_DWORD))**(_DWORD **)(a1 + 4);
      j_nullsub_1(v3);
      v3(a1 + 4);
      *(_DWORD *)(a1 + 40) = GetCurrentThreadId();
    }
    ++*(_DWORD *)(a1 + 44);
    return 0;
  }
  if ( !a2 )
  {
    if ( *(_DWORD *)(a1 + 40) != GetCurrentThreadId() )
    {
      v4 = (void (__thiscall *)(_DWORD))**(_DWORD **)(a1 + 4);
      j_nullsub_1(v4);
      v4(a1 + 4);
    }
    goto LABEL_20;
  }
  if ( *(_DWORD *)(a2 + 4) >= 0 && (*(_QWORD *)a2 || *(_DWORD *)(a2 + 8) > 0) )
  {
    sub_1000E82F((int)&v13, 1);
    while ( v13 < *(_QWORD *)v2 || v13 == *(_QWORD *)v2 && v14 < *(_DWORD *)(v2 + 8) )
    {
      if ( *(_DWORD *)(a1 + 40) == GetCurrentThreadId() )
        goto LABEL_20;
      v5 = *(_DWORD *)(a1 + 4);
      v6 = sub_1000E727(a2, (int)&v13);
      v7 = *(int (__thiscall **)(_DWORD, _DWORD))(v5 + 8);
      v8 = v6;
      j_nullsub_1(v7);
      if ( (unsigned __int8)v7(a1 + 4, v8) )
        goto LABEL_20;
      sub_1000E82F((int)&v13, 1);
      v2 = a2;
    }
    goto LABEL_23;
  }
  if ( *(_DWORD *)(a1 + 40) == GetCurrentThreadId()
    || (v9 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)(a1 + 4) + 4), j_nullsub_1(v9), (unsigned __int8)v9(a1 + 4)) )
  {
LABEL_20:
    ++*(_DWORD *)(a1 + 44);
    v10 = *(_DWORD *)(a1 + 44);
    if ( v10 <= 1 )
    {
      *(_DWORD *)(a1 + 40) = GetCurrentThreadId();
    }
    else if ( !(*(_DWORD *)a1 & 0x100) )
    {
      *(_DWORD *)(a1 + 44) = v10 - 1;
      goto LABEL_23;
    }
    return 0;
  }
LABEL_23:
  if ( a2 && (*(_QWORD *)a2 || *(_DWORD *)(a2 + 8) != (*(_DWORD *)(a2 + 4) | *(_DWORD *)a2)) )
    v12 = 2;
  else
    v12 = 3;
  return v12;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000E43D) --------------------------------------------------------
char __thiscall sub_1000E43D(int this)
{
  return sub_10011AC2((void *)(this + 4));
}

//----- (1000E445) --------------------------------------------------------
BOOL __thiscall sub_1000E445(int this)
{
  return TryEnterCriticalSection((LPCRITICAL_SECTION)(this + 4)) != 0;
}

//----- (1000E456) --------------------------------------------------------
bool __thiscall sub_1000E456(void *this)
{
  return (unsigned __int8)sub_1000EF4E((int)((char *)this + 4)) != 0;
}

//----- (1000E46A) --------------------------------------------------------
int __cdecl sub_1000E46A(DWORD DueTime)
{
  signed int savedregs; // ST10_4@1
  signed __int32 v2; // ecx@1
  signed __int32 v3; // edi@1
  LPVOID v4; // eax@1
  PVOID v5; // esi@2

  savedregs = 4;
  sub_1000FB4A();
  v3 = v2;
  v4 = sub_1000F0A6(0x18u);
  if ( v4 )
    v5 = sub_100114AE(v4, DueTime);
  else
    v5 = 0;
  if ( (unsigned __int8)sub_100118F0(v3, v5, 0) )
    sub_100119ED(v3, (signed __int32)v5);
  sub_100116ED(v5);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1000E476) --------------------------------------------------------
BOOL __thiscall sub_1000E476(int this, int a2)
{
  return TryEnterCriticalSection((LPCRITICAL_SECTION)(this + 4)) != 0;
}

//----- (1000E489) --------------------------------------------------------
bool __thiscall sub_1000E489(void *this, int a2)
{
  return sub_1000E456(this);
}

//----- (1000E491) --------------------------------------------------------
char __thiscall sub_1000E491(void *this)
{
  return sub_10011B6D((int)((char *)this + 4));
}

//----- (1000E499) --------------------------------------------------------
void __thiscall sub_1000E499(int this)
{
  LeaveCriticalSection((LPCRITICAL_SECTION)(this + 4));
}

//----- (1000E4A4) --------------------------------------------------------
int __thiscall sub_1000E4A4(void *this)
{
  return sub_1000EE91((int)((char *)this + 4));
}

//----- (1000E4AF) --------------------------------------------------------
int __cdecl sub_1000E4AF(int a1)
{
  int result; // eax@1

  result = a1;
  *(_DWORD *)(a1 + 40) = -1;
  --*(_DWORD *)(result + 44);
  return result;
}

//----- (1000E4BE) --------------------------------------------------------
void __cdecl sub_1000E4BE(LPVOID lpMem)
{
  if ( lpMem )
  {
    sub_1000E4D8((int)lpMem);
    sub_1002D7BC(lpMem);
  }
}

//----- (1000E4D8) --------------------------------------------------------
int __cdecl sub_1000E4D8(int a1)
{
  int (__thiscall *v1)(_DWORD); // esi@1

  v1 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)(a1 + 4) + 16);
  j_nullsub_1(v1);
  return v1(a1 + 4);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000E4F6) --------------------------------------------------------
int __cdecl sub_1000E4F6(int a1)
{
  return a1 + 4;
}

//----- (1000E501) --------------------------------------------------------
signed int __cdecl sub_1000E501(int a1, int a2)
{
  int v2; // eax@1
  int v3; // esi@1
  signed int result; // eax@2

  *(_DWORD *)a1 = 0;
  v2 = (int)sub_1002D75F(1u, 0x30u);
  v3 = v2;
  if ( v2 )
  {
    sub_1000E533(v2, a2);
    *(_DWORD *)a1 = v3;
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (1000E533) --------------------------------------------------------
int __cdecl sub_1000E533(int a1, int a2)
{
  int v2; // ebp@0
  int result; // eax@1

  sub_1000E211(v2);
  *(_DWORD *)(a1 + 40) = -1;
  result = a2;
  *(_DWORD *)(a1 + 44) = 0;
  *(_DWORD *)a1 = a2;
  return result;
}

//----- (1000E554) --------------------------------------------------------
signed int __cdecl sub_1000E554(int a1)
{
  return sub_1000E2B7(a1, 0);
}

//----- (1000E565) --------------------------------------------------------
DWORD __cdecl sub_1000E565(int a1)
{
  DWORD result; // eax@1

  result = GetCurrentThreadId();
  ++*(_DWORD *)(a1 + 44);
  *(_DWORD *)(a1 + 40) = result;
  return result;
}

//----- (1000E579) --------------------------------------------------------
int __cdecl sub_1000E579(int a1)
{
  bool v1; // zf@1
  void (__thiscall *v2)(_DWORD); // esi@2

  v1 = (*(_DWORD *)(a1 + 44))-- == 1;
  if ( v1 )
  {
    *(_DWORD *)(a1 + 40) = -1;
    v2 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)(a1 + 4) + 12);
    j_nullsub_1(v2);
    v2(a1 + 4);
  }
  return 0;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000E5A3) --------------------------------------------------------
void sub_1000E5A3()
{
  _UNKNOWN *v0; // ebx@1
  int v1; // esi@1
  int v2; // edx@1
  int v3; // edi@1
  signed int v4; // ecx@2
  int v5; // eax@3
  bool v6; // zf@6
  int v7; // ecx@7
  signed int v8; // [sp+Ch] [bp-8h]@2
  int v9; // [sp+10h] [bp-4h]@3

  v0 = &unk_1007BE40;
  sub_1000F048();
  v1 = (int)sub_1000E64F();
  v3 = v2;
  do
  {
    v4 = 0;
    v8 = 0;
    if ( *((_DWORD *)v0 + 100) )
    {
      v5 = (int)((char *)v0 + 8);
      v9 = (int)((char *)v0 + 8);
      do
      {
        if ( v4 >= 20 )
          break;
        if ( *(_DWORD *)v5 )
        {
          v6 = sub_1000E69B(*(_DWORD *)(v5 - 8), *(_DWORD *)(v5 - 4), v1, v3) == 0;
          v5 = v9;
          if ( !v6 )
          {
            v7 = *(_DWORD *)(v9 + 8);
            if ( v7 )
              *(_DWORD *)v7 = 1;
            sub_1000E579(*(_DWORD *)v9);
            sub_1000DD9C(*(_DWORD *)(v9 + 4));
            v5 = v9;
            *(_DWORD *)v9 = 0;
            --*((_DWORD *)v0 + 100);
          }
          v4 = v8;
        }
        ++v4;
        v5 += 20;
        v8 = v4;
        v9 = v5;
      }
      while ( *((_DWORD *)v0 + 100) );
    }
    v0 = (_UNKNOWN *)*((_DWORD *)v0 + 101);
  }
  while ( v0 );
  sub_1000F054();
}

//----- (1000E64F) --------------------------------------------------------
HANDLE sub_1000E64F()
{
  HANDLE v0; // ST08_4@1
  HANDLE v1; // ST04_4@1
  HANDLE v2; // eax@1
  HANDLE TargetHandle; // [sp+0h] [bp-8h]@1

  v0 = GetCurrentProcess();
  v1 = GetCurrentThread();
  v2 = GetCurrentProcess();
  if ( DuplicateHandle(v2, v1, v0, &TargetHandle, 2u, 1, 0) )
    CloseHandle(TargetHandle);
  else
    TargetHandle = 0;
  GetCurrentThreadId();
  return TargetHandle;
}

//----- (1000E69B) --------------------------------------------------------
BOOL __cdecl sub_1000E69B(int a1, int a2, int a3, int a4)
{
  return a2 == a4;
}

//----- (1000E6AB) --------------------------------------------------------
int __cdecl sub_1000E6AB(HANDLE hHandle, int a2, int a3)
{
  DWORD v3; // ecx@0
  int result; // eax@5
  DWORD ExitCode; // [sp+0h] [bp-4h]@1

  ExitCode = v3;
  if ( WaitForSingleObjectEx(hHandle, 0xFFFFFFFF, 0) != -1 && GetExitCodeThread(hHandle, &ExitCode) )
  {
    if ( a3 )
      *(_DWORD *)a3 = ExitCode;
    result = CloseHandle(hHandle) != 0 ? 0 : 4;
  }
  else
  {
    result = 4;
  }
  return result;
}

//----- (1000E6FA) --------------------------------------------------------
signed int __usercall sub_1000E6FA@<eax>(int a1@<ebx>, int a2@<edi>, int a3, LPCWSTR lpModuleName, int a5)
{
  HANDLE v5; // eax@1

  v5 = sub_1002C5D7(a1, a2, 0, 0, lpModuleName, a5, 0, a3 + 4);
  *(_DWORD *)a3 = v5;
  return v5 != 0 ? 0 : 4;
}

//----- (1000E727) --------------------------------------------------------
int __cdecl sub_1000E727(int a1, int a2)
{
  int v2; // eax@1
  char v4; // [sp+8h] [bp-20h]@1
  int v5; // [sp+18h] [bp-10h]@1
  int v6; // [sp+1Ch] [bp-Ch]@1
  int v7; // [sp+20h] [bp-8h]@1
  int v8; // [sp+24h] [bp-4h]@1

  v2 = sub_1000E792((int)&v4, a1, a2);
  v5 = *(_DWORD *)v2;
  v6 = *(_DWORD *)(v2 + 4);
  v7 = *(_DWORD *)(v2 + 8);
  v8 = *(_DWORD *)(v2 + 12);
  return 1000 * v5 + (v7 + 999999) / 1000000;
}

//----- (1000E769) --------------------------------------------------------
signed __int64 sub_1000E769()
{
  struct _FILETIME SystemTimeAsFileTime; // [sp+0h] [bp-8h]@1

  sub_1000EDCE(&SystemTimeAsFileTime);
  return *(_QWORD *)&SystemTimeAsFileTime - 116444736000000000i64;
}

//----- (1000E792) --------------------------------------------------------
int __cdecl sub_1000E792(int a1, int a2, int a3)
{
  int v3; // edi@1
  int v4; // eax@1
  unsigned __int8 v5; // cf@2
  signed int v6; // eax@4
  int v7; // edx@7
  int v8; // edx@8
  int v9; // eax@10

  *(_DWORD *)a1 = *(_DWORD *)a2;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)(a2 + 4);
  v3 = a1 + 8;
  *(_DWORD *)v3 = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(v3 + 4) = *(_DWORD *)(a2 + 12);
  v4 = *(_DWORD *)(a1 + 8);
  if ( v4 < 0 )
  {
    do
    {
      v5 = __CFADD__((*(_DWORD *)a1)--, -1);
      *(_DWORD *)(a1 + 4) = v5 + *(_DWORD *)(a1 + 4) - 1;
      v4 += 1000000000;
    }
    while ( v4 < 0 );
    *(_DWORD *)(a1 + 8) = v4;
  }
  v6 = *(_DWORD *)(a1 + 8);
  if ( v6 >= 1000000000 )
  {
    do
    {
      ++*(_QWORD *)a1;
      v6 -= 1000000000;
    }
    while ( v6 >= 1000000000 );
    *(_DWORD *)(a1 + 8) = v6;
  }
  v7 = *(_DWORD *)(a1 + 8);
  if ( v7 >= *(_DWORD *)(a3 + 8) )
  {
    v5 = *(_DWORD *)a1 < *(_DWORD *)a3;
    *(_DWORD *)a1 -= *(_DWORD *)a3;
    *(_DWORD *)(a1 + 4) -= v5 + *(_DWORD *)(a3 + 4);
    v8 = v7 - *(_DWORD *)(a3 + 8);
  }
  else
  {
    *(_QWORD *)a1 += -1i64 - *(_QWORD *)a3;
    v8 = v7 - *(_DWORD *)(a3 + 8) + 1000000000;
  }
  v9 = *(_DWORD *)a1;
  *(_DWORD *)(a1 + 8) = v8;
  if ( *(_DWORD *)(a1 + 4) < 0 || !(*(_DWORD *)(a1 + 4) | v9) && *(_DWORD *)(a1 + 8) <= 0 )
  {
    *(_DWORD *)a1 = 0;
    *(_DWORD *)(a1 + 4) = 0;
    *(_DWORD *)(a1 + 8) = 0;
  }
  return a1;
}

//----- (1000E82F) --------------------------------------------------------
int __cdecl sub_1000E82F(int a1, int a2)
{
  int v2; // esi@1
  signed __int64 v3; // rax@3
  int v4; // ecx@3
  int v5; // edx@3

  v2 = a2;
  if ( a2 == 1 && a1 )
  {
    v3 = sub_1000E769();
    *(_DWORD *)a1 = sub_1000FBF0(v3, 10000000i64);
    *(_DWORD *)(a1 + 4) = v5;
    *(_DWORD *)(a1 + 8) = 100 * v4;
  }
  else
  {
    v2 = 0;
  }
  return v2;
}

//----- (1000E876) --------------------------------------------------------
int sub_1000E876()
{
  HMODULE v0; // esi@1

  v0 = GetModuleHandleW(L"kernel32.dll");
  dword_1007BFD8 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "FlsAlloc");
  dword_1007BFDC = __security_cookie ^ (unsigned int)GetProcAddress(v0, "FlsFree");
  dword_1007BFE0 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "FlsGetValue");
  dword_1007BFE4 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "FlsSetValue");
  dword_1007BFE8 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "InitializeCriticalSectionEx");
  dword_1007BFEC = __security_cookie ^ (unsigned int)GetProcAddress(v0, "InitOnceExecuteOnce");
  dword_1007BFF0 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CreateEventExW");
  dword_1007BFF4 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CreateSemaphoreW");
  dword_1007BFF8 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CreateSemaphoreExW");
  dword_1007BFFC = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CreateThreadpoolTimer");
  dword_1007C000 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "SetThreadpoolTimer");
  dword_1007C004 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "WaitForThreadpoolTimerCallbacks");
  dword_1007C008 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CloseThreadpoolTimer");
  dword_1007C00C = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CreateThreadpoolWait");
  dword_1007C010 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "SetThreadpoolWait");
  dword_1007C014 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CloseThreadpoolWait");
  dword_1007C018 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "FlushProcessWriteBuffers");
  dword_1007C01C = __security_cookie ^ (unsigned int)GetProcAddress(v0, "FreeLibraryWhenCallbackReturns");
  dword_1007C020 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "GetCurrentProcessorNumber");
  dword_1007C024 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CreateSymbolicLinkW");
  dword_1007C028 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "GetCurrentPackageId");
  dword_1007C02C = __security_cookie ^ (unsigned int)GetProcAddress(v0, "GetTickCount64");
  dword_1007C030 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "GetFileInformationByHandleEx");
  dword_1007C034 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "SetFileInformationByHandle");
  dword_1007C038 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "GetSystemTimePreciseAsFileTime");
  dword_1007C03C = __security_cookie ^ (unsigned int)GetProcAddress(v0, "InitializeConditionVariable");
  dword_1007C040 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "WakeConditionVariable");
  dword_1007C044 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "WakeAllConditionVariable");
  dword_1007C048 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "SleepConditionVariableCS");
  dword_1007C04C = __security_cookie ^ (unsigned int)GetProcAddress(v0, "InitializeSRWLock");
  dword_1007C050 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "AcquireSRWLockExclusive");
  dword_1007C054 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "TryAcquireSRWLockExclusive");
  dword_1007C058 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "ReleaseSRWLockExclusive");
  dword_1007C05C = __security_cookie ^ (unsigned int)GetProcAddress(v0, "SleepConditionVariableSRW");
  dword_1007C060 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CreateThreadpoolWork");
  dword_1007C064 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "SubmitThreadpoolWork");
  dword_1007C068 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CloseThreadpoolWork");
  dword_1007C06C = __security_cookie ^ (unsigned int)GetProcAddress(v0, "CompareStringEx");
  dword_1007C070 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "GetLocaleInfoEx");
  dword_1007C074 = __security_cookie ^ (unsigned int)GetProcAddress(v0, "LCMapStringEx");
  return 0;
}
// 1007BFD8: using guessed type int dword_1007BFD8;
// 1007BFDC: using guessed type int dword_1007BFDC;
// 1007BFE0: using guessed type int dword_1007BFE0;
// 1007BFE4: using guessed type int dword_1007BFE4;
// 1007BFE8: using guessed type int dword_1007BFE8;
// 1007BFEC: using guessed type int dword_1007BFEC;
// 1007BFF0: using guessed type int dword_1007BFF0;
// 1007BFF4: using guessed type int dword_1007BFF4;
// 1007BFF8: using guessed type int dword_1007BFF8;
// 1007BFFC: using guessed type int dword_1007BFFC;
// 1007C000: using guessed type int dword_1007C000;
// 1007C004: using guessed type int dword_1007C004;
// 1007C008: using guessed type int dword_1007C008;
// 1007C00C: using guessed type int dword_1007C00C;
// 1007C010: using guessed type int dword_1007C010;
// 1007C014: using guessed type int dword_1007C014;
// 1007C018: using guessed type int dword_1007C018;
// 1007C01C: using guessed type int dword_1007C01C;
// 1007C020: using guessed type int dword_1007C020;
// 1007C024: using guessed type int dword_1007C024;
// 1007C028: using guessed type int dword_1007C028;
// 1007C02C: using guessed type int dword_1007C02C;
// 1007C030: using guessed type int dword_1007C030;
// 1007C034: using guessed type int dword_1007C034;
// 1007C038: using guessed type int dword_1007C038;
// 1007C03C: using guessed type int dword_1007C03C;
// 1007C040: using guessed type int dword_1007C040;
// 1007C044: using guessed type int dword_1007C044;
// 1007C048: using guessed type int dword_1007C048;
// 1007C04C: using guessed type int dword_1007C04C;
// 1007C050: using guessed type int dword_1007C050;
// 1007C054: using guessed type int dword_1007C054;
// 1007C058: using guessed type int dword_1007C058;
// 1007C05C: using guessed type int dword_1007C05C;
// 1007C060: using guessed type int dword_1007C060;
// 1007C064: using guessed type int dword_1007C064;
// 1007C068: using guessed type int dword_1007C068;
// 1007C06C: using guessed type int dword_1007C06C;
// 1007C070: using guessed type int dword_1007C070;
// 1007C074: using guessed type int dword_1007C074;

//----- (1000EC20) --------------------------------------------------------
int __cdecl sub_1000EC20(int a1)
{
  int v1; // esi@1

  v1 = __security_cookie ^ dword_1007C050;
  j_nullsub_1(__security_cookie ^ dword_1007C050);
  return ((int (__stdcall *)(int))v1)(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C050: using guessed type int dword_1007C050;

//----- (1000EC3F) --------------------------------------------------------
int __cdecl sub_1000EC3F(int a1)
{
  int v1; // esi@1
  int result; // eax@2

  v1 = __security_cookie ^ dword_1007C008;
  if ( __security_cookie != dword_1007C008 )
  {
    j_nullsub_1(__security_cookie ^ dword_1007C008);
    result = ((int (__stdcall *)(int))v1)(a1);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C008: using guessed type int dword_1007C008;

//----- (1000EC60) --------------------------------------------------------
int __cdecl sub_1000EC60(int a1)
{
  int v1; // esi@1
  int result; // eax@2

  v1 = __security_cookie ^ dword_1007C014;
  if ( __security_cookie != dword_1007C014 )
  {
    j_nullsub_1(__security_cookie ^ dword_1007C014);
    result = ((int (__stdcall *)(int))v1)(a1);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C014: using guessed type int dword_1007C014;

//----- (1000EC81) --------------------------------------------------------
int __cdecl sub_1000EC81(LPSECURITY_ATTRIBUTES lpEventAttributes, LPCWSTR lpName, int a3, int a4)
{
  int v4; // esi@1
  int result; // eax@2

  v4 = __security_cookie ^ dword_1007BFF0;
  if ( __security_cookie == dword_1007BFF0 )
  {
    result = (int)CreateEventW(lpEventAttributes, a3 & 1, a3 & 2, lpName);
  }
  else
  {
    j_nullsub_1(__security_cookie ^ dword_1007BFF0);
    result = ((int (__stdcall *)(LPSECURITY_ATTRIBUTES, LPCWSTR, int, int))v4)(lpEventAttributes, lpName, a3, a4);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007BFF0: using guessed type int dword_1007BFF0;

//----- (1000ECC6) --------------------------------------------------------
int __cdecl sub_1000ECC6(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // esi@1
  int result; // eax@2
  int v8; // esi@3

  v6 = __security_cookie ^ dword_1007BFF8;
  if ( __security_cookie == dword_1007BFF8 )
  {
    v8 = __security_cookie ^ dword_1007BFF4;
    if ( __security_cookie == dword_1007BFF4 )
    {
      result = 0;
    }
    else
    {
      j_nullsub_1(__security_cookie ^ dword_1007BFF4);
      result = ((int (__stdcall *)(int, int, int, int))v8)(a1, a2, a3, a4);
    }
  }
  else
  {
    j_nullsub_1(__security_cookie ^ dword_1007BFF8);
    result = ((int (__stdcall *)(int, int, int, int, int, int))v6)(a1, a2, a3, a4, a5, a6);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007BFF4: using guessed type int dword_1007BFF4;
// 1007BFF8: using guessed type int dword_1007BFF8;

//----- (1000ED1C) --------------------------------------------------------
int __cdecl sub_1000ED1C(int a1, int a2, int a3)
{
  int v3; // esi@1
  int result; // eax@2

  v3 = __security_cookie ^ dword_1007BFFC;
  if ( __security_cookie == dword_1007BFFC )
  {
    result = 0;
  }
  else
  {
    j_nullsub_1(__security_cookie ^ dword_1007BFFC);
    result = ((int (__stdcall *)(int, int, int))v3)(a1, a2, a3);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007BFFC: using guessed type int dword_1007BFFC;

//----- (1000ED47) --------------------------------------------------------
int __cdecl sub_1000ED47(int a1, int a2, int a3)
{
  int v3; // esi@1
  int result; // eax@2

  v3 = __security_cookie ^ dword_1007C00C;
  if ( __security_cookie == dword_1007C00C )
  {
    result = 0;
  }
  else
  {
    j_nullsub_1(__security_cookie ^ dword_1007C00C);
    result = ((int (__stdcall *)(int, int, int))v3)(a1, a2, a3);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C00C: using guessed type int dword_1007C00C;

//----- (1000ED72) --------------------------------------------------------
int sub_1000ED72()
{
  int v0; // esi@1
  int result; // eax@2

  v0 = __security_cookie ^ dword_1007C018;
  if ( __security_cookie != dword_1007C018 )
  {
    j_nullsub_1(__security_cookie ^ dword_1007C018);
    result = ((int (*)(void))v0)();
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C018: using guessed type int dword_1007C018;

//----- (1000ED8C) --------------------------------------------------------
int __cdecl sub_1000ED8C(int a1, int a2)
{
  int v2; // esi@1
  int result; // eax@2

  v2 = __security_cookie ^ dword_1007C01C;
  if ( __security_cookie != dword_1007C01C )
  {
    j_nullsub_1(__security_cookie ^ dword_1007C01C);
    result = ((int (__stdcall *)(int, int))v2)(a1, a2);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C01C: using guessed type int dword_1007C01C;

//----- (1000EDB0) --------------------------------------------------------
int sub_1000EDB0()
{
  int v0; // esi@1
  int result; // eax@2

  v0 = __security_cookie ^ dword_1007C020;
  if ( __security_cookie == dword_1007C020 )
  {
    result = 0;
  }
  else
  {
    j_nullsub_1(__security_cookie ^ dword_1007C020);
    result = ((int (*)(void))v0)();
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C020: using guessed type int dword_1007C020;

//----- (1000EDCE) --------------------------------------------------------
void __cdecl sub_1000EDCE(LPFILETIME lpSystemTimeAsFileTime)
{
  int v1; // esi@1

  v1 = __security_cookie ^ dword_1007C038;
  if ( __security_cookie == dword_1007C038 )
  {
    GetSystemTimeAsFileTime(lpSystemTimeAsFileTime);
  }
  else
  {
    j_nullsub_1(__security_cookie ^ dword_1007C038);
    ((void (__stdcall *)(_DWORD))v1)(lpSystemTimeAsFileTime);
  }
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C038: using guessed type int dword_1007C038;

//----- (1000EDF7) --------------------------------------------------------
DWORD sub_1000EDF7()
{
  int v0; // esi@1
  DWORD result; // eax@2

  v0 = __security_cookie ^ dword_1007C02C;
  if ( __security_cookie == dword_1007C02C )
  {
    result = GetTickCount();
  }
  else
  {
    j_nullsub_1(__security_cookie ^ dword_1007C02C);
    result = ((int (*)(void))v0)();
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C02C: using guessed type int dword_1007C02C;

//----- (1000EE1B) --------------------------------------------------------
int __cdecl sub_1000EE1B(int a1)
{
  int v1; // esi@1

  v1 = __security_cookie ^ dword_1007C03C;
  j_nullsub_1(__security_cookie ^ dword_1007C03C);
  return ((int (__stdcall *)(int))v1)(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C03C: using guessed type int dword_1007C03C;

//----- (1000EE3A) --------------------------------------------------------
int __cdecl sub_1000EE3A(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount, int a3)
{
  int v3; // esi@1
  int result; // eax@2

  v3 = __security_cookie ^ dword_1007BFE8;
  if ( __security_cookie == dword_1007BFE8 )
  {
    InitializeCriticalSectionAndSpinCount(lpCriticalSection, dwSpinCount);
    result = 1;
  }
  else
  {
    j_nullsub_1(__security_cookie ^ dword_1007BFE8);
    result = ((int (__stdcall *)(LPCRITICAL_SECTION, DWORD, int))v3)(lpCriticalSection, dwSpinCount, a3);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007BFE8: using guessed type int dword_1007BFE8;

//----- (1000EE72) --------------------------------------------------------
int __cdecl sub_1000EE72(int a1)
{
  int v1; // esi@1

  v1 = __security_cookie ^ dword_1007C04C;
  j_nullsub_1(__security_cookie ^ dword_1007C04C);
  return ((int (__stdcall *)(int))v1)(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C04C: using guessed type int dword_1007C04C;

//----- (1000EE91) --------------------------------------------------------
int __cdecl sub_1000EE91(int a1)
{
  int v1; // esi@1

  v1 = __security_cookie ^ dword_1007C058;
  j_nullsub_1(__security_cookie ^ dword_1007C058);
  return ((int (__stdcall *)(int))v1)(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C058: using guessed type int dword_1007C058;

//----- (1000EEB0) --------------------------------------------------------
int __cdecl sub_1000EEB0(int a1, int a2, int a3, int a4)
{
  int v4; // esi@1
  int result; // eax@2

  v4 = __security_cookie ^ dword_1007C000;
  if ( __security_cookie != dword_1007C000 )
  {
    j_nullsub_1(__security_cookie ^ dword_1007C000);
    result = ((int (__stdcall *)(int, int, int, int))v4)(a1, a2, a3, a4);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C000: using guessed type int dword_1007C000;

//----- (1000EEDA) --------------------------------------------------------
int __cdecl sub_1000EEDA(int a1, int a2, int a3)
{
  int v3; // esi@1
  int result; // eax@2

  v3 = __security_cookie ^ dword_1007C010;
  if ( __security_cookie != dword_1007C010 )
  {
    j_nullsub_1(__security_cookie ^ dword_1007C010);
    result = ((int (__stdcall *)(int, int, int))v3)(a1, a2, a3);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C010: using guessed type int dword_1007C010;

//----- (1000EF01) --------------------------------------------------------
int __cdecl sub_1000EF01(int a1, int a2, int a3)
{
  int v3; // esi@1

  v3 = __security_cookie ^ dword_1007C048;
  j_nullsub_1(__security_cookie ^ dword_1007C048);
  return ((int (__stdcall *)(int, int, int))v3)(a1, a2, a3);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C048: using guessed type int dword_1007C048;

//----- (1000EF26) --------------------------------------------------------
int __cdecl sub_1000EF26(int a1, int a2, int a3, int a4)
{
  int v4; // esi@1

  v4 = __security_cookie ^ dword_1007C05C;
  j_nullsub_1(__security_cookie ^ dword_1007C05C);
  return ((int (__stdcall *)(int, int, int, int))v4)(a1, a2, a3, a4);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C05C: using guessed type int dword_1007C05C;

//----- (1000EF4E) --------------------------------------------------------
int __cdecl sub_1000EF4E(int a1)
{
  int v1; // esi@1

  v1 = __security_cookie ^ dword_1007C054;
  j_nullsub_1(__security_cookie ^ dword_1007C054);
  return ((int (__stdcall *)(int))v1)(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C054: using guessed type int dword_1007C054;

//----- (1000EF6D) --------------------------------------------------------
int __cdecl sub_1000EF6D(int a1, int a2)
{
  int v2; // esi@1
  int result; // eax@2

  v2 = __security_cookie ^ dword_1007C004;
  if ( __security_cookie != dword_1007C004 )
  {
    j_nullsub_1(__security_cookie ^ dword_1007C004);
    result = ((int (__stdcall *)(int, int))v2)(a1, a2);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C004: using guessed type int dword_1007C004;

//----- (1000EF91) --------------------------------------------------------
int __cdecl sub_1000EF91(int a1)
{
  int v1; // esi@1

  v1 = __security_cookie ^ dword_1007C044;
  j_nullsub_1(__security_cookie ^ dword_1007C044);
  return ((int (__stdcall *)(int))v1)(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C044: using guessed type int dword_1007C044;

//----- (1000EFB0) --------------------------------------------------------
int __cdecl sub_1000EFB0(int a1)
{
  int v1; // esi@1

  v1 = __security_cookie ^ dword_1007C040;
  j_nullsub_1(__security_cookie ^ dword_1007C040);
  return ((int (__stdcall *)(int))v1)(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C040: using guessed type int dword_1007C040;

//----- (1000EFCF) --------------------------------------------------------
int __cdecl sub_1000EFCF(int a1)
{
  _UNKNOWN *v1; // eax@1

  v1 = &unk_10065EA0;
  while ( *(_DWORD *)v1 != a1 )
  {
    v1 = (char *)v1 + 8;
    if ( (char *)v1 == "address family not supported" )
      return (int)"unknown error";
  }
  return *((_DWORD *)v1 + 1);
}

//----- (1000EFF4) --------------------------------------------------------
void *__thiscall sub_1000EFF4(void *this)
{
  void *v1; // edi@1
  struct _RTL_CRITICAL_SECTION *v2; // esi@2

  v1 = this;
  if ( !_InterlockedExchangeAdd((volatile signed __int32 *)&dword_1007A000, 1u) )
  {
    v2 = &stru_1007C080;
    do
    {
      sub_1000F06E(v2);
      ++v2;
    }
    while ( (signed int)v2 < (signed int)&dword_1007C140 );
  }
  return v1;
}
// 1007A000: using guessed type int dword_1007A000;
// 1007C140: using guessed type int dword_1007C140;

//----- (1000F048) --------------------------------------------------------
void sub_1000F048()
{
  sub_1000F085(&stru_1007C0E0);
}

//----- (1000F054) --------------------------------------------------------
void sub_1000F054()
{
  sub_1000F093(&stru_1007C0E0);
}

//----- (1000F060) --------------------------------------------------------
void __cdecl sub_1000F060(LPCRITICAL_SECTION lpCriticalSection)
{
  DeleteCriticalSection(lpCriticalSection);
}

//----- (1000F06E) --------------------------------------------------------
int __cdecl sub_1000F06E(LPCRITICAL_SECTION lpCriticalSection)
{
  return sub_1000EE3A(lpCriticalSection, 0xFA0u, 0);
}

//----- (1000F085) --------------------------------------------------------
void __cdecl sub_1000F085(LPCRITICAL_SECTION lpCriticalSection)
{
  EnterCriticalSection(lpCriticalSection);
}

//----- (1000F093) --------------------------------------------------------
void __cdecl sub_1000F093(LPCRITICAL_SECTION lpCriticalSection)
{
  LeaveCriticalSection(lpCriticalSection);
}

//----- (1000F0A6) --------------------------------------------------------
LPVOID __cdecl sub_1000F0A6(SIZE_T a1)
{
  LPVOID result; // eax@6

  while ( 1 )
  {
    result = sub_1002C36D(a1);
    if ( result )
      break;
    if ( !sub_1002D9F6(a1) )
    {
      if ( a1 == -1 )
        sub_1000FCB8();
      sub_1000DA57();
    }
  }
  return result;
}

//----- (1000F0D9) --------------------------------------------------------
int __cdecl sub_1000F0D9(int a1, unsigned int a2)
{
  int v2; // ecx@1
  int v3; // edx@1
  int v4; // esi@1
  int result; // eax@5

  v2 = a1 + *(_DWORD *)(a1 + 60);
  v3 = *(_WORD *)(v2 + 20) + v2 + 24;
  v4 = v3 + 40 * *(_WORD *)(v2 + 6);
  if ( v3 == v4 )
  {
LABEL_5:
    result = 0;
  }
  else
  {
    while ( a2 < *(_DWORD *)(v3 + 12) || a2 >= *(_DWORD *)(v3 + 12) + *(_DWORD *)(v3 + 8) )
    {
      v3 += 40;
      if ( v3 == v4 )
        goto LABEL_5;
    }
    result = v3;
  }
  return result;
}

//----- (1000F11D) --------------------------------------------------------
char sub_1000F11D()
{
  char result; // al@2
  signed __int32 v1; // edx@3
  signed __int32 v2; // eax@5

  if ( sub_1000FE73() )
  {
    v1 = *(_DWORD *)(__readfsdword(24) + 4);
    do
    {
      v2 = _InterlockedCompareExchange((volatile signed __int32 *)&unk_1007C144, v1, 0);
      if ( !v2 )
        return 0;
    }
    while ( v1 != v2 );
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1000F152) --------------------------------------------------------
char __usercall sub_1000F152@<al>(int a1@<ebx>, int a2@<edi>)
{
  int v2; // eax@3

  if ( sub_1000FE73() )
  {
    sub_1000FCD5();
  }
  else
  {
    v2 = sub_1000FE6F();
    if ( sub_1002E162(a1, a2, v2) )
      return 0;
    sub_1002E373();
  }
  return 1;
}
// 1002E373: using guessed type int sub_1002E373(void);

//----- (1000F17D) --------------------------------------------------------
bool __usercall sub_1000F17D@<al>(int a1@<ebx>, int a2@<edi>)
{
  return sub_1000F253(a1, a2, 0) != 0;
}

//----- (1000F18B) --------------------------------------------------------
char sub_1000F18B()
{
  if ( !sub_10027E7D() )
    return 0;
  if ( !sub_1002E884() )
  {
    sub_10027E88();
    return 0;
  }
  return 1;
}

//----- (1000F1AA) --------------------------------------------------------
char sub_1000F1AA()
{
  sub_1002E88F();
  sub_10027E88();
  return 1;
}

//----- (1000F1B7) --------------------------------------------------------
int __cdecl sub_1000F1B7(int a1, int a2, int a3, void (__stdcall *a4)(_DWORD, _DWORD, _DWORD), int a5, int a6)
{
  if ( !sub_1000FE73() && a2 == 1 )
  {
    j_nullsub_1(a4);
    a4(a1, 0, a3);
  }
  return sub_1002DA8C(a5, a6);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000F1EA) --------------------------------------------------------
int __usercall sub_1000F1EA@<eax>(int a1@<ebp>)
{
  int result; // eax@2

  if ( sub_1000FE73() )
  {
    result = sub_1002E700((unsigned int)&dword_1007C148);
  }
  else
  {
    result = sub_1002DE6E();
    if ( !result )
      result = sub_1002DC32(a1);
  }
  return result;
}
// 1007C148: using guessed type int dword_1007C148;

//----- (1000F20D) --------------------------------------------------------
char sub_1000F20D()
{
  sub_1002E8A9();
  sub_10028B9D();
  return 1;
}

//----- (1000F21A) --------------------------------------------------------
char __cdecl sub_1000F21A(int a1)
{
  if ( !a1 )
    byte_1007C160 = 1;
  sub_1000FCD5();
  if ( !sub_10027E54() )
    return 0;
  if ( !sub_1002E872() )
  {
    sub_10027E93(0);
    return 0;
  }
  return 1;
}
// 1007C160: using guessed type char byte_1007C160;

//----- (1000F253) --------------------------------------------------------
bool __usercall sub_1000F253@<al>(int a1@<ebx>, int a2@<edi>, int a3)
{
  bool result; // al@6
  int v4; // eax@8
  int v5; // eax@8
  int v6; // ST0C_4@8
  int v7; // ST10_4@8
  int v8; // ST14_4@8

  if ( a3 && a3 != 1 )
  {
    sub_1000FE7F(a1, a2, 5u);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1000F2EA);
  }
  if ( !sub_1000FE73() || a3 )
  {
    v4 = __ROR4__(-1, 32 - (__security_cookie & 0x1F));
    v5 = __security_cookie ^ v4;
    dword_1007C148 = v5;
    *(&dword_1007C148 + 1) = v5;
    *(&dword_1007C148 + 2) = v5;
    v6 = v5;
    v7 = v5;
    v8 = v5;
    result = 1;
    dword_1007C154[0] = v6;
    dword_1007C154[1] = v7;
    dword_1007C154[2] = v8;
  }
  else if ( sub_1002E71D((int)&dword_1007C148) )
  {
    result = 0;
  }
  else
  {
    result = sub_1002E71D((int)dword_1007C154) == 0;
  }
  return result;
}
// 1007C148: using guessed type int dword_1007C148;

//----- (1000F2EA) --------------------------------------------------------
int __usercall sub_1000F2EA@<eax>(int a1@<ebp>)
{
  int v1; // edx@1
  signed int v2; // ecx@1
  int v3; // eax@4
  signed int v4; // ST04_4@4

  sub_1000FFB0((int)&unk_10075658, 8);
  *(_DWORD *)(a1 - 4) = 0;
  if ( (_WORD)v10000000.unused == 23117
    && *(_DWORD *)(v1000003C + 0x10000000) == 17744
    && (v2 = 267, *(_WORD *)(v1000003C + 268435480) == 267)
    && (v3 = sub_1000F0D9(0x10000000, *(_DWORD *)(a1 + 8) - 0x10000000), v2 = v4, v3)
    && *(_DWORD *)(v3 + 36) >= 0 )
    *(_DWORD *)(a1 - 4) = -2;
  else
    *(_DWORD *)(a1 - 4) = -2;
  return sub_1000FFF6(v2, v1);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1000F374) --------------------------------------------------------
signed __int32 __cdecl sub_1000F374(char a1)
{
  signed __int32 result; // eax@1

  result = sub_1000FE73();
  if ( result )
  {
    if ( !a1 )
      result = _InterlockedExchange((volatile signed __int32 *)&unk_1007C144, 0);
  }
  return result;
}

//----- (1000F391) --------------------------------------------------------
char __cdecl sub_1000F391(char a1, char a2)
{
  if ( !byte_1007C160 || !a2 )
  {
    sub_1002E897();
    sub_10027E93(a1);
  }
  return 1;
}
// 1007C160: using guessed type char byte_1007C160;

//----- (1000F3B9) --------------------------------------------------------
int __cdecl sub_1000F3B9(int a1)
{
  int v1; // eax@1
  int v2; // eax@2

  v1 = __ROR4__(dword_1007C148 ^ __security_cookie, __security_cookie & 0x1F);
  if ( v1 == -1 )
    v2 = sub_1002E6EA(a1);
  else
    v2 = sub_1002E75A((unsigned int)&dword_1007C148, a1);
  return v2 == 0 ? a1 : 0;
}
// 1007C148: using guessed type int dword_1007C148;

//----- (1000F3F4) --------------------------------------------------------
int __cdecl sub_1000F3F4(int a1)
{
  return (sub_1000F3B9(a1) != 0) - 1;
}

//----- (1000F40E) --------------------------------------------------------
LPVOID __cdecl sub_1000F40E(SIZE_T a1)
{
  return sub_1000F0A6(a1);
}

//----- (1000F417) --------------------------------------------------------
int __cdecl sub_1000F417(LPVOID lpMem)
{
  return sub_1000F409(lpMem);
}

//----- (1000F425) --------------------------------------------------------
int __usercall sub_1000F425@<eax>(int a1@<ebx>, int a2@<edi>)
{
  HMODULE v2; // eax@1
  HMODULE v3; // esi@1
  FARPROC v4; // eax@2
  int v5; // esi@2

  sub_10028272(&CriticalSection, 0xFA0u, 0);
  v2 = GetModuleHandleW(L"kernel32.dll");
  v3 = v2;
  if ( !v2 )
    goto LABEL_8;
  a1 = (int)GetProcAddress(v2, "InitializeConditionVariable");
  a2 = (int)GetProcAddress(v3, "SleepConditionVariableCS");
  v4 = GetProcAddress(v3, "WakeAllConditionVariable");
  v5 = (int)v4;
  if ( !a1 || !a2 || !v4 )
  {
    hObject = CreateEventW(0, 1, 0, 0);
    if ( hObject )
      goto LABEL_7;
LABEL_8:
    sub_1000FE7F(a1, a2, 7u);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1000F4E5);
  }
  hObject = 0;
  j_nullsub_1(a1);
  ((void (__stdcall *)(_UNKNOWN *))a1)(&unk_1007C17C);
  dword_1007C184 = sub_1000F4E5(a2);
  dword_1007C188 = sub_1000F4E5(v5);
LABEL_7:
  sub_1000F3F4((int)sub_1000F502);
  return 0;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C184: using guessed type int dword_1007C184;
// 1007C188: using guessed type int dword_1007C188;

//----- (1000F4E5) --------------------------------------------------------
int __cdecl sub_1000F4E5(int a1)
{
  int v1; // eax@1

  v1 = __ROR4__(a1, 32 - (__security_cookie & 0x1F));
  return __security_cookie ^ v1;
}

//----- (1000F502) --------------------------------------------------------
HANDLE sub_1000F502()
{
  HANDLE result; // eax@1

  DeleteCriticalSection(&CriticalSection);
  result = hObject;
  if ( hObject )
    result = (HANDLE)CloseHandle(hObject);
  return result;
}

//----- (1000F51E) --------------------------------------------------------
int __usercall sub_1000F51E@<eax>(int a1@<esi>, int a2)
{
  int savedregs; // ST04_4@2
  int (__cdecl *v3)(_DWORD, _DWORD); // esi@2
  int result; // eax@2

  sub_1000F5A3();
  ++dword_1007A008;
  *(_DWORD *)a2 = dword_1007A008;
  *(_DWORD *)(*(_DWORD *)(__readfsdword(44) + 4 * TlsIndex) + 4) = dword_1007A008;
  sub_1000F5F0();
  if ( hObject )
  {
    SetEvent(hObject);
    result = ResetEvent(hObject);
  }
  else
  {
    savedregs = a1;
    v3 = (int (__cdecl *)(_DWORD, _DWORD))__ROR4__(dword_1007C188 ^ __security_cookie, __security_cookie & 0x1F);
    j_nullsub_1(v3);
    result = v3(&unk_1007C17C, savedregs);
  }
  return result;
}
// 1000F51E: could not find valid save-restore pair for esi
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007A008: using guessed type int dword_1007A008;
// 1007C188: using guessed type int dword_1007C188;
// 1007C19C: using guessed type int TlsIndex;

//----- (1000F55D) --------------------------------------------------------
void __cdecl sub_1000F55D(int a1)
{
  sub_1000F5A3();
  while ( *(_DWORD *)a1 )
  {
    if ( *(_DWORD *)a1 != -1 )
    {
      *(_DWORD *)(*(_DWORD *)(__readfsdword(44) + 4 * TlsIndex) + 4) = dword_1007A008;
      goto LABEL_7;
    }
    sub_1000F5FC(0x64u);
  }
  *(_DWORD *)a1 = -1;
LABEL_7:
  sub_1000F5F0();
}
// 1007A008: using guessed type int dword_1007A008;
// 1007C19C: using guessed type int TlsIndex;

//----- (1000F5A3) --------------------------------------------------------
void sub_1000F5A3()
{
  EnterCriticalSection(&CriticalSection);
}

//----- (1000F5F0) --------------------------------------------------------
void sub_1000F5F0()
{
  LeaveCriticalSection(&CriticalSection);
}

//----- (1000F5FC) --------------------------------------------------------
int __cdecl sub_1000F5FC(DWORD dwMilliseconds)
{
  int (__stdcall *v1)(_DWORD, _DWORD, _DWORD); // esi@2
  int result; // eax@2
  DWORD v3; // esi@3

  if ( hObject )
  {
    sub_1000F5F0();
    v3 = WaitForSingleObjectEx(hObject, dwMilliseconds, 0);
    sub_1000F5A3();
    result = v3 == 0;
  }
  else
  {
    v1 = (int (__stdcall *)(_DWORD, _DWORD, _DWORD))__ROR4__(
                                                      dword_1007C184 ^ __security_cookie,
                                                      __security_cookie & 0x1F);
    j_nullsub_1(v1);
    result = v1(&unk_1007C17C, &CriticalSection, dwMilliseconds) != 0;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C184: using guessed type int dword_1007C184;

//----- (1000F661) --------------------------------------------------------
LPVOID __thiscall sub_1000F661(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_10066300;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 10066300: using guessed type int (__thiscall *off_10066300)(LPVOID lpMem, char);

//----- (1000F684) --------------------------------------------------------
int __userpurge sub_1000F684@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5)
{
  int v5; // ebx@1
  int v6; // edi@1
  int v7; // esi@1
  int v8; // eax@2
  int v9; // edx@4
  int v10; // ecx@4

  sub_1000FFB0((int)&unk_10075678, 12);
  *(_BYTE *)(a1 - 25) = 0;
  v5 = *(_DWORD *)(a1 + 12);
  v6 = *(_DWORD *)(a1 + 16);
  v7 = v6 * *(_DWORD *)(a1 + 12) + *(_DWORD *)(a1 + 8);
  *(_DWORD *)(a1 + 8) = v7;
  *(_DWORD *)(a1 - 4) = 0;
  while ( 1 )
  {
    v8 = v6--;
    *(_DWORD *)(a1 + 16) = v6;
    if ( !v8 )
      break;
    v7 -= v5;
    *(_DWORD *)(a1 + 8) = v7;
    j_nullsub_1(*(_DWORD *)(a1 + 20));
    (*(void (__thiscall **)(int))(a1 + 20))(v7);
  }
  *(_BYTE *)(a1 - 25) = 1;
  *(_DWORD *)(a1 - 4) = -2;
  sub_1000F6EE(1, v5, a1, v6, v7);
  return sub_1000FFF6(v10, v9);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1000F6E2) --------------------------------------------------------
int __usercall sub_1000F6E2@<eax>(int a1@<ebp>)
{
  return sub_1000F6EE(*(_BYTE *)(a1 - 25), *(_DWORD *)(a1 + 12), a1, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 8));
}

//----- (1000F6EE) --------------------------------------------------------
int __usercall sub_1000F6EE@<eax>(int result@<eax>, int a2@<ebx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>)
{
  if ( !(_BYTE)result )
    result = sub_1000F6FE(a3, a5, a2, a4, *(_DWORD *)(a3 + 20));
  return result;
}

//----- (1000F6FE) --------------------------------------------------------
int __userpurge sub_1000F6FE@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5)
{
  int v5; // edx@1
  int v6; // ecx@1
  int v7; // esi@1
  int v8; // edi@1

  sub_1000FFB0((int)&unk_10075698, 24);
  v7 = 0;
  *(_DWORD *)(a1 - 4) = 0;
  v8 = *(_DWORD *)(a1 + 8);
  while ( 1 )
  {
    *(_DWORD *)(a1 - 28) = v7;
    if ( v7 == *(_DWORD *)(a1 + 16) )
      break;
    v8 -= *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 8) = v8;
    j_nullsub_1(*(_DWORD *)(a1 + 20));
    (*(void (__thiscall **)(int))(a1 + 20))(v8);
    ++v7;
  }
  *(_DWORD *)(a1 - 4) = -2;
  return sub_1000FFF6(v6, v5);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1000F76B) --------------------------------------------------------
int __userpurge sub_1000F76B@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // eax@1
  int v7; // ebx@1
  int v8; // edx@4
  int v9; // ecx@4

  sub_1000FFB0((int)&unk_100756B8, 16);
  v7 = 0;
  *(_DWORD *)(a1 - 32) = 0;
  *(_BYTE *)(a1 - 25) = 0;
  *(_DWORD *)(a1 - 4) = 0;
  while ( v7 != *(_DWORD *)(a1 + 16) )
  {
    j_nullsub_1(*(_DWORD *)(a1 + 20));
    (*(void (__thiscall **)(_DWORD))(a1 + 20))(*(_DWORD *)(a1 + 8));
    v6 = *(_DWORD *)(a1 + 12);
    *(_DWORD *)(a1 + 8) += v6;
    ++v7;
    *(_DWORD *)(a1 - 32) = v7;
  }
  LOBYTE(v6) = 1;
  *(_BYTE *)(a1 - 25) = 1;
  *(_DWORD *)(a1 - 4) = -2;
  sub_1000F7C0(v6, v7, a1);
  return sub_1000FFF6(v9, v8);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1000F7BA) --------------------------------------------------------
int __usercall sub_1000F7BA@<eax>(int a1@<ebp>)
{
  return sub_1000F7C0(*(_BYTE *)(a1 - 25), *(_DWORD *)(a1 - 32), a1);
}

//----- (1000F7C0) --------------------------------------------------------
int __usercall sub_1000F7C0@<eax>(int result@<eax>, int a2@<ebx>, int a3@<ebp>)
{
  if ( !(_BYTE)result )
    result = sub_1000F6FE(a3, *(_DWORD *)(a3 + 8), *(_DWORD *)(a3 + 12), a2, *(_DWORD *)(a3 + 24));
  return result;
}

//----- (1000F7D4) --------------------------------------------------------
int __userpurge sub_1000F7D4@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5)
{
  int v5; // ebp@0
  int result; // eax@5

  if ( a4 )
  {
    if ( a4 == 1 )
    {
      result = sub_1000F827(v5, a2);
    }
    else
    {
      if ( a4 == 2 )
      {
        LOBYTE(result) = sub_1000F18B();
      }
      else
      {
        if ( a4 != 3 )
          return 1;
        LOBYTE(result) = sub_1000F1AA();
      }
      result = (unsigned __int8)result;
    }
  }
  else
  {
    result = sub_1000F939(a1, v5, a2);
  }
  return result;
}

//----- (1000F827) --------------------------------------------------------
int __usercall sub_1000F827@<eax>(int a1@<ebp>, int a2@<edi>)
{
  char v2; // al@1
  int v3; // edx@1
  _UNKNOWN *v4; // ST0C_4@1
  _UNKNOWN *v5; // ecx@1
  char v6; // bl@3
  _UNKNOWN *v7; // eax@10
  _UNKNOWN *v8; // esi@10
  _UNKNOWN *v9; // ST08_4@11
  char v10; // al@11
  int v11; // ST08_4@12
  int v12; // ST00_4@12
  void (__cdecl *v13)(_DWORD, _DWORD, _DWORD); // esi@12

  sub_1000FFB0((int)&unk_100756D8, 16);
  v2 = sub_1000F21A(0);
  v5 = v4;
  if ( v2 )
  {
    *(_BYTE *)(a1 - 29) = sub_1000F11D();
    v6 = 1;
    *(_BYTE *)(a1 - 25) = 1;
    *(_DWORD *)(a1 - 4) = 0;
    if ( dword_1007C140 )
      sub_1000FE7F(1, a2, 7u);
    dword_1007C140 = 1;
    if ( sub_1000F17D(1, a2) )
    {
      sub_100100E8();
      sub_1000F3F4((int)sub_10010113);
      sub_100100A7();
      sub_1000F3F4((int)sub_100100B3);
      sub_100100C5();
      if ( !sub_1002E917((int (**)(void))&unk_10065288, (int (**)(void))&unk_100652A0) )
      {
        if ( sub_1000F152(1, a2) )
        {
          sub_1002E8BB((unsigned int *)&unk_10065250, (unsigned int)&unk_10065284);
          dword_1007C140 = 2;
          v6 = 0;
          *(_BYTE *)(a1 - 25) = 0;
        }
      }
    }
    *(_DWORD *)(a1 - 4) = -2;
    sub_1000F92F(a1);
    if ( !v6 )
    {
      v7 = sub_100100E2();
      v8 = v7;
      if ( *(_DWORD *)v7 )
      {
        v9 = v7;
        v10 = sub_1000F2EA(a1);
        v5 = v9;
        if ( v10 )
        {
          v11 = *(_DWORD *)(a1 + 12);
          v12 = *(_DWORD *)(a1 + 8);
          v13 = *(void (__cdecl **)(_DWORD, _DWORD, _DWORD))v8;
          j_nullsub_1(v13);
          v13(v12, 2, v11);
        }
      }
      ++dword_1007C18C;
    }
  }
  return sub_1000FFF6(v5, v3);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007C140: using guessed type int dword_1007C140;
// 1007C18C: using guessed type int dword_1007C18C;

//----- (1000F92F) --------------------------------------------------------
signed __int32 __usercall sub_1000F92F@<eax>(int a1@<ebp>)
{
  return sub_1000F374(*(_DWORD *)(a1 - 29));
}

//----- (1000F939) --------------------------------------------------------
int __usercall sub_1000F939@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // edx@1
  int v4; // ecx@1

  sub_1000FFB0((int)&unk_100756F8, 12);
  if ( dword_1007C18C > 0 )
  {
    --dword_1007C18C;
    *(_BYTE *)(a2 - 28) = sub_1000F11D();
    *(_DWORD *)(a2 - 4) = 0;
    if ( dword_1007C140 != 2 )
      sub_1000FE7F(a1, a3, 7u);
    sub_1000F1EA(a2);
    dword_1007C140 = 0;
    *(_DWORD *)(a2 - 4) = -2;
    sub_1000F9A7(a2);
    v4 = sub_1000F391(*(_DWORD *)(a2 + 8), 0) != 0;
  }
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007C140: using guessed type int dword_1007C140;
// 1007C18C: using guessed type int dword_1007C18C;

//----- (1000F9A7) --------------------------------------------------------
signed __int32 __usercall sub_1000F9A7@<eax>(int a1@<ebp>)
{
  sub_1000F20D();
  return sub_1000F374(*(_DWORD *)(a1 - 28));
}

//----- (1000F9B6) --------------------------------------------------------
int __usercall sub_1000F9B6@<eax>(int a1@<ebp>)
{
  int v1; // edx@1
  int v2; // ecx@1
  int v3; // edi@1
  int v4; // ebx@5
  signed int v5; // esi@6
  int v6; // esi@7
  signed int v7; // eax@8
  int v8; // esi@13

  sub_1000FFB0((int)&unk_10075718, 12);
  v3 = *(_DWORD *)(a1 + 12);
  if ( v3 || dword_1007C18C > 0 )
  {
    *(_DWORD *)(a1 - 4) = 0;
    if ( v3 == 1 || v3 == 2 )
    {
      v4 = *(_DWORD *)(a1 + 16);
      v5 = sub_1000FAB2(*(_DWORD *)(a1 + 8), v3, *(_DWORD *)(a1 + 16));
      *(_DWORD *)(a1 - 28) = v5;
      if ( !v5 || (v6 = sub_1000F7D4(v4, v3, *(_DWORD *)(a1 + 8), v3, v4), (*(_DWORD *)(a1 - 28) = v6) == 0) )
      {
LABEL_15:
        *(_DWORD *)(a1 - 4) = -2;
        return sub_1000FFF6(v2, v1);
      }
    }
    else
    {
      v4 = *(_DWORD *)(a1 + 16);
    }
    v7 = sub_10040290(*(HINSTANCE *)(a1 + 8), v3, v4);
    *(_DWORD *)(a1 - 28) = v7;
    if ( v3 == 1 && !v7 )
    {
      sub_10040290(*(HINSTANCE *)(a1 + 8), 0, v4);
      sub_1000F7D4(v4, 1, *(_DWORD *)(a1 + 8), 0, v4);
      sub_1000FAB2(*(_DWORD *)(a1 + 8), 0, v4);
    }
    if ( !v3 || v3 == 3 )
    {
      v8 = sub_1000F7D4(v4, v3, *(_DWORD *)(a1 + 8), v3, v4);
      *(_DWORD *)(a1 - 28) = v8;
      if ( v8 )
        *(_DWORD *)(a1 - 28) = sub_1000FAB2(*(_DWORD *)(a1 + 8), v3, v4);
    }
    goto LABEL_15;
  }
  return sub_1000FFF6(v2, v1);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007C18C: using guessed type int dword_1007C18C;

//----- (1000FAB2) --------------------------------------------------------
signed int __stdcall sub_1000FAB2(int a1, int a2, int a3)
{
  return 1;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1000FAFF) --------------------------------------------------------
int __cdecl sub_1000FAFF(LPVOID lpMem)
{
  return sub_1000F0A1(lpMem);
}

//----- (1000FB0D) --------------------------------------------------------
#error "1000FB13: can not convert to microcode (funcsize=2)"

//----- (1000FB24) --------------------------------------------------------
#error "1000FB2F: positive sp value has been found (funcsize=0)"

//----- (1000FB39) --------------------------------------------------------
#error "1000FB3E: can not convert to microcode (funcsize=3)"

//----- (1000FB4A) --------------------------------------------------------
void sub_1000FB4A()
{
  JUMPOUT(__CS__, -1);
}

//----- (1000FB7E) --------------------------------------------------------
void sub_1000FB7E()
{
  JUMPOUT(__CS__, -1);
}

//----- (1000FBB5) --------------------------------------------------------
void __usercall sub_1000FBB5(int a1@<eax>, char a2)
{
  unsigned int v2; // [sp-18h] [bp-18h]@1
  unsigned int *v3; // [sp-Ch] [bp-Ch]@1
  int v4; // [sp-4h] [bp-4h]@1

  v4 = a1;
  v2 = (unsigned int)&a2 ^ __security_cookie;
  v3 = &v2;
  JUMPOUT(__CS__, -1);
}

//----- (1000FBF0) --------------------------------------------------------
unsigned int __stdcall sub_1000FBF0(unsigned __int64 a1, __int64 a2)
{
  unsigned __int64 v2; // rtt@2
  unsigned int v3; // esi@2
  unsigned int v4; // ecx@3
  unsigned int v5; // ebx@3
  unsigned __int64 v6; // rax@3
  unsigned __int8 v7; // cf@4
  unsigned int v8; // eax@5
  int v9; // ecx@5
  unsigned __int64 v10; // rax@5

  if ( HIDWORD(a2) )
  {
    v4 = HIDWORD(a2);
    v5 = a2;
    v6 = a1;
    do
    {
      v7 = v4 & 1;
      v4 >>= 1;
      v5 = __RCR__(v5, v7);
      v7 = BYTE4(v6) & 1;
      HIDWORD(v6) >>= 1;
      LODWORD(v6) = __RCR__(v6, v7);
    }
    while ( v4 );
    v8 = v6 / v5;
    v3 = v8;
    v9 = HIDWORD(a2) * v8;
    v10 = v8 * (unsigned __int64)(unsigned int)a2;
    v7 = __CFADD__(v9, HIDWORD(v10));
    HIDWORD(v10) += v9;
    if ( v7 || HIDWORD(v10) > HIDWORD(a1) || HIDWORD(v10) >= HIDWORD(a1) && (unsigned int)v10 > (unsigned int)a1 )
      --v3;
  }
  else
  {
    LODWORD(v2) = a1;
    HIDWORD(v2) = HIDWORD(a1) % (unsigned int)a2;
    v3 = v2 / (unsigned int)a2;
  }
  return v3;
}

//----- (1000FC85) --------------------------------------------------------
void *__thiscall sub_1000FC85(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_1006630C;
  return v2;
}
// 1006630C: using guessed type int (__thiscall *off_1006630C)(LPVOID lpMem, char);

//----- (1000FCA0) --------------------------------------------------------
int __thiscall sub_1000FCA0(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 4) = "bad array new length";
  *(_DWORD *)this = &off_1006630C;
  return result;
}
// 1006630C: using guessed type int (__thiscall *off_1006630C)(LPVOID lpMem, char);

//----- (1000FCB8) --------------------------------------------------------
void __noreturn sub_1000FCB8()
{
  char v0; // [sp+0h] [bp-Ch]@1

  sub_1000FCA0((int)&v0);
  sub_10027494((int)&v0, (int)&unk_10075734);
  __debugbreak();
  JUMPOUT(*(_DWORD *)sub_1000FCD5);
}

//----- (1000FCD5) --------------------------------------------------------
int sub_1000FCD5()
{
  bool v5; // zf@2
  int v11; // eax@3
  int v12; // edi@9
  int v13; // eax@11
  int v19; // eax@18
  int v21; // [sp+4h] [bp-28h]@2
  char v22; // [sp+1Ch] [bp-10h]@2
  signed int v23; // [sp+24h] [bp-8h]@2
  int v24; // [sp+28h] [bp-4h]@11

  dword_1007C190 = 0;
  dword_1007A020 |= 1u;
  if ( IsProcessorFeaturePresent(0xAu) )
  {
    v22 = 0;
    _EAX = 0;
    dword_1007A020 |= 2u;
    dword_1007C190 = 1;
    __asm { cpuid }
    v23 = _EAX;
    v5 = (_EBX ^ 0x756E6547 | _ECX ^ 0x6C65746E | _EDX ^ 0x49656E69) == 0;
    _EAX = 1;
    __asm { cpuid }
    v21 = _EAX;
    if ( v5
      && ((v11 = _EAX & 0xFFF3FF0, (v21 & 0xFFF3FF0) == 67264)
       || v11 == 132704
       || v11 == 132720
       || v11 == 198224
       || v11 == 198240
       || v11 == 198256) )
    {
      v12 = dword_1007C194 | 1;
      dword_1007C194 |= 1u;
    }
    else
    {
      v12 = dword_1007C194;
    }
    v13 = _ECX;
    v24 = _ECX;
    if ( v23 >= 7 )
    {
      _EAX = 7;
      __asm { cpuid }
      v22 = _EBX;
      v13 = v24;
      if ( _EBX & 0x200 )
        dword_1007C194 = v12 | 2;
    }
    if ( v13 & 0x100000 )
    {
      dword_1007A020 |= 4u;
      dword_1007C190 = 2;
      if ( v13 & 0x8000000 )
      {
        if ( v13 & 0x10000000 )
        {
          __asm { xgetbv }
          if ( (v13 & 6) == 6 )
          {
            v19 = dword_1007A020 | 8;
            dword_1007C190 = 3;
            dword_1007A020 |= 8u;
            if ( v22 & 0x20 )
            {
              dword_1007C190 = 5;
              dword_1007A020 = v19 | 0x20;
            }
          }
        }
      }
    }
  }
  return 0;
}
// 1007A020: using guessed type int dword_1007A020;
// 1007C190: using guessed type int dword_1007C190;
// 1007C194: using guessed type int dword_1007C194;

//----- (1000FE6F) --------------------------------------------------------
signed int sub_1000FE6F()
{
  return 1;
}

//----- (1000FE73) --------------------------------------------------------
BOOL sub_1000FE73()
{
  return dword_10239924 != 0;
}
// 10239924: using guessed type int dword_10239924;

//----- (1000FE7F) --------------------------------------------------------
LONG __usercall sub_1000FE7F@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3)
{
  int v3; // ecx@3
  int v4; // edx@3
  unsigned int v5; // et0@3
  BOOL v6; // eax@3
  bool v7; // bl@3
  LONG result; // eax@3
  int v9; // [sp+8h] [bp-324h]@3
  __int16 v10; // [sp+94h] [bp-298h]@3
  __int16 v11; // [sp+98h] [bp-294h]@3
  __int16 v12; // [sp+9Ch] [bp-290h]@3
  __int16 v13; // [sp+A0h] [bp-28Ch]@3
  int v14; // [sp+A4h] [bp-288h]@3
  int v15; // [sp+A8h] [bp-284h]@3
  int v16; // [sp+ACh] [bp-280h]@3
  int v17; // [sp+B0h] [bp-27Ch]@3
  int v18; // [sp+B4h] [bp-278h]@3
  void *v19; // [sp+B8h] [bp-274h]@3
  int v20; // [sp+BCh] [bp-270h]@3
  int v21; // [sp+C0h] [bp-26Ch]@3
  __int16 v22; // [sp+C4h] [bp-268h]@3
  unsigned int v23; // [sp+C8h] [bp-264h]@3
  void **v24; // [sp+CCh] [bp-260h]@3
  __int16 v25; // [sp+D0h] [bp-25Ch]@3
  int v26; // [sp+2D4h] [bp-58h]@3
  int v27; // [sp+2D8h] [bp-54h]@3
  int v28; // [sp+2E0h] [bp-4Ch]@3
  struct _EXCEPTION_POINTERS ExceptionInfo; // [sp+324h] [bp-8h]@3
  int savedregs; // [sp+32Ch] [bp+0h]@3
  int retaddr; // [sp+330h] [bp+4h]@3

  if ( IsProcessorFeaturePresent(0x17u) )
    __fastfail(a3);
  dword_1007C198 = 0;
  v19 = sub_10028330(&v9, 0, 0x2CCu);
  v18 = v3;
  v17 = v4;
  v16 = a1;
  v15 = 0;
  v14 = a2;
  v25 = __SS__;
  v22 = __CS__;
  v13 = __DS__;
  v12 = __ES__;
  v11 = __FS__;
  v10 = __GS__;
  v5 = __readeflags();
  v23 = v5;
  v21 = retaddr;
  v24 = (void **)&retaddr;
  v9 = 65537;
  v20 = savedregs;
  sub_10028330(&v26, 0, 0x50u);
  v26 = 1073741845;
  v27 = 1;
  v28 = retaddr;
  v6 = IsDebuggerPresent();
  ExceptionInfo.ExceptionRecord = (PEXCEPTION_RECORD)&v26;
  ExceptionInfo.ContextRecord = (PCONTEXT)&v9;
  v7 = v6 == 1;
  SetUnhandledExceptionFilter(0);
  result = UnhandledExceptionFilter(&ExceptionInfo);
  if ( !result )
  {
    result = -(v7 != 0);
    dword_1007C198 &= result;
  }
  return result;
}
// 1007C198: using guessed type int dword_1007C198;

//----- (1000FF9A) --------------------------------------------------------
void sub_1000FF9A()
{
  dword_1007C198 = 0;
}
// 1007C198: using guessed type int dword_1007C198;

//----- (1000FFB0) --------------------------------------------------------
void __cdecl sub_1000FFB0(int a1, int a2)
{
  void *v2; // esp@1
  unsigned int v3; // [sp-18h] [bp-18h]@1
  unsigned int *v4; // [sp-10h] [bp-10h]@1
  int (__cdecl *v5)(PEXCEPTION_RECORD, PVOID, int); // [sp-4h] [bp-4h]@1

  v5 = sub_10027F00;
  v2 = alloca(a2);
  v3 = (unsigned int)&a2 ^ __security_cookie;
  v4 = &v3;
  JUMPOUT(__CS__, __security_cookie ^ a1);
}

//----- (1000FFF6) --------------------------------------------------------
#error "10010001: positive sp value has been found (funcsize=0)"

//----- (1001000B) --------------------------------------------------------
int sub_1001000B()
{
  int result; // eax@3
  DWORD v1; // ecx@4
  LARGE_INTEGER PerformanceCount; // [sp+8h] [bp-14h]@4
  struct _FILETIME SystemTimeAsFileTime; // [sp+10h] [bp-Ch]@1
  DWORD v4; // [sp+18h] [bp-4h]@4

  SystemTimeAsFileTime.dwLowDateTime = 0;
  SystemTimeAsFileTime.dwHighDateTime = 0;
  if ( __security_cookie != -1153374642 && __security_cookie & 0xFFFF0000 )
  {
    result = ~__security_cookie;
    dword_1007A00C = ~__security_cookie;
  }
  else
  {
    GetSystemTimeAsFileTime(&SystemTimeAsFileTime);
    v4 = SystemTimeAsFileTime.dwLowDateTime ^ SystemTimeAsFileTime.dwHighDateTime;
    v4 ^= GetCurrentThreadId();
    v4 ^= GetCurrentProcessId();
    QueryPerformanceCounter(&PerformanceCount);
    result = (int)&v4;
    v1 = (unsigned int)&v4 ^ v4 ^ PerformanceCount.LowPart ^ PerformanceCount.HighPart;
    if ( v1 == -1153374642 )
    {
      v1 = -1153374641;
    }
    else if ( !(v1 & 0xFFFF0000) )
    {
      result = (v1 | 0x4711) << 16;
      v1 |= result;
    }
    __security_cookie = v1;
    dword_1007A00C = ~v1;
  }
  return result;
}
// 1007A00C: using guessed type int dword_1007A00C;

//----- (100100A7) --------------------------------------------------------
void sub_100100A7()
{
  InitializeSListHead(&ListHead);
}

//----- (100100B3) --------------------------------------------------------
PSINGLE_LIST_ENTRY sub_100100B3()
{
  return sub_100284C6(&ListHead);
}

//----- (100100BF) --------------------------------------------------------
_UNKNOWN *sub_100100BF()
{
  return &unk_1007C1A8;
}

//----- (100100C5) --------------------------------------------------------
_UNKNOWN *sub_100100C5()
{
  _UNKNOWN *v0; // eax@1
  int v1; // ecx@1
  _UNKNOWN *result; // eax@1
  int v3; // ecx@1

  v0 = sub_100011C0();
  v1 = *((_DWORD *)v0 + 1);
  *(_DWORD *)v0 |= 4u;
  *((_DWORD *)v0 + 1) = v1;
  result = sub_100100BF();
  v3 = *((_DWORD *)result + 1);
  *(_DWORD *)result |= 2u;
  *((_DWORD *)result + 1) = v3;
  return result;
}

//----- (100100E2) --------------------------------------------------------
_UNKNOWN *sub_100100E2()
{
  return &unk_10239920;
}

//----- (100100E8) --------------------------------------------------------
int sub_100100E8()
{
  unsigned int v0; // esi@1
  int (*v1)(void); // edi@2
  int result; // eax@3

  v0 = (unsigned int)&unk_10074D24;
  if ( &unk_10074D24 < &unk_10074D24 )
  {
    do
    {
      v1 = *(int (**)(void))v0;
      if ( *(_DWORD *)v0 )
      {
        j_nullsub_1(*(_DWORD *)v0);
        result = v1();
      }
      v0 += 4;
    }
    while ( v0 < (unsigned int)&unk_10074D24 );
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010113) --------------------------------------------------------
int sub_10010113()
{
  unsigned int v0; // esi@1
  int (*v1)(void); // edi@2
  int result; // eax@3

  v0 = (unsigned int)&unk_10074D2C;
  if ( &unk_10074D2C < &unk_10074D2C )
  {
    do
    {
      v1 = *(int (**)(void))v0;
      if ( *(_DWORD *)v0 )
      {
        j_nullsub_1(*(_DWORD *)v0);
        result = v1();
      }
      v0 += 4;
    }
    while ( v0 < (unsigned int)&unk_10074D2C );
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001013E) --------------------------------------------------------
BOOL __cdecl sub_1001013E(struct _EXCEPTION_POINTERS *ExceptionInfo)
{
  HANDLE v1; // eax@1

  SetUnhandledExceptionFilter(0);
  UnhandledExceptionFilter(ExceptionInfo);
  v1 = GetCurrentProcess();
  return TerminateProcess(v1, 0xC0000409);
}

//----- (10010166) --------------------------------------------------------
int __usercall sub_10010166@<eax>(int a1@<ebx>, int a2@<edi>, int a3@<esi>, char a4)
{
  int v4; // edx@1
  int v5; // ecx@1
  unsigned int v6; // et0@3
  int vars0; // [sp+324h] [bp+0h]@0
  int retaddr; // [sp+328h] [bp+4h]@3

  if ( IsProcessorFeaturePresent(0x17u) )
    __fastfail(2u);
  dword_1007C2B0 = 0;
  dword_1007C2AC = v5;
  dword_1007C2A8 = v4;
  dword_1007C2A4 = a1;
  dword_1007C2A0 = a3;
  dword_1007C29C = a2;
  word_1007C2C8 = __SS__;
  word_1007C2BC = __CS__;
  word_1007C298 = __DS__;
  word_1007C294 = __ES__;
  word_1007C290 = __FS__;
  word_1007C28C = __GS__;
  v6 = __readeflags();
  dword_1007C2C0 = v6;
  dword_1007C2B4 = vars0;
  dword_1007C2B8 = retaddr;
  dword_1007C2C4 = (int)&a4;
  dword_1007C200 = 65537;
  dword_1007C1BC = retaddr;
  dword_1007C1B0 = -1073740791;
  dword_1007C1B4 = 1;
  dword_1007C1C0 = 1;
  dword_1007C1C4 = 2;
  return sub_1001013E(&ExceptionInfo);
}
// 1007A00C: using guessed type int dword_1007A00C;
// 1007C1B0: using guessed type int dword_1007C1B0;
// 1007C1B4: using guessed type int dword_1007C1B4;
// 1007C1BC: using guessed type int dword_1007C1BC;
// 1007C1C0: using guessed type int dword_1007C1C0;
// 1007C1C4: using guessed type int dword_1007C1C4;
// 1007C200: using guessed type int dword_1007C200;
// 1007C28C: using guessed type __int16 word_1007C28C;
// 1007C290: using guessed type __int16 word_1007C290;
// 1007C294: using guessed type __int16 word_1007C294;
// 1007C298: using guessed type __int16 word_1007C298;
// 1007C29C: using guessed type int dword_1007C29C;
// 1007C2A0: using guessed type int dword_1007C2A0;
// 1007C2A4: using guessed type int dword_1007C2A4;
// 1007C2A8: using guessed type int dword_1007C2A8;
// 1007C2AC: using guessed type int dword_1007C2AC;
// 1007C2B0: using guessed type int dword_1007C2B0;
// 1007C2B4: using guessed type int dword_1007C2B4;
// 1007C2B8: using guessed type int dword_1007C2B8;
// 1007C2BC: using guessed type __int16 word_1007C2BC;
// 1007C2C0: using guessed type int dword_1007C2C0;
// 1007C2C4: using guessed type int dword_1007C2C4;
// 1007C2C8: using guessed type __int16 word_1007C2C8;

//----- (10010261) --------------------------------------------------------
int __thiscall sub_10010261(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_100102B4(this);
  *(_DWORD *)v1 = 56;
  *(_DWORD *)(v1 + 8) = 0x10000000;
  *(_DWORD *)(v1 + 4) = 0x10000000;
  *(_DWORD *)(v1 + 12) = 3584;
  *(_DWORD *)(v1 + 16) = &unk_10066334;
  if ( sub_100078D0((LPCRITICAL_SECTION)(v1 + 20)) < 0 )
  {
    if ( IsDebuggerPresent() )
      OutputDebugStringW(L"ERROR : Unable to initialize critical section in CAtlBaseModule\n");
    byte_102398E0 = 1;
  }
  return v1;
}
// 102398E0: using guessed type char byte_102398E0;

//----- (100102B4) --------------------------------------------------------
int __thiscall sub_100102B4(int this)
{
  int v1; // esi@1
  int result; // eax@1

  v1 = this;
  sub_10028330((void *)(this + 20), 0, 0x18u);
  *(_DWORD *)(v1 + 44) = 0;
  *(_DWORD *)(v1 + 48) = 0;
  result = v1;
  *(_DWORD *)(v1 + 52) = 0;
  return result;
}

//----- (1001030A) --------------------------------------------------------
int __thiscall sub_1001030A(int this, int a2, char a3, char a4)
{
  int v4; // esi@1
  int result; // eax@1

  v4 = this;
  sub_10010457(this);
  *(_DWORD *)v4 = off_10066400;
  *(_DWORD *)(v4 + 12) = 0;
  *(_DWORD *)(v4 + 16) = 0;
  *(_DWORD *)(v4 + 20) = 0;
  *(_DWORD *)(v4 + 24) = a2 + (a4 != 0);
  *(_DWORD *)(v4 + 32) = 0;
  *(_BYTE *)(v4 + 40) = a3;
  result = v4;
  *(_DWORD *)(v4 + 36) = 0;
  *(_BYTE *)(v4 + 41) = 0;
  return result;
}
// 10066400: using guessed type int (*off_10066400[5])();

//----- (1001034A) --------------------------------------------------------
int __userpurge sub_1001034A@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5)
{
  int v5; // ecx@1
  int v6; // esi@1
  int v7; // ebx@1
  SIZE_T v8; // eax@1
  int v9; // eax@1
  bool v10; // zf@1
  int v11; // edi@1
  int v12; // ecx@6
  int v13; // edx@7

  sub_1000FB4A();
  v6 = v5;
  *(_DWORD *)(a1 - 16) = v5;
  v7 = *(_DWORD *)(a1 + 12);
  *(_DWORD *)(v5 + 20) = 0;
  *(_DWORD *)v5 = 48;
  *(_DWORD *)(v5 + 4) = 8;
  v8 = 8 * v7 + 48;
  *(_DWORD *)(v5 + 8) = v8;
  v9 = (int)sub_1000F40E(v8);
  v10 = *(_BYTE *)(a1 + 8) == 0;
  v11 = v9;
  *(_DWORD *)(v6 + 12) = v9;
  *(_DWORD *)(v6 + 16) = v9;
  *(_DWORD *)(a1 - 20) = v9;
  if ( v10 )
  {
    *(_DWORD *)(a1 - 4) = 1;
    if ( v9 )
      sub_1001042F(v9, v7, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20));
  }
  else
  {
    *(_DWORD *)(a1 - 4) = 0;
    if ( v9 )
    {
      sub_1001030A(v9, v7, *(_DWORD *)(a1 + 16), *(_DWORD *)(a1 + 20));
      *(_DWORD *)v11 = &off_1006641C;
      *(_DWORD *)(v11 + 28) = v7;
    }
  }
  v12 = *(_DWORD *)(v6 + 12) + *(_DWORD *)v6;
  if ( v7 )
  {
    v13 = v7;
    do
    {
      if ( v12 )
        *(_DWORD *)(v12 + 4) = *(_DWORD *)(v6 + 16);
      v12 += *(_DWORD *)(v6 + 4);
      --v13;
    }
    while ( v13 );
  }
  *(_DWORD *)(v6 + 24) = v7 + (*(_BYTE *)(a1 + 20) != 0) + 1;
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1006641C: using guessed type int (__thiscall *off_1006641C)(LPVOID lpMem, int, int);

//----- (10010400) --------------------------------------------------------
int __thiscall sub_10010400(int this, char a2)
{
  int v2; // esi@1
  int result; // eax@1

  v2 = this;
  sub_10010457(this);
  *(_DWORD *)v2 = &off_10066454;
  *(_DWORD *)(v2 + 16) = 0;
  *(_BYTE *)(v2 + 24) = a2;
  result = v2;
  *(_DWORD *)(v2 + 28) = 0;
  *(_DWORD *)(v2 + 32) = 0;
  *(_BYTE *)(v2 + 36) = 0;
  *(_DWORD *)(v2 + 16) = v2;
  return result;
}
// 10066454: using guessed type int (__stdcall *off_10066454)(int, int);

//----- (1001042F) --------------------------------------------------------
int __thiscall sub_1001042F(int this, int a2, char a3, char a4)
{
  int v4; // esi@1
  int result; // eax@1

  v4 = this;
  sub_1001030A(this, a2, a3, a4);
  *(_DWORD *)v4 = &off_10066438;
  result = v4;
  *(_DWORD *)(v4 + 28) = 1;
  return result;
}
// 10066438: using guessed type int (__thiscall *off_10066438)(LPVOID lpMem, int, int);

//----- (10010457) --------------------------------------------------------
int __thiscall sub_10010457(int this)
{
  int v1; // esi@1

  v1 = this;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = off_100663D0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 4) = sub_100125BA();
  return v1;
}
// 100125BA: using guessed type int sub_100125BA(void);
// 100663D0: using guessed type int (*off_100663D0[5])();

//----- (10010477) --------------------------------------------------------
void *__thiscall sub_10010477(void *this)
{
  void *v1; // esi@1

  v1 = this;
  *(_DWORD *)this = 0;
  sub_10011579((int)((char *)this + 4));
  return v1;
}

//----- (10010496) --------------------------------------------------------
int __thiscall sub_10010496(int this)
{
  int v1; // esi@1

  v1 = this;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = 0;
  sub_10011579(this + 8);
  return v1;
}

//----- (100104C9) --------------------------------------------------------
unsigned int __thiscall sub_100104C9(void *this)
{
  void *i; // esi@1
  unsigned int result; // eax@3
  bool v3; // cf@3

  for ( i = this; ; sub_100107B6(*((LPVOID *)i + 4)) )
  {
    result = *((_DWORD *)i + 5);
    v3 = result < *((_DWORD *)i + 6);
    ++*((_DWORD *)i + 5);
    if ( !v3 )
      break;
  }
  return result;
}

//----- (100104E3) --------------------------------------------------------
int __thiscall sub_100104E3(void *this)
{
  void *v1; // esi@1

  v1 = this;
  sub_100119A7((int)((char *)this + 4));
  sub_10010D8C(v1);
  return nullsub_1((char *)v1 + 4);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (10010531) --------------------------------------------------------
int __thiscall sub_10010531(void *this)
{
  void *v1; // edi@1
  int v2; // ebx@1
  int v3; // esi@1
  int v4; // ebx@2
  int v5; // ecx@6
  int v6; // esi@7

  v1 = this;
  v2 = (int)((char *)this + 8);
  sub_100119A7((int)((char *)this + 8));
  v3 = *(_DWORD *)v1;
  if ( *(_DWORD *)v1 > 1u )
  {
    do
    {
      v4 = *(_DWORD *)v3;
      if ( (unsigned __int8)sub_10010808(v3, 0) )
        sub_100105E1(v3);
      v3 = v4;
    }
    while ( v4 );
    v2 = (int)((char *)v1 + 8);
  }
  v5 = *((_DWORD *)v1 + 1);
  if ( v5 )
  {
    do
    {
      v6 = *(_DWORD *)v5;
      sub_100105E1(v5);
      v5 = v6;
    }
    while ( v6 );
  }
  return nullsub_1(v2);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (100105B5) --------------------------------------------------------
LPVOID __thiscall sub_100105B5(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1
  int v3; // ST04_4@1

  v2 = lpMem;
  v3 = *((_DWORD *)lpMem + 1);
  *(_DWORD *)lpMem = &off_1006646C;
  sub_10011490(v3);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}
// 1006646C: using guessed type int (__thiscall *off_1006646C)(LPVOID lpMem, char);

//----- (100105E1) --------------------------------------------------------
int __thiscall sub_100105E1(int this)
{
  int v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = *(_DWORD *)(this + 4);
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 8));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100105F9) --------------------------------------------------------
int __thiscall sub_100105F9(LPVOID lpMem)
{
  int result; // eax@1

  result = _InterlockedIncrement((volatile signed __int32 *)lpMem + 7);
  if ( result == 2 )
    result = sub_1000F417(lpMem);
  return result;
}

//----- (10010617) --------------------------------------------------------
int __stdcall sub_10010617(int a1, LPVOID lpMem, int a3)
{
  char v3; // bl@1
  int v4; // eax@2
  void (__thiscall *v5)(_DWORD); // esi@3
  int result; // eax@4
  int v7; // [sp+8h] [bp-4h]@2

  v3 = 0;
  if ( _InterlockedIncrement((volatile signed __int32 *)lpMem + 5) == 1 )
  {
    v3 = 1;
    v7 = *((_DWORD *)lpMem + 1);
    v4 = *((_DWORD *)lpMem + 1);
    *((_BYTE *)lpMem + 41) = 1;
    if ( v4 )
    {
      *((_DWORD *)lpMem + 3) = 0;
      v5 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 12);
      j_nullsub_1(v5);
      v5(v7);
    }
  }
  result = sub_100107B6(lpMem);
  if ( v3 )
    result = sub_10012481(a1, a3);
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010676) --------------------------------------------------------
int __stdcall sub_10010676(int a1, int a2, int a3)
{
  int (__thiscall *v3)(_DWORD, _DWORD, _DWORD); // esi@1
  int result; // eax@1

  v3 = (int (__thiscall *)(_DWORD, _DWORD, _DWORD))**(_DWORD **)a2;
  j_nullsub_1(**(_DWORD **)a2);
  result = v3(a2, 0, 0);
  if ( (_BYTE)result )
    result = sub_10012481(a1, a3);
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100106A8) --------------------------------------------------------
int __stdcall sub_100106A8(LPVOID lpMem, int a2)
{
  int v2; // ebx@2
  void *v3; // ST04_4@2
  int v4; // eax@2
  void (__thiscall *v5)(_DWORD); // esi@3

  if ( _InterlockedIncrement((volatile signed __int32 *)lpMem + 5) == 1 )
  {
    v2 = *((_DWORD *)lpMem + 1);
    v3 = (void *)*((_DWORD *)lpMem + 4);
    v4 = sub_10010720();
    sub_10011DE2((HANDLE)v4, v3, 0);
    *((_BYTE *)lpMem + 41) = 1;
    if ( v2 )
    {
      *((_DWORD *)lpMem + 3) = 0;
      v5 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 12);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 12));
      v5(v2);
    }
  }
  return sub_100107B6(lpMem);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100106FF) --------------------------------------------------------
void __stdcall sub_100106FF(PVOID a1, BOOLEAN a2)
{
  void (__thiscall *v2)(_DWORD, _DWORD, _DWORD); // esi@1

  v2 = (void (__thiscall *)(_DWORD, _DWORD, _DWORD))**(_DWORD **)a1;
  j_nullsub_1(**(_DWORD **)a1);
  v2(a1, 0, 0);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010720) --------------------------------------------------------
int sub_10010720()
{
  bool v0; // zf@4
  int v2; // [sp+0h] [bp-1Ch]@8
  int v3; // [sp+8h] [bp-14h]@6
  int (*v4)(); // [sp+Ch] [bp-10h]@6
  char v5; // [sp+10h] [bp-Ch]@13

  if ( sub_100145C1() >= 3 || dword_1007C50C )
    return dword_1007C50C;
  if ( _InterlockedCompareExchange((volatile signed __int32 *)&dword_1007C508, 1, 0) )
  {
    v3 = 0;
    v4 = sub_10012578;
    while ( !dword_1007C50C && dword_1007C508 == 1 )
      sub_10010BDE(&v2);
  }
  else
  {
    dword_1007C50C = (int)CreateTimerQueue();
    v0 = dword_1007C50C == 0;
    if ( dword_1007C50C )
      goto LABEL_11;
    _InterlockedExchange((volatile signed __int32 *)&dword_1007C508, 0);
  }
  v0 = dword_1007C50C == 0;
LABEL_11:
  if ( v0 )
  {
    sub_1000D8F2((int)&v5);
    sub_10027494((int)&v5, (int)&unk_10075430);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_100107B6);
  }
  return dword_1007C50C;
}
// 1007C508: using guessed type int dword_1007C508;
// 1007C50C: using guessed type int dword_1007C50C;

//----- (100107B6) --------------------------------------------------------
int __thiscall sub_100107B6(LPVOID lpMem)
{
  int result; // eax@1

  result = *((_DWORD *)lpMem + 6) + 1;
  if ( _InterlockedIncrement((volatile signed __int32 *)lpMem + 9) == result )
    result = sub_1000F0A1(lpMem);
  return result;
}

//----- (100107CF) --------------------------------------------------------
char __thiscall sub_100107CF(LPVOID lpMem)
{
  int v1; // esi@1
  signed __int32 v2; // edx@1
  signed __int32 v3; // eax@2
  char result; // al@5

  v1 = *((_DWORD *)lpMem + 7);
  v2 = *((_DWORD *)lpMem + 8);
  if ( v2 == v1 )
    goto LABEL_9;
  do
  {
    v3 = _InterlockedCompareExchange((volatile signed __int32 *)lpMem + 8, v2 - 1, v2);
    if ( v3 == v2 )
      break;
    v2 = v3;
  }
  while ( v3 != v1 );
  if ( v2 == v1 )
  {
LABEL_9:
    sub_100107B6(lpMem);
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (10010808) --------------------------------------------------------
int __thiscall sub_10010808(int this, int a2)
{
  int v2; // edi@1
  int v3; // ST04_4@1
  int (__thiscall *v4)(_DWORD, _DWORD, _DWORD); // esi@1

  v2 = *(_DWORD *)(this + 4);
  v3 = this;
  v4 = (int (__thiscall *)(_DWORD, _DWORD, _DWORD))**(_DWORD **)v2;
  j_nullsub_1(**(_DWORD **)v2);
  return v4(v2, a2, v3);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010829) --------------------------------------------------------
char __thiscall sub_10010829(int this, int a2, int a3)
{
  int v3; // edi@7
  void (__thiscall *v4)(_DWORD); // esi@7

  if ( *(_DWORD *)(*(_DWORD *)(a3 + 4) + 8) == 2
    || _InterlockedCompareExchange((volatile signed __int32 *)(*(_DWORD *)(a3 + 4) + 8), 1, 0) == 2 )
  {
    if ( a2 )
    {
      *(_DWORD *)a2 = *(_DWORD *)(this + 4);
    }
    else
    {
      v3 = *(_DWORD *)(this + 4);
      v4 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 12);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 12));
      v4(v3);
    }
  }
  else if ( a2 )
  {
    *(_DWORD *)a2 = 0;
  }
  return 0;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010885) --------------------------------------------------------
char __thiscall sub_10010885(int this, int a2, int a3)
{
  int v3; // edi@1
  int v4; // edi@4
  void (__thiscall *v5)(_DWORD); // esi@4
  char result; // al@5

  v3 = this;
  if ( _InterlockedIncrement((volatile signed __int32 *)(this + 32)) == 1 )
  {
    sub_10010D3F(this, a3 != 0);
    *(_BYTE *)(v3 + 36) = a3 == 0;
    if ( a2 )
    {
      *(_DWORD *)a2 = *(_DWORD *)(v3 + 4);
    }
    else
    {
      v4 = *(_DWORD *)(v3 + 4);
      v5 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 12);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 12));
      v5(v4);
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100108E0) --------------------------------------------------------
char __thiscall sub_100108E0(LPVOID lpMem, int a2, int a3)
{
  LPVOID v3; // edi@1
  void (__thiscall *v4)(_DWORD, _DWORD, _DWORD); // esi@4
  char result; // al@4

  v3 = lpMem;
  if ( a2 )
    *(_DWORD *)a2 = 0;
  if ( _InterlockedIncrement((volatile signed __int32 *)lpMem + 8) == *((_DWORD *)lpMem + 7) )
  {
    v4 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)lpMem + 20);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)lpMem + 20));
    v4(v3, a2, a3);
    sub_100107B6(v3);
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010926) --------------------------------------------------------
char __thiscall sub_10010926(LPVOID lpMem, int a2, int a3)
{
  LPVOID v3; // edi@1
  void (__thiscall *v4)(_DWORD, _DWORD, _DWORD); // esi@4

  v3 = lpMem;
  if ( a2 )
    *(_DWORD *)a2 = 0;
  if ( _InterlockedIncrement((volatile signed __int32 *)lpMem + 8) == *((_DWORD *)lpMem + 7) )
  {
    v4 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)lpMem + 20);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)lpMem + 20));
    v4(v3, a2, a3);
  }
  sub_100107B6(v3);
  return 0;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010968) --------------------------------------------------------
signed __int32 __thiscall sub_10010968(volatile signed __int32 *this)
{
  unsigned int v1; // edi@1
  signed __int32 result; // eax@1
  unsigned int v3; // ebx@6
  int v4; // edi@6
  int (__thiscall *v5)(_DWORD); // esi@6

  v1 = *this;
  for ( result = _InterlockedCompareExchange(this, 1, *this);
        result != v1;
        result = _InterlockedCompareExchange(this, 1, result) )
    v1 = result;
  if ( v1 > 1 && v1 )
  {
    do
    {
      v3 = *(_DWORD *)v1;
      v4 = *(_DWORD *)(v1 + 4);
      v5 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 12);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 12));
      result = v5(v4);
      v1 = v3;
    }
    while ( v3 );
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100109AF) --------------------------------------------------------
int __thiscall sub_100109AF(LPVOID lpMem, int a2, int a3)
{
  LPVOID v3; // esi@1
  int v4; // ebx@1
  int result; // eax@2
  bool v6; // zf@3
  void *v7; // ST04_4@6
  int v8; // eax@6
  int (__thiscall *v9)(_DWORD); // esi@15

  v3 = lpMem;
  v4 = *((_DWORD *)lpMem + 1);
  if ( !*((_BYTE *)lpMem + 40) || (result = _InterlockedIncrement((volatile signed __int32 *)lpMem + 5), result == 1) )
  {
    v6 = *((_DWORD *)lpMem + 4) == 0;
    *((_DWORD *)lpMem + 3) = a3;
    if ( !v6 )
    {
      if ( sub_100145C1() < 3 )
      {
        v7 = (void *)*((_DWORD *)v3 + 4);
        v8 = sub_10010720();
        sub_10011DE2((HANDLE)v8, v7, (HANDLE)0xFFFFFFFF);
      }
      else
      {
        sub_10012257(*((_DWORD *)v3 + 4));
      }
      if ( *((_DWORD *)v3 + 5) == 1 )
        sub_100107B6(v3);
    }
    if ( *(_DWORD *)(*(_DWORD *)(a3 + 4) + 8) == 2
      || _InterlockedCompareExchange((volatile signed __int32 *)(*(_DWORD *)(a3 + 4) + 8), 1, 0) == 2 )
    {
      result = a2;
      if ( a2 )
      {
        *(_DWORD *)a2 = v4;
      }
      else
      {
        v9 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 12);
        j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 12));
        result = v9(v4);
      }
    }
    else
    {
      result = a2;
      if ( a2 )
        *(_DWORD *)a2 = 0;
    }
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010A5E) --------------------------------------------------------
int __cdecl sub_10010A5E(int a1, char a2)
{
  int v2; // esi@1
  int v3; // edi@1
  int v4; // ebx@2
  char v5; // al@3

  v2 = a1;
  v3 = 0;
  if ( a1 )
  {
    do
    {
      v4 = *(_DWORD *)v2;
      if ( a2 )
        v5 = sub_10010AE3(v2);
      else
        v5 = sub_10010A98(v2);
      if ( v5 )
      {
        *(_DWORD *)v2 = v3;
        v3 = v2;
      }
      v2 = v4;
    }
    while ( v4 );
  }
  return v3;
}

//----- (10010A98) --------------------------------------------------------
int __thiscall sub_10010A98(int this)
{
  int v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = *(_DWORD *)(this + 4);
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 16);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 16));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010AB1) --------------------------------------------------------
char __thiscall sub_10010AB1(void *this)
{
  void *v1; // edi@1
  void (__thiscall *v2)(_DWORD); // esi@2

  v1 = this;
  if ( *((_DWORD *)this + 8) >= *((_DWORD *)this + 7) )
  {
    v2 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)this + 4);
LABEL_3:
    j_nullsub_1(v2);
    v2(v1);
    return 0;
  }
  if ( *((_BYTE *)this + 41) )
  {
    v2 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)this + 8);
    goto LABEL_3;
  }
  return 1;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010AE3) --------------------------------------------------------
int __thiscall sub_10010AE3(int this)
{
  int v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = *(_DWORD *)(this + 4);
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 12);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 12));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010AFB) --------------------------------------------------------
char __thiscall sub_10010AFB(void *this)
{
  void *v1; // edi@1
  void (__thiscall *v2)(_DWORD); // esi@2
  char result; // al@2

  v1 = this;
  if ( *((_BYTE *)this + 36) )
  {
    v2 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)this + 8);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 8));
    v2(v1);
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010B1E) --------------------------------------------------------
char __thiscall sub_10010B1E(void *this)
{
  void *v1; // edi@1
  int (__thiscall *v2)(_DWORD, _DWORD, _DWORD); // esi@2
  void (__thiscall *v3)(_DWORD); // esi@3
  char result; // al@4
  char v5; // [sp+4h] [bp-4h]@2

  v1 = this;
  if ( *((_BYTE *)this + 41) )
  {
    v2 = (int (__thiscall *)(_DWORD, _DWORD, _DWORD))**(_DWORD **)this;
    j_nullsub_1(**(_DWORD **)this);
    if ( (unsigned __int8)v2(v1, &v5, 0) )
    {
      v3 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 8);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 8));
      v3(v1);
    }
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010B61) --------------------------------------------------------
char __thiscall sub_10010B61(void *this)
{
  void *v1; // edi@1
  char result; // al@3
  void (__thiscall *v3)(_DWORD, _DWORD, _DWORD); // esi@4
  char v4; // [sp+4h] [bp-4h]@4

  v1 = this;
  if ( *((_DWORD *)this + 8) >= *((_DWORD *)this + 7) || *((_BYTE *)this + 41) )
  {
    v3 = (void (__thiscall *)(_DWORD, _DWORD, _DWORD))**(_DWORD **)this;
    j_nullsub_1(**(_DWORD **)this);
    v3(v1, &v4, 0);
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010B98) --------------------------------------------------------
signed int __thiscall sub_10010B98(int this, signed int a2)
{
  signed int result; // eax@1

  result = a2;
  if ( a2 )
  {
    *(_DWORD *)this = a2;
    result = 1;
    *(_DWORD *)(this + 4) = 1;
    *(_DWORD *)(this + 8) = 1;
  }
  else
  {
    *(_DWORD *)(this + 8) = 4;
  }
  return result;
}

//----- (10010BBA) --------------------------------------------------------
int __thiscall sub_10010BBA(int this, int a2)
{
  int result; // eax@1

  result = a2;
  if ( a2 )
  {
    *(_DWORD *)(this + 4) = 0;
    *(_DWORD *)this = a2;
    *(_DWORD *)(this + 8) = 1;
  }
  else
  {
    *(_DWORD *)(this + 8) = 4;
  }
  return result;
}

//----- (10010BDE) --------------------------------------------------------
char __thiscall sub_10010BDE(void *this)
{
  int i; // esi@1
  int v2; // eax@2
  signed int v3; // eax@3
  int v4; // eax@4
  int v5; // eax@5
  int v6; // eax@6
  void (*v7)(void); // esi@8
  signed int v8; // eax@9
  bool v10; // zf@11
  void (*v11)(void); // esi@13

  for ( i = (int)this; ; sub_10010B98(i, v3) )
  {
    v2 = *(_DWORD *)(i + 8);
    if ( v2 )
      break;
    *(_DWORD *)(i + 8) = 0;
    v3 = sub_10011A53();
  }
  v4 = v2 - 1;
  if ( !v4 )
  {
    _mm_pause();
    v10 = (*(_DWORD *)i)-- == 1;
    if ( v10 )
      *(_DWORD *)(i + 8) = 3 - (*(_DWORD *)(i + 4) != 0);
    return 1;
  }
  v5 = v4 - 1;
  if ( !v5 )
  {
    v10 = (*(_DWORD *)(i + 4))-- == 1;
    if ( v10 )
      *(_DWORD *)(i + 8) = 3;
    v11 = *(void (**)(void))(i + 12);
    j_nullsub_1(v11);
    v11();
    return 1;
  }
  v6 = v5 - 1;
  if ( v6 )
  {
    if ( v6 == 1 )
    {
      v7 = *(void (**)(void))(i + 12);
      j_nullsub_1(v7);
      v7();
    }
  }
  else
  {
    *(_DWORD *)(i + 8) = 0;
    v8 = sub_10011A53();
    sub_10010B98(i, v8);
  }
  return 0;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010C65) --------------------------------------------------------
char __thiscall sub_10010C65(void *this)
{
  int v1; // esi@1
  char v2; // bl@1
  int v3; // eax@2
  int v4; // eax@3
  int v5; // eax@4
  int v6; // eax@5
  int v7; // eax@6
  int v8; // eax@9
  char result; // al@10
  bool v10; // zf@11

  v1 = (int)this;
  v2 = 0;
  while ( 1 )
  {
    v3 = *(_DWORD *)(v1 + 8);
    if ( v3 )
      break;
    *(_DWORD *)(v1 + 8) = 0;
    v4 = sub_10011A53();
    sub_10010BBA(v1, v4);
  }
  v5 = v3 - 1;
  if ( v5 )
  {
    v6 = v5 - 1;
    if ( v6 )
    {
      v7 = v6 - 1;
      if ( !v7 )
      {
        *(_DWORD *)(v1 + 8) = 0;
        v8 = sub_10011A53();
        sub_10010BBA(v1, v8);
        return 0;
      }
      if ( v7 != 1 )
        return 0;
    }
    else
    {
      v10 = (*(_DWORD *)(v1 + 4))-- == 1;
      if ( v10 )
        *(_DWORD *)(v1 + 8) = 3;
      v2 = 1;
    }
    _mm_pause();
    result = v2;
  }
  else
  {
    _mm_pause();
    v10 = (*(_DWORD *)v1)-- == 1;
    if ( v10 )
      *(_DWORD *)(v1 + 8) = 3 - (*(_DWORD *)(v1 + 4) != 0);
    result = 1;
  }
  return result;
}

//----- (10010CDC) --------------------------------------------------------
char __thiscall sub_10010CDC(PVOID Parameter, DWORD DueTime)
{
  int v2; // esi@1
  int v3; // eax@3
  int v4; // eax@4

  v2 = (int)Parameter;
  if ( *((_BYTE *)Parameter + 24) )
  {
    if ( sub_100145C1() < 3 )
    {
      v4 = sub_10010720();
      v3 = sub_10011DC2((PHANDLE)(v2 + 20), (HANDLE)v4, sub_100106FF, (PVOID)v2, DueTime, 0, 0x20u) == 1;
    }
    else
    {
      v3 = sub_100123E7(DueTime, (int)sub_10010676, v2, 0);
      *(_DWORD *)(v2 + 20) = v3;
      LOBYTE(v3) = v3 != 0;
    }
  }
  else
  {
    LOBYTE(v3) = 0;
  }
  return v3;
}

//----- (10010D3F) --------------------------------------------------------
void __thiscall sub_10010D3F(int this, char a2)
{
  int v2; // esi@1
  void *v3; // ST04_4@6
  int v4; // eax@6

  v2 = this;
  if ( *(_BYTE *)(this + 24) )
  {
    if ( sub_100145C1() < 3 )
    {
      v3 = *(void **)(v2 + 20);
      v4 = sub_10010720();
      sub_10011DE2((HANDLE)v4, v3, (HANDLE)((a2 == 0) - 1));
    }
    else if ( a2 )
    {
      if ( *(_DWORD *)(v2 + 20) )
        sub_10012257(*(_DWORD *)(v2 + 20));
    }
  }
}

//----- (10010D8C) --------------------------------------------------------
char __thiscall sub_10010D8C(void *this)
{
  int v1; // ebp@0
  int *v2; // esi@1
  int v3; // edi@2
  char result; // al@2
  int v5; // ebx@3
  int v6; // edi@3
  int (__thiscall *v7)(_DWORD); // esi@4
  char v8; // [sp+4h] [bp-20h]@2
  int v9; // [sp+20h] [bp-4h]@3

  v2 = (int *)this;
  if ( *(_DWORD *)this )
  {
    sub_100115BE(v1, (int)((char *)this + 4));
    v3 = *v2;
    *v2 = 0;
    result = sub_1001160B((int *)&v8);
    if ( v3 )
    {
      do
      {
        v9 = 0;
        sub_10010808(v3, (int)&v9);
        v5 = *(_DWORD *)v3;
        result = sub_100105E1(v3);
        v6 = v9;
        if ( v9 )
        {
          v7 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v9 + 12);
          j_nullsub_1(*(_DWORD *)(*(_DWORD *)v9 + 12));
          result = v7(v6);
        }
        v3 = v5;
      }
      while ( v5 );
    }
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10010E7B) --------------------------------------------------------
#error "10010FA6: call analysis failed (funcsize=115)"

//----- (10010FAC) --------------------------------------------------------
int __userpurge sub_10010FAC@<eax>(int a1@<ebp>, int a2)
{
  int *v2; // ecx@1
  int *v3; // esi@1
  int v4; // ecx@1

  sub_1000FB4A();
  v3 = v2;
  sub_10010400(a1 - 80, 0);
  sub_100115BE(a1, (int)(v3 + 1));
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(a1 - 68) = sub_10010A5E(*v3, 1);
  v4 = *(_DWORD *)(a1 + 8);
  *v3 = a1 - 68;
  sub_10011B6D(v4);
  *(_DWORD *)(a1 - 4) = -1;
  sub_1001160B((int *)(a1 - 40));
  sub_1001259E(a1);
  sub_10011A92(*(void **)(a1 + 8));
  return sub_1000FB24(68);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10011010) --------------------------------------------------------
int __userpurge sub_10011010@<eax>(int a1@<ebp>, int a2)
{
  int *v2; // ecx@1
  int *v3; // esi@1
  int v4; // eax@1
  bool v5; // cf@3

  sub_1000FB4A();
  v3 = v2;
  v4 = *(_DWORD *)(a1 + 8);
  if ( v4 == -1 )
  {
    *(_DWORD *)(a1 - 44) = sub_10012578;
    *(_DWORD *)(a1 - 16) = 0;
    *(_DWORD *)(a1 - 48) = 0;
    while ( *v3 != 1 )
    {
      if ( !sub_10010C65((void *)(a1 - 56)) )
      {
        sub_10010457(a1 - 40);
        *(_DWORD *)(a1 - 40) = &off_100663E8;
        *(_DWORD *)(a1 - 24) = a1 - 40;
        sub_100115BE(a1, (int)(v3 + 2));
        *(_DWORD *)(a1 - 4) = 0;
        if ( *v3 == 1 )
        {
          *(_BYTE *)(a1 - 16) = 1;
        }
        else
        {
          *(_DWORD *)(a1 - 28) = sub_10010A5E(*v3, 1);
          *v3 = a1 - 28;
        }
        *(_DWORD *)(a1 - 4) = -1;
        sub_1001160B((int *)(a1 - 84));
        if ( !*(_BYTE *)(a1 - 16)
          && *(_DWORD *)(a1 - 32) != 1
          && _InterlockedCompareExchange((volatile signed __int32 *)(a1 - 32), 2, 0) != 1 )
          sub_1001259E(a1);
        return sub_1000FB24(72);
      }
    }
  }
  else if ( v4 )
  {
    *(_DWORD *)(a1 - 20) = v2;
    sub_100111D2(a1);
  }
  else
  {
    v5 = *v2 != 1;
  }
  return sub_1000FB24(72);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 100663E8: using guessed type int (__stdcall *off_100663E8)(int, int);

//----- (100110EC) --------------------------------------------------------
int __userpurge sub_100110EC@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  DWORD v4; // ebx@1
  int v5; // eax@4
  int v6; // edi@4
  int v7; // eax@6
  bool v8; // bl@8
  void (__thiscall *v9)(_DWORD); // esi@8

  sub_1000FB4A();
  *(_DWORD *)(a1 - 16) = v3;
  v4 = *(_DWORD *)(a1 + 12);
  if ( v4 )
  {
    if ( v4 == -1 )
    {
      sub_10010FAC(a1, *(_DWORD *)(a1 + 8));
    }
    else
    {
      v5 = (int)sub_1000F0A6(0x28u);
      *(_DWORD *)(a1 - 20) = v5;
      v6 = 0;
      *(_DWORD *)(a1 - 4) = 0;
      if ( v5 )
        v6 = sub_10010400(v5, 1);
      v7 = *(_DWORD *)(a1 - 16);
      *(_DWORD *)(a1 - 4) = -1;
      sub_100115BE(a1, v7 + 4);
      *(_DWORD *)(a1 - 4) = 1;
      *(_DWORD *)(v6 + 12) = sub_10010A5E(**(_DWORD **)(a1 - 16), 1);
      **(_DWORD **)(a1 - 16) = v6 + 12;
      if ( !sub_10010CDC((PVOID)v6, v4) )
      {
        sub_1000D8F2(a1 - 32);
        sub_10027494(a1 - 32, (int)&unk_10075430);
      }
      sub_10011B6D(*(_DWORD *)(a1 + 8));
      *(_DWORD *)(a1 - 4) = -1;
      sub_1001160B((int *)(a1 - 60));
      sub_1001259E(a1);
      v8 = *(_BYTE *)(v6 + 36) == 0;
      v9 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v6 + 8);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v6 + 8));
      v9(v6);
      sub_10011A92(*(void **)(a1 + 8));
    }
  }
  return sub_1000FB24(48);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (100111D2) --------------------------------------------------------
int __usercall sub_100111D2@<eax>(int a1@<ebp>)
{
  int v1; // edx@1
  int v2; // ebx@3
  DWORD v3; // edi@4
  int v4; // eax@10
  int v5; // esi@18
  int v6; // ecx@18
  int v7; // eax@19
  int v8; // eax@19
  int *v9; // ecx@19
  int v10; // eax@19
  int v11; // ecx@19
  int v12; // eax@22
  int v13; // ecx@22
  int v14; // eax@25
  int v15; // ecx@25
  int v16; // eax@30
  int v17; // edi@31
  int v18; // ecx@32
  int v19; // eax@41
  unsigned int v20; // ebx@42
  int v22; // eax@49
  int v23; // eax@51
  int v24; // [sp-8h] [bp-8h]@20

  sub_1000FB4A();
  v1 = *(_DWORD *)(a1 + 8);
  if ( !v1 )
  {
    sub_1000D988((void *)(a1 - 72), (int)"pEvents");
    sub_10027494(a1 - 72, (int)&unk_10075484);
  }
LABEL_3:
  while ( 1 )
  {
    v2 = *(_DWORD *)(a1 + 12);
    if ( !v2 )
      return sub_1000FB24(136);
    v3 = *(_DWORD *)(a1 + 20);
    if ( v2 == 1 && (!v3 || v3 == -1) )
    {
      if ( !*(_DWORD *)v1 )
      {
        sub_1000D988((void *)(a1 - 84), (int)"pEvents");
        sub_10027494(a1 - 84, (int)&unk_10075484);
        continue;
      }
      sub_10011010(a1, *(_DWORD *)(a1 + 20));
      return sub_1000FB24(136);
    }
    v4 = 0;
    if ( v2 )
    {
      do
      {
        if ( !*(_DWORD *)(v1 + 4 * v4) )
        {
          sub_1000D988((void *)(a1 - 96), (int)"pEvents");
          sub_10027494(a1 - 96, (int)&unk_10075484);
          goto LABEL_3;
        }
        ++v4;
      }
      while ( v4 < (unsigned int)v2 );
    }
    LOBYTE(v4) = v3 && v3 != -1;
    sub_1001034A(a1, *(_DWORD *)(a1 + 16), v2, v3 != -1, v4);
    *(_DWORD *)(a1 - 4) = 0;
    v5 = *(_DWORD *)(a1 - 44);
    v6 = 0;
    *(_BYTE *)(a1 - 13) = 0;
    *(_DWORD *)(a1 - 24) = 0;
    if ( !v2 )
      goto LABEL_36;
    while ( 1 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(a1 + 8) + 4 * v6);
      *(_DWORD *)(a1 - 20) = v7;
      sub_100115BE(a1, v7 + 8);
      v8 = *(_DWORD *)(a1 - 24) * *(_DWORD *)(a1 - 56);
      v9 = *(int **)(a1 - 20);
      *(_BYTE *)(a1 - 4) = 1;
      v10 = *(_DWORD *)(a1 - 60) + *(_DWORD *)(a1 - 48) + v8;
      ++*(_DWORD *)(a1 - 40);
      v11 = *v9;
      *(_DWORD *)(a1 - 32) = v10;
      if ( v11 == 1 )
        break;
      v14 = sub_10010A5E(v11, 1);
      v15 = *(_DWORD *)(a1 - 32);
      *(_DWORD *)v15 = v14;
      **(_DWORD **)(a1 - 20) = v15;
LABEL_26:
      *(_BYTE *)(a1 - 4) = 0;
      sub_1001160B((int *)(a1 - 148));
      v6 = *(_DWORD *)(a1 - 24) + 1;
      *(_DWORD *)(a1 - 24) = v6;
      if ( v6 >= (unsigned int)v2 )
        goto LABEL_35;
    }
    v24 = a1 - 28;
    if ( *(_BYTE *)(a1 + 16) )
    {
      if ( (unsigned __int8)sub_10010808(v10, v24) )
      {
        v12 = sub_10010A5E(*(_DWORD *)(*(_DWORD *)(a1 - 20) + 4), 0);
        v13 = *(_DWORD *)(a1 - 32);
        *(_DWORD *)v13 = v12;
        *(_DWORD *)(*(_DWORD *)(a1 - 20) + 4) = v13;
      }
      if ( *(_DWORD *)(a1 - 28) )
        *(_BYTE *)(a1 - 13) = 1;
      goto LABEL_26;
    }
    sub_10010808(v10, v24);
    if ( *(_DWORD *)(a1 - 28) )
      *(_BYTE *)(a1 - 13) = 1;
    v16 = *(_DWORD *)(a1 - 24) + 1;
    *(_DWORD *)(a1 - 32) = v16;
    if ( v16 < (unsigned int)v2 )
    {
      v17 = v16;
      do
      {
        v18 = *(_DWORD *)(a1 - 60) + *(_DWORD *)(a1 - 48) + v17 * *(_DWORD *)(a1 - 56);
        ++*(_DWORD *)(a1 - 40);
        sub_10010808(v18, a1 - 28);
        ++v17;
      }
      while ( v17 < (unsigned int)v2 );
      v3 = *(_DWORD *)(a1 + 20);
    }
    *(_BYTE *)(a1 - 4) = 0;
    sub_1001160B((int *)(a1 - 148));
LABEL_35:
    if ( *(_BYTE *)(a1 - 13) )
    {
LABEL_41:
      v19 = *(_DWORD *)(v5 + 12);
      if ( v19 )
        v20 = (unsigned int)(v19 - *(_DWORD *)(a1 - 48) - *(_DWORD *)(a1 - 60)) / *(_DWORD *)(a1 - 56);
      sub_100104C9((void *)(a1 - 60));
      return sub_1000FB24(136);
    }
LABEL_36:
    if ( *(_DWORD *)(v5 + 8) == 1 || _InterlockedCompareExchange((volatile signed __int32 *)(v5 + 8), 2, 0) == 1 )
      goto LABEL_41;
    if ( !v3 )
    {
      if ( _InterlockedIncrement((volatile signed __int32 *)(v5 + 20)) == 1 )
      {
        *(_DWORD *)(v5 + 12) = 0;
        *(_BYTE *)(v5 + 41) = 1;
      }
      else
      {
        sub_1001259E(a1);
      }
      goto LABEL_41;
    }
    if ( v3 == -1 || *(_DWORD *)(v5 + 20) )
      goto LABEL_54;
    if ( sub_100145C1() >= 3 )
    {
      v22 = sub_100123E7(v3, (int)sub_10010617, v5, 0);
      *(_DWORD *)(v5 + 16) = v22;
      if ( !v22 )
      {
        sub_1000D8F2(a1 - 108);
        sub_10027494(a1 - 108, (int)&unk_10075430);
        continue;
      }
LABEL_53:
      ++*(_DWORD *)(a1 - 40);
LABEL_54:
      sub_1001259E(a1);
      goto LABEL_41;
    }
    v23 = sub_10010720();
    if ( sub_10011DC2((PHANDLE)(v5 + 16), (HANDLE)v23, (WAITORTIMERCALLBACK)sub_100106A8, (PVOID)v5, v3, 0, 0x20u) )
      goto LABEL_53;
    sub_1000D8F2(a1 - 120);
    sub_10027494(a1 - 120, (int)&unk_10075430);
  }
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10011490) --------------------------------------------------------
int __cdecl sub_10011490(int a1)
{
  int result; // eax@1

  result = a1;
  if ( a1 )
  {
    result = a1 - 8;
    if ( *(_DWORD *)(a1 - 8) == 56797 )
      result = sub_1002C0EC((LPVOID)result);
  }
  return result;
}

//----- (100114AE) --------------------------------------------------------
PVOID __thiscall sub_100114AE(PVOID Parameter, DWORD DueTime)
{
  int v2; // ebp@0
  PVOID v3; // esi@1
  HANDLE *v4; // edi@1
  int v5; // eax@3
  int v6; // eax@5
  char v8; // [sp+Ch] [bp-18h]@6
  char v9; // [sp+18h] [bp-Ch]@4

  v3 = Parameter;
  *((_DWORD *)Parameter + 1) = 0;
  v4 = (HANDLE *)((char *)Parameter + 12);
  *((_DWORD *)Parameter + 2) = 1;
  *((_DWORD *)Parameter + 3) = 0;
  *((_DWORD *)Parameter + 4) = 0;
  *((_DWORD *)Parameter + 5) = 0;
  *(_DWORD *)Parameter = sub_100116CB(v2);
  if ( DueTime != -1 )
  {
    if ( sub_100145C1() < 3 )
    {
      v6 = sub_10010720();
      if ( !sub_10011DC2(v4, (HANDLE)v6, (WAITORTIMERCALLBACK)sub_10011752, v3, DueTime, 0, 0x20u) )
      {
        sub_1000D8F2((int)&v8);
        sub_10027494((int)&v8, (int)&unk_10075430);
        goto LABEL_8;
      }
    }
    else
    {
      v5 = sub_100123E7(DueTime, (int)sub_1001170C, (int)v3, 0);
      *v4 = (HANDLE)v5;
      if ( !v5 )
      {
        sub_1000D8F2((int)&v9);
        sub_10027494((int)&v9, (int)&unk_10075430);
LABEL_8:
        __debugbreak();
        JUMPOUT(*(_DWORD *)sub_10011554);
      }
    }
  }
  return v3;
}

//----- (10011554) --------------------------------------------------------
int __thiscall sub_10011554(int this)
{
  int result; // eax@1

  *(_DWORD *)this = 0;
  result = this;
  *(_DWORD *)(this + 4) = 0;
  return result;
}

//----- (10011564) --------------------------------------------------------
LPCRITICAL_SECTION __thiscall sub_10011564(LPCRITICAL_SECTION lpCriticalSection)
{
  LPCRITICAL_SECTION v1; // esi@1

  v1 = lpCriticalSection;
  sub_10012027(lpCriticalSection, dwSpinCount);
  return v1;
}

//----- (10011579) --------------------------------------------------------
int __thiscall sub_10011579(int this)
{
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 8) = 2;
  *(_DWORD *)(this + 16) = 0;
  *(_DWORD *)(this + 20) = 0;
  return this;
}

//----- (100115A3) --------------------------------------------------------
void *__thiscall sub_100115A3(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_1006647C;
  return v2;
}
// 1006647C: using guessed type int (__thiscall *off_1006647C)(LPVOID lpMem, char);

//----- (100115BE) --------------------------------------------------------
int __userpurge sub_100115BE@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int *v3; // edi@1
  int v4; // eax@1
  void *v5; // esi@1
  int v6; // ecx@3

  sub_1000FB4A();
  v3 = (int *)v2;
  v4 = *(_DWORD *)(a1 + 8);
  v5 = (void *)(v2 + 4);
  *(_DWORD *)(a1 - 16) = v2 + 4;
  *(_DWORD *)v2 = v4;
  *(_DWORD *)(a1 - 20) = v2 + 4;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v2 != -4 )
    sub_100114AE((PVOID)(v2 + 4), 0xFFFFFFFF);
  v6 = *v3;
  *(_DWORD *)(a1 - 4) = -1;
  sub_100118F0(v6, v5, 1);
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10011603) --------------------------------------------------------
void __thiscall sub_10011603(LPCRITICAL_SECTION lpCriticalSection)
{
  DeleteCriticalSection(lpCriticalSection);
}

//----- (1001160B) --------------------------------------------------------
char __thiscall sub_1001160B(int *this)
{
  return sub_10011B6D(*this);
}

//----- (10011643) --------------------------------------------------------
int __thiscall sub_10011643(void *this, unsigned int a2)
{
  int v2; // ebp@0
  void *v3; // esi@1
  int v4; // edi@1
  unsigned int v5; // edx@3
  unsigned int v6; // edi@5
  char v8; // [sp+8h] [bp-10h]@6
  int v9; // [sp+10h] [bp-8h]@6
  int (*v10)(); // [sp+14h] [bp-4h]@6

  v3 = this;
  v4 = sub_100145C6();
  if ( !((*((_DWORD *)v3 + 2) >> 2) & 1) )
  {
    v5 = (*((_DWORD *)v3 + 2) >> 1) & 1 ? (*((_DWORD *)v3 + 2) >> 3) - (a2 >> 3) : 1;
    v6 = v4 + 2;
    if ( v5 <= v6 )
    {
      v9 = 0;
      v10 = sub_10012578;
      sub_10010BBA((int)&v8, dwSpinCount + dwSpinCount * (v5 - 1) / v6);
      while ( *((_DWORD *)v3 + 2) & 1 && sub_10010C65(&v8) )
        ;
    }
  }
  return sub_1001259E(v2);
}

//----- (100116CB) --------------------------------------------------------
LPVOID __usercall sub_100116CB@<eax>(int a1@<ebp>)
{
  LPVOID result; // eax@2

  if ( !(dword_1007A044 & 0x80000000) || (result = sub_10012193(dword_1007C57C)) == 0 )
    result = (LPVOID)sub_100176F9(a1);
  return result;
}
// 1007A044: using guessed type int dword_1007A044;

//----- (100116ED) --------------------------------------------------------
int __thiscall sub_100116ED(LPVOID lpMem)
{
  int result; // eax@2

  if ( *((_DWORD *)lpMem + 3) )
  {
    result = _InterlockedIncrement((volatile signed __int32 *)lpMem + 5);
    if ( result == 2 )
      result = sub_1000F417(lpMem);
  }
  return result;
}

//----- (1001170C) --------------------------------------------------------
int __stdcall sub_1001170C(int a1, LPVOID lpMem, int a3)
{
  int v3; // edi@2
  void (__thiscall *v4)(_DWORD); // esi@2

  if ( _InterlockedCompareExchange((volatile signed __int32 *)lpMem + 4, 2, 0) )
  {
    sub_100116ED(lpMem);
  }
  else
  {
    v3 = *(_DWORD *)lpMem;
    v4 = *(void (__thiscall **)(_DWORD))(**(_DWORD **)lpMem + 12);
    j_nullsub_1(v4);
    v4(v3);
  }
  return sub_10012481(a1, a3);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10011752) --------------------------------------------------------
int __stdcall sub_10011752(LPVOID lpMem, int a2)
{
  void *v2; // ST04_4@1
  int v3; // eax@1
  int v4; // edi@2
  int (__thiscall *v5)(_DWORD); // esi@2
  int result; // eax@2

  v2 = (void *)*((_DWORD *)lpMem + 3);
  v3 = sub_10010720();
  sub_10011DE2((HANDLE)v3, v2, 0);
  if ( _InterlockedCompareExchange((volatile signed __int32 *)lpMem + 4, 2, 0) )
  {
    result = sub_100116ED(lpMem);
  }
  else
  {
    v4 = *(_DWORD *)lpMem;
    v5 = *(int (__thiscall **)(_DWORD))(**(_DWORD **)lpMem + 12);
    j_nullsub_1(v5);
    result = v5(v4);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001179E) --------------------------------------------------------
int __usercall sub_1001179E@<eax>(LPVOID lpMem@<ecx>, int a2@<ebp>)
{
  LPVOID v2; // esi@1
  int result; // eax@2

  v2 = lpMem;
  if ( *((_DWORD *)lpMem + 3) )
  {
    result = (int)((char *)lpMem + 16);
    if ( _InterlockedExchange((volatile signed __int32 *)lpMem + 4, 1) == 2 )
    {
      sub_1001259E(a2);
      result = sub_100116ED(v2);
    }
  }
  return result;
}

//----- (100117C3) --------------------------------------------------------
char __thiscall sub_100117C3(void *this)
{
  int v1; // edi@2
  void (__thiscall *v2)(_DWORD); // esi@2
  char result; // al@2

  if ( _InterlockedCompareExchange((volatile signed __int32 *)this + 4, 1, 0) )
  {
    result = 0;
  }
  else
  {
    *((_DWORD *)this + 2) &= 0xFFFFFFFE;
    v1 = *(_DWORD *)this;
    v2 = *(void (__thiscall **)(_DWORD))(**(_DWORD **)this + 12);
    j_nullsub_1(v2);
    v2(v1);
    result = 1;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100117F4) --------------------------------------------------------
int __thiscall sub_100117F4(int this, int a2)
{
  int result; // eax@1
  unsigned int v3; // ebx@3
  int v4; // edi@6
  int (__thiscall *v5)(_DWORD); // esi@6
  int v6; // [sp+0h] [bp-4h]@1

  v6 = this;
  result = *(_DWORD *)(this + 8) >> 1;
  if ( !(result & 1) )
  {
    result = *(_DWORD *)(a2 + 8) >> 1;
    if ( result & 1 )
    {
      v3 = (*(_DWORD *)(a2 + 8) + 8) & 0xFFFFFFFA;
      if ( *(_DWORD *)(a2 + 8) & 1 )
      {
        if ( (*(_DWORD *)(a2 + 8) >> 2) & 1
          || !*(_DWORD *)(a2 + 12)
          && (v4 = *(_DWORD *)a2,
              v5 = *(int (__thiscall **)(_DWORD))(**(_DWORD **)a2 + 16),
              j_nullsub_1(*(_DWORD *)(**(_DWORD **)a2 + 16)),
              (unsigned __int8)v5(v4)) )
          v3 |= 4u;
      }
      result = v6;
      *(_DWORD *)(result + 8) |= v3;
    }
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001185D) --------------------------------------------------------
int __thiscall sub_1001185D(int this)
{
  int v1; // esi@1
  int result; // eax@1
  char v3; // [sp+4h] [bp-10h]@2
  int v4; // [sp+Ch] [bp-8h]@1
  int (*v5)(); // [sp+10h] [bp-4h]@1

  v1 = this;
  result = *(_DWORD *)(this + 4);
  v4 = 0;
  v5 = sub_10012578;
  while ( !result )
  {
    sub_10010BDE(&v3);
    result = *(_DWORD *)(v1 + 4);
  }
  return result;
}

//----- (1001188A) --------------------------------------------------------
void __thiscall sub_1001188A(LPCRITICAL_SECTION lpCriticalSection)
{
  EnterCriticalSection(lpCriticalSection);
}

//----- (10011892) --------------------------------------------------------
signed __int32 __thiscall sub_10011892(void *this)
{
  volatile signed __int32 *v1; // esi@1
  int v2; // edi@1
  signed __int32 v3; // edx@4
  signed __int32 result; // eax@5

  v1 = (volatile signed __int32 *)this;
  v2 = (int)((char *)this + 4);
  while ( 1 )
  {
    if ( *(_DWORD *)v2 > 0 )
      sub_10011A59(v2, 0, -1);
    v3 = *v1;
    if ( *v1 != -1 )
    {
      result = _InterlockedCompareExchange(v1, v3 + 1, v3);
      if ( result == v3 )
        break;
    }
  }
  return result;
}

//----- (100118C2) --------------------------------------------------------
signed __int32 __thiscall sub_100118C2(int this)
{
  int v1; // esi@1
  signed __int32 result; // eax@1

  v1 = this;
  _InterlockedIncrement((volatile signed __int32 *)(this + 4));
  for ( result = _InterlockedCompareExchange((volatile signed __int32 *)this, -1, 0);
        result;
        result = _InterlockedCompareExchange((volatile signed __int32 *)v1, -1, 0) )
    sub_10011A59(v1, 0, -1);
  return result;
}

//----- (100118F0) --------------------------------------------------------
BOOL __thiscall sub_100118F0(int this, LPVOID lpMem, char a3)
{
  int v3; // ebp@0
  int v4; // edi@1
  int v5; // ebx@2
  char v7; // [sp+8h] [bp-Ch]@9

  v4 = this;
  if ( *(_DWORD *)lpMem == *(_DWORD *)this )
  {
    sub_10019F61(&v7, (int)"Lock already taken");
    sub_10027494((int)&v7, (int)&unk_1007591C);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10011991);
  }
  v5 = _InterlockedExchange((volatile signed __int32 *)(this + 28), (signed __int32)lpMem);
  if ( v5 )
  {
    sub_100117F4((int)lpMem, v5);
    *(_DWORD *)(v5 + 4) = lpMem;
    sub_10011643(lpMem, *(_DWORD *)(v4 + 8));
    if ( *((_DWORD *)lpMem + 4) != 2 )
      sub_100117F4((int)lpMem, v4);
  }
  else
  {
    *(_DWORD *)(this + 24) = lpMem;
    sub_100117F4((int)lpMem, this);
    *((_DWORD *)lpMem + 2) &= 0xFFFFFFFE;
    sub_1001179E(lpMem, v3);
  }
  if ( a3 )
  {
    *(_DWORD *)(v4 + 8) = *((_DWORD *)lpMem + 2);
    *(_DWORD *)(v4 + 4) = *((_DWORD *)lpMem + 1);
    *(_DWORD *)v4 = *(_DWORD *)lpMem;
    *(_DWORD *)(v4 + 24) = lpMem;
  }
  return *((_DWORD *)lpMem + 4) != 2;
}

//----- (10011991) --------------------------------------------------------
int __thiscall sub_10011991(void *this)
{
  int v1; // ecx@1
  int result; // eax@2

  v1 = (int)((char *)this + 4);
  if ( *(_DWORD *)v1 > 0 )
    result = sub_10011A59(v1, 0, -1);
  return result;
}

//----- (100119A7) --------------------------------------------------------
char __thiscall sub_100119A7(int this)
{
  int v1; // esi@1
  char result; // al@2

  v1 = this;
  if ( *(_DWORD *)(this + 28) )
  {
    sub_10011A92((void *)this);
    result = sub_10011B6D(v1);
  }
  return result;
}

//----- (100119BF) --------------------------------------------------------
int sub_100119BF()
{
  int result; // eax@1

  result = (unsigned int)sub_100145C6() > 1 ? 0xFA0 : 0;
  dwSpinCount = result;
  return result;
}

//----- (100119D6) --------------------------------------------------------
void __thiscall sub_100119D6(LPCRITICAL_SECTION lpCriticalSection)
{
  LeaveCriticalSection(lpCriticalSection);
}

//----- (100119DE) --------------------------------------------------------
void __thiscall sub_100119DE(volatile signed __int32 *this)
{
  _InterlockedDecrement(this);
}

//----- (100119E2) --------------------------------------------------------
void __thiscall sub_100119E2(int this)
{
  *(_DWORD *)this = 0;
  _InterlockedDecrement((volatile signed __int32 *)(this + 4));
}

//----- (100119ED) --------------------------------------------------------
signed __int32 __thiscall sub_100119ED(signed __int32 this, signed __int32 a2)
{
  signed __int32 v2; // esi@1
  bool v3; // zf@1
  signed __int32 result; // eax@1

  v2 = this;
  *(_DWORD *)(this + 8) = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(this + 4) = *(_DWORD *)(a2 + 4);
  v3 = *(_DWORD *)(this + 4) == 0;
  result = *(_DWORD *)a2;
  *(_DWORD *)this = *(_DWORD *)a2;
  if ( v3 )
  {
    result = _InterlockedCompareExchange((volatile signed __int32 *)(this + 28), this, a2);
    if ( result != a2 )
    {
      sub_1001185D(a2);
      *(_DWORD *)(v2 + 8) = *(_DWORD *)(a2 + 8);
      *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 4);
      result = *(_DWORD *)a2;
      *(_DWORD *)v2 = *(_DWORD *)a2;
    }
  }
  *(_DWORD *)(v2 + 24) = v2;
  return result;
}

//----- (10011A3C) --------------------------------------------------------
char __thiscall sub_10011A3C(int this)
{
  char result; // al@2

  if ( _InterlockedCompareExchange((volatile signed __int32 *)this, -1, 0) )
  {
    result = 0;
  }
  else
  {
    _InterlockedIncrement((volatile signed __int32 *)(this + 4));
    result = 1;
  }
  return result;
}

//----- (10011A53) --------------------------------------------------------
DWORD sub_10011A53()
{
  return dwSpinCount;
}

//----- (10011A59) --------------------------------------------------------
int __cdecl sub_10011A59(int a1, int a2, int a3)
{
  signed int v3; // esi@1
  DWORD v4; // ecx@2
  int result; // eax@7

  v3 = 10;
LABEL_6:
  v4 = 0;
  while ( 1 )
  {
    result = a3 & *(_DWORD *)a1;
    if ( result == a2 )
      return result;
    _mm_pause();
    ++v4;
    if ( v4 >= dwSpinCount )
    {
      if ( v3 <= 0 )
      {
        sub_10012130(1u);
      }
      else
      {
        --v3;
        sub_10012130(0);
      }
      goto LABEL_6;
    }
  }
}

//----- (10011A92) --------------------------------------------------------
signed __int32 __thiscall sub_10011A92(void *this)
{
  signed __int32 v1; // esi@1
  char Parameter; // [sp+4h] [bp-18h]@1

  v1 = (signed __int32)this;
  sub_100114AE(&Parameter, 0xFFFFFFFF);
  sub_100118F0(v1, &Parameter, 0);
  return sub_100119ED(v1, (signed __int32)&Parameter);
}

//----- (10011AC2) --------------------------------------------------------
char __thiscall sub_10011AC2(void *this)
{
  signed __int32 v1; // edi@1
  char result; // al@2
  char Parameter; // [sp+8h] [bp-18h]@1
  int v4; // [sp+10h] [bp-10h]@2

  v1 = (signed __int32)this;
  sub_100114AE(&Parameter, 0xFFFFFFFF);
  if ( _InterlockedCompareExchange((volatile signed __int32 *)(v1 + 28), (signed __int32)&Parameter, 0) )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)(v1 + 24) = &Parameter;
    sub_100117F4((int)&Parameter, v1);
    v4 &= 0xFFFFFFFE;
    sub_100119ED(v1, (signed __int32)&Parameter);
    result = 1;
  }
  return result;
}

//----- (10011B6D) --------------------------------------------------------
char __thiscall sub_10011B6D(int this)
{
  int v1; // edi@1
  signed __int32 v2; // ecx@1
  int v3; // esi@1
  int v4; // eax@2
  signed __int32 v5; // ebx@5

  v1 = this;
  v2 = *(_DWORD *)(this + 24);
  *(_DWORD *)v1 = 0;
  v3 = *(_DWORD *)(v2 + 4);
  *(_DWORD *)(v1 + 24) = v3;
  if ( v3
    || (v4 = _InterlockedCompareExchange((volatile signed __int32 *)(v1 + 28), 0, v2), v4 != v2)
    && (v4 = sub_1001185D(v2), v3 = v4, (*(_DWORD *)(v1 + 24) = v4) != 0) )
  {
    do
    {
      LOBYTE(v4) = sub_100117C3((void *)v3);
      if ( (_BYTE)v4 )
        break;
      v5 = v3;
      v3 = *(_DWORD *)(v3 + 4);
      *(_DWORD *)(v1 + 24) = v3;
      if ( !v3 && _InterlockedCompareExchange((volatile signed __int32 *)(v1 + 28), 0, v5) != v5 )
      {
        v3 = sub_1001185D(v5);
        *(_DWORD *)(v1 + 24) = v3;
      }
      LOBYTE(v4) = sub_100116ED((LPVOID)v5);
    }
    while ( v3 );
  }
  return v4;
}

//----- (10011BDE) --------------------------------------------------------
void *__thiscall sub_10011BDE(void *this, int a2)
{
  void *v2; // edi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_1006649C;
  *((_DWORD *)v2 + 3) = *(_DWORD *)(a2 + 12);
  return v2;
}
// 1006649C: using guessed type int (__thiscall *off_1006649C)(LPVOID lpMem, char);

//----- (10011C27) --------------------------------------------------------
void __thiscall sub_10011C27(void *this)
{
  void *v1; // esi@1
  int v2; // ecx@1

  v1 = this;
  v2 = *(_DWORD *)this;
  if ( v2 )
  {
    **(_DWORD **)(v2 + 256) = 0;
    sub_10012208(v2, 1);
  }
  sub_10011603((LPCRITICAL_SECTION)((char *)v1 + 4));
}

//----- (10011C49) --------------------------------------------------------
LPVOID __thiscall sub_10011C49(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_100652D4;
  sub_10027475((int)((char *)lpMem + 4));
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}
// 100652D4: using guessed type int (__thiscall *off_100652D4)(LPVOID lpMem, char);

//----- (10011C76) --------------------------------------------------------
int sub_10011C76()
{
  HMODULE v0; // esi@1
  int v1; // edi@1
  FARPROC v2; // eax@1
  int v3; // esi@1
  HMODULE v4; // eax@3
  int v5; // eax@3
  int v6; // eax@4
  int result; // eax@6
  char v8; // [sp+Ch] [bp-10h]@9

  v0 = GetModuleHandleW(L"kernel32.dll");
  v1 = (int)GetProcAddress(v0, "SetThreadGroupAffinity");
  v2 = GetProcAddress(v0, "GetThreadGroupAffinity");
  v3 = (int)v2;
  if ( !v1 || !v2 )
  {
    v6 = GetLastError();
    if ( v6 > 0 )
LABEL_8:
      v6 = (unsigned __int16)v6 | 0x80070000;
LABEL_9:
    sub_1001A018((int)&v8, v6);
    sub_10027494((int)&v8, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10011D29);
  }
  dword_1007C518 = sub_1001224A(v1);
  dword_1007C51C = sub_1001224A(v3);
  v4 = GetModuleHandleW(L"kernel32.dll");
  v5 = (int)GetProcAddress(v4, "GetCurrentProcessorNumberEx");
  if ( !v5 )
  {
    v6 = GetLastError();
    if ( v6 > 0 )
      goto LABEL_8;
    goto LABEL_9;
  }
  result = sub_1001224A(v5);
  dword_1007C514 = result;
  return result;
}
// 1007C514: using guessed type int dword_1007C514;
// 1007C518: using guessed type int dword_1007C518;
// 1007C51C: using guessed type int dword_1007C51C;

//----- (10011D29) --------------------------------------------------------
BOOL __cdecl sub_10011D29(HANDLE TimerQueue, HANDLE Timer, ULONG DueTime, ULONG Period)
{
  return ChangeTimerQueueTimer(TimerQueue, Timer, DueTime, Period);
}

//----- (10011D40) --------------------------------------------------------
BOOL __cdecl sub_10011D40(HANDLE hObject)
{
  return CloseHandle(hObject);
}

//----- (10011D4E) --------------------------------------------------------
int __cdecl sub_10011D4E(char a1)
{
  int result; // eax@1
  int v2; // eax@2
  char v3; // [sp+0h] [bp-10h]@5

  result = sub_1000EC81(0, 0, a1 != 0 ? 2 : 0, 2031618);
  if ( !result )
  {
    v2 = GetLastError();
    if ( v2 > 0 )
      v2 = (unsigned __int16)v2 | 0x80070000;
    sub_1001A018((int)&v3, v2);
    sub_10027494((int)&v3, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10011DA5);
  }
  return result;
}

//----- (10011DA5) --------------------------------------------------------
HANDLE __cdecl sub_10011DA5(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPTHREAD_START_ROUTINE lpStartAddress, LPVOID lpParameter, DWORD dwCreationFlags, LPDWORD lpThreadId)
{
  return CreateThread(lpThreadAttributes, dwStackSize, lpStartAddress, lpParameter, dwCreationFlags, lpThreadId);
}

//----- (10011DC2) --------------------------------------------------------
BOOL __cdecl sub_10011DC2(PHANDLE phNewTimer, HANDLE TimerQueue, WAITORTIMERCALLBACK Callback, PVOID Parameter, DWORD DueTime, DWORD Period, ULONG Flags)
{
  return CreateTimerQueueTimer(phNewTimer, TimerQueue, Callback, Parameter, DueTime, Period, Flags);
}

//----- (10011DE2) --------------------------------------------------------
int __cdecl sub_10011DE2(HANDLE TimerQueue, HANDLE Timer, HANDLE CompletionEvent)
{
  signed int v3; // esi@1
  int result; // eax@2

  v3 = 16;
  do
  {
    result = DeleteTimerQueueTimer(TimerQueue, Timer, CompletionEvent);
    if ( result )
      break;
    result = GetLastError();
    if ( result == 997 )
      break;
    --v3;
  }
  while ( v3 > 0 );
  return result;
}

//----- (10011E11) --------------------------------------------------------
int __cdecl sub_10011E11(int a1)
{
  int v1; // esi@1

  v1 = sub_1001224A(dword_1007C514);
  j_nullsub_1(v1);
  return ((int (__stdcall *)(int))v1)(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C514: using guessed type int dword_1007C514;

//----- (10011E32) --------------------------------------------------------
struct _SYSTEM_LOGICAL_PROCESSOR_INFORMATION *__cdecl sub_10011E32(PDWORD ReturnedLength)
{
  int v1; // eax@2
  struct _SYSTEM_LOGICAL_PROCESSOR_INFORMATION *v2; // eax@4
  struct _SYSTEM_LOGICAL_PROCESSOR_INFORMATION *v3; // edi@4
  char v5; // [sp+8h] [bp-10h]@11
  char v6; // [sp+Ch] [bp-Ch]@5

  GetLogicalProcessorInformation(0, ReturnedLength);
  if ( GetLastError() != 122 )
  {
    v1 = GetLastError();
    if ( v1 > 0 )
LABEL_10:
      v1 = (unsigned __int16)v1 | 0x80070000;
LABEL_11:
    sub_1001A018((int)&v5, v1);
    sub_10027494((int)&v5, (int)&unk_10075954);
    goto LABEL_12;
  }
  v2 = (struct _SYSTEM_LOGICAL_PROCESSOR_INFORMATION *)sub_1002C36D(*ReturnedLength);
  v3 = v2;
  if ( !v2 )
  {
    sub_1000D8F2((int)&v6);
    sub_10027494((int)&v6, (int)&unk_10075430);
LABEL_12:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10011EBD);
  }
  if ( !GetLogicalProcessorInformation(v2, ReturnedLength) )
  {
    v1 = GetLastError();
    if ( v1 > 0 )
      goto LABEL_10;
    goto LABEL_11;
  }
  return v3;
}

//----- (10011EBD) --------------------------------------------------------
LPVOID __cdecl sub_10011EBD(int a1, SIZE_T *a2)
{
  HMODULE v2; // eax@1
  FARPROC v3; // eax@1
  FARPROC v4; // esi@1
  int v5; // eax@2
  LPVOID v6; // eax@7
  LPVOID v7; // edi@7
  LPVOID v8; // ST04_4@9
  char v10; // [sp+Ch] [bp-10h]@12
  char v11; // [sp+10h] [bp-Ch]@8

  v2 = GetModuleHandleW(L"kernel32.dll");
  v3 = GetProcAddress(v2, "GetLogicalProcessorInformationEx");
  v4 = v3;
  if ( !v3 )
  {
    v5 = GetLastError();
    if ( v5 > 0 )
LABEL_11:
      v5 = (unsigned __int16)v5 | 0x80070000;
LABEL_12:
    sub_1001A018((int)&v10, v5);
    sub_10027494((int)&v10, (int)&unk_10075954);
    goto LABEL_13;
  }
  j_nullsub_1(v3);
  ((void (__stdcall *)(int, _DWORD, SIZE_T *))v4)(a1, 0, a2);
  if ( GetLastError() != 122 )
    goto LABEL_17;
  v6 = sub_1002C36D(*a2);
  v7 = v6;
  if ( !v6 )
  {
    sub_1000D8F2((int)&v11);
    sub_10027494((int)&v11, (int)&unk_10075430);
LABEL_13:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10011F73);
  }
  v8 = v6;
  j_nullsub_1(v4);
  if ( !((int (__stdcall *)(int, LPVOID, SIZE_T *))v4)(a1, v8, a2) )
  {
LABEL_17:
    v5 = GetLastError();
    if ( v5 > 0 )
      goto LABEL_11;
    goto LABEL_12;
  }
  return v7;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10011F73) --------------------------------------------------------
ULONG sub_10011F73()
{
  int v0; // eax@2
  char v2; // [sp+0h] [bp-14h]@5
  ULONG HighestNodeNumber; // [sp+10h] [bp-4h]@1

  if ( !GetNumaHighestNodeNumber(&HighestNodeNumber) )
  {
    v0 = GetLastError();
    if ( v0 > 0 )
      v0 = (unsigned __int16)v0 | 0x80070000;
    sub_1001A018((int)&v2, v0);
    sub_10027494((int)&v2, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10011FBA);
  }
  return HighestNodeNumber;
}

//----- (10011FBA) --------------------------------------------------------
signed int __cdecl sub_10011FBA(int a1, int a2)
{
  int v2; // esi@2
  HANDLE v3; // eax@3
  ULONG_PTR SystemAffinityMask; // [sp+0h] [bp-8h]@3
  ULONG_PTR ProcessAffinityMask; // [sp+4h] [bp-4h]@3

  if ( sub_100145C1() < 4 )
  {
    v3 = GetCurrentProcess();
    GetProcessAffinityMask(v3, &ProcessAffinityMask, &SystemAffinityMask);
    *(_WORD *)(a2 + 4) = 0;
    *(_DWORD *)a2 = ProcessAffinityMask;
  }
  else
  {
    v2 = sub_1001224A(dword_1007C51C);
    j_nullsub_1(v2);
    ((void (__stdcall *)(int, int))v2)(a1, a2);
  }
  return 1;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C51C: using guessed type int dword_1007C51C;

//----- (10012014) --------------------------------------------------------
int __cdecl sub_10012014(HANDLE hThread)
{
  return GetThreadPriority(hThread);
}

//----- (10012027) --------------------------------------------------------
int __cdecl sub_10012027(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount)
{
  return sub_1000EE3A(lpCriticalSection, dwSpinCount, 0);
}

//----- (1001203C) --------------------------------------------------------
HANDLE __cdecl sub_1001203C(HANDLE hObject, WAITORTIMERCALLBACK Callback, PVOID Context)
{
  int v3; // eax@2
  char v5; // [sp+0h] [bp-14h]@5
  HANDLE phNewWaitObject; // [sp+10h] [bp-4h]@1

  if ( !RegisterWaitForSingleObject(&phNewWaitObject, hObject, Callback, Context, 0xFFFFFFFF, 0xCu) )
  {
    v3 = GetLastError();
    if ( v3 > 0 )
      v3 = (unsigned __int16)v3 | 0x80070000;
    sub_1001A018((int)&v5, v3);
    sub_10027494((int)&v5, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10012090);
  }
  return phNewWaitObject;
}

//----- (10012090) --------------------------------------------------------
int __cdecl sub_10012090(HANDLE hThread, int a2)
{
  int v2; // esi@2

  if ( sub_100145C1() < 4 )
  {
    SetThreadAffinityMask(hThread, *(_DWORD *)a2);
  }
  else
  {
    v2 = sub_1001224A(dword_1007C518);
    j_nullsub_1(v2);
    ((void (__stdcall *)(HANDLE, int, _DWORD))v2)(hThread, a2, 0);
  }
  return 1;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C518: using guessed type int dword_1007C518;

//----- (100120D3) --------------------------------------------------------
int __cdecl sub_100120D3(HANDLE hThread, int nPriority)
{
  int result; // eax@1
  int v3; // eax@2
  char v4; // [sp+0h] [bp-10h]@5

  result = SetThreadPriority(hThread, nPriority);
  if ( !result )
  {
    v3 = GetLastError();
    if ( v3 > 0 )
      v3 = (unsigned __int16)v3 | 0x80070000;
    sub_1001A018((int)&v4, v3);
    sub_10027494((int)&v4, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10012119);
  }
  return result;
}

//----- (10012119) --------------------------------------------------------
DWORD __cdecl sub_10012119(HANDLE hObjectToSignal, HANDLE hObjectToWaitOn, DWORD dwMilliseconds, BOOL bAlertable)
{
  return SignalObjectAndWait(hObjectToSignal, hObjectToWaitOn, dwMilliseconds, bAlertable);
}

//----- (10012130) --------------------------------------------------------
void __cdecl sub_10012130(DWORD dwMilliseconds)
{
  Sleep(dwMilliseconds);
}

//----- (10012144) --------------------------------------------------------
DWORD sub_10012144()
{
  DWORD result; // eax@1
  int v1; // eax@2
  char v2; // [sp+0h] [bp-10h]@5

  result = TlsAlloc();
  if ( result == -1 )
  {
    v1 = GetLastError();
    if ( v1 > 0 )
      v1 = (unsigned __int16)v1 | 0x80070000;
    sub_1001A018((int)&v2, v1);
    sub_10027494((int)&v2, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10012185);
  }
  return result;
}

//----- (10012185) --------------------------------------------------------
BOOL __cdecl sub_10012185(DWORD dwTlsIndex)
{
  return TlsFree(dwTlsIndex);
}

//----- (10012193) --------------------------------------------------------
LPVOID __cdecl sub_10012193(DWORD dwTlsIndex)
{
  return TlsGetValue(dwTlsIndex);
}

//----- (100121A1) --------------------------------------------------------
int __cdecl sub_100121A1(DWORD dwTlsIndex, LPVOID lpTlsValue)
{
  int result; // eax@1
  int v3; // eax@2
  char v4; // [sp+0h] [bp-10h]@5

  result = TlsSetValue(dwTlsIndex, lpTlsValue);
  if ( !result )
  {
    v3 = GetLastError();
    if ( v3 > 0 )
      v3 = (unsigned __int16)v3 | 0x80070000;
    sub_1001A018((int)&v4, v3);
    sub_10027494((int)&v4, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_100121E7);
  }
  return result;
}

//----- (100121E7) --------------------------------------------------------
BOOL __cdecl sub_100121E7(HANDLE WaitHandle)
{
  return UnregisterWait(WaitHandle);
}

//----- (100121F5) --------------------------------------------------------
DWORD __cdecl sub_100121F5(HANDLE hHandle, DWORD dwMilliseconds)
{
  return WaitForSingleObjectEx(hHandle, dwMilliseconds, 0);
}

//----- (10012208) --------------------------------------------------------
int __thiscall sub_10012208(int this, char a2)
{
  int result; // eax@2

  if ( a2 )
    result = _InterlockedIncrement((volatile signed __int32 *)(this + 1288));
  else
    result = *(_DWORD *)(this + 1280) - *(_DWORD *)(this + 1284);
  if ( result == 1 )
    result = SetEvent(*(HANDLE *)this);
  return result;
}

//----- (1001223C) --------------------------------------------------------
void sub_1001223C()
{
  JUMPOUT(hLibModule, 0, sub_10017425);
}

//----- (1001224A) --------------------------------------------------------
int __cdecl sub_1001224A(int a1)
{
  return a1 ^ dword_1007C598;
}
// 1007C598: using guessed type int dword_1007C598;

//----- (10012257) --------------------------------------------------------
HMODULE __cdecl sub_10012257(int a1)
{
  HMODULE result; // eax@1

  sub_1000EEB0(a1, 0, 0, 0);
  sub_1000EF6D(a1, 1);
  sub_1000EC3F(a1);
  sub_10017425();
  result = hLibModule;
  if ( hLibModule )
    result = (HMODULE)FreeLibrary(hLibModule);
  return result;
}

//----- (10012293) --------------------------------------------------------
signed __int32 __cdecl sub_10012293(DWORD dwExitCode)
{
  signed __int32 result; // eax@1

  result = _InterlockedExchangeAdd((volatile signed __int32 *)&dword_1007C538, 0xFFFFFFFF);
  if ( !result )
  {
    sub_10017425();
    result = (signed __int32)hLibModule;
    if ( hLibModule )
      FreeLibraryAndExitThread(hLibModule, dwExitCode);
  }
  return result;
}
// 1007C538: using guessed type int dword_1007C538;

//----- (100122BD) --------------------------------------------------------
unsigned int sub_100122BD()
{
  unsigned int v0; // esi@1
  HANDLE v1; // eax@1
  struct _FILETIME CreationTime; // [sp+4h] [bp-10h]@1
  struct _FILETIME ExitTime; // [sp+Ch] [bp-8h]@1

  dword_1007C590 = 1;
  v0 = __security_cookie ^ (unsigned int)EncodePointer(&dword_1007C598);
  v1 = GetCurrentThread();
  if ( GetThreadTimes(v1, &CreationTime, &ExitTime, &ExitTime, &ExitTime) )
    v0 ^= CreationTime.dwLowDateTime ^ CreationTime.dwHighDateTime;
  return v0;
}
// 1007C590: using guessed type int dword_1007C590;
// 1007C598: using guessed type int dword_1007C598;

//----- (1001230B) --------------------------------------------------------
HANDLE __cdecl sub_1001230B(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPTHREAD_START_ROUTINE lpStartAddress, LPVOID lpParameter, DWORD dwCreationFlags, LPDWORD lpThreadId)
{
  HANDLE v6; // esi@1

  v6 = sub_10011DA5(lpThreadAttributes, dwStackSize, lpStartAddress, lpParameter, dwCreationFlags, lpThreadId);
  if ( v6 && _InterlockedIncrement((volatile signed __int32 *)&dword_1007C538) == 1 )
  {
    sub_10012351();
    _InterlockedIncrement((volatile signed __int32 *)&dword_1007A044);
  }
  return v6;
}
// 1007A044: using guessed type int dword_1007A044;
// 1007C538: using guessed type int dword_1007C538;

//----- (10012351) --------------------------------------------------------
HMODULE sub_10012351()
{
  HMODULE result; // eax@1
  DWORD v1; // eax@2
  int v2; // eax@6
  char v3; // [sp+4h] [bp-21Ch]@8
  WCHAR Filename; // [sp+14h] [bp-20Ch]@2

  result = GetModuleHandleA(0);
  if ( result != (HMODULE)0x10000000 )
  {
    v1 = GetModuleFileNameW((HMODULE)0x10000000, &Filename, 0x104u);
    if ( !v1 || v1 == 260 )
    {
      v2 = GetLastError();
      if ( v2 > 0 )
        v2 = (unsigned __int16)v2 | 0x80070000;
      sub_1001A018((int)&v3, v2);
      sub_10027494((int)&v3, (int)&unk_10075954);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_100123E7);
    }
    result = LoadLibraryExW(&Filename, 0, 0);
    hLibModule = result;
  }
  return result;
}

//----- (100123E7) --------------------------------------------------------
int __cdecl sub_100123E7(unsigned int a1, int a2, int a3, char a4)
{
  int result; // eax@1
  int v5; // esi@1
  unsigned __int64 v6; // [sp+4h] [bp-8h]@2

  result = sub_1000ED1C(a2, a3, 0);
  v5 = result;
  if ( result )
  {
    sub_10012351();
    _InterlockedIncrement((volatile signed __int32 *)&dword_1007A044);
    v6 = sub_1003B2D0(a1, -10000i64);
    sub_1000EEB0(v5, (int)&v6, a4 != 0 ? a1 : 0, 0);
    result = v5;
  }
  return result;
}
// 1007A044: using guessed type int dword_1007A044;

//----- (10012448) --------------------------------------------------------
int __cdecl sub_10012448(int a1, int a2, int a3)
{
  int result; // eax@1
  int v4; // esi@1

  result = sub_1000ED47(a2, a3, 0);
  v4 = result;
  if ( result )
  {
    sub_10012351();
    _InterlockedIncrement((volatile signed __int32 *)&dword_1007A044);
    sub_1000EEDA(v4, a1, 0);
    result = v4;
  }
  return result;
}
// 1007A044: using guessed type int dword_1007A044;

//----- (10012481) --------------------------------------------------------
int __cdecl sub_10012481(int a1, int a2)
{
  int result; // eax@1

  sub_1000EEB0(a2, 0, 0, 0);
  sub_1000EC3F(a2);
  sub_10017425();
  result = (int)hLibModule;
  if ( hLibModule )
    result = sub_1000ED8C(a1, (int)hLibModule);
  return result;
}

//----- (100124B7) --------------------------------------------------------
int __cdecl sub_100124B7(int a1, int a2)
{
  int result; // eax@1

  sub_1000EEDA(a2, 0, 0);
  sub_1000EC60(a2);
  sub_10017425();
  result = (int)hLibModule;
  if ( hLibModule )
    result = sub_1000ED8C(a1, (int)hLibModule);
  return result;
}

//----- (100124EC) --------------------------------------------------------
signed __int32 __thiscall sub_100124EC(void *this)
{
  volatile signed __int32 *v1; // esi@1

  v1 = (volatile signed __int32 *)this;
  sub_1001AFBA();
  return sub_100124FC(v1);
}
// 1001AFBA: using guessed type int sub_1001AFBA(void);

//----- (100124FC) --------------------------------------------------------
signed __int32 __thiscall sub_100124FC(volatile signed __int32 *this)
{
  volatile signed __int32 *v1; // esi@1
  signed __int32 result; // eax@1
  char v3; // [sp+4h] [bp-10h]@3
  int v4; // [sp+Ch] [bp-8h]@2
  void (*v5)(); // [sp+10h] [bp-4h]@2

  v1 = this;
  result = _InterlockedExchange(this, 1);
  if ( result )
  {
    v4 = 0;
    v5 = sub_1001253A;
    do
    {
      sub_10010BDE(&v3);
      result = _InterlockedExchange(v1, 1);
    }
    while ( result );
  }
  return result;
}

//----- (1001252F) --------------------------------------------------------
int __thiscall sub_1001252F(void *this)
{
  *(_DWORD *)this = 0;
  return sub_1001AFBA();
}
// 1001AFBA: using guessed type int sub_1001AFBA(void);

//----- (1001253A) --------------------------------------------------------
void sub_1001253A()
{
  sub_10012130(0);
}

//----- (10012543) --------------------------------------------------------
char __thiscall sub_10012543(void *this)
{
  volatile signed __int32 *v1; // esi@1
  char v2; // bl@1

  v1 = (volatile signed __int32 *)this;
  sub_1001AFBA();
  v2 = sub_10012563(v1);
  if ( !v2 )
    sub_1001AFBA();
  return v2;
}
// 1001AFBA: using guessed type int sub_1001AFBA(void);

//----- (10012563) --------------------------------------------------------
char __thiscall sub_10012563(volatile signed __int32 *this)
{
  char v1; // dl@2

  if ( *this || (v1 = 1, _InterlockedExchange(this, 1)) )
    v1 = 0;
  return v1;
}

//----- (10012578) --------------------------------------------------------
int sub_10012578()
{
  LPVOID v0; // eax@1
  LPVOID v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@2
  int result; // eax@2

  v0 = sub_10019677();
  v1 = v0;
  if ( v0 )
  {
    v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v0 + 32);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v0 + 32));
    result = v2(v1);
  }
  else
  {
    result = SwitchToThread();
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001259E) --------------------------------------------------------
int __usercall sub_1001259E@<eax>(int a1@<ebp>)
{
  LPVOID v1; // eax@1
  LPVOID v2; // edi@1
  int (__thiscall *v3)(_DWORD); // esi@1

  v1 = sub_100116CB(a1);
  v2 = v1;
  v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 24);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 24));
  return v3(v2);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100125BF) --------------------------------------------------------
int __thiscall sub_100125BF(int this, int a2)
{
  int v2; // esi@1

  v2 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  sub_10011FBA(a2, this);
  return v2;
}

//----- (100125E0) --------------------------------------------------------
int __usercall sub_100125E0@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // esi@1
  LPVOID v3; // eax@3

  sub_1000FB4A();
  v2 = v1;
  *(_DWORD *)(a1 - 16) = v1;
  *(_DWORD *)v1 = off_10066554;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 8) = 0;
  *(_DWORD *)(v1 + 12) = 16;
  *(_DWORD *)(v1 + 16) = 0;
  *(_DWORD *)(v1 + 36) = 0;
  *(_DWORD *)(v1 + 40) = 0;
  sub_10011564((LPCRITICAL_SECTION)(v1 + 44));
  *(_DWORD *)(v2 + 68) = 0;
  *(_DWORD *)(v2 + 72) = 0;
  *(_DWORD *)(v2 + 76) = 0;
  *(_DWORD *)(v2 + 80) = 0;
  *(_DWORD *)(v2 + 84) = 0;
  *(_DWORD *)(v2 + 88) = 0;
  *(_DWORD *)(v2 + 92) = 0;
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(v2 + 96) = 0;
  *(_DWORD *)(v2 + 100) = 0;
  sub_1001E3A4(a1);
  *(_BYTE *)(a1 - 4) = 1;
  sub_10014ACC(1);
  sub_10013070(v2);
  if ( dword_1007C568 < 3 )
  {
    v3 = VirtualAlloc(0, 0x1000u, 0x3000u, 4u);
    *(_DWORD *)(v2 + 140) = v3;
    if ( !v3 )
    {
      sub_1000D8F2(a1 - 28);
      sub_10027494(a1 - 28, (int)&unk_10075430);
    }
    *(_BYTE *)v3 = 1;
  }
  else
  {
    *(_DWORD *)(v2 + 140) = 0;
  }
  *(_DWORD *)(v2 + 80) = sub_10011D4E(0);
  *(_DWORD *)(v2 + 84) = sub_1000F40E(4 * *(_DWORD *)(v2 + 12) | -((unsigned __int64)*(_DWORD *)(v2 + 12) >> 30 != 0));
  return sub_1000FB24(16);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 10066554: using guessed type int (*off_10066554[2])();
// 1007C568: using guessed type int dword_1007C568;

//----- (100126C3) --------------------------------------------------------
int __thiscall sub_100126C3(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 12) = 0;
  result = this;
  *(_DWORD *)(this + 16) = 0;
  return result;
}

//----- (100126CE) --------------------------------------------------------
void *__thiscall sub_100126CE(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10066518;
  return v2;
}
// 10066518: using guessed type int (__thiscall *off_10066518)(LPVOID lpMem, char);

//----- (100126E9) --------------------------------------------------------
int __thiscall sub_100126E9(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_10066518;
  return result;
}
// 10066518: using guessed type int (__thiscall *off_10066518)(LPVOID lpMem, char);

//----- (100126FA) --------------------------------------------------------
void *__thiscall sub_100126FA(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10066524;
  return v2;
}
// 10066524: using guessed type int (__thiscall *off_10066524)(LPVOID lpMem, char);

//----- (10012722) --------------------------------------------------------
void __thiscall sub_10012722(int this)
{
  int v1; // esi@1
  unsigned int v2; // edi@1
  int v3; // ebx@2
  void *v4; // ecx@3
  void *v5; // ecx@6
  void *v6; // eax@8

  v1 = this;
  v2 = 0;
  *(_DWORD *)this = off_10066554;
  if ( *(_DWORD *)(this + 24) )
  {
    v3 = 0;
    do
    {
      v4 = *(void **)(*(_DWORD *)(v1 + 72) + v3 + 32);
      if ( v4 )
        sub_1000DAFC(v4, 3);
      ++v2;
      v3 += 40;
    }
    while ( v2 < *(_DWORD *)(v1 + 24) );
  }
  v5 = *(void **)(v1 + 72);
  if ( v5 )
    sub_10012838(v5, 3);
  sub_1000F0A1(*(LPVOID *)(v1 + 68));
  v6 = *(void **)(v1 + 140);
  if ( v6 )
    VirtualFree(v6, 0, 0x8000u);
  CloseHandle(*(HANDLE *)(v1 + 80));
  sub_1000F0A1(*(LPVOID *)(v1 + 84));
  if ( *(_DWORD *)(v1 + 76) )
  {
    sub_10011D40(*(HANDLE *)(v1 + 76));
    sub_1000F0A1(*(LPVOID *)(v1 + 88));
    sub_1000F0A1(*(LPVOID *)(v1 + 92));
  }
  sub_1001E3D8((void *)(v1 + 104));
  sub_10011603((LPCRITICAL_SECTION)(v1 + 44));
}
// 10066554: using guessed type int (*off_10066554[2])();

//----- (100127F7) --------------------------------------------------------
void __thiscall sub_100127F7(LPCRITICAL_SECTION *this)
{
  sub_100119D6(*this);
}

//----- (10012838) --------------------------------------------------------
char *__thiscall sub_10012838(LPVOID lpMem, char a2)
{
  int v2; // ebp@0
  LPVOID v3; // esi@1
  char *v4; // edi@2
  int v5; // ST0C_4@3
  char *result; // eax@4

  v3 = lpMem;
  if ( a2 & 2 )
  {
    v4 = (char *)lpMem - 4;
    sub_1000F684(v2, (int)lpMem, 40, *((_DWORD *)lpMem - 1), (int)sub_10012715);
    if ( a2 & 1 )
    {
      v5 = 40 * *(_DWORD *)v4 + 4;
      sub_1000FAFF((char *)v3 - 4);
    }
    result = (char *)v3 - 4;
  }
  else
  {
    sub_1000F417(*((LPVOID *)lpMem + 9));
    if ( a2 & 1 )
      sub_1000F417(v3);
    result = (char *)v3;
  }
  return result;
}
// 10012715: using guessed type int sub_10012715();

//----- (100128C0) --------------------------------------------------------
LPVOID __thiscall sub_100128C0(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_1000F417(*((LPVOID *)lpMem + 1));
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (100128E9) --------------------------------------------------------
int __thiscall sub_100128E9(int this, int a2)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 4);
  if ( result )
  {
    *(_DWORD *)(a2 + 24) = *(_DWORD *)(result + 24);
    *(_DWORD *)(a2 + 28) = *(_DWORD *)(this + 4);
    *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 4) + 24) + 28) = a2;
    result = *(_DWORD *)(this + 4);
    *(_DWORD *)(result + 24) = a2;
  }
  else
  {
    *(_DWORD *)(a2 + 24) = a2;
    *(_DWORD *)(a2 + 28) = a2;
  }
  *(_DWORD *)(this + 4) = a2;
  ++*(_DWORD *)this;
  return result;
}

//----- (10012922) --------------------------------------------------------
unsigned int __thiscall sub_10012922(int this, unsigned int a2, unsigned int a3, unsigned int a4)
{
  unsigned int v4; // eax@1
  unsigned int v5; // esi@1
  unsigned int v6; // esi@5
  int v7; // edx@6
  unsigned int v8; // esi@10
  int v9; // edx@11

  v4 = a3;
  v5 = a2;
  if ( a2 >= a3 )
  {
    v8 = 0;
    if ( a4 )
    {
      do
      {
        v9 = *(_DWORD *)(*(_DWORD *)(this + 92) + 4 * v8++);
        *(_DWORD *)(v9 + 4) = *(_DWORD *)(v9 + 36) - *(_DWORD *)(*(_DWORD *)(v9 + 16) + 160);
      }
      while ( v8 < a4 );
      v4 = a3;
    }
    v5 = v4;
  }
  else if ( a4 == 1 )
  {
    *(_DWORD *)(**(_DWORD **)(this + 92) + 4) = a2;
  }
  else
  {
    if ( a4 )
    {
      v6 = 0;
      do
      {
        v7 = *(_DWORD *)(*(_DWORD *)(this + 92) + 4 * v6++);
        *(double *)(v7 + 8) = (double)(unsigned int)(*(_DWORD *)(v7 + 36) - *(_DWORD *)(*(_DWORD *)(v7 + 16) + 160))
                            * ((double)a2
                             / (double)a3);
      }
      while ( v6 < a4 );
      v5 = a2;
    }
    sub_10015EAD(*(_DWORD *)(this + 92), a4);
  }
  return v5;
}

//----- (100129F4) --------------------------------------------------------
int __thiscall sub_100129F4(int this, int a2)
{
  int result; // eax@1

  result = sub_10014310(this, *(_WORD *)(a2 + 4));
  if ( result )
  {
    result = *(_DWORD *)result;
    *(_DWORD *)a2 &= result;
  }
  else
  {
    *(_DWORD *)a2 = 0;
  }
  return result;
}

//----- (10012A17) --------------------------------------------------------
int __cdecl sub_10012A17(int a1)
{
  int result; // eax@1
  int v2; // [sp+4h] [bp-Ch]@1
  int v3; // [sp+8h] [bp-8h]@1
  int v4; // [sp+Ch] [bp-4h]@1

  v3 = 0;
  v4 = 0;
  LOWORD(v3) = 0;
  v2 = *(_DWORD *)a1;
  sub_10012A48((int)&v2);
  result = v2;
  *(_DWORD *)a1 = v2;
  return result;
}

//----- (10012A48) --------------------------------------------------------
int __cdecl sub_10012A48(int a1)
{
  int result; // eax@1
  int v2; // ecx@2

  result = a1;
  if ( *(_DWORD *)a1 )
  {
    v2 = (int)dword_1007C554;
    if ( dword_1007C554 || (v2 = dword_1007C550) != 0 )
      result = sub_100129F4(v2, a1);
  }
  return result;
}
// 1007C550: using guessed type int dword_1007C550;

//----- (10012A6F) --------------------------------------------------------
int __thiscall sub_10012A6F(int this, HANDLE hThread)
{
  return sub_10012090(hThread, this);
}

//----- (10012A81) --------------------------------------------------------
int __usercall sub_10012A81@<eax>(int a1@<ebp>)
{
  HANDLE v1; // eax@1
  int v2; // eax@2
  int v3; // eax@7
  LPVOID v4; // esi@7
  __int16 v5; // cx@8
  ULONG_PTR v6; // edx@8
  LPVOID v7; // eax@10
  LPVOID v8; // esi@14
  LPVOID v9; // eax@15
  LPVOID v10; // edx@15
  ULONG_PTR v11; // ecx@16

  sub_1000FB7E();
  v1 = GetCurrentProcess();
  if ( !GetProcessAffinityMask(v1, &ProcessAffinityMask, &SystemAffinityMask) )
  {
    v2 = GetLastError();
    if ( v2 > 0 )
      v2 = (unsigned __int16)v2 | 0x80070000;
    sub_1001A018(a1 - 48, v2);
    sub_10027494(a1 - 48, (int)&unk_10075954);
  }
  if ( ProcessAffinityMask != SystemAffinityMask )
  {
    if ( dword_1007C568 < 4 )
    {
      v8 = sub_1000F0A6(8u);
      *(_DWORD *)(a1 - 32) = v8;
      *(_DWORD *)(a1 - 4) = 0;
      if ( v8 )
      {
        v9 = sub_1000F0A6(0xCu);
        v10 = v9;
        *(_DWORD *)(a1 - 32) = v9;
        if ( v9 )
        {
          v11 = ProcessAffinityMask;
          *(_DWORD *)v9 = 0;
          *((_DWORD *)v9 + 1) = 0;
          *((_DWORD *)v9 + 2) = 0;
          *((_WORD *)v9 + 2) = 0;
          *(_DWORD *)v9 = v11;
        }
        else
        {
          v10 = 0;
        }
        *((_DWORD *)v8 + 1) = v10;
        *(_WORD *)v8 = 1;
      }
      else
      {
        v8 = 0;
      }
      dword_1007C554 = v8;
    }
    else
    {
      v3 = (int)GetCurrentThread();
      sub_100125BF(a1 - 28, v3);
      v4 = sub_1000F0A6(0xCu);
      *(_DWORD *)(a1 - 32) = v4;
      if ( v4 )
      {
        v5 = *(_WORD *)(a1 - 24);
        v6 = ProcessAffinityMask;
        *(_DWORD *)v4 = 0;
        *((_DWORD *)v4 + 1) = 0;
        *((_DWORD *)v4 + 2) = 0;
        *((_WORD *)v4 + 2) = v5;
        *(_DWORD *)v4 = v6;
      }
      else
      {
        v4 = 0;
      }
      v7 = sub_1000F0A6(8u);
      *(_DWORD *)(a1 - 32) = v7;
      if ( v7 )
      {
        *((_DWORD *)v7 + 1) = v4;
        *(_WORD *)v7 = 1;
      }
      else
      {
        v7 = 0;
      }
      dword_1007C554 = v7;
    }
  }
  return sub_1000FB39(36);
}
// 1000FB39: using guessed type int __cdecl sub_1000FB39(_DWORD);
// 1007C568: using guessed type int dword_1007C568;

//----- (10012BA1) --------------------------------------------------------
int sub_10012BA1()
{
  int result; // eax@1

  result = sub_1002C0EC(dword_1007C570);
  dword_1007C570 = 0;
  ReturnedLength = 0;
  return result;
}

//----- (10012BBC) --------------------------------------------------------
int __thiscall sub_10012BBC(void *this, int a2)
{
  int v2; // ebp@0
  void *v3; // ebx@1
  unsigned int v4; // ecx@1
  int result; // eax@1
  int v6; // esi@2
  int v7; // edi@3
  int v8; // ecx@4
  signed int v9; // edx@5
  int v10; // eax@6
  int v11; // ecx@7
  int v12; // edx@7
  bool v13; // zf@12
  int v14; // eax@22
  int v15; // [sp+4h] [bp-1Ch]@2
  unsigned int v16; // [sp+8h] [bp-18h]@1
  signed int v17; // [sp+Ch] [bp-14h]@5
  int v18; // [sp+10h] [bp-10h]@5
  signed int v19; // [sp+14h] [bp-Ch]@5
  int v20; // [sp+1Ch] [bp-4h]@4

  v3 = this;
  v4 = 0;
  v16 = 0;
  result = *(_DWORD *)(a2 + 16);
  if ( *((_DWORD *)v3 + 6) )
  {
    v6 = result + 4;
    v15 = -4 - result;
    do
    {
      v7 = 0;
      if ( *(_DWORD *)v6 )
      {
        v8 = 0;
        v20 = 0;
        do
        {
          v17 = 0;
          v9 = 1;
          result = v8 + *(_DWORD *)(v6 + 44);
          v19 = 1;
          v18 = v8 + *(_DWORD *)(v6 + 44);
          if ( *((_DWORD *)v3 + 2) > 1u )
          {
            do
            {
              v10 = *(_DWORD *)(*(_DWORD *)(*((_DWORD *)v3 + 21) + 4 * v9) + 16);
              if ( *(_DWORD *)(v10 + 108) )
              {
                v11 = *(_DWORD *)(v10 + 16) + v6 + v15;
                v12 = v20 + *(_DWORD *)(v11 + 48);
                if ( *(_DWORD *)v12 == 5 )
                {
                  if ( *(_DWORD *)v18 != 4 )
                  {
                    ++**(_DWORD **)(v12 + 20);
                    v14 = *(_DWORD *)(v11 + 48);
                    v8 = v20;
                    *(_DWORD *)(v20 + v14) = 4;
                    goto LABEL_16;
                  }
                  if ( *(_DWORD *)(v18 + 24) || *(_BYTE *)(v12 + 48) || v17 )
                  {
                    sub_1001DF7C(v2, v11, v7);
                  }
                  else
                  {
                    ++**(_DWORD **)(v12 + 20);
                    v13 = *(_BYTE *)(v12 + 49) == 0;
                    *(_DWORD *)v12 = 4;
                    if ( v13 )
                      sub_1001E19D(v10, v11, v7);
                    v17 = 1;
                  }
                }
                v8 = v20;
              }
LABEL_16:
              result = v19 + 1;
              v9 = result;
              ++v19;
            }
            while ( (unsigned int)result < *((_DWORD *)v3 + 2) );
          }
          ++v7;
          v8 += 52;
          v20 = v8;
        }
        while ( (unsigned int)v7 < *(_DWORD *)v6 );
        v4 = v16;
      }
      ++v4;
      v6 += 52;
      v16 = v4;
    }
    while ( v4 < *((_DWORD *)v3 + 6) );
  }
  return result;
}

//----- (10012CCB) --------------------------------------------------------
int __thiscall sub_10012CCB(int this)
{
  int v1; // edi@1
  int v2; // esi@1

  v1 = this;
  v2 = *(_DWORD *)(this + 188);
  if ( v2 >= (unsigned int)(sub_1001301B(this) + 1) )
    v2 = sub_1001301B(v1) + 1;
  return v2;
}

//----- (10012CEE) --------------------------------------------------------
int __thiscall sub_10012CEE(int this)
{
  int v1; // esi@1
  int v2; // edi@1
  int v3; // eax@1
  int v4; // edx@1

  v1 = this;
  v2 = *(_DWORD *)(this + 184);
  v3 = sub_10014D04(this);
  v4 = *(_DWORD *)(v1 + 188);
  if ( v4 >= (unsigned int)(v2 + v3 + 1) )
    v4 = sub_10014D04(v1) + v2 + 1;
  return v4;
}

//----- (10012D1B) --------------------------------------------------------
int __usercall sub_10012D1B@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // esi@1
  LPVOID v3; // eax@1
  unsigned int v4; // ecx@1
  LPVOID v5; // ebx@1
  int v6; // ecx@2
  int v7; // ebx@2
  const void *v8; // eax@3
  int v9; // edi@3
  LPVOID v10; // esi@3
  unsigned int v11; // eax@6
  int v12; // edx@7
  int v13; // edi@7
  int v14; // ecx@8
  int v15; // esi@8
  int v16; // edi@8
  int v17; // edi@8
  int v18; // eax@8
  int v19; // ecx@8
  int v20; // eax@8
  int v21; // eax@9
  int v22; // ebx@10

  sub_1000FB4A();
  v2 = v1;
  *(_DWORD *)(a1 - 36) = v1;
  v3 = sub_1000F40E(52 * *(_DWORD *)(v1 + 24) | -(52 * (unsigned __int64)*(_DWORD *)(v1 + 24) >> 32 != 0));
  v4 = 52 * *(_DWORD *)(v2 + 24);
  v5 = v3;
  *(_DWORD *)(a1 - 40) = v3;
  sub_10028330(v3, 0, v4);
  *(_DWORD *)(a1 - 24) = 0;
  if ( *(_DWORD *)(v2 + 24) > 0u )
  {
    v6 = 0;
    v7 = (int)((char *)v5 + 4);
    *(_DWORD *)(a1 - 28) = 0;
    do
    {
      v8 = (const void *)(v6 + *(_DWORD *)(v2 + 72));
      *(_DWORD *)(a1 - 32) = v8;
      qmemcpy((void *)(v7 - 4), v8, 0x18u);
      v9 = *(_DWORD *)v7;
      *(_DWORD *)(a1 - 44) = *(_DWORD *)v7;
      v10 = sub_1000F40E(52 * v9 | -(52 * (unsigned __int64)(unsigned int)v9 >> 32 != 0));
      *(_DWORD *)(a1 - 48) = v10;
      *(_DWORD *)(a1 - 4) = 0;
      if ( v10 )
        sub_10007840((int)v10, 52, v9, sub_100126C3);
      else
        v10 = 0;
      v11 = 52 * *(_DWORD *)v7;
      *(_DWORD *)(a1 - 4) = -1;
      *(_DWORD *)(v7 + 44) = v10;
      sub_10028330(v10, 0, v11);
      *(_DWORD *)(a1 - 16) = 0;
      if ( *(_DWORD *)v7 )
      {
        v12 = 0;
        v13 = 0;
        *(_DWORD *)(a1 - 20) = 0;
        do
        {
          v14 = *(_DWORD *)(a1 - 32);
          v15 = v13 + *(_DWORD *)(v14 + 32);
          v16 = v12 + *(_DWORD *)(v7 + 44);
          *(_DWORD *)v16 = *(_DWORD *)v15;
          v15 += 4;
          v16 += 4;
          *(_DWORD *)v16 = *(_DWORD *)v15;
          *(_DWORD *)(v16 + 4) = *(_DWORD *)(v15 + 4);
          v17 = *(_DWORD *)(a1 - 20);
          *(_DWORD *)(v12 + *(_DWORD *)(v7 + 44)) = 1;
          v18 = *(_DWORD *)(v7 + 44);
          v19 = v17 + *(_DWORD *)(v14 + 32) + 16;
          v13 = v17 + 36;
          *(_DWORD *)(a1 - 20) = v13;
          *(_DWORD *)(v12 + v18 + 20) = v19;
          v20 = *(_DWORD *)(a1 - 16) + 1;
          v12 += 52;
          *(_DWORD *)(a1 - 16) = v20;
        }
        while ( (unsigned int)v20 < *(_DWORD *)v7 );
      }
      v7 += 52;
      v2 = *(_DWORD *)(a1 - 36);
      v21 = *(_DWORD *)(a1 - 24) + 1;
      v6 = *(_DWORD *)(a1 - 28) + 40;
      *(_DWORD *)(a1 - 24) = v21;
      *(_DWORD *)(a1 - 28) = v6;
    }
    while ( (unsigned int)v21 < *(_DWORD *)(v2 + 24) );
    v22 = *(_DWORD *)(a1 - 40);
  }
  return sub_1000FB24(36);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10012E52) --------------------------------------------------------
int __thiscall sub_10012E52(LPVOID lpParameter)
{
  LPVOID v1; // esi@1
  HANDLE v2; // eax@1
  int v3; // eax@2
  char v5; // [sp+4h] [bp-10h]@5

  v1 = lpParameter;
  v2 = sub_1001230B(0, 0x10000u, (LPTHREAD_START_ROUTINE)sub_10013C9A, lpParameter, 0, 0);
  *((_DWORD *)v1 + 19) = v2;
  if ( !v2 )
  {
    v3 = GetLastError();
    if ( v3 > 0 )
      v3 = (unsigned __int16)v3 | 0x80070000;
    sub_1001A018((int)&v5, v3);
    sub_10027494((int)&v5, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)nullsub_7);
  }
  return sub_100120D3(v2, 15);
}
// 10012EB5: using guessed type int __stdcall nullsub_7(int, int, int, int);

//----- (10012EBD) --------------------------------------------------------
#error "10012F16: call analysis failed (funcsize=34)"

//----- (10012F1E) --------------------------------------------------------
int __usercall sub_10012F1E@<eax>(int a1@<ebp>)
{
  int v1; // eax@1
  LPVOID v2; // eax@2
  int v3; // esi@3
  int v4; // esi@6

  sub_1000FB4A();
  *(_DWORD *)(a1 - 16) = &dword_1007C5AC;
  sub_100124FC((volatile signed __int32 *)&dword_1007C5AC);
  v1 = dword_1007C544;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v1 )
  {
    v3 = sub_1001224A(v1);
    if ( sub_1001606E((void *)v3) )
      goto LABEL_9;
    v2 = sub_1000F0A6(0x90u);
    *(_DWORD *)(a1 - 20) = v2;
    *(_BYTE *)(a1 - 4) = 2;
  }
  else
  {
    v2 = sub_1000F0A6(0x90u);
    *(_DWORD *)(a1 - 20) = v2;
    *(_BYTE *)(a1 - 4) = 1;
  }
  if ( v2 )
    v4 = sub_100125E0(a1);
  else
    v4 = 0;
  *(_BYTE *)(a1 - 4) = 0;
  _InterlockedIncrement((volatile signed __int32 *)(v4 + 4));
  dword_1007C544 = sub_1001224A(v4);
LABEL_9:
  dword_1007C5AC = 0;
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1007C544: using guessed type int dword_1007C544;
// 1007C5AC: using guessed type int dword_1007C5AC;

//----- (10012FB1) --------------------------------------------------------
int __userpurge sub_10012FB1@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // ebx@1
  int v5; // edi@1
  int v6; // ecx@1
  int v7; // ecx@2
  int v8; // edx@5

  sub_1000FB4A();
  v4 = v3;
  v5 = 0;
  sub_1001188A((LPCRITICAL_SECTION)(v3 + 44));
  v6 = *(_DWORD *)(v4 + 100);
  if ( v6 )
    v7 = *(_DWORD *)(v6 + 24);
  else
    v7 = 0;
  if ( v7 )
  {
    v8 = 52 * *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 - 16) = 52 * *(_DWORD *)(a1 + 12);
    do
    {
      v5 += *(_DWORD *)(*(_DWORD *)(a1 - 16) + *(_DWORD *)(v8 + *(_DWORD *)(v7 + 16) + 48) + 24);
      if ( v7 == *(_DWORD *)(v4 + 100) )
        v7 = 0;
      else
        v7 = *(_DWORD *)(v7 + 24);
    }
    while ( v7 );
  }
  *(_DWORD *)(a1 - 4) = 0;
  sub_100119D6((LPCRITICAL_SECTION)(v4 + 44));
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001301B) --------------------------------------------------------
int __thiscall sub_1001301B(int this)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 188);
  if ( result >= (unsigned int)(*(_DWORD *)(this + 128) + *(_DWORD *)(this + 184)) )
    result = *(_DWORD *)(this + 128) + *(_DWORD *)(this + 184);
  return result;
}

//----- (10013034) --------------------------------------------------------
int __thiscall sub_10013034(int this, LPVOID lpMem)
{
  LPVOID v2; // ebx@1
  unsigned int v3; // esi@1
  LPVOID *v4; // edi@2
  int v5; // ebx@2

  v2 = lpMem;
  v3 = 0;
  if ( *(_DWORD *)(this + 24) )
  {
    v4 = (LPVOID *)((char *)lpMem + 48);
    v5 = this;
    do
    {
      sub_1000F0A1(*v4);
      ++v3;
      v4 += 13;
    }
    while ( v3 < *(_DWORD *)(v5 + 24) );
    v2 = lpMem;
  }
  return sub_1000F0A1(v2);
}

//----- (10013070) --------------------------------------------------------
int __thiscall sub_10013070(int this)
{
  int v1; // edi@1
  LPVOID v2; // eax@1
  unsigned int v3; // ecx@1
  int v4; // ebx@1
  int v5; // esi@1
  int v6; // ecx@1
  LPVOID v7; // eax@1
  void *v8; // ecx@2
  unsigned int v9; // eax@4
  int v10; // ecx@5
  DWORD v11; // edx@5
  LPVOID v12; // ebx@5
  signed int v13; // edx@10
  int v14; // esi@10
  int v15; // esi@17
  int v16; // esi@18
  int v17; // edx@19
  int v18; // ecx@19
  LPVOID v19; // esi@23
  unsigned int v20; // esi@25
  int result; // eax@27
  unsigned __int16 v22; // cx@28
  DWORD v23; // edx@28
  int v24; // ecx@39
  int v25; // eax@39
  unsigned int v26; // esi@43
  int v27; // ecx@44
  unsigned int v28; // edx@45
  int v29; // ebx@46
  signed int v30; // [sp+Ch] [bp-14h]@10
  unsigned int v31; // [sp+Ch] [bp-14h]@38
  int v32; // [sp+10h] [bp-10h]@6
  int v33; // [sp+10h] [bp-10h]@29
  int v34; // [sp+14h] [bp-Ch]@10
  DWORD v35; // [sp+14h] [bp-Ch]@28
  DWORD v36; // [sp+18h] [bp-8h]@5
  int v37; // [sp+1Ch] [bp-4h]@5
  int v38; // [sp+1Ch] [bp-4h]@28

  v1 = this;
  *(_DWORD *)(this + 20) = dword_1007C564;
  *(_DWORD *)(this + 24) = dword_1007C560;
  *(_DWORD *)(this + 28) = dword_1007C558;
  v2 = sub_1000F40E(12 * *(_DWORD *)(this + 20) | -(12 * (unsigned __int64)*(_DWORD *)(this + 20) >> 32 != 0));
  v3 = 12 * *(_DWORD *)(v1 + 20);
  v4 = 0;
  *(_DWORD *)(v1 + 68) = v2;
  sub_10028330(v2, 0, v3);
  v5 = *(_DWORD *)(v1 + 24);
  v6 = 40 * *(_DWORD *)(v1 + 24) | -(40 * (unsigned __int64)*(_DWORD *)(v1 + 24) >> 32 != 0);
  v7 = sub_1000F40E((v6 + 4) | -__CFADD__(v6, 4));
  if ( v7 )
  {
    *(_DWORD *)v7 = v5;
    v8 = (char *)v7 + 4;
  }
  else
  {
    v8 = 0;
  }
  v9 = 40 * *(_DWORD *)(v1 + 24);
  *(_DWORD *)(v1 + 72) = v8;
  sub_10028330(v8, 0, v9);
  if ( dword_1007C568 >= 4 )
  {
    v10 = 0;
    v11 = 0;
    v12 = dword_1007C570;
    v36 = 0;
    v37 = 0;
    if ( ReturnedLength )
    {
      v32 = 0;
      while ( 1 )
      {
        if ( *(_DWORD *)v12 == 1 )
        {
          if ( !byte_1007C55C && *((_DWORD *)v12 + 8) )
          {
            v15 = 40 * v10;
            sub_100148ED(
              (void *)(40 * v10 + *(_DWORD *)(v1 + 72)),
              v1,
              v10,
              *((_WORD *)v12 + 18),
              *((_DWORD *)v12 + 8),
              0,
              0);
            ++v37;
            v11 = v36;
            *(_DWORD *)(v15 + *(_DWORD *)(v1 + 72) + 20) = *((_DWORD *)v12 + 2);
          }
          v16 = *((_DWORD *)v12 + 8);
          if ( !v16 )
            goto LABEL_21;
          v17 = v32 + *(_DWORD *)(v1 + 68);
          v18 = *((_WORD *)v12 + 18);
          v32 += 12;
          *(_DWORD *)(v17 + 8) = *((_DWORD *)v12 + 2);
          *(_DWORD *)(v17 + 4) = v18;
          *(_DWORD *)v17 = v16;
        }
        else
        {
          if ( *(_DWORD *)v12 != 3 || !byte_1007C55C )
            goto LABEL_21;
          v13 = 0;
          v14 = (int)((char *)v12 + 32);
          v30 = 0;
          v34 = 40 * v10;
          do
          {
            if ( *(_DWORD *)v14 )
            {
              sub_100148ED((void *)(v34 + *(_DWORD *)(v1 + 72)), v1, v10, *(_WORD *)(v14 + 4), *(_DWORD *)v14, 0, 0);
              v13 = v30;
              LOWORD(v10) = v37 + 1;
              v34 += 40;
              ++v37;
            }
            ++v13;
            v14 += 12;
            v30 = v13;
          }
          while ( v13 < *((_WORD *)v12 + 15) );
        }
        v11 = v36;
LABEL_21:
        v11 += *((_DWORD *)v12 + 1);
        v12 = (char *)v12 + *((_DWORD *)v12 + 1);
        v10 = v37;
        v36 = v11;
        if ( v11 >= ReturnedLength )
          goto LABEL_41;
      }
    }
    goto LABEL_41;
  }
  v19 = dword_1007C570;
  if ( dword_1007C570 )
  {
    v22 = 0;
    v23 = 0;
    v35 = 0;
    v38 = 0;
    if ( ReturnedLength <= 0 )
    {
LABEL_41:
      result = sub_10012BA1();
      goto LABEL_42;
    }
    v33 = 0;
    while ( 1 )
    {
      if ( *((_DWORD *)v19 + 1) == 1 )
      {
        if ( byte_1007C55C )
          goto LABEL_38;
        if ( *(_DWORD *)v19 )
        {
          sub_100148ED((void *)(v4 + *(_DWORD *)(v1 + 72)), v1, v22, 0, *(_DWORD *)v19, 0, 0);
          v23 = v35;
          *(_DWORD *)(v4 + *(_DWORD *)(v1 + 72) + 20) = *((_DWORD *)v19 + 2);
          v22 = v38 + 1;
          v4 += 40;
          ++v38;
LABEL_38:
          v31 = *(_DWORD *)v19;
          if ( *(_DWORD *)v19 )
          {
            v24 = v33 + *(_DWORD *)(v1 + 68);
            v25 = *((_DWORD *)v19 + 2);
            *(_DWORD *)(v24 + 4) = 0;
            v33 += 12;
            *(_DWORD *)(v24 + 8) = v25;
            *(_DWORD *)v24 = v31;
            v22 = v38;
          }
          goto LABEL_40;
        }
      }
      else if ( *((_DWORD *)v19 + 1) == 3 && byte_1007C55C && *(_DWORD *)v19 )
      {
        sub_100148ED((void *)(v4 + *(_DWORD *)(v1 + 72)), v1, v22, 0, *(_DWORD *)v19, 0, 0);
        v23 = v35;
        v22 = v38++ + 1;
        v4 += 40;
      }
LABEL_40:
      v23 += 24;
      v19 = (char *)v19 + 24;
      v35 = v23;
      if ( v23 >= ReturnedLength )
        goto LABEL_41;
    }
  }
  if ( dword_1007C550 )
    v20 = *(_DWORD *)sub_10014310(dword_1007C550, 0);
  else
    v20 = ProcessAffinityMask;
  sub_100148ED(*(void **)(v1 + 72), v1, 0, 0, v20, 0, 0);
  result = *(_DWORD *)(v1 + 68);
  *(_DWORD *)result = v20;
LABEL_42:
  if ( byte_1007C55C )
  {
    v26 = 0;
    if ( *(_DWORD *)(v1 + 24) )
    {
      v27 = 0;
      do
      {
        v28 = 0;
        if ( *(_DWORD *)(v1 + 20) )
        {
          v29 = *(_DWORD *)(v1 + 68);
          while ( 1 )
          {
            result = *(_DWORD *)(v1 + 72);
            if ( *(_DWORD *)(v27 + *(_DWORD *)(v1 + 72) + 12) == *(_DWORD *)(v29 + 4) )
            {
              result = *(_DWORD *)(v27 + result);
              if ( result & *(_DWORD *)v29 )
                break;
            }
            ++v28;
            v29 += 12;
            if ( v28 >= *(_DWORD *)(v1 + 20) )
              goto LABEL_52;
          }
          result = *(_DWORD *)(12 * v28 + *(_DWORD *)(v1 + 68) + 8);
          *(_DWORD *)(v27 + *(_DWORD *)(v1 + 72) + 20) = result;
        }
LABEL_52:
        ++v26;
        v27 += 40;
      }
      while ( v26 < *(_DWORD *)(v1 + 24) );
    }
  }
  return result;
}
// 1007C550: using guessed type int dword_1007C550;
// 1007C558: using guessed type int dword_1007C558;
// 1007C55C: using guessed type char byte_1007C55C;
// 1007C560: using guessed type int dword_1007C560;
// 1007C564: using guessed type int dword_1007C564;
// 1007C568: using guessed type int dword_1007C568;

//----- (10013383) --------------------------------------------------------
int __thiscall sub_10013383(int this)
{
  int result; // eax@1
  int v2; // ebx@1
  int v3; // ebx@2
  int v4; // eax@5
  int v5; // edi@5
  int v6; // esi@5
  int v7; // [sp+4h] [bp-10h]@1
  int v8; // [sp+8h] [bp-Ch]@5
  int v9; // [sp+Ch] [bp-8h]@5
  int v10; // [sp+10h] [bp-4h]@5

  result = this;
  v7 = this;
  v2 = *(_DWORD *)(this + 100);
  if ( v2 )
    v3 = *(_DWORD *)(v2 + 24);
  else
    v3 = 0;
  while ( v3 )
  {
    v4 = *(_DWORD *)(v3 + 120);
    v5 = *(_DWORD *)(v3 + 8);
    v8 = 0;
    v9 = 0;
    v10 = v4;
    v6 = *(_DWORD *)v5;
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v5 + 4));
    (*(void (__thiscall **)(int, int *, int *, int *))(v6 + 4))(v5, &v8, &v9, &v10);
    *(_DWORD *)(v3 + 120) = v10;
    result = v7;
    if ( v3 == *(_DWORD *)(v7 + 100) )
      v3 = 0;
    else
      v3 = *(_DWORD *)(v3 + 24);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100133EF) --------------------------------------------------------
bool __thiscall sub_100133EF(int this)
{
  int v1; // ebx@1
  int v2; // esi@2
  int v3; // esi@3
  int v4; // eax@7
  int v5; // eax@7
  unsigned int v6; // edi@7
  bool v7; // dl@7
  unsigned int v8; // ecx@7
  int v9; // edx@9
  int v10; // ebx@10
  int v11; // ecx@10
  bool v12; // zf@14
  int v13; // edi@16
  int v14; // ebx@17
  int v15; // ecx@17
  int v16; // eax@18
  bool result; // al@29
  int v18; // [sp+4h] [bp-28h]@9
  int v19; // [sp+Ch] [bp-20h]@1
  int v20; // [sp+10h] [bp-1Ch]@5
  unsigned int v21; // [sp+14h] [bp-18h]@7
  int v22; // [sp+18h] [bp-14h]@7
  int v23; // [sp+1Ch] [bp-10h]@14
  int v24; // [sp+1Ch] [bp-10h]@17
  int v25; // [sp+20h] [bp-Ch]@7
  int v26; // [sp+24h] [bp-8h]@7
  bool v27; // [sp+2Bh] [bp-1h]@8

  v1 = this;
  v19 = this;
  if ( *(_DWORD *)(this + 100) )
  {
    v2 = *(_DWORD *)(this + 100);
    if ( v2 )
      v3 = *(_DWORD *)(v2 + 24);
    else
      v3 = 0;
    v20 = v3;
    if ( *(_DWORD *)(v3 + 160) < (unsigned int)sub_1001301B(v3) || *(_DWORD *)(v3 + 168) )
    {
      v4 = sub_1001301B(v3);
      v25 = sub_1001D551((void *)v3, v4) - *(_DWORD *)(v3 + 160);
      v22 = *(_DWORD *)(v3 + 16);
      v26 = *(_DWORD *)(v3 + 20);
      v5 = sub_1001301B(v3);
      v6 = *(_DWORD *)(v1 + 24);
      v7 = v5 != *(_DWORD *)(v1 + 28);
      v8 = 0;
      v21 = 0;
      if ( v6 )
      {
        while ( 1 )
        {
          v27 = v25 != 0 && v7;
          if ( v27 )
          {
            v9 = v8 + 1;
            v18 = *(_DWORD *)(v26 + 4 * v8);
            if ( v8 + 1 < v6 )
            {
              v10 = v8;
              v11 = v22 + 52 * v18;
              do
              {
                if ( *(_DWORD *)(v22 + 52 * *(_DWORD *)(v26 + 4 * v9) + 28) > *(_DWORD *)(v11 + 28) )
                {
                  v11 = v22 + 52 * *(_DWORD *)(v26 + 4 * v9);
                  v10 = v9;
                }
                ++v9;
              }
              while ( v9 < v6 );
              v8 = v21;
              v12 = v21 == v10;
              v3 = v20;
              v23 = v10;
              v1 = v19;
              if ( !v12 )
              {
                *(_DWORD *)(v26 + 4 * v21) = *(_DWORD *)(v26 + 4 * v23);
                *(_DWORD *)(v26 + 4 * v23) = v18;
              }
            }
          }
          v13 = v22 + 52 * *(_DWORD *)(v26 + 4 * v8);
          if ( *(_DWORD *)(v13 + 4) )
            break;
LABEL_26:
          v6 = *(_DWORD *)(v1 + 24);
          ++v8;
          v7 = v27;
          v21 = v8;
          if ( v8 >= v6 )
            goto LABEL_27;
        }
        v14 = 0;
        v15 = 0;
        v24 = 0;
        while ( 1 )
        {
          v16 = *(_DWORD *)(v13 + 48);
          if ( *(_DWORD *)(v16 + v15) == 1 )
          {
            if ( v25 )
            {
              ++**(_DWORD **)(v16 + v15 + 20);
              sub_1001D342(v3, v13, v14, 0);
              --v25;
LABEL_23:
              v15 = v24;
              goto LABEL_24;
            }
          }
          else if ( *(_BYTE *)(v16 + v15 + 49) )
          {
            sub_1001E19D(v3, v13, v14);
            goto LABEL_23;
          }
LABEL_24:
          ++v14;
          v15 += 52;
          v24 = v15;
          if ( (unsigned int)v14 >= *(_DWORD *)(v13 + 4) )
          {
            v1 = v19;
            v8 = v21;
            goto LABEL_26;
          }
        }
      }
    }
LABEL_27:
    if ( *(_DWORD *)(v3 + 132) == *(_DWORD *)(v3 + 128) )
      sub_1001608D((void *)v1, 0);
    result = *(_DWORD *)(v3 + 160) == sub_1001301B(v3);
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (10013594) --------------------------------------------------------
char __thiscall sub_10013594(void *this, int a2, char a3, char a4, int a5, unsigned int a6)
{
  int v6; // ebx@1
  void *v7; // edx@1
  int v8; // esi@1
  int v9; // eax@2
  unsigned int v10; // edi@2
  int v11; // ecx@3
  char v12; // al@5
  int v13; // edi@10
  int v14; // ecx@11
  int v15; // ebx@12
  int v16; // edx@12
  int v17; // edi@12
  int v18; // eax@14
  int v19; // ecx@18
  int v20; // edx@18
  unsigned int v21; // edi@25
  int v22; // eax@26
  int v23; // eax@27
  int v25; // [sp+Ch] [bp-18h]@26
  int v26; // [sp+10h] [bp-14h]@10
  int v27; // [sp+10h] [bp-14h]@24
  int v28; // [sp+14h] [bp-10h]@11
  int v29; // [sp+18h] [bp-Ch]@11
  void *v30; // [sp+1Ch] [bp-8h]@1
  char v31; // [sp+23h] [bp-1h]@2

  v6 = a2;
  v7 = this;
  v8 = a5;
  v30 = this;
  do
  {
    LOBYTE(v9) = 0;
    v10 = 0;
    v31 = 0;
    if ( !v8 )
      break;
    do
    {
      v11 = *(_DWORD *)(*((_DWORD *)v7 + 23) + 4 * v10);
      if ( *(_DWORD *)(v11 + 4) )
      {
        if ( *(_DWORD *)(v11 + 40) > *(_DWORD *)(v11 + 44) )
        {
          v31 = 1;
          v12 = sub_10014205(v7, (int)&a3, (int)&a4, v11, a6);
          v7 = v30;
          if ( v12 )
            --v6;
        }
      }
      ++v10;
    }
    while ( v10 < v8 );
    LOBYTE(v9) = v31;
    a2 = v6;
  }
  while ( v31 );
  if ( v6 )
  {
    v13 = 0;
    v26 = 0;
    if ( v8 )
    {
      while ( 1 )
      {
        v14 = v13 + 1;
        v29 = v13;
        v28 = v13 + 1;
        if ( v13 + 1 < (unsigned int)v8 )
        {
          v15 = *((_DWORD *)v7 + 23);
          v16 = v13 + 1;
          v17 = 4 * v13;
          do
          {
            if ( *(_DWORD *)(*(_DWORD *)(v15 + 4 * v16) + 4) <= *(_DWORD *)(*(_DWORD *)(v17 + v15) + 4) )
            {
              v18 = v29;
            }
            else
            {
              v18 = v16;
              v29 = v16;
              v17 = 4 * v16;
            }
            ++v16;
          }
          while ( v16 < (unsigned int)v8 );
          v13 = v26;
          v6 = a2;
          v7 = v30;
          if ( v26 != v18 )
          {
            v19 = *((_DWORD *)v30 + 23);
            v20 = *(_DWORD *)(v19 + 4 * v26);
            *(_DWORD *)(v19 + 4 * v26) = *(_DWORD *)(v19 + 4 * v18);
            *(_DWORD *)(*((_DWORD *)v30 + 23) + 4 * v29) = v20;
            v7 = v30;
          }
          v14 = v28;
        }
        if ( !*(_DWORD *)(*(_DWORD *)(*((_DWORD *)v7 + 23) + 4 * v13) + 4) )
          break;
        v13 = v14;
        v26 = v14;
        if ( v14 >= (unsigned int)v8 )
          goto LABEL_24;
      }
      v8 = v13;
    }
LABEL_24:
    v9 = v8;
    v27 = v8;
    do
    {
      v21 = 0;
      if ( v9 )
      {
        do
        {
          v22 = *(_DWORD *)(*((_DWORD *)v7 + 23) + 4 * v21);
          v25 = v22;
          if ( *(_DWORD *)(v22 + 4) )
          {
            v23 = sub_10013DB3(v7, (int *)&a3, (unsigned int *)&a4, v22, v8, a6);
            v7 = v30;
            v6 -= v23;
            if ( !*(_DWORD *)(v25 + 4) )
              --v8;
          }
          v9 = v27;
          ++v21;
        }
        while ( v21 < v27 );
      }
    }
    while ( v6 );
  }
  return v9;
}

//----- (100136D6) --------------------------------------------------------
void __thiscall sub_100136D6(void *this, int a2, unsigned int a3)
{
  int v3; // ebx@1
  int v4; // edx@1
  int v5; // esi@1
  int v6; // edi@2
  int v7; // edi@4
  unsigned int v8; // ecx@5
  int v9; // edi@14
  int v10; // ecx@15
  int v11; // ebx@16
  int v12; // edx@16
  int v13; // edi@16
  int v14; // eax@18
  int v15; // ecx@22
  int v16; // edx@22
  int v17; // eax@28
  unsigned int v18; // edi@29
  int v19; // eax@31
  int v20; // eax@32
  int v21; // [sp+Ch] [bp-18h]@31
  int v22; // [sp+10h] [bp-14h]@6
  int v23; // [sp+10h] [bp-14h]@14
  int v24; // [sp+10h] [bp-14h]@28
  int v25; // [sp+14h] [bp-10h]@2
  int v26; // [sp+14h] [bp-10h]@15
  int v27; // [sp+18h] [bp-Ch]@6
  int v28; // [sp+18h] [bp-Ch]@15
  int v29; // [sp+1Ch] [bp-8h]@1
  char v30; // [sp+23h] [bp-1h]@2

  v3 = a2;
  v4 = (int)this;
  v5 = a3;
  v29 = (int)this;
  do
  {
    v6 = 0;
    v30 = 0;
    v25 = 0;
    if ( !a3 )
      break;
    do
    {
      if ( !v3 )
        break;
      v7 = *(_DWORD *)(*(_DWORD *)(v4 + 92) + 4 * v6);
      if ( *(_DWORD *)(v7 + 4) )
      {
        v8 = *(_DWORD *)(v7 + 44);
        if ( *(_DWORD *)(v7 + 40) > v8 )
        {
          v30 = 1;
          v27 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v7 + 16) + 20) + 4 * v8);
          v22 = *(_DWORD *)(*(_DWORD *)(v7 + 16) + 16) + 52 * v27;
          if ( *(_DWORD *)(40 * v27 + *(_DWORD *)(v4 + 72) + 28) )
          {
            sub_10013AC0(v4, *(_DWORD *)(v7 + 16), v27, 1, 1);
            if ( *(_DWORD *)(v22 + 28) == *(_DWORD *)(v22 + 4) )
              ++*(_DWORD *)(v7 + 44);
            --*(_DWORD *)(v7 + 4);
            --v3;
            v4 = v29;
          }
          else
          {
            ++*(_DWORD *)(v7 + 44);
          }
        }
      }
      v6 = v25 + 1;
      v25 = v6;
    }
    while ( v6 < a3 );
    a2 = v3;
  }
  while ( v30 );
  if ( v3 )
  {
    v9 = 0;
    v23 = 0;
    if ( a3 )
    {
      while ( 1 )
      {
        v10 = v9 + 1;
        v28 = v9;
        v26 = v9 + 1;
        if ( v9 + 1 < a3 )
        {
          v11 = *(_DWORD *)(v4 + 92);
          v12 = v9 + 1;
          v13 = 4 * v9;
          do
          {
            if ( *(_DWORD *)(*(_DWORD *)(v11 + 4 * v12) + 4) <= *(_DWORD *)(*(_DWORD *)(v13 + v11) + 4) )
            {
              v14 = v28;
            }
            else
            {
              v14 = v12;
              v28 = v12;
              v13 = 4 * v12;
            }
            ++v12;
          }
          while ( v12 < a3 );
          v9 = v23;
          v3 = a2;
          v4 = v29;
          if ( v23 != v14 )
          {
            v15 = *(_DWORD *)(v29 + 92);
            v16 = *(_DWORD *)(v15 + 4 * v23);
            *(_DWORD *)(v15 + 4 * v23) = *(_DWORD *)(v15 + 4 * v14);
            *(_DWORD *)(*(_DWORD *)(v29 + 92) + 4 * v28) = v16;
            v4 = v29;
          }
          v10 = v26;
        }
        if ( !*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v4 + 92) + 4 * v9) + 4) )
          break;
        v9 = v10;
        v23 = v10;
        if ( v10 >= a3 )
          goto LABEL_28;
      }
      v5 = v9;
    }
LABEL_28:
    v17 = v5;
    v24 = v5;
    while ( 1 )
    {
      v18 = 0;
      if ( v17 )
        break;
LABEL_35:
      if ( !v3 )
        return;
    }
    while ( v3 )
    {
      v19 = *(_DWORD *)(*(_DWORD *)(v4 + 92) + 4 * v18);
      v21 = v19;
      if ( *(_DWORD *)(v19 + 4) )
      {
        v20 = sub_100140F7((void *)v4, v3, v19, v5);
        v4 = v29;
        v3 -= v20;
        if ( !*(_DWORD *)(v21 + 4) )
          --v5;
      }
      v17 = v24;
      ++v18;
      if ( v18 >= v24 )
        goto LABEL_35;
    }
  }
}

//----- (1001385C) --------------------------------------------------------
int __thiscall sub_1001385C(int this)
{
  int v1; // edi@1
  unsigned int v2; // ecx@1
  unsigned int v3; // ebx@1
  int v4; // edx@2
  int v5; // ecx@3
  int v6; // esi@3
  int v7; // esi@4
  int v8; // ecx@7
  int v9; // eax@9
  int v10; // eax@9
  int v11; // ecx@11
  unsigned int v12; // edx@11
  int v13; // esi@12
  int v14; // eax@13
  unsigned int v15; // edx@14
  int v16; // ebx@14
  int v17; // ecx@15
  int v18; // esi@15
  int v19; // esi@23
  unsigned int v20; // ecx@29
  unsigned int v21; // ebx@29
  unsigned int v22; // edx@29
  int v23; // esi@30
  int v24; // esi@35
  int v25; // ecx@35
  int v26; // edx@35
  int v27; // esi@44
  unsigned int v28; // eax@44
  int v30; // [sp+Ch] [bp-18h]@35
  unsigned int v31; // [sp+10h] [bp-14h]@1
  int v32; // [sp+14h] [bp-10h]@6
  unsigned int v33; // [sp+14h] [bp-10h]@11
  unsigned int v34; // [sp+14h] [bp-10h]@29
  unsigned int v35; // [sp+18h] [bp-Ch]@1
  int v36; // [sp+1Ch] [bp-8h]@6
  int v37; // [sp+1Ch] [bp-8h]@12
  unsigned int v38; // [sp+1Ch] [bp-8h]@23
  int v39; // [sp+20h] [bp-4h]@11

  v1 = this;
  sub_10014F3D(this);
  sub_10015065(v1);
  v35 = 0;
  v2 = 0;
  v3 = 0;
  v31 = 0;
  if ( *(_DWORD *)(v1 + 8) )
  {
    do
    {
      v4 = *(_DWORD *)(*(_DWORD *)(v1 + 84) + 4 * v3);
      if ( *(_DWORD *)(*(_DWORD *)(v4 + 16) + 160) > *(_DWORD *)(v4 + 36) )
      {
        *(_DWORD *)(*(_DWORD *)(v1 + 88) + 4 * v2) = v4;
        v31 = v2 + 1;
        v5 = *(_DWORD *)(v4 + 16);
        v6 = *(_DWORD *)(v5 + 160);
        v35 += *(_DWORD *)(v5 + 160) - *(_DWORD *)(v4 + 36);
        if ( *(_DWORD *)(v4 + 24) >= (unsigned int)(v6 - *(_DWORD *)(v4 + 36)) )
          v7 = v6 - *(_DWORD *)(v4 + 36);
        else
          v7 = *(_DWORD *)(v4 + 24);
        *(_DWORD *)(v4 + 40) = v7;
        v36 = *(_DWORD *)(v5 + 160);
        v32 = *(_DWORD *)(v5 + 168);
        if ( v32 - *(_DWORD *)(v4 + 24) >= (unsigned int)(v36 - *(_DWORD *)(v4 + 36) - v7) )
          v8 = v36 - *(_DWORD *)(v4 + 36) - v7;
        else
          v8 = v32 - *(_DWORD *)(v4 + 24);
        v9 = *(_DWORD *)(v4 + 16);
        *(_DWORD *)(v4 + 44) = v8;
        v10 = *(_DWORD *)(v9 + 160) - *(_DWORD *)(v4 + 36) - v8;
        v2 = v31;
        *(_DWORD *)(v4 + 48) = v10 - v7;
      }
      ++v3;
    }
    while ( v3 < *(_DWORD *)(v1 + 8) );
  }
  v11 = 0;
  v12 = 0;
  *(_DWORD *)(v1 + 32) = 0;
  v39 = 0;
  v33 = 0;
  if ( *(_DWORD *)(v1 + 24) )
  {
    v13 = 0;
    v37 = 0;
    do
    {
      v14 = v13 + *(_DWORD *)(v1 + 72);
      if ( *(_DWORD *)(v14 + 4) )
      {
        v15 = 0;
        v16 = 0;
        do
        {
          v17 = v16 + *(_DWORD *)(v14 + 32);
          v18 = *(_DWORD *)(v17 + 16);
          if ( v18 )
          {
            if ( v18 == *(_DWORD *)(v17 + 28) )
            {
              *(_DWORD *)v17 = 6;
              ++*(_DWORD *)(v14 + 28);
              ++*(_DWORD *)(v1 + 32);
            }
            v11 = v39;
          }
          else
          {
            *(_DWORD *)v17 = 2;
            ++*(_DWORD *)(v14 + 8);
            v11 = v39++ + 1;
          }
          ++v15;
          v16 += 36;
        }
        while ( v15 < *(_DWORD *)(v14 + 4) );
        v12 = v33;
        v13 = v37;
      }
      ++v12;
      v13 += 40;
      v33 = v12;
      v37 = v13;
    }
    while ( v12 < *(_DWORD *)(v1 + 24) );
  }
  v19 = v11 + v35;
  *(_DWORD *)(v1 + 36) = 0;
  v38 = v11 + v35;
  while ( (v19 || *(_DWORD *)(v1 + 32) > 0u) && *(_DWORD *)(v1 + 36) < 2u )
  {
    if ( *(_DWORD *)(v1 + 36) == 1 )
      sub_10014878(v1);
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v34 = 0;
    if ( *(_DWORD *)(v1 + 8) )
    {
      do
      {
        v23 = *(_DWORD *)(*(_DWORD *)(v1 + 84) + 4 * v22);
        if ( *(_DWORD *)(*(_DWORD *)(v23 + 16) + 160) < *(_DWORD *)(v23 + 36) )
        {
          *(_DWORD *)(*(_DWORD *)(v1 + 92) + 4 * v20) = v23;
          v34 = v20 + 1;
          v21 += *(_DWORD *)(v23 + 36) - *(_DWORD *)(*(_DWORD *)(v23 + 16) + 160);
          ++v20;
        }
        ++v22;
      }
      while ( v22 < *(_DWORD *)(v1 + 8) );
      v19 = v38;
      if ( v20 )
      {
        if ( v38 )
        {
          v24 = sub_10012922(v1, v38, v21, v20);
          v30 = sub_10015167((void *)v1, v34);
          LOBYTE(v25) = 0;
          v26 = v39;
          if ( v39 >= (unsigned int)v24 )
            v26 = v24;
          v39 -= v26;
          if ( v26 < (unsigned int)v24 )
          {
            v25 = v24 - v26;
            if ( v24 - v26 >= v35 )
              v25 = v35;
            v35 -= v25;
          }
          sub_10013594((void *)v1, v24, v26, v25, v30, v31);
          v38 -= v24;
          v21 -= v24;
          v20 = v34;
          v19 = v38;
        }
        if ( v21 )
        {
          if ( *(_DWORD *)(v1 + 32) )
          {
            v27 = sub_10012922(v1, *(_DWORD *)(v1 + 32), v21, v20);
            v28 = sub_10015167((void *)v1, v34);
            sub_100136D6((void *)v1, v27, v28);
            *(_DWORD *)(v1 + 32) -= v27;
            v19 = v38;
          }
        }
      }
    }
    ++*(_DWORD *)(v1 + 36);
  }
  return sub_10015D64(v1);
}

//----- (10013AC0) --------------------------------------------------------
char *__thiscall sub_10013AC0(int this, int a2, int a3, int a4, char a5)
{
  int v5; // edx@1
  int v6; // edi@1
  int v7; // esi@1
  int i; // ecx@1
  int v9; // eax@2
  char *result; // eax@9
  int v11; // [sp+Ch] [bp-4h]@2

  v5 = a3;
  v6 = 0;
  v7 = *(_DWORD *)(this + 72) + 40 * a3;
  for ( i = 0; ; i += 36 )
  {
    v9 = i + *(_DWORD *)(v7 + 32);
    v11 = i;
    if ( *(_DWORD *)v9 == 2 && !a5 )
      break;
    if ( *(_DWORD *)v9 == 6 && a5 )
      break;
LABEL_11:
    ++v6;
  }
  ++*(_DWORD *)(v9 + 16);
  *(_DWORD *)v9 = 0;
  if ( a5 )
    --*(_DWORD *)(v7 + 28);
  else
    --*(_DWORD *)(v7 + 8);
  result = sub_1001D342(a2, *(_DWORD *)(a2 + 16) + 52 * v5, v6, a5);
  --a4;
  if ( a4 )
  {
    i = v11;
    v5 = a3;
    goto LABEL_11;
  }
  return result;
}

//----- (10013B2F) --------------------------------------------------------
char *__thiscall sub_10013B2F(void *this, int a2, int a3, int a4, unsigned int a5)
{
  int v5; // ebp@0
  int v6; // ecx@1
  unsigned int v7; // edx@1
  unsigned int v8; // esi@2
  int v9; // edi@4
  int v10; // ecx@6
  int v11; // esi@6
  int v12; // edx@8
  int v13; // eax@8
  int v14; // esi@8
  int v15; // ebx@9
  char v16; // al@11
  char v17; // cl@22
  char *result; // eax@29
  char v19; // [sp+18h] [bp-24h]@24
  int v20; // [sp+1Ch] [bp-20h]@1
  int v21; // [sp+20h] [bp-1Ch]@8
  int v22; // [sp+24h] [bp-18h]@8
  int v23; // [sp+28h] [bp-14h]@1
  int v24; // [sp+2Ch] [bp-10h]@6
  unsigned int v25; // [sp+30h] [bp-Ch]@2
  int v26; // [sp+34h] [bp-8h]@9
  char v27; // [sp+3Bh] [bp-1h]@11

  v20 = (int)this;
  v6 = *(_DWORD *)(*(_DWORD *)(a2 + 16) + 16) + 52 * a4;
  v23 = v6;
  v7 = *(_DWORD *)(v6 + 44);
  if ( a5 >= v7 )
  {
    v8 = *(_DWORD *)(v6 + 44);
    v25 = *(_DWORD *)(v6 + 44);
  }
  else
  {
    v8 = a5;
    v25 = a5;
  }
  v9 = a5 - v8;
  if ( a5 - v8 >= *(_DWORD *)(v6 + 32) - v7 )
    v9 = *(_DWORD *)(v6 + 32) - v7;
  v10 = *(_DWORD *)(v6 + 40) - v7;
  v11 = a5 - v9 - v25;
  v24 = v10;
  if ( v11 < (unsigned int)v10 )
  {
    v10 = a5 - v9 - v25;
    v24 = a5 - v9 - v25;
  }
  v12 = v23;
  v13 = 0;
  v21 = 0;
  v14 = v11 - v10;
  v22 = 0;
  while ( 1 )
  {
    v15 = v22 + *(_DWORD *)(v12 + 48);
    v26 = v13;
    if ( *(_DWORD *)v15 == 4 && !*(_DWORD *)(v15 + 40) )
      break;
LABEL_32:
    v22 += 52;
    ++v13;
    v21 += 36;
  }
  v16 = *(_BYTE *)(v15 + 48);
  v27 = *(_BYTE *)(v15 + 48);
  if ( *(_BYTE *)(v15 + 49) )
  {
    if ( v16 && v25 )
    {
      --v25;
      goto LABEL_22;
    }
    if ( v9 )
    {
      --v9;
      goto LABEL_22;
    }
LABEL_31:
    v13 = v26;
    goto LABEL_32;
  }
  if ( v16 && v10 )
  {
    v24 = v10 - 1;
  }
  else
  {
    if ( !v14 )
      goto LABEL_31;
    --v14;
  }
LABEL_22:
  v17 = *(_BYTE *)(v15 + 48);
  if ( v27 )
  {
    sub_10016456(
      v20,
      v12,
      v15,
      40 * a4 + *(_DWORD *)(v20 + 72),
      v21 + *(_DWORD *)(40 * a4 + *(_DWORD *)(v20 + 72) + 32),
      a2);
    v12 = v23;
    v17 = v27;
  }
  v19 = 0;
  if ( *(_BYTE *)(v15 + 49) )
  {
    v19 = 1;
    if ( v17 )
      --*(_DWORD *)(a2 + 40);
    else
      --*(_DWORD *)(a2 + 44);
  }
  else
  {
    --*(_DWORD *)(a2 + 48);
  }
  sub_1001DF7C(v5, v12, v26);
  result = sub_1001D342(a3, 52 * a4 + *(_DWORD *)(a3 + 16), v26, v19);
  --a5;
  if ( a5 )
  {
    v10 = v24;
    v12 = v23;
    goto LABEL_31;
  }
  return result;
}

//----- (10013C9A) --------------------------------------------------------
int __stdcall sub_10013C9A(LPVOID lpThreadParameter)
{
  int v1; // ebp@0

  sub_10013CB3(v1);
  sub_10012293(0);
  return 0;
}

//----- (10013CB3) --------------------------------------------------------
int __usercall sub_10013CB3@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // edi@1
  DWORD v3; // ebx@1
  int v4; // eax@1
  int v5; // edx@1
  bool v6; // zf@1
  struct _RTL_CRITICAL_SECTION *v7; // esi@2
  int v8; // eax@3
  int v9; // eax@7
  int v10; // edx@7
  int v11; // esi@7
  int v12; // edx@12
  struct _RTL_CRITICAL_SECTION *v13; // ecx@17

  sub_1000FB4A();
  v2 = v1;
  v3 = 100;
  v4 = sub_10012022();
  *(_DWORD *)(a1 - 16) = v4 - 500;
  v6 = *(_DWORD *)(v2 + 40) == 2;
  *(_DWORD *)(a1 - 24) = __CFADD__(v4, -500) + v5 - 1;
  if ( !v6 )
  {
    v7 = (struct _RTL_CRITICAL_SECTION *)(v2 + 44);
    for ( *(_DWORD *)(a1 - 20) = v2 + 44; ; v7 = *(struct _RTL_CRITICAL_SECTION **)(a1 - 20) )
    {
      *(_DWORD *)(a1 - 24) = WaitForSingleObjectEx(*(HANDLE *)(v2 + 80), v3, 0);
      sub_1001188A(v7);
      v8 = *(_DWORD *)(v2 + 40);
      *(_DWORD *)(a1 - 4) = 0;
      if ( v8 )
      {
        if ( v8 != 1 )
          goto LABEL_17;
        if ( *(_DWORD *)(a1 - 24) == 258 )
        {
          sub_1001385C(v2);
LABEL_10:
          if ( *(_DWORD *)(v2 + 16) > 0u )
            sub_1001608D((void *)v2, 0);
          goto LABEL_12;
        }
        v9 = sub_10012022();
        *(_DWORD *)(a1 - 24) = v10;
        v11 = v9 - *(_DWORD *)(a1 - 16);
        if ( (unsigned int)v11 > 0x64 )
        {
          if ( (unsigned int)v11 <= 0x82 )
            goto LABEL_10;
          sub_10013383(v2);
LABEL_12:
          *(_DWORD *)(a1 - 16) = sub_10012022();
          *(_DWORD *)(a1 - 24) = v12;
          v3 = 100;
          goto LABEL_17;
        }
        if ( *(_DWORD *)(v2 + 16) )
          sub_1001608D((void *)v2, 0);
        v3 = 100 - v11;
      }
      else
      {
        v3 = sub_100133EF(v2) != 0 ? -1 : 100;
      }
LABEL_17:
      v13 = *(struct _RTL_CRITICAL_SECTION **)(a1 - 20);
      *(_DWORD *)(a1 - 4) = 1;
      sub_100119D6(v13);
      *(_DWORD *)(a1 - 4) = -1;
      if ( *(_DWORD *)(v2 + 40) == 2 )
        return sub_1000FB24(16);
    }
  }
  return sub_1000FB24(16);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10013DB3) --------------------------------------------------------
int __thiscall sub_10013DB3(void *this, int *a2, unsigned int *a3, int a4, int a5, unsigned int a6)
{
  int v6; // edx@1
  int v7; // ecx@1
  int v8; // esi@1
  unsigned int v9; // ebx@1
  int v10; // eax@4
  int v11; // eax@5
  int v12; // edx@5
  int v13; // edi@5
  int v14; // edx@8
  int v15; // eax@9
  unsigned int *v16; // eax@14
  int v17; // esi@14
  int v18; // ecx@16
  int v19; // esi@18
  int v20; // edx@18
  int v21; // eax@19
  unsigned int v22; // edx@20
  int v23; // edx@22
  int v24; // eax@24
  int v25; // edx@26
  int v26; // eax@27
  bool v27; // cf@32
  int v28; // eax@34
  bool v29; // zf@35
  int v30; // edx@42
  unsigned int v31; // eax@42
  int v32; // esi@44
  unsigned int v33; // eax@45
  unsigned int v34; // ecx@46
  unsigned int *v35; // eax@57
  unsigned int v36; // esi@59
  int v37; // edx@60
  int v38; // ecx@61
  int v39; // eax@61
  int v40; // ebx@64
  int v41; // ecx@64
  int v42; // eax@66
  int v43; // eax@68
  unsigned int v44; // ecx@69
  int v45; // edx@78
  int v46; // ecx@78
  int v48; // [sp+Ch] [bp-54h]@1
  unsigned int v49; // [sp+10h] [bp-50h]@4
  int v50; // [sp+14h] [bp-4Ch]@22
  int v51; // [sp+18h] [bp-48h]@19
  int v52; // [sp+20h] [bp-40h]@4
  unsigned int v53; // [sp+24h] [bp-3Ch]@1
  int v54; // [sp+28h] [bp-38h]@5
  unsigned int v55; // [sp+28h] [bp-38h]@20
  unsigned int v56; // [sp+28h] [bp-38h]@62
  signed int v57; // [sp+2Ch] [bp-34h]@4
  int v58; // [sp+30h] [bp-30h]@4
  int v59; // [sp+30h] [bp-30h]@42
  int v60; // [sp+34h] [bp-2Ch]@4
  unsigned int v61; // [sp+38h] [bp-28h]@6
  int v62; // [sp+3Ch] [bp-24h]@8
  int v63; // [sp+40h] [bp-20h]@15
  int v64; // [sp+44h] [bp-1Ch]@1
  int v65; // [sp+48h] [bp-18h]@4
  int v66; // [sp+4Ch] [bp-14h]@14
  int v67; // [sp+50h] [bp-10h]@1
  int v68; // [sp+54h] [bp-Ch]@1
  signed int v69; // [sp+58h] [bp-8h]@8
  char v70; // [sp+5Fh] [bp-1h]@2

  v6 = (int)this;
  v7 = a4;
  v68 = v6;
  v48 = *(_DWORD *)(a4 + 16);
  v8 = *(_DWORD *)(v48 + 20);
  v64 = *(_DWORD *)(v48 + 16);
  v9 = 0;
  v67 = *(_DWORD *)(v48 + 20);
  v53 = 0;
  if ( a5 == 1 )
    v70 = 0;
  else
    v70 = *(_BYTE *)(a4 + 32);
  v10 = *(_DWORD *)(a4 + 44);
  v52 = 0;
  v57 = -1;
  v65 = 0;
  v60 = 0;
  v58 = v10;
  v49 = *(_DWORD *)(v6 + 24);
  if ( v10 >= v49 )
    goto LABEL_79;
  do
  {
    v11 = *(_DWORD *)(v8 + 4 * v10);
    v12 = 52 * v11;
    v54 = 52 * v11;
    v13 = v65;
    if ( *(_DWORD *)(52 * v11 + v64 + 28) )
      goto LABEL_40;
    v61 = *(_DWORD *)(v7 + 4);
    if ( v61 >= *(_DWORD *)(v12 + v64 + 4) )
      v61 = *(_DWORD *)(v12 + v64 + 4);
    v14 = 0;
    v13 = v65;
    v62 = 0;
    v69 = 0;
    if ( *a2 )
    {
      v15 = *(_DWORD *)(40 * v11 + *(_DWORD *)(v68 + 72) + 8);
      if ( v15 )
      {
        if ( *a2 < (unsigned int)v15 )
          v15 = *a2;
        v62 = v15;
        v14 = 1;
        v69 = 1;
      }
      v7 = a4;
    }
    v16 = a3;
    v17 = 0;
    v66 = 0;
    if ( *a3 )
    {
      v63 = 0;
      if ( a6 )
      {
        v18 = v54;
        while ( 1 )
        {
          if ( v17 >= *v16 )
          {
LABEL_33:
            v13 = v65;
            v9 = 0;
            v7 = a4;
            break;
          }
          v19 = *(_DWORD *)(*(_DWORD *)(v68 + 88) + 4 * v63);
          v20 = *(_DWORD *)(v19 + 16);
          if ( *(_DWORD *)(v20 + 160) <= *(_DWORD *)(v19 + 36)
            || (v21 = *(_DWORD *)(v20 + 16),
                v51 = *(_DWORD *)(v18 + v21 + 28) - *(_DWORD *)(v18 + v21 + 36),
                *(_DWORD *)(v18 + v21 + 28) == *(_DWORD *)(v18 + v21 + 36)) )
          {
            v17 = v66;
          }
          else
          {
            v22 = *(_DWORD *)(v18 + v21 + 44);
            v55 = *(_DWORD *)(v19 + 40);
            if ( v22 < v55 )
              v55 = *(_DWORD *)(v18 + v21 + 44);
            v50 = *(_DWORD *)(v18 + v21 + 32);
            v23 = v50 - v22;
            if ( (unsigned int)v23 >= *(_DWORD *)(v19 + 44) )
              v23 = *(_DWORD *)(v19 + 44);
            v24 = v51 - v50;
            if ( (unsigned int)(v51 - v50) >= *(_DWORD *)(v19 + 48) )
              v24 = *(_DWORD *)(v19 + 48);
            v17 = v66;
            v25 = v55 + v24 + v23;
            if ( v25 )
            {
              v26 = *a3 - v66;
              if ( v26 >= (unsigned int)v25 )
                v26 = v25;
              v17 = v26 + v66;
              v14 = v69 + 1;
              v66 += v26;
              ++v69;
              goto LABEL_32;
            }
          }
          v14 = v69;
LABEL_32:
          v27 = v63++ + 1 < a6;
          v16 = a3;
          if ( !v27 )
            goto LABEL_33;
        }
      }
    }
    v28 = v17 + v62;
    if ( v70 )
    {
      v29 = v28 == v61;
LABEL_36:
      if ( !v29 || v14 <= (unsigned int)v60 )
        goto LABEL_39;
      goto LABEL_38;
    }
    if ( v13 >= v61 || v28 <= (unsigned int)v13 )
    {
      v29 = v28 == v13;
      goto LABEL_36;
    }
LABEL_38:
    v57 = v58;
    v13 = v17 + v62;
    v65 = v17 + v62;
    v60 = v14;
LABEL_39:
    v8 = *(_DWORD *)(v48 + 20);
LABEL_40:
    v10 = v58 + 1;
    v58 = v10;
  }
  while ( v10 < v49 );
  if ( v57 == -1 )
  {
LABEL_79:
    *(_BYTE *)(v7 + 32) = v9;
    return v52;
  }
  v30 = *(_DWORD *)(v8 + 4 * v57);
  v31 = *(_DWORD *)(v7 + 4);
  v59 = *(_DWORD *)(v8 + 4 * v57);
  if ( v31 < v13 )
    v13 = *(_DWORD *)(v7 + 4);
  *(_DWORD *)(v7 + 4) = v31 - v13;
  v52 = v13;
  v32 = *a2;
  if ( *a2 )
  {
    v33 = *(_DWORD *)(40 * v30 + *(_DWORD *)(v68 + 72) + 8);
    if ( v33 )
    {
      v34 = *a2;
      if ( v32 >= v33 )
        v34 = *(_DWORD *)(40 * v30 + *(_DWORD *)(v68 + 72) + 8);
      if ( v34 >= v13 )
      {
        v32 = v13;
      }
      else if ( v32 >= v33 )
      {
        v32 = *(_DWORD *)(40 * v30 + *(_DWORD *)(v68 + 72) + 8);
      }
      sub_10013AC0(v68, v48, v30, v32, v9);
      *a2 -= v32;
      v13 -= v32;
    }
  }
  if ( v13 )
  {
    v35 = a3;
    if ( *a3 > 0 )
    {
      do
      {
        if ( v9 >= a6 )
          break;
        v36 = *v35;
        if ( !*v35 )
          break;
        v37 = *(_DWORD *)(*(_DWORD *)(v68 + 88) + 4 * v9);
        if ( *(_DWORD *)(*(_DWORD *)(v37 + 16) + 160) <= *(_DWORD *)(v37 + 36) )
          goto LABEL_83;
        v38 = *(_DWORD *)(*(_DWORD *)(v37 + 16) + 16) + 52 * v59;
        v39 = *(_DWORD *)(v38 + 28) - *(_DWORD *)(v38 + 36);
        if ( *(_DWORD *)(v38 + 28) == *(_DWORD *)(v38 + 36) )
          goto LABEL_83;
        v56 = *(_DWORD *)(v37 + 40);
        if ( *(_DWORD *)(v38 + 44) < v56 )
          v56 = *(_DWORD *)(v38 + 44);
        v40 = *(_DWORD *)(v38 + 32);
        v41 = *(_DWORD *)(v38 + 32) - *(_DWORD *)(v38 + 44);
        if ( (unsigned int)v41 >= *(_DWORD *)(v37 + 44) )
          v41 = *(_DWORD *)(v37 + 44);
        v42 = v39 - v40;
        if ( (unsigned int)v42 >= *(_DWORD *)(v37 + 48) )
          v42 = *(_DWORD *)(v37 + 48);
        v9 = v53;
        v43 = v56 + v41 + v42;
        if ( v43 )
        {
          v44 = v36;
          if ( v36 >= v43 )
            v44 = v43;
          if ( v44 >= v13 )
          {
            v36 = v13;
          }
          else if ( v36 >= v43 )
          {
            v36 = v43;
          }
          sub_10013B2F((void *)v68, v37, *(_DWORD *)(a4 + 16), v59, v36);
          v35 = a3;
          *v35 -= v36;
          v13 -= v36;
        }
        else
        {
LABEL_83:
          v35 = a3;
        }
        ++v9;
        v53 = v9;
      }
      while ( v13 );
    }
  }
  v45 = *(_DWORD *)(a4 + 44);
  v46 = *(_DWORD *)(v67 + 4 * v45);
  *(_DWORD *)(v67 + 4 * v45) = *(_DWORD *)(v67 + 4 * v57);
  *(_DWORD *)(v67 + 4 * v57) = v46;
  ++*(_DWORD *)(a4 + 44);
  *(_BYTE *)(a4 + 32) = 1;
  return v52;
}

//----- (100140F7) --------------------------------------------------------
int __thiscall sub_100140F7(void *this, int a2, int a3, int a4)
{
  void *v4; // edx@1
  int v5; // ebx@1
  int v6; // eax@1
  int v7; // edi@1
  signed int v8; // ecx@4
  signed int v9; // eax@4
  int v10; // edx@5
  int v11; // edx@5
  int v12; // edx@8
  unsigned int v13; // eax@8
  int v14; // edx@19
  int v15; // ecx@19
  unsigned int v17; // [sp+Ch] [bp-24h]@4
  int v18; // [sp+10h] [bp-20h]@5
  int v19; // [sp+14h] [bp-1Ch]@1
  int v20; // [sp+18h] [bp-18h]@1
  unsigned int v21; // [sp+1Ch] [bp-14h]@6
  signed int v22; // [sp+20h] [bp-10h]@4
  signed int v23; // [sp+24h] [bp-Ch]@4
  unsigned int v24; // [sp+28h] [bp-8h]@4
  char v25; // [sp+2Fh] [bp-1h]@2

  v4 = this;
  v5 = 0;
  v20 = (int)this;
  v6 = *(_DWORD *)(a3 + 16);
  v7 = *(_DWORD *)(v6 + 20);
  v19 = *(_DWORD *)(v6 + 16);
  if ( a4 == 1 )
    v25 = 0;
  else
    v25 = *(_BYTE *)(a3 + 32);
  v8 = *(_DWORD *)(a3 + 44);
  v9 = -1;
  v23 = -1;
  v24 = 0;
  v22 = v8;
  v17 = *((_DWORD *)v4 + 6);
  if ( v8 >= v17 )
    goto LABEL_27;
  while ( 1 )
  {
    v10 = *(_DWORD *)(v7 + 4 * v8);
    v18 = v10;
    v11 = v19 + 52 * v10;
    if ( !*(_DWORD *)(v11 + 28) )
      break;
LABEL_14:
    v12 = v24;
LABEL_15:
    ++v8;
    v22 = v8;
    if ( v8 >= v17 )
      goto LABEL_16;
  }
  v21 = *(_DWORD *)(a3 + 4);
  if ( v21 >= *(_DWORD *)(v11 + 4) )
    v21 = *(_DWORD *)(v11 + 4);
  v12 = 0;
  v13 = *(_DWORD *)(40 * v18 + *(_DWORD *)(v20 + 72) + 28);
  if ( v13 )
  {
    v12 = a2;
    if ( a2 >= v13 )
      v12 = *(_DWORD *)(40 * v18 + *(_DWORD *)(v20 + 72) + 28);
  }
  if ( v25 )
  {
    if ( v12 == v21 )
      goto LABEL_21;
    goto LABEL_13;
  }
  if ( v12 <= v24 )
  {
LABEL_13:
    v8 = v22;
    v9 = v23;
    goto LABEL_14;
  }
LABEL_21:
  v8 = v22;
  v9 = v22;
  v23 = v22;
  v24 = v12;
  if ( !v25 )
    goto LABEL_15;
LABEL_16:
  if ( v9 == -1 )
  {
LABEL_27:
    *(_BYTE *)(a3 + 32) = 0;
    return v5;
  }
  v5 = *(_DWORD *)(a3 + 4);
  if ( v5 >= (unsigned int)v12 )
    v5 = v12;
  sub_10013AC0(v20, *(_DWORD *)(a3 + 16), *(_DWORD *)(v7 + 4 * v9), v5, 1);
  v14 = *(_DWORD *)(a3 + 44);
  *(_DWORD *)(a3 + 4) -= v5;
  v15 = *(_DWORD *)(v7 + 4 * v14);
  *(_DWORD *)(v7 + 4 * v14) = *(_DWORD *)(v7 + 4 * v23);
  *(_DWORD *)(v7 + 4 * v23) = v15;
  ++*(_DWORD *)(a3 + 44);
  *(_BYTE *)(a3 + 32) = 1;
  return v5;
}

//----- (10014205) --------------------------------------------------------
char __thiscall sub_10014205(void *this, int a2, int a3, int a4, unsigned int a5)
{
  char v5; // bl@1
  int v6; // eax@1
  int v7; // ecx@1
  int v8; // edx@1
  int v9; // edi@1
  int v10; // ecx@5
  int v11; // ecx@7
  int v12; // edx@8
  int v14; // [sp+Ch] [bp-10h]@1
  int v15; // [sp+10h] [bp-Ch]@5
  int v16; // [sp+14h] [bp-8h]@1
  int v17; // [sp+18h] [bp-4h]@1

  v5 = 0;
  v17 = (int)this;
  v6 = *(_DWORD *)(a4 + 16);
  v14 = *(_DWORD *)(v6 + 16);
  v7 = *(_DWORD *)(*(_DWORD *)(v6 + 20) + 4 * *(_DWORD *)(a4 + 44));
  v8 = v17;
  v9 = 52 * v7;
  v16 = *(_DWORD *)(*(_DWORD *)(v6 + 20) + 4 * *(_DWORD *)(a4 + 44));
  if ( *(_DWORD *)a2 && *(_DWORD *)(40 * v7 + *(_DWORD *)(v17 + 72) + 8) )
  {
    v5 = 1;
    sub_10013AC0(v17, *(_DWORD *)(a4 + 16), v16, 1, 0);
    --*(_DWORD *)a2;
  }
  else
  {
    if ( !*(_DWORD *)a3 || (v10 = 0, v15 = 0, !a5) )
    {
LABEL_20:
      ++*(_DWORD *)(a4 + 44);
      return v5;
    }
    while ( !v5 )
    {
      v11 = *(_DWORD *)(*(_DWORD *)(v8 + 88) + 4 * v10);
      if ( *(_DWORD *)(*(_DWORD *)(v11 + 16) + 160) > *(_DWORD *)(v11 + 36) )
      {
        v12 = *(_DWORD *)(*(_DWORD *)(v11 + 16) + 16);
        if ( *(_DWORD *)(v9 + v12 + 44)
          || *(_DWORD *)(v9 + v12 + 32) != *(_DWORD *)(v9 + v12 + 44) && *(_DWORD *)(v11 + 44)
          || *(_DWORD *)(v9 + v12 + 28) != *(_DWORD *)(v9 + v12 + 36) && *(_DWORD *)(v11 + 48) )
        {
          v5 = 1;
          sub_10013B2F((void *)v17, v11, *(_DWORD *)(a4 + 16), v16, 1u);
          --*(_DWORD *)a3;
        }
        v8 = v17;
      }
      v10 = v15 + 1;
      v15 = v10;
      if ( v10 >= a5 )
      {
        if ( !v5 )
          goto LABEL_20;
        break;
      }
    }
  }
  if ( *(_DWORD *)(v9 + v14 + 28) == *(_DWORD *)(v9 + v14 + 4) )
    ++*(_DWORD *)(a4 + 44);
  --*(_DWORD *)(a4 + 4);
  return v5;
}

//----- (10014310) --------------------------------------------------------
int __thiscall sub_10014310(int this, __int16 a2)
{
  unsigned __int16 v2; // si@1
  unsigned __int16 v3; // dx@1
  int v4; // ecx@2
  int v5; // eax@3
  int result; // eax@5

  v2 = *(_WORD *)this;
  v3 = 0;
  if ( *(_WORD *)this <= 0u )
  {
LABEL_5:
    result = 0;
  }
  else
  {
    v4 = *(_DWORD *)(this + 4);
    while ( 1 )
    {
      v5 = 12 * v3;
      if ( *(_WORD *)(v4 + v5 + 4) == a2 )
        break;
      ++v3;
      if ( v3 >= v2 )
        goto LABEL_5;
    }
    result = v4 + v5;
  }
  return result;
}

//----- (10014347) --------------------------------------------------------
void *__thiscall sub_10014347(DWORD this)
{
  void *result; // eax@2
  DWORD flOldProtect; // [sp+0h] [bp-4h]@1

  flOldProtect = this;
  if ( dword_1007C568 < 3 )
  {
    result = *(void **)(this + 140);
    if ( *(_BYTE *)result == 1 )
      result = (void *)VirtualProtect(result, 1u, 2u, &flOldProtect);
  }
  else
  {
    result = (void *)sub_1000ED72();
  }
  return result;
}
// 1007C568: using guessed type int dword_1007C568;

//----- (10014379) --------------------------------------------------------
int __thiscall sub_10014379(int this)
{
  return *(_DWORD *)(this + 24);
}

//----- (1001437D) --------------------------------------------------------
int __usercall sub_1001437D@<eax>(int a1@<ebp>)
{
  sub_1000FB4A();
  if ( !dword_1007C558 )
  {
    *(_DWORD *)(a1 - 16) = &dword_1007C5AC;
    sub_100124FC((volatile signed __int32 *)&dword_1007C5AC);
    *(_DWORD *)(a1 - 4) = 0;
    if ( !dword_1007C558 )
      sub_10014ACC(dword_1007C558);
    dword_1007C5AC = 0;
  }
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1007C558: using guessed type int dword_1007C558;
// 1007C5AC: using guessed type int dword_1007C5AC;

//----- (100143C8) --------------------------------------------------------
int __thiscall sub_100143C8(void *this, int a2)
{
  int v2; // ebp@0
  void *v3; // ebx@1
  int v4; // edx@2
  signed int v5; // eax@2
  int v6; // esi@2
  int v7; // ecx@2
  unsigned int v8; // edx@5
  int v9; // edi@6
  int v11; // eax@21
  signed int v12; // eax@21
  int v13; // edx@21
  int v14; // ecx@21
  unsigned int v15; // esi@23
  int v16; // edi@24
  char v17; // [sp+Ch] [bp-18h]@33
  int v18; // [sp+18h] [bp-Ch]@2
  int v19; // [sp+1Ch] [bp-8h]@2
  unsigned __int16 v20; // [sp+20h] [bp-4h]@2
  unsigned __int8 v21; // [sp+22h] [bp-2h]@2

  v3 = this;
  if ( sub_100164C3(v2) < 4 )
  {
    if ( sub_100164C3(v2) != 2 && sub_100164C3(v2) != 3 )
    {
      if ( dword_1007C568 != 1 )
      {
        sub_1001A052((int)&v17);
        sub_10027494((int)&v17, (int)&unk_10075BEC);
        __debugbreak();
        JUMPOUT(*(_DWORD *)sub_100144D8);
      }
      if ( a2 )
        *(_DWORD *)a2 = 0;
      return 0;
    }
    v11 = sub_1000EDB0();
    v18 = v11;
    v12 = 1 << v11;
    v13 = 0;
    v14 = *((_DWORD *)v3 + 18);
    v19 = v12;
    while ( 1 )
    {
      if ( v12 & *(_DWORD *)v14 )
      {
        v15 = 0;
        if ( *(_DWORD *)(v14 + 4) )
        {
          v16 = *(_DWORD *)(v14 + 32) + 8;
          do
          {
            if ( *(_BYTE *)v16 == v18 )
            {
              if ( a2 )
                *(_DWORD *)a2 = v15;
              return v13;
            }
            ++v15;
            v16 += 36;
          }
          while ( v15 < *(_DWORD *)(v14 + 4) );
          v12 = v19;
        }
      }
      ++v13;
      v14 += 40;
    }
  }
  sub_10011E11((int)&v20);
  v4 = v20;
  v5 = 1 << v21;
  v6 = 0;
  v19 = v21;
  v7 = *((_DWORD *)v3 + 18);
  v18 = 1 << v21;
  while ( *(_DWORD *)(v7 + 12) != v4 || !(v5 & *(_DWORD *)v7) )
  {
LABEL_11:
    ++v6;
    v7 += 40;
  }
  v8 = 0;
  if ( !*(_DWORD *)(v7 + 4) )
  {
LABEL_10:
    v4 = v20;
    goto LABEL_11;
  }
  v9 = *(_DWORD *)(v7 + 32) + 8;
  while ( *(_BYTE *)v9 != v19 )
  {
    ++v8;
    v9 += 36;
    if ( v8 >= *(_DWORD *)(v7 + 4) )
    {
      v5 = v18;
      goto LABEL_10;
    }
  }
  if ( a2 )
    *(_DWORD *)a2 = v8;
  return v6;
}
// 1007C568: using guessed type int dword_1007C568;

//----- (100144D8) --------------------------------------------------------
int __thiscall sub_100144D8(int this)
{
  return *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 4) + 32) + 32);
}

//----- (100144E2) --------------------------------------------------------
int __thiscall sub_100144E2(int this)
{
  return *(_DWORD *)(*(_DWORD *)(this + 72) + 36);
}

//----- (100144E9) --------------------------------------------------------
int __thiscall sub_100144E9(int this)
{
  return *(_DWORD *)(*(_DWORD *)(this + 4) + 4);
}

//----- (100144F0) --------------------------------------------------------
int __thiscall sub_100144F0(int this)
{
  return *(_DWORD *)(*(_DWORD *)(this + 4) + 16);
}

//----- (100144F7) --------------------------------------------------------
int __thiscall sub_100144F7(int this)
{
  int v1; // eax@1
  int result; // eax@2

  v1 = sub_10014525(*(_DWORD *)(*(_DWORD *)(this + 4) + 12), *(_DWORD *)(this + 4));
  if ( v1 )
    result = *(_DWORD *)(v1 + 32);
  else
    result = 0;
  return result;
}

//----- (1001450E) --------------------------------------------------------
int __thiscall sub_1001450E(int this)
{
  int v1; // eax@1
  int result; // eax@2

  v1 = sub_1001454A(*(_DWORD *)(*(_DWORD *)(this + 4) + 24), *(_DWORD *)(this + 4));
  if ( v1 )
    result = *(_DWORD *)(v1 + 36);
  else
    result = 0;
  return result;
}

//----- (10014525) --------------------------------------------------------
int __thiscall sub_10014525(int this, int a2)
{
  int v2; // eax@1
  int result; // eax@2

  v2 = (a2 - *(_DWORD *)(this + 32)) / 36 + 1;
  if ( (unsigned int)v2 >= *(_DWORD *)(this + 4) )
    result = 0;
  else
    result = *(_DWORD *)(this + 32) + 36 * v2;
  return result;
}

//----- (1001454A) --------------------------------------------------------
int __thiscall sub_1001454A(int this, int a2)
{
  int v2; // eax@1
  int result; // eax@2

  v2 = (a2 - *(_DWORD *)(this + 72)) / 40 + 1;
  if ( (unsigned int)v2 >= *(_DWORD *)(this + 24) )
    result = 0;
  else
    result = *(_DWORD *)(this + 72) + 40 * v2;
  return result;
}

//----- (1001456F) --------------------------------------------------------
int __usercall sub_1001456F@<eax>(int a1@<ebp>)
{
  sub_1000FB4A();
  if ( !dword_1007C560 )
  {
    *(_DWORD *)(a1 - 16) = &dword_1007C5AC;
    sub_100124FC((volatile signed __int32 *)&dword_1007C5AC);
    *(_DWORD *)(a1 - 4) = 0;
    if ( !dword_1007C560 )
      sub_10014ACC(dword_1007C560);
    dword_1007C5AC = 0;
  }
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1007C560: using guessed type int dword_1007C560;
// 1007C5AC: using guessed type int dword_1007C5AC;

//----- (100145BA) --------------------------------------------------------
int __thiscall sub_100145BA(int this)
{
  return *(_DWORD *)(*(_DWORD *)(this + 4) + 20);
}

//----- (100145D0) --------------------------------------------------------
signed __int32 sub_100145D0()
{
  return _InterlockedIncrement((volatile signed __int32 *)&dword_1007A038);
}
// 1007A038: using guessed type int dword_1007A038;

//----- (100145DD) --------------------------------------------------------
void *__cdecl sub_100145DD(int a1)
{
  void *result; // eax@2

  if ( dword_1007C568 < 4 )
    result = sub_10011E32(&ReturnedLength);
  else
    result = sub_10011EBD(a1, &ReturnedLength);
  dword_1007C570 = result;
  return result;
}
// 1007C568: using guessed type int dword_1007C568;

//----- (10014606) --------------------------------------------------------
unsigned int __thiscall sub_10014606(int this, int a2, int a3)
{
  int v3; // ebp@0
  int v4; // edx@1
  unsigned int result; // eax@1
  int v6; // ecx@2
  int v7; // esi@2
  int v8; // ebx@4
  int v9; // eax@5
  int v10; // edi@6
  int v11; // eax@8
  int v12; // ecx@8
  unsigned int v13; // [sp+Ch] [bp-14h]@1
  int v14; // [sp+10h] [bp-10h]@5
  int v15; // [sp+14h] [bp-Ch]@5
  int v16; // [sp+18h] [bp-8h]@1
  int v17; // [sp+1Ch] [bp-4h]@2

  v4 = this;
  result = 0;
  v16 = this;
  v13 = 0;
  if ( *(_DWORD *)(this + 24) )
  {
    v6 = 0;
    v7 = *(_DWORD *)(a2 + 16) + 44;
    v17 = 0;
    do
    {
      if ( *(_DWORD *)(v7 - 12) )
      {
        v8 = 0;
        if ( *(_DWORD *)(v7 - 40) )
        {
          v15 = 0;
          v9 = 0;
          v14 = 0;
          do
          {
            v10 = v9 + *(_DWORD *)(v7 + 4);
            if ( *(_DWORD *)v10 == 4 && *(_BYTE *)(v10 + 49) )
            {
              v11 = v15 + *(_DWORD *)(v6 + *(_DWORD *)(v4 + 72) + 32);
              v12 = *(_DWORD *)(v11 + 16);
              if ( v12 == 1 )
              {
                sub_1001E19D(a2, v7 - 44, v8);
                v4 = v16;
                v6 = v17;
                if ( *(_BYTE *)(v10 + 48) )
                {
                  --*(_DWORD *)v7;
                  --*(_DWORD *)(a3 + 24);
                }
              }
              else
              {
                if ( v12 - *(_DWORD *)(v11 + 28) > (unsigned int)(*(_BYTE *)(v10 + 48) == 0) )
                {
                  *(_DWORD *)(v11 + 16) = v12 - 1;
                  if ( *(_BYTE *)(v10 + 48) )
                    sub_10016456(v4, v7 - 44, v10, v17 + *(_DWORD *)(v4 + 72), v11, a3);
                  sub_1001DF7C(v3, v7 - 44, v8);
                  v4 = v16;
                }
                v6 = v17;
              }
            }
            v14 += 52;
            ++v8;
            v15 += 36;
            v9 = v14;
          }
          while ( (unsigned int)v8 < *(_DWORD *)(v7 - 40) );
          result = v13;
        }
      }
      ++result;
      v6 += 40;
      v7 += 52;
      v13 = result;
      v17 = v6;
    }
    while ( result < *(_DWORD *)(v4 + 24) );
  }
  return result;
}

//----- (10014721) --------------------------------------------------------
int __thiscall sub_10014721(void *this, int a2, int a3)
{
  int v3; // ebp@0
  int v4; // esi@1
  int v5; // eax@1
  int v6; // edi@1
  int result; // eax@2
  int v8; // esi@2
  unsigned int v9; // edx@4
  int v10; // edi@5
  int v11; // ecx@8
  int v12; // edx@9
  int v13; // ecx@11
  int v14; // eax@14
  unsigned int v15; // eax@14
  unsigned int v16; // [sp+Ch] [bp-1Ch]@4
  int v17; // [sp+10h] [bp-18h]@14
  int v18; // [sp+14h] [bp-14h]@5
  int v19; // [sp+18h] [bp-10h]@9
  int v20; // [sp+1Ch] [bp-Ch]@8
  int v21; // [sp+20h] [bp-8h]@1
  int v22; // [sp+24h] [bp-4h]@9

  v21 = (int)this;
  v4 = *(_DWORD *)(a2 + 160);
  v5 = sub_10014D04(a2);
  v6 = v4 - *(_DWORD *)(a2 + 168);
  if ( v4 - *(_DWORD *)(a3 + 24) - *(_DWORD *)(a3 + 36) >= (unsigned int)(v4
                                                                        - *(_DWORD *)(a2 + 168)
                                                                        - (*(_DWORD *)(a2 + 184)
                                                                         + v5)) )
  {
    result = *(_DWORD *)(a2 + 184) + sub_10014D04(a2);
    v8 = v6 - result;
  }
  else
  {
    result = a3;
    v8 = v4 - *(_DWORD *)(a3 + 24) - *(_DWORD *)(a3 + 36);
  }
  v9 = 0;
  v16 = 0;
  if ( v8 )
  {
    v18 = 0;
    v10 = *(_DWORD *)(a2 + 16) + 36;
    do
    {
      result = v21;
      if ( v9 >= *(_DWORD *)(v21 + 24) )
        break;
      result = *(_DWORD *)(v10 - 8) - *(_DWORD *)v10;
      if ( *(_DWORD *)(v10 - 8) != *(_DWORD *)v10 )
      {
        v11 = 0;
        v20 = 0;
        if ( v8 )
        {
          v22 = 0;
          v12 = 0;
          result = 0;
          v19 = 0;
          do
          {
            if ( (unsigned int)v11 >= *(_DWORD *)(v10 - 32) )
              break;
            v13 = v12 + *(_DWORD *)(v10 + 12);
            if ( *(_DWORD *)v13 == 4 && !*(_DWORD *)(v13 + 40) )
            {
              if ( !*(_BYTE *)(v13 + 49) )
              {
                v14 = v22 + *(_DWORD *)(*(_DWORD *)(v21 + 72) + v18 + 32);
                v17 = v14;
                v15 = *(_DWORD *)(v14 + 16);
                if ( v15 > 1 )
                {
                  *(_DWORD *)(v17 + 16) = v15 - 1;
                  if ( *(_BYTE *)(v13 + 48) )
                    sub_10016456(v21, v10 - 36, v13, v18 + *(_DWORD *)(v21 + 72), v17, a3);
                  sub_1001DF7C(v3, v10 - 36, v20);
                  --v8;
                }
                v12 = v19;
              }
              result = v22;
            }
            v12 += 52;
            v11 = v20 + 1;
            v19 = v12;
            result += 36;
            ++v20;
            v22 = result;
          }
          while ( v8 );
          v9 = v16;
        }
      }
      v18 += 40;
      ++v9;
      v10 += 52;
      v16 = v9;
    }
    while ( v8 );
  }
  return result;
}

//----- (10014878) --------------------------------------------------------
void __thiscall sub_10014878(int this)
{
  int v1; // edi@1
  unsigned int v2; // esi@1
  int v3; // ebx@2
  int v4; // eax@3

  v1 = this;
  v2 = 0;
  if ( *(_DWORD *)(this + 8) )
  {
    do
    {
      v3 = *(_DWORD *)(*(_DWORD *)(v1 + 84) + 4 * v2);
      if ( *(_BYTE *)(v3 + 33) == 1 )
      {
        v4 = sub_1001301B(*(_DWORD *)(v3 + 16));
        *(_DWORD *)(v3 + 36) = sub_1001D551(*(void **)(v3 + 16), v4);
      }
      ++v2;
    }
    while ( v2 < *(_DWORD *)(v1 + 8) );
  }
}

//----- (100148AE) --------------------------------------------------------
char __thiscall sub_100148AE(void *this, int a2, int a3, char a4)
{
  void *v4; // esi@1
  LPVOID v5; // eax@1
  char result; // al@4

  v4 = this;
  v5 = sub_1000F0A6(8u);
  if ( v5 )
  {
    *(_DWORD *)v5 = off_10066530;
    *((_DWORD *)v5 + 1) = v4;
  }
  else
  {
    v5 = 0;
  }
  *((_DWORD *)v4 + 8) = v5;
  *((_DWORD *)v4 + 3) = a2;
  *((_DWORD *)v4 + 1) = a3;
  result = a4;
  *((_BYTE *)v4 + 8) = a4;
  return result;
}
// 10066530: using guessed type int (*off_10066530[2])();

//----- (100148ED) --------------------------------------------------------
unsigned int __thiscall sub_100148ED(void *this, int a2, unsigned __int16 a3, unsigned __int16 a4, unsigned int a5, int a6, char a7)
{
  int v7; // esi@1
  LPVOID v8; // eax@1
  int v9; // ebx@1
  unsigned int v10; // ecx@5
  unsigned __int16 i; // dx@5
  int v12; // edi@9
  unsigned int v13; // eax@9
  int v14; // ecx@9
  LPVOID v15; // eax@9
  void *v16; // ecx@10
  unsigned int v17; // eax@12
  unsigned int result; // eax@12
  int v19; // edx@12
  int v20; // edi@13
  int v21; // ecx@13
  int v22; // eax@16
  void *v23; // ecx@16
  char v24; // [sp-4h] [bp-14h]@16
  int v25; // [sp+Ch] [bp-4h]@16

  v7 = (int)this;
  v8 = sub_1000F0A6(8u);
  v9 = 0;
  if ( v8 )
  {
    *(_DWORD *)v8 = off_1006653C;
    *((_DWORD *)v8 + 1) = v7;
  }
  else
  {
    v8 = 0;
  }
  *(_DWORD *)(v7 + 36) = v8;
  *(_DWORD *)(v7 + 24) = a2;
  *(_DWORD *)(v7 + 16) = a3;
  *(_DWORD *)(v7 + 12) = a4;
  *(_DWORD *)v7 = a5;
  if ( a6 )
  {
    *(_DWORD *)(v7 + 4) = a6;
  }
  else
  {
    v10 = a5;
    for ( i = 0; v10; v10 &= v10 - 1 )
      ++i;
    *(_DWORD *)(v7 + 4) = i;
  }
  v12 = *(_DWORD *)(v7 + 4);
  v13 = *(_DWORD *)(v7 + 4);
  *(_DWORD *)(v7 + 8) = 0;
  v14 = 36 * v13 | -(36 * (unsigned __int64)v13 >> 32 != 0);
  v15 = sub_1000F40E((v14 + 4) | -__CFADD__(v14, 4));
  if ( v15 )
  {
    *(_DWORD *)v15 = v12;
    v16 = (char *)v15 + 4;
  }
  else
  {
    v16 = 0;
  }
  v17 = 36 * *(_DWORD *)(v7 + 4);
  *(_DWORD *)(v7 + 32) = v16;
  result = (unsigned int)sub_10028330(v16, 0, v17);
  v19 = 0;
  if ( *(_DWORD *)(v7 + 4) > 0u )
  {
    result = a5;
    v20 = 0;
    v21 = a6;
    while ( !v21 )
    {
      if ( result & 1 )
      {
        v22 = *(_DWORD *)(v7 + 12);
        v23 = (void *)(v20 + *(_DWORD *)(v7 + 32));
        v25 = v19 + 1;
        v24 = v9;
LABEL_18:
        v20 += 36;
        sub_100148AE(v23, v7, v9 + (v22 << 8), v24);
        v21 = a6;
        v19 = v25;
        result = a5;
      }
      result >>= 1;
      ++v9;
      a5 = result;
      if ( (unsigned int)v19 >= *(_DWORD *)(v7 + 4) )
        return result;
    }
    v23 = (void *)(v20 + *(_DWORD *)(v7 + 32));
    v24 = v9 + a7;
    v25 = v19 + 1;
    v22 = a3 + (*(_DWORD *)(v7 + 12) << 8);
    goto LABEL_18;
  }
  return result;
}
// 1006653C: using guessed type int (*off_1006653C[5])();

//----- (10014A0A) --------------------------------------------------------
void *__thiscall sub_10014A0A(int this)
{
  int v1; // esi@1
  unsigned int v2; // eax@1
  void *v3; // ST10_4@3
  void *result; // eax@5

  v1 = this;
  v2 = *(_DWORD *)(this + 12);
  if ( v2 < *(_DWORD *)(this + 8) )
  {
    do
      v2 *= 2;
    while ( v2 < *(_DWORD *)(this + 8) );
    v3 = *(void **)(this + 84);
    *(_DWORD *)(this + 12) = v2;
    sub_1000F0A1(v3);
    sub_1000F0A1(*(LPVOID *)(v1 + 88));
    sub_1000F0A1(*(LPVOID *)(v1 + 92));
    *(_DWORD *)(v1 + 84) = sub_1000F40E(4 * *(_DWORD *)(v1 + 12) | -((unsigned __int64)*(_DWORD *)(v1 + 12) >> 30 != 0));
    if ( *(_DWORD *)(v1 + 88) )
    {
      *(_DWORD *)(v1 + 88) = sub_1000F40E(4 * *(_DWORD *)(v1 + 12) | -((unsigned __int64)*(_DWORD *)(v1 + 12) >> 30 != 0));
      *(_DWORD *)(v1 + 92) = sub_1000F40E(4 * *(_DWORD *)(v1 + 12) | -((unsigned __int64)*(_DWORD *)(v1 + 12) >> 30 != 0));
    }
  }
  result = sub_10028330(*(void **)(v1 + 84), 0, 4 * *(_DWORD *)(v1 + 8));
  if ( *(_DWORD *)(v1 + 88) )
  {
    sub_10028330(*(void **)(v1 + 88), 0, 4 * *(_DWORD *)(v1 + 8));
    result = sub_10028330(*(void **)(v1 + 92), 0, 4 * *(_DWORD *)(v1 + 8));
  }
  return result;
}

//----- (10014ACC) --------------------------------------------------------
char __cdecl sub_10014ACC(char a1)
{
  int v1; // ebp@0
  signed int v2; // eax@1
  int v3; // ecx@3
  LPVOID v4; // edi@6
  int v5; // esi@6
  DWORD v6; // ecx@6
  int v7; // edx@6
  int v8; // ebx@6
  int v9; // ebx@8
  int v10; // ecx@9
  unsigned __int16 v11; // dx@10
  char result; // al@20
  int v13; // esi@24
  DWORD v14; // eax@24
  int v15; // ecx@24
  int v16; // ebx@24
  int v17; // edi@24
  int v18; // ecx@26
  unsigned __int16 v19; // dx@27
  ULONG_PTR v20; // ecx@42
  unsigned __int16 i; // dx@44
  int v22; // [sp+0h] [bp-10h]@6
  int v23; // [sp+4h] [bp-Ch]@6
  int v24; // [sp+4h] [bp-Ch]@24
  int v25; // [sp+8h] [bp-8h]@6
  signed int v26; // [sp+8h] [bp-8h]@8
  DWORD v27; // [sp+Ch] [bp-4h]@6
  DWORD v28; // [sp+Ch] [bp-4h]@24

  v2 = dword_1007C568;
  if ( !dword_1007C568 )
  {
    sub_10015DBD();
    v2 = dword_1007C568;
  }
  v3 = dword_1007C550;
  if ( !dword_1007C550 )
  {
    sub_10012A81(v1);
    v2 = dword_1007C568;
    v3 = dword_1007C550;
  }
  if ( v2 >= 4 )
  {
    sub_100145DD(0xFFFF);
    v4 = dword_1007C570;
    v5 = 0;
    v6 = 0;
    v25 = 0;
    v7 = 0;
    v27 = 0;
    v8 = 0;
    v23 = 0;
    v22 = 0;
    if ( ReturnedLength )
    {
      do
      {
        if ( *(_DWORD *)v4 == 3 )
        {
          v26 = 0;
          v9 = (int)((char *)v4 + 32);
          do
          {
            sub_10012A48(v9);
            v10 = *(_DWORD *)v9;
            if ( *(_DWORD *)v9 )
            {
              ++v5;
              v11 = 0;
              do
              {
                ++v11;
                v10 &= v10 - 1;
              }
              while ( v10 );
              v23 += v11;
            }
            v9 += 12;
            ++v26;
          }
          while ( v26 < *((_WORD *)v4 + 15) );
          v8 = v22;
          v6 = v27;
          v25 = v5;
        }
        if ( *(_DWORD *)v4 == 1 )
        {
          sub_10012A48((int)((char *)v4 + 32));
          v5 = v25;
          v6 = v27;
          if ( *((_DWORD *)v4 + 8) )
          {
            ++v8;
            v22 = v8;
          }
        }
        v6 += *((_DWORD *)v4 + 1);
        v4 = (char *)v4 + *((_DWORD *)v4 + 1);
        v27 = v6;
      }
      while ( v6 < ReturnedLength );
      v7 = v23;
    }
    dword_1007C560 = v5;
    result = v5 > (unsigned int)v8;
    byte_1007C55C = v5 > (unsigned int)v8;
    if ( v5 <= (unsigned int)v8 )
      dword_1007C560 = v8;
    dword_1007C558 = v7;
    dword_1007C564 = v8;
LABEL_39:
    if ( !a1 )
      result = sub_10012BA1();
    goto LABEL_47;
  }
  if ( v2 == 3 )
  {
    sub_100145DD(0xFFFF);
    v13 = (int)dword_1007C570;
    v14 = 0;
    v15 = 0;
    v28 = 0;
    v16 = 0;
    v24 = 0;
    v17 = 0;
    if ( ReturnedLength )
    {
      do
      {
        if ( *(_DWORD *)(v13 + 4) == 3 )
        {
          sub_10012A17(v13);
          v18 = *(_DWORD *)v13;
          if ( *(_DWORD *)v13 )
          {
            ++v16;
            v19 = 0;
            do
            {
              ++v19;
              v18 &= v18 - 1;
            }
            while ( v18 );
            v24 += v19;
          }
          v14 = v28;
        }
        if ( *(_DWORD *)(v13 + 4) == 1 )
        {
          sub_10012A17(v13);
          v14 = v28;
          if ( *(_DWORD *)v13 )
            ++v17;
        }
        v14 += 24;
        v13 += 24;
        v28 = v14;
      }
      while ( v14 < ReturnedLength );
      v15 = v24;
    }
    dword_1007C560 = v16;
    result = v16 > (unsigned int)v17;
    byte_1007C55C = v16 > (unsigned int)v17;
    if ( v16 <= (unsigned int)v17 )
      dword_1007C560 = v17;
    dword_1007C558 = v15;
    dword_1007C564 = v17;
    goto LABEL_39;
  }
  byte_1007C55C = 0;
  dword_1007C560 = 1;
  if ( v3 )
  {
    sub_10012A81(v1);
    v20 = *(_DWORD *)sub_10014310(dword_1007C550, 0) & ProcessAffinityMask;
  }
  else
  {
    v20 = ProcessAffinityMask;
  }
  for ( i = 0; v20; v20 &= v20 - 1 )
    ++i;
  result = i;
  dword_1007C558 = i;
  dword_1007C564 = 1;
LABEL_47:
  if ( dword_1007C554 )
    result = (unsigned int)sub_100128C0(dword_1007C554, 1);
  dword_1007C554 = 0;
  return result;
}
// 1007C550: using guessed type int dword_1007C550;
// 1007C558: using guessed type int dword_1007C558;
// 1007C55C: using guessed type char byte_1007C55C;
// 1007C560: using guessed type int dword_1007C560;
// 1007C564: using guessed type int dword_1007C564;
// 1007C568: using guessed type int dword_1007C568;

//----- (10014D04) --------------------------------------------------------
int __thiscall sub_10014D04(int this)
{
  int result; // eax@1
  int v2; // ecx@1

  result = *(_DWORD *)(this + 172) - *(_DWORD *)(this + 184);
  v2 = *(_DWORD *)(this + 132);
  if ( result <= (unsigned int)v2 )
    result = v2;
  return result;
}

//----- (10014D1D) --------------------------------------------------------
int __thiscall sub_10014D1D(void *this, int a2, int a3, char a4)
{
  int v4; // ebp@0
  int v5; // edi@1
  unsigned int v6; // ebx@3
  int v7; // ecx@4
  int v8; // eax@5
  int v9; // eax@6
  int v10; // ebx@18
  unsigned int v12; // [sp+Ch] [bp-14h]@3
  int v13; // [sp+10h] [bp-10h]@4
  int v14; // [sp+14h] [bp-Ch]@7
  unsigned int v15; // [sp+18h] [bp-8h]@4
  char v16; // [sp+1Fh] [bp-1h]@9

  v5 = (int)this;
  if ( (_BYTE)a3 )
    *(_DWORD *)(a2 + 16) = sub_10012D1B(v4);
  v6 = 0;
  v12 = *(_DWORD *)(a2 + 160);
  if ( a4 )
  {
    v13 = sub_10012CEE(a2);
    v7 = sub_10012CCB(a2);
    v15 = v7;
    if ( (_BYTE)a3 )
    {
      v8 = v13;
    }
    else
    {
      v9 = sub_10014D04(a2);
      v7 = (unsigned int)(*(_DWORD *)(a2 + 184) + v9) < *(_DWORD *)(v5 + 28);
      v15 = (unsigned int)(*(_DWORD *)(a2 + 184) + v9) < *(_DWORD *)(v5 + 28);
      v8 = v12 < v13;
    }
    v14 = v8;
  }
  else
  {
    v13 = *(_DWORD *)(a2 + 184) + sub_10014D04(a2);
    v14 = v13;
    v7 = sub_1001301B(a2);
    v15 = v7;
  }
  v16 = 0;
  if ( v7 )
  {
    sub_1001625E(v5, a2, a4);
    sub_10015138(v5);
    v6 = sub_10015B8E((void *)v5, a2, v15, 0);
    if ( v6 < v15 && ((_BYTE)a3 || v14) )
    {
      v16 = 1;
      v6 += sub_10015847(v5, a2, v15 - v6, -2);
      if ( v6 < v15 )
      {
        v6 += sub_10015376(v5, a2, v6 + v12, v13, v12 + v15);
        if ( v6 < v14 )
        {
          v6 += sub_10015847(v5, a2, v14 - v6, -1);
          if ( v6 < v14 )
            v6 += sub_10015B58((void *)v5, a2, v14 - v6);
        }
      }
    }
    sub_10015D64(v5);
  }
  v10 = sub_1001DAE6(a2, v6, a3, a4);
  if ( v16 )
    sub_10012BBC((void *)v5, a2);
  return v10;
}

//----- (10014E75) --------------------------------------------------------
int __thiscall sub_10014E75(int this, int a2, int a3, int a4)
{
  int result; // eax@1
  int v5; // esi@1
  unsigned int v6; // ebx@2
  int v7; // esi@3
  unsigned int v8; // ecx@6
  int v9; // edx@7
  bool v10; // zf@7
  int v11; // [sp+8h] [bp-18h]@3
  unsigned int v12; // [sp+Ch] [bp-14h]@2
  int v13; // [sp+10h] [bp-10h]@1
  int v14; // [sp+14h] [bp-Ch]@6
  int v15; // [sp+18h] [bp-8h]@6
  unsigned int v16; // [sp+1Ch] [bp-4h]@5

  v13 = this;
  *(_DWORD *)a4 = a2;
  result = a3;
  *(double *)(a4 + 8) = 0.0;
  *(_DWORD *)(a4 + 16) = a3;
  v5 = *(_DWORD *)(a3 + 16);
  if ( v5 )
  {
    v6 = 0;
    v12 = 0;
    if ( *(_DWORD *)(this + 24) )
    {
      result = 0;
      v7 = v5 + 44;
      v11 = 0;
      do
      {
        *(_DWORD *)(v7 - 4) = 0;
        *(_DWORD *)v7 = 0;
        if ( *(_DWORD *)(v7 - 16) > 0u )
        {
          v16 = 0;
          if ( *(_DWORD *)(v7 - 40) > 0u )
          {
            v8 = 0;
            v14 = 0;
            v15 = 0;
            do
            {
              v9 = v15 + *(_DWORD *)(v7 + 4);
              v10 = *(_DWORD *)v9 == 4;
              *(_BYTE *)(v9 + 48) = 0;
              if ( v10 && !*(_DWORD *)(v9 + 24) )
              {
                sub_10016456(
                  v13,
                  v7 - 44,
                  v9,
                  result + *(_DWORD *)(v13 + 72),
                  v14 + *(_DWORD *)(result + *(_DWORD *)(v13 + 72) + 32),
                  a4);
                result = v11;
                v8 = v16;
              }
              v15 += 52;
              ++v8;
              v14 += 36;
              v16 = v8;
            }
            while ( v8 < *(_DWORD *)(v7 - 40) );
            v6 = v12;
            this = v13;
          }
        }
        ++v6;
        result += 40;
        v7 += 52;
        v12 = v6;
        v11 = result;
      }
      while ( v6 < *(_DWORD *)(this + 24) );
    }
  }
  return result;
}

//----- (10014F3D) --------------------------------------------------------
void *__thiscall sub_10014F3D(int this)
{
  int v1; // edi@1
  void *result; // eax@1
  int v3; // esi@1
  int v4; // esi@2
  int v5; // ebx@5
  int v6; // eax@6
  int v7; // edi@6
  int v8; // ebx@6
  int v9; // esi@6
  int v10; // edx@6
  int v11; // eax@6
  unsigned int v12; // edi@10
  char v13; // al@12
  int v14; // ecx@13
  int v15; // [sp+8h] [bp-18h]@1
  unsigned int v16; // [sp+Ch] [bp-14h]@6
  int v17; // [sp+10h] [bp-10h]@6
  int v18; // [sp+14h] [bp-Ch]@1
  int v19; // [sp+18h] [bp-8h]@6
  int i; // [sp+1Ch] [bp-4h]@4

  v18 = 0;
  v1 = this;
  v15 = this;
  result = sub_10014A0A(this);
  v3 = *(_DWORD *)(v1 + 100);
  if ( v3 )
    v4 = *(_DWORD *)(v3 + 24);
  else
    v4 = 0;
  for ( i = v4; v4; i = v4 )
  {
    v5 = v4 + 64;
    sub_10028330((void *)(v4 + 64), 0, 0x38u);
    sub_10014E75(v1, v18, v4, v4 + 64);
    if ( *(_BYTE *)(v4 + 204) )
    {
      v6 = *(_DWORD *)(v4 + 120);
      v7 = *(_DWORD *)(v4 + 8);
      v8 = *(_DWORD *)(v4 + 160);
      v16 = 0;
      v17 = 0;
      v19 = v6;
      v9 = *(_DWORD *)v7;
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v7 + 4));
      (*(void (__thiscall **)(int, int *, int *, int *))(v9 + 4))(v7, &v16, &v17, &v19);
      v4 = i;
      v11 = sub_1001CE79(*(_DWORD *)(i + 56), v10, v8, v16, v17, v19);
      v5 = v4 + 64;
      *(_DWORD *)(v4 + 100) = v11;
      if ( (unsigned int)v11 > *(_DWORD *)(v4 + 160) )
        *(_DWORD *)(v4 + 100) = sub_1001D551((void *)v4, v11);
      *(_DWORD *)(v4 + 120) = v19;
    }
    else
    {
      *(_DWORD *)(v4 + 100) = *(_DWORD *)(v4 + 160);
    }
    v12 = *(_DWORD *)(v4 + 160);
    if ( v12 )
    {
      if ( *(_DWORD *)(v5 + 20) )
        goto LABEL_12;
    }
    else if ( !*(_DWORD *)(v4 + 196) )
    {
      goto LABEL_12;
    }
    if ( v12 <= *(_DWORD *)(v5 + 36) && v12 < sub_1001301B(v4) )
    {
      v13 = 1;
      goto LABEL_13;
    }
LABEL_12:
    v13 = 0;
LABEL_13:
    v1 = v15;
    v14 = v18;
    *(_BYTE *)(v5 + 33) = v13;
    result = *(void **)(v15 + 84);
    *((_DWORD *)result + v14) = v5;
    v18 = v14 + 1;
    if ( v4 == *(_DWORD *)(v15 + 100) )
      v4 = 0;
    else
      v4 = *(_DWORD *)(v4 + 24);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10015065) --------------------------------------------------------
void __fastcall sub_10015065(int a1)
{
  unsigned int v1; // ebx@1
  int v2; // eax@2
  int v3; // edi@2
  int v4; // esi@2
  int v5; // edx@7
  unsigned int v6; // eax@14
  int v7; // [sp+4h] [bp-8h]@5
  unsigned int v8; // [sp+4h] [bp-8h]@10
  int v9; // [sp+8h] [bp-4h]@1

  v1 = 0;
  v9 = a1;
  if ( *(_DWORD *)(a1 + 8) )
  {
    do
    {
      v2 = *(_DWORD *)(a1 + 84);
      v3 = *(_DWORD *)(v2 + 4 * v1);
      v4 = *(_DWORD *)(v3 + 16);
      if ( *(_DWORD *)(v4 + 168) )
        sub_10014606(a1, v4, *(_DWORD *)(v2 + 4 * v1));
      if ( *(_DWORD *)(v3 + 20) )
      {
        v7 = *(_DWORD *)(v4 + 160);
        if ( *(_DWORD *)(v3 + 36) > (unsigned int)(v7 - *(_DWORD *)(v3 + 20)) )
        {
          if ( *(_DWORD *)(v4 + 184) + sub_10014D04(v4) <= (unsigned int)(v7 - *(_DWORD *)(v3 + 20)) )
            v5 = v7 - *(_DWORD *)(v3 + 20);
          else
            v5 = *(_DWORD *)(v4 + 184) + sub_10014D04(v4);
          *(_DWORD *)(v3 + 36) = v5;
        }
      }
      v8 = *(_DWORD *)(v4 + 160);
      if ( *(_DWORD *)(v3 + 36) < v8 && v8 - *(_DWORD *)(v4 + 168) > *(_DWORD *)(v4 + 184) + sub_10014D04(v4) )
        sub_10014721((void *)v9, v4, v3);
      if ( !*(_BYTE *)(v4 + 204) )
      {
        v6 = *(_DWORD *)(v4 + 160);
        if ( *(_DWORD *)(v3 + 36) > v6 )
          *(_DWORD *)(v3 + 36) = v6;
      }
      a1 = v9;
      ++v1;
    }
    while ( v1 < *(_DWORD *)(v9 + 8) );
  }
}

//----- (10015138) --------------------------------------------------------
unsigned int __thiscall sub_10015138(int this)
{
  int v1; // edi@1
  unsigned int v2; // esi@1
  unsigned int result; // eax@2
  int v4; // ecx@2

  v1 = this;
  v2 = 0;
  if ( *(_DWORD *)(this + 8) )
  {
    do
    {
      result = *(_DWORD *)(*(_DWORD *)(v1 + 84) + 4 * v2);
      v4 = *(_DWORD *)(result + 16);
      if ( *(_DWORD *)(v4 + 168) )
        result = sub_10014606(v1, v4, *(_DWORD *)(*(_DWORD *)(v1 + 84) + 4 * v2));
      ++v2;
    }
    while ( v2 < *(_DWORD *)(v1 + 8) );
  }
  return result;
}

//----- (10015167) --------------------------------------------------------
unsigned int __thiscall sub_10015167(void *this, unsigned int a2)
{
  unsigned int v2; // esi@1
  void *v3; // edi@1
  unsigned int v4; // ecx@1
  int v5; // edx@3
  int v6; // ebx@3
  int v7; // eax@6
  unsigned int v8; // ecx@7
  int v9; // eax@9
  unsigned int v10; // ebx@10
  int v11; // edx@11
  int v12; // eax@14
  int v13; // edx@16
  int v14; // ebx@16
  int v15; // ebx@21
  int v16; // edx@22
  int v17; // ecx@23
  int v18; // edi@23
  int v19; // ebx@23
  bool v20; // zf@27
  int v21; // ecx@28
  int v22; // edx@28
  int v23; // ecx@29
  int v24; // eax@29
  int v25; // edx@29
  int v26; // eax@29
  int v27; // edx@29
  int v28; // esi@30
  int v29; // eax@31
  int v30; // eax@31
  int v31; // ecx@31
  int v32; // ebx@32
  int v33; // edi@32
  int v34; // edx@32
  int v35; // eax@33
  unsigned int v36; // eax@33
  unsigned int v37; // eax@35
  unsigned int v39; // [sp+Ch] [bp-2Ch]@7
  int v40; // [sp+10h] [bp-28h]@22
  int v41; // [sp+14h] [bp-24h]@31
  unsigned int v42; // [sp+18h] [bp-20h]@31
  int v43; // [sp+1Ch] [bp-1Ch]@31
  int v44; // [sp+20h] [bp-18h]@23
  int v45; // [sp+20h] [bp-18h]@29
  int v46; // [sp+24h] [bp-14h]@31
  void *v47; // [sp+28h] [bp-10h]@1
  int v48; // [sp+2Ch] [bp-Ch]@21
  int v49; // [sp+30h] [bp-8h]@33
  int v50; // [sp+30h] [bp-8h]@41
  int v51; // [sp+34h] [bp-4h]@27
  int v52; // [sp+34h] [bp-4h]@29

  v2 = a2;
  v3 = this;
  v4 = 0;
  v47 = v3;
  if ( a2 )
  {
    if ( a2 <= 0 )
      goto LABEL_6;
    do
    {
      do
      {
        v5 = *((_DWORD *)v3 + 23);
        v6 = *(_DWORD *)(v5 + 4 * v4);
        if ( *(_DWORD *)(v6 + 4) )
          break;
        --v2;
        *(_DWORD *)(v5 + 4 * v4) = *(_DWORD *)(v5 + 4 * v2);
        *(_DWORD *)(*((_DWORD *)v3 + 23) + 4 * v2) = v6;
      }
      while ( v4 < v2 );
      a2 = v2;
LABEL_6:
      *(_DWORD *)(*(_DWORD *)(*((_DWORD *)v3 + 23) + 4 * v4) + 40) = 0;
      *(_DWORD *)(*(_DWORD *)(*((_DWORD *)v3 + 23) + 4 * v4) + 44) = 0;
      v7 = *(_DWORD *)(*((_DWORD *)v3 + 23) + 4 * v4++);
      *(_BYTE *)(v7 + 32) = 1;
    }
    while ( v4 < v2 );
  }
  v8 = 0;
  v39 = v2;
  if ( v2 )
  {
    if ( v2 <= 0 )
      goto LABEL_20;
    do
    {
      do
      {
        v9 = *(_DWORD *)(*((_DWORD *)v3 + 23) + 4 * v8);
        if ( *(_DWORD *)(v9 + 40) )
          break;
        v10 = 0;
        if ( *((_DWORD *)v3 + 6) )
        {
          v11 = *(_DWORD *)(*(_DWORD *)(v9 + 16) + 16) + 28;
          do
          {
            if ( *(_DWORD *)v11 && *(_DWORD *)v11 < *(_DWORD *)(v11 - 24) )
            {
              v12 = *(_DWORD *)(*((_DWORD *)v3 + 23) + 4 * v8);
              ++*(_DWORD *)(v12 + 40);
            }
            ++v10;
            v11 += 52;
          }
          while ( v10 < *((_DWORD *)v3 + 6) );
        }
        v13 = *((_DWORD *)v3 + 23);
        v14 = *(_DWORD *)(v13 + 4 * v8);
        if ( !*(_DWORD *)(v14 + 40) )
        {
          --v2;
          *(_DWORD *)(v13 + 4 * v8) = *(_DWORD *)(v13 + 4 * v2);
          *(_DWORD *)(*((_DWORD *)v3 + 23) + 4 * v2) = v14;
        }
      }
      while ( v8 < v2 );
      a2 = v2;
LABEL_20:
      ++v8;
    }
    while ( v8 < v2 );
  }
  v15 = 0;
  v48 = 0;
  if ( v2 )
  {
    do
    {
      v40 = v15 + 1;
      v16 = v15 + 1;
      if ( v15 + 1 < v2 )
      {
        v17 = *((_DWORD *)v3 + 23);
        v18 = v15;
        v44 = v17;
        v19 = 4 * v15;
        do
        {
          if ( *(_DWORD *)(*(_DWORD *)(v17 + 4 * v16) + 40) < *(_DWORD *)(*(_DWORD *)(v19 + v17) + 40) )
          {
            v18 = v16;
            v19 = 4 * v16;
          }
          v17 = v44;
          ++v16;
        }
        while ( v16 < v2 );
        v15 = v48;
        v20 = v48 == v18;
        v51 = v18;
        v3 = v47;
        if ( !v20 )
        {
          v21 = *((_DWORD *)v47 + 23);
          v22 = *(_DWORD *)(v21 + 4 * v48);
          *(_DWORD *)(v21 + 4 * v48) = *(_DWORD *)(v21 + 4 * v51);
          *(_DWORD *)(*((_DWORD *)v47 + 23) + 4 * v51) = v22;
        }
      }
      v23 = *(_DWORD *)(*((_DWORD *)v3 + 23) + 4 * v15);
      v24 = *(_DWORD *)(v23 + 16);
      v25 = *(_DWORD *)(v24 + 16);
      v26 = *(_DWORD *)(v24 + 20);
      v52 = v25;
      v27 = 0;
      v45 = 0;
      if ( *(_DWORD *)(v23 + 40) )
      {
        v28 = v26;
        do
        {
          v29 = *(_DWORD *)(v28 + 4 * v27);
          v41 = v29;
          v43 = v52 + 52 * v29;
          v42 = *((_DWORD *)v3 + 6);
          v30 = v27 + 1;
          v31 = v27 + 1;
          v46 = v27 + 1;
          if ( (unsigned int)(v27 + 1) < *((_DWORD *)v3 + 6) )
          {
            v32 = v43;
            v33 = v27;
            v34 = v52;
            do
            {
              v35 = v34 + 52 * *(_DWORD *)(v28 + 4 * v31);
              v49 = v35;
              v36 = *(_DWORD *)(v35 + 28);
              if ( v36 )
              {
                if ( v36 < *(_DWORD *)(v49 + 4) )
                {
                  v37 = *(_DWORD *)(v32 + 28);
                  if ( !v37 || v37 >= *(_DWORD *)(v32 + 4) || *(_DWORD *)(v49 + 28) > v37 )
                  {
                    v32 = v49;
                    v33 = v31;
                  }
                }
                v34 = v52;
              }
              ++v31;
            }
            while ( v31 < v42 );
            v20 = v45 == v33;
            v15 = v48;
            v50 = v33;
            v3 = v47;
            if ( !v20 )
            {
              *(_DWORD *)(v28 + 4 * v45) = *(_DWORD *)(v28 + 4 * v50);
              *(_DWORD *)(v28 + 4 * v50) = v41;
            }
            v30 = v46;
          }
          v27 = v30;
          v45 = v30;
        }
        while ( (unsigned int)v30 < *(_DWORD *)(*(_DWORD *)(*((_DWORD *)v3 + 23) + 4 * v15) + 40) );
        v2 = a2;
      }
      v15 = v40;
      v48 = v40;
    }
    while ( v40 < v2 );
  }
  return v39;
}

//----- (10015376) --------------------------------------------------------
unsigned int __thiscall sub_10015376(int this, int a2, unsigned int a3, unsigned int a4, unsigned int a5)
{
  int v5; // eax@1
  unsigned int v6; // ecx@1
  unsigned int v7; // esi@2
  unsigned int v8; // ebx@2
  int v9; // edi@2
  int v10; // ST40_4@3
  int v11; // eax@3
  int v12; // ecx@3
  int v13; // eax@4
  signed int v14; // ebx@7
  LPVOID v15; // eax@9
  int v16; // edi@9
  int v17; // ecx@9
  double v18; // st7@9
  int v19; // esi@10
  signed int v20; // edi@10
  double v21; // st6@16
  double v22; // st7@17
  unsigned int v23; // ecx@17
  int v24; // eax@18
  char v25; // dl@19
  signed int v26; // ecx@19
  unsigned int v27; // edi@20
  bool v28; // cf@20
  bool v29; // zf@20
  double v30; // st7@21
  double v31; // st6@21
  int v32; // eax@25
  double v33; // st7@27
  char v34; // dl@27
  double v35; // st7@27
  double v36; // st6@27
  int v37; // eax@31
  int v38; // eax@32
  int v39; // eax@32
  double v40; // st7@33
  char v41; // cl@33
  double v42; // st7@33
  double v43; // st6@33
  unsigned int v44; // ecx@37
  int v45; // eax@39
  int v46; // edx@39
  double v48; // [sp+4h] [bp-44h]@17
  double v49; // [sp+Ch] [bp-3Ch]@16
  double v50; // [sp+14h] [bp-34h]@9
  int v51; // [sp+20h] [bp-28h]@26
  unsigned int v52; // [sp+24h] [bp-24h]@1
  int v53; // [sp+2Ch] [bp-1Ch]@3
  int v54; // [sp+2Ch] [bp-1Ch]@11
  int v55; // [sp+2Ch] [bp-1Ch]@20
  int v56; // [sp+2Ch] [bp-1Ch]@26
  int v57; // [sp+2Ch] [bp-1Ch]@31
  int v58; // [sp+30h] [bp-18h]@25
  int v59; // [sp+30h] [bp-18h]@32
  int v60; // [sp+34h] [bp-14h]@2
  unsigned int v61; // [sp+34h] [bp-14h]@7
  int v62; // [sp+34h] [bp-14h]@20
  unsigned int v63; // [sp+34h] [bp-14h]@26
  int v64; // [sp+34h] [bp-14h]@32
  int v65; // [sp+38h] [bp-10h]@3
  int v66; // [sp+38h] [bp-10h]@9
  int v67; // [sp+3Ch] [bp-Ch]@1
  unsigned int v68; // [sp+40h] [bp-8h]@2
  char v69; // [sp+47h] [bp-1h]@19
  unsigned int v70; // [sp+58h] [bp+10h]@7

  v52 = 0;
  v5 = this;
  v67 = this;
  v6 = *(_DWORD *)(this + 8);
  if ( v6 > 1 )
  {
    v7 = 1;
    v8 = a4;
    v9 = *(_DWORD *)(v5 + 84) + 4;
    v68 = a3;
    v60 = v6 - 1;
    do
    {
      v10 = *(_DWORD *)(*(_DWORD *)v9 + 16);
      v65 = *(_DWORD *)(v10 + 184);
      v11 = sub_10014D04(*(_DWORD *)(*(_DWORD *)v9 + 16));
      v12 = v10;
      v53 = *(_DWORD *)(v10 + 160) - *(_DWORD *)(v10 + 168);
      if ( v53 <= (unsigned int)(v65 + v11) )
      {
        v13 = v68;
      }
      else
      {
        ++v7;
        v8 += v65 + sub_10014D04(v12);
        v13 = v53 + v68;
        v68 += v53;
      }
      v9 += 4;
      --v60;
    }
    while ( v60 );
    v70 = v8;
    v14 = 1;
    v61 = v7;
    if ( v7 > 1 && v70 <= v13 )
    {
      v15 = sub_1000F40E(4 * v7 | -((unsigned __int64)v7 >> 30 != 0));
      v16 = (int)v15;
      v66 = (int)v15;
      v17 = **(_DWORD **)(v67 + 84);
      *(_DWORD *)v15 = v17;
      *(double *)(v17 + 32) = (double)a5;
      v18 = *(double *)(*(_DWORD *)v15 + 32) + 0.0;
      v50 = v18;
      if ( *(_DWORD *)(v67 + 8) > 1u )
      {
        v19 = (int)((char *)v15 + 4);
        v20 = 1;
        do
        {
          v54 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v67 + 84) + 4 * v20) + 16);
          if ( *(_DWORD *)(v54 + 160) - *(_DWORD *)(v54 + 168) <= (unsigned int)(*(_DWORD *)(v54 + 184)
                                                                               + sub_10014D04(v54)) )
          {
            v18 = v50;
          }
          else
          {
            *(_DWORD *)v19 = v54 + 64;
            v19 += 4;
            v18 = *(double *)(v54 + 96) + v50;
            v50 = v18;
          }
          ++v20;
        }
        while ( (unsigned int)v20 < *(_DWORD *)(v67 + 8) );
        v7 = v61;
        v16 = v66;
        v14 = 1;
      }
      v21 = (double)v68;
      v49 = v21;
      while ( 1 )
      {
        v22 = v21 / v18;
        v23 = 0;
        v48 = v22;
        if ( v7 )
        {
          do
          {
            v24 = *(_DWORD *)(v16 + 4 * v23++);
            *(double *)(v24 + 8) = *(double *)(v24 + 32) * v22;
          }
          while ( v23 < v7 );
        }
        sub_10015EAD(v16, v7);
        v25 = 0;
        v69 = 0;
        v26 = 1;
        if ( v7 <= 1 )
          goto LABEL_48;
        do
        {
          v62 = *(_DWORD *)(v16 + 4 * v26);
          v55 = *(_DWORD *)(*(_DWORD *)(v62 + 16) + 160) - *(_DWORD *)(*(_DWORD *)(v62 + 16) + 168);
          v27 = *(_DWORD *)(v62 + 4);
          v28 = v27 < v55;
          v29 = v27 == v55;
          v16 = v66;
          if ( v28 || v29 )
          {
            v18 = v50;
          }
          else
          {
            v25 = v14;
            v30 = (double)(unsigned int)v55 / (double)*(unsigned int *)(v62 + 4);
            v50 = v50 - (1.0 - v30) * *(double *)(v62 + 32);
            v31 = v30 * *(double *)(v62 + 32);
            v18 = v50;
            *(double *)(v62 + 32) = v31;
          }
          ++v26;
        }
        while ( v26 < v7 );
        v21 = v49;
        v69 = v25;
        if ( !v25 )
        {
LABEL_48:
          v32 = 0;
          v58 = 0;
          if ( !v7 )
            goto LABEL_49;
          do
          {
            v51 = *(_DWORD *)(v16 + 4 * v32);
            v56 = *(_DWORD *)(v51 + 16);
            v63 = *(_DWORD *)(v51 + 4);
            if ( v63 <= sub_1001301B(v56) )
            {
              v18 = v50;
              v34 = v69;
            }
            else
            {
              v33 = (double)(unsigned int)sub_1001301B(v56);
              v34 = v14;
              v35 = v33 / (double)v63;
              v69 = v14;
              v50 = v50 - (1.0 - v35) * *(double *)(v51 + 32);
              v36 = v35 * *(double *)(v51 + 32);
              v18 = v50;
              *(double *)(v51 + 32) = v36;
            }
            v32 = v58 + 1;
            v58 = v32;
          }
          while ( v32 < v7 );
          v21 = v49;
          if ( !v34 )
          {
LABEL_49:
            v37 = 0;
            v57 = 0;
            if ( !v7 )
              break;
            do
            {
              v38 = *(_DWORD *)(v16 + 4 * v37);
              v64 = v38;
              v39 = *(_DWORD *)(v38 + 16);
              v59 = *(_DWORD *)(v39 + 184);
              if ( (unsigned int)(v59 + sub_10014D04(v39)) <= *(_DWORD *)(v64 + 4) )
              {
                v18 = v50;
                v41 = v69;
              }
              else
              {
                v40 = (double)(unsigned int)(v59 + sub_10014D04(*(_DWORD *)(v64 + 16)));
                v41 = v14;
                v42 = v40 / v48;
                v69 = v14;
                v50 = v42 - *(double *)(v64 + 32) + v50;
                v43 = v42;
                v18 = v50;
                *(double *)(v64 + 32) = v43;
              }
              v37 = v57 + 1;
              v57 = v37;
            }
            while ( v37 < v7 );
            v21 = v49;
            if ( !v41 )
              break;
          }
        }
      }
      v44 = a3;
      if ( *(_DWORD *)(*(_DWORD *)v16 + 4) > a3 )
      {
        if ( v7 > 1 )
        {
          do
          {
            v45 = *(_DWORD *)(v16 + 4 * v14);
            v46 = *(_DWORD *)(v45 + 16);
            if ( *(_DWORD *)(v46 + 160) - *(_DWORD *)(v45 + 4) != *(_DWORD *)(v46 + 168) )
              sub_1001589E(v67, a2, v46, *(_DWORD *)(v46 + 160) - *(_DWORD *)(v45 + 4) - *(_DWORD *)(v46 + 168));
            ++v14;
          }
          while ( v14 < v7 );
          v44 = a3;
        }
        v52 = sub_10015B8E((void *)v67, a2, *(_DWORD *)(*(_DWORD *)v16 + 4) - v44, 0);
      }
      sub_1000F0A1((LPVOID)v16);
    }
  }
  return v52;
}

//----- (1001574C) --------------------------------------------------------
signed __int32 __thiscall sub_1001574C(int this)
{
  return _InterlockedIncrement((volatile signed __int32 *)(this + 4));
}

//----- (10015756) --------------------------------------------------------
int __stdcall sub_10015756(int a1, int a2)
{
  char v3; // [sp+0h] [bp-Ch]@3

  if ( !a1 )
  {
    sub_1000D988(&v3, (int)"pScheduler");
    goto LABEL_6;
  }
  if ( a2 != 0x10000 )
  {
    sub_1000D988(&v3, (int)"version");
LABEL_6:
    sub_10027494((int)&v3, (int)&unk_10075484);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1001579C);
  }
  return sub_10012EBD(a1);
}
// 10012EBD: using guessed type _DWORD __stdcall sub_10012EBD(_DWORD);

//----- (1001579C) --------------------------------------------------------
int __usercall sub_1001579C@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // edi@1
  int v3; // ST04_4@2
  int v4; // eax@2
  void *v5; // ST04_4@3

  sub_1000FB4A();
  v2 = v1;
  if ( !_InterlockedDecrement((volatile signed __int32 *)(v1 + 4)) )
  {
    *(_DWORD *)(a1 - 16) = &dword_1007C5AC;
    sub_100124FC((volatile signed __int32 *)&dword_1007C5AC);
    v3 = dword_1007C544;
    *(_DWORD *)(a1 - 4) = 0;
    v4 = sub_1001224A(v3);
    *(_DWORD *)(a1 - 4) = -1;
    dword_1007C544 = v2 != v4 ? dword_1007C544 : 0;
    dword_1007C5AC = 0;
    if ( *(_DWORD *)(v2 + 76) )
    {
      sub_1001188A((LPCRITICAL_SECTION)(v2 + 44));
      *(_DWORD *)(v2 + 40) = 2;
      *(_DWORD *)(a1 - 4) = 1;
      sub_100119D6((LPCRITICAL_SECTION)(v2 + 44));
      v5 = *(void **)(v2 + 80);
      *(_DWORD *)(a1 - 4) = -1;
      SetEvent(v5);
      sub_100121F5(*(HANDLE *)(v2 + 76), 0xFFFFFFFF);
    }
    sub_10012722(v2);
    sub_1000F417((LPVOID)v2);
  }
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1007C544: using guessed type int dword_1007C544;
// 1007C5AC: using guessed type int dword_1007C5AC;

//----- (10015847) --------------------------------------------------------
unsigned int __thiscall sub_10015847(int this, int a2, unsigned int a3, int a4)
{
  int v4; // esi@1
  signed int v5; // edi@1
  unsigned int v6; // ebx@1
  bool v7; // zf@5

  v4 = this;
  v5 = 1;
  v6 = 0;
  if ( *(_DWORD *)(this + 8) > 1u )
  {
    do
    {
      if ( sub_1001589E(v4, a2, *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v4 + 84) + 4 * v5) + 16), a4) )
        LOBYTE(v6) = 1;
      ++v5;
    }
    while ( (unsigned int)v5 < *(_DWORD *)(v4 + 8) );
    v7 = (_BYTE)v6 == 0;
    v6 = 0;
    if ( !v7 )
      v6 = sub_10015B8E((void *)v4, a2, a3, 0);
  }
  return v6;
}

//----- (1001589E) --------------------------------------------------------
char __thiscall sub_1001589E(int this, int a2, int a3, int a4)
{
  int v4; // edx@1
  int v5; // eax@2
  int v6; // ebx@6
  int v7; // edi@7
  int v8; // eax@7
  int v9; // ecx@8
  unsigned int v10; // eax@9
  int v11; // edi@11
  int v13; // [sp+Ch] [bp-18h]@7
  int v14; // [sp+10h] [bp-14h]@7
  int v15; // [sp+14h] [bp-10h]@1
  int v16; // [sp+18h] [bp-Ch]@7
  int v17; // [sp+1Ch] [bp-8h]@10
  unsigned int v18; // [sp+20h] [bp-4h]@9

  v4 = a4;
  v15 = this;
  if ( a4 == -2 )
  {
    v5 = *(_DWORD *)(a3 + 168);
    v4 = *(_DWORD *)(a3 + 168);
  }
  else
  {
    if ( a4 == -1 )
    {
      v4 = *(_DWORD *)(a3 + 168)
         + *(_DWORD *)(a3 + 160)
         - *(_DWORD *)(a3 + 108)
         - *(_DWORD *)(a3 + 168)
         - (*(_DWORD *)(a3 + 184)
          + sub_10014D04(a3));
      this = v15;
    }
    v5 = 0;
  }
  v6 = v4 - v5;
  if ( !v4 )
    return 0;
  v7 = *(_DWORD *)(a3 + 16);
  v13 = *(_DWORD *)(a3 + 16);
  v14 = *(_DWORD *)(a2 + 20);
  v8 = 0;
  v16 = 0;
  if ( !*(_DWORD *)(this + 24) )
    return 0;
  while ( 1 )
  {
    v9 = v7 + 52 * *(_DWORD *)(v14 + 4 * v8);
    if ( *(_DWORD *)(v9 + 28) != *(_DWORD *)(v9 + 36) )
    {
      v10 = 0;
      v18 = 0;
      if ( *(_DWORD *)(v9 + 4) )
        break;
    }
LABEL_21:
    v8 = v16 + 1;
    v16 = v8;
    if ( (unsigned int)v8 >= *(_DWORD *)(v15 + 24) )
      return 0;
  }
  v17 = 0;
  while ( 1 )
  {
    v11 = v17 + *(_DWORD *)(v9 + 48);
    if ( *(_DWORD *)v11 != 4 || *(_DWORD *)(v11 + 40) )
      goto LABEL_19;
    if ( *(_BYTE *)(v11 + 49) || v6 )
    {
      *(_DWORD *)v11 = 5;
      ++*(_DWORD *)(a3 + 108);
      --**(_DWORD **)(v11 + 20);
      if ( !*(_BYTE *)(v11 + 49) )
        --v6;
      --v4;
      if ( !v4 )
        return 1;
    }
    v10 = v18;
LABEL_19:
    v17 += 52;
    ++v10;
    v18 = v10;
    if ( v10 >= *(_DWORD *)(v9 + 4) )
    {
      v7 = v13;
      goto LABEL_21;
    }
  }
}

//----- (10015996) --------------------------------------------------------
int __thiscall sub_10015996(int this, int a2)
{
  int result; // eax@1

  --*(_DWORD *)this;
  *(_DWORD *)(*(_DWORD *)(a2 + 24) + 28) = *(_DWORD *)(a2 + 28);
  *(_DWORD *)(*(_DWORD *)(a2 + 28) + 24) = *(_DWORD *)(a2 + 24);
  result = *(_DWORD *)(this + 4);
  if ( a2 == result )
  {
    if ( result == *(_DWORD *)(result + 24) )
      result = 0;
    else
      result = *(_DWORD *)(result + 28);
    *(_DWORD *)(this + 4) = result;
  }
  return result;
}

//----- (100159CC) --------------------------------------------------------
int __userpurge sub_100159CC@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // ebx@1
  struct _RTL_CRITICAL_SECTION *v4; // esi@1
  int v5; // ecx@1
  int v6; // edi@1

  sub_1000FB4A();
  v3 = v2;
  *(_DWORD *)(a1 - 16) = 0;
  v4 = (struct _RTL_CRITICAL_SECTION *)(v2 + 44);
  *(_DWORD *)(a1 - 20) = v2 + 44;
  sub_1001188A((LPCRITICAL_SECTION)(v2 + 44));
  v5 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(a1 - 4) = 0;
  v6 = *(_DWORD *)(v5 + 20);
  sub_1001C871((LPVOID)v5, a1);
  if ( *(_DWORD *)(v6 + 160) < (unsigned int)sub_1001301B(v6) && *(_DWORD *)(v3 + 8) == 1 && !sub_100133EF(v3) )
    *(_BYTE *)(a1 - 16) = 1;
  *(_DWORD *)(a1 - 4) = 1;
  sub_100119D6(v4);
  if ( *(_BYTE *)(a1 - 16) )
    SetEvent(*(HANDLE *)(v3 + 80));
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10015A43) --------------------------------------------------------
int __userpurge sub_10015A43@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // edi@1
  struct _RTL_CRITICAL_SECTION *v5; // esi@1
  bool v6; // zf@1
  int v7; // ebx@1
  int v8; // eax@2
  int v9; // eax@6
  char v10; // bl@12
  void *v11; // ST08_4@14
  int v12; // eax@16

  sub_1000FB4A();
  v4 = v3;
  v5 = (struct _RTL_CRITICAL_SECTION *)(v3 + 44);
  *(_DWORD *)(a1 - 16) = 0;
  *(_BYTE *)(a1 - 20) = 0;
  *(_DWORD *)(a1 - 24) = v3 + 44;
  sub_1001188A((LPCRITICAL_SECTION)(v3 + 44));
  v6 = *(_BYTE *)(a1 + 12) == 0;
  *(_DWORD *)(a1 - 4) = 0;
  v7 = *(_DWORD *)(a1 + 8);
  if ( !v6 )
  {
    v8 = sub_1001DE9B(*(_DWORD *)(a1 + 8));
    *(_DWORD *)(a1 - 16) = v8;
    if ( !v8 )
      *(_BYTE *)(a1 - 20) = 1;
  }
  if ( *(_DWORD *)(v7 + 132) == *(_DWORD *)(v7 + 128) )
    ++*(_DWORD *)(v4 + 16);
  ++*(_DWORD *)(v4 + 8);
  sub_100128E9(v4 + 96, v7);
  v9 = sub_10014D1D((void *)v4, v7, 1, *(_DWORD *)(a1 - 20));
  if ( !*(_DWORD *)(a1 - 16) )
    *(_DWORD *)(a1 - 16) = v9;
  if ( *(_DWORD *)(v7 + 132) == *(_DWORD *)(v7 + 128) )
    sub_1001608D((void *)v4, v7);
  if ( *(_DWORD *)(v4 + 8) == 2 )
  {
    v10 = 0;
    *(_DWORD *)(v4 + 40) = 1;
    if ( !*(_DWORD *)(v4 + 76) )
    {
      *(_DWORD *)(v4 + 76) = 1;
      v10 = 1;
      *(_DWORD *)(v4 + 88) = sub_1000F40E(4 * *(_DWORD *)(v4 + 12) | -((unsigned __int64)*(_DWORD *)(v4 + 12) >> 30 != 0));
      *(_DWORD *)(v4 + 92) = sub_1000F40E(4 * *(_DWORD *)(v4 + 12) | -((unsigned __int64)*(_DWORD *)(v4 + 12) >> 30 != 0));
    }
    *(_DWORD *)(a1 - 4) = 2;
    sub_100119D6(v5);
    v11 = *(void **)(v4 + 80);
    *(_DWORD *)(a1 - 4) = -1;
    SetEvent(v11);
    if ( v10 )
      sub_10012E52((LPVOID)v4);
  }
  else
  {
    *(_DWORD *)(a1 - 4) = 1;
    sub_100119D6(v5);
  }
  v12 = *(_DWORD *)(a1 - 16);
  return sub_1000FB24(12);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10015B58) --------------------------------------------------------
unsigned int __thiscall sub_10015B58(void *this, int a2, unsigned int a3)
{
  int v3; // edi@1
  unsigned int v4; // esi@1
  unsigned int v5; // eax@2
  void *v7; // [sp+8h] [bp-4h]@1

  v3 = 0;
  v7 = this;
  v4 = 0;
  if ( a3 )
  {
    do
    {
      ++v3;
      v5 = sub_10015B8E(this, a2, a3 - v4, v3);
      this = v7;
      v4 += v5;
    }
    while ( v4 < a3 );
  }
  return v4;
}

//----- (10015B8E) --------------------------------------------------------
unsigned int __thiscall sub_10015B8E(void *this, int a2, unsigned int a3, int a4)
{
  void *v4; // ebx@1
  char v5; // dl@3
  int v6; // ecx@3
  unsigned int v7; // esi@3
  int v8; // ecx@4
  unsigned int v9; // eax@5
  int v10; // edi@6
  int v11; // edx@7
  unsigned int result; // eax@14
  int v13; // edi@15
  void *v14; // eax@16
  int v15; // esi@17
  int v16; // edx@17
  int v17; // ebx@17
  int v18; // esi@20
  void *v19; // edi@21
  int v20; // eax@22
  int v21; // eax@24
  int v22; // ecx@24
  bool v23; // cf@24
  bool v24; // zf@24
  int v25; // edx@25
  int v26; // eax@28
  unsigned int v27; // edi@36
  int v28; // ebx@36
  int v29; // eax@37
  int v30; // ecx@48
  unsigned int v31; // [sp+10h] [bp-20h]@3
  int v32; // [sp+10h] [bp-20h]@15
  int v33; // [sp+14h] [bp-1Ch]@1
  unsigned int v34; // [sp+18h] [bp-18h]@5
  int v35; // [sp+18h] [bp-18h]@17
  int v36; // [sp+1Ch] [bp-14h]@3
  unsigned int v37; // [sp+20h] [bp-10h]@14
  void *v38; // [sp+24h] [bp-Ch]@1
  int v39; // [sp+28h] [bp-8h]@3
  char v40; // [sp+2Fh] [bp-1h]@3

  v33 = -1;
  v4 = this;
  v38 = this;
  if ( *(_BYTE *)(a2 + 104) )
    v33 = sub_100143C8(this, 0);
  v5 = 0;
  v6 = *(_DWORD *)(a2 + 20);
  v7 = 0;
  v36 = *(_DWORD *)(a2 + 16);
  v39 = *(_DWORD *)(a2 + 20);
  v40 = 0;
  v31 = 0;
  if ( *((_DWORD *)v4 + 6) )
  {
    v8 = *(_DWORD *)(a2 + 16) + 8;
    do
    {
      v9 = 0;
      v34 = 0;
      if ( *(_DWORD *)(v8 - 4) )
      {
        v10 = 0;
        do
        {
          v11 = v10 + *(_DWORD *)(v8 + 40);
          if ( *(_DWORD *)v11 == 1 )
          {
            v9 = v34;
            if ( a4 == **(_DWORD **)(v11 + 20) )
            {
              *(_DWORD *)v11 = 2;
              ++*(_DWORD *)v8;
              v40 = 1;
            }
          }
          ++v9;
          v10 += 52;
          v34 = v9;
        }
        while ( v9 < *(_DWORD *)(v8 - 4) );
        v7 = v31;
        v4 = v38;
      }
      ++v7;
      v8 += 52;
      v31 = v7;
    }
    while ( v7 < *((_DWORD *)v4 + 6) );
    v6 = v39;
    v5 = v40;
  }
  result = 0;
  v37 = 0;
  if ( v5 )
  {
    v13 = 0;
    v32 = 0;
    if ( *((_DWORD *)v4 + 6) > 0u )
    {
      v14 = v38;
      do
      {
        v15 = v13;
        v35 = v13;
        v16 = v36 + 52 * *(_DWORD *)(v6 + 4 * v13);
        v17 = a3 - v37;
        if ( a3 != v37 )
        {
          if ( *(_DWORD *)(v16 + 8) > (unsigned int)v17 )
            *(_DWORD *)(v16 + 8) = v17;
          v18 = v13 + 1;
          if ( (unsigned int)(v13 + 1) < *((_DWORD *)v14 + 6) )
          {
            v19 = v38;
            while ( 1 )
            {
              v20 = v36 + 52 * *(_DWORD *)(v6 + 4 * v18);
              if ( *(_DWORD *)(v20 + 8) > (unsigned int)v17 )
                *(_DWORD *)(v20 + 8) = v17;
              v21 = *(_DWORD *)(v20 + 24) + *(_DWORD *)(v20 + 28) + *(_DWORD *)(v20 + 8);
              v22 = *(_DWORD *)(v16 + 8) + *(_DWORD *)(v16 + 24) + *(_DWORD *)(v16 + 28);
              v23 = v22 < (unsigned int)v21;
              v24 = v22 == v21;
              v6 = v39;
              if ( v23 )
              {
                v25 = 52 * *(_DWORD *)(v39 + 4 * v18);
              }
              else
              {
                if ( !v24 )
                  goto LABEL_31;
                if ( !*(_BYTE *)(a2 + 104) )
                  goto LABEL_31;
                v26 = *(_DWORD *)(v39 + 4 * v18);
                v19 = v38;
                if ( v26 != v33 )
                  goto LABEL_31;
                v25 = 52 * v26;
              }
              v16 = v36 + v25;
              v35 = v18;
LABEL_31:
              ++v18;
              if ( (unsigned int)v18 >= *((_DWORD *)v19 + 6) )
              {
                v13 = v32;
                break;
              }
            }
          }
          v15 = v35;
        }
        if ( *(_DWORD *)(v16 + 8) )
        {
          if ( *(_DWORD *)(v16 + 4) )
          {
            v27 = 0;
            v28 = 0;
            do
            {
              v29 = v28 + *(_DWORD *)(v16 + 48);
              if ( *(_DWORD *)v29 == 2 )
              {
                v6 = v39;
                if ( v37 >= a3 )
                {
                  *(_DWORD *)v29 = 1;
                }
                else
                {
                  *(_DWORD *)v29 = 3;
                  ++**(_DWORD **)(v29 + 20);
                  ++*(_DWORD *)(v16 + 24);
                  if ( *(_BYTE *)(a2 + 104) && *(_DWORD *)(v39 + 4 * v15) == v33 )
                    *(_BYTE *)(a2 + 104) = 0;
                  ++v37;
                }
              }
              ++v27;
              v28 += 52;
            }
            while ( v27 < *(_DWORD *)(v16 + 4) );
            v13 = v32;
          }
          *(_DWORD *)(v16 + 8) = 0;
        }
        if ( v13 != v15 )
        {
          v30 = *(_DWORD *)(v6 + 4 * v13);
          *(_DWORD *)(v39 + 4 * v13) = *(_DWORD *)(v39 + 4 * v15);
          *(_DWORD *)(v39 + 4 * v15) = v30;
        }
        v14 = v38;
        ++v13;
        v6 = v39;
        v32 = v13;
      }
      while ( (unsigned int)v13 < *((_DWORD *)v38 + 6) );
      result = v37;
    }
  }
  return result;
}

//----- (10015D64) --------------------------------------------------------
int __thiscall sub_10015D64(int this)
{
  int v1; // esi@1
  __int64 v2; // rax@1
  int v3; // edi@2
  int v4; // ecx@3
  int v5; // ebx@4
  unsigned int v6; // esi@4
  int v7; // eax@5
  int v9; // [sp+4h] [bp-8h]@1

  v1 = this;
  v2 = 0i64;
  v9 = this;
  if ( *(_DWORD *)(this + 24) )
  {
    v3 = 0;
    do
    {
      v4 = v3 + *(_DWORD *)(v1 + 72);
      *(_DWORD *)(v4 + 8) = v2;
      *(_DWORD *)(v4 + 28) = v2;
      if ( *(_DWORD *)(v4 + 4) > (unsigned int)v2 )
      {
        v5 = v2;
        v6 = v2;
        do
        {
          v7 = v5 + *(_DWORD *)(v4 + 32);
          v5 += 36;
          *(_DWORD *)v7 = 0;
          *(_DWORD *)(v7 + 28) = 0;
          ++v6;
        }
        while ( v6 < *(_DWORD *)(v4 + 4) );
        v1 = v9;
        LODWORD(v2) = 0;
      }
      ++HIDWORD(v2);
      v3 += 40;
    }
    while ( HIDWORD(v2) < *(_DWORD *)(v1 + 24) );
  }
  return v2;
}

//----- (10015DBD) --------------------------------------------------------
DWORD sub_10015DBD()
{
  DWORD result; // eax@5
  char v1; // [sp+0h] [bp-124h]@20
  struct _OSVERSIONINFOW VersionInformation; // [sp+Ch] [bp-118h]@1

  VersionInformation.dwOSVersionInfoSize = 276;
  if ( !GetVersionExW(&VersionInformation) )
  {
LABEL_20:
    sub_1001A052((int)&v1);
    sub_10027494((int)&v1, (int)&unk_10075BEC);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10015EAD);
  }
  if ( VersionInformation.dwMajorVersion != 5 )
  {
    if ( VersionInformation.dwMajorVersion != 6 )
      goto LABEL_24;
    result = VersionInformation.dwMinorVersion;
    if ( !VersionInformation.dwMinorVersion )
    {
      dword_1007C568 = 3;
      return result;
    }
    if ( VersionInformation.dwMinorVersion != 1 )
LABEL_24:
      dword_1007C568 = 6;
    else
      dword_1007C568 = 4;
LABEL_17:
    result = sub_10011C76();
    if ( dword_1007C568 >= 6 )
      result = sub_1001E21A();
    return result;
  }
  if ( !VersionInformation.dwMinorVersion )
  {
    dword_1007C568 = 0;
    goto LABEL_20;
  }
  if ( VersionInformation.dwMinorVersion == 1 )
  {
    result = 1;
    dword_1007C568 = 1;
  }
  else
  {
    result = VersionInformation.dwMinorVersion - 2;
    if ( VersionInformation.dwMinorVersion == 2 )
    {
      dword_1007C568 = 2;
      return result;
    }
    result = dword_1007C568;
  }
  if ( (signed int)result >= 4 )
    goto LABEL_17;
  return result;
}
// 1007C568: using guessed type int dword_1007C568;

//----- (10015EAD) --------------------------------------------------------
void __cdecl sub_10015EAD(int a1, unsigned int a2)
{
  int v2; // edx@1
  double v3; // st6@1
  int v4; // esi@1
  int v5; // esi@2
  double v6; // st5@2
  int v7; // ecx@2
  double v8; // st5@4
  int v9; // esi@4
  int v10; // eax@5
  int v11; // edx@5
  int v12; // esi@6
  int v13; // eax@8
  int v14; // ecx@12
  int v15; // ecx@16
  unsigned int v16; // esi@16
  double v17; // st4@17
  double v18; // rt0@18
  double v19; // st4@18
  double v20; // rt1@18
  double v21; // rt2@19
  double v22; // st4@19
  double v23; // st6@19
  double v24; // rtt@20
  double v25; // st4@20
  double v26; // st5@20
  double v27; // rt0@21
  double v28; // rt1@24
  double v29; // st4@24
  double v30; // st5@24
  int v31; // eax@25
  int v32; // eax@28
  int v33; // esi@28
  int v34; // edx@29
  int v35; // eax@31
  double v36; // rt0@32
  int v37; // eax@33
  double v38; // rt1@33
  double v39; // st4@33
  double v40; // rt2@33
  int v41; // ecx@40
  int v42; // [sp+Ch] [bp-14h]@1
  int v43; // [sp+14h] [bp-Ch]@4
  int v44; // [sp+14h] [bp-Ch]@28
  int v45; // [sp+18h] [bp-8h]@5
  int v46; // [sp+1Ch] [bp-4h]@1
  int v47; // [sp+1Ch] [bp-4h]@5
  int v48; // [sp+1Ch] [bp-4h]@28

  v2 = 0;
  v3 = 0.0;
  v4 = 0;
  v42 = 0;
  v46 = 0;
  if ( a2 )
  {
    do
    {
      v5 = *(_DWORD *)(a1 + 4 * v4);
      v6 = *(double *)(v5 + 8);
      *(_DWORD *)(v5 + 4) = sub_1003B3D0(0.0);
      v7 = *(_DWORD *)(a1 + 4 * v46);
      v4 = v46 + 1;
      v46 = v4;
      *(double *)(v7 + 8) = *(double *)(v7 + 8) - (double)*(unsigned int *)(v7 + 4);
    }
    while ( v4 < a2 );
    v2 = 0;
  }
  v8 = 0.0000001;
  v9 = 0;
  v43 = 0;
  if ( a2 )
  {
    do
    {
      v10 = v9 + 1;
      v47 = v9;
      v45 = v9 + 1;
      v11 = v9 + 1;
      if ( v9 + 1 < a2 )
      {
        v12 = 4 * v9;
        do
        {
          if ( *(double *)(*(_DWORD *)(v12 + a1) + 8) + 0.0000001 >= *(double *)(*(_DWORD *)(a1 + 4 * v11) + 8) )
          {
            v13 = v47;
          }
          else
          {
            v13 = v11;
            v47 = v11;
            v12 = 4 * v11;
          }
          ++v11;
        }
        while ( v11 < a2 );
        if ( v43 != v13 )
        {
          v14 = *(_DWORD *)(a1 + 4 * v43);
          *(_DWORD *)(a1 + 4 * v43) = *(_DWORD *)(a1 + 4 * v13);
          *(_DWORD *)(a1 + 4 * v47) = v14;
        }
        v10 = v45;
      }
      v9 = v10;
      v43 = v10;
    }
    while ( v10 < a2 );
    v2 = 0;
  }
  v15 = a2 - 1;
  v16 = 0;
  if ( a2 )
  {
    v17 = 1.0;
    while ( 1 )
    {
      v21 = v17;
      v22 = v3;
      v23 = v21;
      while ( v22 > v8 )
      {
        v24 = v22;
        v25 = v8;
        v26 = v24;
        if ( v25 < *(double *)(*(_DWORD *)(a1 + 4 * v15) + 8) )
        {
          while ( 1 )
          {
            v37 = *(_DWORD *)(a1 + 4 * v15);
            v38 = v25;
            v39 = v26;
            v8 = v38;
            --v15;
            v40 = v39 - *(double *)(v37 + 8);
            *(double *)(v37 + 8) = 0.0;
            v22 = v40;
            if ( v40 <= v38 )
              break;
            v36 = v22;
            v25 = v8;
            v26 = v36;
          }
        }
        else
        {
          --v15;
          v27 = v25;
          v22 = v26;
          v8 = v27;
        }
      }
      if ( v16 > v15 )
        break;
      v28 = v22;
      v29 = v8;
      v30 = v28;
      if ( v29 < *(double *)(*(_DWORD *)(a1 + 4 * v16) + 8) )
      {
        v31 = *(_DWORD *)(a1 + 4 * v16);
        v30 = v30 + v23 - *(double *)(v31 + 8);
        *(double *)(v31 + 8) = 0.0;
        ++*(_DWORD *)(*(_DWORD *)(a1 + 4 * v16) + 4);
      }
      ++v16;
      if ( v16 >= a2 )
        break;
      v18 = v29;
      v19 = v30;
      v8 = v18;
      v20 = v19;
      v17 = v23;
      v3 = v20;
    }
  }
  if ( a2 )
  {
    do
    {
      v32 = v2 + 1;
      v48 = v2;
      v44 = v2 + 1;
      v33 = v2 + 1;
      if ( v2 + 1 < a2 )
      {
        v34 = 4 * v2;
        do
        {
          if ( **(_DWORD **)(a1 + 4 * v33) >= **(_DWORD **)(v34 + a1) )
          {
            v35 = v48;
          }
          else
          {
            v35 = v33;
            v48 = v33;
            v34 = 4 * v33;
          }
          ++v33;
        }
        while ( v33 < a2 );
        if ( v42 != v35 )
        {
          v41 = *(_DWORD *)(a1 + 4 * v42);
          *(_DWORD *)(a1 + 4 * v42) = *(_DWORD *)(a1 + 4 * v35);
          *(_DWORD *)(a1 + 4 * v48) = v41;
        }
        v32 = v44;
      }
      v2 = v32;
      v42 = v32;
    }
    while ( v32 < a2 );
  }
}

//----- (1001606E) --------------------------------------------------------
char __thiscall sub_1001606E(void *this)
{
  volatile signed __int32 *v1; // esi@1
  signed __int32 v2; // edx@3

  v1 = (volatile signed __int32 *)((char *)this + 4);
  while ( *v1 )
  {
    v2 = *v1;
    if ( _InterlockedCompareExchange(v1, v2 + 1, v2) == v2 )
      return 1;
  }
  return 0;
}

//----- (1001608D) --------------------------------------------------------
int __thiscall sub_1001608D(void *this, int a2)
{
  void *v2; // edi@1
  int v3; // ebx@1
  unsigned int v4; // ecx@1
  int result; // eax@1
  int v6; // esi@2
  signed int v7; // edx@2
  int v8; // edx@4
  unsigned int v9; // ecx@4
  int v10; // ebx@5
  int v11; // eax@5
  int v12; // edx@5
  int v13; // edx@6
  int v14; // ecx@9
  int v15; // eax@9
  unsigned int v16; // ecx@17
  unsigned int v17; // edx@19
  int v18; // ecx@20
  int v19; // eax@21
  int v20; // esi@21
  int v21; // esi@22
  int v22; // eax@26
  bool v23; // zf@31
  unsigned int v24; // [sp+Ch] [bp-20h]@21
  int v25; // [sp+10h] [bp-1Ch]@2
  unsigned int v26; // [sp+10h] [bp-1Ch]@19
  unsigned int v27; // [sp+14h] [bp-18h]@1
  int v28; // [sp+14h] [bp-18h]@20
  int v29; // [sp+18h] [bp-14h]@4
  unsigned int v30; // [sp+18h] [bp-14h]@17
  signed int v31; // [sp+1Ch] [bp-10h]@1
  signed int v32; // [sp+20h] [bp-Ch]@2
  int v33; // [sp+20h] [bp-Ch]@20
  int v34; // [sp+24h] [bp-8h]@4
  int v35; // [sp+24h] [bp-8h]@18
  unsigned int v36; // [sp+28h] [bp-4h]@3
  unsigned int v37; // [sp+28h] [bp-4h]@21

  v2 = this;
  v3 = 0;
  v4 = 0;
  result = 48;
  v27 = 0;
  v31 = 48;
  if ( *((_DWORD *)v2 + 6) )
  {
    v6 = 0;
    v32 = 48;
    v25 = 0;
    v7 = 48;
    do
    {
      result = v6 + *((_DWORD *)v2 + 18);
      v36 = 0;
      if ( *(_DWORD *)(result + 4) > 0u )
      {
        v8 = 0;
        v34 = 0;
        v29 = 0;
        v9 = 0;
        do
        {
          v10 = v8 + *(_DWORD *)(result + 32);
          v11 = *(_DWORD *)(v10 + 20);
          *(_DWORD *)(v10 + 20) = 0;
          *(_DWORD *)(v10 + 24) = v11;
          v12 = *((_DWORD *)v2 + 25);
          if ( v12 )
            v13 = *(_DWORD *)(v12 + 24);
          else
            v13 = 0;
          if ( v13 )
          {
            do
            {
              v14 = v34 + *(_DWORD *)(v32 + *(_DWORD *)(v13 + 16));
              *(_DWORD *)(v14 + 32) = *(_DWORD *)(v14 + 28);
              v15 = *(_DWORD *)(v14 + 24);
              *(_DWORD *)(v14 + 28) = v15;
              *(_DWORD *)(v10 + 20) += v15;
              if ( v13 == *((_DWORD *)v2 + 25) )
                v13 = 0;
              else
                v13 = *(_DWORD *)(v13 + 24);
            }
            while ( v13 );
            v6 = v25;
            v9 = v36;
          }
          ++v9;
          result = v6 + *((_DWORD *)v2 + 18);
          v34 += 52;
          v8 = v29 + 36;
          v36 = v9;
          v29 += 36;
        }
        while ( v9 < *(_DWORD *)(result + 4) );
        v4 = v27;
        v3 = 0;
        v7 = v32;
      }
      ++v4;
      v6 += 40;
      v7 += 52;
      v27 = v4;
      v25 = v6;
      v32 = v7;
    }
    while ( v4 < *((_DWORD *)v2 + 6) );
  }
  v16 = 0;
  v30 = 0;
  if ( *((_DWORD *)v2 + 6) > 0u )
  {
    v35 = 0;
    do
    {
      v17 = 0;
      result = v3 + *((_DWORD *)v2 + 18);
      v26 = 0;
      if ( *(_DWORD *)(result + 4) )
      {
        v33 = 0;
        v18 = 0;
        v28 = 0;
        do
        {
          v19 = *(_DWORD *)(result + 32);
          v24 = *(_DWORD *)(v19 + v18 + 24);
          v20 = *((_DWORD *)v2 + 25);
          v37 = *(_DWORD *)(v19 + v18 + 20);
          if ( v20 )
            v21 = *(_DWORD *)(v20 + 24);
          else
            v21 = 0;
          if ( v21 )
          {
            while ( 1 )
            {
              if ( *(_DWORD *)(v21 + 132) == *(_DWORD *)(v21 + 128) )
              {
                v22 = v33 + *(_DWORD *)(v31 + *(_DWORD *)(v21 + 16));
                if ( *(_DWORD *)(v22 + 36) )
                {
                  if ( v21 == a2 )
                  {
                    if ( v37 <= *(_DWORD *)(v22 + 28) )
                      goto LABEL_36;
                    sub_1001E0A5(v22, 1);
                  }
                  else
                  {
                    if ( v24 == *(_DWORD *)(v22 + 32) )
                    {
                      v23 = v37 == *(_DWORD *)(v22 + 28);
                      if ( v37 > *(_DWORD *)(v22 + 28) )
                      {
                        sub_1001E0A5(v22, 1);
                        goto LABEL_37;
                      }
                    }
                    else
                    {
                      v23 = v37 == *(_DWORD *)(v22 + 28);
                    }
                    if ( v23 && v24 > *(_DWORD *)(v22 + 32) )
                    {
LABEL_36:
                      sub_1001E0A5(v22, 0);
                      goto LABEL_37;
                    }
                  }
                }
              }
LABEL_37:
              if ( v21 == *((_DWORD *)v2 + 25) )
                v21 = 0;
              else
                v21 = *(_DWORD *)(v21 + 24);
              if ( !v21 )
              {
                v3 = v35;
                v17 = v26;
                v18 = v28;
                break;
              }
            }
          }
          ++v17;
          v33 += 52;
          result = v3 + *((_DWORD *)v2 + 18);
          v18 += 36;
          v26 = v17;
          v28 = v18;
        }
        while ( v17 < *(_DWORD *)(result + 4) );
        v16 = v30;
      }
      v31 += 52;
      ++v16;
      v3 += 40;
      v30 = v16;
      v35 = v3;
    }
    while ( v16 < *((_DWORD *)v2 + 6) );
  }
  return result;
}
// 1001E0A5: using guessed type _DWORD __stdcall sub_1001E0A5(_DWORD, _DWORD);

//----- (1001625E) --------------------------------------------------------
int __thiscall sub_1001625E(int this, int a2, char a3)
{
  int v3; // ebx@1
  int v4; // esi@1
  int result; // eax@1
  int v6; // edi@1
  int v7; // edi@2
  int v8; // [sp+10h] [bp-4h]@1

  v3 = this;
  sub_10014A0A(this);
  v4 = a2 + 64;
  sub_10028330((void *)(a2 + 64), 0, 0x30u);
  sub_10014E75(v3, 0, a2, a2 + 64);
  *(double *)(v4 + 32) = (double)(unsigned int)sub_1001301B(a2);
  *(_BYTE *)(v4 + 40) = a3;
  result = *(_DWORD *)(v3 + 84);
  v8 = 1;
  *(_DWORD *)result = a2 + 64;
  v6 = *(_DWORD *)(v3 + 100);
  if ( v6 )
    v7 = *(_DWORD *)(v6 + 24);
  else
    v7 = 0;
  if ( v7 )
  {
    result = a2;
    do
    {
      if ( v7 != result )
      {
        sub_10028330((void *)(v7 + 64), 0, 0x30u);
        sub_10014E75(v3, v8, v7, v7 + 64);
        *(double *)(v7 + 96) = (double)(unsigned int)sub_1001301B(v7);
        *(_DWORD *)(*(_DWORD *)(v3 + 84) + 4 * v8) = v7 + 64;
        result = a2;
        ++v8;
      }
      if ( v7 == *(_DWORD *)(v3 + 100) )
        v7 = 0;
      else
        v7 = *(_DWORD *)(v7 + 24);
    }
    while ( v7 );
  }
  return result;
}

//----- (1001632F) --------------------------------------------------------
#error "100163FA: call analysis failed (funcsize=68)"

//----- (10016402) --------------------------------------------------------
int __userpurge sub_10016402@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  void *v3; // ebx@1
  struct _RTL_CRITICAL_SECTION *v4; // esi@1
  int v5; // ecx@1

  sub_1000FB4A();
  v3 = (void *)v2;
  v4 = (struct _RTL_CRITICAL_SECTION *)(v2 + 44);
  *(_DWORD *)(a1 - 16) = v2 + 44;
  sub_1001188A((LPCRITICAL_SECTION)(v2 + 44));
  v5 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(a1 - 4) = 0;
  if ( !sub_1001DE9B(v5) )
    sub_10014D1D(v3, *(_DWORD *)(a1 + 8), 0, 1);
  *(_DWORD *)(a1 - 4) = 1;
  sub_100119D6(v4);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10016456) --------------------------------------------------------
int __thiscall sub_10016456(int this, int a2, int a3, int a4, int a5, int a6)
{
  int result; // eax@2

  if ( *(_BYTE *)(a3 + 48) )
  {
    result = a6;
    *(_BYTE *)(a3 + 48) = 0;
    --*(_DWORD *)(result + 20);
    --*(_DWORD *)(a2 + 40);
    if ( *(_BYTE *)(a3 + 49) )
    {
      --*(_DWORD *)(a6 + 24);
      --*(_DWORD *)(a2 + 44);
    }
    if ( *(_DWORD *)a5 == 6 )
    {
      result = a4;
      *(_DWORD *)a5 = 0;
      --*(_DWORD *)(result + 28);
      --*(_DWORD *)(this + 32);
    }
    --*(_DWORD *)(a5 + 28);
  }
  else
  {
    *(_BYTE *)(a3 + 48) = 1;
    ++*(_DWORD *)(a6 + 20);
    ++*(_DWORD *)(a2 + 40);
    if ( *(_BYTE *)(a3 + 49) )
    {
      ++*(_DWORD *)(a6 + 24);
      ++*(_DWORD *)(a2 + 44);
    }
    result = a5;
    ++*(_DWORD *)(result + 28);
  }
  return result;
}

//----- (100164C3) --------------------------------------------------------
int __usercall sub_100164C3@<eax>(int a1@<ebp>)
{
  sub_1000FB4A();
  if ( !dword_1007C568 )
  {
    *(_DWORD *)(a1 - 16) = &dword_1007C5AC;
    sub_100124FC((volatile signed __int32 *)&dword_1007C5AC);
    *(_DWORD *)(a1 - 4) = 0;
    if ( !dword_1007C568 )
      sub_10015DBD();
    dword_1007C5AC = 0;
  }
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1007C568: using guessed type int dword_1007C568;
// 1007C5AC: using guessed type int dword_1007C5AC;

//----- (1001650C) --------------------------------------------------------
int __cdecl sub_1001650C(int a1)
{
  int (__thiscall *v1)(_DWORD, _DWORD); // esi@2
  int result; // eax@2

  if ( a1 )
  {
    v1 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a1 + 20);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)a1 + 20));
    result = v1(a1, 1);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001652E) --------------------------------------------------------
int __cdecl sub_1001652E(int a1)
{
  int (__thiscall *v1)(_DWORD, _DWORD); // esi@2
  int result; // eax@2

  if ( a1 )
  {
    v1 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)(a1 + 4) + 20);
    j_nullsub_1(v1);
    result = v1(a1 + 4, 1);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10016552) --------------------------------------------------------
int __cdecl sub_10016552(int a1)
{
  int (__thiscall *v1)(_DWORD, _DWORD); // esi@2
  int result; // eax@2

  if ( a1 )
  {
    v1 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a1 + 16);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)a1 + 16));
    result = v1(a1, 1);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10016574) --------------------------------------------------------
PSLIST_HEADER __thiscall sub_10016574(PSLIST_HEADER ListHead, int a2, int a3, int a4)
{
  int v4; // edx@1
  PSLIST_HEADER v5; // esi@1
  int v6; // edx@2
  int v7; // edx@2
  LPVOID v8; // edi@3
  LPVOID v9; // eax@3
  LPVOID v10; // eax@6
  struct _SINGLE_LIST_ENTRY *v11; // ecx@6
  signed int v12; // ecx@6
  int v13; // eax@7

  v4 = a3;
  v5 = ListHead;
  *(_DWORD *)&ListHead[4].s.Depth = a2;
  *(_DWORD *)&ListHead[8].s.Depth = a4;
  ListHead[2].s.Next.Next = 0;
  *(_QWORD *)&ListHead[5].s.Depth = 0i64;
  ListHead[7].s.Next.Next = (struct _SINGLE_LIST_ENTRY *)512;
  *(_QWORD *)&ListHead[7].s.Depth = 1i64;
  ListHead[9].s.Next.Next = 0;
  if ( (v4 - 1) & v4 )
  {
    v6 = (((a3 >> 1) | a3) >> 2) | (a3 >> 1) | a3;
    v7 = (((v6 >> 4) | v6) >> 8) | (v6 >> 4) | v6;
    v4 = ((v7 >> 16) | v7) + 1;
  }
  ListHead[5].s.Next.Next = (struct _SINGLE_LIST_ENTRY *)v4;
  v8 = sub_1000F40E(4 * v4 | -((unsigned __int64)(unsigned int)v4 >> 30 != 0));
  sub_10028330(v8, 0, 4 * (unsigned int)v5[5].s.Next.Next);
  v9 = sub_1000F0A6(0xCu);
  if ( v9 )
  {
    *((_DWORD *)v9 + 2) = -1;
    *(_DWORD *)v9 = v8;
    *((_DWORD *)v9 + 1) = 0;
  }
  else
  {
    v9 = 0;
  }
  v5[6].s.Next.Next = (struct _SINGLE_LIST_ENTRY *)v9;
  v10 = sub_1000F40E(4 * (unsigned int)v5[7].s.Next.Next | -((unsigned __int64)LODWORD(v5[7].Alignment) >> 30 != 0));
  v11 = v5[6].s.Next.Next;
  *(_DWORD *)&v5[6].s.Depth = v10;
  *(_DWORD *)v10 = v11;
  InitializeSListHead(v5);
  InitializeSListHead(v5 + 1);
  v12 = (signed int)v5[5].s.Next.Next >> 1;
  if ( v12 )
  {
    v13 = *(_DWORD *)&v5[5].s.Depth;
    do
    {
      ++v13;
      v12 >>= 1;
    }
    while ( v12 );
    *(_DWORD *)&v5[5].s.Depth = v13;
  }
  return v5;
}

//----- (1001666D) --------------------------------------------------------
void *__thiscall sub_1001666D(void *this, int a2, int a3, int a4)
{
  int v4; // ebp@0
  void *v5; // esi@1
  int v6; // eax@1

  v5 = this;
  sub_10021A21(v4, a2, a3, a4);
  v6 = (int)((char *)v5 + 296);
  *(_DWORD *)v5 = &off_10066690;
  *(_DWORD *)v6 = 0;
  *(_DWORD *)(v6 + 4) = v6;
  *(_DWORD *)(v6 + 8) = 0;
  return v5;
}
// 10066690: using guessed type int (__thiscall *off_10066690)(LPVOID lpMem, char);

//----- (100166A7) --------------------------------------------------------
void *__thiscall sub_100166A7(void *this, int a2, int a3, int a4)
{
  int v4; // ebp@0
  void *v5; // esi@1
  int v6; // eax@1

  v5 = this;
  sub_10021A21(v4, a2, a3, a4);
  v6 = (int)((char *)v5 + 296);
  *(_DWORD *)v5 = &off_100666D0;
  *(_DWORD *)v6 = 0;
  *(_DWORD *)(v6 + 4) = v6;
  *(_DWORD *)(v6 + 8) = 0;
  return v5;
}
// 100666D0: using guessed type int (__thiscall *off_100666D0)(LPVOID lpMem, char);

//----- (100166E1) --------------------------------------------------------
int __thiscall sub_100166E1(int this)
{
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  return this;
}

//----- (100166FB) --------------------------------------------------------
void *__thiscall sub_100166FB(void *this, int a2)
{
  void *v2; // esi@1
  LPVOID v3; // eax@1
  unsigned int v4; // ecx@1

  v2 = this;
  *(_DWORD *)this = a2;
  v3 = sub_1000F40E(4 * ((unsigned int)(a2 + 31) >> 5) | -((a2 + 31) / 0x100u != 0));
  v4 = *(_DWORD *)v2 + 31;
  *((_DWORD *)v2 + 1) = v3;
  sub_10028330(v3, 0, 4 * (v4 >> 5));
  return v2;
}

//----- (10016741) --------------------------------------------------------
int __userpurge sub_10016741@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // edi@1
  const void **v4; // ebx@1
  int v5; // eax@1
  int v6; // esi@1
  int v7; // eax@2
  int v8; // eax@4
  int v9; // eax@5
  int v10; // eax@9
  int v11; // eax@10
  int v12; // eax@14

  sub_1000FB4A();
  v3 = v2;
  *(_DWORD *)(a1 - 16) = v2;
  v4 = *(const void ***)(a1 + 8);
  *(_DWORD *)v2 = &off_1006662C;
  *(_DWORD *)(a1 - 4) = 0;
  sub_1001C44C((void *)(v2 + 4), v4);
  *(_DWORD *)(v3 + 48) = 0;
  *(_DWORD *)(v3 + 52) = 0;
  *(_DWORD *)(v3 + 56) = 0;
  *(_DWORD *)(v3 + 60) = 0;
  *(_DWORD *)(v3 + 64) = 0;
  *(_DWORD *)(v3 + 68) = 0;
  *(_DWORD *)(v3 + 72) = 0;
  *(_DWORD *)(v3 + 76) = 0;
  *(_DWORD *)(v3 + 80) = 0;
  *(_DWORD *)(v3 + 84) = 0;
  *(_DWORD *)(v3 + 88) = 0;
  *(_BYTE *)(a1 - 4) = 5;
  sub_10016574((PSLIST_HEADER)(v3 + 96), 0, 256, 64);
  *(_DWORD *)(v3 + 180) = 0;
  *(_DWORD *)(v3 + 184) = 0;
  *(_BYTE *)(a1 - 4) = 6;
  sub_10011554(v3 + 188);
  sub_10016574((PSLIST_HEADER)(v3 + 200), 0, 256, 0x7FFFFFFF);
  *(_BYTE *)(a1 - 4) = 7;
  sub_10011564((LPCRITICAL_SECTION)(v3 + 280));
  *(_BYTE *)(a1 - 4) = 8;
  *(_DWORD *)(v3 + 304) = 0;
  sub_10011554(v3 + 308);
  v5 = v3 + 316;
  *(_DWORD *)v5 = 0;
  *(_DWORD *)(v5 + 4) = v5;
  *(_DWORD *)(v5 + 8) = 0;
  *(_DWORD *)(v3 + 328) = -1;
  *(_DWORD *)(v3 + 332) = -1;
  *(_DWORD *)(v3 + 336) = 0;
  *(_DWORD *)(v3 + 340) = 0;
  *(_DWORD *)(v3 + 344) = 0;
  sub_1001A0A1(v3 + 348, 0x1001u);
  *(_BYTE *)(a1 - 4) = 9;
  sub_1001A0A1(v3 + 360, 0x1001u);
  *(_DWORD *)(v3 + 372) = -1;
  *(_DWORD *)(v3 + 376) = 0;
  *(_DWORD *)(v3 + 384) = 0;
  *(_DWORD *)(v3 + 388) = 0;
  *(_DWORD *)(v3 + 392) = 1;
  *(_DWORD *)(v3 + 396) = 0;
  *(_DWORD *)(v3 + 400) = 0;
  *(_BYTE *)(a1 - 4) = 10;
  *(_DWORD *)(v3 + 404) = 0;
  *(_DWORD *)(v3 + 408) = 0;
  *(_DWORD *)(v3 + 416) = 0;
  *(_DWORD *)(v3 + 420) = 0;
  *(_DWORD *)(v3 + 424) = 0;
  *(_DWORD *)(v3 + 432) = 0;
  *(_DWORD *)(v3 + 440) = 0;
  *(_DWORD *)(v3 + 444) = 0;
  *(_DWORD *)(v3 + 448) = 0;
  *(_DWORD *)(v3 + 452) = 0;
  *(_DWORD *)(v3 + 456) = 0;
  *(_DWORD *)(v3 + 464) = 0;
  *(_DWORD *)(v3 + 468) = 0;
  *(_DWORD *)(v3 + 484) = 0;
  InitializeSListHead((PSLIST_HEADER)(v3 + 488));
  InitializeSListHead((PSLIST_HEADER)(v3 + 496));
  InitializeSListHead((PSLIST_HEADER)(v3 + 504));
  InitializeSListHead((PSLIST_HEADER)(v3 + 512));
  *(_DWORD *)(v3 + 132) = v3;
  *(_DWORD *)(v3 + 8) = sub_1001C4ED(v4, 0);
  *(_WORD *)(v3 + 16) = sub_1001C4ED(v4, 4u);
  *(_DWORD *)(v3 + 12) = sub_1001C4ED(v4, 7u);
  v6 = sub_1001C4ED(v4, 1u);
  if ( 4 * sub_100145C6() <= (unsigned int)v6 )
    v7 = sub_1001C4ED(v4, 1u);
  else
    v7 = 4 * sub_100145C6();
  *(_DWORD *)(v3 + 460) = v7;
  *(_DWORD *)(v3 + 24) = sub_10012144();
  v8 = sub_10011D4E(0);
  *(_DWORD *)(v3 + 472) = v8;
  if ( !RegisterWaitForSingleObject((PHANDLE)(v3 + 476), (HANDLE)v8, Callback, (PVOID)v3, 0xFFFFFFFF, 0) )
  {
    v9 = GetLastError();
    if ( v9 > 0 )
      v9 = (unsigned __int16)v9 | 0x80070000;
    sub_1001A018(a1 - 32, v9);
    sub_10027494(a1 - 32, (int)&unk_10075954);
  }
  while ( 1 )
  {
    while ( sub_100145C1() >= 3 )
    {
      v10 = sub_100123E7(0x7FFFFFFFu, (int)sub_10019B96, v3, 1);
      *(_DWORD *)(v3 + 480) = v10;
      if ( v10 )
        return sub_1000FB24(52);
      v11 = GetLastError();
      if ( v11 > 0 )
        v11 = (unsigned __int16)v11 | 0x80070000;
      sub_1001A018(a1 - 48, v11);
      sub_10027494(a1 - 48, (int)&unk_10075954);
    }
    if ( sub_10011DC2((PHANDLE)(v3 + 480), 0, (WAITORTIMERCALLBACK)sub_10019BA5, (PVOID)v3, 0x7FFFFFFFu, 0x7FFFFFFFu, 0) )
      break;
    v12 = GetLastError();
    if ( v12 > 0 )
      v12 = (unsigned __int16)v12 | 0x80070000;
    sub_1001A018(a1 - 64, v12);
    sub_10027494(a1 - 64, (int)&unk_10075954);
  }
  return sub_1000FB24(52);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1006662C: using guessed type int (__thiscall *off_1006662C)(LPVOID lpMem, char);

//----- (10016A5D) --------------------------------------------------------
void *__thiscall sub_10016A5D(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_100665B4;
  return v2;
}
// 100665B4: using guessed type int (__thiscall *off_100665B4)(LPVOID lpMem, char);

//----- (10016A78) --------------------------------------------------------
void *__thiscall sub_10016A78(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_100665C0;
  return v2;
}
// 100665C0: using guessed type int (__thiscall *off_100665C0)(LPVOID lpMem, char);

//----- (10016A93) --------------------------------------------------------
int __thiscall sub_10016A93(PSLIST_HEADER ListHead)
{
  PSLIST_HEADER v1; // edi@1
  int v2; // eax@1
  int v3; // eax@1
  struct _SINGLE_LIST_ENTRY *v4; // ebx@1
  signed int i; // esi@2
  struct _SINGLE_LIST_ENTRY *v6; // esi@4

  v1 = ListHead;
  v2 = (int)InterlockedFlushSList(ListHead);
  sub_100177AD(v2);
  v3 = (int)InterlockedFlushSList(v1 + 1);
  sub_100177AD(v3);
  sub_100177AD((int)v1[2].s.Next.Next);
  v4 = v1[6].s.Next.Next;
  if ( v4 )
  {
    do
    {
      for ( i = 0; i < (signed int)v1[5].s.Next.Next; ++i )
        sub_1000F417(v4->Next[i].Next);
      v6 = v4[1].Next;
      sub_1000F0A1(v4->Next);
      sub_1000F417(v4);
      v4 = v6;
    }
    while ( v6 );
  }
  return sub_1000F0A1(*(LPVOID *)&v1[6].s.Depth);
}

//----- (10016B0D) --------------------------------------------------------
int __thiscall sub_10016B0D(PSLIST_HEADER ListHead)
{
  PSLIST_HEADER v1; // edi@1
  int v2; // eax@1
  int v3; // eax@1
  struct _SINGLE_LIST_ENTRY *v4; // ebx@1
  signed int i; // esi@2
  struct _SINGLE_LIST_ENTRY *v6; // esi@4

  v1 = ListHead;
  v2 = (int)InterlockedFlushSList(ListHead);
  sub_100177CE(v2);
  v3 = (int)InterlockedFlushSList(v1 + 1);
  sub_100177CE(v3);
  sub_100177CE((int)v1[2].s.Next.Next);
  v4 = v1[6].s.Next.Next;
  if ( v4 )
  {
    do
    {
      for ( i = 0; i < (signed int)v1[5].s.Next.Next; ++i )
        sub_10016552((int)v4->Next[i].Next);
      v6 = v4[1].Next;
      sub_1000F0A1(v4->Next);
      sub_1000F417(v4);
      v4 = v6;
    }
    while ( v6 );
  }
  return sub_1000F0A1(*(LPVOID *)&v1[6].s.Depth);
}

//----- (10016B84) --------------------------------------------------------
int __thiscall sub_10016B84(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_1000F0A1(*(LPVOID *)(this + 12));
  return sub_1000F0A1(*(LPVOID *)(v1 + 4));
}

//----- (10016BA5) --------------------------------------------------------
int __thiscall sub_10016BA5(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_1000F0A1(*(LPVOID *)(this + 8));
  return sub_1000F0A1(*(LPVOID *)(v1 + 4));
}

//----- (10016BCA) --------------------------------------------------------
int __thiscall sub_10016BCA(void *this)
{
  int v1; // ebp@0
  void *v2; // edi@1
  int result; // eax@1

  v2 = this;
  *(_DWORD *)this = &off_1006662C;
  sub_100174A7((int)this, v1);
  sub_1001B1FA((int)((char *)v2 + 360));
  sub_1000F0A1(*((LPVOID *)v2 + 92));
  sub_1001B1FA((int)((char *)v2 + 348));
  sub_1000F0A1(*((LPVOID *)v2 + 89));
  sub_10011603((LPCRITICAL_SECTION)((char *)v2 + 280));
  sub_10016A93((PSLIST_HEADER)v2 + 25);
  sub_10016B0D((PSLIST_HEADER)v2 + 12);
  sub_1000F0A1(*((LPVOID *)v2 + 22));
  sub_10016BA5((int)((char *)v2 + 72));
  sub_10016BA5((int)((char *)v2 + 60));
  sub_10016BA5((int)((char *)v2 + 48));
  result = sub_1001C4C3((LPVOID *)v2 + 1);
  *(_DWORD *)v2 = &off_100665E4;
  return result;
}
// 100665E4: using guessed type int (__thiscall *off_100665E4)(LPVOID lpMem, char);
// 1006662C: using guessed type int (__thiscall *off_1006662C)(LPVOID lpMem, char);

//----- (10016C85) --------------------------------------------------------
int __thiscall sub_10016C85(int this, signed int a2)
{
  int v2; // esi@1
  signed int v3; // edx@1
  int result; // eax@2
  int v5; // ecx@3
  int v6; // eax@3
  int v7; // edx@4
  int v8; // eax@4
  int v9; // edx@5

  v2 = this;
  v3 = a2 >> *(_DWORD *)(this + 44);
  if ( v3 < *(_DWORD *)(this + 60) )
  {
    v5 = *(_DWORD *)(this + 56);
    v6 = *(_DWORD *)(v2 + 52);
    if ( v3 < v5 )
    {
      v8 = *(_DWORD *)(v6 + 4 * v3);
    }
    else
    {
      v7 = v3 - v5;
      v8 = *(_DWORD *)(v6 + 4 * v5 - 4);
      if ( v7 >= 0 )
      {
        v9 = v7 + 1;
        do
        {
          v8 = *(_DWORD *)(v8 + 4);
          --v9;
        }
        while ( v9 );
      }
    }
    result = *(_DWORD *)(*(_DWORD *)v8 + 4 * (a2 & (*(_DWORD *)(v2 + 40) - 1)));
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10016CCD) --------------------------------------------------------
char *__thiscall sub_10016CCD(LPVOID lpMem, char a2)
{
  int v2; // ebp@0
  LPVOID v3; // esi@1
  char *v4; // edi@2
  int v5; // ST0C_4@3
  char *result; // eax@4

  v3 = lpMem;
  if ( a2 & 2 )
  {
    v4 = (char *)lpMem - 4;
    sub_1000F684(v2, (int)lpMem, 16, *((_DWORD *)lpMem - 1), (int)sub_10016B84);
    if ( a2 & 1 )
    {
      v5 = 16 * *(_DWORD *)v4 + 4;
      sub_1000FAFF((char *)v3 - 4);
    }
    result = (char *)v3 - 4;
  }
  else
  {
    sub_10016B84((int)lpMem);
    if ( a2 & 1 )
      sub_1000F417(v3);
    result = (char *)v3;
  }
  return result;
}

//----- (10016D50) --------------------------------------------------------
LPVOID __thiscall sub_10016D50(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_100665CC;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 100665CC: using guessed type int (*off_100665CC[4])();

//----- (10016D73) --------------------------------------------------------
LPVOID __thiscall sub_10016D73(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_100665CC;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 100665CC: using guessed type int (*off_100665CC[4])();

//----- (10016D96) --------------------------------------------------------
LPVOID __thiscall sub_10016D96(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_10021CA9((signed __int32)lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (10016DBB) --------------------------------------------------------
LPVOID __thiscall sub_10016DBB(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_1006661C;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 1006661C: using guessed type int (__thiscall *off_1006661C)(LPVOID lpMem, char);

//----- (10016DDE) --------------------------------------------------------
LPVOID __thiscall sub_10016DDE(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_100665CC;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 100665CC: using guessed type int (*off_100665CC[4])();

//----- (10016E01) --------------------------------------------------------
LPVOID __thiscall sub_10016E01(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_100665E4;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 100665E4: using guessed type int (__thiscall *off_100665E4)(LPVOID lpMem, char);

//----- (10016E24) --------------------------------------------------------
LPVOID __thiscall sub_10016E24(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_10016BCA(lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (10016E49) --------------------------------------------------------
LPVOID __thiscall sub_10016E49(LPVOID lpMem, char a2)
{
  int v2; // ebp@0
  LPVOID v3; // esi@1

  v3 = lpMem;
  sub_1000F684(v2, (int)((char *)lpMem + 4), 8, 96, (int)sub_1001FF06);
  if ( a2 & 1 )
    sub_1000F417(v3);
  return v3;
}

//----- (10016EAB) --------------------------------------------------------
LPVOID __thiscall sub_10016EAB(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_1006661C;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 1006661C: using guessed type int (__thiscall *off_1006661C)(LPVOID lpMem, char);

//----- (10016ECE) --------------------------------------------------------
int __thiscall sub_10016ECE(int this, signed __int32 a2)
{
  int v2; // esi@1
  int v3; // ebx@1
  char v4; // al@1
  int v5; // edx@1
  volatile signed __int32 *v6; // edi@2
  bool v7; // sf@2
  unsigned __int8 v8; // of@2
  volatile signed __int32 *v9; // edx@3
  signed __int32 v10; // eax@3
  int v11; // edi@4
  volatile signed __int32 *v12; // edi@12
  LPVOID v13; // eax@14
  unsigned int v14; // ST0C_4@14
  signed __int32 v15; // ecx@14
  int v16; // eax@15
  int v17; // edx@20
  char v19; // [sp+Ch] [bp-24h]@25
  int v20; // [sp+14h] [bp-1Ch]@24
  int (*v21)(); // [sp+18h] [bp-18h]@24
  int v22; // [sp+1Ch] [bp-14h]@6
  volatile signed __int32 *v23; // [sp+20h] [bp-10h]@2
  signed __int32 v24; // [sp+24h] [bp-Ch]@3
  int v25; // [sp+28h] [bp-8h]@1
  char v26; // [sp+2Fh] [bp-1h]@1

  v2 = this;
  v26 = 0;
  v3 = 0;
  v4 = 0;
  v5 = *(_DWORD *)(this + 48);
  v25 = *(_DWORD *)(this + 48);
  do
  {
    v6 = (volatile signed __int32 *)(v5 + 8);
    v8 = __OFSUB__(*(_DWORD *)(v5 + 8), -1);
    v7 = *(_DWORD *)(v5 + 8) + 1 < 0;
    v23 = (volatile signed __int32 *)(v5 + 8);
    if ( v7 ^ v8 )
      goto LABEL_11;
    v9 = *(volatile signed __int32 **)v5;
    v10 = 0;
    v24 = 0;
    if ( *(_DWORD *)(v2 + 40) <= 0 )
      goto LABEL_10;
    v11 = v3;
    while ( *v9 )
    {
LABEL_8:
      ++v10;
      ++v9;
      ++v11;
      v24 = v10;
      if ( v10 >= *(_DWORD *)(v2 + 40) )
      {
        v6 = v23;
        goto LABEL_10;
      }
    }
    *(_DWORD *)(a2 + 24) = v11;
    v22 = *(_DWORD *)(v2 + 64);
    if ( _InterlockedCompareExchange(v9, a2, 0) )
    {
      v10 = v24;
      goto LABEL_8;
    }
    v3 = v11;
    v26 = 1;
    if ( v11 >= v22 )
      _InterlockedIncrement((volatile signed __int32 *)(v2 + 64));
    v6 = v23;
    _InterlockedCompareExchange(v23, -1, v24);
LABEL_10:
    v5 = v25;
    v4 = v26;
LABEL_11:
    if ( !v4 )
    {
      _InterlockedCompareExchange(v6, -2, -1);
      v3 += *(_DWORD *)(v2 + 40);
      v12 = (volatile signed __int32 *)(v5 + 4);
      if ( !*(_DWORD *)(v5 + 4) && !_InterlockedCompareExchange(v12, 1, 0) )
      {
        v13 = sub_1000F40E(4 * *(_DWORD *)(v2 + 40) | -((unsigned __int64)*(_DWORD *)(v2 + 40) >> 30 != 0));
        v14 = 4 * *(_DWORD *)(v2 + 40);
        v22 = (int)v13;
        sub_10028330(v13, 0, v14);
        v15 = (signed __int32)sub_1000F0A6(0xCu);
        v23 = (volatile signed __int32 *)v15;
        if ( v15 )
        {
          v16 = v22;
          *(_DWORD *)(v15 + 4) = 0;
          *(_DWORD *)(v15 + 8) = -1;
          *(_DWORD *)v15 = v16;
        }
        else
        {
          v15 = 0;
        }
        v17 = *(_DWORD *)(v2 + 60);
        if ( v17 < *(_DWORD *)(v2 + 56) )
        {
          *(_DWORD *)(*(_DWORD *)(v2 + 52) + 4 * v17) = v15;
          ++*(_DWORD *)(v2 + 60);
        }
        _InterlockedExchange(v12, v15);
        v5 = v25;
      }
      if ( *v12 == 1 )
      {
        v20 = 0;
        v21 = sub_10012578;
        do
          sub_10010BDE(&v19);
        while ( *v12 == 1 );
        v5 = v25;
      }
      v4 = v26;
    }
    v5 = *(_DWORD *)(v5 + 4);
    v25 = v5;
  }
  while ( !v4 );
  return v3;
}

//----- (10017031) --------------------------------------------------------
signed __int32 __thiscall sub_10017031(void *this, int a2)
{
  void *v2; // esi@1
  signed __int32 v3; // eax@1

  v2 = this;
  v3 = (signed __int32)sub_1000F0A6(8u);
  if ( v3 )
    *(_DWORD *)(v3 + 4) = a2;
  else
    v3 = 0;
  return sub_10018E3F((volatile signed __int32 *)v2 + 45, v3);
}

//----- (10017064) --------------------------------------------------------
int __thiscall sub_10017064(void *this, int a2)
{
  int result; // eax@2

  if ( *(_DWORD *)this )
  {
    *(_DWORD *)(a2 + 4) = *(_DWORD *)(*(_DWORD *)this + 4);
    *(_DWORD *)(a2 + 8) = *(_DWORD *)this;
    *(_DWORD *)(*(_DWORD *)(*(_DWORD *)this + 4) + 8) = a2;
    result = *(_DWORD *)this;
    *(_DWORD *)(*(_DWORD *)this + 4) = a2;
  }
  else
  {
    *(_DWORD *)this = a2;
    *(_DWORD *)(a2 + 8) = a2;
    result = *(_DWORD *)this;
    *(_DWORD *)(result + 4) = result;
  }
  return result;
}

//----- (1001709D) --------------------------------------------------------
int __thiscall sub_1001709D(void *this, int a2)
{
  int result; // eax@1

  result = *(_DWORD *)this;
  if ( *(_DWORD *)this )
  {
    *(_DWORD *)a2 = *(_DWORD *)result;
    *(_DWORD *)(a2 + 4) = *(_DWORD *)this;
    *(_DWORD *)(**(_DWORD **)this + 4) = a2;
    result = *(_DWORD *)this;
    **(_DWORD **)this = a2;
  }
  else
  {
    *(_DWORD *)a2 = a2;
    *(_DWORD *)(a2 + 4) = a2;
  }
  *(_DWORD *)this = a2;
  return result;
}

//----- (100170CA) --------------------------------------------------------
int __userpurge sub_100170CA@<eax>(int a1@<ebp>, int a2)
{
  void *v2; // ecx@1
  void *v3; // edi@1

  sub_1000FB4A();
  v3 = v2;
  sub_100118C2((int)((char *)v2 + 4));
  sub_1001709D(v3, *(_DWORD *)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  sub_100119E2((int)((char *)v3 + 4));
  return sub_1000FB24(0);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (100170FE) --------------------------------------------------------
int __thiscall sub_100170FE(void *this, int a2, unsigned int a3)
{
  void *v3; // ebx@1
  int v4; // ecx@1
  int result; // eax@4
  int (__thiscall *v6)(_DWORD); // esi@5
  int v7; // eax@5
  int v8; // esi@5
  char v9; // [sp+8h] [bp-20h]@3
  char v10; // [sp+14h] [bp-14h]@9
  int v11; // [sp+20h] [bp-8h]@4
  int v12; // [sp+24h] [bp-4h]@5

  v3 = this;
  v4 = a2;
  if ( !a2 )
  {
    sub_1000D988(&v10, (int)"ppVirtualProcessorRoots");
    sub_10027494((int)&v10, (int)&unk_10075484);
    goto LABEL_10;
  }
  if ( a3 < 1 )
  {
    sub_1000D988(&v9, (int)"count");
    sub_10027494((int)&v9, (int)&unk_10075484);
LABEL_10:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_100171B7);
  }
  result = 0;
  v11 = 0;
  if ( a3 )
  {
    do
    {
      v12 = *(_DWORD *)(v4 + 4 * result);
      v6 = (int (__thiscall *)(_DWORD))**(_DWORD **)v12;
      j_nullsub_1(v6);
      v7 = v6(v12);
      v8 = v7;
      if ( !*(_DWORD *)(*(_DWORD *)(*((_DWORD *)v3 + 9) + 4 * v7) + 188) )
        sub_100217C7(*(_DWORD *)(*((_DWORD *)v3 + 9) + 4 * v7));
      sub_1001FB94(*(void **)(*((_DWORD *)v3 + 8) + 4 * v8), v12, 0);
      _InterlockedIncrement((volatile signed __int32 *)v3 + 5);
      v4 = a2;
      result = v11 + 1;
      v11 = result;
    }
    while ( result < a3 );
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100171B7) --------------------------------------------------------
int __userpurge sub_100171B7@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // esi@1
  LPVOID v5; // ecx@1

  sub_1000FB4A();
  v4 = v3;
  v5 = sub_1000F0A6(0x138u);
  *(_DWORD *)(a1 - 16) = v5;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v5 )
    sub_1001666D(v5, v4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (100171F2) --------------------------------------------------------
int __userpurge sub_100171F2@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // edi@1
  LPVOID v5; // eax@1

  sub_1000FB4A();
  v4 = v3;
  *(_DWORD *)(a1 - 32) = 0;
  *(_DWORD *)(a1 - 28) = 0;
  *(_DWORD *)(a1 - 24) = 0;
  *(_DWORD *)(a1 - 20) = 0;
  v5 = sub_1000F0A6(0x138u);
  *(_DWORD *)(a1 - 16) = v5;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v5 )
    sub_100166A7(v5, v4, *(_DWORD *)(a1 + 8), a1 - 32);
  return sub_1000FB24(20);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001723E) --------------------------------------------------------
int __thiscall sub_1001723E(void *this)
{
  void *v1; // esi@1
  char v3; // [sp+4h] [bp-Ch]@3

  v1 = this;
  if ( (void *)sub_100178F6() == this )
  {
    sub_10019F7C((int)&v3);
    sub_10027494((int)&v3, (int)&unk_10075F1C);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10017286);
  }
  sub_10017286(v1, 1);
  return sub_10019CF5(7, 4, *((_DWORD *)v1 + 93));
}

//----- (10017286) --------------------------------------------------------
int __thiscall sub_10017286(void *this, int a2)
{
  int v2; // ebp@0
  void *v3; // esi@1
  LPVOID v4; // eax@1
  int v5; // edi@1
  int v6; // esi@6
  char v8; // [sp+8h] [bp-Ch]@7

  v3 = this;
  v4 = sub_100178E9();
  v5 = (int)v4;
  if ( v4 )
  {
    if ( *((void **)v4 + 7) == v3 )
    {
      sub_10019F7C((int)&v8);
      sub_10027494((int)&v8, (int)&unk_10075F1C);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_100172F1);
    }
    if ( !*((_BYTE *)v4 + 76) )
      sub_10020C16((char *)v4 - 4);
    sub_1001A7F7();
  }
  sub_10018F77(v3);
  v6 = sub_10017E87(v2, a2);
  sub_1001ACEE((LPVOID)v6, v5);
  return v6;
}

//----- (100172F1) --------------------------------------------------------
signed __int32 __thiscall sub_100172F1(int this)
{
  signed __int32 result; // eax@1

  result = _InterlockedCompareExchange((volatile signed __int32 *)(this + 404), -1073741824, 2147483648);
  JUMPOUT(result, 2147483648, sub_100199E9);
  return result;
}

//----- (10017314) --------------------------------------------------------
int __thiscall sub_10017314(void *this)
{
  int v1; // esi@1
  int result; // eax@1
  int i; // ebx@1
  int v4; // edi@2
  int (__thiscall *v5)(_DWORD); // esi@2

  v1 = (int)this;
  sub_1001AFBA();
  sub_1001914B(v1);
  result = sub_1001AFBA();
  for ( i = *(_DWORD *)(v1 + 180); i; i = *(_DWORD *)i )
  {
    v4 = *(_DWORD *)(i + 4);
    v5 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 24);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 24));
    result = v5(v4);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1001AFBA: using guessed type int sub_1001AFBA(void);

//----- (10017351) --------------------------------------------------------
int __thiscall sub_10017351(void *this, ULONG DueTime)
{
  void *v2; // esi@1
  int result; // eax@2
  unsigned __int64 v4; // [sp+4h] [bp-8h]@2

  v2 = this;
  if ( sub_100145C1() < 3 )
  {
    result = sub_10011D29(0, *((HANDLE *)v2 + 120), DueTime, 0x7FFFFFFFu);
  }
  else
  {
    v4 = sub_1003B2D0(DueTime, -10000i64);
    result = sub_1000EEB0(*((_DWORD *)v2 + 120), (int)&v4, 0x7FFFFFFF, 0);
  }
  return result;
}

//----- (1001740D) --------------------------------------------------------
unsigned int __cdecl sub_1001740D(int a1)
{
  unsigned int result; // eax@1

  result = *(_DWORD *)(*(_DWORD *)(a1 + 36) + 404) & 0xA0000000;
  if ( result != -1610612736 )
  {
    sub_100177AD(*(_DWORD *)(a1 + 16));
    *(_DWORD *)(a1 + 16) = 0;
    result = a1 + 72;
    _InterlockedExchange((volatile signed __int32 *)(a1 + 72), 0);
  }
  return result;
}

//----- (10017419) --------------------------------------------------------
unsigned int __cdecl sub_10017419(int a1)
{
  unsigned int result; // eax@1

  result = *(_DWORD *)(*(_DWORD *)(a1 + 36) + 404) & 0xA0000000;
  if ( result != -1610612736 )
  {
    sub_100177CE(*(_DWORD *)(a1 + 16));
    *(_DWORD *)(a1 + 16) = 0;
    result = a1 + 72;
    _InterlockedExchange((volatile signed __int32 *)(a1 + 72), 0);
  }
  return result;
}

//----- (10017425) --------------------------------------------------------
int *sub_10017425()
{
  int *result; // eax@1

  result = (int *)_InterlockedDecrement((volatile signed __int32 *)&dword_1007A044);
  if ( result == (int *)0x80000000 )
  {
    sub_10018B58();
    result = &dword_1007A044;
    _InterlockedAnd((volatile signed __int32 *)&dword_1007A044, 0x7FFFFFFFu);
  }
  return result;
}
// 1007A044: using guessed type int dword_1007A044;

//----- (1001744B) --------------------------------------------------------
int __usercall sub_1001744B@<eax>(int a1@<ebp>)
{
  int v1; // eax@1

  sub_1000FB4A();
  *(_DWORD *)(a1 - 16) = &dword_1007C594;
  sub_100124FC((volatile signed __int32 *)&dword_1007C594);
  v1 = dword_1007C584;
  *(_DWORD *)(a1 - 4) = 0;
  dword_1007C584 = v1 + 1;
  if ( v1 == 0 )
  {
    sub_10019847(a1);
    if ( !(dword_1007A044 & 0x80000000) )
    {
      sub_10018B44();
      _InterlockedOr((volatile signed __int32 *)&dword_1007A044, 0x80000000);
    }
  }
  dword_1007C594 = 0;
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1007A044: using guessed type int dword_1007A044;
// 1007C584: using guessed type int dword_1007C584;
// 1007C594: using guessed type int dword_1007C594;

//----- (100174A7) --------------------------------------------------------
int __usercall sub_100174A7@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // edi@1
  int i; // esi@1
  int v4; // eax@2
  void *v5; // ebx@2
  int j; // esi@5
  int v7; // eax@6
  void *v8; // ebx@6
  void *v9; // ecx@9
  int v10; // edi@11
  void (__thiscall *v11)(_DWORD); // esi@11
  PSINGLE_LIST_ENTRY v12; // eax@14

  v2 = a1;
  for ( i = 0; i < *(_DWORD *)(v2 + 44); ++i )
  {
    v4 = *(_DWORD *)(v2 + 32);
    v5 = *(void **)(v4 + 4 * i);
    if ( v5 )
    {
      sub_1001FA08(*(_DWORD *)(v4 + 4 * i));
      sub_1000F417(v5);
    }
  }
  for ( j = 0; j < *(_DWORD *)(v2 + 44); ++j )
  {
    v7 = *(_DWORD *)(v2 + 36);
    v8 = *(void **)(v7 + 4 * j);
    if ( v8 )
    {
      sub_100217AF(*(_DWORD *)(v7 + 4 * j));
      sub_1000F417(v8);
    }
  }
  sub_1000F0A1(*(LPVOID *)(v2 + 92));
  sub_1000F0A1(*(LPVOID *)(v2 + 32));
  sub_1000F0A1(*(LPVOID *)(v2 + 36));
  v9 = *(void **)(v2 + 28);
  if ( v9 )
    sub_10016CCD(v9, 3);
  sub_10012185(*(_DWORD *)(v2 + 24));
  *(_DWORD *)(v2 + 24) = 0;
  v10 = *(_DWORD *)(v2 + 424);
  v11 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v10 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v10 + 4));
  v11(v10);
  sub_1000FB4A();
  *(_DWORD *)(a2 - 16) = &dword_1007C594;
  sub_100124FC((volatile signed __int32 *)&dword_1007C594);
  *(_DWORD *)(a2 - 4) = 0;
  --dword_1007C584;
  if ( !dword_1007C584 )
  {
    sub_1001EB7E();
    while ( 1 )
    {
      v12 = InterlockedPopEntrySList(&stru_1007C5A0);
      if ( !v12 )
        break;
      sub_10016E49(v12, 1);
    }
  }
  dword_1007C594 = 0;
  return sub_1000FB24(4);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1007C584: using guessed type int dword_1007C584;
// 1007C594: using guessed type int dword_1007C594;

//----- (10017556) --------------------------------------------------------
int __thiscall sub_10017556(int this)
{
  int v1; // edi@1
  void *v2; // ebx@1
  signed int i; // eax@1
  unsigned int v4; // esi@3
  int result; // eax@3

  v1 = this;
  v2 = (void *)(this + 324);
  sub_100124EC((void *)(this + 324));
  for ( i = sub_10019DCA(v1); ; i = sub_10019D82(v1, v4) )
  {
    v4 = i;
    result = sub_1001252F(v2);
    if ( !v4 )
      break;
    sub_10017599(v1, v4);
    sub_100124EC(v2);
  }
  return result;
}

//----- (10017599) --------------------------------------------------------
int __thiscall sub_10017599(int this, unsigned int a2)
{
  int v2; // edi@1
  int v3; // ebx@1
  int v4; // eax@1
  unsigned int v5; // eax@3
  int v6; // eax@5
  int v7; // esi@5
  int result; // eax@7
  int v9; // eax@8
  int (__cdecl *v10)(_DWORD); // esi@8
  int v11; // ST00_4@8
  int v12; // [sp+Ch] [bp-Ch]@1
  int *v13; // [sp+10h] [bp-8h]@1
  int v14; // [sp+14h] [bp-4h]@1

  v12 = 0;
  v2 = this;
  v13 = &v12;
  v3 = this + 324;
  v14 = this + 324;
  sub_100124EC((void *)(this + 324));
  v4 = *(_DWORD *)(v2 + 316);
  if ( v4 )
  {
    do
    {
      if ( a2 )
      {
        v5 = *(_DWORD *)(v4 + 8);
        if ( v5 < *(_DWORD *)(v2 + 340) || v5 > a2 )
          break;
      }
      v6 = sub_10017809((void *)(v2 + 316));
      v7 = v6 + 12;
      *(_DWORD *)v7 = 0;
      *v13 = v6;
      v4 = *(_DWORD *)(v2 + 316);
      v13 = (int *)v7;
    }
    while ( v4 );
    v3 = v14;
  }
  result = sub_1001252F((void *)v3);
  while ( v12 )
  {
    v9 = sub_10017809(&v12);
    v10 = *(int (__cdecl **)(_DWORD))v9;
    v11 = *(_DWORD *)(v9 + 4);
    j_nullsub_1(*(int (__cdecl **)(_DWORD))v9);
    result = v10(v11);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10017631) --------------------------------------------------------
signed int __thiscall sub_10017631(int this)
{
  int v1; // ebx@1
  int v2; // esi@1
  signed int v3; // edi@1
  int v4; // eax@2
  signed int v5; // ecx@3
  int v6; // eax@4
  int v7; // eax@5
  signed int v8; // eax@6
  int v10; // [sp+Ch] [bp-10h]@2
  int v11; // [sp+10h] [bp-Ch]@1
  signed int v12; // [sp+14h] [bp-8h]@3
  char v13; // [sp+1Bh] [bp-1h]@1

  v1 = this;
  v13 = 0;
  v2 = 0;
  v3 = 0;
  v11 = 0;
  if ( *(_DWORD *)(this + 44) > 0 )
  {
    while ( 1 )
    {
      v4 = *(_DWORD *)(*(_DWORD *)(v1 + 32) + 4 * v2);
      v10 = v4;
      if ( v4 )
      {
        v5 = 0;
        v12 = 0;
        if ( *(_DWORD *)(v4 + 120) > 0 )
          break;
      }
LABEL_15:
      ++v2;
      v11 = v2;
      if ( v2 >= *(_DWORD *)(v1 + 44) )
        return v3;
    }
    v6 = v4 + 56;
    while ( 1 )
    {
      v7 = sub_10016C85(v6, v5);
      if ( v7 )
      {
        v8 = *(_DWORD *)(v7 + 192);
        if ( (unsigned int)v8 < *(_DWORD *)(v1 + 340) )
          v8 = -1;
        if ( !v13 )
        {
          v13 = 1;
LABEL_12:
          v3 = v8;
          goto LABEL_13;
        }
        if ( v3 > (unsigned int)v8 )
          goto LABEL_12;
      }
LABEL_13:
      v6 = v10 + 56;
      v5 = v12 + 1;
      v12 = v5;
      if ( v5 >= *(_DWORD *)(v10 + 120) )
      {
        v2 = v11;
        goto LABEL_15;
      }
    }
  }
  return v3;
}

//----- (100176BC) --------------------------------------------------------
int __thiscall sub_100176BC(void *this, int a2)
{
  void *v2; // esi@1
  int result; // eax@1
  unsigned int v4; // edi@3
  unsigned int v5; // edx@3

  v2 = this;
  result = *(_DWORD *)a2;
  if ( *(_DWORD *)this != *(_DWORD *)a2 )
    result = (int)sub_10018EC5((int)this, *(_DWORD *)a2);
  v4 = 0;
  v5 = (unsigned int)(*(_DWORD *)v2 + 31) >> 5;
  if ( v5 )
  {
    do
    {
      result = *(_DWORD *)(*(_DWORD *)(a2 + 4) + 4 * v4);
      *(_DWORD *)(*((_DWORD *)v2 + 1) + 4 * v4++) = result;
    }
    while ( v4 < v5 );
  }
  return result;
}

//----- (100176F9) --------------------------------------------------------
int __usercall sub_100176F9@<eax>(int a1@<ebp>)
{
  int v1; // ebx@1
  int v2; // edi@1
  void (__thiscall *v3)(_DWORD); // esi@1

  v1 = sub_10017DEB(a1);
  v2 = sub_10017286((void *)v1, 0);
  v3 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 20);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 20));
  v3(v1);
  return v2;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10017724) --------------------------------------------------------
int __stdcall sub_10017724(int a1)
{
  int savedregs; // [sp+0h] [bp+0h]@0

  return sub_1001884E(savedregs, a1);
}

//----- (1001772D) --------------------------------------------------------
int sub_1001772D()
{
  int v0; // ebp@0
  int v2; // [sp+0h] [bp-10h]@1
  int v3; // [sp+4h] [bp-Ch]@1
  int v4; // [sp+8h] [bp-8h]@1
  int v5; // [sp+Ch] [bp-4h]@1

  v2 = 0;
  v3 = 0;
  v4 = 0;
  v5 = 0;
  return sub_1001884E(v0, (int)&v2);
}

//----- (1001774E) --------------------------------------------------------
int __cdecl sub_1001774E(void *a1)
{
  int v1; // ebp@0
  int v2; // eax@1
  int result; // eax@2

  sub_1001C76D(a1);
  sub_1001744B(v1);
  v2 = sub_10023693(v1);
  if ( v2 )
    result = v2 + 8;
  else
    result = 0;
  return result;
}

//----- (10017774) --------------------------------------------------------
int __thiscall sub_10017774(int this)
{
  int result; // eax@1

  result = _InterlockedDecrement((volatile signed __int32 *)(this + 392));
  if ( !result )
    result = sub_10017926(this);
  return result;
}

//----- (1001778F) --------------------------------------------------------
signed __int32 __thiscall sub_1001778F(int this)
{
  signed __int32 result; // eax@1

  result = _InterlockedIncrement((volatile signed __int32 *)(this + 484));
  if ( result == 1 )
    result = SetEvent(*(HANDLE *)(this + 472));
  return result;
}

//----- (100177AD) --------------------------------------------------------
int __stdcall sub_100177AD(int a1)
{
  int v1; // esi@1
  void *v2; // eax@2
  int result; // eax@2

  v1 = a1;
  while ( v1 )
  {
    v2 = (void *)(v1 - 4);
    v1 = *(_DWORD *)v1;
    result = sub_1000F417(v2);
  }
  return result;
}

//----- (100177CE) --------------------------------------------------------
int __stdcall sub_100177CE(int a1)
{
  int v1; // esi@1
  int v2; // eax@2
  int result; // eax@2

  v1 = a1;
  while ( v1 )
  {
    v2 = v1 - 52;
    v1 = *(_DWORD *)v1;
    result = sub_10016552(v2);
  }
  return result;
}

//----- (100177EC) --------------------------------------------------------
int __thiscall sub_100177EC(void *this)
{
  void *v1; // eax@1
  int v2; // edx@1
  int result; // eax@2
  int v4; // ecx@3

  v1 = this;
  v2 = *(_DWORD *)this;
  if ( *(_DWORD *)this )
  {
    v4 = *(_DWORD *)(v2 + 232);
    *(_DWORD *)v1 = v4;
    if ( !v4 )
      *((_DWORD *)v1 + 1) = v1;
    result = v2;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10017809) --------------------------------------------------------
int __thiscall sub_10017809(void *this)
{
  void *v1; // eax@1
  int v2; // edx@1
  int result; // eax@2
  int v4; // ecx@3

  v1 = this;
  v2 = *(_DWORD *)this;
  if ( *(_DWORD *)this )
  {
    v4 = *(_DWORD *)(v2 + 12);
    *(_DWORD *)v1 = v4;
    if ( !v4 )
      *((_DWORD *)v1 + 1) = v1;
    result = v2;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10017857) --------------------------------------------------------
int __thiscall sub_10017857(int this)
{
  int v1; // esi@1

  v1 = this;
  UnregisterWaitEx(*(HANDLE *)(this + 476), (HANDLE)0xFFFFFFFF);
  if ( sub_100145C1() < 3 )
    sub_10011DE2(0, *(HANDLE *)(v1 + 480), (HANDLE)0xFFFFFFFF);
  else
    sub_10012257(*(_DWORD *)(v1 + 480));
  CloseHandle(*(HANDLE *)(v1 + 472));
  return sub_10017774(v1);
}

//----- (100178A6) --------------------------------------------------------
char __thiscall sub_100178A6(void *this, int a2, char a3)
{
  int v3; // esi@1
  int v4; // edi@1
  char result; // al@3

  v3 = 0;
  v4 = (int)this;
  if ( a3 )
    v3 = sub_1001ACD0(a2);
  sub_10019053(v4, a2);
  result = sub_10019095((void *)v4);
  if ( v3 )
  {
    result = *(_BYTE *)(v3 + 76);
    if ( !result )
      result = sub_10020EBC((void *)(v3 - 4));
  }
  return result;
}

//----- (100178E9) --------------------------------------------------------
LPVOID sub_100178E9()
{
  return sub_10012193(dword_1007C57C);
}

//----- (100178F6) --------------------------------------------------------
int sub_100178F6()
{
  int v0; // eax@1
  int result; // eax@2

  v0 = (int)sub_100178E9();
  if ( v0 )
    result = sub_10018398(v0);
  else
    result = 0;
  return result;
}

//----- (10017909) --------------------------------------------------------
int __thiscall sub_10017909(int this)
{
  unsigned int v1; // edx@1
  unsigned int v2; // esi@1
  int result; // eax@2

  v1 = (unsigned int)(*(_DWORD *)this + 31) >> 5;
  v2 = 0;
  if ( v1 )
  {
    do
    {
      result = *(_DWORD *)(this + 4);
      *(_DWORD *)(result + 4 * v2++) = -1;
    }
    while ( v2 < v1 );
  }
  return result;
}

//----- (10017926) --------------------------------------------------------
int __thiscall sub_10017926(int this)
{
  int v1; // ebp@0
  int v2; // ebx@1
  int v3; // edi@1
  void (__thiscall *v4)(_DWORD); // esi@1
  signed __int32 v5; // edi@1
  signed __int32 v6; // esi@2
  PSINGLE_LIST_ENTRY v7; // eax@3
  int i; // edx@3
  int v9; // esi@4
  PSINGLE_LIST_ENTRY v10; // eax@5
  int v11; // ebx@6
  int v12; // edi@7
  void (__thiscall *v13)(_DWORD, _DWORD); // esi@7
  int v14; // esi@10
  int (__thiscall *v15)(_DWORD, _DWORD); // esi@12
  int v17; // [sp+Ch] [bp-8h]@1

  v2 = this;
  v17 = this;
  v3 = *(_DWORD *)(this + 428);
  v4 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 4));
  v4(v3);
  CloseHandle(*(HANDLE *)(v2 + 380));
  v5 = _InterlockedExchange((volatile signed __int32 *)(v2 + 180), 0);
  if ( v5 )
  {
    do
    {
      v6 = *(_DWORD *)v5;
      sub_1001652E(*(_DWORD *)(v5 + 4));
      sub_1000F417((LPVOID)v5);
      v5 = v6;
    }
    while ( v6 );
  }
  v7 = InterlockedFlushSList((PSLIST_HEADER)(v2 + 496));
  for ( i = v7 != 0 ? (unsigned int)&v7[-1] : 0; i; i = v9 != 0 ? v9 - 4 : 0 )
  {
    v9 = *(_DWORD *)(i + 4);
    sub_1001650C(i);
  }
  v10 = InterlockedFlushSList((PSLIST_HEADER)(v2 + 504));
  if ( v10 != 0 ? (unsigned int)&v10[-3] : 0 )
  {
    v11 = v10 != 0 ? (unsigned int)&v10[-3] : 0;
    do
    {
      v12 = *(_DWORD *)(v11 + 12) != 0 ? *(_DWORD *)(v11 + 12) - 12 : 0;
      v13 = (void (__thiscall *)(_DWORD, _DWORD))**(_DWORD **)v11;
      j_nullsub_1(**(_DWORD **)v11);
      v13(v11, 1);
      v11 = v12;
    }
    while ( v12 );
    v2 = v17;
  }
  sub_10019CF5(2, 4, *(_DWORD *)(v2 + 372));
  while ( *(_DWORD *)(v2 + 184) )
  {
    v14 = sub_1001945C(v1);
    SetEvent(*(HANDLE *)(v14 + 8));
    CloseHandle(*(HANDLE *)(v14 + 8));
    sub_1000F417((LPVOID)v14);
  }
  v15 = (int (__thiscall *)(_DWORD, _DWORD))**(_DWORD **)v2;
  j_nullsub_1(**(_DWORD **)v2);
  return v15(v2, 1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10017A4F) --------------------------------------------------------
int __thiscall sub_10017A4F(void *this)
{
  void *v1; // esi@1
  int v2; // ebx@1
  LPVOID v3; // eax@1
  LPVOID v4; // edi@1

  v1 = this;
  v2 = 0;
  v3 = sub_100178E9();
  v4 = v3;
  if ( v3 && *((void **)v3 + 7) == v1 && !*((_BYTE *)v3 + 76) )
  {
    sub_1001AA0D();
    v2 = *(_DWORD *)(*((_DWORD *)v4 + 39) + 80);
    sub_1001AA0D();
  }
  return v2;
}

//----- (10017A8A) --------------------------------------------------------
int __thiscall sub_10017A8A(int this, int a2)
{
  int v2; // edi@1
  int v3; // esi@1
  int v5; // [sp+8h] [bp-8h]@3
  int v6; // [sp+Ch] [bp-4h]@3

  v2 = this;
  v3 = 0;
  if ( (*(_DWORD *)a2 & 0xFFFFFFF) == 2 )
  {
    v3 = *(_DWORD *)(*(_DWORD *)(this + 32) + 4 * *(_DWORD *)(a2 + 8));
  }
  else if ( (*(_DWORD *)a2 & 0xFFFFFFF) == 3 )
  {
    v6 = *(_DWORD *)(a2 + 8);
    if ( sub_1001B6B7((unsigned int *)(this + 348), (int)&v6, (int)&v5) )
      v3 = *(_DWORD *)(*(_DWORD *)(v2 + 32) + 4 * v5);
  }
  return v3;
}

//----- (10017AE5) --------------------------------------------------------
int __stdcall sub_10017AE5(int a1, int a2, int a3, int a4)
{
  int v4; // esi@1
  int result; // eax@1

  v4 = a1;
  for ( result = 0; v4 < a2 && !result; result = sub_10016C85(a4, v4++) )
    ;
  *(_DWORD *)a3 = v4 - 1;
  return result;
}

//----- (10017B10) --------------------------------------------------------
int __thiscall sub_10017B10(void *this, int a2, int a3, int a4)
{
  int v4; // esi@1
  int result; // eax@1
  void *v6; // edi@1

  v4 = a2;
  result = 0;
  v6 = this;
  while ( v4 < a3 && !result )
    result = sub_10016C85((int)((char *)v6 + 56), v4++);
  *(_DWORD *)a4 = v4 - 1;
  return result;
}

//----- (10017B3F) --------------------------------------------------------
char __thiscall sub_10017B3F(int this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  char v7; // bl@1
  int v8; // esi@1
  int v9; // edi@3
  unsigned int v10; // edi@6
  int v11; // eax@6
  int v12; // edi@10
  int v13; // ecx@11
  int v15; // [sp-14h] [bp-28h]@4
  int v16; // [sp-10h] [bp-24h]@4
  int v17; // [sp-Ch] [bp-20h]@4
  int v18; // [sp-8h] [bp-1Ch]@4
  int v19; // [sp-4h] [bp-18h]@4
  int v20; // [sp+10h] [bp-4h]@6

  v7 = 1;
  v8 = this;
  if ( (a3 & 0xFFFFFFF) != 1 )
  {
    if ( (a3 & 0xFFFFFFFu) - 2 <= 1 )
    {
      v9 = sub_10017A8A(this, (int)&a3);
      if ( v9 )
      {
        v19 = a7;
        sub_10019F0A((int)&v15, (int)&a3);
        if ( sub_1001FD8D((void *)v9, a2, v15, v16, v17, v18, v19) )
          return v7;
      }
    }
    goto LABEL_10;
  }
  v10 = 0;
  v11 = *(_DWORD *)(this + 28) + 16 * a5;
  v20 = *(_DWORD *)(this + 28) + 16 * a5;
  if ( *(_DWORD *)(this + 44) <= 0 )
  {
LABEL_10:
    v12 = 0;
    if ( *(_DWORD *)(v8 + 44) <= 0 )
    {
LABEL_15:
      v7 = 0;
    }
    else
    {
      while ( 1 )
      {
        v13 = *(_DWORD *)(*(_DWORD *)(v8 + 32) + 4 * v12);
        if ( v13 )
        {
          if ( *(_DWORD *)(v13 + 28) > 0 && sub_1001FD8D((void *)v13, a2, 0, 0, 0, 0, a7) )
            break;
        }
        ++v12;
        if ( v12 >= *(_DWORD *)(v8 + 44) )
          goto LABEL_15;
      }
    }
    return v7;
  }
  while ( 1 )
  {
    if ( (1 << (v10 & 0x1F)) & *(_DWORD *)(*(_DWORD *)(v11 + 4) + 4 * (v10 >> 5)) )
    {
      v19 = a7;
      sub_10019F0A((int)&v15, (int)&a3);
      if ( sub_1001FD8D(*(void **)(*(_DWORD *)(v8 + 32) + 4 * v10), a2, v15, v16, v17, v18, v19) )
        return v7;
    }
    v11 = v20;
    ++v10;
    if ( (signed int)v10 >= *(_DWORD *)(v8 + 44) )
      goto LABEL_10;
  }
}

//----- (10017C39) --------------------------------------------------------
char __thiscall sub_10017C39(int this)
{
  int v1; // ecx@1
  char v2; // dl@1

  v1 = *(_DWORD *)(this + 180);
  v2 = 0;
  while ( v1 )
  {
    if ( !*(_BYTE *)(*(_DWORD *)(v1 + 4) + 236) && *(_DWORD *)(*(_DWORD *)(v1 + 4) + 44) )
      return 1;
    v1 = *(_DWORD *)v1;
  }
  return v2;
}

//----- (10017C63) --------------------------------------------------------
char __thiscall sub_10017C63(void *this)
{
  void *v1; // eax@1
  int v2; // ecx@1
  char v3; // bl@1
  int v4; // esi@2
  signed int v5; // edi@3
  int v6; // eax@4
  signed int v7; // edi@12
  int v8; // eax@13
  void *v10; // [sp+4h] [bp-Ch]@1
  void *v11; // [sp+8h] [bp-8h]@4
  void *v12; // [sp+8h] [bp-8h]@13
  int i; // [sp+Ch] [bp-4h]@1

  v1 = this;
  v2 = 0;
  v3 = 0;
  v10 = v1;
  for ( i = 0; v2 < *((_DWORD *)v10 + 11); i = v2 )
  {
    v4 = *(_DWORD *)(*((_DWORD *)v1 + 9) + 4 * v2);
    if ( v4 )
    {
      v5 = 0;
      if ( *(_DWORD *)(v4 + 80) > 0 )
      {
        while ( 1 )
        {
          v6 = sub_10016C85(v4 + 16, v5);
          v11 = (void *)v6;
          if ( v6 )
          {
            if ( sub_100226AD(v6) || (unsigned __int8)sub_100226B5(v11) )
              break;
          }
          ++v5;
          if ( v5 >= *(_DWORD *)(v4 + 80) )
            goto LABEL_10;
        }
        v3 = 1;
LABEL_10:
        v2 = i;
      }
      if ( v3 )
        return v3;
      v7 = 0;
      if ( *(_DWORD *)(v4 + 160) > 0 )
      {
        while ( 1 )
        {
          v8 = sub_10016C85(v4 + 96, v7);
          v12 = (void *)v8;
          if ( v8 )
          {
            if ( sub_100226AD(v8) || (unsigned __int8)sub_100226B5(v12) )
              break;
          }
          ++v7;
          if ( v7 >= *(_DWORD *)(v4 + 160) )
            goto LABEL_19;
        }
        v3 = 1;
LABEL_19:
        v2 = i;
      }
    }
    v1 = v10;
    ++v2;
  }
  return v3;
}

//----- (10017D2C) --------------------------------------------------------
int __thiscall sub_10017D2C(int this)
{
  return *(_DWORD *)(sub_100180CC(this) + 8);
}

//----- (10017D35) --------------------------------------------------------
int __userpurge sub_10017D35@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // eax@1
  int v6; // edi@1
  int v7; // ecx@1
  int v8; // eax@1
  int v9; // eax@2
  int v10; // eax@3
  int v11; // ecx@5
  int v12; // esi@5
  int v13; // eax@5
  int v14; // eax@6

  sub_1000FB4A();
  v4 = v3;
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(a1 - 16) = 0;
  v5 = sub_100145C6();
  v6 = *(_DWORD *)(a1 + 8);
  sub_100166FB(*(void **)(a1 + 8), v5);
  v7 = *(_DWORD *)(a1 + 12);
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(a1 - 16) = 1;
  v8 = *(_DWORD *)v7 & 0xFFFFFFF;
  if ( !v8 )
  {
    sub_10017909(v6);
    return sub_1000FB24(12);
  }
  v9 = v8 - 1;
  if ( !v9 )
  {
    v14 = 16 * *(_DWORD *)(v7 + 8) + 8 + *(_DWORD *)(v4 + 28);
    goto LABEL_8;
  }
  v10 = v9 - 1;
  if ( !v10 )
  {
    v14 = *(_DWORD *)(*(_DWORD *)(v4 + 32) + 4 * *(_DWORD *)(v7 + 8)) + 8;
LABEL_8:
    sub_100176BC((void *)v6, v14);
    return sub_1000FB24(12);
  }
  if ( v10 == 1 )
  {
    *(_DWORD *)(a1 - 20) = *(_DWORD *)(v7 + 8);
    sub_1001B6B7((unsigned int *)(v4 + 360), a1 - 20, a1 - 24);
    v11 = *(_DWORD *)(v6 + 4);
    v12 = *(_DWORD *)(a1 - 24) >> 5;
    v13 = *(_DWORD *)(v11 + 4 * v12);
    _bittestandset((unsigned int *)&v13, *(_DWORD *)(a1 - 24) & 0x1F);
    *(_DWORD *)(v11 + 4 * v12) = v13;
  }
  return sub_1000FB24(12);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10017DEB) --------------------------------------------------------
int __usercall sub_10017DEB@<eax>(int a1@<ebp>)
{
  const void **v1; // eax@3
  int v2; // edi@5
  void (__thiscall *v3)(_DWORD); // esi@5
  signed int v5; // [sp-4h] [bp-4h]@1

  v5 = 8;
  sub_1000FB4A();
  *(_DWORD *)(a1 - 20) = &dword_1007C59C;
  sub_100124FC((volatile signed __int32 *)&dword_1007C59C);
  *(_DWORD *)(a1 - 4) = 0;
  if ( !dword_1007C574 || !sub_10019693((void *)dword_1007C574) )
  {
    sub_1001C42C(a1 - 16, 0, 8);
    v1 = (const void **)dword_1007C578;
    *(_BYTE *)(a1 - 4) = 1;
    if ( v1 )
      sub_1001C4CF((void **)(a1 - 16), v1);
    dword_1007C574 = sub_1001774E((void *)(a1 - 16));
    sub_100183A3(dword_1007C574);
    v2 = dword_1007C574;
    v3 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)dword_1007C574 + 16);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)dword_1007C574 + 16));
    v3(v2);
    sub_1001C4C3((LPVOID *)(a1 - 16));
  }
  dword_1007C59C = 0;
  return sub_1000FB24(v5);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 100183A3: using guessed type int __thiscall sub_100183A3(_DWORD);
// 1007C574: using guessed type int dword_1007C574;
// 1007C578: using guessed type int dword_1007C578;
// 1007C59C: using guessed type int dword_1007C59C;

//----- (10017E87) --------------------------------------------------------
int __userpurge sub_10017E87@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // edi@1
  PSINGLE_LIST_ENTRY v4; // eax@1
  void *v5; // esi@1
  LPVOID v6; // eax@2

  sub_1000FB4A();
  v3 = v2;
  v4 = InterlockedPopEntrySList((PSLIST_HEADER)(v2 + 496));
  v5 = (void *)(v4 != 0 ? (unsigned int)&v4[-1] : 0);
  if ( v5 )
  {
    sub_10023400(v5, v3, *(_DWORD *)(a1 + 8));
  }
  else
  {
    v6 = sub_1000F0A6(0xB0u);
    *(_DWORD *)(a1 - 16) = v6;
    *(_DWORD *)(a1 - 4) = 0;
    if ( v6 )
      sub_10023164(a1, v3, *(_DWORD *)(a1 + 8));
  }
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10017EE7) --------------------------------------------------------
int __userpurge sub_10017EE7@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // edi@1
  char v4; // bl@1
  int (__thiscall *v5)(_DWORD); // esi@2
  int v6; // esi@4
  int v7; // eax@5
  int v8; // edx@5
  int v9; // edx@8
  PSINGLE_LIST_ENTRY v10; // eax@9
  int v11; // ebx@9
  int (__thiscall *v12)(_DWORD); // esi@10
  int v13; // edi@11
  void (__thiscall *v14)(_DWORD); // esi@11
  int v16; // [sp-8h] [bp-8h]@0

  sub_1000FBB5((int)sub_10062BA1, 16);
  v3 = v2;
  *(_DWORD *)(a1 - 28) = v2;
  v4 = *(_BYTE *)(a1 + 8);
  if ( v4 )
  {
    v5 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 88);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 88));
    if ( (unsigned __int8)v5(v3) && sub_100181C4(v3) )
      return sub_1000FB24(v16);
    v6 = sub_10019BF1(v3, 1);
    if ( v6 )
    {
      v7 = sub_10012022() - *(_DWORD *)(v3 + 464);
      *(_DWORD *)(a1 - 20) = v8;
      if ( v7 < (unsigned int)v6 )
        return sub_1000FB24(v16);
      v4 = 0;
    }
  }
  _InterlockedIncrement((volatile signed __int32 *)(v3 + 400));
  if ( !v4 )
  {
    *(_DWORD *)(v3 + 464) = sub_10012022();
    *(_DWORD *)(v3 + 468) = v9;
  }
  v10 = InterlockedPopEntrySList((PSLIST_HEADER)(v3 + 488));
  v11 = v10 != 0 ? (unsigned int)&v10[-2] : 0;
  *(_DWORD *)(a1 - 20) = v11;
  if ( !v11 )
  {
    v12 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 64);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 64));
    v11 = v12(v3);
    *(_DWORD *)(a1 - 20) = v11;
    sub_10017031((void *)v3, v11);
    _InterlockedIncrement((volatile signed __int32 *)(v3 + 392));
  }
  sub_10020F5A(v11);
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(v11 + 156) = 0;
  v13 = *(_DWORD *)(v3 + 428);
  v16 = v11;
  v14 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v13 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v13 + 8));
  v14(v13);
  if ( v11 )
  {
    *(_DWORD *)(v11 + 16) = 0;
    *(_DWORD *)(v11 + 20) = 0;
  }
  return sub_1000FB24(v16);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10018007) --------------------------------------------------------
signed __int32 __thiscall sub_10018007(int this)
{
  return _InterlockedIncrement((volatile signed __int32 *)(this + 328));
}

//----- (10018014) --------------------------------------------------------
signed __int32 __thiscall sub_10018014(int this)
{
  return _InterlockedIncrement((volatile signed __int32 *)(this + 332));
}

//----- (10018021) --------------------------------------------------------
signed __int32 sub_10018021()
{
  return _InterlockedIncrement((volatile signed __int32 *)&dword_1007C580);
}
// 1007C580: using guessed type int dword_1007C580;

//----- (1001802E) --------------------------------------------------------
int __thiscall sub_1001802E(void *this)
{
  void *v1; // esi@1
  int v2; // edi@1
  int v3; // eax@1
  int v4; // esi@1

  v1 = this;
  v2 = (int)((char *)this + 308);
  sub_100118C2((int)((char *)this + 308));
  v3 = sub_10019410((char *)v1 + 304);
  v4 = v3;
  if ( v3 )
    *(_DWORD *)(v3 + 12) = 1;
  sub_100119E2(v2);
  return v4;
}

//----- (10018063) --------------------------------------------------------
int __stdcall sub_10018063(int a1, int a2, int a3)
{
  int v3; // edx@1
  int result; // eax@2

  v3 = *(_DWORD *)a1 + 1;
  if ( v3 <= a2 || (result = sub_10017AE5(v3, *(_DWORD *)(a3 + 64), a1, a3), v3 = 0, !result) )
    result = sub_10017AE5(v3, a2, a1, a3);
  return result;
}

//----- (1001809F) --------------------------------------------------------
int __thiscall sub_1001809F(int this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // eax@1

  v3 = this;
  v4 = sub_100180ED(this, *(_DWORD *)(a3 + 184));
  return *(_DWORD *)(*(_DWORD *)(v3 + 36) + 4 * v4) != a2 ? *(_DWORD *)(*(_DWORD *)(v3 + 36) + 4 * v4) : 0;
}

//----- (100180CC) --------------------------------------------------------
int __thiscall sub_100180CC(int this)
{
  int v1; // edx@1
  int v2; // esi@1

  v1 = *(_DWORD *)(this + 376);
  v2 = *(_DWORD *)(*(_DWORD *)(this + 36) + 4 * v1);
  *(_DWORD *)(this + 376) = sub_100180ED(this, v1);
  return v2;
}

//----- (100180ED) --------------------------------------------------------
int __thiscall sub_100180ED(int this, int a2)
{
  int v2; // edx@1

  v2 = a2;
  do
    v2 = (v2 + 1) % *(_DWORD *)(this + 44);
  while ( !*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 36) + 4 * v2) + 188) );
  return v2;
}

//----- (1001810F) --------------------------------------------------------
int __thiscall sub_1001810F(int this, int a2, int a3)
{
  void *v3; // edi@1
  int v4; // edx@1
  int result; // eax@2

  v3 = (void *)this;
  v4 = *(_DWORD *)a2 + 1;
  if ( v4 <= a3 || (result = sub_10017B10((void *)this, v4, *(_DWORD *)(this + 120), a2), v4 = 0, !result) )
    result = sub_10017B10(v3, v4, a3, a2);
  return result;
}

//----- (10018144) --------------------------------------------------------
int __thiscall sub_10018144(int this)
{
  return *(_DWORD *)(this + 20);
}

//----- (10018148) --------------------------------------------------------
void *__thiscall sub_10018148(int this, void *a2)
{
  sub_1001C44C(a2, (const void **)(this + 4));
  return a2;
}

//----- (10018165) --------------------------------------------------------
int __thiscall sub_10018165(int this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3)
{
  PSINGLE_LIST_ENTRY v3; // eax@1
  int v4; // edx@1
  LPVOID v5; // eax@2

  v3 = InterlockedPopEntrySList((PSLIST_HEADER)(this + 504));
  v4 = v3 != 0 ? (unsigned int)&v3[-3] : 0;
  if ( v4 )
  {
    (v3 != 0 ? &v3[-2] : 4)->Next = a2;
    (v3 != 0 ? &v3[-1] : 8)->Next = a3;
    goto LABEL_6;
  }
  v5 = sub_1000F0A6(0x10u);
  v4 = (int)v5;
  if ( v5 )
  {
    *((_DWORD *)v5 + 1) = a2;
    *(_DWORD *)v5 = &off_10066624;
    *((_DWORD *)v5 + 2) = a3;
LABEL_6:
    *(_DWORD *)(v4 + 12) = 0;
    return v4;
  }
  return 0;
}
// 10066624: using guessed type int (__thiscall *off_10066624)(LPVOID lpMem, char);

//----- (100181C4) --------------------------------------------------------
int __thiscall sub_100181C4(int this)
{
  PSINGLE_LIST_ENTRY v1; // eax@1

  v1 = InterlockedPopEntrySList((PSLIST_HEADER)(this + 512));
  return v1 != 0 ? (unsigned int)&v1[-2] : 0;
}

//----- (100181DB) --------------------------------------------------------
#error "10017851: call analysis failed (funcsize=22)"

//----- (100181EE) --------------------------------------------------------
int __usercall sub_100181EE@<eax>(int a1@<ebp>)
{
  char v1; // bl@1
  void *v2; // esi@4

  sub_1000FB4A();
  v1 = *(_BYTE *)(a1 + 8);
  if ( v1 )
  {
    if ( dword_1007C588 >= 32 )
      return sub_1000FB24(4);
    _InterlockedIncrement((volatile signed __int32 *)&dword_1007C588);
  }
  v2 = InterlockedPopEntrySList(&stru_1007C5A0);
  if ( !v2 )
  {
    v2 = sub_1000F0A6(0x308u);
    *(_DWORD *)(a1 - 16) = v2;
    *(_DWORD *)(a1 - 4) = 0;
    if ( v2 )
    {
      sub_1000F76B(a1, (int)((char *)v2 + 4), 8, 96, (int)sub_1001FEF1, (int)sub_1001FF06);
      *((_BYTE *)v2 + 772) = 0;
    }
    else
    {
      v2 = 0;
    }
  }
  *((_BYTE *)v2 + 772) = v1;
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1007C588: using guessed type int dword_1007C588;

//----- (1001826E) --------------------------------------------------------
int __thiscall sub_1001826E(int this, int a2)
{
  int result; // eax@2

  if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 36) + 4 * a2) + 188) )
    result = a2;
  else
    result = sub_100180ED(this, a2);
  return result;
}

//----- (10018291) --------------------------------------------------------
void __thiscall sub_10018291(void *this, int a2)
{
  int v2; // ebx@1
  void *v3; // esi@1
  LPVOID v4; // eax@2
  unsigned int v5; // edx@2
  unsigned int v6; // ecx@2
  LPVOID v7; // [sp+8h] [bp-4h]@2

  v2 = a2;
  v3 = this;
  if ( a2 != *(_DWORD *)this )
  {
    v4 = sub_1000F40E(4 * ((unsigned int)(a2 + 31) >> 5) | -((a2 + 31) / 0x100u != 0));
    v5 = 0;
    v7 = v4;
    v6 = (unsigned int)(*(_DWORD *)v3 + 31) >> 5;
    if ( v6 )
    {
      do
      {
        *((_DWORD *)v4 + v5) = *(_DWORD *)(*((_DWORD *)v3 + 1) + 4 * v5);
        ++v5;
      }
      while ( v5 < v6 );
      v2 = a2;
    }
    sub_10028330((char *)v4 + 4 * v6, 0, 4 * (((unsigned int)(a2 + 31) >> 5) - v6));
    sub_1000F0A1(*((LPVOID *)v3 + 1));
    *((_DWORD *)v3 + 1) = v7;
    *(_DWORD *)v3 = v2;
  }
}

//----- (10018312) --------------------------------------------------------
void __thiscall sub_10018312(void *this, int a2)
{
  void *v2; // edi@1
  unsigned int v3; // ebx@1
  LPVOID v4; // edx@2
  unsigned int v5; // ecx@2
  LPVOID v6; // [sp+Ch] [bp-4h]@2

  v2 = this;
  v3 = *(_DWORD *)this;
  if ( a2 != *(_DWORD *)this )
  {
    sub_10018291(this, a2);
    v4 = sub_1000F40E(4 * a2 | -((unsigned __int64)(unsigned int)a2 >> 30 != 0));
    v5 = 0;
    v6 = v4;
    if ( v3 )
    {
      do
      {
        *((_DWORD *)v4 + v5) = *(_DWORD *)(*((_DWORD *)v2 + 2) + 4 * v5);
        ++v5;
      }
      while ( v5 < v3 );
    }
    sub_10028330((char *)v4 + 4 * v3, 0, 4 * (a2 - v3));
    sub_1000F0A1(*((LPVOID *)v2 + 2));
    *((_DWORD *)v2 + 2) = v6;
  }
}

//----- (10018385) --------------------------------------------------------
bool __thiscall sub_10018385(int this)
{
  return (*(_DWORD *)(this + 404) & 0xA0000000) == -1610612736;
}

//----- (10018398) --------------------------------------------------------
int __thiscall sub_10018398(int this)
{
  return *(_DWORD *)(this + 28);
}

//----- (1001839C) --------------------------------------------------------
int __thiscall sub_1001839C(int this)
{
  return *(_DWORD *)(this + 372);
}

//----- (100183A3) --------------------------------------------------------
#error "10018840: call analysis failed (funcsize=406)"

//----- (10018846) --------------------------------------------------------
void __thiscall sub_10018846(int this)
{
  _InterlockedIncrement((volatile signed __int32 *)(this + 392));
}

//----- (1001884E) --------------------------------------------------------
int __userpurge sub_1001884E@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // edi@1
  int v4; // ebx@1
  PSINGLE_LIST_ENTRY v5; // eax@1
  int v6; // esi@1

  sub_1000FB4A();
  v3 = v2;
  v4 = v2 + 96;
  v5 = InterlockedPopEntrySList((PSLIST_HEADER)(v2 + 96));
  v6 = 0;
  if ( v5 )
    v6 = (int)&v5[-13];
  if ( *(_DWORD *)(v3 + 12) )
  {
    *(_DWORD *)(a1 - 32) = 0;
    *(_DWORD *)(a1 - 28) = 0;
    *(_DWORD *)(a1 - 24) = 0;
    *(_DWORD *)(a1 - 20) = 0;
    if ( v6 )
    {
      sub_100226EA(v6, a1 - 32);
      goto LABEL_14;
    }
    v6 = (int)sub_1000F0A6(0x3Cu);
    *(_DWORD *)(a1 - 16) = v6;
    *(_DWORD *)(a1 - 4) = 1;
    if ( v6 )
    {
      sub_100219C8(a1, v3, a1 - 32);
      *(_DWORD *)(v6 + 56) = 0;
      *(_DWORD *)v6 = &off_100666E4;
      *(_BYTE *)(v6 + 48) = 2;
      goto LABEL_12;
    }
LABEL_11:
    v6 = 0;
    goto LABEL_12;
  }
  if ( !v6 )
  {
    v6 = (int)sub_1000F0A6(0x38u);
    *(_DWORD *)(a1 - 16) = v6;
    *(_DWORD *)(a1 - 4) = 0;
    if ( v6 )
    {
      sub_100219C8(a1, v3, *(_DWORD *)(a1 + 8));
      *(_DWORD *)v6 = &off_100666A4;
      *(_BYTE *)(v6 + 48) = 1;
LABEL_12:
      *(_DWORD *)(a1 - 4) = -1;
      goto LABEL_14;
    }
    goto LABEL_11;
  }
  sub_100226EA(v6, *(_DWORD *)(a1 + 8));
LABEL_14:
  sub_10016ECE(v4, v6);
  return sub_1000FB24(20);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 100666A4: using guessed type int (__stdcall *off_100666A4)(int, int);
// 100666E4: using guessed type int (__stdcall *off_100666E4)(int, int);

//----- (10018914) --------------------------------------------------------
signed __int32 __thiscall sub_10018914(void *this)
{
  int v1; // edi@1
  signed __int32 v2; // ebx@2
  void (__thiscall *v3)(_DWORD); // esi@3
  signed __int32 result; // eax@4

  v1 = (int)this;
  if ( *((_BYTE *)this + 48) & 4 )
  {
    result = 0;
  }
  else
  {
    v2 = _InterlockedDecrement((volatile signed __int32 *)this + 5);
    if ( !v2 )
    {
      v3 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)this + 28);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 28));
      v3(v1);
      sub_100194CC(*(_DWORD *)(v1 + 4), v1);
    }
    result = v2;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001894D) --------------------------------------------------------
BOOL __thiscall sub_1001894D(int this, int a2)
{
  int v2; // edx@1
  unsigned int v3; // edi@1
  unsigned int v4; // esi@1

  v2 = 0;
  v3 = 0;
  v4 = (unsigned int)(*(_DWORD *)this + 31) >> 5;
  if ( v4 )
  {
    do
    {
      if ( v2 )
        break;
      v2 = *(_DWORD *)(*(_DWORD *)(a2 + 4) + 4 * v3) & *(_DWORD *)(*(_DWORD *)(this + 4) + 4 * v3);
      ++v3;
    }
    while ( v3 < v4 );
  }
  return v2 != 0;
}

//----- (1001898B) --------------------------------------------------------
int __thiscall sub_1001898B(int this, int (__cdecl *a2)(_DWORD), int a3, int a4)
{
  int result; // eax@2

  if ( *(_DWORD *)(a4 + 404) & 0x20000000 )
  {
    j_nullsub_1(a2);
    result = a2(a3);
  }
  else
  {
    *(_DWORD *)this = a2;
    *(_DWORD *)(this + 4) = a3;
    result = sub_100189C6(a4, this);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100189C6) --------------------------------------------------------
int __thiscall sub_100189C6(int this, int a2)
{
  int v2; // ebx@1
  void *v3; // edi@1

  v2 = this;
  v3 = (void *)(this + 324);
  sub_100124EC((void *)(this + 324));
  *(_DWORD *)(a2 + 8) = sub_10018E27((void *)v2);
  *(_DWORD *)(a2 + 12) = 0;
  **(_DWORD **)(v2 + 320) = a2;
  *(_DWORD *)(v2 + 320) = a2 + 12;
  return sub_1001252F(v3);
}

//----- (10018A0A) --------------------------------------------------------
char __thiscall sub_10018A0A(int this)
{
  char v1; // dl@1

  v1 = 0;
  if ( *(_DWORD *)(this + 24)
    || *(_DWORD *)(this + 8) != *(_DWORD *)(this + 16)
    || *(_DWORD *)(this + 12) != *(_DWORD *)(this + 20) )
    v1 = 1;
  return v1;
}

//----- (10018A27) --------------------------------------------------------
char __thiscall sub_10018A27(void *this, int a2)
{
  int v2; // ebp@0
  void *v3; // esi@1
  char v4; // bl@1
  char v6; // [sp+8h] [bp-8h]@1
  LPVOID lpMem; // [sp+Ch] [bp-4h]@1

  v3 = this;
  sub_10017D35(v2, (int)&v6, a2);
  v4 = sub_1001894D((int)&v6, (int)((char *)v3 + 48));
  sub_1000F0A1(lpMem);
  return v4;
}

//----- (10018A5D) --------------------------------------------------------
int __thiscall sub_10018A5D(int this, int a2, int a3)
{
  int v3; // ecx@1
  int result; // eax@4

  v3 = *(_DWORD *)(*(_DWORD *)(this + 8) + 4 * a3);
  if ( v3 )
  {
    while ( *(_DWORD *)(v3 + 4) != *(_DWORD *)a2 )
    {
      v3 = *(_DWORD *)v3;
      if ( !v3 )
        goto LABEL_4;
    }
    result = v3;
  }
  else
  {
LABEL_4:
    result = 0;
  }
  return result;
}

//----- (10018A87) --------------------------------------------------------
int __stdcall sub_10018A87(int a1, int a2, int a3, int a4)
{
  int result; // eax@1

  result = a1;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  return result;
}

//----- (10018A98) --------------------------------------------------------
char __thiscall sub_10018A98(int this, int a2)
{
  char result; // al@2

  if ( *(_DWORD *)a2 == *(_DWORD *)(this + 336) )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)a2 = *(_DWORD *)(this + 336);
    result = 1;
  }
  return result;
}

//----- (10018ABA) --------------------------------------------------------
char __thiscall sub_10018ABA(int this, int a2)
{
  int v2; // esi@1
  char result; // al@6
  signed __int32 v4; // [sp+8h] [bp-Ch]@1
  int v5; // [sp+Ch] [bp-8h]@5

  v4 = 0;
  v2 = this;
  if ( sub_10017B3F(this, (int)&v4, 0, 0, 0, 0, 12) )
  {
    if ( v4 == 2 || v4 == 8 )
    {
      InterlockedPushEntrySList((PSLIST_HEADER)(v2 + 512), (PSINGLE_LIST_ENTRY)(a2 + 8));
      sub_1001EFAA(v5, v4, 0, 0);
    }
    else
    {
      sub_1001F039((int)&v4, a2);
    }
    result = 1;
  }
  else
  {
    InterlockedPushEntrySList((PSLIST_HEADER)(v2 + 512), (PSINGLE_LIST_ENTRY)(a2 + 8));
    result = 0;
  }
  return result;
}

//----- (10018B44) --------------------------------------------------------
DWORD sub_10018B44()
{
  sub_100119BF();
  dword_1007C57C = sub_10012144();
  return sub_10023797();
}

//----- (10018B58) --------------------------------------------------------
int sub_10018B58()
{
  int result; // eax@1

  sub_100237DD();
  result = sub_10012185(dword_1007C57C);
  dword_1007C57C = 0;
  return result;
}

//----- (10018B71) --------------------------------------------------------
void __thiscall sub_10018B71(int this, signed __int64 a2)
{
  volatile signed __int64 *v2; // edi@1
  unsigned int v3; // esi@2
  signed __int64 v4; // rax@2
  int v5; // edi@3
  unsigned int v6; // esi@3
  int v7; // ebx@4
  int v8; // eax@4
  int v9; // eax@10
  int v10; // ebx@16
  int i; // eax@16
  int v12; // [sp+Ch] [bp-14h]@3
  char v13; // [sp+10h] [bp-10h]@16
  int v14; // [sp+14h] [bp-Ch]@1
  unsigned int v15; // [sp+18h] [bp-8h]@2
  char v16; // [sp+1Ch] [bp-4h]@4

  v14 = this;
  v2 = (volatile signed __int64 *)(this + 416);
  do
  {
    v3 = *(_DWORD *)v2;
    LODWORD(v4) = *(_DWORD *)v2;
    v15 = *(_DWORD *)(this + 420);
    HIDWORD(v4) = v15;
  }
  while ( _InterlockedCompareExchange64(v2, a2, v4) != __PAIR__(v15, v3) );
  v5 = v14;
  v12 = v14 + 308;
  sub_100118C2(v14 + 308);
  v6 = 0;
  v15 = 0;
  if ( *(_DWORD *)(v14 + 44) > 0 )
  {
    do
    {
      v7 = *(_DWORD *)(*(_DWORD *)(v5 + 36) + 4 * v6);
      v14 = *(_DWORD *)(*(_DWORD *)(v5 + 32) + 4 * v6);
      v8 = sub_10017AE5(0, *(_DWORD *)(v7 + 80), (int)&v16, v7 + 16);
      if ( v8 )
      {
        do
        {
          if ( (unsigned int)(a2 - *(_DWORD *)(v8 + 264)) > 0x7D0 && *(_DWORD *)(v8 + 284) == 1 )
          {
            *(_DWORD *)(v8 + 284) = 2;
            sub_10017064((void *)(v5 + 304), v8 + 272);
          }
          v8 = sub_10018063((int)&v16, 0, v7 + 16);
        }
        while ( v8 );
        v6 = v15;
      }
      v9 = sub_10017AE5(0, *(_DWORD *)(v7 + 160), (int)&v16, v7 + 96);
      if ( v9 )
      {
        do
        {
          if ( (unsigned int)(a2 - *(_DWORD *)(v9 + 264)) > 0x7D0 && *(_DWORD *)(v9 + 284) == 1 )
          {
            *(_DWORD *)(v9 + 284) = 2;
            sub_10017064((void *)(v5 + 304), v9 + 272);
          }
          v9 = sub_10018063((int)&v16, 0, v7 + 96);
        }
        while ( v9 );
        v6 = v15;
      }
      v10 = v14;
      for ( i = sub_10017B10((void *)v14, 0, *(_DWORD *)(v14 + 120), (int)&v13); i; i = sub_1001810F(v10, (int)&v13, 0) )
      {
        if ( (unsigned int)(a2 - *(_DWORD *)(i + 200)) > 0x7D0 && *(_DWORD *)(i + 224) == 1 )
        {
          *(_DWORD *)(i + 224) = 2;
          sub_10017064((void *)(v5 + 304), i + 212);
        }
      }
      ++v6;
      v15 = v6;
    }
    while ( (signed int)v6 < *(_DWORD *)(v5 + 44) );
  }
  sub_100119E2(v12);
}

//----- (10018D1C) --------------------------------------------------------
int __thiscall sub_10018D1C(void *this)
{
  int v1; // esi@1
  signed __int32 v2; // edx@4
  signed __int32 v3; // ecx@4
  signed __int32 i; // eax@4

  v1 = (int)this;
  if ( (void *)dword_1007C574 == this )
  {
    sub_100124FC((volatile signed __int32 *)&dword_1007C59C);
    dword_1007C574 = dword_1007C574 != v1 ? dword_1007C574 : 0;
    dword_1007C59C = 0;
  }
  if ( *(_DWORD *)(v1 + 392) > 1 )
  {
    v2 = *(_DWORD *)(v1 + 404);
    v3 = *(_DWORD *)(v1 + 404);
    for ( i = *(_DWORD *)(v1 + 404); ; v3 = i )
    {
      i = _InterlockedCompareExchange((volatile signed __int32 *)(v1 + 404), v3 | 0x80000000, i);
      if ( i == v2 )
        break;
      v2 = i;
    }
    if ( !(v2 & 0x1FFFFFFF) )
      sub_100172F1(v1);
  }
  return sub_10017774(v1);
}
// 1007C574: using guessed type int dword_1007C574;
// 1007C59C: using guessed type int dword_1007C59C;

//----- (10018D92) --------------------------------------------------------
int __thiscall sub_10018D92(void *this)
{
  int v1; // edi@1
  int v2; // eax@1
  char v3; // bl@4
  void (__thiscall *v4)(_DWORD); // esi@6
  signed __int32 v5; // eax@6
  signed __int32 v6; // edx@7
  int (__thiscall *v7)(_DWORD); // esi@8
  int result; // eax@8

  v1 = (int)this;
  v2 = (int)sub_100178E9();
  if ( !v2 || *(_BYTE *)(v2 + 76) || sub_10018398(v2) != v1 )
  {
    v3 = 1;
    _InterlockedIncrement((volatile signed __int32 *)(v1 + 392));
  }
  else
  {
    v3 = 0;
  }
  sub_10017599(v1, 0);
  v4 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 84);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 84));
  v4(v1);
  v5 = *(_DWORD *)(v1 + 404);
  do
  {
    v6 = v5;
    v5 = _InterlockedCompareExchange((volatile signed __int32 *)(v1 + 404), v5 & 0xBFFFFFFF | 0x20000000, v5);
  }
  while ( v5 != v6 );
  sub_100191B6(v1, v5 & 0x1FFFFFFF);
  v7 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 80);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 80));
  result = v7(v1);
  if ( v3 )
    result = sub_10017774(v1);
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10018E27) --------------------------------------------------------
signed __int32 __thiscall sub_10018E27(void *this)
{
  volatile signed __int32 *v1; // ecx@1
  signed __int32 result; // eax@2

  v1 = (volatile signed __int32 *)((char *)this + 336);
  do
  {
    do
      result = _InterlockedIncrement(v1);
    while ( !result );
  }
  while ( result == -1 );
  return result;
}

//----- (10018E3F) --------------------------------------------------------
signed __int32 __thiscall sub_10018E3F(volatile signed __int32 *this, signed __int32 a2)
{
  signed __int32 v2; // esi@1
  signed __int32 result; // eax@1

  do
  {
    v2 = *this;
    *(_DWORD *)a2 = *this;
    result = _InterlockedCompareExchange(this, a2, v2);
  }
  while ( result != v2 );
  return result;
}

//----- (10018E5D) --------------------------------------------------------
char __thiscall sub_10018E5D(void *this, int a2, char a3, int a4, int a5, int a6)
{
  char v6; // bl@1
  int v8; // [sp-14h] [bp-30h]@2
  int v9; // [sp-10h] [bp-2Ch]@2
  int v10; // [sp-Ch] [bp-28h]@2
  int v11; // [sp-8h] [bp-24h]@2
  int v12; // [sp-4h] [bp-20h]@2
  int v13; // [sp+Ch] [bp-10h]@2
  int v14; // [sp+18h] [bp-4h]@1

  v14 = (int)this;
  v6 = 0;
  if ( sub_100178E9() != (LPVOID)(a2 != 0 ? a2 + 4 : 0) )
  {
    sub_1001AFBA();
    v12 = 5;
    v13 = 0;
    sub_10019F0A((int)&v8, (int)&a3);
    if ( sub_10017B3F(v14, (int)&v13, v8, v9, v10, v11, v12) )
    {
      sub_1001F039((int)&v13, a2);
      v6 = 1;
    }
    sub_1001AFBA();
  }
  return v6;
}
// 1001AFBA: using guessed type int sub_1001AFBA(void);

//----- (10018EC5) --------------------------------------------------------
LPVOID __thiscall sub_10018EC5(int this, int a2)
{
  int v2; // esi@1
  LPVOID result; // eax@1

  v2 = this;
  sub_1000F0A1(*(LPVOID *)(this + 4));
  *(_DWORD *)v2 = a2;
  result = sub_1000F40E(4 * ((unsigned int)(a2 + 31) >> 5) | -((a2 + 31) / 0x100u != 0));
  *(_DWORD *)(v2 + 4) = result;
  return result;
}

//----- (10018EFC) --------------------------------------------------------
signed __int32 __thiscall sub_10018EFC(int this)
{
  signed __int32 result; // eax@1

  result = 0;
  if ( !(*(_BYTE *)(this + 48) & 4) )
    result = _InterlockedIncrement((volatile signed __int32 *)(this + 20));
  return result;
}

//----- (10018F0C) --------------------------------------------------------
signed __int32 __thiscall sub_10018F0C(int this)
{
  int v1; // esi@1
  signed __int32 v2; // edi@1
  volatile signed __int32 *v3; // ecx@2
  int v4; // eax@3
  char v6; // [sp+8h] [bp-Ch]@9

  v1 = this;
  v2 = _InterlockedIncrement((volatile signed __int32 *)(this + 384));
  if ( v2 == 1 )
  {
    v3 = (volatile signed __int32 *)(this + 396);
    if ( *(_DWORD *)(v1 + 396) <= 0 )
    {
      _InterlockedExchange(v3, 1);
    }
    else
    {
      v4 = (int)sub_100178E9();
      if ( !v4 || *(_BYTE *)(v4 + 76) || sub_10018398(v4) != v1 )
      {
        sub_10019F8D((int)&v6);
        sub_10027494((int)&v6, (int)&unk_10075EE4);
        __debugbreak();
        JUMPOUT(*(_DWORD *)sub_10018F77);
      }
      sub_100195EE((void *)v1);
    }
  }
  return v2;
}

//----- (10018F77) --------------------------------------------------------
int __thiscall sub_10018F77(void *this)
{
  void *v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = this;
  _InterlockedIncrement((volatile signed __int32 *)this + 97);
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)this + 16);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 16));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10018F95) --------------------------------------------------------
int __stdcall sub_10018F95(HANDLE hSourceHandle)
{
  int v1; // ebp@0
  HANDLE v2; // ST08_4@3
  HANDLE v3; // eax@3
  int v4; // eax@4
  int v5; // eax@6
  char v7; // [sp+4h] [bp-14h]@8
  char v8; // [sp+8h] [bp-10h]@7
  HANDLE TargetHandle; // [sp+14h] [bp-4h]@3

  if ( !hSourceHandle || hSourceHandle == (HANDLE)-1 )
  {
    sub_1000D988(&v8, (int)"eventObject");
    sub_10027494((int)&v8, (int)&unk_10075484);
    goto LABEL_9;
  }
  TargetHandle = 0;
  v2 = GetCurrentProcess();
  v3 = GetCurrentProcess();
  if ( !DuplicateHandle(v3, hSourceHandle, v2, &TargetHandle, 0, 0, 2u) )
  {
    v4 = GetLastError();
    if ( v4 > 0 )
      v4 = (unsigned __int16)v4 | 0x80070000;
    sub_1001A018((int)&v7, v4);
    sub_10027494((int)&v7, (int)&unk_10075954);
LABEL_9:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10019036);
  }
  v5 = (int)sub_1000F0A6(0xCu);
  *(_DWORD *)(v5 + 8) = TargetHandle;
  return sub_100170CA(v1, v5);
}
// 10019036: using guessed type int sub_10019036();

//----- (1001903B) --------------------------------------------------------
signed __int32 __thiscall sub_1001903B(int this)
{
  signed __int32 v1; // esi@1

  v1 = _InterlockedDecrement((volatile signed __int32 *)(this + 384));
  if ( !v1 )
    sub_10018D1C((void *)this);
  return v1;
}

//----- (10019053) --------------------------------------------------------
PSINGLE_LIST_ENTRY __thiscall sub_10019053(int this, int a2)
{
  int v2; // ebp@0
  union _SLIST_HEADER *v3; // edi@1
  PSINGLE_LIST_ENTRY result; // eax@2

  v3 = (union _SLIST_HEADER *)(this + 496);
  if ( (signed int)QueryDepthSList((PSLIST_HEADER)(this + 496)) >= *(_DWORD *)(this + 20) )
  {
    result = (PSINGLE_LIST_ENTRY)sub_1001650C(a2);
  }
  else
  {
    sub_100234C7(a2, v2);
    result = InterlockedPushEntrySList(v3, (PSINGLE_LIST_ENTRY)(a2 + 4));
  }
  return result;
}

//----- (10019095) --------------------------------------------------------
int __thiscall sub_10019095(void *this)
{
  void *v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = this;
  _InterlockedDecrement((volatile signed __int32 *)this + 97);
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)this + 20);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 20));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100190B3) --------------------------------------------------------
PSINGLE_LIST_ENTRY __thiscall sub_100190B3(int this, int a2, char a3)
{
  int v3; // ebx@1
  int v4; // edi@2
  void (__thiscall *v5)(_DWORD, _DWORD); // esi@2

  v3 = this;
  if ( a3 )
  {
    v4 = *(_DWORD *)(this + 428);
    v5 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 12);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 12));
    v5(v4, a2);
  }
  _InterlockedDecrement((volatile signed __int32 *)(v3 + 400));
  return InterlockedPushEntrySList((PSLIST_HEADER)(v3 + 488), (PSINGLE_LIST_ENTRY)(a2 + 8));
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100190FC) --------------------------------------------------------
int __thiscall sub_100190FC(int this, int a2)
{
  int v2; // esi@1
  union _SLIST_HEADER *v3; // edi@1
  int v4; // edx@1
  int result; // eax@1
  int (__thiscall *v6)(_DWORD, _DWORD); // esi@4

  v2 = this;
  v3 = (union _SLIST_HEADER *)(this + 504);
  v4 = QueryDepthSList((PSLIST_HEADER)(this + 504));
  result = 32 * *(_DWORD *)(v2 + 20);
  if ( v4 >= result )
  {
    if ( a2 )
    {
      v6 = (int (__thiscall *)(_DWORD, _DWORD))**(_DWORD **)a2;
      j_nullsub_1(**(_DWORD **)a2);
      result = v6(a2, 1);
    }
  }
  else
  {
    result = (int)InterlockedPushEntrySList(v3, (PSINGLE_LIST_ENTRY)(a2 + 12));
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001914B) --------------------------------------------------------
PSINGLE_LIST_ENTRY __thiscall sub_1001914B(int this)
{
  int v1; // esi@1
  PSINGLE_LIST_ENTRY result; // eax@1
  int i; // ebx@1
  int v4; // edi@2
  void (__thiscall *v5)(_DWORD, _DWORD); // esi@2
  PSINGLE_LIST_ENTRY v6; // eax@2
  PSINGLE_LIST_ENTRY v7; // ebx@2
  int v8; // [sp+8h] [bp-4h]@1

  v1 = this;
  v8 = this;
  result = InterlockedPopEntrySList((PSLIST_HEADER)(this + 512));
  for ( i = result != 0 ? (unsigned int)&result[-2] : 0; i; i = v7 != 0 ? (unsigned int)result : 0 )
  {
    v4 = *(_DWORD *)(v1 + 428);
    v5 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 12);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 12));
    v5(v4, i);
    v1 = v8;
    sub_100190B3(v8, i, 0);
    v6 = InterlockedPopEntrySList((PSLIST_HEADER)(v8 + 512));
    v7 = v6;
    result = v6 - 2;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100191B6) --------------------------------------------------------
int __thiscall sub_100191B6(int this, LONG lReleaseCount)
{
  int result; // eax@2

  if ( lReleaseCount > 0 )
    result = ReleaseSemaphore(*(HANDLE *)(this + 380), lReleaseCount, 0);
  return result;
}

//----- (100191D4) --------------------------------------------------------
int __thiscall sub_100191D4(void *this, int a2)
{
  int result; // eax@1

  *(_DWORD *)(*(_DWORD *)(a2 + 4) + 8) = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(*(_DWORD *)(a2 + 8) + 4) = *(_DWORD *)(a2 + 4);
  result = *(_DWORD *)this;
  if ( a2 == *(_DWORD *)this )
  {
    if ( result == *(_DWORD *)(result + 4) )
      result = 0;
    else
      result = *(_DWORD *)(result + 8);
    *(_DWORD *)this = result;
  }
  return result;
}

//----- (10019206) --------------------------------------------------------
char __thiscall sub_10019206(PSLIST_HEADER ListHead, int a2, int a3, char a4)
{
  int v4; // esi@1
  int v5; // edx@1
  signed __int32 v6; // edi@1
  char result; // al@2
  struct _SINGLE_LIST_ENTRY *v8; // ecx@3
  int v9; // eax@3
  int v10; // edx@4
  int v11; // ebx@4
  int v12; // edx@5
  PSINGLE_LIST_ENTRY v13; // eax@15
  int v14; // ST08_4@15

  v4 = (int)ListHead;
  v5 = a3 >> *(_DWORD *)&ListHead[5].s.Depth;
  v6 = a3 & (unsigned int)((char *)&ListHead[5].s.Next.Next[-1].Next + 3);
  if ( v5 < *(_DWORD *)&ListHead[7].s.Depth )
  {
    v8 = ListHead[7].s.Next.Next;
    v9 = *(_DWORD *)(v4 + 52);
    if ( v5 < (signed int)v8 )
    {
      v11 = *(_DWORD *)(v9 + 4 * v5);
    }
    else
    {
      v10 = v5 - (_DWORD)v8;
      v11 = *(_DWORD *)(v9 + 4 * (_DWORD)v8 - 4);
      if ( v10 >= 0 )
      {
        v12 = v10 + 1;
        do
        {
          v11 = *(_DWORD *)(v11 + 4);
          --v12;
        }
        while ( v12 );
      }
    }
    if ( _InterlockedCompareExchange((volatile signed __int32 *)(*(_DWORD *)v11 + 4 * v6), 0, a2) == a2 )
    {
      _InterlockedCompareExchange((volatile signed __int32 *)(v11 + 8), v6, -2);
      if ( a4 )
      {
        if ( (signed int)QueryDepthSList((PSLIST_HEADER)v4) <= *(_DWORD *)(v4 + 68) )
        {
          InterlockedPushEntrySList((PSLIST_HEADER)v4, (PSINGLE_LIST_ENTRY)(a2 + 4));
        }
        else
        {
          InterlockedPushEntrySList((PSLIST_HEADER)(v4 + 8), (PSINGLE_LIST_ENTRY)(a2 + 4));
          if ( (signed int)QueryDepthSList((PSLIST_HEADER)(v4 + 8)) > *(_DWORD *)(v4 + 68)
            && (*(_DWORD *)(*(_DWORD *)(v4 + 36) + 404) & 0xA0000000) != -1610612736
            && !_InterlockedCompareExchange((volatile signed __int32 *)(v4 + 72), 1, 0) )
          {
            v13 = InterlockedFlushSList((PSLIST_HEADER)(v4 + 8));
            v14 = *(_DWORD *)(v4 + 36);
            *(_DWORD *)(v4 + 16) = v13;
            sub_1001898B(v4 + 20, (int (__cdecl *)(_DWORD))sub_1001740D, v4, v14);
          }
        }
      }
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1001930B) --------------------------------------------------------
char __thiscall sub_1001930B(PSLIST_HEADER ListHead, int a2, int a3, char a4)
{
  int v4; // esi@1
  int v5; // edx@1
  signed __int32 v6; // edi@1
  char result; // al@2
  struct _SINGLE_LIST_ENTRY *v8; // ecx@3
  int v9; // eax@3
  int v10; // edx@4
  int v11; // ebx@4
  int v12; // edx@5
  PSINGLE_LIST_ENTRY v13; // eax@15
  int v14; // ST08_4@15

  v4 = (int)ListHead;
  v5 = a3 >> *(_DWORD *)&ListHead[5].s.Depth;
  v6 = a3 & (unsigned int)((char *)&ListHead[5].s.Next.Next[-1].Next + 3);
  if ( v5 < *(_DWORD *)&ListHead[7].s.Depth )
  {
    v8 = ListHead[7].s.Next.Next;
    v9 = *(_DWORD *)(v4 + 52);
    if ( v5 < (signed int)v8 )
    {
      v11 = *(_DWORD *)(v9 + 4 * v5);
    }
    else
    {
      v10 = v5 - (_DWORD)v8;
      v11 = *(_DWORD *)(v9 + 4 * (_DWORD)v8 - 4);
      if ( v10 >= 0 )
      {
        v12 = v10 + 1;
        do
        {
          v11 = *(_DWORD *)(v11 + 4);
          --v12;
        }
        while ( v12 );
      }
    }
    if ( _InterlockedCompareExchange((volatile signed __int32 *)(*(_DWORD *)v11 + 4 * v6), 0, a2) == a2 )
    {
      _InterlockedCompareExchange((volatile signed __int32 *)(v11 + 8), v6, -2);
      if ( a4 )
      {
        if ( (signed int)QueryDepthSList((PSLIST_HEADER)v4) <= *(_DWORD *)(v4 + 68) )
        {
          InterlockedPushEntrySList((PSLIST_HEADER)v4, (PSINGLE_LIST_ENTRY)(a2 + 52));
        }
        else
        {
          InterlockedPushEntrySList((PSLIST_HEADER)(v4 + 8), (PSINGLE_LIST_ENTRY)(a2 + 52));
          if ( (signed int)QueryDepthSList((PSLIST_HEADER)(v4 + 8)) > *(_DWORD *)(v4 + 68)
            && (*(_DWORD *)(*(_DWORD *)(v4 + 36) + 404) & 0xA0000000) != -1610612736
            && !_InterlockedCompareExchange((volatile signed __int32 *)(v4 + 72), 1, 0) )
          {
            v13 = InterlockedFlushSList((PSLIST_HEADER)(v4 + 8));
            v14 = *(_DWORD *)(v4 + 36);
            *(_DWORD *)(v4 + 16) = v13;
            sub_1001898B(v4 + 20, (int (__cdecl *)(_DWORD))sub_10017419, v4, v14);
          }
        }
      }
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10019410) --------------------------------------------------------
int __thiscall sub_10019410(void *this)
{
  int result; // eax@1
  int v2; // esi@2

  result = *(_DWORD *)this;
  if ( *(_DWORD *)this )
  {
    v2 = *(_DWORD *)(result + 4);
    if ( result == v2 )
    {
      *(_DWORD *)this = 0;
    }
    else
    {
      *(_DWORD *)(*(_DWORD *)(v2 + 4) + 8) = result;
      *(_DWORD *)(*(_DWORD *)this + 4) = *(_DWORD *)(v2 + 4);
    }
    result = v2;
  }
  return result;
}

//----- (10019438) --------------------------------------------------------
_DWORD *__thiscall sub_10019438(void *this)
{
  _DWORD *result; // eax@1
  _DWORD *v2; // esi@2

  result = *(_DWORD **)this;
  if ( *(_DWORD *)this )
  {
    v2 = (_DWORD *)*result;
    if ( result == (_DWORD *)*result )
    {
      *(_DWORD *)this = 0;
    }
    else
    {
      *(_DWORD *)(*v2 + 4) = result;
      **(_DWORD **)this = *v2;
    }
    result = v2;
  }
  return result;
}

//----- (1001945C) --------------------------------------------------------
int __usercall sub_1001945C@<eax>(int a1@<ebp>)
{
  void *v1; // ecx@1
  void *v2; // edi@1
  int v3; // esi@1

  sub_1000FB4A();
  v2 = v1;
  v3 = (int)((char *)v1 + 4);
  sub_100118C2((int)((char *)v1 + 4));
  sub_10019438(v2);
  *(_DWORD *)(a1 - 4) = 0;
  sub_100119E2(v3);
  return sub_1000FB24(0);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10019490) --------------------------------------------------------
void __thiscall sub_10019490(void *this, int a2)
{
  void *v2; // ebx@1
  int v3; // edi@1

  v2 = this;
  v3 = (int)((char *)this + 308);
  sub_100118C2((int)((char *)this + 308));
  if ( *(_DWORD *)(a2 + 12) == 2 )
    sub_100191D4((char *)v2 + 304, a2);
  *(_DWORD *)(a2 + 12) = 0;
  sub_100119E2(v3);
}

//----- (100194CC) --------------------------------------------------------
char __thiscall sub_100194CC(int this, int a2)
{
  return sub_1001930B((PSLIST_HEADER)(this + 96), a2, *(_DWORD *)(a2 + 24), 1);
}

//----- (100194E4) --------------------------------------------------------
char __thiscall sub_100194E4(int this)
{
  int v1; // esi@1
  char result; // al@1

  v1 = this;
  result = sub_10022AAF(this);
  *(_DWORD *)(v1 + 56) = 0;
  return result;
}

//----- (100194F2) --------------------------------------------------------
int __thiscall sub_100194F2(void *this, int a2, unsigned int a3)
{
  int result; // eax@1
  unsigned int v4; // ebx@2
  int v5; // edi@3
  int (__thiscall *v6)(_DWORD); // esi@4
  int v7; // eax@4
  signed __int32 v8; // eax@4
  int v9; // ebx@5
  int v10; // edi@5
  int (__thiscall *v11)(_DWORD); // esi@8
  int v12; // eax@8
  int v13; // [sp-4h] [bp-20h]@0
  char v14; // [sp+0h] [bp-1Ch]@7
  char v15; // [sp+4h] [bp-18h]@17
  int v16; // [sp+8h] [bp-14h]@6
  int (*v17)(); // [sp+Ch] [bp-10h]@6
  int v18; // [sp+10h] [bp-Ch]@3
  int v19; // [sp+14h] [bp-8h]@1
  int v20; // [sp+18h] [bp-4h]@4

  result = a2;
  v19 = (int)this;
  if ( !a2 )
  {
    v13 = (int)"ppVirtualProcessorRoots";
    goto LABEL_17;
  }
  v4 = a3;
  if ( a3 < 1 )
  {
LABEL_17:
    sub_1000D988(&v15, v13);
    sub_10027494((int)&v15, (int)&unk_10075484);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_100195EE);
  }
  v5 = 0;
  v18 = 0;
  if ( a3 )
  {
    do
    {
      v20 = *(_DWORD *)(result + 4 * v5);
      v6 = (int (__thiscall *)(_DWORD))**(_DWORD **)v20;
      j_nullsub_1(v6);
      v7 = v6(v20);
      v8 = sub_1001FCF1(*(_DWORD *)(*(_DWORD *)(v19 + 32) + 4 * v7), v20);
      if ( !v8 )
      {
        v9 = v20;
        v10 = v19;
        do
        {
          v16 = 0;
          v17 = sub_10012578;
          while ( sub_10010BDE(&v14) )
            ;
          SwitchToThread();
          v11 = (int (__thiscall *)(_DWORD))**(_DWORD **)v9;
          j_nullsub_1(**(_DWORD **)v9);
          v12 = v11(v9);
          v8 = sub_1001FCF1(*(_DWORD *)(*(_DWORD *)(v10 + 32) + 4 * v12), v9);
        }
        while ( !v8 );
        v5 = v18;
        v4 = a3;
      }
      if ( *(_BYTE *)(v8 + 172) )
        v8 = sub_100209AC(*(_DWORD *)(v8 + 176), v8);
      if ( v8 )
        sub_1001F30B(v8);
      result = a2;
      ++v5;
      v18 = v5;
    }
    while ( v5 < v4 );
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100195EE) --------------------------------------------------------
signed __int32 __thiscall sub_100195EE(void *this)
{
  void *v1; // edi@1
  volatile signed __int32 *v2; // ebx@1
  int v3; // eax@1
  int v4; // esi@1
  signed __int32 result; // eax@1
  signed __int32 v6; // edx@2

  v1 = this;
  v2 = (volatile signed __int32 *)((char *)this + 404);
  v3 = sub_1001978C((int)((char *)this + 404), 2147483648);
  v4 = v3;
  result = _InterlockedCompareExchange(v2, v3 & 0x7FFFFFFF, v3);
  if ( result != v4 )
  {
    do
    {
      v6 = result;
      result = _InterlockedCompareExchange(v2, result & 0x7FFFFFFF, result);
    }
    while ( result != v6 );
  }
  _InterlockedIncrement((volatile signed __int32 *)v1 + 98);
  return result;
}

//----- (10019635) --------------------------------------------------------
void *__cdecl sub_10019635(PSINGLE_LIST_ENTRY ListEntry)
{
  void *result; // eax@4

  if ( LOBYTE(ListEntry[193].Next) )
    _InterlockedDecrement((volatile signed __int32 *)&dword_1007C588);
  if ( QueryDepthSList(&stru_1007C5A0) >= 0x10u )
    result = sub_10016E49(ListEntry, 1);
  else
    result = InterlockedPushEntrySList(&stru_1007C5A0, ListEntry);
  return result;
}
// 1007C588: using guessed type int dword_1007C588;

//----- (10019677) --------------------------------------------------------
LPVOID sub_10019677()
{
  LPVOID result; // eax@2

  if ( dword_1007A044 & 0x80000000 )
    result = sub_10012193(dword_1007C57C);
  else
    result = 0;
  return result;
}
// 1007A044: using guessed type int dword_1007A044;

//----- (10019693) --------------------------------------------------------
char __thiscall sub_10019693(void *this)
{
  volatile signed __int32 *v1; // esi@1
  signed __int32 v2; // edx@3

  v1 = (volatile signed __int32 *)((char *)this + 384);
  while ( *v1 )
  {
    v2 = *v1;
    if ( _InterlockedCompareExchange(v1, v2 + 1, v2) == v2 )
      return 1;
  }
  return 0;
}

//----- (100196B5) --------------------------------------------------------
int __thiscall sub_100196B5(void *this, int a2, int a3)
{
  void *v3; // edi@1
  int v4; // eax@1
  int v5; // esi@1
  int v6; // edi@3
  int (__thiscall *v7)(_DWORD, _DWORD, _DWORD); // esi@5

  v3 = this;
  v4 = (int)sub_100178E9();
  v5 = v4;
  if ( v4 && (void *)sub_10018398(v4) == v3 )
    v6 = sub_1001AAD4(v5);
  else
    v6 = *((_DWORD *)v3 + 44);
  v7 = (int (__thiscall *)(_DWORD, _DWORD, _DWORD))**(_DWORD **)v6;
  j_nullsub_1(**(_DWORD **)v6);
  return v7(v6, a2, a3);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100196FE) --------------------------------------------------------
int __thiscall sub_100196FE(void *this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3, int a4)
{
  void *v4; // edi@1
  int v5; // eax@1
  int v6; // esi@1
  int v7; // eax@3

  v4 = this;
  v5 = (int)sub_100178E9();
  v6 = v5;
  if ( v5 && (void *)sub_10018398(v5) == v4 )
    v7 = sub_1001AAD4(v6);
  else
    v7 = *((_DWORD *)v4 + 44);
  return sub_10022B57((void *)v7, a2, a3, a4);
}

//----- (10019734) --------------------------------------------------------
void __thiscall sub_10019734(int this, int a2)
{
  if ( *(_DWORD *)(this + 12) == 1 )
    *(_DWORD *)(this + 376) = sub_100180ED(this, *(_DWORD *)(a2 + 184));
}

//----- (10019759) --------------------------------------------------------
int __cdecl sub_10019759(int a1, int a2)
{
  int result; // eax@1
  char v3; // [sp+8h] [bp-10h]@3
  int v4; // [sp+10h] [bp-8h]@2
  void (*v5)(); // [sp+14h] [bp-4h]@2

  result = *(_DWORD *)a1;
  if ( *(_DWORD *)a1 & a2 )
  {
    v4 = 0;
    v5 = sub_1001253A;
    do
    {
      sub_10010BDE(&v3);
      result = *(_DWORD *)a1;
    }
    while ( *(_DWORD *)a1 & a2 );
  }
  return result;
}

//----- (1001978C) --------------------------------------------------------
int __cdecl sub_1001978C(int a1, int a2)
{
  int v2; // edx@1
  char v4; // [sp+4h] [bp-10h]@3
  int v5; // [sp+Ch] [bp-8h]@2
  void (*v6)(); // [sp+10h] [bp-4h]@2

  v2 = *(_DWORD *)a1;
  if ( (a2 & *(_DWORD *)a1) != a2 )
  {
    v5 = 0;
    v6 = sub_1001253A;
    do
    {
      sub_10010BDE(&v4);
      v2 = *(_DWORD *)a1;
    }
    while ( (a2 & *(_DWORD *)a1) != a2 );
  }
  return v2;
}

//----- (100197C8) --------------------------------------------------------
char __thiscall sub_100197C8(void *this, int a2, char a3, int a4, int a5, int a6)
{
  void *v6; // esi@1
  char v8; // [sp-14h] [bp-1Ch]@1
  int v9; // [sp-10h] [bp-18h]@1
  int v10; // [sp-Ch] [bp-14h]@1
  int v11; // [sp-8h] [bp-10h]@1
  int v12; // [sp-4h] [bp-Ch]@1

  v12 = 3;
  v6 = this;
  sub_10019F0A((int)&v8, (int)&a3);
  return sub_100197F0(v6, a2, v8, v9, v10, v11, v12);
}

//----- (100197F0) --------------------------------------------------------
char __thiscall sub_100197F0(void *this, int a2, char a3, int a4, int a5, int a6, int a7)
{
  int v7; // esi@1
  char v8; // bl@1
  int v10; // [sp-14h] [bp-28h]@1
  int v11; // [sp-10h] [bp-24h]@1
  int v12; // [sp-Ch] [bp-20h]@1
  int v13; // [sp-8h] [bp-1Ch]@1
  int v14; // [sp-4h] [bp-18h]@1
  signed __int32 v15; // [sp+8h] [bp-Ch]@1
  int v16; // [sp+Ch] [bp-8h]@2

  v7 = (int)this;
  v8 = 0;
  sub_1001AFBA();
  v14 = a7;
  v15 = 0;
  sub_10019F0A((int)&v10, (int)&a3);
  if ( sub_10017B3F(v7, (int)&v15, v10, v11, v12, v13, v14) )
  {
    sub_1001EFAA(v16, v15, a2, 0);
    v15 = 0;
    v8 = 1;
  }
  sub_1001AFBA();
  return v8;
}
// 1001AFBA: using guessed type int sub_1001AFBA(void);

//----- (10019847) --------------------------------------------------------
void __usercall sub_10019847(int a1@<ebp>)
{
  LPVOID v1; // eax@3
  void *v2; // eax@4

  if ( !dword_1007C5D8 )
  {
    sub_1000FB4A();
    *(_DWORD *)(a1 - 16) = &dword_1007C5A8;
    sub_100124FC((volatile signed __int32 *)&dword_1007C5A8);
    *(_DWORD *)(a1 - 4) = 0;
    if ( !dword_1007C5D8 )
    {
      v1 = sub_1000F0A6(0x18u);
      if ( v1 )
        v2 = sub_1001E818(v1);
      else
        v2 = 0;
      dword_1007C5D8 = v2;
      sub_1001EA5F(v2, (int)sub_1001E8E4, (int)&unk_10066B1C, 7, (int)&off_1007A09C, (int)&dword_1007C5E0);
    }
    dword_1007C5A8 = 0;
    sub_1000FB24(4);
  }
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1007A09C: using guessed type void *off_1007A09C;
// 1007C5A8: using guessed type int dword_1007C5A8;
// 1007C5E0: using guessed type int dword_1007C5E0;

//----- (100198AB) --------------------------------------------------------
int __thiscall sub_100198AB(void *this, int a2, int a3, int a4)
{
  void *v4; // esi@1
  int v5; // edi@1
  int v6; // ebx@2
  signed int v7; // esi@4
  int v8; // eax@4
  int v9; // eax@5
  int v10; // edx@6
  int v11; // eax@6
  int v12; // ecx@6
  signed int v13; // ebx@10
  int v14; // edx@10
  int v15; // ecx@10
  int result; // eax@10
  int v17; // eax@12
  int v18; // edi@12
  int v19; // edx@13
  int v20; // eax@13
  int v21; // ecx@13
  void *v22; // [sp+Ch] [bp-Ch]@1
  int v23; // [sp+10h] [bp-8h]@5
  int i; // [sp+14h] [bp-4h]@1

  v4 = this;
  v5 = 0;
  v22 = this;
  for ( i = 0; v5 < *((_DWORD *)v4 + 11); i = v5 )
  {
    v6 = *(_DWORD *)(*((_DWORD *)v4 + 8) + 4 * v5);
    if ( v6 && *(_DWORD *)(v6 + 120) > 0 )
    {
      v7 = 0;
      v8 = v6 + 56;
      do
      {
        v9 = sub_10016C85(v8, v7);
        v23 = v9;
        if ( v9 )
        {
          v10 = *(_DWORD *)(v9 + 104) - *(_DWORD *)(v9 + 112);
          *(_DWORD *)(v9 + 112) = *(_DWORD *)(v9 + 104);
          v11 = *(_DWORD *)(v9 + 108);
          v12 = v11 - *(_DWORD *)(v23 + 116);
          *(_DWORD *)(v23 + 116) = v11;
          *(_DWORD *)a3 += v10;
          *(_DWORD *)a2 += v12;
          *(_DWORD *)a4 += v10 - v12;
        }
        ++v7;
        v8 = v6 + 56;
      }
      while ( v7 < *(_DWORD *)(v6 + 120) );
      v4 = v22;
      v5 = i;
    }
    ++v5;
  }
  v13 = 0;
  v14 = *((_DWORD *)v4 + 111) - *((_DWORD *)v4 + 113);
  *((_DWORD *)v4 + 113) = *((_DWORD *)v4 + 111);
  v15 = *((_DWORD *)v4 + 112) - *((_DWORD *)v4 + 114);
  *((_DWORD *)v4 + 114) = *((_DWORD *)v4 + 112);
  *(_DWORD *)a3 += v14;
  *(_DWORD *)a2 += v15;
  result = a4;
  *(_DWORD *)result += v14 - v15;
  if ( *((_DWORD *)v4 + 66) > 0 )
  {
    result = (int)((char *)v4 + 200);
    do
    {
      v17 = sub_10016C85(result, v13);
      v18 = v17;
      if ( v17 )
      {
        v19 = *(_DWORD *)(v17 + 8) - *(_DWORD *)(v17 + 16);
        v20 = *(_DWORD *)(v17 + 12);
        *(_DWORD *)(v18 + 16) = *(_DWORD *)(v18 + 8);
        v21 = v20 - *(_DWORD *)(v18 + 20);
        *(_DWORD *)(v18 + 20) = v20;
        *(_DWORD *)a3 += v19;
        *(_DWORD *)a2 += v21;
        *(_DWORD *)a4 += v19 - v21;
        if ( !sub_10018A0A(v18) )
        {
          sub_10019206((PSLIST_HEADER)v4 + 25, v18, *(_DWORD *)v18, 0);
          sub_1000F417((LPVOID)v18);
        }
      }
      ++v13;
      result = (int)((char *)v4 + 200);
    }
    while ( v13 < *((_DWORD *)v4 + 66) );
  }
  return result;
}

//----- (100199E9) --------------------------------------------------------
int __thiscall sub_100199E9(void *this)
{
  int v1; // edi@1
  LPVOID v2; // eax@1
  int (__thiscall *v3)(_DWORD); // esi@4
  int v4; // eax@4
  int result; // eax@5
  signed __int32 v6; // eax@9
  signed __int32 v7; // edx@10
  char v8; // [sp+Bh] [bp-1h]@1

  v1 = (int)this;
  v2 = sub_100178E9();
  v8 = 1;
  if ( v2 && !*((_BYTE *)v2 + 76) )
  {
    v8 = 0;
    sub_1001AA0D();
  }
  v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 72);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 72));
  v4 = v3(v1);
  if ( v4 )
  {
    if ( v4 == 2 && !*(_DWORD *)(v1 + 408) )
      _InterlockedExchange((volatile signed __int32 *)(v1 + 408), 1);
    v6 = *(_DWORD *)(v1 + 404);
    do
    {
      v7 = v6;
      v6 = _InterlockedCompareExchange((volatile signed __int32 *)(v1 + 404), v6 & 0xBFFFFFFF, v6);
    }
    while ( v6 != v7 );
    result = sub_100191B6(v1, v6 & 0x1FFFFFFF);
  }
  else
  {
    result = sub_10018D92((void *)v1);
  }
  if ( !v8 )
    result = sub_1001AA0D();
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10019A7F) --------------------------------------------------------
char __thiscall sub_10019A7F(int this)
{
  int v1; // ebp@0
  char result; // al@1
  int v3; // edi@1
  volatile signed __int32 *v4; // ebx@1
  int i; // eax@2
  char v6; // al@4
  char v7; // dl@4
  char v8; // al@7
  volatile signed __int32 v9; // ecx@13
  int v10; // esi@16
  int v11; // esi@18
  int v12; // eax@18
  ULONG v13; // eax@18
  char v14; // [sp-14h] [bp-3Ch]@16
  int v15; // [sp-10h] [bp-38h]@16
  int v16; // [sp-Ch] [bp-34h]@16
  int v17; // [sp-8h] [bp-30h]@16
  int v18; // [sp-4h] [bp-2Ch]@16
  int v19; // [sp+Ch] [bp-1Ch]@16
  int v20; // [sp+10h] [bp-18h]@16
  int v21; // [sp+14h] [bp-14h]@16
  int v22; // [sp+18h] [bp-10h]@16
  char v23; // [sp+26h] [bp-2h]@2
  char v24; // [sp+27h] [bp-1h]@2

  result = 0;
  v3 = this;
  v4 = (volatile signed __int32 *)(this + 484);
  if ( *(_DWORD *)(this + 484) <= 0 )
    return result;
  v24 = 0;
  v23 = 0;
  for ( i = sub_10017EE7(v1, 0); ; i = sub_10017EE7(v1, 0) )
  {
    if ( !i )
    {
      v7 = v24;
      v8 = 1;
      v23 = 1;
      goto LABEL_10;
    }
    v6 = sub_10018ABA(v3, i);
    v7 = v6 | v24;
    v24 |= v6;
    if ( *(_DWORD *)(v3 + 440) <= 0 )
      break;
    if ( sub_10019BF1(v3, 1) )
    {
      v7 = v24;
      break;
    }
  }
  v8 = v23;
LABEL_10:
  if ( !*(_DWORD *)(v3 + 408) && (v8 || *(_DWORD *)(v3 + 440) > 0) )
    goto LABEL_17;
  v9 = *v4;
  result = _InterlockedExchangeAdd(v4, -*v4) != v9;
  if ( !result )
  {
    if ( !*(_DWORD *)(v3 + 408) )
      return result;
    if ( v7 )
      return result;
    v19 = 0;
    v20 = 0;
    v21 = 0;
    v22 = 0;
    v18 = 11;
    v10 = *(_DWORD *)(sub_100180CC(v3) + 8);
    sub_10019F0A((int)&v14, (int)&v19);
    result = sub_100197F0((void *)v3, v10, v14, v15, v16, v17, v18);
    if ( result )
      return result;
LABEL_17:
    _InterlockedExchange(v4, 1);
  }
  v11 = sub_10019BF1(v3, 1);
  v12 = sub_10012022();
  v13 = v12 - *(_DWORD *)(v3 + 464) < (unsigned int)v11 ? v11 - (v12 - *(_DWORD *)(v3 + 464)) : 0;
  if ( v23 )
  {
    if ( v13 < 0x1F4 )
      v13 = 500;
  }
  return sub_10017351((void *)v3, v13);
}

//----- (10019B96) --------------------------------------------------------
char __stdcall sub_10019B96(int a1, int a2, int a3)
{
  return sub_10019A7F(a2);
}

//----- (10019BA5) --------------------------------------------------------
char __stdcall sub_10019BA5(PVOID a1, int a2)
{
  return sub_10019A7F((int)a1);
}

//----- (10019BB4) --------------------------------------------------------
void __stdcall Callback(PVOID a1, BOOLEAN a2)
{
  int v2; // esi@1
  int v3; // eax@1

  v2 = sub_10019BF1((int)a1, 1);
  v3 = sub_10012022() - *((_DWORD *)a1 + 116);
  if ( v3 >= (unsigned int)v2 )
    sub_10019A7F((int)a1);
  else
    sub_10017351(a1, v2 - v3);
}

//----- (10019BF1) --------------------------------------------------------
int __thiscall sub_10019BF1(int this, int a2)
{
  unsigned int v2; // eax@1
  unsigned int v3; // ecx@1
  int result; // eax@2
  unsigned int v5; // eax@3
  int v6; // eax@4

  v2 = *(_DWORD *)(this + 400);
  v3 = *(_DWORD *)(this + 460);
  if ( v2 >= v3 )
  {
    v5 = v2 - v3;
    if ( v5 >= 0x64 )
    {
      if ( v5 >= 0x12C )
      {
        if ( v5 >= 0x258 )
        {
          if ( v5 >= 0x5DC )
          {
            if ( v5 >= 0x9C4 )
            {
              if ( v5 >= 0xFA0 )
                v6 = (v5 >> 1) + 8200;
              else
                v6 = v5 / 3 + 2500;
            }
            else
            {
              v6 = v5 / 3 + 555;
            }
          }
          else
          {
            v6 = (v5 >> 2) + 180;
          }
        }
        else
        {
          v6 = v5 / 5 + 60;
        }
      }
      else
      {
        v6 = (v5 >> 3) + 15;
      }
    }
    else
    {
      v6 = v5 / 0xA + 5;
    }
    result = a2 * v6;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10019C88) --------------------------------------------------------
int __cdecl sub_10019C88(char a1, char a2, int a3)
{
  int v3; // ebx@1
  int result; // eax@2
  __int16 v5; // [sp+4h] [bp-40h]@2
  char v6; // [sp+6h] [bp-3Eh]@2
  char v7; // [sp+8h] [bp-3Ch]@2
  char v8; // [sp+9h] [bp-3Bh]@2
  int v9; // [sp+1Ch] [bp-28h]@2
  int v10; // [sp+20h] [bp-24h]@2
  int v11; // [sp+24h] [bp-20h]@2
  int v12; // [sp+28h] [bp-1Ch]@2
  int v13; // [sp+30h] [bp-14h]@2
  int v14; // [sp+38h] [bp-Ch]@2

  v3 = (int)dword_1007C5D8;
  if ( dword_1007C5D8 )
  {
    sub_10028330(&v6, 0, 0x3Eu);
    v13 = 0x20000;
    v5 = 64;
    v7 = a1;
    v8 = a2;
    v9 = dword_10066B3C[0];
    v10 = dword_10066B3C[1];
    v11 = dword_10066B3C[2];
    v12 = dword_10066B3C[3];
    v14 = a3;
    result = sub_1001EAA2(v3, dword_1007C5D0, dword_1007C5D4, (int)&v5);
  }
  return result;
}
// 1007C5D0: using guessed type int dword_1007C5D0;
// 1007C5D4: using guessed type int dword_1007C5D4;

//----- (10019CF5) --------------------------------------------------------
int __stdcall sub_10019CF5(char a1, char a2, int a3)
{
  int result; // eax@2

  if ( (unsigned __int8)a2 <= (unsigned __int8)byte_1007C5CC )
  {
    result = dword_1007C5C8;
    if ( dword_1007C5C8 & 1 )
      result = sub_10019C88(a1, a2, a3);
  }
  return result;
}
// 1007C5C8: using guessed type int dword_1007C5C8;
// 1007C5CC: using guessed type char byte_1007C5CC;

//----- (10019D1F) --------------------------------------------------------
int __thiscall sub_10019D1F(int this, int a2)
{
  int v2; // esi@1
  void *v3; // edi@1

  v2 = this;
  v3 = (void *)(this + 324);
  sub_100124EC((void *)(this + 324));
  if ( *(_DWORD *)a2 != *(_DWORD *)(v2 + 336) )
    sub_10018E27((void *)v2);
  return sub_1001252F(v3);
}

//----- (10019D54) --------------------------------------------------------
signed int __thiscall sub_10019D54(int this)
{
  int v1; // esi@1
  signed int result; // eax@4

  v1 = this;
  if ( sub_10017C39(this) || sub_10017C63((void *)v1) )
  {
    result = 1;
  }
  else if ( *(_DWORD *)(v1 + 484) <= 0 )
  {
    result = 0;
  }
  else
  {
    result = 2;
  }
  return result;
}

//----- (10019D82) --------------------------------------------------------
int __thiscall sub_10019D82(int this, int a2)
{
  int v2; // esi@1
  int result; // eax@5

  v2 = this;
  if ( a2 == -1 )
  {
    *(_DWORD *)(this + 340) = 0;
    *(_DWORD *)(this + 344) = sub_10017631(this);
  }
  else
  {
    *(_DWORD *)(this + 340) = a2;
  }
  if ( *(_DWORD *)(v2 + 340) == *(_DWORD *)(v2 + 344) )
    result = 0;
  else
    result = *(_DWORD *)(v2 + 344);
  return result;
}

//----- (10019DCA) --------------------------------------------------------
signed int __thiscall sub_10019DCA(int this)
{
  int v1; // esi@1
  signed int v2; // ecx@1
  signed int result; // eax@2

  v1 = this;
  v2 = sub_10017631(this);
  if ( (unsigned int)v2 > *(_DWORD *)(v1 + 344) )
  {
    if ( *(_DWORD *)(v1 + 344) == *(_DWORD *)(v1 + 340) )
      result = v2;
    else
      result = 0;
    *(_DWORD *)(v1 + 344) = v2;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10019DFC) --------------------------------------------------------
char __thiscall sub_10019DFC(void *this, int a2)
{
  int v2; // ebx@1
  volatile signed __int32 *v3; // esi@2
  signed __int32 v4; // eax@2
  int v5; // edx@3
  signed __int32 v6; // ST04_4@7
  void (__thiscall *v7)(_DWORD, _DWORD, _DWORD); // esi@7
  char result; // al@8
  signed __int32 v9; // ST04_4@9
  void (__thiscall *v10)(_DWORD, _DWORD, _DWORD); // esi@9

  v2 = (int)this;
  if ( (_BYTE)a2 )
  {
    v3 = (volatile signed __int32 *)((char *)this + 404);
    v4 = *((_DWORD *)this + 101);
    while ( 1 )
    {
      v5 = v4;
      if ( v4 & 0x40000000 )
        v5 = sub_10019759(v2 + 404, 0x40000000);
      if ( v5 & 0x20000000 )
        break;
      v4 = _InterlockedCompareExchange(v3, v5 + 1, v5);
      if ( v4 == v5 )
      {
        v6 = _InterlockedIncrement((volatile signed __int32 *)(v2 + 432));
        v7 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v2 + 68);
        j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 68));
        v7(v2, a2, v6);
        goto LABEL_11;
      }
    }
    result = 0;
  }
  else
  {
    v9 = _InterlockedDecrement((volatile signed __int32 *)this + 108);
    v10 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 68);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 68));
    v10(v2, 0, v9);
    if ( (_InterlockedDecrement((volatile signed __int32 *)(v2 + 404)) & 0x9FFFFFFF) == 0x80000000 )
      sub_100172F1(v2);
LABEL_11:
    result = 1;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10019EAB) --------------------------------------------------------
int __thiscall sub_10019EAB(void *this, char a2)
{
  int v2; // esi@1

  v2 = (int)this;
  sub_1001AFBA();
  if ( a2 )
  {
    if ( (_InterlockedDecrement((volatile signed __int32 *)(v2 + 404)) & 0x9FFFFFFF) == 0x80000000 )
      sub_100172F1(v2);
  }
  else if ( _InterlockedIncrement((volatile signed __int32 *)(v2 + 404)) & 0x40000000 )
  {
    WaitForSingleObjectEx(*(HANDLE *)(v2 + 380), 0xFFFFFFFF, 0);
  }
  return sub_1001AFBA();
}
// 1001AFBA: using guessed type int sub_1001AFBA(void);

//----- (10019F0A) --------------------------------------------------------
int __thiscall sub_10019F0A(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)this ^= (*(_DWORD *)this ^ *(_DWORD *)a2) & 0xFFFFFFF;
  *(_DWORD *)this = *(_DWORD *)a2 ^ (*(_DWORD *)this ^ *(_DWORD *)a2) & 0xFFFFFFF;
  *(_DWORD *)(this + 8) = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(this + 4) = *(_DWORD *)(a2 + 4);
  result = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(this + 12) = result;
  return result;
}

//----- (10019F3F) --------------------------------------------------------
int __thiscall sub_10019F3F(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_1006674C;
  return result;
}
// 1006674C: using guessed type int (__thiscall *off_1006674C)(LPVOID lpMem, char);

//----- (10019F50) --------------------------------------------------------
int __thiscall sub_10019F50(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_10066740;
  return result;
}
// 10066740: using guessed type int (__thiscall *off_10066740)(LPVOID lpMem, char);

//----- (10019F61) --------------------------------------------------------
void *__thiscall sub_10019F61(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D936(this, a2);
  *(_DWORD *)v2 = &off_1006647C;
  return v2;
}
// 1006647C: using guessed type int (__thiscall *off_1006647C)(LPVOID lpMem, char);

//----- (10019F7C) --------------------------------------------------------
int __thiscall sub_10019F7C(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_100665B4;
  return result;
}
// 100665B4: using guessed type int (__thiscall *off_100665B4)(LPVOID lpMem, char);

//----- (10019F8D) --------------------------------------------------------
int __thiscall sub_10019F8D(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_100665C0;
  return result;
}
// 100665C0: using guessed type int (__thiscall *off_100665C0)(LPVOID lpMem, char);

//----- (10019F9E) --------------------------------------------------------
int __thiscall sub_10019F9E(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_10066794;
  return result;
}
// 10066794: using guessed type int (__thiscall *off_10066794)(LPVOID lpMem, char);

//----- (10019FAF) --------------------------------------------------------
void *__thiscall sub_10019FAF(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D936(this, a2);
  *(_DWORD *)v2 = &off_10066764;
  return v2;
}
// 10066764: using guessed type int (__thiscall *off_10066764)(LPVOID lpMem, char);

//----- (10019FCA) --------------------------------------------------------
int __thiscall sub_10019FCA(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_1006677C;
  return result;
}
// 1006677C: using guessed type int (__thiscall *off_1006677C)(LPVOID lpMem, char);

//----- (10019FDB) --------------------------------------------------------
void *__thiscall sub_10019FDB(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D936(this, a2);
  *(_DWORD *)v2 = &off_10066770;
  return v2;
}
// 10066770: using guessed type int (__thiscall *off_10066770)(LPVOID lpMem, char);

//----- (10019FF6) --------------------------------------------------------
int __thiscall sub_10019FF6(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_10066758;
  return result;
}
// 10066758: using guessed type int (__thiscall *off_10066758)(LPVOID lpMem, char);

//----- (1001A007) --------------------------------------------------------
int __thiscall sub_1001A007(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_10066788;
  return result;
}
// 10066788: using guessed type int (__thiscall *off_10066788)(LPVOID lpMem, char);

//----- (1001A018) --------------------------------------------------------
int __thiscall sub_1001A018(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = a2;
  result = this;
  *(_DWORD *)this = &off_1006649C;
  return result;
}
// 1006649C: using guessed type int (__thiscall *off_1006649C)(LPVOID lpMem, char);

//----- (1001A035) --------------------------------------------------------
int __thiscall sub_1001A035(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = a2;
  result = this;
  *(_DWORD *)this = &off_10066734;
  return result;
}
// 10066734: using guessed type int (__thiscall *off_10066734)(LPVOID lpMem, char);

//----- (1001A052) --------------------------------------------------------
int __thiscall sub_1001A052(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_10066524;
  return result;
}
// 10066524: using guessed type int (__thiscall *off_10066524)(LPVOID lpMem, char);

//----- (1001A063) --------------------------------------------------------
int __thiscall sub_1001A063(void *this)
{
  *(_DWORD *)this = &off_100652D4;
  return sub_10027475((int)((char *)this + 4));
}
// 100652D4: using guessed type int (__thiscall *off_100652D4)(LPVOID lpMem, char);

//----- (1001A074) --------------------------------------------------------
LPVOID __thiscall sub_1001A074(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_100652D4;
  sub_10027475((int)((char *)lpMem + 4));
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}
// 100652D4: using guessed type int (__thiscall *off_100652D4)(LPVOID lpMem, char);

//----- (1001A0A1) --------------------------------------------------------
int __thiscall sub_1001A0A1(int this, unsigned int a2)
{
  int v2; // esi@1
  LPVOID v3; // eax@1
  unsigned int v4; // ST08_4@1

  v2 = this;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)this = a2;
  v3 = sub_1000F40E(4 * a2 | -((unsigned __int64)a2 >> 30 != 0));
  v4 = 4 * *(_DWORD *)v2;
  *(_DWORD *)(v2 + 8) = v3;
  sub_10028330(v3, 0, v4);
  return v2;
}

//----- (1001A0DF) --------------------------------------------------------
int __thiscall sub_1001A0DF(int this)
{
  int v1; // esi@1

  v1 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = sub_1000F40E(0x10u);
  return v1;
}

//----- (1001A0F8) --------------------------------------------------------
#error "1001A1C1: call analysis failed (funcsize=61)"

//----- (1001A1DC) --------------------------------------------------------
int __thiscall sub_1001A1DC(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_1000F0A1(*(LPVOID *)(this + 28));
  return sub_1000F0A1(*(LPVOID *)(v1 + 32));
}

//----- (1001A1F3) --------------------------------------------------------
int __thiscall sub_1001A1F3(int this)
{
  int v1; // ebx@1
  int v2; // edi@2
  int v3; // esi@3

  v1 = this;
  if ( *(_DWORD *)(this + 4) > 0 )
  {
    v2 = **(_DWORD **)(this + 8);
    if ( v2 )
    {
      do
      {
        v3 = *(_DWORD *)(v2 + 4);
        sub_1000F0A1(*(LPVOID *)v2);
        sub_1000F417((LPVOID)v2);
        v2 = v3;
      }
      while ( v3 );
    }
  }
  return sub_1000F0A1(*(LPVOID *)(v1 + 8));
}

//----- (1001A236) --------------------------------------------------------
int __thiscall sub_1001A236(void *this)
{
  void *v1; // edi@1
  int result; // eax@1

  v1 = this;
  sub_1001A1F3((int)((char *)this + 140));
  sub_1001B1FA((int)((char *)v1 + 128));
  result = sub_1000F0A1(*((LPVOID *)v1 + 34));
  *(_DWORD *)v1 = off_100667A0;
  return result;
}
// 100667A0: using guessed type int (*off_100667A0[5])();

//----- (1001A264) --------------------------------------------------------
int __thiscall sub_1001A264(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_1000F0A1(*(LPVOID *)(this + 12));
  return sub_1000F0A1(*(LPVOID *)(v1 + 8));
}

//----- (1001A27B) --------------------------------------------------------
int __thiscall sub_1001A27B(void **this)
{
  return sub_1001252F(*this);
}

//----- (1001A2B3) --------------------------------------------------------
void __thiscall sub_1001A2B3(void *this)
{
  sub_100119DE((volatile signed __int32 *)(*(_DWORD *)this + 4));
}

//----- (1001A2EE) --------------------------------------------------------
BOOL __thiscall sub_1001A2EE(int this, int a2)
{
  return !((*(_DWORD *)this ^ *(_DWORD *)a2) & 0xFFFFFFF) && *(_DWORD *)(this + 8) == *(_DWORD *)(a2 + 8);
}

//----- (1001A312) --------------------------------------------------------
int __thiscall sub_1001A312(int this, signed int a2)
{
  int v2; // eax@1
  signed int v3; // edx@1
  int v4; // eax@2
  int i; // edx@3

  v2 = *(_DWORD *)(this + 8);
  v3 = a2 >> 4;
  if ( a2 >> 4 >= 4 )
  {
    v4 = *(_DWORD *)(v2 + 12);
    for ( i = v3 - 3; i; --i )
      v4 = *(_DWORD *)(v4 + 4);
  }
  else
  {
    v4 = *(_DWORD *)(v2 + 4 * v3);
  }
  return *(_DWORD *)v4 + 8 * (a2 & 0xF);
}

//----- (1001A348) --------------------------------------------------------
LPVOID __thiscall sub_1001A348(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_100667A0;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 100667A0: using guessed type int (*off_100667A0[5])();

//----- (1001A36B) --------------------------------------------------------
LPVOID __thiscall sub_1001A36B(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_1001A236(lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (1001A390) --------------------------------------------------------
LPVOID __thiscall sub_1001A390(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_1001A1DC((int)((char *)lpMem + 76));
  sub_1001ECBE((int)v2);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (1001A3BC) --------------------------------------------------------
int __thiscall sub_1001A3BC(int this, signed __int32 a2)
{
  int v2; // esi@1
  int v3; // ebx@1
  char v4; // al@1
  int v5; // edx@1
  volatile signed __int32 *v6; // edi@2
  bool v7; // sf@2
  unsigned __int8 v8; // of@2
  volatile signed __int32 *v9; // edx@3
  signed __int32 v10; // eax@3
  int v11; // edi@4
  volatile signed __int32 *v12; // edi@12
  LPVOID v13; // eax@14
  unsigned int v14; // ST0C_4@14
  signed __int32 v15; // ecx@14
  int v16; // eax@15
  int v17; // edx@20
  char v19; // [sp+Ch] [bp-24h]@25
  int v20; // [sp+14h] [bp-1Ch]@24
  int (*v21)(); // [sp+18h] [bp-18h]@24
  int v22; // [sp+1Ch] [bp-14h]@6
  volatile signed __int32 *v23; // [sp+20h] [bp-10h]@2
  signed __int32 v24; // [sp+24h] [bp-Ch]@3
  int v25; // [sp+28h] [bp-8h]@1
  char v26; // [sp+2Fh] [bp-1h]@1

  v2 = this;
  v26 = 0;
  v3 = 0;
  v4 = 0;
  v5 = *(_DWORD *)(this + 48);
  v25 = *(_DWORD *)(this + 48);
  do
  {
    v6 = (volatile signed __int32 *)(v5 + 8);
    v8 = __OFSUB__(*(_DWORD *)(v5 + 8), -1);
    v7 = *(_DWORD *)(v5 + 8) + 1 < 0;
    v23 = (volatile signed __int32 *)(v5 + 8);
    if ( v7 ^ v8 )
      goto LABEL_11;
    v9 = *(volatile signed __int32 **)v5;
    v10 = 0;
    v24 = 0;
    if ( *(_DWORD *)(v2 + 40) <= 0 )
      goto LABEL_10;
    v11 = v3;
    while ( *v9 )
    {
LABEL_8:
      ++v10;
      ++v9;
      ++v11;
      v24 = v10;
      if ( v10 >= *(_DWORD *)(v2 + 40) )
      {
        v6 = v23;
        goto LABEL_10;
      }
    }
    *(_DWORD *)(a2 + 68) = v11;
    v22 = *(_DWORD *)(v2 + 64);
    if ( _InterlockedCompareExchange(v9, a2, 0) )
    {
      v10 = v24;
      goto LABEL_8;
    }
    v3 = v11;
    v26 = 1;
    if ( v11 >= v22 )
      _InterlockedIncrement((volatile signed __int32 *)(v2 + 64));
    v6 = v23;
    _InterlockedCompareExchange(v23, -1, v24);
LABEL_10:
    v5 = v25;
    v4 = v26;
LABEL_11:
    if ( !v4 )
    {
      _InterlockedCompareExchange(v6, -2, -1);
      v3 += *(_DWORD *)(v2 + 40);
      v12 = (volatile signed __int32 *)(v5 + 4);
      if ( !*(_DWORD *)(v5 + 4) && !_InterlockedCompareExchange(v12, 1, 0) )
      {
        v13 = sub_1000F40E(4 * *(_DWORD *)(v2 + 40) | -((unsigned __int64)*(_DWORD *)(v2 + 40) >> 30 != 0));
        v14 = 4 * *(_DWORD *)(v2 + 40);
        v22 = (int)v13;
        sub_10028330(v13, 0, v14);
        v15 = (signed __int32)sub_1000F0A6(0xCu);
        v23 = (volatile signed __int32 *)v15;
        if ( v15 )
        {
          v16 = v22;
          *(_DWORD *)(v15 + 4) = 0;
          *(_DWORD *)(v15 + 8) = -1;
          *(_DWORD *)v15 = v16;
        }
        else
        {
          v15 = 0;
        }
        v17 = *(_DWORD *)(v2 + 60);
        if ( v17 < *(_DWORD *)(v2 + 56) )
        {
          *(_DWORD *)(*(_DWORD *)(v2 + 52) + 4 * v17) = v15;
          ++*(_DWORD *)(v2 + 60);
        }
        _InterlockedExchange(v12, v15);
        v5 = v25;
      }
      if ( *v12 == 1 )
      {
        v20 = 0;
        v21 = sub_10012578;
        do
          sub_10010BDE(&v19);
        while ( *v12 == 1 );
        v5 = v25;
      }
      v4 = v26;
    }
    v5 = *(_DWORD *)(v5 + 4);
    v25 = v5;
  }
  while ( !v4 );
  return v3;
}

//----- (1001A51F) --------------------------------------------------------
int __thiscall sub_1001A51F(void *this, int a2, char a3)
{
  int v3; // ebp@0
  void *v4; // edi@1
  int result; // eax@1

  v4 = this;
  result = sub_1001A578(v3, a2 + 92);
  *(_BYTE *)(a2 + 77) = 1;
  if ( a3 )
    _InterlockedDecrement((volatile signed __int32 *)v4 + 25);
  return result;
}

//----- (1001A549) --------------------------------------------------------
int __thiscall sub_1001A549(void *this, int a2)
{
  int result; // eax@1

  result = *(_DWORD *)this;
  if ( *(_DWORD *)this )
  {
    *(_DWORD *)(a2 + 4) = *(_DWORD *)(result + 4);
    *(_DWORD *)a2 = *(_DWORD *)this;
    **(_DWORD **)(*(_DWORD *)this + 4) = a2;
    result = *(_DWORD *)this;
    *(_DWORD *)(*(_DWORD *)this + 4) = a2;
  }
  else
  {
    *(_DWORD *)(a2 + 4) = a2;
    *(_DWORD *)a2 = a2;
  }
  *(_DWORD *)this = a2;
  return result;
}

//----- (1001A578) --------------------------------------------------------
int __userpurge sub_1001A578@<eax>(int a1@<ebp>, int a2)
{
  void *v2; // ecx@1
  void *v3; // edi@1

  sub_1000FB4A();
  v3 = v2;
  sub_100118C2((int)((char *)v2 + 4));
  sub_1001A549(v3, *(_DWORD *)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  sub_100119E2((int)((char *)v3 + 4));
  return sub_1000FB24(0);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001A5AC) --------------------------------------------------------
void __thiscall sub_1001A5AC(int this, signed __int32 a2)
{
  int v2; // esi@1
  signed __int32 i; // edx@1
  signed __int32 v4; // eax@4
  int v5; // eax@7
  volatile signed __int32 *v6; // esi@10
  signed __int32 j; // edx@10
  signed __int32 v8; // eax@13

  v2 = this;
  _InterlockedIncrement((volatile signed __int32 *)(this + 112));
  for ( i = *(_DWORD *)(this + 104); i == -1 || a2 <= i; i = v4 )
  {
    v4 = _InterlockedCompareExchange((volatile signed __int32 *)(this + 104), a2, i);
    if ( v4 == i )
    {
      if ( *(_DWORD *)(this + 116) )
        v5 = -1;
      else
        v5 = a2;
      sub_1001AA70(this, v5);
      break;
    }
  }
  v6 = (volatile signed __int32 *)(v2 + 108);
  for ( j = *v6; ; j = v8 )
  {
    if ( j == -1 || a2 >= j )
    {
      v8 = _InterlockedCompareExchange(v6, a2, j);
      if ( v8 != j )
        continue;
    }
    break;
  }
}

//----- (1001A613) --------------------------------------------------------
BOOL __thiscall sub_1001A613(int this, signed __int32 a2)
{
  int v2; // edi@1

  v2 = this;
  _InterlockedCompareExchange((volatile signed __int32 *)(this + 104), -1, a2);
  sub_1001AD09(this);
  return _InterlockedExchangeAdd((volatile signed __int32 *)(v2 + 112), 0xFFFFFFFF) == 1;
}

//----- (1001A643) --------------------------------------------------------
int __userpurge sub_1001A643@<eax>(int a1@<ebp>, int a2)
{
  void *v2; // ecx@1
  int v3; // edi@1
  signed int v4; // esi@1
  bool i; // zf@1
  int v6; // edx@3
  int v7; // eax@3
  int v8; // eax@5
  int v9; // ecx@7
  int v10; // ecx@9
  volatile signed __int32 *v11; // ecx@17

  sub_1000FB4A();
  *(_DWORD *)(a1 - 16) = v2;
  v3 = (int)((char *)v2 + 80);
  *(_DWORD *)(a1 - 24) = (char *)v2 + 80;
  v2 = (char *)v2 + 84;
  *(_DWORD *)(a1 - 20) = v2;
  sub_10011892(v2);
  *(_DWORD *)(a1 - 4) = 0;
  v4 = *(_DWORD *)v3;
  for ( i = *(_DWORD *)v3 == 0; ; i = v4 == *(_DWORD *)v3 )
  {
    v4 = i ? 0 : *(_DWORD *)(v4 + 4);
    if ( !v4 )
      break;
    if ( *(_DWORD *)(v4 + 24) )
      continue;
    v6 = *(_DWORD *)(v4 - 44);
    v7 = *(_DWORD *)(a1 + 8);
    if ( v6 == v7 )
    {
LABEL_11:
      _InterlockedExchange((volatile signed __int32 *)(v4 + 24), 1);
      sub_1001A5AC(v4 - 92, -999);
      sub_1001A643(0);
      continue;
    }
    if ( v7 )
    {
      v9 = 16 * *(_DWORD *)(v7 + 4) >> 4;
      if ( v9 == -1 )
        continue;
      v8 = 16 * *(_DWORD *)(v6 + 4) >> 4;
      if ( v8 <= v9 )
        continue;
    }
    else
    {
      v8 = 16 * *(_DWORD *)(v6 + 4) >> 4;
      if ( v8 == -1 )
        continue;
    }
    v10 = *(_DWORD *)(a1 - 16);
    if ( *(_DWORD *)(v10 + 60) == -1 || sub_1001AB38(v10, v6, v8) )
      goto LABEL_11;
  }
  v11 = *(volatile signed __int32 **)(a1 - 20);
  *(_DWORD *)(a1 - 4) = 1;
  sub_100119DE(v11);
  return sub_1000FB24(12);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001A733) --------------------------------------------------------
char __cdecl sub_1001A733(int a1)
{
  char result; // al@1

  result = sub_10018385(*(_DWORD *)(a1 + 36));
  if ( !result )
  {
    sub_1001A886(*(_DWORD *)(a1 + 16));
    *(_DWORD *)(a1 + 16) = 0;
    result = a1 + 72;
    _InterlockedExchange((volatile signed __int32 *)(a1 + 72), 0);
  }
  return result;
}

//----- (1001A73F) --------------------------------------------------------
char __thiscall sub_1001A73F(int this, int a2)
{
  int v2; // edi@1
  char result; // al@5

  v2 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)this + 12) + 4 * *(_DWORD *)(this + 4));
  if ( v2 == 1
    || _InterlockedExchange(
         (volatile signed __int32 *)(*(_DWORD *)(*(_DWORD *)this + 12) + 4 * *(_DWORD *)(this + 4)),
         1) != v2 )
  {
    sub_1001A8A8(*(_DWORD *)this);
    result = 0;
  }
  else
  {
    if ( a2 )
      *(_DWORD *)a2 = v2;
    result = 1;
  }
  return result;
}

//----- (1001A786) --------------------------------------------------------
int __usercall sub_1001A786@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ebx@1
  int v3; // edi@1
  int v4; // ST0C_4@1
  int (__thiscall *v5)(_DWORD); // esi@1
  int v6; // eax@1

  v2 = a1;
  sub_1001AD97(a1, a2);
  v3 = *(_DWORD *)(v2 + 28);
  v4 = *(_DWORD *)(v2 + 8);
  v5 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 4));
  v6 = v5(v3);
  return sub_1001B15B(2, 4, v6, v4);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001A7B6) --------------------------------------------------------
void __thiscall sub_1001A7B6(void *this)
{
  int v1; // edi@1
  int v2; // esi@2
  int v3; // [sp+8h] [bp-4h]@1

  v3 = 0;
  v1 = (int)((char *)this + 128);
  while ( 1 )
  {
    v2 = sub_1001AC45(v1, (int)&v3);
    if ( !v2 )
      break;
    do
    {
      sub_1001C1CC(*(LPVOID *)(v2 + 8));
      v2 = *(_DWORD *)v2;
    }
    while ( v2 );
    ++v3;
  }
  sub_1001B1FA(v1);
}

//----- (1001A7F7) --------------------------------------------------------
int sub_1001A7F7()
{
  return sub_100121A1(dword_1007C57C, 0);
}

//----- (1001A807) --------------------------------------------------------
int __usercall sub_1001A807@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // esi@1
  int v3; // eax@1
  PSINGLE_LIST_ENTRY v4; // eax@2
  int v5; // edi@2
  int v6; // ecx@2
  LPVOID v7; // eax@5

  sub_1000FB4A();
  v2 = v1;
  v3 = sub_100225B9(*(_DWORD *)(v1 + 24));
  *(_DWORD *)(v2 + 32) = v3;
  if ( !v3 )
  {
    v4 = InterlockedPopEntrySList((PSLIST_HEADER)(*(_DWORD *)(v2 + 24) + 88));
    v5 = 0;
    v6 = 0;
    if ( v4 )
      v6 = (int)&v4[-6];
    *(_DWORD *)(v2 + 32) = v6;
    if ( v6 )
    {
      sub_10023A69(v6);
    }
    else
    {
      v7 = sub_1000F0A6(0x74u);
      *(_DWORD *)(a1 - 16) = v7;
      *(_DWORD *)(a1 - 4) = 0;
      if ( v7 )
        v5 = sub_100239FB(a1);
      *(_DWORD *)(a1 - 4) = -1;
      *(_DWORD *)(v2 + 32) = v5;
    }
    sub_1001A3BC(*(_DWORD *)(v2 + 24) + 88, *(_DWORD *)(v2 + 32));
  }
  *(_DWORD *)(*(_DWORD *)(v2 + 32) + 72) = v2;
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001A886) --------------------------------------------------------
LPVOID __stdcall sub_1001A886(int a1)
{
  int v1; // esi@1
  void *v2; // ecx@2
  LPVOID result; // eax@3

  v1 = a1;
  while ( v1 )
  {
    v2 = (void *)(v1 - 24);
    v1 = *(_DWORD *)v1;
    if ( v2 )
      result = sub_1001A390(v2, 1);
  }
  return result;
}

//----- (1001A8A8) --------------------------------------------------------
int __thiscall sub_1001A8A8(int this)
{
  int result; // eax@1

  result = _InterlockedExchangeAdd((volatile signed __int32 *)(this + 20), 0xFFFFFFFF);
  if ( !result )
    result = sub_1001898B(this + 28, (int (__cdecl *)(_DWORD))sub_1001F7CE, this, *(_DWORD *)this);
  return result;
}

//----- (1001A9D7) --------------------------------------------------------
void __usercall sub_1001A9D7(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // edi@1

  v1 = *(_DWORD *)(a1 - 40);
  v2 = *(_DWORD *)(a1 - 32);
  sub_1001A9DF(a1);
}

//----- (1001A9DF) --------------------------------------------------------
void __usercall sub_1001A9DF(int a1@<ebp>)
{
  sub_100119E2(*(_DWORD *)(a1 - 36) + 4);
}

//----- (1001A9EB) --------------------------------------------------------
void __usercall sub_1001A9EB(int a1@<eax>, int a2@<ebp>)
{
  int v2; // esi@1

  v2 = *(_DWORD *)(a2 - 40);
  LOBYTE(a1) = *(_BYTE *)(a2 - 26);
  *(_DWORD *)(a2 - 32) = a1;
  sub_1001A9F6(a2, v2);
}

//----- (1001A9F6) --------------------------------------------------------
void __usercall sub_1001A9F6(int a1@<ebp>, int a2@<esi>)
{
  if ( *(_BYTE *)(a1 - 25) )
    sub_100119E2(a2 + 84);
}

//----- (1001AA05) --------------------------------------------------------
int __thiscall sub_1001AA05(int this)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 12) + 1;
  *(_DWORD *)(this + 12) = result;
  return result;
}

//----- (1001AA0D) --------------------------------------------------------
int sub_1001AA0D()
{
  return 0;
}

//----- (1001AA10) --------------------------------------------------------
int __thiscall sub_1001AA10(int this)
{
  int v1; // eax@1
  int result; // eax@1

  v1 = *(_DWORD *)(this + 16);
  ++*(_DWORD *)(this + 12);
  result = v1 + 1;
  *(_DWORD *)(this + 16) = result;
  return result;
}

//----- (1001AA1B) --------------------------------------------------------
int __thiscall sub_1001AA1B(int this)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 12) - 1;
  *(_DWORD *)(this + 12) = result;
  return result;
}

//----- (1001AA23) --------------------------------------------------------
int __thiscall sub_1001AA23(int this)
{
  int v1; // eax@1
  int result; // eax@1

  v1 = *(_DWORD *)(this + 16);
  --*(_DWORD *)(this + 12);
  result = v1 - 1;
  *(_DWORD *)(this + 16) = result;
  return result;
}

//----- (1001AA2E) --------------------------------------------------------
char __thiscall sub_1001AA2E(unsigned int *this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // eax@1
  int v5; // eax@1
  char result; // al@4

  v3 = (int)this;
  v4 = sub_1001AB0C(a2, *this);
  v5 = sub_1001ADEE(v3, a2, v4);
  if ( v5 )
  {
    if ( a3 )
      *(_DWORD *)a3 = *(_DWORD *)(v5 + 8);
    sub_1000F417((LPVOID)v5);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1001AA70) --------------------------------------------------------
int __thiscall sub_1001AA70(int this, int a2)
{
  int v2; // ebx@1
  signed int v3; // esi@1
  int result; // eax@1
  signed int v5; // edi@1
  int v6; // ecx@2

  v2 = this;
  v3 = 0;
  result = this + 140;
  v5 = *(_DWORD *)(this + 140);
  if ( v5 > 0 )
  {
    do
    {
      v6 = sub_1001A312(result, v3);
      if ( *(_DWORD *)(v6 + 4) >= a2 && (*(_DWORD *)(v2 + 60) == -1 || *(_DWORD *)(v2 + 60) <= a2) )
        _InterlockedIncrement((volatile signed __int32 *)v6);
      ++v3;
      result = v2 + 140;
    }
    while ( v3 < v5 );
  }
  return result;
}

//----- (1001AAB8) --------------------------------------------------------
signed int __thiscall sub_1001AAB8(int this)
{
  signed int result; // eax@2

  if ( *(_DWORD *)(this + 16) )
    result = 2;
  else
    result = *(_DWORD *)(this + 12) > 0u;
  return result;
}

//----- (1001AACC) --------------------------------------------------------
int __thiscall sub_1001AACC(int this)
{
  return *(_DWORD *)(this + 8);
}

//----- (1001AAD0) --------------------------------------------------------
int __thiscall sub_1001AAD0(int this)
{
  return *(_DWORD *)(this + 124);
}

//----- (1001AAD4) --------------------------------------------------------
int __thiscall sub_1001AAD4(int this)
{
  int v1; // eax@1
  int result; // eax@2

  v1 = *(_DWORD *)(this + 24);
  if ( v1 )
    result = *(_DWORD *)(v1 + 256);
  else
    result = 0;
  return result;
}

//----- (1001AAE5) --------------------------------------------------------
int __thiscall sub_1001AAE5(int this)
{
  int v1; // edi@1
  int v2; // edi@2
  int (__thiscall *v3)(_DWORD); // esi@2
  int result; // eax@2

  v1 = *(_DWORD *)(this + 24);
  if ( v1 )
  {
    v2 = *(_DWORD *)(v1 + 256);
    v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 4);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 4));
    result = v3(v2);
  }
  else
  {
    result = -1;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001AB0C) --------------------------------------------------------
int __cdecl sub_1001AB0C(int a1, unsigned int a2)
{
  unsigned int v2; // edx@1
  unsigned int v3; // ecx@1

  v2 = -2128831035;
  v3 = 0;
  do
    v2 = 16777619 * (v2 ^ *(_BYTE *)(v3++ + a1));
  while ( v3 < 4 );
  return v2 % a2;
}

//----- (1001AB38) --------------------------------------------------------
bool __thiscall sub_1001AB38(int this, int a2, int a3)
{
  int v3; // edi@1
  int v4; // eax@5
  int v5; // esi@5
  int v6; // ecx@7
  int v7; // ecx@8
  char v9; // al@16
  signed int v10; // eax@26

  v3 = this;
  if ( *(_DWORD *)(this + 112) <= 0 || *(_DWORD *)(this + 104) > a3 )
    return 0;
  if ( *(_DWORD *)(this + 60) == -1 || *(_DWORD *)(this + 104) >= *(_DWORD *)(this + 60) )
    return 1;
  v4 = *(_DWORD *)(this + 52);
  v5 = a2;
  if ( a2 != v4 || a3 != 16 * *(_DWORD *)(v4 + 4) >> 4 )
  {
    do
    {
      if ( v5 == *(_DWORD *)(v3 + 48) )
        break;
      if ( 16 * *(_DWORD *)(v5 + 4) >> 4 == a3 )
        break;
      v5 = sub_1001B247(v5);
    }
    while ( v5 );
    while ( v5 )
    {
      if ( v5 == *(_DWORD *)(v3 + 48) || sub_10023849(v5, 0) )
      {
        if ( v5 )
        {
          if ( v5 != *(_DWORD *)(v3 + 48) )
          {
            v10 = sub_10023849(v5, 0);
            if ( v10 != 2 )
            {
              v7 = *(_DWORD *)(v10 + 8);
              return v7 != 0;
            }
          }
        }
        return 0;
      }
      v9 = (*(_DWORD *)(v5 + 4) >> 28) & 1;
      if ( v9 && *(_BYTE *)(v5 + 24) & 3 || !v9 && (unsigned __int8)sub_1001C04C(v5) )
        return 1;
      v5 = sub_1001B247(v5);
    }
    return 0;
  }
  v6 = *(_DWORD *)(this + 56);
  if ( v6 == 2 )
    return 0;
  v7 = *(_DWORD *)(v6 + 8);
  return v7 != 0;
}

//----- (1001AC22) --------------------------------------------------------
int __thiscall sub_1001AC22(int this, int a2)
{
  int v2; // edi@1

  v2 = this;
  sub_100124EC((void *)(this + 112));
  *(_DWORD *)(v2 + 72) = a2;
  return sub_1001252F((void *)(v2 + 112));
}

//----- (1001AC45) --------------------------------------------------------
int __thiscall sub_1001AC45(int this, int a2)
{
  int v2; // edx@1
  int v3; // eax@2
  int result; // eax@5

  v2 = *(_DWORD *)a2;
  if ( *(_DWORD *)a2 >= *(_DWORD *)this )
  {
LABEL_5:
    result = 0;
  }
  else
  {
    v3 = *(_DWORD *)(this + 8) + 4 * v2;
    while ( !*(_DWORD *)v3 )
    {
      ++v2;
      v3 += 4;
      if ( v2 >= *(_DWORD *)this )
        goto LABEL_5;
    }
    *(_DWORD *)a2 = v2;
    result = *(_DWORD *)(*(_DWORD *)(this + 8) + 4 * v2);
  }
  return result;
}

//----- (1001AC76) --------------------------------------------------------
int __usercall sub_1001AC76@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  volatile signed __int32 *v2; // edi@1
  signed __int32 v3; // esi@2
  int v4; // ebx@3
  int result; // eax@6
  int v6; // ecx@9
  int v7; // esi@9
  void *v8; // ecx@9
  int v9; // edi@9
  int v10; // ebx@9
  int v11; // edx@10
  int v12; // ecx@10
  void *v13; // ecx@16

  v2 = (volatile signed __int32 *)(a1 + 4);
  while ( 1 )
  {
    v3 = *v2 - 1;
    _InterlockedExchange(v2, v3);
    if ( *(_DWORD *)a1 > v3 )
      break;
    v4 = *(_DWORD *)(*(_DWORD *)(a1 + 28) + 4 * (v3 & *(_DWORD *)(a1 + 8)));
    if ( v4 )
    {
      if ( !(v4 & 1) || (v4 &= 0xFFFFFFFE, sub_1001A73F(*(_DWORD *)(a1 + 32) + 8 * (v3 & *(_DWORD *)(a1 + 8)), 0)) )
        result = v4;
      else
        result = 1;
      return result;
    }
  }
  *v2 = v3 + 1;
  sub_1000FB4A();
  v7 = v6;
  v8 = *(void **)(v6 + 16);
  *(_DWORD *)(a2 - 16) = v8;
  sub_100124EC(v8);
  v9 = *(_DWORD *)(v7 + 4) - 1;
  *(_DWORD *)(a2 - 24) = 0;
  *(_DWORD *)(a2 - 20) = 0;
  LOBYTE(v10) = 0;
  *(_DWORD *)(v7 + 4) = v9;
  *(_DWORD *)(a2 - 4) = 0;
  if ( *(_DWORD *)v7 > v9 )
  {
    *(_DWORD *)(v7 + 4) = v9 + 1;
  }
  else
  {
    v11 = v9 & *(_DWORD *)(v7 + 8);
    v12 = *(_DWORD *)(v7 + 32);
    v10 = *(_DWORD *)(*(_DWORD *)(v7 + 28) + 4 * v11);
    *(_DWORD *)(a2 - 24) = *(_DWORD *)(v12 + 8 * v11);
    *(_DWORD *)(a2 - 20) = *(_DWORD *)(v12 + 8 * v11 + 4);
  }
  if ( *(_DWORD *)v7 >= v9 )
  {
    *(_DWORD *)(v7 + 12) += *(_DWORD *)v7;
    *(_DWORD *)v7 = 0;
    *(_DWORD *)(v7 + 4) = 0;
    *(_DWORD *)(v7 + 24) = 0;
    *(_BYTE *)(v7 + 20) = 0;
  }
  if ( v10 & 1 )
    sub_1001A73F(a2 - 24, 0);
  v13 = *(void **)(a2 - 16);
  *(_DWORD *)(a2 - 4) = 2;
  sub_1001252F(v13);
  return sub_1000FB24(12);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001ACD0) --------------------------------------------------------
int __thiscall sub_1001ACD0(int this)
{
  int v1; // edi@1
  int v2; // esi@1

  v1 = this;
  v2 = *(_DWORD *)(this + 36);
  sub_100121A1(dword_1007C57C, *(LPVOID *)(this + 36));
  *(_DWORD *)(v1 + 36) = 0;
  return v2;
}

//----- (1001ACEE) --------------------------------------------------------
int __thiscall sub_1001ACEE(LPVOID lpTlsValue, int a2)
{
  *((_DWORD *)lpTlsValue + 9) = a2;
  return sub_100121A1(dword_1007C57C, lpTlsValue);
}

//----- (1001AD09) --------------------------------------------------------
char __thiscall sub_1001AD09(int this)
{
  int v1; // ebx@1
  int v2; // eax@1
  int v3; // edi@1
  int v4; // esi@1
  signed __int32 i; // edx@11
  volatile signed __int32 *v7; // [sp+Ch] [bp-4h]@1

  v1 = this;
  v7 = (volatile signed __int32 *)(this + 108);
  LOBYTE(v2) = _InterlockedExchange((volatile signed __int32 *)(this + 108), -1);
  v3 = *(_DWORD *)(this + 52);
  v4 = *(_DWORD *)(this + 116) != 0 ? -999 : -1;
  while ( v3 && v3 != *(_DWORD *)(v1 + 48) )
  {
    LOBYTE(v2) = (*(_DWORD *)(v3 + 4) >> 28) & 1;
    if ( (_BYTE)v2 && *(_BYTE *)(v3 + 24) & 3 || !(_BYTE)v2 && (LOBYTE(v2) = sub_1001C04C(v3), (_BYTE)v2) )
    {
      v4 = 16 * *(_DWORD *)(v3 + 4) >> 4;
      break;
    }
    v2 = sub_1001B247(v3);
    v3 = v2;
  }
  for ( i = -1; ; i = v2 )
  {
    if ( i == -1 || v4 >= i )
    {
      v2 = _InterlockedCompareExchange(v7, v4, i);
      if ( v2 != i )
        continue;
    }
    break;
  }
  return v2;
}

//----- (1001AD92) --------------------------------------------------------
void __thiscall sub_1001AD92(int this)
{
  _InterlockedIncrement((volatile signed __int32 *)(this + 100));
}

//----- (1001AD97) --------------------------------------------------------
int __usercall sub_1001AD97@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // edx@8
  int v3; // ecx@8
  int v4; // esi@8
  int v6; // eax@16
  char v7; // al@18
  int v8; // edi@18
  int v9; // edi@19
  int v10; // eax@26
  int v11; // eax@28
  int v12; // edi@1
  int v13; // esi@1

  v12 = a1;
  v13 = *(_DWORD *)(a1 + 32);
  if ( v13 )
  {
    *(_DWORD *)(a1 + 32) = 0;
    if ( *(_DWORD *)(v13 + 80) <= *(_DWORD *)(v13 + 76) )
    {
      if ( *(_DWORD *)(v13 + 112) )
        sub_1001AC22(v13, 0);
      else
        *(_DWORD *)(v13 + 72) = 0;
      sub_1001AE64((PSLIST_HEADER)(*(_DWORD *)(v12 + 24) + 88), v13, *(_DWORD *)(v13 + 68), 1);
    }
    else
    {
      sub_1001AC22(v13, 0);
      sub_100224E9(*(_DWORD *)(v12 + 24), v13);
    }
  }
  sub_1000FFB0((int)&unk_10075FF8, 44);
  v4 = v3;
  *(_DWORD *)(a2 - 40) = v3;
  if ( *(_DWORD *)(v3 + 100) )
  {
    *(_DWORD *)(a2 - 52) = 0;
    *(_DWORD *)(a2 - 48) = sub_10012578;
    do
      sub_10010C65((void *)(a2 - 60));
    while ( *(_DWORD *)(v4 + 100) );
  }
  if ( *(_DWORD *)(v4 + 132) > 0 )
    sub_1001A7B6((void *)v4);
  if ( *(_DWORD *)(v4 + 80) )
  {
    LOBYTE(v6) = 0;
    *(_BYTE *)(a2 - 26) = 0;
    while ( !(_BYTE)v6 )
    {
      *(_BYTE *)(a2 - 25) = 1;
      sub_100118C2(v4 + 84);
      *(_DWORD *)(a2 - 4) = 0;
      v7 = 1;
      *(_BYTE *)(a2 - 25) = 1;
      v8 = *(_DWORD *)(v4 + 80);
      if ( v8 )
        v9 = *(_DWORD *)(v8 + 4);
      else
        v9 = 0;
      while ( v9 && v7 )
      {
        if ( v9 == *(_DWORD *)(v4 + 80) )
          *(_DWORD *)(a2 - 32) = 0;
        else
          *(_DWORD *)(a2 - 32) = *(_DWORD *)(v9 + 4);
        *(_DWORD *)(a2 - 44) = v9 - 92;
        v10 = sub_1001BEDF(*(void **)(v9 - 92 + 48));
        *(_DWORD *)(a2 - 36) = v10;
        if ( !sub_10011A3C(v10 + 4) )
        {
          sub_100119E2(v4 + 84);
          *(_BYTE *)(a2 - 25) = 0;
          sub_10012130(1u);
          break;
        }
        *(_DWORD *)(a2 - 4) = 1;
        sub_1001AE36((void *)(v4 + 80), v9);
        *(_BYTE *)(v9 - 15) = 0;
        sub_1001A549(*(void **)(a2 - 36), v9);
        *(_DWORD *)(a2 - 4) = 0;
        v9 = *(_DWORD *)(a2 - 32);
        sub_1001A9DF(a2);
        v7 = *(_BYTE *)(a2 - 25);
      }
      v11 = v9 == 0;
      *(_DWORD *)(a2 - 32) = v11;
      *(_BYTE *)(a2 - 26) = v11;
      *(_DWORD *)(a2 - 4) = -2;
      sub_1001A9F6(a2, v4);
      v6 = *(_DWORD *)(a2 - 32);
    }
  }
  else
  {
    sub_10011991((void *)(v4 + 84));
  }
  return sub_1000FFF6(v3, v2);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1001ADEE) --------------------------------------------------------
int __thiscall sub_1001ADEE(int this, int a2, int a3)
{
  int v3; // edi@1
  int v4; // esi@1
  int v5; // ecx@1
  int v6; // edx@1
  int result; // eax@4

  v3 = this;
  v4 = 0;
  v5 = *(_DWORD *)(this + 8);
  v6 = *(_DWORD *)(v5 + 4 * a3);
  if ( v6 )
  {
    while ( *(_DWORD *)(v6 + 4) != *(_DWORD *)a2 )
    {
      v4 = v6;
      v6 = *(_DWORD *)v6;
      if ( !v6 )
        goto LABEL_4;
    }
    if ( v4 )
      *(_DWORD *)v4 = *(_DWORD *)v6;
    else
      *(_DWORD *)(v5 + 4 * a3) = *(_DWORD *)v6;
    --*(_DWORD *)(v3 + 4);
    result = v6;
  }
  else
  {
LABEL_4:
    result = 0;
  }
  return result;
}

//----- (1001AE36) --------------------------------------------------------
int __thiscall sub_1001AE36(void *this, int a2)
{
  int result; // eax@1

  **(_DWORD **)(a2 + 4) = *(_DWORD *)a2;
  *(_DWORD *)(*(_DWORD *)a2 + 4) = *(_DWORD *)(a2 + 4);
  result = *(_DWORD *)this;
  if ( a2 == *(_DWORD *)this )
  {
    if ( result == *(_DWORD *)(result + 4) )
      result = 0;
    else
      result = *(_DWORD *)result;
    *(_DWORD *)this = result;
  }
  return result;
}

//----- (1001AE64) --------------------------------------------------------
char __thiscall sub_1001AE64(PSLIST_HEADER ListHead, int a2, int a3, char a4)
{
  int v4; // esi@1
  int v5; // edx@1
  signed __int32 v6; // edi@1
  char result; // al@2
  struct _SINGLE_LIST_ENTRY *v8; // ecx@3
  int v9; // eax@3
  int v10; // edx@4
  int v11; // ebx@4
  int v12; // edx@5
  PSINGLE_LIST_ENTRY v13; // eax@15
  int v14; // ST08_4@15

  v4 = (int)ListHead;
  v5 = a3 >> *(_DWORD *)&ListHead[5].s.Depth;
  v6 = a3 & (unsigned int)((char *)&ListHead[5].s.Next.Next[-1].Next + 3);
  if ( v5 < *(_DWORD *)&ListHead[7].s.Depth )
  {
    v8 = ListHead[7].s.Next.Next;
    v9 = *(_DWORD *)(v4 + 52);
    if ( v5 < (signed int)v8 )
    {
      v11 = *(_DWORD *)(v9 + 4 * v5);
    }
    else
    {
      v10 = v5 - (_DWORD)v8;
      v11 = *(_DWORD *)(v9 + 4 * (_DWORD)v8 - 4);
      if ( v10 >= 0 )
      {
        v12 = v10 + 1;
        do
        {
          v11 = *(_DWORD *)(v11 + 4);
          --v12;
        }
        while ( v12 );
      }
    }
    if ( _InterlockedCompareExchange((volatile signed __int32 *)(*(_DWORD *)v11 + 4 * v6), 0, a2) == a2 )
    {
      _InterlockedCompareExchange((volatile signed __int32 *)(v11 + 8), v6, -2);
      if ( a4 )
      {
        if ( (signed int)QueryDepthSList((PSLIST_HEADER)v4) <= *(_DWORD *)(v4 + 68) )
        {
          InterlockedPushEntrySList((PSLIST_HEADER)v4, (PSINGLE_LIST_ENTRY)(a2 + 24));
        }
        else
        {
          InterlockedPushEntrySList((PSLIST_HEADER)(v4 + 8), (PSINGLE_LIST_ENTRY)(a2 + 24));
          if ( (signed int)QueryDepthSList((PSLIST_HEADER)(v4 + 8)) > *(_DWORD *)(v4 + 68)
            && !sub_10018385(*(_DWORD *)(v4 + 36))
            && !_InterlockedCompareExchange((volatile signed __int32 *)(v4 + 72), 1, 0) )
          {
            v13 = InterlockedFlushSList((PSLIST_HEADER)(v4 + 8));
            v14 = *(_DWORD *)(v4 + 36);
            *(_DWORD *)(v4 + 16) = v13;
            sub_1001898B(v4 + 20, (int (__cdecl *)(_DWORD))sub_1001A733, v4, v14);
          }
        }
      }
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1001AF61) --------------------------------------------------------
int __userpurge sub_1001AF61@<eax>(int a1@<ebp>, int a2)
{
  void *v2; // ecx@1
  void *v3; // edi@1

  sub_1000FB4A();
  v3 = v2;
  sub_100118C2((int)((char *)v2 + 4));
  sub_1001AE36(v3, *(_DWORD *)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  sub_100119E2((int)((char *)v3 + 4));
  return sub_1000FB24(0);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001AF95) --------------------------------------------------------
int __stdcall sub_1001AF95(int a1)
{
  int v1; // ebp@0

  return sub_1001AF61(v1, a1 + 92);
}

//----- (1001AFAB) --------------------------------------------------------
int __thiscall sub_1001AFAB(LPVOID lpTlsValue)
{
  return sub_100121A1(dword_1007C57C, lpTlsValue);
}

//----- (1001AFBF) --------------------------------------------------------
char __thiscall sub_1001AFBF(void *this)
{
  int v1; // ebx@1
  int v2; // eax@1
  int v3; // edi@1
  int v4; // esi@2
  int v5; // edi@5
  int v7; // [sp+8h] [bp-8h]@5
  int v8; // [sp+Ch] [bp-4h]@1

  v8 = 0;
  v1 = (int)((char *)this + 128);
  v2 = sub_1001AC45((int)((char *)this + 128), (int)&v8);
  v3 = v2;
  if ( v2 )
  {
    do
    {
      v4 = *(_DWORD *)v3;
      if ( !*(_DWORD *)v3 )
      {
        ++v8;
        v4 = sub_1001AC45(v1, (int)&v8);
      }
      LOBYTE(v2) = sub_1001C05A(*(_DWORD *)(v3 + 8));
      if ( (_BYTE)v2 )
      {
        v5 = *(_DWORD *)(v3 + 8);
        v7 = sub_1001C0F1(v5);
        LOBYTE(v2) = sub_1001AA2E((unsigned int *)v1, (int)&v7, 0);
        if ( v5 )
        {
          sub_1001B51B(v5);
          LOBYTE(v2) = sub_1000F417((LPVOID)v5);
        }
      }
      v3 = v4;
    }
    while ( v4 );
  }
  return v2;
}

//----- (1001B043) --------------------------------------------------------
int __thiscall sub_1001B043(int this, int (__cdecl *a1)(_DWORD, _DWORD), int a2, int (__cdecl *a3)(_DWORD, _DWORD))
{
  int v4; // ecx@1

  v4 = *(_DWORD *)(this + 32);
  return sub_10023BDE(a1, a2, a3);
}

//----- (1001B0E8) --------------------------------------------------------
int __cdecl sub_1001B0E8(char a1, char a2, int a3, int a4)
{
  int v4; // ebx@1
  int result; // eax@2
  __int16 v6; // [sp+4h] [bp-40h]@2
  char v7; // [sp+6h] [bp-3Eh]@2
  char v8; // [sp+8h] [bp-3Ch]@2
  char v9; // [sp+9h] [bp-3Bh]@2
  int v10; // [sp+1Ch] [bp-28h]@2
  int v11; // [sp+20h] [bp-24h]@2
  int v12; // [sp+24h] [bp-20h]@2
  int v13; // [sp+28h] [bp-1Ch]@2
  int v14; // [sp+30h] [bp-14h]@2
  int v15; // [sp+38h] [bp-Ch]@2
  int v16; // [sp+3Ch] [bp-8h]@2

  v4 = (int)dword_1007C5D8;
  if ( dword_1007C5D8 )
  {
    sub_10028330(&v7, 0, 0x3Eu);
    v14 = 0x20000;
    v6 = 64;
    v8 = a1;
    v9 = a2;
    v10 = dword_10066B5C[0];
    v11 = dword_10066B5C[1];
    v12 = dword_10066B5C[2];
    v13 = dword_10066B5C[3];
    v15 = a3;
    v16 = a4;
    result = sub_1001EAA2(v4, dword_1007C5D0, dword_1007C5D4, (int)&v6);
  }
  return result;
}
// 1007C5D0: using guessed type int dword_1007C5D0;
// 1007C5D4: using guessed type int dword_1007C5D4;

//----- (1001B15B) --------------------------------------------------------
int __stdcall sub_1001B15B(char a1, char a2, int a3, int a4)
{
  int result; // eax@2

  if ( (unsigned __int8)a2 <= (unsigned __int8)byte_1007C5CC )
  {
    result = dword_1007C5C8;
    if ( dword_1007C5C8 & 2 )
      result = sub_1001B0E8(a1, a2, a3, a4);
  }
  return result;
}
// 1007C5C8: using guessed type int dword_1007C5C8;
// 1007C5CC: using guessed type char byte_1007C5CC;

//----- (1001B188) --------------------------------------------------------
int __thiscall sub_1001B188(int this, int a2)
{
  int v2; // ebp@0
  int v3; // esi@1
  int result; // eax@2
  signed __int32 v5; // ebx@5

  v3 = a2 - *(_DWORD *)(this + 12);
  if ( v3 == *(_DWORD *)(this + 4) - 1 )
  {
    result = sub_1001AC76(this, v2);
  }
  else if ( v3 >= *(_DWORD *)(this + 4) || v3 < *(_DWORD *)this )
  {
    result = 0;
  }
  else
  {
    v5 = _InterlockedExchange((volatile signed __int32 *)(*(_DWORD *)(this + 28) + 4 * (v3 & *(_DWORD *)(this + 8))), 0);
    if ( !(v5 & 1) || (v5 &= 0xFFFFFFFE, sub_1001A73F(*(_DWORD *)(this + 32) + 8 * (v3 & *(_DWORD *)(this + 8)), 0)) )
      result = v5;
    else
      result = 1;
  }
  return result;
}

//----- (1001B1EB) --------------------------------------------------------
int __thiscall sub_1001B1EB(int this, int a2)
{
  return sub_1001B188(*(_DWORD *)(this + 32) + 76, a2);
}

//----- (1001B1FA) --------------------------------------------------------
void __thiscall sub_1001B1FA(int this)
{
  int v1; // edi@1
  int v2; // ebx@2
  void *v3; // eax@3
  void *v4; // esi@4
  int v5; // eax@6

  v1 = this;
  if ( *(_DWORD *)(this + 4) > 0 )
  {
    v2 = 0;
    if ( *(_DWORD *)this > 0 )
    {
      do
      {
        v3 = *(void **)(*(_DWORD *)(v1 + 8) + 4 * v2);
        if ( v3 )
        {
          do
          {
            v4 = *(void **)v3;
            sub_1000F417(v3);
            v3 = v4;
          }
          while ( v4 );
        }
        ++v2;
      }
      while ( v2 < *(_DWORD *)v1 );
    }
    v5 = *(_DWORD *)v1;
    *(_DWORD *)(v1 + 4) = 0;
    sub_10028330(*(void **)(v1 + 8), 0, 4 * v5);
  }
}

//----- (1001B247) --------------------------------------------------------
int __thiscall sub_1001B247(int this)
{
  int result; // eax@2

  if ( (*(_DWORD *)(this + 4) & 0xFFFFFFF) == 0xFFFFFFF )
    result = 0;
  else
    result = *(_DWORD *)this;
  return result;
}

//----- (1001B25B) --------------------------------------------------------
int __cdecl sub_1001B25B(volatile signed __int32 *a1, signed __int32 a2, int a3)
{
  int v4; // [sp+0h] [bp-4h]@1

  v4 = a3;
  sub_1001B9C0(a1, (signed __int32 *)&v4, a2, 5u, 5u);
  return v4;
}

//----- (1001B282) --------------------------------------------------------
int __thiscall sub_1001B282(void *this, int *a2, int a3)
{
  int result; // eax@1
  int i; // edi@1

  result = a3;
  for ( i = (int)this; !*(_BYTE *)(a3 + 100); result = a3 )
    sub_10009170(i, *a2);
  return result;
}

//----- (1001B2AE) --------------------------------------------------------
int __thiscall sub_1001B2AE(int this, int a2, int a3, int a4)
{
  int v4; // esi@1
  int result; // eax@1

  v4 = this;
  sub_1001B2DB(this, a4);
  *(_DWORD *)(v4 + 108) = a2;
  *(_DWORD *)(v4 + 112) = a3;
  result = v4;
  *(_DWORD *)v4 = &off_100668C4;
  return result;
}
// 100668C4: using guessed type int (__thiscall *off_100668C4)(LPVOID lpMem, char);

//----- (1001B2DB) --------------------------------------------------------
int __thiscall sub_1001B2DB(int this, int a2)
{
  int v2; // esi@1

  v2 = this;
  *(_DWORD *)this = &off_100668A8;
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)this = &off_100668B4;
  *(_DWORD *)(this + 8) = 3;
  sub_1000DE1E(this + 12);
  sub_1000E533(v2 + 52, 2);
  *(_BYTE *)(v2 + 100) = 0;
  *(_DWORD *)(v2 + 104) = 0;
  return v2;
}
// 1000DE1E: using guessed type int __cdecl sub_1000DE1E(_DWORD);
// 100668A8: using guessed type int (__thiscall *off_100668A8)(LPVOID lpMem, char);
// 100668B4: using guessed type int (__thiscall *off_100668B4)(LPVOID lpMem, char);

//----- (1001B326) --------------------------------------------------------
void *__thiscall sub_1001B326(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_1006689C;
  return v2;
}
// 1006689C: using guessed type int (__thiscall *off_1006689C)(LPVOID lpMem, char);

//----- (1001B341) --------------------------------------------------------
int __thiscall sub_1001B341(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)this = &off_1006689C;
  return result;
}
// 1006689C: using guessed type int (__thiscall *off_1006689C)(LPVOID lpMem, char);

//----- (1001B352) --------------------------------------------------------
int __userpurge sub_1001B352@<eax>(int a1@<ebp>, int a2, int a3)
{
  signed __int32 v3; // ecx@1
  signed __int32 v4; // edi@1
  int v5; // esi@1
  LPVOID v6; // eax@1
  int v7; // esi@1
  volatile signed __int32 *v8; // edx@4
  signed __int32 v9; // esi@4
  signed __int32 i; // eax@4
  LPVOID v11; // esi@9
  int v12; // eax@11

  sub_1000FB4A();
  v4 = v3;
  *(_DWORD *)(a1 - 16) = v3;
  *(_DWORD *)(v4 + 4) |= 0xFFFFFFFu;
  *(_DWORD *)(v3 + 8) = 0;
  *(_DWORD *)(v3 + 16) = 0;
  *(_DWORD *)(v3 + 20) = 2147483648;
  *(_DWORD *)(v3 + 24) = 0;
  *(_DWORD *)(v3 + 56) = 0;
  sub_10010496(v3 + 60);
  *(_DWORD *)(a1 - 4) = 0;
  v5 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(v4 + 100) = *(_DWORD *)(v5 + 100);
  *(_DWORD *)(v4 + 108) = 0;
  *(_DWORD *)(v4 + 120) = 0;
  *(_DWORD *)(v4 + 132) = 0;
  *(_DWORD *)(v4 + 136) = 0;
  v6 = sub_100116CB(a1);
  *(_DWORD *)(v4 + 12) = v6;
  *(_DWORD *)v4 = *((_DWORD *)v6 + 13);
  v7 = *(_DWORD *)(v5 + 8);
  *(_DWORD *)(v4 + 8) = v7;
  if ( (unsigned __int8)sub_1001C063(v7) )
    _InterlockedIncrement((volatile signed __int32 *)(v7 + 4));
  sub_1001BF6A(a1);
  sub_10010E7B(v4 + 60);
  if ( *(_BYTE *)(a1 + 12) )
  {
    v8 = (volatile signed __int32 *)(*(_DWORD *)(v4 + 100) + 104);
    v9 = *v8;
    *(_DWORD *)(v4 + 104) = *v8;
    for ( i = _InterlockedCompareExchange(v8, v4, v9);
          i != v9;
          i = _InterlockedCompareExchange((volatile signed __int32 *)(*(_DWORD *)(v4 + 100) + 104), v4, i) )
    {
      *(_DWORD *)(v4 + 104) = i;
      v9 = i;
    }
  }
  else
  {
    *(_DWORD *)(v4 + 120) |= 1u;
    *(_DWORD *)(v4 + 104) = 0;
  }
  v11 = sub_100178E9();
  if ( !*((_DWORD *)v11 + 8) )
    sub_1001A807(a1);
  v12 = *(_DWORD *)(*((_DWORD *)v11 + 8) + 64);
  *(_DWORD *)(v4 + 4) &= 0xFFFFFFFu;
  *(_DWORD *)(v4 + 128) = v12;
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 10010E7B: using guessed type int __thiscall sub_10010E7B(_DWORD);

//----- (1001B443) --------------------------------------------------------
void *__thiscall sub_1001B443(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10066758;
  return v2;
}
// 10066758: using guessed type int (__thiscall *off_10066758)(LPVOID lpMem, char);

//----- (1001B46E) --------------------------------------------------------
int __thiscall sub_1001B46E(int *this)
{
  return sub_10009150(*this);
}

//----- (1001B4A7) --------------------------------------------------------
int __thiscall sub_1001B4A7(int this)
{
  int result; // eax@2

  if ( *(_BYTE *)(this + 4) )
    result = sub_10009150(*(_DWORD *)this);
  return result;
}

//----- (1001B4E6) --------------------------------------------------------
int __thiscall sub_1001B4E6(int this)
{
  int result; // eax@2

  if ( *(_DWORD *)(this + 8) )
    result = sub_1000F0A1(*(LPVOID *)(this + 8));
  return result;
}

//----- (1001B4F6) --------------------------------------------------------
int __thiscall sub_1001B4F6(void *this)
{
  void *v1; // esi@1
  int result; // eax@1

  v1 = this;
  *(_DWORD *)this = &off_100668B4;
  sub_1000E4D8((int)((char *)this + 52));
  result = sub_1000DDD4((int)((char *)v1 + 12));
  *(_DWORD *)v1 = &off_100668A8;
  return result;
}
// 100668A8: using guessed type int (__thiscall *off_100668A8)(LPVOID lpMem, char);
// 100668B4: using guessed type int (__thiscall *off_100668B4)(LPVOID lpMem, char);

//----- (1001B51B) --------------------------------------------------------
int __thiscall sub_1001B51B(int this)
{
  int v1; // edi@1
  bool v2; // bl@1
  int v3; // ecx@3
  int v4; // esi@4
  void *v5; // esi@5
  unsigned int v6; // esi@7
  char v8; // [sp+10h] [bp-18h]@13

  v1 = this;
  v2 = 0;
  if ( !(unsigned __int8)sub_1001C026(this) )
  {
    v2 = sub_1001C356(v1, 0) == 0;
    if ( *(_DWORD *)(v1 + 100) == v1 )
    {
      v3 = *(_DWORD *)(v1 + 104);
      if ( v3 )
      {
        do
        {
          v4 = *(_DWORD *)(v3 + 104);
          sub_1001C1CC((LPVOID)v3);
          v3 = v4;
        }
        while ( v4 );
      }
    }
  }
  v5 = *(void **)(v1 + 108);
  if ( v5 )
  {
    sub_1001B4E6(*(_DWORD *)(v1 + 108));
    sub_1000F417(v5);
  }
  v6 = *(_DWORD *)(v1 + 24) & 0xFFFFFFFC;
  if ( v6 && v6 != 12 )
  {
    sub_1003B23B((LPVOID)(*(_DWORD *)(v1 + 24) & 0xFFFFFFFC));
    sub_1000F417((LPVOID)v6);
  }
  if ( (unsigned __int8)sub_1001C063(*(_DWORD *)(v1 + 8)) )
    sub_1001C1A6(*(void **)(v1 + 8));
  if ( v2 )
  {
    sub_10019FF6((int)&v8);
    sub_10027494((int)&v8, (int)&unk_100761E4);
  }
  return sub_10010531((void *)(v1 + 60));
}

//----- (1001B601) --------------------------------------------------------
LPVOID __thiscall sub_1001B601(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1
  int v3; // ST04_4@1

  v2 = lpMem;
  v3 = *((_DWORD *)lpMem + 1);
  *(_DWORD *)lpMem = &off_100668D4;
  sub_10011490(v3);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}
// 100668D4: using guessed type int (__thiscall *off_100668D4)(LPVOID lpMem, char);

//----- (1001B62D) --------------------------------------------------------
LPVOID __thiscall sub_1001B62D(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_1001B4F6(lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (1001B64F) --------------------------------------------------------
LPVOID __thiscall sub_1001B64F(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_1001B4F6(lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (1001B671) --------------------------------------------------------
LPVOID __thiscall sub_1001B671(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_100668A8;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 100668A8: using guessed type int (__thiscall *off_100668A8)(LPVOID lpMem, char);

//----- (1001B694) --------------------------------------------------------
LPVOID __thiscall sub_1001B694(void *this, char a2, char a3)
{
  void *v3; // esi@1

  v3 = this;
  sub_1001AFBF(this);
  return sub_1001B751((unsigned int *)v3 + 32, (int)&a2, (int)&a3);
}

//----- (1001B6B7) --------------------------------------------------------
int __thiscall sub_1001B6B7(unsigned int *this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // eax@1
  int result; // eax@1

  v3 = (int)this;
  v4 = sub_1001AB0C(a2, *this);
  result = sub_10018A5D(v3, a2, v4);
  if ( result )
  {
    if ( a3 )
      *(_DWORD *)a3 = *(_DWORD *)(result + 8);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1001B6ED) --------------------------------------------------------
int __thiscall sub_1001B6ED(int this, char a2)
{
  unsigned int *v2; // edi@1
  int v3; // eax@1
  int v4; // esi@2
  int v6; // [sp+8h] [bp-4h]@6

  v2 = (unsigned int *)(this + 128);
  v3 = sub_1001B6B7((unsigned int *)(this + 128), (int)&a2, 0);
  if ( v3 )
    v4 = *(_DWORD *)(v3 + 8);
  else
    v4 = 0;
  if ( v4 && (*(_DWORD *)(v4 + 120) >> 1) & 1 )
  {
    v6 = *(_DWORD *)(v4 + 100);
    sub_1001AA2E(v2, (int)&v6, 0);
    sub_1001B51B(v4);
    sub_1000F417((LPVOID)v4);
    v4 = 0;
  }
  return v4;
}

//----- (1001B751) --------------------------------------------------------
LPVOID __thiscall sub_1001B751(unsigned int *this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // ebx@1
  LPVOID v5; // eax@2
  LPVOID v6; // edx@2
  LPVOID result; // eax@5

  v3 = (int)this;
  v4 = sub_1001AB0C(a2, *this);
  if ( sub_10018A5D(v3, a2, v4) )
  {
    result = 0;
  }
  else
  {
    v5 = sub_1000F0A6(0xCu);
    v6 = v5;
    if ( v5 )
    {
      *(_DWORD *)v5 = 0;
      *((_DWORD *)v5 + 1) = *(_DWORD *)a2;
      *((_DWORD *)v5 + 2) = *(_DWORD *)a3;
    }
    else
    {
      v6 = 0;
    }
    result = v6;
    *(_DWORD *)v6 = *(_DWORD *)(*(_DWORD *)(v3 + 8) + 4 * v4);
    *(_DWORD *)(*(_DWORD *)(v3 + 8) + 4 * v4) = v6;
    ++*(_DWORD *)(v3 + 4);
  }
  return result;
}

//----- (1001B7BB) --------------------------------------------------------
int __thiscall sub_1001B7BB(void *this, char a2)
{
  int v2; // esi@1
  LPVOID v3; // eax@1
  int v4; // ebx@1
  int v5; // edi@2
  unsigned int v6; // eax@8
  int v7; // eax@9
  int v8; // eax@11
  int v9; // ecx@11
  int v10; // eax@13
  int result; // eax@24
  int v12; // [sp+Ch] [bp-Ch]@1
  int v13; // [sp+14h] [bp-4h]@1

  v2 = (int)this;
  v3 = sub_100178E9();
  v4 = *(_DWORD *)(v2 + 108);
  v13 = (int)v3;
  v12 = *(_DWORD *)(v2 + 108);
  if ( (unsigned __int8)sub_1001C039(v2) )
    v5 = 0;
  else
    v5 = *(_DWORD *)(*(_DWORD *)(v2 + 100) + 104);
  if ( v4 && *(_BYTE *)(v4 + 12) )
  {
    sub_1001B8EA((void *)v2, v13);
    *(_BYTE *)(v4 + 12) = 0;
  }
  else
  {
    while ( *(_DWORD *)(v2 + 132) > 0 )
    {
      v6 = *(_DWORD *)(v2 + 132);
      if ( v6 <= 2 )
      {
        v7 = *(_DWORD *)(v2 + 4 * v6 + 108);
      }
      else
      {
        --*(_DWORD *)(v4 + 4);
        v7 = *(_DWORD *)(*(_DWORD *)(v4 + 8) + 4 * *(_DWORD *)(v4 + 4));
      }
      --*(_DWORD *)(v2 + 132);
      v8 = sub_1001B1EB(v13, v7);
      v9 = v8;
      if ( !v8 )
        break;
      if ( v8 != 1 )
      {
        v10 = *(_DWORD *)(v13 + 156);
        if ( *(_BYTE *)(v13 + 76) )
          ++*(_DWORD *)(v10 + 12);
        else
          ++*(_DWORD *)(v10 + 108);
        *(_DWORD *)(v9 + 8) = 0;
        sub_1001C0A0((void *)v2, v9);
      }
    }
  }
  while ( 1 )
  {
    if ( a2 || *(_DWORD *)(v2 + 16) > 0 || (unsigned __int8)sub_1001C026(v2) || v5 )
      sub_1001BA80(*(void **)(v2 + 100), 0, v5);
    sub_1001BDF1(v5);
    result = (unsigned __int8)sub_1001C039(v2) ? 0 : *(_DWORD *)(*(_DWORD *)(v2 + 100) + 104);
    if ( v5 == result )
      break;
    v5 = result;
  }
  *(_DWORD *)(v2 + 132) = 0;
  if ( v12 )
    *(_DWORD *)(v12 + 4) = 0;
  if ( !a2 )
    result = sub_1001C206((void *)v2, v5);
  return result;
}
// 1001BDF1: using guessed type _DWORD __stdcall sub_1001BDF1(_DWORD);

//----- (1001B8EA) --------------------------------------------------------
int __thiscall sub_1001B8EA(void *this, int a2)
{
  int result; // eax@1
  LPVOID v3; // eax@2
  bool v4; // zf@2
  int v5; // ecx@2
  void *v6; // [sp+0h] [bp-8h]@1
  int v7; // [sp+4h] [bp-4h]@1

  v7 = 0;
  v6 = this;
  result = sub_1001B043(
             a2,
             (int (__cdecl *)(_DWORD, _DWORD))sub_1001BC8F,
             (int)&v6,
             (int (__cdecl *)(_DWORD, _DWORD))sub_1001C33D);
  if ( v7 )
  {
    v3 = sub_100178E9();
    v4 = *((_BYTE *)v3 + 76) == 0;
    v5 = *((_DWORD *)v3 + 39);
    result = v7;
    if ( v4 )
      *(_DWORD *)(v5 + 108) += v7;
    else
      *(_DWORD *)(v5 + 12) += v7;
  }
  return result;
}

//----- (1001B934) --------------------------------------------------------
int __usercall sub_1001B934@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // esi@1
  int v3; // edi@1
  char v4; // bl@1
  int v5; // eax@5
  LPVOID v6; // eax@8

  sub_1000FB4A();
  v2 = v1;
  v3 = (int)sub_100116CB(a1);
  v4 = 0;
  if ( !*(_DWORD *)(v3 + 32) )
    sub_1001A807(a1);
  if ( v3 != *(_DWORD *)(v2 + 12) || *(_DWORD *)(*(_DWORD *)(v3 + 32) + 64) != *(_DWORD *)(v2 + 128) )
  {
    v5 = sub_1001AAD0(v3);
    if ( (!v5 || *(_DWORD *)(v5 + 100) != v2) && !sub_1001B6ED(v3, v2) )
    {
      v6 = sub_1000F0A6(0x90u);
      *(_DWORD *)(a1 - 16) = v6;
      *(_DWORD *)(a1 - 4) = 0;
      if ( v6 )
        v4 = sub_1001B352(a1, v2, 1);
      *(_DWORD *)(a1 - 4) = -1;
      sub_1001B694((void *)v3, v2, v4);
    }
  }
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001B9C0) --------------------------------------------------------
signed int __cdecl sub_1001B9C0(volatile signed __int32 *a1, signed __int32 *a2, signed __int32 a3, unsigned int a4, unsigned int a5)
{
  int v5; // eax@1
  signed int result; // eax@6

  v5 = sub_1001C07B(a4, a5);
  if ( v5 )
  {
    if ( v5 > 0 )
    {
      if ( v5 <= 2 )
        return sub_1001BCA2(a1, a2, a3);
      if ( v5 == 3 )
        return sub_1001BCA2(a1, a2, a3);
      if ( (unsigned int)(v5 - 4) <= 1 )
        return sub_1001BCA2(a1, a2, a3);
    }
    result = 0;
  }
  else
  {
    result = sub_1001BCA2(a1, a2, a3);
  }
  return result;
}

//----- (1001BA2F) --------------------------------------------------------
char __usercall sub_1001BA2F@<al>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1
  char result; // al@3
  int v4; // eax@4
  int v5; // ecx@4
  int v6; // ecx@7

  v2 = a1;
  if ( !*(_DWORD *)(a1 + 12) )
    *(_DWORD *)(a1 + 12) = sub_100116CB(a2);
  result = sub_10023871(v2);
  if ( result )
  {
    v4 = *(_DWORD *)(v2 + 4);
    v5 = *(_DWORD *)(v2 + 12);
    if ( v4 & 0x8000000 )
    {
      _InterlockedIncrement((volatile signed __int32 *)(v5 + 120));
      sub_10023823(v2, 2);
    }
    else
    {
      sub_1001A5AC(v5, 16 * v4 >> 4);
      sub_10023823(v2, 3);
    }
    v6 = *(_DWORD *)(v2 + 12);
    result = sub_1001A643(a2, v2);
  }
  return result;
}

//----- (1001BA80) --------------------------------------------------------
char __thiscall sub_1001BA80(void *this, int a2, int a3)
{
  int v3; // ebp@0
  int v4; // esi@1
  int v5; // edi@1
  char result; // al@1
  int v7; // edi@4
  volatile signed __int32 *v8; // ebx@5
  volatile signed __int32 v9; // edi@6
  int v10; // [sp+8h] [bp-4h]@12

  v4 = (int)this;
  v5 = sub_1001B934(v3);
  result = sub_1001C303(v4, 1);
  if ( result )
  {
    if ( (unsigned __int8)sub_1001C039(v5) || v5 == v4 )
    {
      v8 = (volatile signed __int32 *)(v4 + 56);
      do
      {
        while ( 1 )
        {
          v9 = *v8;
          if ( *v8 != 1 && v9 != 5 )
            break;
          v10 = *(_DWORD *)(v4 + 12);
          sub_1001A5AC(v10, 16 * *(_DWORD *)(v4 + 4) >> 4);
          if ( v9 == 5 )
            sub_1001B8EA((void *)v4, v10);
          _InterlockedExchange(v8, 4);
        }
      }
      while ( _InterlockedCompareExchange(v8, 3, 0) != v9 );
      v7 = a2;
      sub_1001BBE5(v3, a2, 1);
    }
    else
    {
      v7 = a2;
      sub_1001BB40(v4, a2);
    }
    result = sub_1001BB21(v7, a3);
  }
  return result;
}

//----- (1001BB21) --------------------------------------------------------
int __stdcall sub_1001BB21(int a1, int a2)
{
  int i; // esi@1
  int result; // eax@2

  for ( i = a2; i; i = *(_DWORD *)(i + 104) )
    result = sub_1001BB40(i, a1);
  return result;
}

//----- (1001BB40) --------------------------------------------------------
int __thiscall sub_1001BB40(int this, int a2)
{
  int v2; // ebp@0
  signed __int32 v3; // esi@1
  char v4; // bl@1
  signed __int32 v5; // edx@1
  int result; // eax@2
  signed __int32 v7; // eax@8
  int v8; // [sp+Ch] [bp-10h]@12
  volatile signed __int32 *v9; // [sp+10h] [bp-Ch]@1
  int v10; // [sp+14h] [bp-8h]@0
  void *v11; // [sp+18h] [bp-4h]@1

  v11 = (void *)this;
  v3 = *(_DWORD *)(this + 56);
  v4 = 0;
  v9 = (volatile signed __int32 *)(this + 56);
  v5 = 0;
  while ( 1 )
  {
    result = v3;
    if ( v3 )
    {
      if ( v3 == 1 || (result = v3 - 5, v3 == 5) )
      {
        v5 = 9;
        goto LABEL_8;
      }
    }
    else
    {
      v5 = 3;
    }
    if ( !v5 )
      return result;
LABEL_8:
    v7 = _InterlockedCompareExchange(v9, v5, v3);
    v5 = v7;
    if ( v7 == v3 )
      break;
    v3 = v7;
  }
  LOBYTE(v10) = 0;
  if ( v3 == 1 || v3 == 5 )
  {
    v4 = 1;
    LOBYTE(v10) = 1;
    v8 = *(_DWORD *)(this + 12);
    sub_1001A5AC(v8, 16 * *(_DWORD *)(this + 4) >> 4);
    if ( v3 == 5 )
      sub_1001B8EA(v11, v8);
  }
  result = sub_1001BBE5(v2, a2, v10);
  if ( v4 )
  {
    result = (int)v9;
    _InterlockedExchange(v9, 4);
  }
  return result;
}

//----- (1001BBE5) --------------------------------------------------------
int __userpurge sub_1001BBE5@<eax>(int a1@<ebp>, int a2, int a3)
{
  void *v3; // ecx@1
  int v4; // esi@1
  int v5; // ebx@1
  int v6; // edi@3
  int v7; // ecx@4
  bool i; // zf@5
  volatile signed __int32 *v9; // ecx@11

  sub_1000FB4A();
  v4 = (int)v3;
  v5 = (int)((char *)v3 + 28);
  *(_DWORD *)(a1 - 20) = (char *)v3 + 28;
  v3 = (char *)v3 + 32;
  *(_DWORD *)(a1 - 16) = v3;
  sub_10011892(v3);
  *(_DWORD *)(a1 - 4) = 0;
  if ( *(_BYTE *)(a1 + 12) )
  {
LABEL_4:
    v7 = *(_DWORD *)(v4 + 12);
    sub_1001A643(a1, v4);
    goto LABEL_5;
  }
  if ( *(_DWORD *)(v4 + 48) > 0 )
  {
    v6 = *(_DWORD *)v5;
    if ( *(_DWORD *)v5 )
      goto LABEL_8;
    goto LABEL_4;
  }
LABEL_5:
  v6 = *(_DWORD *)v5;
  for ( i = *(_DWORD *)v5 == 0; ; i = v6 == *(_DWORD *)v5 )
  {
    if ( i )
      v6 = 0;
    else
LABEL_8:
      v6 = *(_DWORD *)(v6 + 4);
    if ( !v6 )
      break;
    _InterlockedExchange((volatile signed __int32 *)(v6 + 24), 1);
    sub_1001A5AC(v6 - 92, -999);
    sub_1001A643(a1, 0);
  }
  v9 = *(volatile signed __int32 **)(a1 - 16);
  *(_DWORD *)(a1 - 4) = 1;
  sub_100119DE(v9);
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001BC70) --------------------------------------------------------
int __cdecl sub_1001BC70(int a1)
{
  int v1; // eax@1
  int v2; // esi@1

  v1 = sub_1000DD9C(a1);
  v2 = v1;
  if ( v1 )
    sub_1000E0B3(v1);
  return v2;
}

//----- (1001BC8F) --------------------------------------------------------
bool __cdecl sub_1001BC8F(int a1, int a2)
{
  return *(_DWORD *)(a1 + 8) == *(_DWORD *)a2;
}

//----- (1001BCA2) --------------------------------------------------------
signed int __cdecl sub_1001BCA2(volatile signed __int32 *a1, signed __int32 *a2, signed __int32 a3)
{
  signed __int32 v3; // esi@1
  signed __int32 v4; // eax@1
  signed int result; // eax@2

  v3 = *a2;
  v4 = _InterlockedCompareExchange(a1, a3, *a2);
  if ( v4 == v3 )
  {
    result = 1;
  }
  else
  {
    *a2 = v4;
    result = 0;
  }
  return result;
}

//----- (1001BCC9) --------------------------------------------------------
signed __int32 __thiscall sub_1001BCC9(int this)
{
  int v1; // esi@1
  volatile signed __int32 *v2; // edi@1
  signed __int32 result; // eax@3

  v1 = this;
  v2 = (volatile signed __int32 *)(this + 20);
  if ( *(_DWORD *)(this + 20) <= -2147483647 )
    sub_1001BF14(this);
  result = _InterlockedIncrement(v2);
  if ( !result )
    result = sub_10010968((volatile signed __int32 *)(v1 + 28));
  return result;
}

//----- (1001BCF9) --------------------------------------------------------
int __userpurge sub_1001BCF9@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // edi@1
  int v4; // esi@1
  char v5; // bl@1
  int v6; // ecx@1
  bool v7; // zf@1
  int v8; // edi@1
  int v9; // eax@5

  sub_1000FB4A();
  v3 = v2;
  v4 = v2 + 12;
  v5 = 0;
  *(_DWORD *)(a1 - 16) = v2 + 12;
  sub_10009130(v2 + 12);
  *(_DWORD *)(a1 - 4) = 0;
  v6 = v3 + 60;
  v7 = *(_DWORD *)(v3 + 60) == 0;
  v8 = *(_DWORD *)(a1 + 8);
  if ( v7 )
  {
    v5 = 1;
  }
  else
  {
    sub_1001C3E8(v6, *(_DWORD *)(a1 + 8));
    _InterlockedExchange((volatile signed __int32 *)(v8 + 8), 2);
    sub_1001C1A6((void *)v8);
  }
  *(_DWORD *)(a1 - 4) = 1;
  sub_10009150(v4);
  *(_DWORD *)(a1 - 4) = -1;
  if ( v5 )
  {
    v9 = sub_1001B25B((volatile signed __int32 *)(v8 + 8), 1, 0);
    if ( v9 )
    {
      if ( (v9 <= 0 || v9 > 2 && v9 != 3)
        && v9 != GetCurrentThreadId()
        && _InterlockedExchange((volatile signed __int32 *)(v8 + 8), 2) != 3 )
      {
        *(_DWORD *)(a1 - 20) = v8 + 52;
        sub_10009130(v8 + 52);
        *(_BYTE *)(a1 - 16) = 1;
        *(_DWORD *)(a1 - 4) = 2;
        sub_1001B282((void *)(v8 + 12), (int *)(a1 - 20), v8);
        *(_DWORD *)(a1 - 4) = 3;
        sub_10009150(v8 + 52);
      }
    }
  }
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001BDC2) --------------------------------------------------------
int __thiscall sub_1001BDC2(void *this)
{
  void *v1; // edi@1
  int (__thiscall *v2)(_DWORD, _DWORD); // esi@2
  int result; // eax@2

  v1 = this;
  if ( this )
  {
    v2 = (int (__thiscall *)(_DWORD, _DWORD))**(_DWORD **)this;
    j_nullsub_1(**(_DWORD **)this);
    result = v2(v1, 1);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001BDDE) --------------------------------------------------------
int __thiscall sub_1001BDDE(int this)
{
  int v1; // ST00_4@1
  int (__cdecl *v2)(_DWORD); // esi@1

  v1 = *(_DWORD *)(this + 112);
  v2 = *(int (__cdecl **)(_DWORD))(this + 108);
  j_nullsub_1(*(_DWORD *)(this + 108));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001BDF1) --------------------------------------------------------
#error "1001BED7: call analysis failed (funcsize=86)"

//----- (1001BEDF) --------------------------------------------------------
int __thiscall sub_1001BEDF(void *this)
{
  return (int)((char *)this + 28);
}

//----- (1001BEE3) --------------------------------------------------------
int __thiscall sub_1001BEE3(int this, int a2)
{
  int result; // eax@1
  char v3; // [sp+0h] [bp-Ch]@3

  result = a2;
  if ( !a2 )
  {
    sub_1000D8F2((int)&v3);
    sub_10027494((int)&v3, (int)&unk_10075430);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1001BF14);
  }
  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 8) = 0;
  return result;
}

//----- (1001BF14) --------------------------------------------------------
char __thiscall sub_1001BF14(int this)
{
  volatile signed __int32 *v1; // esi@1
  signed __int32 v2; // eax@1
  char v4; // [sp+Ch] [bp-14h]@6
  int v5; // [sp+14h] [bp-Ch]@5
  int (*v6)(); // [sp+18h] [bp-8h]@5
  int v7; // [sp+1Ch] [bp-4h]@1

  v7 = this;
  v1 = (volatile signed __int32 *)(this + 20);
  v2 = _InterlockedCompareExchange((volatile signed __int32 *)(this + 20), -2147483647, 2147483648);
  if ( v2 == 2147483648 )
  {
    if ( this != -28 )
      *(_DWORD *)(this + 28) = 0;
    LOBYTE(v2) = _InterlockedExchange(v1, 0);
  }
  else
  {
    v5 = 0;
    v6 = sub_10012578;
    while ( *v1 <= -2147483647 )
      LOBYTE(v2) = sub_10010BDE(&v4);
  }
  return v2;
}

//----- (1001BF6A) --------------------------------------------------------
int __usercall sub_1001BF6A@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  bool v2; // zf@1
  int v3; // ecx@1

  sub_1000FB4A();
  *(_DWORD *)(a1 - 16) = v1;
  *(_DWORD *)(v1 + 48) = 0;
  *(_DWORD *)(v1 + 52) = 0;
  *(_DWORD *)(v1 + 124) = 0;
  v2 = v1 == -28;
  v3 = v1 + 28;
  *(_DWORD *)(a1 - 20) = v3;
  *(_DWORD *)(a1 - 4) = 0;
  if ( !v2 )
  {
    *(_DWORD *)v3 = 0;
    sub_10011554(v3 + 4);
  }
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001BF9F) --------------------------------------------------------
int __usercall sub_1001BF9F@<eax>(int a1@<ebp>)
{
  void *v1; // ecx@1
  void *v2; // edi@1
  DWORD v3; // ebx@1
  void (__thiscall *v4)(_DWORD); // esi@2

  sub_1000FB4A();
  v2 = v1;
  v3 = GetCurrentThreadId();
  if ( !sub_1001B25B((volatile signed __int32 *)v2 + 2, v3, 0) )
  {
    v4 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 8);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 8));
    v4(v2);
    if ( sub_1001B25B((volatile signed __int32 *)v2 + 2, 3, v3) == 2 )
    {
      sub_10009130((int)((char *)v2 + 52));
      *((_BYTE *)v2 + 100) = 1;
      *(_DWORD *)(a1 - 4) = 0;
      sub_10009150((int)((char *)v2 + 52));
      *(_DWORD *)(a1 - 4) = 1;
      sub_1001BC70((int)((char *)v2 + 12));
      *(_DWORD *)(a1 - 4) = -1;
    }
  }
  sub_1001C1A6(v2);
  return sub_1000FB24(0);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001C026) --------------------------------------------------------
BOOL __thiscall sub_1001C026(int this)
{
  return *(_DWORD *)(this + 100) != this && !(*(_DWORD *)(this + 120) & 1);
}

//----- (1001C039) --------------------------------------------------------
BOOL __thiscall sub_1001C039(int this)
{
  return *(_DWORD *)(this + 100) != this && *(_DWORD *)(this + 120) & 1;
}

//----- (1001C04C) --------------------------------------------------------
BOOL __thiscall sub_1001C04C(int this)
{
  return *(_DWORD *)(*(_DWORD *)(this + 100) + 52) != 0;
}

//----- (1001C05A) --------------------------------------------------------
int __thiscall sub_1001C05A(int this)
{
  return (*(_DWORD *)(this + 120) >> 1) & 1;
}

//----- (1001C063) --------------------------------------------------------
BOOL __cdecl sub_1001C063(int a1)
{
  return a1 && a1 != 2;
}

//----- (1001C07B) --------------------------------------------------------
int __cdecl sub_1001C07B(unsigned int a1, unsigned int a2)
{
  int result; // eax@3

  if ( a1 > 5 || a2 > 5 )
    result = 5;
  else
    result = dword_10066808[a2 + 6 * a1];
  return result;
}
// 10066808: using guessed type int dword_10066808[];

//----- (1001C0A0) --------------------------------------------------------
int __thiscall sub_1001C0A0(void *this, int a2)
{
  void *v2; // esi@1
  int (__cdecl *v3)(_DWORD); // edi@3
  int v4; // ebx@3
  int result; // eax@3

  v2 = this;
  if ( *(_BYTE *)(a2 + 16) )
    sub_10023E46(a2);
  v3 = (int (__cdecl *)(_DWORD))*((_DWORD *)v2 + 34);
  v4 = *((_DWORD *)v2 + 35);
  result = _InterlockedDecrement((volatile signed __int32 *)v2 + 4);
  if ( !result )
    result = sub_10010E7B((char *)v2 + 60);
  if ( v3 )
  {
    j_nullsub_1(v3);
    result = v3(v4);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 10010E7B: using guessed type int __thiscall sub_10010E7B(_DWORD);

//----- (1001C0F1) --------------------------------------------------------
int __thiscall sub_1001C0F1(int this)
{
  return *(_DWORD *)(this + 100);
}

//----- (1001C0F5) --------------------------------------------------------
int __stdcall sub_1001C0F5(int a1, int a2, int a3)
{
  int v3; // ebp@0
  int v4; // eax@1
  int v5; // esi@2

  v4 = (int)sub_1000F0A6(0x74u);
  if ( v4 )
    v5 = sub_1001B2AE(v4, a1, a2, a3);
  else
    v5 = 0;
  sub_1001C134(v3, v5);
  return v5;
}

//----- (1001C134) --------------------------------------------------------
int __userpurge sub_1001C134@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // edi@1
  int v4; // esi@1
  char v5; // bl@1
  int v6; // ST00_4@4

  sub_1000FB4A();
  v3 = v2;
  v4 = *(_DWORD *)(a1 + 8);
  _InterlockedExchange((volatile signed __int32 *)(v4 + 8), 0);
  _InterlockedIncrement((volatile signed __int32 *)(v4 + 4));
  *(_DWORD *)(v4 + 104) = v2;
  v5 = 1;
  if ( *(_DWORD *)(v2 + 8) )
    goto LABEL_9;
  *(_DWORD *)(a1 - 16) = v2 + 12;
  sub_10009130(v2 + 12);
  *(_DWORD *)(a1 - 4) = 0;
  if ( !*(_DWORD *)(v3 + 8) )
  {
    v5 = 0;
    sub_1001C3AA((void *)(v3 + 60), v4);
  }
  v6 = *(_DWORD *)(a1 - 16);
  *(_DWORD *)(a1 - 4) = 1;
  sub_10009150(v6);
  *(_DWORD *)(a1 - 4) = -1;
  if ( v5 )
LABEL_9:
    sub_1001BF9F(a1);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001C1A6) --------------------------------------------------------
signed __int32 __thiscall sub_1001C1A6(void *this)
{
  void *v1; // ebx@1
  signed __int32 v2; // edi@1
  void (__thiscall *v3)(_DWORD); // esi@2

  v1 = this;
  v2 = _InterlockedDecrement((volatile signed __int32 *)this + 1);
  if ( !v2 )
  {
    v3 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)this + 4);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 4));
    v3(v1);
  }
  return v2;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001C1CC) --------------------------------------------------------
signed __int32 __thiscall sub_1001C1CC(LPVOID lpMem)
{
  LPVOID v1; // esi@1
  volatile signed __int32 *v2; // edi@1
  signed __int32 v3; // ecx@1
  signed __int32 result; // eax@2

  v1 = lpMem;
  v2 = (volatile signed __int32 *)((char *)lpMem + 120);
  v3 = *((_DWORD *)lpMem + 30);
  if ( v3 & 2 )
  {
LABEL_4:
    sub_1001B51B((int)v1);
    result = sub_1000F417(v1);
  }
  else
  {
    while ( 1 )
    {
      result = _InterlockedCompareExchange(v2, v3 | 2, v3);
      if ( result == v3 )
        break;
      v3 = result;
      if ( result & 2 )
        goto LABEL_4;
    }
  }
  return result;
}

//----- (1001C206) --------------------------------------------------------
int __thiscall sub_1001C206(void *this, int a2)
{
  int v2; // ebp@0
  int v3; // edi@1
  int v4; // esi@1
  int v5; // eax@2
  int v6; // ecx@2
  volatile signed __int32 *v7; // ebx@2
  signed __int32 v8; // edx@3
  signed __int32 v9; // eax@9
  int result; // eax@14
  char v11; // [sp+Ch] [bp-28h]@25
  int v12; // [sp+14h] [bp-20h]@24
  int (*v13)(); // [sp+18h] [bp-1Ch]@24
  char v14; // [sp+1Ch] [bp-18h]@6
  int v15; // [sp+24h] [bp-10h]@5
  int (*v16)(); // [sp+28h] [bp-Ch]@5
  int v17; // [sp+2Ch] [bp-8h]@2
  int v18; // [sp+30h] [bp-4h]@2

  v3 = a2;
  v4 = (int)this;
  while ( 2 )
  {
    v5 = (int)sub_100178E9();
    v6 = *(_DWORD *)(v4 + 12);
    v7 = (volatile signed __int32 *)(v4 + 56);
    v18 = v5;
    v17 = v6;
LABEL_3:
    v8 = *v7;
    while ( 1 )
    {
      if ( v8 == 9 )
      {
        v15 = 0;
        v16 = sub_10012578;
        if ( *v7 == 9 )
        {
          do
            sub_10010BDE(&v14);
          while ( *v7 == 9 );
          v5 = v18;
          v6 = v17;
        }
        goto LABEL_3;
      }
      if ( v5 == v6 )
        break;
      v9 = _InterlockedCompareExchange(v7, 0, 3);
      if ( v9 != 9 )
        goto LABEL_13;
LABEL_18:
      v6 = v17;
      v8 = v9;
      v5 = v18;
    }
    v9 = _InterlockedCompareExchange(v7, 0, v8);
    if ( v9 != v8 )
      goto LABEL_18;
    if ( v9 == 4 )
      sub_1001A613(v18, 16 * *(_DWORD *)(v4 + 4) >> 4);
    *(_DWORD *)(v4 + 4) |= 0xFFFFFFFu;
LABEL_13:
    if ( *(_DWORD *)(v4 + 100) == v4 )
    {
      while ( v3 )
      {
        if ( !((*(_DWORD *)(v3 + 120) >> 1) & 1) )
          sub_1001C206(0);
        v3 = *(_DWORD *)(v3 + 104);
      }
      result = v4 + 52;
      if ( _InterlockedExchange((volatile signed __int32 *)(v4 + 52), 0) < 0 )
      {
        v12 = 0;
        v13 = sub_10012578;
        while ( *(_DWORD *)(v4 + 24) == 8 )
          sub_10010BDE(&v11);
        result = sub_100238F7(v2);
      }
    }
    else
    {
      result = sub_1001C026(v4);
      if ( (_BYTE)result && a2 )
      {
        v4 = *(_DWORD *)(v4 + 100);
        continue;
      }
    }
    return result;
  }
}

//----- (1001C303) --------------------------------------------------------
char __thiscall sub_1001C303(int this, int a2)
{
  signed __int32 v2; // edx@1
  signed __int32 v3; // eax@2
  char result; // al@4

  v2 = *(_DWORD *)(this + 52);
  if ( v2 & 0x3FFFFFFF )
  {
LABEL_4:
    result = 0;
  }
  else
  {
    while ( 1 )
    {
      v3 = _InterlockedCompareExchange((volatile signed __int32 *)(this + 52), a2 | v2 & 0xC0000000, v2);
      if ( v3 == v2 )
        break;
      v2 = v3;
      if ( v3 & 0x3FFFFFFF )
        goto LABEL_4;
    }
    result = 1;
  }
  return result;
}

//----- (1001C33D) --------------------------------------------------------
char __cdecl sub_1001C33D(int a1, int a2)
{
  void *v2; // ecx@1

  v2 = *(void **)(a1 + 8);
  ++*(_DWORD *)(a2 + 4);
  sub_1001C0A0(v2, a1);
  return 1;
}

//----- (1001C356) --------------------------------------------------------
bool __thiscall sub_1001C356(int this, char a2)
{
  int v2; // esi@1
  bool v3; // bl@1
  int i; // eax@4
  bool v5; // zf@9

  v2 = this;
  v3 = 0;
  if ( (unsigned __int8)sub_1001C026(this) )
    goto LABEL_11;
  if ( sub_100273CB() )
    goto LABEL_15;
  v3 = *(_DWORD *)(v2 + 16) > 0;
  if ( *(_DWORD *)(v2 + 100) == v2 )
  {
    for ( i = *(_DWORD *)(v2 + 104); i; i = *(_DWORD *)(i + 104) )
    {
      if ( *(_DWORD *)(i + 16) > 0 )
        v3 = 1;
    }
  }
  v5 = v3 == 0;
  if ( v3 )
  {
LABEL_15:
    sub_1001B7BB((void *)v2, a2);
LABEL_11:
    v5 = v3 == 0;
  }
  return v5;
}

//----- (1001C3AA) --------------------------------------------------------
LPVOID __thiscall sub_1001C3AA(void *this, int a2)
{
  void *v2; // esi@1
  LPVOID result; // eax@1
  LPVOID v4; // edx@1

  v2 = this;
  result = sub_1000F0A6(8u);
  v4 = result;
  if ( result )
  {
    *((_DWORD *)result + 1) = 0;
    *(_DWORD *)result = a2;
  }
  else
  {
    v4 = 0;
  }
  if ( *(_DWORD *)v2 )
  {
    result = (LPVOID)*((_DWORD *)v2 + 1);
    *((_DWORD *)result + 1) = v4;
  }
  else
  {
    *(_DWORD *)v2 = v4;
  }
  *((_DWORD *)v2 + 1) = v4;
  return result;
}

//----- (1001C3E8) --------------------------------------------------------
void __thiscall sub_1001C3E8(int this, int a2)
{
  int v2; // edx@1
  int v3; // esi@1
  int v4; // eax@5

  v2 = *(_DWORD *)this;
  v3 = 0;
  if ( *(_DWORD *)this )
  {
    while ( *(_DWORD *)v2 != a2 )
    {
      v3 = v2;
      v2 = *(_DWORD *)(v2 + 4);
      if ( !v2 )
        return;
    }
    v4 = *(_DWORD *)(v2 + 4);
    if ( v3 )
      *(_DWORD *)(v3 + 4) = v4;
    else
      *(_DWORD *)this = v4;
    if ( !*(_DWORD *)(v2 + 4) )
      *(_DWORD *)(this + 4) = v3;
    sub_1000F417((LPVOID)v2);
  }
}

//----- (1001C42C) --------------------------------------------------------
int __cdecl sub_1001C42C(int a1, int a2, char a3)
{
  int v3; // ebp@0
  char *v5; // [sp+0h] [bp-4h]@1

  v5 = &a3;
  sub_1001C543(v3, a2, (int)&v5);
  return a1;
}

//----- (1001C44C) --------------------------------------------------------
void *__thiscall sub_1001C44C(void *this, const void **a2)
{
  void *v2; // esi@1
  LPVOID v3; // eax@1

  v2 = this;
  v3 = sub_1000F0A6(0x28u);
  *(_DWORD *)v2 = v3;
  sub_100278E0(v3, *a2, 0x28u);
  return v2;
}

//----- (1001C472) --------------------------------------------------------
void *__thiscall sub_1001C472(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10066764;
  return v2;
}
// 10066764: using guessed type int (__thiscall *off_10066764)(LPVOID lpMem, char);

//----- (1001C48D) --------------------------------------------------------
void *__thiscall sub_1001C48D(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_1006677C;
  return v2;
}
// 1006677C: using guessed type int (__thiscall *off_1006677C)(LPVOID lpMem, char);

//----- (1001C4A8) --------------------------------------------------------
void *__thiscall sub_1001C4A8(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10066770;
  return v2;
}
// 10066770: using guessed type int (__thiscall *off_10066770)(LPVOID lpMem, char);

//----- (1001C4C3) --------------------------------------------------------
int __thiscall sub_1001C4C3(LPVOID *this)
{
  return sub_1000F417(*this);
}

//----- (1001C4CF) --------------------------------------------------------
void **__thiscall sub_1001C4CF(void **this, const void **a2)
{
  void **v2; // esi@1

  v2 = this;
  sub_100278E0(*this, *a2, 0x28u);
  return v2;
}

//----- (1001C4ED) --------------------------------------------------------
int __thiscall sub_1001C4ED(void *this, unsigned int a2)
{
  int v3; // eax@3
  char v4; // [sp+0h] [bp-Ch]@3

  if ( a2 > 9 )
  {
    v3 = (int)sub_1001C676(a2);
    sub_10019FAF(&v4, v3);
    sub_10027494((int)&v4, (int)&unk_100762AC);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1001C525);
  }
  return *(_DWORD *)(*(_DWORD *)this + 4 * a2);
}

//----- (1001C525) --------------------------------------------------------
bool __cdecl sub_1001C525(unsigned int a1, unsigned int a2)
{
  return a2 == -1 || a1 == -1 || a2 >= a1;
}

//----- (1001C543) --------------------------------------------------------
int __userpurge sub_1001C543@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // edi@1
  LPVOID v5; // ebx@1
  unsigned int v6; // esi@1
  int v7; // ecx@3
  unsigned int v8; // edi@3
  int v9; // eax@3
  signed int v10; // eax@3
  int v11; // eax@4
  int i; // eax@4
  int v13; // eax@7
  int v15; // [sp-8h] [bp-8h]@4
  int v16; // [sp-4h] [bp-4h]@1

  sub_1000FBB5((int)sub_10062ED2, 52);
  v4 = v3;
  *(_DWORD *)(a1 - 24) = v3;
  v5 = sub_1000F0A6(0x28u);
  v6 = 0;
  *(_DWORD *)(a1 - 28) = v5;
  *(_DWORD *)v4 = v5;
  *(_DWORD *)(a1 - 4) = 0;
  sub_100278E0(v5, &unk_1007A048, 0x28u);
  while ( 1 )
  {
    if ( v6 < *(_DWORD *)(a1 + 8) )
    {
      v7 = *(_DWORD *)(a1 + 12);
      *(_DWORD *)v7 += 4;
      v8 = *(_DWORD *)(*(_DWORD *)v7 - 4);
      v9 = *(_DWORD *)v7 + 4;
      *(_DWORD *)v7 = v9;
      v10 = *(_DWORD *)(v9 - 4);
      *(_DWORD *)(a1 - 20) = v10;
      if ( v8 > 9 )
      {
        v11 = (int)sub_1001C676(v8);
        sub_10019FAF((void *)(a1 - 40), v11);
        v15 = (int)&unk_100762AC;
        i = a1 - 40;
        goto LABEL_5;
      }
      goto LABEL_6;
    }
    v8 = *(_DWORD *)(a1 - 24);
    if ( sub_1001C525(*(_DWORD *)(*(_DWORD *)v8 + 8), *(_DWORD *)(*(_DWORD *)v8 + 4)) )
      break;
    sub_10019FCA(a1 - 64);
    v15 = (int)&unk_1007631C;
LABEL_5:
    for ( i = a1 - 64; ; i = a1 - 52 )
    {
      sub_10027494(i, v15);
LABEL_6:
      if ( sub_1001C68D((int)v5, v8, v8, v10) )
        break;
      v13 = (int)sub_1001C676(v8);
      sub_10019FDB((void *)(a1 - 52), v13);
      v15 = (int)&unk_100762E4;
    }
    ++v6;
    *((_DWORD *)v5 + v8) = *(_DWORD *)(a1 - 20);
  }
  sub_1001C62E((void *)v8);
  return sub_1000FB24(v16);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001C61C) --------------------------------------------------------
void __userpurge sub_1001C61C(int a1@<ebp>, int a2, int a3)
{
  sub_1000F417(*(LPVOID *)(a1 - 28));
  JUMPOUT(&loc_1001C5B0);
}

//----- (1001C62E) --------------------------------------------------------
int __thiscall sub_1001C62E(void *this)
{
  void *v1; // edi@1
  int v2; // edx@1
  int result; // eax@1
  int v4; // esi@1
  int v5; // ecx@2

  v1 = this;
  **(_DWORD **)this = 0;
  v2 = sub_100145C6();
  result = *(_DWORD *)v1;
  v4 = *(_DWORD *)(*(_DWORD *)v1 + 8);
  if ( v4 == -1 )
  {
    v5 = *(_DWORD *)(result + 4);
    if ( v5 == -1 )
    {
      *(_DWORD *)(result + 4) = v2;
      result = *(_DWORD *)v1;
      *(_DWORD *)(*(_DWORD *)v1 + 8) = v2;
    }
    else
    {
      if ( v5 >= (unsigned int)v2 )
        v5 = v2;
      *(_DWORD *)(result + 8) = v5;
    }
  }
  else if ( *(_DWORD *)(result + 4) == -1 )
  {
    if ( v4 <= (unsigned int)v2 )
      v4 = v2;
    *(_DWORD *)(result + 4) = v4;
  }
  return result;
}

//----- (1001C676) --------------------------------------------------------
char *__cdecl sub_1001C676(unsigned int a1)
{
  signed int v1; // eax@1

  v1 = a1;
  if ( a1 > 0xA )
    v1 = 10;
  return off_1007A070[v1];
}
// 1007A070: using guessed type char *off_1007A070[11];

//----- (1001C68D) --------------------------------------------------------
bool __usercall sub_1001C68D@<al>(int a1@<ebx>, int a2@<edi>, int a3, signed int a4)
{
  int v4; // ebp@0
  char v5; // cl@1
  bool v6; // zf@7
  bool result; // al@25

  v5 = 1;
  switch ( a3 )
  {
    case 0:
      return a4 == 0;
    case 6:
      if ( a4 >= -7 && a4 < 7 || a4 == 15 || a4 == -15 )
        return v5;
      v6 = a4 == 61440;
      goto LABEL_8;
    case 7:
      if ( !a4 )
        return v5;
      v6 = a4 == 1;
      goto LABEL_8;
    case 1:
      if ( a4 && (unsigned int)a4 <= 0x7FFFFFFF )
        return v5;
      v6 = a4 == -1;
      goto LABEL_8;
    case 2:
      if ( (unsigned int)a4 <= 0x7FFFFFFF )
        return v5;
      v6 = a4 == -1;
      goto LABEL_8;
    case 4:
    case 5:
      return (unsigned int)a4 <= 0x7FFFFFFF;
    case 3:
      if ( !a4 || (unsigned int)a4 > 0x7FFFFFFF )
        goto LABEL_9;
      break;
    case 8:
      if ( a4 != 1 )
      {
        v6 = a4 == 0;
LABEL_8:
        if ( !v6 )
LABEL_9:
          v5 = 0;
      }
      break;
    case 9:
      if ( a4 )
        v5 = a4 != 1 ? 0 : 1;
      break;
    default:
      sub_1002C84B(a1, v4, a2);
      return result;
  }
  return v5;
}

//----- (1001C76D) --------------------------------------------------------
int __thiscall sub_1001C76D(void *this)
{
  int result; // eax@1
  int v2; // eax@3
  char v3; // [sp+0h] [bp-Ch]@6

  result = *(_DWORD *)this;
  if ( !*(_DWORD *)(*(_DWORD *)this + 8) )
  {
    v2 = (int)sub_1001C676(2u);
    goto LABEL_6;
  }
  if ( !*(_DWORD *)(result + 32) )
  {
    v2 = (int)sub_1001C676(8u);
LABEL_6:
    sub_10019FDB(&v3, v2);
    sub_10027494((int)&v3, (int)&unk_100762E4);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1001C7A9);
  }
  return result;
}

//----- (1001C7A9) --------------------------------------------------------
int __thiscall sub_1001C7A9(int this, int a2, int a3, int a4)
{
  int result; // eax@1

  *(_DWORD *)this = off_100669BC;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = 0;
  *(_WORD *)(this + 12) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 20) = a2;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = *(_DWORD *)(a3 + 16);
  *(_DWORD *)(this + 48) = 0;
  *(_DWORD *)(this + 40) = a4;
  result = this;
  *(_DWORD *)(this + 44) = (*(_DWORD *)(a3 + 12) << 8) + *(_BYTE *)(*(_DWORD *)(a3 + 48) + 52 * a4 + 8);
  return result;
}
// 100669BC: using guessed type int (*off_100669BC[2])();

//----- (1001C80B) --------------------------------------------------------
int __thiscall sub_1001C80B(int this, int a2, int a3)
{
  *(_DWORD *)this = off_100669BC;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = 0;
  *(_WORD *)(this + 12) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 20) = a2;
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 24) = a3;
  *(_DWORD *)(this + 36) = *(_DWORD *)(a3 + 36);
  *(_DWORD *)(this + 40) = *(_DWORD *)(a3 + 40);
  *(_DWORD *)(this + 48) = 0;
  *(_DWORD *)(this + 44) = *(_DWORD *)(a3 + 44);
  return this;
}
// 100669BC: using guessed type int (*off_100669BC[2])();

//----- (1001C85F) --------------------------------------------------------
int __usercall sub_1001C85F@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1
  int v4; // ecx@1

  v2 = *(_DWORD *)(a1 + 40);
  v3 = *(_DWORD *)(a1 + 36);
  v4 = *(_DWORD *)(*(_DWORD *)(a1 + 20) + 12);
  return sub_10012FB1(a2, v3, v2);
}

//----- (1001C871) --------------------------------------------------------
void __usercall sub_1001C871(LPVOID lpMem@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1
  bool v3; // zf@1
  bool v4; // bl@2
  void *v5; // ecx@2
  HANDLE v6; // eax@4
  int v7; // ecx@4

  v2 = (int)lpMem;
  v3 = *((_DWORD *)lpMem + 12) == 1;
  --*(_DWORD *)(v2 + 48);
  if ( v3 )
  {
    v4 = *((_DWORD *)lpMem + 7) != 0;
    sub_1001CA0F((int)lpMem);
    v5 = *(void **)(v2 + 24);
    if ( v5 )
    {
      sub_1001C871(v5);
      sub_1001E066(*(void **)(v2 + 20), (LPVOID)v2);
    }
    else
    {
      sub_1001D86E(*(void **)(v2 + 20), *(_DWORD *)(v2 + 36), *(_DWORD *)(v2 + 40), v4 == 0);
      if ( !v4 )
      {
        v6 = GetCurrentThread();
        sub_10012A6F(v2 + 8, v6);
        sub_1001D824(*(_DWORD *)(v2 + 20), v2);
        v7 = *(_DWORD *)(v2 + 20);
        sub_1001D904(a2, v2);
      }
    }
  }
}

//----- (1001C8DD) --------------------------------------------------------
int __thiscall sub_1001C8DD(int this)
{
  return *(_DWORD *)(this + 36);
}

//----- (1001C8E1) --------------------------------------------------------
int __thiscall sub_1001C8E1(LPVOID lpTlsValue)
{
  int v1; // ebp@0
  int v2; // esi@1
  int v3; // ecx@1
  int result; // eax@1
  int v5; // ecx@2
  bool v6; // bl@2
  int v7; // eax@4
  void *v8; // ebx@4
  int v9; // eax@4
  int v10; // edx@4
  int v11; // eax@4
  __int16 v12; // cx@4
  int v13; // esi@4
  int v14; // ecx@4
  int v15; // [sp+4h] [bp-20h]@1
  char v16; // [sp+8h] [bp-1Ch]@4
  int v17; // [sp+14h] [bp-10h]@4
  int v18; // [sp+18h] [bp-Ch]@4
  int v19; // [sp+1Ch] [bp-8h]@4

  v2 = (int)lpTlsValue;
  v15 = (int)lpTlsValue;
  v3 = *((_DWORD *)lpTlsValue + 12);
  result = v3 + 1;
  *(_DWORD *)(v15 + 48) = v3 + 1;
  if ( !v3 )
  {
    v5 = *(_DWORD *)(v2 + 20);
    v6 = *(_DWORD *)(v2 + 28) != 0;
    if ( *(_DWORD *)(v2 + 24) )
    {
      sub_1001D496((void *)v5, v2);
    }
    else
    {
      sub_1001DE13(v5, *(_DWORD *)(v2 + 36), *(_DWORD *)(v2 + 40), *(_DWORD *)(v2 + 28) == 0);
      if ( !v6 )
      {
        v7 = (int)GetCurrentThread();
        v8 = (void *)v7;
        v9 = sub_100125BF((int)&v16, v7);
        *(_WORD *)(v2 + 12) = *(_WORD *)(v9 + 4);
        *(_DWORD *)(v2 + 8) = *(_DWORD *)v9;
        v10 = 52 * *(_DWORD *)(v2 + 36);
        v11 = *(_DWORD *)(*(_DWORD *)(v2 + 20) + 16);
        v12 = *(_WORD *)(v10 + v11 + 12);
        v13 = *(_DWORD *)(v10 + v11);
        v18 = 0;
        v19 = 0;
        LOWORD(v18) = v12;
        v17 = v13;
        sub_10012A6F((int)&v17, v8);
        v2 = v15;
        sub_1001DDC5(*(_DWORD *)(v15 + 20), v15);
        v14 = *(_DWORD *)(v15 + 20);
        sub_1001D414(v1, v15);
      }
    }
    result = sub_1001CA2B((LPVOID)v2);
  }
  return result;
}

//----- (1001C9AE) --------------------------------------------------------
int __thiscall sub_1001C9AE(int this, int a2)
{
  int v2; // ebp@0
  int v3; // esi@1
  int v4; // ecx@4
  int v5; // ecx@5
  char v7; // [sp+8h] [bp-Ch]@3

  v3 = this;
  if ( !a2 )
  {
    sub_1000D988(&v7, (int)"pScheduler");
    sub_10027494((int)&v7, (int)&unk_10075484);
    goto LABEL_7;
  }
  if ( sub_1001DA2E(*(_DWORD *)(this + 20)) != (LPVOID)this || (v4 = *(_DWORD *)(v3 + 20), *(_DWORD *)(v4 + 8) != a2) )
  {
    sub_100126E9((int)&v7);
    sub_10027494((int)&v7, (int)&unk_10075C24);
LABEL_7:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1001CA0F);
  }
  v5 = *(_DWORD *)(v4 + 12);
  return sub_100159CC(v2, v3);
}

//----- (1001CA0F) --------------------------------------------------------
int __thiscall sub_1001CA0F(int this)
{
  int v1; // esi@1
  int result; // eax@1

  v1 = this;
  result = sub_100121A1(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 20) + 12) + 112), *(LPVOID *)(this + 32));
  *(_DWORD *)(v1 + 32) = 0;
  return result;
}

//----- (1001CA2B) --------------------------------------------------------
int __thiscall sub_1001CA2B(LPVOID lpTlsValue)
{
  LPVOID v1; // edi@1
  DWORD v2; // esi@1

  v1 = lpTlsValue;
  v2 = *(_DWORD *)(*(_DWORD *)(*((_DWORD *)lpTlsValue + 5) + 12) + 112);
  *((_DWORD *)lpTlsValue + 8) = sub_10012193(v2);
  return sub_100121A1(v2, v1);
}

//----- (1001CA4E) --------------------------------------------------------
signed int __cdecl sub_1001CA4E(signed int a1)
{
  signed int result; // eax@1

  result = a1;
  if ( a1 )
    result = (unsigned int)a1 > 0 ? 1 : -1;
  return result;
}

//----- (1001CA66) --------------------------------------------------------
double __cdecl sub_1001CA66(double a1)
{
  double result; // st7@2
  signed int v2; // [sp+4h] [bp-4h]@4

  if ( 0.0 == a1 )
  {
    result = 0.0;
  }
  else
  {
    if ( a1 <= 0.0 )
      v2 = -1;
    else
      v2 = 1;
    result = (double)v2;
  }
  return result;
}

//----- (1001CAA0) --------------------------------------------------------
int __fastcall sub_1001CAA0(int a1, int a2, int a3, unsigned int a4, int a5)
{
  int v5; // eax@1
  signed int v6; // edx@1
  int result; // eax@3

  v5 = a1 + 8;
  v6 = 64;
  do
  {
    *(double *)(v5 - 8) = 0.0;
    *(double *)v5 = 0.0;
    *(_DWORD *)(v5 + 8) = 0;
    *(_DWORD *)(v5 + 12) = 0;
    *(_DWORD *)(v5 + 16) = 0;
    v5 += 32;
    --v6;
  }
  while ( v6 );
  *(_DWORD *)(a1 + 2048) = a5;
  *(_DWORD *)(a1 + 2076) = a3;
  *(_DWORD *)(a1 + 2068) = 0;
  *(_DWORD *)(a1 + 2072) = 0;
  *(_DWORD *)(a1 + 2080) = 0;
  *(_DWORD *)(a1 + 2084) = 0;
  *(_DWORD *)(a1 + 2088) = 0;
  *(_DWORD *)(a1 + 2092) = 0;
  *(_DWORD *)(a1 + 2096) = 0;
  *(_BYTE *)(a1 + 2100) = 1;
  *(_DWORD *)(a1 + 2064) = a4;
  result = a1;
  *(double *)(a1 + 2056) = (double)a4;
  return result;
}

//----- (1001CB2F) --------------------------------------------------------
int __fastcall sub_1001CB2F(int a1, int a2, double a3, int a4)
{
  int result; // eax@1
  double v5; // st7@1

  result = a4;
  v5 = *(double *)a1 + a3;
  ++*(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 24) = a4;
  *(double *)a1 = v5;
  *(double *)(a1 + 8) = a3 * a3 + *(double *)(a1 + 8);
  return result;
}

//----- (1001CB52) --------------------------------------------------------
double __stdcall sub_1001CB52(unsigned int a1, unsigned int a2, int a3, int a4)
{
  return (double)a2 * 10.0 / (double)a1;
}

//----- (1001CB8F) --------------------------------------------------------
double __fastcall sub_1001CB8F(int a1, int a2, int a3, int a4)
{
  int v4; // esi@1
  int v5; // ebx@1
  int v6; // edx@1
  int v7; // esi@1
  long double v8; // st7@1
  double v9; // ST20_8@2
  double v10; // st7@2
  double v12; // [sp+14h] [bp-18h]@1
  double v13; // [sp+24h] [bp-8h]@1

  v4 = a1;
  v5 = sub_1001CD11(a1, a2, a3);
  v7 = sub_1001CD11(v4, v6, a4);
  v13 = sub_1001CD85(v5);
  v12 = sub_1001CD85(v7) - v13;
  v8 = 0.0;
  if ( fabs(v12) > 0.0 )
  {
    v9 = sub_1001D03B(v7) / (double)*(signed int *)(v7 + 16);
    v10 = sub_1001D03B(v5) / (double)*(signed int *)(v5 + 16) + v9;
    sub_1002EC80();
    v8 = fabs(v10 / v12);
  }
  sub_1002EC2C();
  return v8 * -1.0 * (v12 / v13 / ((double)(a4 - a3) / (double)a3) - 0.15);
}
// 1002EC2C: using guessed type double sub_1002EC2C();
// 1002EC80: using guessed type double sub_1002EC80();

//----- (1001CC4D) --------------------------------------------------------
double __thiscall sub_1001CC4D(int this)
{
  int v1; // esi@1
  double v2; // st7@1
  double v3; // ST04_8@1
  double v4; // st7@1

  v1 = this;
  v2 = sub_1001D03B(this);
  sub_1002EC80();
  v3 = v2;
  v4 = (double)*(signed int *)(v1 + 16);
  sub_1002EC80();
  return v3 / v4 / sub_1001CD85(v1);
}
// 1002EC80: using guessed type double sub_1002EC80();

//----- (1001CC86) --------------------------------------------------------
int __fastcall sub_1001CC86(int a1, int a2, int a3)
{
  int result; // eax@1
  int v4; // esi@1
  int v5; // ecx@1
  int v6; // eax@2

  result = a3;
  v4 = a1;
  v5 = *(_DWORD *)(a1 + 2068);
  if ( a3 != v5 )
  {
    *(_DWORD *)(v4 + 2072) = v5;
    *(_DWORD *)(v4 + 2068) = a3;
    v6 = sub_1001CD11(v4, a2, a3);
    *(double *)v6 = 0.0;
    *(_DWORD *)(v6 + 16) = 0;
    *(_DWORD *)(v6 + 20) = 0;
    *(_DWORD *)(v6 + 24) = 0;
    *(double *)(v6 + 8) = 0.0;
    result = sub_1001CCCB(v4);
  }
  return result;
}

//----- (1001CCCB) --------------------------------------------------------
int __thiscall sub_1001CCCB(int this)
{
  int v1; // edx@1
  signed int v2; // esi@1
  int result; // eax@2

  v1 = this + 20;
  v2 = 64;
  do
  {
    result = *(_DWORD *)v1;
    if ( *(_DWORD *)v1 != *(_DWORD *)(this + 2068) && result != *(_DWORD *)(this + 2072) )
    {
      result = *(_DWORD *)(this + 2084) - *(_DWORD *)(v1 + 4);
      if ( (unsigned int)result > 0x32 )
      {
        *(_DWORD *)(v1 - 4) = 0;
        *(_DWORD *)v1 = 0;
        *(_DWORD *)(v1 + 4) = 0;
        *(double *)(v1 - 20) = 0.0;
        *(double *)(v1 - 12) = 0.0;
      }
    }
    v1 += 32;
    --v2;
  }
  while ( v2 );
  return result;
}

//----- (1001CD11) --------------------------------------------------------
int __fastcall sub_1001CD11(int a1, int a2, int a3)
{
  int result; // eax@1

  result = a1 + 32 * (a3 & 0x3F);
  if ( *(_DWORD *)(result + 20) != a3 )
  {
    *(_DWORD *)(result + 16) = 0;
    *(_DWORD *)(result + 24) = 0;
    *(double *)result = 0.0;
    *(double *)(result + 8) = 0.0;
    *(_DWORD *)(result + 20) = a3;
  }
  return result;
}

//----- (1001CD3C) --------------------------------------------------------
int __thiscall sub_1001CD3C(int this)
{
  char v1; // dl@1
  int result; // eax@1

  v1 = *(_BYTE *)(this + 2100);
  result = v1 != 0;
  *(_BYTE *)(this + 2100) = v1 == 0;
  return result;
}

//----- (1001CD55) --------------------------------------------------------
bool __stdcall sub_1001CD55(int a1)
{
  return *(_DWORD *)(a1 + 16) > 5u || *(_DWORD *)(a1 + 16) >= 3u && fabs(sub_1001CC4D(a1)) <= 0.004;
}

//----- (1001CD85) --------------------------------------------------------
double __fastcall sub_1001CD85(int a1)
{
  double result; // st7@2
  signed int v2; // [sp+4h] [bp-4h]@1

  v2 = *(_DWORD *)(a1 + 16);
  if ( v2 )
    result = *(double *)a1 / (double)v2;
  else
    result = 0.0;
  return result;
}

//----- (1001CDA7) --------------------------------------------------------
int __thiscall sub_1001CDA7(int this, unsigned int a2)
{
  int v2; // edi@1
  int v3; // esi@1
  int v4; // ebx@1
  int v5; // eax@1
  int v6; // edi@1
  int v7; // esi@1
  unsigned int v8; // ecx@1
  int v9; // edx@15
  int v11; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v11 = this;
  v3 = *(_DWORD *)(this + 2048);
  v4 = *(_DWORD *)(v3 + 184) + sub_10014D04(*(_DWORD *)(this + 2048));
  v5 = sub_1001301B(v3);
  v6 = *(_DWORD *)(v2 + 2068);
  v7 = a2;
  v8 = *(_DWORD *)(v11 + 2064);
  if ( v8 + v6 < a2 )
    v7 = v8 + v6;
  if ( v6 > v8 && v6 - v8 > v7 )
    v7 = v6 - v8;
  if ( v7 == v6 )
  {
    if ( v7 <= (unsigned int)v4 )
      ++v7;
    else
      --v7;
  }
  if ( v4 > (unsigned int)v7 )
    v7 = v4;
  if ( v5 < (unsigned int)v7 )
    v7 = v5;
  if ( v7 != v6 && sub_1001CA4E(v7 - v6) == -1 )
  {
    while ( 1 )
    {
      --v6;
      if ( v6 != v7 && sub_1001CA4E(v7 - v6) != -1 )
        break;
      if ( *(_DWORD *)(sub_1001CD11(v11, v9, v6) + 16) > 0
        && sub_1001CB8F(v11, v9, *(_DWORD *)(v11 + 2068), v6) * -1.0 <= 0.0 )
        return v6 + 1;
    }
  }
  return v7;
}

//----- (1001CE79) --------------------------------------------------------
int __fastcall sub_1001CE79(int a1, int a2, int a3, unsigned int a4, int a5, int a6)
{
  int v6; // ebx@1
  int result; // eax@2
  int v8; // edi@3
  unsigned int v9; // ecx@3
  int v10; // edx@3
  int v11; // eax@7
  unsigned int v12; // esi@8
  int v13; // esi@12
  int v14; // edi@12
  unsigned int v15; // eax@14
  int v16; // esi@14
  int v17; // edi@14
  int v18; // edx@14
  int v19; // esi@16
  int v20; // edx@16
  int v21; // edx@16
  int v22; // edx@18
  double v23; // st7@19
  int v24; // esi@19
  unsigned int v25; // eax@19
  double v26; // st7@20
  double v27; // [sp+18h] [bp-Ch]@14
  double v28; // [sp+18h] [bp-Ch]@19
  int v29; // [sp+20h] [bp-4h]@16

  v6 = a1;
  if ( !a3 )
    return 0;
  ++*(_DWORD *)(a1 + 2084);
  sub_1001CC86(a1, a2, a3);
  v8 = *(_DWORD *)(v6 + 2088);
  v9 = a4;
  v10 = a5;
  if ( v8 )
  {
    v9 = *(_DWORD *)(v6 + 2092) + a4;
    v10 = *(_DWORD *)(v6 + 2096) + a5;
  }
  if ( v9 < a3 && v9 < a6 )
  {
    v11 = a3 - v9;
    v9 = a3;
    v10 += v11;
  }
  v12 = *(_DWORD *)(v6 + 2080);
  if ( v12 < 1 || v9 >= 1 || (unsigned int)v10 >= 1 || a6 )
  {
    v15 = v8 + 1;
    v16 = v12 + 1;
    *(_DWORD *)(v6 + 2080) = v16;
    *(_DWORD *)(v6 + 2092) = 0;
    *(_DWORD *)(v6 + 2096) = 0;
    *(_DWORD *)(v6 + 2088) = 0;
    v17 = *(_DWORD *)(v6 + 2068);
    v27 = sub_1001CB52(v15, v9, v10, a6);
    if ( (unsigned int)v16 <= 1 )
    {
      *(_DWORD *)(v6 + 2072) = v17;
      return v17;
    }
    v19 = sub_1001CD11(v6, v18, v17);
    v29 = sub_1001CD11(v6, v20, *(_DWORD *)(v6 + 2072));
    sub_1001CB2F(v19, v21, v27, *(_DWORD *)(v6 + 2084));
    if ( *(_DWORD *)(v29 + 16) && v19 != v29 )
    {
      if ( !sub_1001CD55(v19) )
        return v17;
      v23 = sub_1001CB8F(v6, v22, *(_DWORD *)(v6 + 2072), *(_DWORD *)(v6 + 2068)) * *(double *)(v6 + 2056);
      v24 = *(_DWORD *)(v6 + 2068);
      v28 = (double)*(unsigned int *)(v6 + 2068);
      sub_1003B3D0(v23);
      if ( v25 == v24 )
      {
        v26 = sub_1001CA66(v23);
        sub_1003B3D0(v26 + v28);
      }
    }
    else
    {
      if ( !sub_1001CD55(v19) )
        return v17;
      v25 = *(_DWORD *)(v6 + 2068) + sub_1001CD3C(v6);
    }
    return sub_1001CDA7(v6, v25);
  }
  v13 = *(_DWORD *)(v6 + 2048);
  v14 = v8 + 1;
  *(_DWORD *)(v6 + 2092) = v9;
  *(_DWORD *)(v6 + 2088) = v14;
  *(_DWORD *)(v6 + 2096) = v10;
  result = *(_DWORD *)(v13 + 184) + sub_10014D04(v13);
  if ( (unsigned int)v14 < 3 )
    result = *(_DWORD *)(v6 + 2068);
  return result;
}
// 1003B3D0: using guessed type double __usercall sub_1003B3D0@<st0>(double@<st0>);

//----- (1001D03B) --------------------------------------------------------
double __fastcall sub_1001D03B(int a1)
{
  signed int v1; // eax@1
  double result; // st7@1
  double v3; // st6@1

  v1 = *(_DWORD *)(a1 + 16);
  result = 0.0;
  v3 = 0.0;
  if ( v1 >= 2 )
    v3 = (*(double *)(a1 + 8) - *(double *)a1 * *(double *)a1 / (double)v1) / (double)(v1 - 1);
  if ( fabs(v3) > 0.0001 )
    result = v3;
  return result;
}

//----- (1001D089) --------------------------------------------------------
#error "1001D2DB: call analysis failed (funcsize=180)"

//----- (1001D2E3) --------------------------------------------------------
void __thiscall sub_1001D2E3(int this)
{
  int v1; // ebp@0
  int v2; // esi@1
  void *v3; // ST00_4@1
  int v4; // ecx@1
  int v5; // ecx@1

  v2 = this;
  v3 = *(void **)(this + 16);
  v4 = *(_DWORD *)(this + 12);
  *(_DWORD *)v2 = &off_100669FC;
  sub_10013034(v4, v3);
  sub_1000F0A1(*(LPVOID *)(v2 + 20));
  v5 = *(_DWORD *)(v2 + 12);
  sub_1001579C(v1);
  sub_10011603((LPCRITICAL_SECTION)(v2 + 32));
}
// 100669FC: using guessed type int (__stdcall *off_100669FC)(int);

//----- (1001D342) --------------------------------------------------------
char *__thiscall sub_1001D342(int this, int a2, int a3, char a4)
{
  int v4; // edi@1
  int v5; // eax@1
  unsigned int v6; // ebx@1
  int v7; // eax@4
  LPVOID v8; // esi@8
  int (__thiscall *v9)(_DWORD, _DWORD, _DWORD); // esi@9
  int v10; // eax@9
  int v11; // ecx@9
  char *result; // eax@10
  char v13; // [sp+Ch] [bp-Ch]@7
  char *v14; // [sp+10h] [bp-8h]@7
  int v15; // [sp+14h] [bp-4h]@7

  v4 = this;
  v5 = *(_DWORD *)(this + 164);
  v6 = *(_DWORD *)(this + 144);
  if ( v5 )
    *(_DWORD *)(this + 164) = v5 - 1;
  else
    --v6;
  ++*(_DWORD *)(a2 + 28);
  ++*(_DWORD *)(this + 160);
  v7 = *(_DWORD *)(a2 + 48) + 52 * a3;
  *(_DWORD *)v7 = 4;
  *(_DWORD *)(v7 + 36) = v6;
  *(_DWORD *)(this + 176) += v6;
  if ( a4 )
    sub_1001E19D(this, a2, a3);
  if ( v6 == 1 )
  {
    v14 = &v13;
    v15 = 0;
    goto LABEL_9;
  }
  v8 = sub_1000F40E(4 * v6 | -((unsigned __int64)v6 >> 30 != 0));
  v14 = (char *)v8;
  v15 = 0;
  if ( v6 )
  {
    do
    {
LABEL_9:
      v9 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 24);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 24));
      v10 = v9(v4, a2, a3);
      v11 = v15;
      v8 = v14;
      *(_DWORD *)&v14[4 * v15] = v10;
      v15 = v11 + 1;
    }
    while ( v11 + 1 < v6 );
  }
  sub_1001D4A5(v8, v6);
  result = &v13;
  if ( v8 != &v13 )
    result = (char *)sub_1000F0A1(v8);
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1001D4A5: using guessed type _DWORD __stdcall sub_1001D4A5(_DWORD, _DWORD);

//----- (1001D414) --------------------------------------------------------
int __userpurge sub_1001D414@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // ebx@1

  sub_1000FB4A();
  v3 = v2;
  sub_1001188A((LPCRITICAL_SECTION)(v2 + 32));
  sub_1001D45D(
    *(_DWORD *)(52 * *(_DWORD *)(*(_DWORD *)(a1 + 8) + 36) + *(_DWORD *)(v3 + 16) + 48)
  + 52 * *(_DWORD *)(*(_DWORD *)(a1 + 8) + 40)
  + 12,
    *(_DWORD *)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  sub_100119D6((LPCRITICAL_SECTION)(v3 + 32));
  return sub_1000FB24(0);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001D45D) --------------------------------------------------------
int __thiscall sub_1001D45D(int this, int a2)
{
  int result; // eax@1

  result = *(_DWORD *)(this + 4);
  if ( result )
  {
    *(_DWORD *)(a2 + 56) = *(_DWORD *)(result + 56);
    *(_DWORD *)(a2 + 52) = *(_DWORD *)(this + 4);
    *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 4) + 56) + 52) = a2;
    result = *(_DWORD *)(this + 4);
    *(_DWORD *)(result + 56) = a2;
  }
  else
  {
    *(_DWORD *)(a2 + 56) = a2;
    *(_DWORD *)(a2 + 52) = a2;
  }
  *(_DWORD *)(this + 4) = a2;
  ++*(_DWORD *)this;
  return result;
}

//----- (1001D496) --------------------------------------------------------
int __thiscall sub_1001D496(void *this, int a2)
{
  return sub_1001D45D((int)((char *)this + 196), a2);
}

//----- (1001D4A5) --------------------------------------------------------
#error "1001D549: call analysis failed (funcsize=56)"

//----- (1001D551) --------------------------------------------------------
int __thiscall sub_1001D551(void *this, int a2)
{
  int v2; // edi@1
  unsigned int v3; // ecx@1
  unsigned int v4; // eax@1
  unsigned int v5; // edx@1
  unsigned int v6; // esi@2
  int v7; // ebx@2
  unsigned __int64 v8; // rax@2
  int v9; // esi@5

  v2 = (int)this;
  v3 = 0;
  v4 = *(_DWORD *)(v2 + 140);
  v5 = *(_DWORD *)(v2 + 156);
  if ( v4 > v5 )
  {
    v6 = *(_DWORD *)(v2 + 144);
    v7 = *(_DWORD *)(v2 + 164);
    v8 = v4 - v5;
    if ( v7 * v6 < (unsigned int)v8 )
    {
      LODWORD(v8) = v8 - v7 * v6;
      v3 = v7 + v8 / (v6 - 1);
    }
    else
    {
      v3 = (unsigned int)v8 / v6;
    }
  }
  v9 = v3 + *(_DWORD *)(v2 + 160);
  if ( v9 >= (unsigned int)sub_1001301B(v2) )
    v9 = sub_1001301B(v2);
  if ( v9 >= (unsigned int)a2 )
    v9 = a2;
  return v9;
}

//----- (1001D5C1) --------------------------------------------------------
int __thiscall sub_1001D5C1(void *this, int a2)
{
  void *v2; // ebx@1
  int (__thiscall *v3)(_DWORD); // esi@2
  int result; // eax@2
  int (__thiscall *v5)(_DWORD, _DWORD); // esi@3
  char v6; // [sp+Ch] [bp-Ch]@5

  v2 = this;
  if ( !a2 )
  {
    sub_1000D988(&v6, (int)"pContext");
    sub_10027494((int)&v6, (int)&unk_10075484);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1001D61D);
  }
  v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a2 + 8));
  result = v3(a2);
  if ( !result )
  {
    v5 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v2 + 28);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 28));
    result = v5(v2, a2);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001D61D) --------------------------------------------------------
int __thiscall sub_1001D61D(int this)
{
  int v1; // eax@1
  unsigned int v2; // edx@1
  int v3; // ebx@2
  unsigned int v4; // esi@3
  int v5; // ecx@3
  int v6; // edx@4
  int v7; // ebx@5
  int v8; // ebx@6
  int v9; // edi@9
  int v10; // edi@12
  void (__thiscall *v11)(_DWORD); // esi@12
  int v13; // [sp+0h] [bp-18h]@1
  int v14; // [sp+4h] [bp-14h]@2
  unsigned int v15; // [sp+8h] [bp-10h]@1
  unsigned int v16; // [sp+Ch] [bp-Ch]@3
  int v17; // [sp+10h] [bp-8h]@3
  int v18; // [sp+14h] [bp-4h]@4

  v1 = this;
  v2 = 0;
  v13 = this;
  v15 = 0;
  if ( *(_DWORD *)(this + 192) )
  {
    v3 = 0;
    v14 = 0;
    do
    {
      v4 = 0;
      v5 = v3 + *(_DWORD *)(v1 + 16);
      v16 = 0;
      v17 = v5;
      if ( *(_DWORD *)(v5 + 4) )
      {
        v6 = 0;
        v18 = 0;
        do
        {
          v7 = *(_DWORD *)(*(_DWORD *)(v5 + 48) + v6 + 16);
          if ( v7 )
            v8 = *(_DWORD *)(v7 + 56);
          else
            v8 = 0;
          if ( v8 )
          {
            do
            {
              v9 = v8;
              if ( v8 == *(_DWORD *)(*(_DWORD *)(v5 + 48) + v6 + 16) )
                v8 = 0;
              else
                v8 = *(_DWORD *)(v8 + 56);
              v10 = *(_DWORD *)(v9 + 28);
              sub_1002415A(v10);
              v11 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v10 + 36);
              j_nullsub_1(*(_DWORD *)(*(_DWORD *)v10 + 36));
              v11(v10);
              v5 = v17;
              v6 = v18;
            }
            while ( v8 );
            v4 = v16;
          }
          ++v4;
          v6 += 52;
          v16 = v4;
          v18 = v6;
        }
        while ( v4 < *(_DWORD *)(v5 + 4) );
        v1 = v13;
        v2 = v15;
        v3 = v14;
      }
      ++v2;
      v3 += 52;
      v15 = v2;
      v14 = v3;
    }
    while ( v2 < *(_DWORD *)(v1 + 192) );
  }
  return sub_1000F417(*(LPVOID *)(v1 + 56));
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001D6EB) --------------------------------------------------------
int __userpurge sub_1001D6EB@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // edi@1
  int v5; // eax@1
  int v6; // esi@1

  sub_1000FB4A();
  v4 = v3;
  v5 = (int)sub_1000F0A6(0x3Cu);
  *(_DWORD *)(a1 - 16) = v5;
  v6 = 0;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v5 )
    v6 = sub_1001C7A9(v5, v4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
  *(_DWORD *)(a1 - 4) = -1;
  sub_1001C8E1((LPVOID)v6);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001D732) --------------------------------------------------------
#error "1001D7E4: call analysis failed (funcsize=59)"

//----- (1001D7EC) --------------------------------------------------------
int __userpurge sub_1001D7EC@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // ecx@1

  sub_1000FB4A();
  v4 = v3;
  v5 = (int)sub_1000F0A6(0x58u);
  *(_DWORD *)(a1 - 16) = v5;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v5 )
    sub_1002418C(v5, v4, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001D824) --------------------------------------------------------
BOOL __thiscall sub_1001D824(int this, int a2)
{
  BOOL result; // eax@1
  int v3; // edx@2

  result = *(_DWORD *)(52 * *(_DWORD *)(a2 + 36) + *(_DWORD *)(this + 16) + 48);
  if ( !_InterlockedExchangeAdd((volatile signed __int32 *)(result + 52 * *(_DWORD *)(a2 + 40) + 24), 0xFFFFFFFF) )
  {
    v3 = *(_DWORD *)(this + 12);
    result = *(_DWORD *)(this + 132) == *(_DWORD *)(this + 128);
    if ( *(_DWORD *)(v3 + 16) > (unsigned int)result )
      result = SetEvent(*(HANDLE *)(v3 + 80));
  }
  return result;
}

//----- (1001D86E) --------------------------------------------------------
int __thiscall sub_1001D86E(void *this, int a2, int a3, char a4)
{
  int v4; // ebx@1
  int v5; // esi@1
  int v6; // ecx@1
  int result; // eax@1
  int v8; // edi@1
  bool v9; // zf@3

  v4 = 52 * a2;
  v5 = (int)this;
  v6 = 52 * a3;
  result = *(_DWORD *)(v5 + 16);
  v8 = 52 * a3 + *(_DWORD *)(result + 52 * a2 + 48);
  if ( a4 )
  {
    --*(_DWORD *)(v8 + 44);
    --*(_DWORD *)(v5 + 180);
  }
  v9 = (*(_DWORD *)(v8 + 40))-- == 1;
  if ( v9 )
  {
    result = v4 + *(_DWORD *)(v5 + 16);
    --*(_DWORD *)(v5 + 172);
    --*(_DWORD *)(result + 36);
    if ( *(_BYTE *)(v8 + 50) )
    {
      result = sub_1001E19D(v5, result, a3);
      v6 = 52 * a3;
      *(_BYTE *)(v8 + 50) = 0;
    }
    if ( a4 )
    {
      result = *(_DWORD *)(*(_DWORD *)(v5 + 16) + v4 + 48);
      if ( !*(_DWORD *)(result + v6 + 36) )
        --*(_DWORD *)(v5 + 184);
    }
  }
  return result;
}

//----- (1001D8E9) --------------------------------------------------------
int __thiscall sub_1001D8E9(LPVOID lpMem)
{
  LPVOID v1; // esi@1
  int result; // eax@2

  v1 = lpMem;
  if ( lpMem )
  {
    sub_1001D2E3((int)lpMem);
    result = sub_1000F417(v1);
  }
  return result;
}

//----- (1001D904) --------------------------------------------------------
int __userpurge sub_1001D904@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // edi@1
  int v4; // edx@1
  int v5; // ebx@1
  int v6; // ecx@2
  struct _RTL_CRITICAL_SECTION *v7; // esi@3

  sub_1000FB4A();
  *(_DWORD *)(a1 - 16) = v2;
  v3 = *(_DWORD *)(a1 + 8);
  v4 = *(_DWORD *)(v2 + 16) + 52 * *(_DWORD *)(v3 + 36);
  v5 = *(_DWORD *)(v4 + 48) + 52 * *(_DWORD *)(v3 + 40);
  if ( !(*(_DWORD *)(v5 + 36) + *(_DWORD *)(v5 + 44)) )
  {
    --*(_DWORD *)(v4 + 28);
    *(_DWORD *)v5 = 1;
    --*(_DWORD *)(v2 + 160);
    v6 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v2 + 12) + 72) + 40 * *(_DWORD *)(v3 + 36) + 32)
       + 36 * *(_DWORD *)(v3 + 40);
    --*(_DWORD *)(v6 + 16);
    v2 = *(_DWORD *)(a1 - 16);
  }
  v7 = (struct _RTL_CRITICAL_SECTION *)(v2 + 32);
  sub_1001188A((LPCRITICAL_SECTION)(v2 + 32));
  sub_1001DF46(v5 + 12, v3);
  *(_DWORD *)(a1 - 4) = 0;
  sub_100119D6(v7);
  *(_DWORD *)v3 = off_100669BC;
  sub_1000F417((LPVOID)v3);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 100669BC: using guessed type int (*off_100669BC[2])();

//----- (1001D989) --------------------------------------------------------
#error "1001DA0A: call analysis failed (funcsize=43)"

//----- (1001DA12) --------------------------------------------------------
int __thiscall sub_1001DA12(int this)
{
  int v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = this;
  sub_1001D61D(this);
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 36);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 36));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001DA2E) --------------------------------------------------------
LPVOID __thiscall sub_1001DA2E(int this)
{
  LPVOID v1; // esi@1
  LPVOID v2; // eax@1

  v1 = 0;
  v2 = sub_10012193(*(_DWORD *)(*(_DWORD *)(this + 12) + 112));
  if ( v2 && !((unsigned __int8)v2 & 3) )
    v1 = v2;
  return v1;
}

//----- (1001DA4B) --------------------------------------------------------
int __thiscall sub_1001DA4B(int this, int a2)
{
  int v2; // ebp@0
  int v3; // esi@1
  int v4; // ecx@2
  int v5; // edi@3
  int v6; // ST04_4@3
  int v7; // ST00_4@3
  int (__thiscall *v8)(_DWORD, _DWORD, _DWORD); // esi@3
  int v9; // esi@3

  v3 = this;
  if ( !*(_DWORD *)(this + 4) )
  {
    v4 = *(_DWORD *)(this + 12) + 104;
    *(_DWORD *)(v3 + 4) = sub_1001E543(v2);
  }
  v5 = *(_DWORD *)(v3 + 4);
  v6 = *(_DWORD *)(v3 + 152);
  v7 = *(_DWORD *)(v3 + 148);
  v8 = (int (__thiscall *)(_DWORD, _DWORD, _DWORD))**(_DWORD **)v5;
  j_nullsub_1(**(_DWORD **)v5);
  v9 = v8(v5, v7, v6);
  sub_100245AA(v9, a2);
  return v9;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001DA98) --------------------------------------------------------
int __userpurge sub_1001DA98@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // ebx@1
  int v4; // edi@1
  int v5; // eax@2
  int v6; // esi@2

  sub_1000FB4A();
  v3 = v2;
  v4 = *(_DWORD *)(a1 + 8);
  if ( *(_DWORD *)(v4 + 20) != v2 )
  {
    v5 = (int)sub_1000F0A6(0x3Cu);
    *(_DWORD *)(a1 - 16) = v5;
    v6 = 0;
    *(_DWORD *)(a1 - 4) = 0;
    if ( v5 )
      v6 = sub_1001C80B(v5, v3, v4);
    *(_DWORD *)(a1 - 4) = -1;
    sub_1001C8E1((LPVOID)v6);
  }
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001DAE6) --------------------------------------------------------
int __thiscall sub_1001DAE6(int this, unsigned int a2, int a3, char a4)
{
  int v4; // ebp@0
  int v5; // ebx@1
  int v6; // edi@1
  int v7; // eax@2
  unsigned int v8; // edx@2
  unsigned int v9; // ecx@2
  int v10; // esi@4
  unsigned int v11; // eax@14
  int v12; // edx@15
  unsigned int v13; // esi@20
  unsigned int v14; // eax@20
  bool v15; // cl@20
  int v16; // edx@24
  int v17; // ecx@25
  int v18; // esi@29
  char v19; // al@33
  char v20; // cl@34
  int v21; // eax@40
  int v22; // ecx@40
  int v23; // ebx@44
  int v24; // ST00_4@45
  int (__thiscall *v25)(_DWORD, _DWORD, _DWORD); // esi@45
  int v26; // eax@53
  int v28; // [sp+Ch] [bp-40h]@10
  int v29; // [sp+10h] [bp-3Ch]@24
  int v30; // [sp+14h] [bp-38h]@20
  unsigned int v31; // [sp+1Ch] [bp-30h]@4
  LPVOID lpMem; // [sp+20h] [bp-2Ch]@18
  int v33; // [sp+24h] [bp-28h]@13
  int i; // [sp+28h] [bp-24h]@20
  int j; // [sp+2Ch] [bp-20h]@25
  int v36; // [sp+30h] [bp-1Ch]@26
  int v37; // [sp+34h] [bp-18h]@11
  unsigned int v38; // [sp+38h] [bp-14h]@1
  int v39; // [sp+3Ch] [bp-10h]@10
  int v40; // [sp+40h] [bp-Ch]@10
  unsigned int v41; // [sp+44h] [bp-8h]@21
  char v42; // [sp+49h] [bp-3h]@5
  char v43; // [sp+4Ah] [bp-2h]@8
  bool v44; // [sp+4Bh] [bp-1h]@20

  v5 = 0;
  v6 = this;
  v38 = 0;
  if ( a4 )
  {
    v7 = sub_10014D04(this);
    v8 = a2;
    v9 = *(_DWORD *)(v6 + 184) + v7 < a2 + *(_DWORD *)(v6 + 160);
  }
  else
  {
    v8 = a2;
    v9 = 0;
  }
  v31 = v9;
  v10 = v9 < v8 ? v8 - v9 : 0;
  if ( !v9 || (v42 = 1, v8) )
    v42 = 0;
  if ( !a4 || (v43 = 1, v9) )
    v43 = 0;
  v40 = 0;
  v28 = -1;
  v39 = -1;
  if ( a4 )
    v37 = sub_100143C8(*(void **)(v6 + 12), 0);
  else
    v37 = -1;
  v33 = 0;
  if ( v10
    && ((v11 = *(_DWORD *)(v6 + 164), v10 > v11) ? (v12 = *(_DWORD *)(v6 + 164) * *(_DWORD *)(v6 + 144)
                                                        + (*(_DWORD *)(v6 + 144) - 1) * (v10 - v11)) : (v12 = v10 * *(_DWORD *)(v6 + 144)),
        (v33 = v12) != 0) )
    lpMem = sub_1000F40E(4 * v12 | -((unsigned __int64)(unsigned int)v12 >> 30 != 0));
  else
    lpMem = 0;
  v13 = 0;
  v14 = a2;
  v15 = a4 == 0;
  v30 = 0;
  v44 = a4 == 0;
  for ( i = 0; ; i += 52 )
  {
    v41 = v13;
    if ( v38 >= v14 && v15 )
      break;
    if ( v13 >= *(_DWORD *)(v6 + 192) )
      break;
    v16 = i + *(_DWORD *)(v6 + 16);
    v29 = i + *(_DWORD *)(v6 + 16);
    if ( *(_QWORD *)(v16 + 24) <= 0ui64 )
      goto LABEL_64;
    v17 = 0;
    for ( j = 0; ; j += 52 )
    {
      v36 = v17;
      if ( v38 >= v14 && v44 )
        break;
      if ( (unsigned int)v17 >= *(_DWORD *)(v16 + 4) )
        break;
      v18 = j + *(_DWORD *)(v16 + 48);
      if ( *(_DWORD *)v18 == 3 )
      {
        if ( v44 || v38 != v14 - 1 && v37 != v41 )
        {
          v19 = v5;
        }
        else
        {
          v19 = 1;
          if ( v31 )
          {
            v20 = v5;
LABEL_37:
            *(_DWORD *)v18 = 4;
            ++*(_DWORD *)(v16 + 28);
            ++*(_DWORD *)(v6 + 160);
            if ( v19 )
            {
              v40 = v16;
              v39 = v36;
              v44 = 1;
            }
            if ( v20 )
            {
              v21 = *(_DWORD *)(v6 + 164);
              v22 = *(_DWORD *)(v6 + 144);
              if ( v21 )
                *(_DWORD *)(v6 + 164) = v21 - 1;
              else
                --v22;
              *(_DWORD *)(v18 + 36) += v22;
              *(_DWORD *)(v6 + 176) += v22;
              if ( v22 )
              {
                v23 = v22;
                do
                {
                  v24 = v16;
                  v25 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v6 + 24);
                  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v6 + 24));
                  *((_DWORD *)lpMem + v30++) = v25(v6, v24, v36);
                  v16 = v29;
                  --v23;
                }
                while ( v23 );
                v5 = 0;
              }
            }
            ++v38;
            v17 = v36;
LABEL_48:
            v14 = a2;
LABEL_49:
            v13 = v41;
            goto LABEL_50;
          }
        }
        v20 = 1;
        goto LABEL_37;
      }
      if ( *(_DWORD *)v18 != 4 )
        goto LABEL_49;
      if ( v43 )
      {
        v26 = *(_DWORD *)(v18 + 36) + *(_DWORD *)(v18 + 44);
        if ( v26 < (unsigned int)v28 || v26 == v28 && v41 == v37 )
        {
          v28 = *(_DWORD *)(v18 + 36) + *(_DWORD *)(v18 + 44);
          v40 = v16;
          v39 = v17;
        }
        goto LABEL_48;
      }
      if ( !v42 || *(_DWORD *)(v18 + 40) > 0u )
        goto LABEL_49;
      v13 = v41;
      if ( !v40 || v41 == v37 )
      {
        v14 = a2;
        v40 = v16;
        v39 = v17;
        if ( v41 == v37 )
          v44 = 1;
      }
LABEL_50:
      ++v17;
    }
    v15 = v44;
    *(_DWORD *)(v16 + 24) = 0;
LABEL_64:
    ++v13;
  }
  if ( v33 )
  {
    sub_1001D4A5(lpMem, v33);
    sub_1000F0A1(lpMem);
  }
  if ( a4 )
  {
    if ( !v43 && v42 )
    {
      sub_1001DF7C(v4, v40, v39);
      *(_DWORD *)(52 * v39 + *(_DWORD *)(v40 + 48)) = 4;
      ++*(_DWORD *)(v40 + 28);
      ++*(_DWORD *)(v6 + 160);
    }
    v5 = sub_1001D6EB(v4, v40, v39);
  }
  return v5;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1001D4A5: using guessed type _DWORD __stdcall sub_1001D4A5(_DWORD, _DWORD);

//----- (1001DDC5) --------------------------------------------------------
signed __int32 __thiscall sub_1001DDC5(int this, int a2)
{
  signed __int32 result; // eax@1
  int v3; // edx@2

  result = _InterlockedIncrement((volatile signed __int32 *)(*(_DWORD *)(52 * *(_DWORD *)(a2 + 36)
                                                                       + *(_DWORD *)(this + 16)
                                                                       + 48)
                                                           + 52 * *(_DWORD *)(a2 + 40)
                                                           + 24));
  if ( result == 1 )
  {
    v3 = *(_DWORD *)(this + 12);
    result = *(_DWORD *)(this + 132) == *(_DWORD *)(this + 128);
    if ( *(_DWORD *)(v3 + 16) > (unsigned int)result )
      result = SetEvent(*(HANDLE *)(v3 + 80));
  }
  return result;
}

//----- (1001DE13) --------------------------------------------------------
int __thiscall sub_1001DE13(int this, int a2, int a3, char a4)
{
  int v4; // edx@1
  int v5; // esi@1
  int v6; // edi@1
  int v7; // ecx@1
  int result; // eax@1

  v4 = 52 * a2;
  v5 = this;
  v6 = 52 * a3 + *(_DWORD *)(*(_DWORD *)(this + 16) + 52 * a2 + 48);
  v7 = *(_DWORD *)(v6 + 40);
  result = v7 + 1;
  *(_DWORD *)(v6 + 40) = v7 + 1;
  if ( v7 )
  {
LABEL_7:
    if ( a4 )
    {
      ++*(_DWORD *)(v5 + 180);
      ++*(_DWORD *)(v6 + 44);
    }
    return result;
  }
  result = v4 + *(_DWORD *)(v5 + 16);
  ++*(_DWORD *)(result + 36);
  ++*(_DWORD *)(v5 + 172);
  if ( *(_BYTE *)(v6 + 49) )
  {
    *(_BYTE *)(v6 + 50) = 1;
    result = sub_1001E19D(v5, result, a3);
    v4 = 52 * a2;
  }
  if ( a4 )
  {
    result = *(_DWORD *)(*(_DWORD *)(v5 + 16) + v4 + 48);
    if ( !*(_DWORD *)(result + 52 * a3 + 36) )
      ++*(_DWORD *)(v5 + 184);
    goto LABEL_7;
  }
  return result;
}

//----- (1001DE9B) --------------------------------------------------------
int __thiscall sub_1001DE9B(int this)
{
  int v1; // ebp@0
  LPVOID v2; // eax@1
  int v3; // edi@1
  int v4; // eax@2
  int v5; // eax@4
  unsigned int v6; // edi@7
  void (__thiscall *v7)(_DWORD); // esi@7
  int v8; // edi@7
  int v9; // eax@7
  void (__thiscall *v10)(_DWORD); // esi@11
  int v12; // [sp+8h] [bp-4h]@7

  v2 = sub_10012193(*(_DWORD *)(*(_DWORD *)(this + 12) + 112));
  v3 = (int)v2;
  if ( !v2 )
    return 0;
  v4 = (unsigned __int8)v2 & 3;
  if ( !v4 )
  {
LABEL_6:
    sub_1001C8E1((LPVOID)v3);
    goto LABEL_12;
  }
  if ( v4 == 1 )
  {
    v3 = *(_DWORD *)((v3 & 0xFFFFFFFE) + 16) + 8;
    v5 = *(_DWORD *)(v3 + 28);
    if ( v5 && *(_BYTE *)(v5 + 68) )
      return 0;
    goto LABEL_6;
  }
  v6 = v3 & 0xFFFFFFFD;
  v12 = v6 + 4;
  v7 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)(v6 + 4) + 16);
  j_nullsub_1(v7);
  v7(v6 + 4);
  v8 = *(_DWORD *)(v6 + 32);
  v9 = *(_DWORD *)(v8 + 44);
  v3 = v8 + 16;
  if ( v9 && *(_BYTE *)(v9 + 68) )
    v3 = 0;
  else
    sub_1001C8E1((LPVOID)v3);
  v10 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v12 + 20);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v12 + 20));
  v10(v12);
LABEL_12:
  if ( v3 )
    return sub_1001DA98(v1, v3);
  return 0;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001DF46) --------------------------------------------------------
int __thiscall sub_1001DF46(int this, int a2)
{
  int result; // eax@1

  --*(_DWORD *)this;
  *(_DWORD *)(*(_DWORD *)(a2 + 56) + 52) = *(_DWORD *)(a2 + 52);
  *(_DWORD *)(*(_DWORD *)(a2 + 52) + 56) = *(_DWORD *)(a2 + 56);
  result = *(_DWORD *)(this + 4);
  if ( a2 == result )
  {
    if ( result == *(_DWORD *)(result + 56) )
      result = 0;
    else
      result = *(_DWORD *)(result + 52);
    *(_DWORD *)(this + 4) = result;
  }
  return result;
}

//----- (1001DF7C) --------------------------------------------------------
int __userpurge sub_1001DF7C@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // ecx@1
  int v6; // edx@1
  int v7; // ebx@1
  int v8; // eax@1
  struct _RTL_CRITICAL_SECTION *v9; // esi@5
  int v10; // eax@5
  int v11; // eax@6
  int v12; // esi@9
  int v13; // ecx@13
  int v14; // ebx@15
  void (__thiscall *v15)(_DWORD); // edi@15
  int v17; // [sp-Ch] [bp-Ch]@0

  sub_1000FB4A();
  v4 = v3;
  *(_DWORD *)(a1 - 16) = v3;
  v5 = *(_DWORD *)(a1 + 8);
  v6 = *(_DWORD *)(a1 + 12);
  --*(_DWORD *)(v5 + 28);
  --*(_DWORD *)(v4 + 160);
  v7 = *(_DWORD *)(v5 + 48) + 52 * v6;
  *(_DWORD *)(a1 - 24) = v7;
  v8 = *(_DWORD *)(v7 + 36);
  *(_DWORD *)v7 = 1;
  if ( v8 == *(_DWORD *)(v4 + 144) )
    ++*(_DWORD *)(v4 + 164);
  *(_DWORD *)(v4 + 176) -= *(_DWORD *)(v7 + 36);
  *(_DWORD *)(v7 + 36) = 0;
  if ( *(_BYTE *)(v7 + 49) )
    sub_1001E19D(v4, v5, v6);
  v9 = (struct _RTL_CRITICAL_SECTION *)(v4 + 32);
  *(_BYTE *)(v7 + 48) = 0;
  *(_DWORD *)(a1 - 28) = v9;
  sub_1001188A(v9);
  *(_DWORD *)(a1 - 4) = 0;
  v10 = *(_DWORD *)(v7 + 16);
  if ( v10 )
    v11 = *(_DWORD *)(v10 + 56);
  else
    v11 = 0;
  if ( v11 )
  {
    v12 = *(_DWORD *)(a1 - 16);
    do
    {
      if ( v11 == *(_DWORD *)(v7 + 16) )
        *(_DWORD *)(a1 - 16) = 0;
      else
        *(_DWORD *)(a1 - 16) = *(_DWORD *)(v11 + 56);
      v13 = *(_DWORD *)(v11 + 28);
      if ( v13 && !*(_BYTE *)(v13 + 68) )
      {
        *(_BYTE *)(v13 + 68) = 1;
        v14 = *(_DWORD *)(v12 + 8);
        *(_DWORD *)(a1 - 20) = v13;
        v17 = a1 - 20;
        v15 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v14 + 16);
        j_nullsub_1(*(_DWORD *)(*(_DWORD *)v14 + 16));
        v15(v14);
        v7 = *(_DWORD *)(a1 - 24);
      }
      v11 = *(_DWORD *)(a1 - 16);
    }
    while ( v11 );
    v9 = *(struct _RTL_CRITICAL_SECTION **)(a1 - 28);
  }
  *(_DWORD *)(a1 - 4) = 1;
  sub_100119D6(v9);
  return sub_1000FB24(v17);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001E066) --------------------------------------------------------
int __thiscall sub_1001E066(void *this, LPVOID lpMem)
{
  int result; // eax@1

  result = sub_1001DF46((int)((char *)this + 196), (int)lpMem);
  if ( lpMem )
  {
    *(_DWORD *)lpMem = off_100669BC;
    result = sub_1000F417(lpMem);
  }
  return result;
}
// 100669BC: using guessed type int (*off_100669BC[2])();

//----- (1001E092) --------------------------------------------------------
int __thiscall sub_1001E092(int this, int a2)
{
  int v2; // ebp@0
  int v3; // ST00_4@1
  int v4; // ecx@1

  v3 = this;
  v4 = *(_DWORD *)(this + 12);
  return sub_10015A43(v2, v3, a2);
}

//----- (1001E0A5) --------------------------------------------------------
#error "1001E181: call analysis failed (funcsize=87)"

//----- (1001E189) --------------------------------------------------------
int __thiscall sub_1001E189(int this)
{
  int v1; // ST00_4@1
  int v2; // ecx@1

  v1 = this;
  v2 = *(_DWORD *)(this + 12);
  return sub_1001632F(v1);
}
// 1001632F: using guessed type _DWORD __stdcall sub_1001632F(_DWORD);

//----- (1001E193) --------------------------------------------------------
int __usercall sub_1001E193@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST00_4@1
  int v3; // ecx@1

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 12);
  return sub_10016402(a2, v2);
}

//----- (1001E19D) --------------------------------------------------------
int __thiscall sub_1001E19D(int this, int a2, int a3)
{
  int result; // eax@1
  int v4; // edx@1

  result = a2;
  v4 = *(_DWORD *)(a2 + 48) + 52 * a3;
  if ( *(_BYTE *)(v4 + 49) )
  {
    --*(_DWORD *)(this + 168);
    --*(_DWORD *)(a2 + 32);
    *(_BYTE *)(v4 + 49) = 0;
  }
  else
  {
    ++*(_DWORD *)(this + 168);
    ++*(_DWORD *)(a2 + 32);
    *(_BYTE *)(v4 + 49) = 1;
  }
  return result;
}

//----- (1001E1D0) --------------------------------------------------------
int __stdcall sub_1001E1D0(int a1)
{
  int (__thiscall *v1)(_DWORD); // esi@2
  int v2; // eax@2
  char v4; // [sp+8h] [bp-Ch]@3

  if ( !a1 )
  {
    sub_1000D988(&v4, (int)"pContext");
    sub_10027494((int)&v4, (int)&unk_10075484);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1001E21A);
  }
  v1 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a1 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a1 + 8));
  v2 = v1(a1);
  return sub_1002466D(v2);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001E21A) --------------------------------------------------------
signed __int32 sub_1001E21A()
{
  int v0; // eax@2
  HMODULE v1; // eax@4
  int v2; // eax@4
  HMODULE v3; // eax@7
  int v4; // eax@7
  char v6; // [sp+8h] [bp-10h]@10

  dword_1007C5B8 = (int)LoadLibraryExW(L"combase.dll", 0, 0x800u);
  if ( !dword_1007C5B8 )
  {
    v0 = GetLastError();
    if ( v0 > 0 )
LABEL_9:
      v0 = (unsigned __int16)v0 | 0x80070000;
LABEL_10:
    sub_1001A018((int)&v6, v0);
    sub_10027494((int)&v6, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1001E2CB);
  }
  v1 = GetModuleHandleW(L"combase.dll");
  v2 = (int)GetProcAddress(v1, "RoInitialize");
  if ( !v2
    || (dword_1007C5B0 = sub_1001224A(v2),
        v3 = GetModuleHandleW(L"combase.dll"),
        (v4 = (int)GetProcAddress(v3, "RoUninitialize")) == 0) )
  {
    v0 = GetLastError();
    if ( v0 > 0 )
      goto LABEL_9;
    goto LABEL_10;
  }
  dword_1007C5B4 = sub_1001224A(v4);
  return _InterlockedExchange((volatile signed __int32 *)&unk_1007C5BC, 1);
}
// 1001E2CB: using guessed type int __cdecl sub_1001E2CB(int);
// 1007C5B0: using guessed type int dword_1007C5B0;
// 1007C5B4: using guessed type int dword_1007C5B4;
// 1007C5B8: using guessed type int dword_1007C5B8;

//----- (1001E2CB) --------------------------------------------------------
int __cdecl sub_1001E2CB(int a1)
{
  int v1; // esi@1

  v1 = sub_1001224A(dword_1007C5B0);
  j_nullsub_1(v1);
  return ((int (__stdcall *)(int))v1)(a1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1001E2CB: using guessed type int __cdecl sub_1001E2CB(int);
// 1007C5B0: using guessed type int dword_1007C5B0;

//----- (1001E2EC) --------------------------------------------------------
int sub_1001E2EC()
{
  int v0; // esi@1

  v0 = sub_1001224A(dword_1007C5B4);
  j_nullsub_1(v0);
  return ((int (*)(void))v0)();
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1007C5B4: using guessed type int dword_1007C5B4;

//----- (1001E306) --------------------------------------------------------
int __thiscall sub_1001E306(int this, int a2)
{
  int v2; // esi@1
  union _SLIST_HEADER *v3; // edi@1
  signed int v4; // ebx@1

  v2 = this;
  *(_DWORD *)this = &off_10066AC8;
  v3 = (union _SLIST_HEADER *)(this + 8);
  *(_DWORD *)(this + 4) = *(_DWORD *)(a2 + 8);
  v4 = 4;
  do
  {
    InitializeSListHead(v3);
    ++v3;
    --v4;
  }
  while ( v4 );
  return v2;
}
// 10066AC8: using guessed type int (__stdcall *off_10066AC8)(int, int);

//----- (1001E341) --------------------------------------------------------
int __thiscall sub_1001E341(int this, int a2, int a3)
{
  int v3; // esi@1

  v3 = this;
  sub_10024796(this, a2, a3);
  *(_DWORD *)v3 = &off_10066A80;
  *(_DWORD *)(v3 + 48) = 0;
  *(_DWORD *)(v3 + 52) = 0;
  *(_DWORD *)(v3 + 56) = 0;
  *(_DWORD *)(v3 + 48) = 0;
  *(_WORD *)(v3 + 52) = 0;
  return v3;
}
// 10066A80: using guessed type int (*off_10066A80)();

//----- (1001E378) --------------------------------------------------------
int __thiscall sub_1001E378(int this, int a2)
{
  int v2; // esi@1
  int result; // eax@1

  v2 = this;
  sub_1001E306(this, a2);
  *(_DWORD *)v2 = &off_10066AF4;
  result = v2;
  *(_DWORD *)(v2 + 40) = 1;
  *(_BYTE *)(v2 + 44) = 0;
  return result;
}
// 10066AF4: using guessed type int (__stdcall *off_10066AF4)(int, int);

//----- (1001E3A4) --------------------------------------------------------
int __usercall sub_1001E3A4@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // esi@1

  sub_1000FB4A();
  v2 = v1;
  *(_DWORD *)(a1 - 16) = v1;
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  sub_10011564((LPCRITICAL_SECTION)(v1 + 12));
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(v2 + 8) = sub_10012144();
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001E3D8) --------------------------------------------------------
void __thiscall sub_1001E3D8(void *this)
{
  void *v1; // edi@1
  int v2; // ebx@1
  void (__thiscall *v3)(_DWORD); // esi@2
  int v4; // ebx@3
  void (__thiscall *v5)(_DWORD); // esi@4

  v1 = this;
  v2 = *(_DWORD *)this;
  if ( *(_DWORD *)this )
  {
    v3 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 24);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 24));
    v3(v2);
  }
  v4 = *((_DWORD *)v1 + 1);
  if ( v4 )
  {
    v5 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 24);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 24));
    v5(v4);
  }
  sub_10012185(*((_DWORD *)v1 + 2));
  sub_10011603((LPCRITICAL_SECTION)((char *)v1 + 12));
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001E44F) --------------------------------------------------------
LPVOID __thiscall sub_1001E44F(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_10066A9C;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 10066A9C: using guessed type int (*off_10066A9C[5])();

//----- (1001E472) --------------------------------------------------------
LPVOID __thiscall sub_1001E472(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_10066A80;
  sub_10024886((int)lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}
// 10066A80: using guessed type int (*off_10066A80)();

//----- (1001E49A) --------------------------------------------------------
LPVOID __thiscall sub_1001E49A(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_10066A9C;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 10066A9C: using guessed type int (*off_10066A9C[5])();

//----- (1001E4BD) --------------------------------------------------------
LPVOID __thiscall sub_1001E4BD(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_10066A9C;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 10066A9C: using guessed type int (*off_10066A9C[5])();

//----- (1001E4E0) --------------------------------------------------------
int __userpurge sub_1001E4E0@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // esi@1
  int v4; // ecx@1

  sub_1000FB4A();
  v3 = v2;
  v4 = (int)sub_1000F0A6(0x44u);
  *(_DWORD *)(a1 - 16) = v4;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v4 )
    sub_1001E341(v4, v3, *(_DWORD *)(a1 + 8));
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001E515) --------------------------------------------------------
int __cdecl sub_1001E515(int a1)
{
  int v1; // eax@1
  int result; // eax@2

  sub_1001E7FC();
  v1 = (int)sub_1000F0A6(0x30u);
  if ( v1 )
    result = sub_1001E378(v1, a1);
  else
    result = 0;
  return result;
}

//----- (1001E53F) --------------------------------------------------------
int __thiscall sub_1001E53F(int this)
{
  return *(_DWORD *)(this + 4);
}

//----- (1001E543) --------------------------------------------------------
int __usercall sub_1001E543@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // edi@1
  int v3; // eax@5

  sub_1000FB4A();
  v2 = v1;
  if ( !*(_DWORD *)v1 )
  {
    *(_DWORD *)(a1 - 16) = v1 + 12;
    sub_1001188A((LPCRITICAL_SECTION)(v1 + 12));
    *(_DWORD *)(a1 - 4) = 0;
    if ( !*(_DWORD *)v2 )
      *(_DWORD *)v2 = sub_1001E515(v2);
    *(_DWORD *)(a1 - 4) = 1;
    sub_100119D6((LPCRITICAL_SECTION)(v2 + 12));
  }
  v3 = *(_DWORD *)v2;
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001E58B) --------------------------------------------------------
int __stdcall sub_1001E58B(int a1, int nPriority)
{
  int result; // eax@1

  result = nPriority;
  if ( *(_DWORD *)(a1 + 24) != nPriority )
    result = sub_10024929(a1, nPriority);
  return result;
}

//----- (1001E5A3) --------------------------------------------------------
int __thiscall sub_1001E5A3(void *this, int a2)
{
  int v2; // esi@1
  int result; // eax@1
  void *v4; // edi@1
  union _SLIST_HEADER *v5; // ebx@5
  int v6; // ST08_4@8
  int (__thiscall *v7)(_DWORD, _DWORD); // esi@8

  v2 = a2;
  result = 0;
  v4 = this;
  while ( *(_DWORD *)(a2 + 20) != dword_10066AB4[result] )
  {
    ++result;
    if ( result >= 4 )
      goto LABEL_7;
  }
  v5 = (union _SLIST_HEADER *)((char *)this + 8 * result + 8);
  result = QueryDepthSList(v5);
  if ( (unsigned __int16)result < dword_1007C5C0 )
  {
    result = (int)InterlockedPushEntrySList(v5, (PSINGLE_LIST_ENTRY)(a2 + 60));
    v2 = 0;
  }
LABEL_7:
  if ( v2 )
  {
    v6 = v2;
    v7 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v4 + 32);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 32));
    result = v7(v4, v6);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 10066AB4: using guessed type int dword_10066AB4[];
// 1007C5C0: using guessed type int dword_1007C5C0;

//----- (1001E605) --------------------------------------------------------
void __thiscall sub_1001E605(int this, int a2)
{
  int v2; // ebx@1
  int v3; // esi@1
  signed int v4; // eax@2
  union _SLIST_HEADER *v5; // edi@6
  PSINGLE_LIST_ENTRY v6; // eax@8
  int i; // edx@8
  int v8; // edi@9
  int v9; // ST04_4@9
  void (__thiscall *v10)(_DWORD, _DWORD); // esi@9
  int v11; // ST08_4@12
  void (__thiscall *v12)(_DWORD, _DWORD); // esi@12

  v2 = this;
  v3 = a2;
  if ( !*(_BYTE *)(this + 44) )
  {
    v4 = 0;
    while ( *(_DWORD *)(a2 + 20) != dword_10066AB4[v4] )
    {
      ++v4;
      if ( v4 >= 4 )
        goto LABEL_11;
    }
    v5 = (union _SLIST_HEADER *)(this + 8 + 8 * v4);
    if ( QueryDepthSList(v5) < dword_1007C5C0 )
    {
      InterlockedPushEntrySList(v5, (PSINGLE_LIST_ENTRY)(a2 + 60));
      if ( *(_BYTE *)(v2 + 44) )
      {
        v6 = InterlockedFlushSList(v5);
        for ( i = v6 != 0 ? (unsigned int)&v6[-15] : 0; i; i = v8 != 0 ? v8 - 60 : 0 )
        {
          v8 = *(_DWORD *)(i + 60);
          v9 = i;
          v10 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v2 + 32);
          j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 32));
          v10(v2, v9);
        }
      }
      v3 = 0;
    }
  }
LABEL_11:
  if ( v3 )
  {
    v11 = v3;
    v12 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v2 + 32);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 32));
    v12(v2, v11);
  }
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 10066AB4: using guessed type int dword_10066AB4[];
// 1007C5C0: using guessed type int dword_1007C5C0;

//----- (1001E6A8) --------------------------------------------------------
signed __int32 __thiscall sub_1001E6A8(int this)
{
  return _InterlockedIncrement((volatile signed __int32 *)(this + 40));
}

//----- (1001E6B2) --------------------------------------------------------
signed __int32 __thiscall sub_1001E6B2(void *this)
{
  void *v1; // edi@1
  signed __int32 v2; // ebx@1
  void (__thiscall *v3)(_DWORD, _DWORD); // esi@3

  v1 = this;
  v2 = _InterlockedDecrement((volatile signed __int32 *)this + 10);
  if ( !v2 && this )
  {
    v3 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)this + 20);
    j_nullsub_1(v3);
    v3(v1, 1);
  }
  return v2;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001E6DE) --------------------------------------------------------
int __thiscall sub_1001E6DE(void *this, unsigned int a2, int a3)
{
  void *v3; // ebx@1
  unsigned int v4; // ecx@1
  int v5; // edi@1
  signed int v6; // esi@1
  union _SLIST_HEADER *v7; // eax@1
  PSINGLE_LIST_ENTRY v8; // eax@3
  unsigned int v9; // ST04_4@7
  int (__thiscall *v10)(_DWORD, _DWORD); // esi@7
  void (__thiscall *v11)(_DWORD, _DWORD, _DWORD); // esi@8
  int v13; // [sp+Ch] [bp-4h]@1

  v3 = this;
  v4 = a2;
  v5 = 0;
  v6 = (signed int)dword_10066AB4;
  v7 = (union _SLIST_HEADER *)((char *)v3 + 8);
  v13 = (int)((char *)v3 + 8);
  do
  {
    if ( v4 <= *(_DWORD *)v6 )
    {
      v8 = InterlockedPopEntrySList(v7);
      v5 = v8 != 0 ? (unsigned int)&v8[-15] : 0;
      if ( v5 )
        goto LABEL_8;
      v7 = (union _SLIST_HEADER *)v13;
      v4 = a2;
    }
    v6 += 4;
    ++v7;
    v13 = (int)v7;
  }
  while ( v6 < (signed int)&off_10066AC4 );
  if ( v5
    || (v9 = v4,
        v10 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v3 + 28),
        j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 28)),
        (v5 = v10(v3, v9)) != 0) )
  {
LABEL_8:
    v11 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v3 + 36);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 36));
    v11(v3, v5, a3);
  }
  return v5;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 10066AB4: using guessed type int dword_10066AB4[];
// 10066AC4: using guessed type void *off_10066AC4;

//----- (1001E760) --------------------------------------------------------
BOOL __stdcall sub_1001E760(int a1)
{
  return sub_1002490A(a1);
}

//----- (1001E76F) --------------------------------------------------------
PSINGLE_LIST_ENTRY __thiscall sub_1001E76F(void *this)
{
  signed int v1; // esi@1
  union _SLIST_HEADER *v2; // ebx@1
  PSINGLE_LIST_ENTRY result; // eax@2
  int v4; // edx@2
  int v5; // edi@3
  int v6; // ST00_4@3
  void (__thiscall *v7)(_DWORD, _DWORD); // esi@3
  void *v8; // [sp+Ch] [bp-Ch]@1
  signed int v9; // [sp+10h] [bp-8h]@1
  int v10; // [sp+14h] [bp-4h]@1

  v1 = 4;
  v2 = (union _SLIST_HEADER *)((char *)this + 8);
  v8 = this;
  v10 = (int)((char *)this + 8);
  v9 = 4;
  do
  {
    result = InterlockedFlushSList(v2);
    v4 = result != 0 ? (unsigned int)&result[-15] : 0;
    if ( v4 )
    {
      do
      {
        v5 = *(_DWORD *)(v4 + 60);
        v6 = v4;
        v7 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 32);
        j_nullsub_1(*(_DWORD *)(*(_DWORD *)v8 + 32));
        v7(v8, v6);
        result = (PSINGLE_LIST_ENTRY)(v5 - 60);
        v4 = v5 != 0 ? v5 - 60 : 0;
      }
      while ( v4 );
      v2 = (union _SLIST_HEADER *)v10;
      v1 = v9;
    }
    ++v2;
    --v1;
    v10 = (int)v2;
    v9 = v1;
  }
  while ( v1 );
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001E7DC) --------------------------------------------------------
int __thiscall sub_1001E7DC(int this)
{
  int v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = this;
  *(_BYTE *)(this + 44) = 1;
  sub_1001E76F((void *)this);
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 12);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 12));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001E7FC) --------------------------------------------------------
void sub_1001E7FC()
{
  if ( !dword_1007C5C0 )
    dword_1007C5C0 = 4 * sub_100145C6();
}
// 1007C5C0: using guessed type int dword_1007C5C0;

//----- (1001E818) --------------------------------------------------------
void *__thiscall sub_1001E818(void *this)
{
  void *v1; // edi@1
  HMODULE v2; // esi@1
  int v3; // eax@4
  int v4; // eax@4
  int v5; // eax@4
  int v6; // eax@4
  int v7; // eax@4
  int v8; // eax@4

  v1 = this;
  v2 = LoadLibraryExW(L"advapi32.dll", 0, 0x800u);
  if ( v2 || GetLastError() == 87 && (v2 = LoadLibraryW(L"advapi32.dll")) != 0 )
  {
    v3 = (int)GetProcAddress(v2, "RegisterTraceGuidsW");
    *(_DWORD *)v1 = sub_1001224A(v3);
    v4 = (int)GetProcAddress(v2, "UnregisterTraceGuids");
    *((_DWORD *)v1 + 1) = sub_1001224A(v4);
    v5 = (int)GetProcAddress(v2, "TraceEvent");
    *((_DWORD *)v1 + 2) = sub_1001224A(v5);
    v6 = (int)GetProcAddress(v2, "GetTraceLoggerHandle");
    *((_DWORD *)v1 + 3) = sub_1001224A(v6);
    v7 = (int)GetProcAddress(v2, "GetTraceEnableLevel");
    *((_DWORD *)v1 + 4) = sub_1001224A(v7);
    v8 = (int)GetProcAddress(v2, "GetTraceEnableFlags");
    *((_DWORD *)v1 + 5) = sub_1001224A(v8);
  }
  return v1;
}

//----- (1001E8E4) --------------------------------------------------------
signed int __stdcall sub_1001E8E4(int a1, int a2, int a3, int a4)
{
  signed int result; // eax@3
  int v5; // edx@5
  char v6; // bl@7
  int v7; // eax@10

  if ( a1 == 4 )
  {
    dword_1007C5D0 = sub_1001EA23((int)dword_1007C5D8, a4);
    dword_1007C5D4 = v5;
    if ( dword_1007C5D0 == -1 )
      return GetLastError();
    SetLastError(0);
    v6 = sub_1001E9E7((int)dword_1007C5D8, dword_1007C5D0, dword_1007C5D4);
    if ( !v6 )
    {
      result = GetLastError();
      if ( result )
        return result;
      v6 = 4;
    }
    v7 = sub_1001E9AB((int)dword_1007C5D8, dword_1007C5D0, dword_1007C5D4);
    if ( !v7 )
    {
      result = GetLastError();
      if ( result )
        return result;
      v7 = -1;
    }
    dword_1007C5C8 = v7;
    byte_1007C5CC = v6;
  }
  else
  {
    if ( a1 != 5 )
      return 87;
    byte_1007C5CC = 0;
    dword_1007C5C8 = 0;
    dword_1007C5D0 = 0;
    dword_1007C5D4 = 0;
  }
  return 0;
}
// 1007C5C8: using guessed type int dword_1007C5C8;
// 1007C5CC: using guessed type char byte_1007C5CC;
// 1007C5D0: using guessed type int dword_1007C5D0;
// 1007C5D4: using guessed type int dword_1007C5D4;

//----- (1001E9AB) --------------------------------------------------------
int __thiscall sub_1001E9AB(int this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // esi@2
  int result; // eax@2

  v3 = *(_DWORD *)(this + 20);
  if ( (PVOID)v3 == EncodePointer(0) )
  {
    SetLastError(0x7Fu);
    result = 0;
  }
  else
  {
    v4 = sub_1001224A(v3);
    j_nullsub_1(v4);
    result = ((int (__stdcall *)(int, int))v4)(a2, a3);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001E9E7) --------------------------------------------------------
char __thiscall sub_1001E9E7(int this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // esi@2
  char result; // al@2

  v3 = *(_DWORD *)(this + 16);
  if ( (PVOID)v3 == EncodePointer(0) )
  {
    SetLastError(0x7Fu);
    result = 0;
  }
  else
  {
    v4 = sub_1001224A(v3);
    j_nullsub_1(v4);
    result = ((int (__stdcall *)(int, int))v4)(a2, a3);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001EA23) --------------------------------------------------------
int __thiscall sub_1001EA23(int this, int a2)
{
  int v2; // esi@1
  int v3; // esi@2
  int result; // eax@2

  v2 = *(_DWORD *)(this + 12);
  if ( (PVOID)v2 == EncodePointer(0) )
  {
    SetLastError(0x7Fu);
    result = -1;
  }
  else
  {
    v3 = sub_1001224A(v2);
    j_nullsub_1(v3);
    result = ((int (__stdcall *)(int))v3)(a2);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001EA5F) --------------------------------------------------------
int __thiscall sub_1001EA5F(void *this, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // esi@1
  int v7; // esi@2
  int result; // eax@2

  v6 = *(_DWORD *)this;
  if ( (PVOID)v6 == EncodePointer(0) )
  {
    result = 127;
  }
  else
  {
    v7 = sub_1001224A(v6);
    j_nullsub_1(v7);
    result = ((int (__stdcall *)(int, _DWORD, int, int, int, _DWORD, _DWORD, int))v7)(a2, 0, a3, a4, a5, 0, 0, a6);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001EAA2) --------------------------------------------------------
int __thiscall sub_1001EAA2(int this, int a2, int a3, int a4)
{
  int v4; // esi@1
  int v5; // esi@2
  int result; // eax@2

  v4 = *(_DWORD *)(this + 8);
  if ( (PVOID)v4 == EncodePointer(0) )
  {
    result = 127;
  }
  else
  {
    v5 = sub_1001224A(v4);
    j_nullsub_1(v5);
    result = ((int (__stdcall *)(int, int, int))v5)(a2, a3, a4);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001EADA) --------------------------------------------------------
int __thiscall sub_1001EADA(int this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // esi@2
  int result; // eax@2

  v3 = *(_DWORD *)(this + 4);
  if ( (PVOID)v3 == EncodePointer(0) )
  {
    result = 127;
  }
  else
  {
    v4 = sub_1001224A(v3);
    j_nullsub_1(v4);
    result = ((int (__stdcall *)(int, int))v4)(a2, a3);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001EB7E) --------------------------------------------------------
int sub_1001EB7E()
{
  int result; // eax@2

  if ( dword_1007C5D8 )
  {
    byte_1007C5CC = 0;
    dword_1007C5C8 = 0;
    sub_1001EADA((int)dword_1007C5D8, dword_1007C5E0, dword_1007C5E4);
    result = sub_1000F417(dword_1007C5D8);
    dword_1007C5D8 = 0;
  }
  return result;
}
// 1007C5C8: using guessed type int dword_1007C5C8;
// 1007C5CC: using guessed type char byte_1007C5CC;
// 1007C5E0: using guessed type int dword_1007C5E0;
// 1007C5E4: using guessed type int dword_1007C5E4;

//----- (1001EBC1) --------------------------------------------------------
int __cdecl sub_1001EBC1(int a1)
{
  int (__thiscall *v1)(_DWORD, _DWORD); // esi@2
  int result; // eax@2

  if ( a1 )
  {
    v1 = (int (__thiscall *)(_DWORD, _DWORD))**(_DWORD **)a1;
    j_nullsub_1(**(_DWORD **)a1);
    result = v1(a1, 1);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001EBE2) --------------------------------------------------------
int __thiscall sub_1001EBE2(int this, int a2)
{
  int v2; // esi@1
  LPVOID v3; // eax@1
  LPVOID v4; // ecx@2
  signed int v5; // edx@2
  void *v6; // ST00_4@6

  v2 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 20) = a2;
  *(_DWORD *)(this + 8) = 63;
  *(_DWORD *)(this + 12) = sub_1000F40E(0x100u);
  v3 = sub_1000F40E(0x200u);
  if ( v3 )
  {
    v4 = v3;
    v5 = 64;
    do
    {
      *(_DWORD *)v4 = 0;
      v4 = (char *)v4 + 8;
      *((_DWORD *)v4 - 1) = 0;
      --v5;
    }
    while ( v5 );
  }
  else
  {
    v3 = 0;
  }
  v6 = *(void **)(v2 + 12);
  *(_DWORD *)(v2 + 16) = v3;
  sub_10028330(v6, 0, 0x100u);
  return v2;
}

//----- (1001EC52) --------------------------------------------------------
int __thiscall sub_1001EC52(int this)
{
  int result; // eax@1

  *(_DWORD *)this = 0;
  result = this;
  *(_DWORD *)(this + 4) = 0;
  return result;
}

//----- (1001EC5C) --------------------------------------------------------
void *__thiscall sub_1001EC5C(void *this)
{
  void *v1; // edi@1
  int v2; // esi@1

  v1 = this;
  v2 = (int)((char *)this + 132);
  *(_DWORD *)this = &off_10066C84;
  sub_1001EBE2((int)((char *)this + 16), (int)((char *)this + 132));
  *((_DWORD *)v1 + 10) = 0;
  *((_DWORD *)v1 + 11) = 0;
  *((_DWORD *)v1 + 18) = 0;
  *((_DWORD *)v1 + 19) = 0;
  *(_DWORD *)v2 = 0;
  *((_DWORD *)v1 + 37) = 0;
  *((_DWORD *)v1 + 38) = 0;
  *((_DWORD *)v1 + 39) = 0;
  *((_DWORD *)v1 + 40) = 0;
  *((_DWORD *)v1 + 41) = 0;
  *((_DWORD *)v1 + 42) = 0;
  *((_DWORD *)v1 + 48) = 0;
  return v1;
}
// 10066C84: using guessed type int (__thiscall *off_10066C84)(LPVOID lpMem, char);

//----- (1001ECBE) --------------------------------------------------------
int __thiscall sub_1001ECBE(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_1000F0A1(*(LPVOID *)(this + 12));
  return sub_1000F0A1(*(LPVOID *)(v1 + 16));
}

//----- (1001ECD5) --------------------------------------------------------
int __thiscall sub_1001ECD5(int this)
{
  int v1; // esi@1

  v1 = this;
  *(_DWORD *)this = &off_10066C84;
  if ( *(_DWORD *)(this + 92) )
  {
    sub_10019635(*(PSINGLE_LIST_ENTRY *)(this + 92));
    *(_DWORD *)(v1 + 92) = 0;
  }
  sub_1000F0A1(*(LPVOID *)(v1 + 168));
  return sub_1001ECBE(v1 + 16);
}
// 10066C84: using guessed type int (__thiscall *off_10066C84)(LPVOID lpMem, char);

//----- (1001ED37) --------------------------------------------------------
LPVOID __thiscall sub_1001ED37(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_1001ECD5((int)lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (1001ED5C) --------------------------------------------------------
bool __thiscall sub_1001ED5C(int this, unsigned int a2)
{
  int v2; // edi@1
  signed int v3; // edx@1
  bool result; // al@1

  v2 = 4 * (a2 >> 5);
  v3 = 1 << (a2 & 0x1F);
  result = (v3 & *(_DWORD *)(v2 + *(_DWORD *)(this + 88))) != 0;
  if ( result )
    _InterlockedAnd((volatile signed __int32 *)(v2 + *(_DWORD *)(this + 88)), ~v3);
  return result;
}

//----- (1001ED93) --------------------------------------------------------
int __thiscall sub_1001ED93(void *this, int a2)
{
  void *v2; // ebx@1
  int (__thiscall *v3)(_DWORD, _DWORD); // esi@2
  int result; // eax@2

  v2 = this;
  if ( a2 )
  {
    sub_10020F5A(a2);
    v3 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 28);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)a2 + 28));
    result = v3(a2, v2);
  }
  *((_DWORD *)v2 + 31) = a2;
  if ( a2 )
  {
    if ( *(_BYTE *)(a2 + 179) & 1 )
    {
      ++*((_DWORD *)v2 + 27);
      *(_BYTE *)(a2 + 179) &= 0xFEu;
    }
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001EDDB) --------------------------------------------------------
bool __thiscall sub_1001EDDB(int this)
{
  bool result; // al@2

  if ( *(_BYTE *)(this + 98) )
  {
    *(_BYTE *)(this + 98) = 0;
    result = 1;
  }
  else
  {
    result = sub_1001ED5C(**(_DWORD **)(this + 80), *(_DWORD *)(this + 144));
  }
  return result;
}

//----- (1001EE1F) --------------------------------------------------------
char __cdecl sub_1001EE1F(int a1)
{
  char result; // al@1

  result = sub_10018385(*(_DWORD *)(a1 + 36));
  if ( !result )
  {
    sub_1001EF4D(*(_DWORD *)(a1 + 16));
    *(_DWORD *)(a1 + 16) = 0;
    result = a1 + 72;
    _InterlockedExchange((volatile signed __int32 *)(a1 + 72), 0);
  }
  return result;
}

//----- (1001EE2B) --------------------------------------------------------
char __thiscall sub_1001EE2B(int this, int a2)
{
  int v2; // edi@1
  char result; // al@5

  v2 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)this + 12) + 4 * *(_DWORD *)(this + 4));
  if ( v2 == 1
    || _InterlockedExchange(
         (volatile signed __int32 *)(*(_DWORD *)(*(_DWORD *)this + 12) + 4 * *(_DWORD *)(this + 4)),
         1) != v2 )
  {
    sub_1001EF6E(*(_DWORD *)this);
    result = 0;
  }
  else
  {
    if ( a2 )
      *(_DWORD *)a2 = v2;
    result = 1;
  }
  return result;
}

//----- (1001EE72) --------------------------------------------------------
char __thiscall sub_1001EE72(int this, int a2, int a3, char a4)
{
  signed __int32 v4; // ebx@1
  signed __int32 v5; // edx@3
  bool v6; // al@3
  signed __int32 v7; // eax@4
  char result; // al@6

  v4 = *(_DWORD *)(this + 8);
  if ( !(v4 & a3) )
    goto LABEL_6;
  if ( a3 == 15 )
  {
    v5 = _InterlockedExchange((volatile signed __int32 *)(this + 8), 0);
    v6 = v5 != 0;
  }
  else
  {
    while ( 1 )
    {
      v7 = _InterlockedCompareExchange((volatile signed __int32 *)(this + 8), 0, v4);
      v5 = v7;
      if ( v7 == v4 )
        break;
      v4 = v7;
      if ( !(v7 & a3) )
        goto LABEL_6;
    }
    v6 = 1;
  }
  if ( v6 )
  {
    if ( a4 )
    {
      _InterlockedDecrement((volatile signed __int32 *)(**(_DWORD **)(this + 80) + 436));
      _InterlockedDecrement((volatile signed __int32 *)(*(_DWORD *)(this + 80) + 28));
      if ( v5 == 4 || v5 == 8 )
      {
        _InterlockedDecrement((volatile signed __int32 *)(**(_DWORD **)(this + 80) + 440));
        _InterlockedDecrement((volatile signed __int32 *)(*(_DWORD *)(this + 80) + 32));
      }
    }
    result = 1;
    *(_DWORD *)a2 = v5;
    *(_DWORD *)(a2 + 4) = this;
    *(_DWORD *)(this + 12) = v5;
  }
  else
  {
LABEL_6:
    result = 0;
  }
  return result;
}

//----- (1001EF07) --------------------------------------------------------
signed __int32 __thiscall sub_1001EF07(int this, int a2)
{
  signed __int32 result; // eax@1

  result = 1;
  if ( *(_DWORD *)((a2 << 7) + *(_DWORD *)(this + 92)) == 1 )
    result = _InterlockedCompareExchange((volatile signed __int32 *)((a2 << 7) + *(_DWORD *)(this + 92)), 0, 1);
  return result;
}

//----- (1001EF2C) --------------------------------------------------------
int __thiscall sub_1001EF2C(int this, int a2)
{
  int v2; // edi@1
  int (__thiscall *v3)(_DWORD, _DWORD); // esi@1

  v2 = *(_DWORD *)(this + 88);
  v3 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v2 + 24);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 24));
  return v3(v2, a2);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001EF4D) --------------------------------------------------------
int __stdcall sub_1001EF4D(int a1)
{
  int v1; // esi@1
  int v2; // eax@2
  int result; // eax@2

  v1 = a1;
  while ( v1 )
  {
    v2 = v1 - 188;
    v1 = *(_DWORD *)v1;
    result = sub_1001EBC1(v2);
  }
  return result;
}

//----- (1001EF6E) --------------------------------------------------------
int __thiscall sub_1001EF6E(int this)
{
  int result; // eax@1

  result = _InterlockedExchangeAdd((volatile signed __int32 *)(this + 20), 0xFFFFFFFF);
  if ( !result )
    result = sub_1001898B(this + 28, (int (__cdecl *)(_DWORD))sub_1001F7CE, this, *(_DWORD *)this);
  return result;
}

//----- (1001EF89) --------------------------------------------------------
int __thiscall sub_1001EF89(int this, int a2)
{
  int v2; // edi@1
  int (__thiscall *v3)(_DWORD, _DWORD); // esi@1

  v2 = *(_DWORD *)(this + 88);
  v3 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v2 + 28);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 28));
  return v3(v2, a2);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001EFAA) --------------------------------------------------------
char __thiscall sub_1001EFAA(int this, signed __int32 a2, int a3, int a4)
{
  int v4; // ebx@1
  int v5; // esi@1
  int v6; // edi@3
  int v7; // ST00_4@3
  void (__thiscall *v8)(_DWORD, _DWORD); // esi@3
  char result; // al@3
  int v10; // eax@8
  int v11; // ST00_4@10
  int (__thiscall *v12)(_DWORD, _DWORD, _DWORD); // esi@10

  v4 = this;
  v5 = **(_DWORD **)(this + 80);
  if ( a2 == 1 || a2 == 4 )
  {
    if ( sub_10019DFC((void *)v5, 1) )
    {
      v10 = a3;
      if ( !a3 )
        v10 = sub_10017D2C(v5);
      v11 = v10;
      v12 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 28);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 28));
      result = v12(v4, v11, a4);
    }
    else
    {
      if ( a4 )
        sub_100190B3(v5, a4, 1);
      sub_1001F29B(v4, a2, 0);
      result = 0;
    }
  }
  else
  {
    v6 = *(_DWORD *)(this + 88);
    v7 = *(_DWORD *)(this + 128);
    v8 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v6 + 20);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v6 + 20));
    v8(v6, v7);
    result = 1;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001F039) --------------------------------------------------------
char __thiscall sub_1001F039(int this, int a2)
{
  int v2; // esi@1
  char result; // al@1

  v2 = this;
  result = 0;
  if ( *(_DWORD *)this )
  {
    result = sub_1001EFAA(
               *(_DWORD *)(this + 4),
               *(_DWORD *)this,
               *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 4) + 80) + 4) + 8),
               a2);
    *(_DWORD *)v2 = 0;
  }
  return result;
}

//----- (1001F064) --------------------------------------------------------
int __usercall sub_1001F064@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1

  v2 = a1;
  if ( !*(_DWORD *)(a1 + 92) )
    *(_DWORD *)(a1 + 92) = sub_100181EE(a2);
  return *(_DWORD *)(v2 + 92);
}

//----- (1001F07D) --------------------------------------------------------
int __thiscall sub_1001F07D(int this, char a2)
{
  int v3; // [sp+0h] [bp-4h]@1

  v3 = this;
  sub_1001B6B7((unsigned int *)(this + 360), (int)&a2, (int)&v3);
  return v3;
}

//----- (1001F09D) --------------------------------------------------------
int __thiscall sub_1001F09D(int this, int a2, int a3)
{
  int v3; // ebx@1
  int v4; // eax@1
  int (__thiscall *v5)(_DWORD); // esi@1
  int (__thiscall *v6)(_DWORD); // esi@1
  int v7; // eax@1
  int v8; // ecx@1
  int v9; // eax@1
  int v10; // ecx@1
  int v11; // edx@1
  int v12; // eax@1
  int v13; // ecx@1
  int v14; // eax@4
  int v15; // edi@4
  int (__thiscall *v16)(_DWORD); // esi@4
  int v17; // eax@4
  int v18; // eax@4
  int v19; // edi@4
  int v20; // esi@4
  int v21; // eax@4
  int v22; // ST0C_4@4
  int v23; // edi@4
  int (__thiscall *v24)(_DWORD); // esi@4
  int v25; // eax@4
  char v27; // [sp+Ch] [bp-14h]@4
  int v28; // [sp+1Ch] [bp-4h]@1

  v3 = this;
  *(_DWORD *)(this + 200) = 0;
  *(_DWORD *)(this + 204) = 0;
  *(_DWORD *)(this + 120) = 0;
  *(_DWORD *)(this + 80) = a2;
  *(_DWORD *)(this + 224) = 1;
  *(_DWORD *)(this + 212) = 1;
  *(_DWORD *)(this + 84) = *(_DWORD *)(a2 + 4);
  v4 = *(_DWORD *)(this + 80);
  *(_WORD *)(this + 172) = 0;
  *(_DWORD *)(this + 88) = a3;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 104) = 0;
  *(_DWORD *)(this + 108) = 0;
  *(_DWORD *)(this + 112) = 0;
  *(_DWORD *)(this + 116) = 0;
  *(_DWORD *)(this + 124) = 0;
  *(_DWORD *)(this + 176) = 0;
  *(_DWORD *)(this + 192) = 0;
  *(_DWORD *)(this + 92) = 0;
  *(_WORD *)(this + 96) = 0;
  *(_BYTE *)(this + 98) = 1;
  v28 = *(_DWORD *)v4;
  v5 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a3 + 16);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a3 + 16));
  *(_DWORD *)(v3 + 136) = v5(a3);
  v6 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a3 + 4);
  j_nullsub_1(v6);
  v7 = v6(a3);
  v8 = v28;
  *(_DWORD *)(v3 + 140) = v7;
  *(_DWORD *)(v3 + 144) = sub_1001F07D(v8, v7);
  v9 = sub_100145C6();
  sub_10018291((void *)(v3 + 164), v9);
  sub_1001F8F7(v3 + 164);
  v10 = *(_DWORD *)(v3 + 168);
  v11 = *(_DWORD *)(v3 + 144) >> 5;
  v12 = *(_DWORD *)(v10 + 4 * v11);
  _bittestandset((unsigned int *)&v12, *(_DWORD *)(v3 + 144) & 0x1F);
  *(_DWORD *)(v10 + 4 * v11) = v12;
  v13 = v3 + 40;
  if ( *(_DWORD *)(v28 + 12) )
    sub_1002515C(v13, v3, 2);
  else
    sub_1002515C(v13, v3, 1);
  v14 = *(_DWORD *)(v3 + 80);
  v15 = *(_DWORD *)v14;
  v16 = *(int (__thiscall **)(_DWORD))(**(_DWORD **)v14 + 4);
  j_nullsub_1(v16);
  v17 = v16(v15);
  v18 = sub_100249D8((int)&v27, 3, *(_DWORD *)(v3 + 140), v17, v3);
  sub_10019F0A(v3 + 148, v18);
  v19 = v28;
  v20 = *(_DWORD *)(v3 + 144);
  sub_1001F255(v28 + 72, *(_DWORD *)(v3 + 144));
  sub_1001EF07(v19, v20);
  v21 = *(_DWORD *)(v3 + 80);
  v22 = *(_DWORD *)(v3 + 136);
  v23 = *(_DWORD *)v21;
  v24 = *(int (__thiscall **)(_DWORD))(**(_DWORD **)v21 + 4);
  j_nullsub_1(v24);
  v25 = v24(v23);
  return sub_1001F86A(1, 4, v25, v22);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001F215) --------------------------------------------------------
signed __int32 __thiscall sub_1001F215(int this, unsigned int a2)
{
  int v2; // ebx@1
  signed __int32 v3; // esi@1

  v2 = this;
  v3 = _InterlockedDecrement((volatile signed __int32 *)(*(_DWORD *)(this + 8) + 4 * a2));
  if ( !v3 )
  {
    sub_1001F6E5(this, a2);
    _InterlockedAnd((volatile signed __int32 *)(*(_DWORD *)(v2 + 4) + 4 * (a2 >> 5)), ~(1 << (a2 & 0x1F)));
  }
  return v3;
}

//----- (1001F255) --------------------------------------------------------
signed __int32 __thiscall sub_1001F255(int this, unsigned int a2)
{
  signed __int32 v2; // esi@1
  int v4; // [sp+Ch] [bp-4h]@1

  v4 = this;
  v2 = _InterlockedIncrement((volatile signed __int32 *)(*(_DWORD *)(this + 8) + 4 * a2));
  if ( v2 == 1 )
  {
    sub_1001F69B(this, a2);
    _InterlockedOr((volatile signed __int32 *)(*(_DWORD *)(v4 + 4) + 4 * (a2 >> 5)), 1 << (a2 & 0x1F));
  }
  return v2;
}

//----- (1001F29B) --------------------------------------------------------
int __thiscall sub_1001F29B(int this, signed __int32 a2, char a3)
{
  int v3; // edi@1
  int result; // eax@8

  v3 = this;
  *(_DWORD *)(this + 128) = *(_DWORD *)(this + 124);
  if ( a3 && (a2 == 1 || a2 == 4) )
    sub_10019DFC(**(void ***)(this + 80), 0);
  _InterlockedIncrement((volatile signed __int32 *)(**(_DWORD **)(v3 + 80) + 436));
  _InterlockedIncrement((volatile signed __int32 *)(*(_DWORD *)(v3 + 80) + 28));
  if ( a2 == 4 || a2 == 8 )
  {
    _InterlockedIncrement((volatile signed __int32 *)(**(_DWORD **)(v3 + 80) + 440));
    _InterlockedIncrement((volatile signed __int32 *)(*(_DWORD *)(v3 + 80) + 32));
  }
  result = v3 + 8;
  _InterlockedExchange((volatile signed __int32 *)(v3 + 8), a2);
  return result;
}

//----- (1001F30B) --------------------------------------------------------
char __thiscall sub_1001F30B(int this)
{
  int v1; // edi@1
  char result; // al@1
  int (__thiscall *v3)(_DWORD); // esi@4
  int v4; // ecx@5
  signed __int32 v5; // ST00_4@5
  signed __int32 v6; // [sp+8h] [bp-8h]@1
  int v7; // [sp+Ch] [bp-4h]@5

  v1 = this;
  v6 = 0;
  result = sub_1001EE72(this, (int)&v6, 15, 1);
  if ( result )
  {
    if ( v6 == 2 || v6 == 8 )
    {
      v4 = v7;
      v5 = v6;
      *(_BYTE *)(v1 + 173) = 1;
      result = sub_1001EFAA(v4, v5, 0, 0);
    }
    else
    {
      v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 12);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 12));
      result = v3(v1);
    }
  }
  else
  {
    *(_BYTE *)(v1 + 173) = 1;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001F36B) --------------------------------------------------------
int __thiscall sub_1001F36B(int this)
{
  int v1; // ebx@1
  int v2; // ST04_4@1
  int v3; // edi@1
  int (__thiscall *v4)(_DWORD, _DWORD); // esi@1
  int v5; // eax@1

  v1 = this;
  v2 = *(_DWORD *)(this + 88);
  v3 = *(_DWORD *)(**(_DWORD **)(this + 80) + 428);
  v4 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v3 + 20);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 20));
  v5 = v4(v3, v2);
  return sub_1001FB94(*(void **)(v1 + 80), v5, 1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001F39D) --------------------------------------------------------
signed int __thiscall sub_1001F39D(int this)
{
  int v1; // edi@1
  int v2; // eax@1
  int v3; // edx@1
  signed __int32 v4; // ebx@1
  signed int result; // eax@5

  v1 = *(_DWORD *)(this + 4) - 1;
  v2 = *(_DWORD *)(this + 12);
  v3 = v1 & *(_DWORD *)(this + 8);
  *(_DWORD *)(this + 4) = v1;
  v4 = _InterlockedExchange((volatile signed __int32 *)(v2 + 4 * v3), 0);
  if ( !v4 )
    *(_DWORD *)(this + 4) = v1 + 1;
  if ( !(v4 & 1) || (v4 &= 0xFFFFFFFE, sub_1001EE2B(*(_DWORD *)(this + 16) + 8 * (v1 & *(_DWORD *)(this + 8)), 0)) )
    result = v4;
  else
    result = 1;
  return result;
}

//----- (1001F3EB) --------------------------------------------------------
char __thiscall sub_1001F3EB(PSLIST_HEADER ListHead, int a2, int a3, char a4)
{
  int v4; // esi@1
  int v5; // edx@1
  signed __int32 v6; // edi@1
  char result; // al@2
  struct _SINGLE_LIST_ENTRY *v8; // ecx@3
  int v9; // eax@3
  int v10; // edx@4
  int v11; // ebx@4
  int v12; // edx@5
  PSINGLE_LIST_ENTRY v13; // eax@15
  int v14; // ST08_4@15

  v4 = (int)ListHead;
  v5 = a3 >> *(_DWORD *)&ListHead[5].s.Depth;
  v6 = a3 & (unsigned int)((char *)&ListHead[5].s.Next.Next[-1].Next + 3);
  if ( v5 < *(_DWORD *)&ListHead[7].s.Depth )
  {
    v8 = ListHead[7].s.Next.Next;
    v9 = *(_DWORD *)(v4 + 52);
    if ( v5 < (signed int)v8 )
    {
      v11 = *(_DWORD *)(v9 + 4 * v5);
    }
    else
    {
      v10 = v5 - (_DWORD)v8;
      v11 = *(_DWORD *)(v9 + 4 * (_DWORD)v8 - 4);
      if ( v10 >= 0 )
      {
        v12 = v10 + 1;
        do
        {
          v11 = *(_DWORD *)(v11 + 4);
          --v12;
        }
        while ( v12 );
      }
    }
    if ( _InterlockedCompareExchange((volatile signed __int32 *)(*(_DWORD *)v11 + 4 * v6), 0, a2) == a2 )
    {
      _InterlockedCompareExchange((volatile signed __int32 *)(v11 + 8), v6, -2);
      if ( a4 )
      {
        if ( (signed int)QueryDepthSList((PSLIST_HEADER)v4) <= *(_DWORD *)(v4 + 68) )
        {
          InterlockedPushEntrySList((PSLIST_HEADER)v4, (PSINGLE_LIST_ENTRY)(a2 + 188));
        }
        else
        {
          InterlockedPushEntrySList((PSLIST_HEADER)(v4 + 8), (PSINGLE_LIST_ENTRY)(a2 + 188));
          if ( (signed int)QueryDepthSList((PSLIST_HEADER)(v4 + 8)) > *(_DWORD *)(v4 + 68)
            && !sub_10018385(*(_DWORD *)(v4 + 36))
            && !_InterlockedCompareExchange((volatile signed __int32 *)(v4 + 72), 1, 0) )
          {
            v13 = InterlockedFlushSList((PSLIST_HEADER)(v4 + 8));
            v14 = *(_DWORD *)(v4 + 36);
            *(_DWORD *)(v4 + 16) = v13;
            sub_1001898B(v4 + 20, (int (__cdecl *)(_DWORD))sub_1001EE1F, v4, v14);
          }
        }
      }
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1001F4ED) --------------------------------------------------------
char __thiscall sub_1001F4ED(int this)
{
  int v1; // ebx@1
  int v2; // eax@5
  int v3; // edi@6
  int v4; // ebx@9
  int v5; // esi@10
  int v6; // edi@15
  int v7; // ebx@15
  int (__thiscall *v8)(_DWORD); // esi@15
  int v9; // eax@15
  int v10; // ecx@15
  int v11; // ebx@15
  int v12; // eax@15
  int v13; // edi@15
  int (__thiscall *v14)(_DWORD, _DWORD); // esi@15
  int v15; // eax@15
  int v16; // ecx@17
  char v18; // [sp-10h] [bp-24h]@10
  int v19; // [sp-Ch] [bp-20h]@10
  int v20; // [sp-8h] [bp-1Ch]@10
  int v21; // [sp-4h] [bp-18h]@10
  int v22; // [sp+Ch] [bp-8h]@5
  int v23; // [sp+10h] [bp-4h]@1

  v1 = this;
  v23 = this;
  sub_10019490(**(void ***)(this + 80), this + 212);
  sub_1001F215(**(_DWORD **)(v1 + 80) + 48, *(_DWORD *)(v1 + 144));
  _InterlockedDecrement((volatile signed __int32 *)(*(_DWORD *)(v1 + 80) + 36));
  if ( !*(_BYTE *)(v1 + 172) )
    _InterlockedDecrement((volatile signed __int32 *)(**(_DWORD **)(v1 + 80) + 20));
  sub_1001F661(**(_DWORD **)(v1 + 80), v1);
  if ( !*(_BYTE *)(v1 + 96) )
    sub_1001F215(**(_DWORD **)(v1 + 80) + 72, *(_DWORD *)(v1 + 144));
  *(_DWORD *)(v1 + 124) = 0;
  v2 = *(_DWORD *)(v1 + 20) - *(_DWORD *)(v1 + 16);
  v22 = v1 + 16;
  if ( v2 <= 0 )
    v3 = 0;
  else
    v3 = sub_1001F39D(v1 + 16);
  if ( v3 )
  {
    v4 = v22;
    do
    {
      v5 = sub_10014379(v3 + 4);
      sub_10019F0A((int)&v18, v5 + 12);
      sub_10022170((void *)v5, v3, v18, v19, v20, v21);
      if ( *(_DWORD *)(v4 + 4) - *(_DWORD *)v4 <= 0 )
        v3 = 0;
      else
        v3 = sub_1001F39D(v4);
    }
    while ( v3 );
    v1 = v23;
  }
  v6 = **(_DWORD **)(v1 + 80);
  v7 = **(_DWORD **)(v1 + 88);
  v8 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v6 + 52);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v6 + 52));
  v9 = v8(v6);
  v10 = *(_DWORD *)(v7 + 8);
  v21 = v9;
  j_nullsub_1(v10);
  (*(void (__thiscall **)(_DWORD))(v7 + 8))(*(_DWORD *)(v23 + 88));
  v11 = v23;
  v12 = *(_DWORD *)(v23 + 80);
  *(_DWORD *)(v23 + 88) = 0;
  v20 = *(_DWORD *)(v11 + 136);
  v13 = *(_DWORD *)v12;
  v14 = *(int (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)v12 + 4);
  j_nullsub_1(v14);
  v15 = v14(v13, v20);
  sub_1001F86A(2, 4, v15, v21);
  if ( *(_DWORD *)(v11 + 92) )
  {
    sub_10019635(*(PSINGLE_LIST_ENTRY *)(v11 + 92));
    *(_DWORD *)(v11 + 92) = 0;
  }
  v16 = *(_DWORD *)(v11 + 80);
  v21 = 1;
  v20 = *(_DWORD *)(v11 + 100);
  return sub_1001F3EB((PSLIST_HEADER)(v16 + 56), v11, v20, 1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001F64D) --------------------------------------------------------
char __thiscall sub_1001F64D(int this)
{
  return sub_10018A98(**(_DWORD **)(this + 80), this + 192);
}

//----- (1001F661) --------------------------------------------------------
int __thiscall sub_1001F661(int this, int a2)
{
  int v2; // edi@1
  unsigned int v3; // edx@1
  unsigned int v4; // ecx@1
  int result; // eax@1

  v2 = this;
  v3 = *(_DWORD *)(a2 + 104) - *(_DWORD *)(a2 + 112);
  *(_DWORD *)(a2 + 112) = *(_DWORD *)(a2 + 104);
  _InterlockedExchangeAdd((volatile signed __int32 *)(this + 444), v3);
  v4 = *(_DWORD *)(a2 + 108) - *(_DWORD *)(a2 + 116);
  *(_DWORD *)(a2 + 116) = *(_DWORD *)(a2 + 108);
  result = v2 + 448;
  _InterlockedExchangeAdd((volatile signed __int32 *)(v2 + 448), v4);
  return result;
}

//----- (1001F69B) --------------------------------------------------------
int __thiscall sub_1001F69B(int this, unsigned int a2)
{
  int v2; // ebx@1
  signed int v3; // edi@1
  int result; // eax@1
  char v5; // [sp+Ch] [bp-10h]@3
  int v6; // [sp+14h] [bp-8h]@2
  void (*v7)(); // [sp+18h] [bp-4h]@2

  v2 = *(_DWORD *)(this + 4);
  v3 = 1 << (a2 & 0x1F);
  result = *(_DWORD *)(v2 + 4 * (a2 >> 5));
  if ( result & v3 )
  {
    v6 = 0;
    v7 = sub_1001253A;
    while ( 1 )
    {
      result = *(_DWORD *)(v2 + 4 * (a2 >> 5));
      if ( !(result & v3) )
        break;
      sub_10010BDE(&v5);
    }
  }
  return result;
}

//----- (1001F6E5) --------------------------------------------------------
int __thiscall sub_1001F6E5(int this, unsigned int a2)
{
  int v2; // ebx@1
  signed int v3; // edi@1
  int result; // eax@1
  char v5; // [sp+Ch] [bp-10h]@3
  int v6; // [sp+14h] [bp-8h]@2
  void (*v7)(); // [sp+18h] [bp-4h]@2

  v2 = *(_DWORD *)(this + 4);
  v3 = 1 << (a2 & 0x1F);
  result = *(_DWORD *)(v2 + 4 * (a2 >> 5));
  if ( !(result & v3) )
  {
    v6 = 0;
    v7 = sub_1001253A;
    while ( 1 )
    {
      result = *(_DWORD *)(v2 + 4 * (a2 >> 5));
      if ( result & v3 )
        break;
      sub_10010BDE(&v5);
    }
  }
  return result;
}

//----- (1001F72F) --------------------------------------------------------
char __thiscall sub_1001F72F(int this, int a2, int a3)
{
  int v3; // edi@1
  int v4; // esi@4
  char result; // al@9
  int v6; // ST08_4@10
  void (__thiscall *v7)(_DWORD, _DWORD); // esi@10
  int v8; // ST08_4@10
  void (__thiscall *v9)(_DWORD, _DWORD); // esi@10
  char v10; // [sp+Ch] [bp-10h]@3
  int v11; // [sp+14h] [bp-8h]@2
  void (*v12)(); // [sp+18h] [bp-4h]@2

  v3 = this;
  if ( *(_DWORD *)(this + 124) )
  {
    v11 = 0;
    v12 = sub_1001253A;
    do
      sub_10010BDE(&v10);
    while ( *(_DWORD *)(v3 + 124) );
  }
  v4 = a3;
  if ( a3 )
  {
    if ( !*(_DWORD *)(a3 + 28) )
      sub_10020DA1(a3, a2, 0, 0);
  }
  else
  {
    v4 = sub_10022620(a2, 0, 0);
  }
  if ( v4 )
  {
    v6 = v4;
    v7 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v3 + 16);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 16));
    v7(v3, v6);
    v8 = *(_DWORD *)(v3 + 124);
    v9 = *(void (__thiscall **)(_DWORD, _DWORD))(**(_DWORD **)(v3 + 88) + 20);
    j_nullsub_1(v9);
    v9(*(_DWORD *)(v3 + 88), v8);
    result = 1;
  }
  else
  {
    sub_1001F29B(v3, 4, 1);
    sub_1001778F(**(_DWORD **)(v3 + 80));
    result = 0;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001F7CE) --------------------------------------------------------
int __cdecl sub_1001F7CE(LPVOID lpMem)
{
  int result; // eax@2

  if ( lpMem )
  {
    sub_1001A264((int)lpMem);
    result = sub_1000F417(lpMem);
  }
  return result;
}

//----- (1001F7ED) --------------------------------------------------------
int __cdecl sub_1001F7ED(char a1, char a2, int a3, int a4)
{
  int v4; // ebx@1
  int result; // eax@2
  __int16 v6; // [sp+4h] [bp-40h]@2
  char v7; // [sp+6h] [bp-3Eh]@2
  char v8; // [sp+8h] [bp-3Ch]@2
  char v9; // [sp+9h] [bp-3Bh]@2
  int v10; // [sp+1Ch] [bp-28h]@2
  int v11; // [sp+20h] [bp-24h]@2
  int v12; // [sp+24h] [bp-20h]@2
  int v13; // [sp+28h] [bp-1Ch]@2
  int v14; // [sp+30h] [bp-14h]@2
  int v15; // [sp+34h] [bp-10h]@2
  int v16; // [sp+38h] [bp-Ch]@2

  v4 = (int)dword_1007C5D8;
  if ( dword_1007C5D8 )
  {
    sub_10028330(&v7, 0, 0x3Eu);
    v14 = 0x20000;
    v6 = 64;
    v8 = a1;
    v9 = a2;
    v10 = dword_10066B7C[0];
    v11 = dword_10066B7C[1];
    v12 = dword_10066B7C[2];
    v13 = dword_10066B7C[3];
    v16 = a3;
    v15 = a4;
    result = sub_1001EAA2(v4, dword_1007C5D0, dword_1007C5D4, (int)&v6);
  }
  return result;
}
// 1007C5D0: using guessed type int dword_1007C5D0;
// 1007C5D4: using guessed type int dword_1007C5D4;

//----- (1001F860) --------------------------------------------------------
int __stdcall sub_1001F860(int a1)
{
  return a1;
}

//----- (1001F86A) --------------------------------------------------------
int __stdcall sub_1001F86A(char a1, char a2, int a3, int a4)
{
  int result; // eax@2

  if ( (unsigned __int8)a2 <= (unsigned __int8)byte_1007C5CC )
  {
    result = dword_1007C5C8;
    if ( dword_1007C5C8 & 4 )
      result = sub_1001F7ED(a1, a2, a3, a4);
  }
  return result;
}
// 1007C5C8: using guessed type int dword_1007C5C8;
// 1007C5CC: using guessed type char byte_1007C5CC;

//----- (1001F897) --------------------------------------------------------
char __thiscall sub_1001F897(int this, char a2, char a3)
{
  int v3; // edi@1
  int v4; // eax@1
  int v5; // esi@3
  unsigned int v6; // ST00_4@3
  char result; // al@6
  int v8; // [sp+8h] [bp-4h]@1

  v3 = this;
  v4 = **(_DWORD **)(this + 80);
  v8 = **(_DWORD **)(this + 80);
  if ( *(_BYTE *)(this + 96) )
  {
    if ( !a2 )
    {
      v5 = *(_DWORD *)(this + 144);
      v6 = *(_DWORD *)(this + 144);
      *(_BYTE *)(this + 98) = 1;
      sub_1001F255(v4 + 72, v6);
      sub_1001EF07(v8, v5);
    }
  }
  else if ( a2 )
  {
    sub_1001F215(v4 + 72, *(_DWORD *)(this + 144));
  }
  result = a3;
  *(_BYTE *)(v3 + 96) = a2;
  *(_BYTE *)(v3 + 97) = a3;
  return result;
}

//----- (1001F8F7) --------------------------------------------------------
int __thiscall sub_1001F8F7(int this)
{
  unsigned int v1; // edx@1
  unsigned int v2; // esi@1
  int result; // eax@2

  v1 = (unsigned int)(*(_DWORD *)this + 31) >> 5;
  v2 = 0;
  if ( v1 )
  {
    do
    {
      result = *(_DWORD *)(this + 4);
      *(_DWORD *)(result + 4 * v2++) = 0;
    }
    while ( v2 < v1 );
  }
  return result;
}

//----- (1001F914) --------------------------------------------------------
int __userpurge sub_1001F914@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // ecx@1
  int v5; // edi@1
  int *v6; // esi@1
  int v7; // ST08_4@1
  int v8; // eax@1
  int v9; // ST00_4@1
  int v10; // ecx@1

  sub_1000FB4A();
  v5 = v4;
  *(_DWORD *)(a1 - 16) = v4;
  v6 = *(int **)(a1 + 16);
  v4 += 8;
  v7 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(v5 + 4) = v6;
  *(_DWORD *)v4 = 0;
  *(_DWORD *)(v4 + 4) = 0;
  sub_100176BC((void *)v4, v7);
  *(_DWORD *)(a1 - 4) = 0;
  sub_1001A0A1(v5 + 16, 0x1001u);
  v8 = *(_DWORD *)(a1 + 12);
  *(_DWORD *)(v5 + 28) = 0;
  *(_DWORD *)(v5 + 32) = 0;
  *(_DWORD *)(v5 + 36) = 0;
  *(_DWORD *)(v5 + 40) = 0;
  *(_DWORD *)(v5 + 44) = v8;
  v9 = *v6;
  *(_BYTE *)(a1 - 4) = 1;
  sub_10016574((PSLIST_HEADER)(v5 + 56), v9, 256, 0x7FFFFFFF);
  v10 = *(_DWORD *)(v5 + 4);
  *(_DWORD *)v5 = *(_DWORD *)v10;
  *(_DWORD *)(v5 + 48) = *(_DWORD *)(v10 + 184);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1001F991) --------------------------------------------------------
int __thiscall sub_1001F991(PSLIST_HEADER ListHead)
{
  PSLIST_HEADER v1; // edi@1
  int v2; // eax@1
  int v3; // eax@1
  struct _SINGLE_LIST_ENTRY *v4; // ebx@1
  signed int i; // esi@2
  struct _SINGLE_LIST_ENTRY *v6; // esi@4

  v1 = ListHead;
  v2 = (int)InterlockedFlushSList(ListHead);
  sub_1001EF4D(v2);
  v3 = (int)InterlockedFlushSList(v1 + 1);
  sub_1001EF4D(v3);
  sub_1001EF4D((int)v1[2].s.Next.Next);
  v4 = v1[6].s.Next.Next;
  if ( v4 )
  {
    do
    {
      for ( i = 0; i < (signed int)v1[5].s.Next.Next; ++i )
        sub_1001EBC1((int)v4->Next[i].Next);
      v6 = v4[1].Next;
      sub_1000F0A1(v4->Next);
      sub_1000F417(v4);
      v4 = v6;
    }
    while ( v6 );
  }
  return sub_1000F0A1(*(LPVOID *)&v1[6].s.Depth);
}

//----- (1001FA08) --------------------------------------------------------
int __thiscall sub_1001FA08(int this)
{
  int v1; // edi@1

  v1 = this;
  sub_1001F991((PSLIST_HEADER)(this + 56));
  sub_1001B1FA(v1 + 16);
  sub_1000F0A1(*(LPVOID *)(v1 + 24));
  return sub_1000F0A1(*(LPVOID *)(v1 + 12));
}

//----- (1001FA31) --------------------------------------------------------
int __thiscall sub_1001FA31(int this, signed __int32 a2)
{
  int v2; // esi@1
  int v3; // ebx@1
  char v4; // al@1
  int v5; // edx@1
  volatile signed __int32 *v6; // edi@2
  bool v7; // sf@2
  unsigned __int8 v8; // of@2
  volatile signed __int32 *v9; // edx@3
  signed __int32 v10; // eax@3
  int v11; // edi@4
  volatile signed __int32 *v12; // edi@12
  LPVOID v13; // eax@14
  unsigned int v14; // ST0C_4@14
  signed __int32 v15; // ecx@14
  int v16; // eax@15
  int v17; // edx@20
  char v19; // [sp+Ch] [bp-24h]@25
  int v20; // [sp+14h] [bp-1Ch]@24
  int (*v21)(); // [sp+18h] [bp-18h]@24
  int v22; // [sp+1Ch] [bp-14h]@6
  volatile signed __int32 *v23; // [sp+20h] [bp-10h]@2
  signed __int32 v24; // [sp+24h] [bp-Ch]@3
  int v25; // [sp+28h] [bp-8h]@1
  char v26; // [sp+2Fh] [bp-1h]@1

  v2 = this;
  v26 = 0;
  v3 = 0;
  v4 = 0;
  v5 = *(_DWORD *)(this + 48);
  v25 = *(_DWORD *)(this + 48);
  do
  {
    v6 = (volatile signed __int32 *)(v5 + 8);
    v8 = __OFSUB__(*(_DWORD *)(v5 + 8), -1);
    v7 = *(_DWORD *)(v5 + 8) + 1 < 0;
    v23 = (volatile signed __int32 *)(v5 + 8);
    if ( v7 ^ v8 )
      goto LABEL_11;
    v9 = *(volatile signed __int32 **)v5;
    v10 = 0;
    v24 = 0;
    if ( *(_DWORD *)(v2 + 40) <= 0 )
      goto LABEL_10;
    v11 = v3;
    while ( *v9 )
    {
LABEL_8:
      ++v10;
      ++v9;
      ++v11;
      v24 = v10;
      if ( v10 >= *(_DWORD *)(v2 + 40) )
      {
        v6 = v23;
        goto LABEL_10;
      }
    }
    *(_DWORD *)(a2 + 100) = v11;
    v22 = *(_DWORD *)(v2 + 64);
    if ( _InterlockedCompareExchange(v9, a2, 0) )
    {
      v10 = v24;
      goto LABEL_8;
    }
    v3 = v11;
    v26 = 1;
    if ( v11 >= v22 )
      _InterlockedIncrement((volatile signed __int32 *)(v2 + 64));
    v6 = v23;
    _InterlockedCompareExchange(v23, -1, v24);
LABEL_10:
    v5 = v25;
    v4 = v26;
LABEL_11:
    if ( !v4 )
    {
      _InterlockedCompareExchange(v6, -2, -1);
      v3 += *(_DWORD *)(v2 + 40);
      v12 = (volatile signed __int32 *)(v5 + 4);
      if ( !*(_DWORD *)(v5 + 4) && !_InterlockedCompareExchange(v12, 1, 0) )
      {
        v13 = sub_1000F40E(4 * *(_DWORD *)(v2 + 40) | -((unsigned __int64)*(_DWORD *)(v2 + 40) >> 30 != 0));
        v14 = 4 * *(_DWORD *)(v2 + 40);
        v22 = (int)v13;
        sub_10028330(v13, 0, v14);
        v15 = (signed __int32)sub_1000F0A6(0xCu);
        v23 = (volatile signed __int32 *)v15;
        if ( v15 )
        {
          v16 = v22;
          *(_DWORD *)(v15 + 4) = 0;
          *(_DWORD *)(v15 + 8) = -1;
          *(_DWORD *)v15 = v16;
        }
        else
        {
          v15 = 0;
        }
        v17 = *(_DWORD *)(v2 + 60);
        if ( v17 < *(_DWORD *)(v2 + 56) )
        {
          *(_DWORD *)(*(_DWORD *)(v2 + 52) + 4 * v17) = v15;
          ++*(_DWORD *)(v2 + 60);
        }
        _InterlockedExchange(v12, v15);
        v5 = v25;
      }
      if ( *v12 == 1 )
      {
        v20 = 0;
        v21 = sub_10012578;
        do
          sub_10010BDE(&v19);
        while ( *v12 == 1 );
        v5 = v25;
      }
      v4 = v26;
    }
    v5 = *(_DWORD *)(v5 + 4);
    v25 = v5;
  }
  while ( !v4 );
  return v3;
}

//----- (1001FB94) --------------------------------------------------------
int __thiscall sub_1001FB94(void *this, int a2, char a3)
{
  void **v3; // ebx@1
  PSINGLE_LIST_ENTRY v4; // eax@1
  int v5; // edi@2
  void (__thiscall *v6)(_DWORD, _DWORD, _DWORD); // esi@3
  void *v7; // edi@4
  int (__thiscall *v8)(_DWORD, _DWORD, _DWORD); // esi@4
  int v9; // ecx@11
  int v10; // ST00_4@13
  void (__thiscall *v11)(_DWORD, _DWORD, _DWORD); // esi@13
  int v13; // [sp+10h] [bp-4h]@1

  v3 = (void **)this;
  v13 = (int)sub_100178E9();
  v4 = InterlockedPopEntrySList((PSLIST_HEADER)v3 + 7);
  if ( v4 && (v5 = (int)&v4[-47], v4 != (PSINGLE_LIST_ENTRY)188) )
  {
    v6 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v5 + 24);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v5 + 24));
    v6(v5, v3, a2);
  }
  else
  {
    v7 = *v3;
    v8 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)*v3 + 92);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)*v3 + 92));
    v5 = v8(v7, v3, a2);
  }
  if ( a3 )
  {
    *(_BYTE *)(v5 + 172) = 1;
    *(_DWORD *)(v5 + 176) = v13 - 4;
    *(_DWORD *)(v13 - 4 + 164) = v5;
  }
  _InterlockedIncrement((volatile signed __int32 *)v3 + 9);
  sub_1001F255((int)((char *)*v3 + 48), *(_DWORD *)(v5 + 144));
  if ( *((_DWORD *)*v3 + 109) != *((_DWORD *)*v3 + 110) || *((_DWORD *)*v3 + 5) <= 0 )
  {
    sub_1001FA31((int)(v3 + 14), v5);
    sub_1001F29B(v5, 1, 0);
  }
  else
  {
    sub_1001FA31((int)(v3 + 14), v5);
    if ( sub_10019DFC(*v3, 1) )
    {
      if ( v13 )
        v9 = sub_10014379(v13);
      else
        v9 = *((_DWORD *)v3[1] + 2);
      v10 = v9;
      v11 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v5 + 28);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v5 + 28));
      v11(v5, v10, 0);
    }
  }
  return v5;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001FC9B) --------------------------------------------------------
char __thiscall sub_1001FC9B(void *this)
{
  void *v1; // edi@1
  LPVOID v2; // eax@1
  int v3; // esi@2
  char v4; // bl@5

  v1 = this;
  v2 = sub_100178E9();
  if ( v2 )
    v3 = (int)((char *)v2 - 4);
  else
    v3 = 0;
  if ( !(unsigned __int8)sub_1001894D(**(_DWORD **)v1 + 60, *(_DWORD *)v1 + 4)
    || (v4 = 1,
        (1 << (*(_DWORD *)(*(_DWORD *)(v3 + 160) + 144) & 0x1F)) & *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v1 + 8)
                                                                             + 4
                                                                             * (*(_DWORD *)(*(_DWORD *)(v3 + 160) + 144) >> 5))) )
    v4 = 0;
  return v4;
}

//----- (1001FCF1) --------------------------------------------------------
int __thiscall sub_1001FCF1(int this, int a2)
{
  signed int v2; // edi@1
  signed int v3; // esi@1
  int v4; // eax@2
  int result; // eax@3
  int i; // [sp+Ch] [bp-4h]@2

  v2 = *(_DWORD *)(this + 120);
  v3 = 0;
  if ( v2 <= 0 )
  {
LABEL_7:
    result = 0;
  }
  else
  {
    v4 = this + 56;
    for ( i = this + 56; ; v4 = i )
    {
      result = sub_10016C85(v4, v3);
      if ( result )
      {
        if ( *(_DWORD *)(result + 88) == a2 )
          break;
      }
      ++v3;
      if ( v3 >= v2 )
        goto LABEL_7;
    }
  }
  return result;
}

//----- (1001FD30) --------------------------------------------------------
int __thiscall sub_1001FD30(void *this, int a2)
{
  void *v2; // ebx@1
  int result; // eax@2
  signed int v4; // esi@5

  v2 = this;
  if ( (*(_DWORD *)a2 & 0xFFFFFFF) == 3 )
  {
    if ( *(_DWORD *)(a2 + 4) == *(_DWORD *)(*(_DWORD *)this + 372) )
    {
      result = *(_DWORD *)(a2 + 12);
    }
    else
    {
      v4 = 0;
      if ( *((_DWORD *)this + 30) <= 0 )
      {
LABEL_9:
        result = 0;
      }
      else
      {
        while ( 1 )
        {
          result = sub_10016C85((int)((char *)v2 + 56), v4);
          if ( result )
          {
            if ( *(_DWORD *)(result + 140) == *(_DWORD *)(a2 + 8) )
              break;
          }
          ++v4;
          if ( v4 >= *((_DWORD *)v2 + 30) )
            goto LABEL_9;
        }
      }
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1001FD8D) --------------------------------------------------------
char __thiscall sub_1001FD8D(void *this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  char v7; // bl@1
  void *v8; // esi@1
  int v9; // eax@2
  signed int v10; // edi@4
  int v11; // eax@5

  v7 = 1;
  v8 = this;
  if ( (a3 & 0xFFFFFFF) != 3 || (v9 = sub_1001FD30(this, (int)&a3)) == 0 || !sub_1001EE72(v9, a2, a7, 1) )
  {
    v10 = 0;
    if ( *((_DWORD *)v8 + 30) <= 0 )
    {
LABEL_8:
      v7 = 0;
    }
    else
    {
      while ( 1 )
      {
        v11 = sub_10016C85((int)((char *)v8 + 56), v10);
        if ( v11 )
        {
          if ( sub_1001EE72(v11, a2, a7, 1) )
            break;
        }
        ++v10;
        if ( v10 >= *((_DWORD *)v8 + 30) )
          goto LABEL_8;
      }
    }
  }
  return v7;
}

//----- (1001FDFD) --------------------------------------------------------
int __thiscall sub_1001FDFD(void *this, int a2)
{
  void *v2; // ebx@1
  int v3; // ST0C_4@1
  int v4; // edi@1
  int (__thiscall *v5)(_DWORD); // esi@1
  int v6; // eax@1

  v2 = this;
  v3 = (int)this;
  v4 = *(_DWORD *)this;
  v5 = *(int (__thiscall **)(_DWORD))(**(_DWORD **)this + 4);
  j_nullsub_1(v5);
  v6 = v5(v4);
  sub_100249D8(a2, 2, *((_DWORD *)v2 + 12), v6, v3);
  return a2;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1001FE30) --------------------------------------------------------
#error "1001FE6B: call analysis failed (funcsize=19)"

//----- (1001FE73) --------------------------------------------------------
signed __int32 __thiscall sub_1001FE73(void *this, char a2)
{
  void *i; // esi@1
  int v3; // edi@2
  int v4; // ecx@2
  signed __int32 v5; // ebx@5

  for ( i = this; ; *(_DWORD *)i = v3 + 1 )
  {
    if ( *(_DWORD *)i >= *((_DWORD *)i + 1) )
      return 0;
    v3 = *(_DWORD *)i;
    v4 = *(_DWORD *)i & *((_DWORD *)i + 2);
    if ( *(_BYTE *)(*((_DWORD *)i + 3) + 4 * v4) & 1 )
    {
      if ( !a2 && sub_1001FC9B((void *)(*((_DWORD *)i + 4) + 8 * v4)) )
        return 0;
    }
    v5 = _InterlockedExchange((volatile signed __int32 *)(*((_DWORD *)i + 3) + 4 * (*((_DWORD *)i + 2) & v3)), 0);
    if ( v5 & 1 )
    {
      v5 &= 0xFFFFFFFE;
      if ( !sub_1001EE2B(*((_DWORD *)i + 4) + 8 * (*((_DWORD *)i + 2) & v3), 0) )
        continue;
    }
    break;
  }
  if ( v5 )
    *(_DWORD *)i = v3 + 1;
  return v5;
}

//----- (1001FEF1) --------------------------------------------------------
int __thiscall sub_1001FEF1(int this)
{
  int v1; // esi@1

  v1 = this;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = sub_1001224A(0);
  return v1;
}

//----- (1001FF06) --------------------------------------------------------
void __thiscall sub_1001FF06(void *this)
{
  void *v1; // esi@1
  void *v2; // eax@2

  v1 = this;
  if ( *(_DWORD *)this )
  {
    do
    {
      v2 = (void *)sub_1001224A(*((_DWORD *)v1 + 1));
      *((_DWORD *)v1 + 1) = *(_DWORD *)v2;
      sub_1000F0A1(v2);
    }
    while ( (*(_DWORD *)v1)-- != 1 );
  }
}

//----- (1001FF5A) --------------------------------------------------------
int __thiscall sub_1001FF5A(int this)
{
  int v1; // esi@1
  int result; // eax@1
  int v3; // ecx@2

  v1 = this;
  result = sub_1001224A(*(_DWORD *)(this + 4));
  if ( result )
  {
    v3 = *(_DWORD *)result;
    --*(_DWORD *)v1;
    *(_DWORD *)(v1 + 4) = v3;
  }
  return result;
}

//----- (1001FF73) --------------------------------------------------------
int __thiscall sub_1001FF73(void *this, int a2)
{
  void *v2; // ebx@1
  SIZE_T v3; // esi@1
  int v4; // eax@1
  int v5; // edi@1
  LPVOID v6; // esi@2

  v2 = this;
  v3 = a2 + 4;
  v4 = sub_10020024(a2 + 4);
  v5 = v4;
  if ( v4 == -1 )
    goto LABEL_4;
  v6 = (LPVOID)sub_1001FF5A((int)((char *)v2 + 8 * v4 + 4));
  if ( !v6 )
  {
    v3 = dword_10066CA8[v5];
LABEL_4:
    v6 = sub_1000F40E(v3);
  }
  *(_DWORD *)v6 = sub_1001224A(v5);
  return (int)((char *)v6 + 4);
}
// 10066CA8: using guessed type int dword_10066CA8[];

//----- (1001FFC3) --------------------------------------------------------
char __thiscall sub_1001FFC3(int this, int a2)
{
  int v2; // esi@1
  int v3; // eax@2
  char result; // al@2

  v2 = this;
  if ( *(_DWORD *)this >= 32 )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)a2 = *(_DWORD *)(this + 4);
    v3 = sub_1001224A(a2);
    ++*(_DWORD *)v2;
    *(_DWORD *)(v2 + 4) = v3;
    result = 1;
  }
  return result;
}

//----- (1001FFED) --------------------------------------------------------
char __thiscall sub_1001FFED(void *this, int a2)
{
  int v2; // esi@1
  void *v3; // edi@1
  int v4; // eax@1
  char result; // al@2

  v2 = a2 - 4;
  v3 = this;
  v4 = sub_1001224A(*(_DWORD *)(a2 - 4));
  if ( v4 == -1 || (result = sub_1001FFC3((int)((char *)v3 + 8 * v4 + 4), v2)) == 0 )
    result = sub_1000F0A1((LPVOID)v2);
  return result;
}

//----- (10020024) --------------------------------------------------------
int __cdecl sub_10020024(int a1)
{
  unsigned int v1; // edx@1
  int result; // eax@2
  signed int v3; // edx@3
  signed int v4; // ecx@5

  v1 = (a1 + 7) & 0xFFFFFFF8;
  if ( v1 <= 0x1000 )
  {
    v3 = v1 >> 3;
    if ( v3 > 32 )
    {
      v4 = 5;
      if ( (signed int)(v3 & 0xFFFFFFE0) > 0 )
      {
        do
          ++v4;
        while ( v3 >> v4 > 0 );
      }
      result = ((~((1 << (v4 - 5)) - 1) & ((1 << (v4 - 5)) - 1 + v3)) >> (v4 - 5)) + 16 * (v4 - 5) - 1;
    }
    else
    {
      result = v3 - 1;
    }
  }
  else
  {
    result = -1;
  }
  return result;
}

//----- (10020079) --------------------------------------------------------
int __cdecl sub_10020079(int a1)
{
  SIZE_T v1; // esi@1
  int v2; // eax@1
  int v3; // edi@1
  LPVOID v4; // esi@3

  v1 = a1 + 4;
  v2 = sub_10020024(a1 + 4);
  v3 = v2;
  if ( v2 != -1 )
    v1 = dword_10066CA8[v2];
  v4 = sub_1000F40E(v1);
  *(_DWORD *)v4 = sub_1001224A(v3);
  return (int)((char *)v4 + 4);
}
// 10066CA8: using guessed type int dword_10066CA8[];

//----- (100200B2) --------------------------------------------------------
void *__thiscall sub_100200B2(void *this, int a2)
{
  void *v2; // edi@1
  void *result; // eax@1

  v2 = this;
  *(_DWORD *)this = off_10066E34;
  sub_1001A0F8(a2, 0);
  *((_BYTE *)v2 + 179) &= 0xFCu;
  result = v2;
  *(_DWORD *)v2 = off_10066E4C;
  *((_DWORD *)v2 + 1) = off_10066E74;
  *((_DWORD *)v2 + 39) = 0;
  *((_DWORD *)v2 + 40) = 0;
  *((_DWORD *)v2 + 41) = 0;
  *((_DWORD *)v2 + 42) = 0;
  *((_DWORD *)v2 + 43) = 0;
  *((_BYTE *)v2 + 176) = 0;
  *((_BYTE *)v2 + 178) = 0;
  *((_DWORD *)v2 + 57) = 0;
  *((_DWORD *)v2 + 7) = 0;
  *((_BYTE *)v2 + 236) = 1;
  return result;
}
// 1001A0F8: using guessed type _DWORD __stdcall sub_1001A0F8(_DWORD, _DWORD);
// 10066E34: using guessed type int (*off_10066E34[5])();
// 10066E4C: using guessed type int (*off_10066E4C[3])();
// 10066E74: using guessed type int (*off_10066E74[5])();

//----- (1002012B) --------------------------------------------------------
void *__thiscall sub_1002012B(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_1006674C;
  return v2;
}
// 1006674C: using guessed type int (__thiscall *off_1006674C)(LPVOID lpMem, char);

//----- (10020146) --------------------------------------------------------
void *__thiscall sub_10020146(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10066740;
  return v2;
}
// 10066740: using guessed type int (__thiscall *off_10066740)(LPVOID lpMem, char);

//----- (10020161) --------------------------------------------------------
void *__thiscall sub_10020161(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10066794;
  return v2;
}
// 10066794: using guessed type int (__thiscall *off_10066794)(LPVOID lpMem, char);

//----- (1002017C) --------------------------------------------------------
void *__thiscall sub_1002017C(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10066788;
  return v2;
}
// 10066788: using guessed type int (__thiscall *off_10066788)(LPVOID lpMem, char);

//----- (10020197) --------------------------------------------------------
int __thiscall sub_10020197(int this)
{
  int v1; // ebp@0
  void *v2; // esi@1

  v2 = (void *)(this + 4);
  *(_DWORD *)this = off_10066E4C;
  *(_DWORD *)(this + 4) = off_10066E74;
  sub_100205D9(this, v1);
  return sub_1001A236(v2);
}
// 10066E4C: using guessed type int (*off_10066E4C[3])();
// 10066E74: using guessed type int (*off_10066E74[5])();

//----- (100201E5) --------------------------------------------------------
int __thiscall sub_100201E5(void *this)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)this;
  return sub_1001AA0D();
}

//----- (1002021D) --------------------------------------------------------
void *__thiscall sub_1002021D(void *this, char a2)
{
  void *v2; // esi@1

  v2 = (char *)this - 4;
  sub_10020197((int)((char *)this - 4));
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (1002024A) --------------------------------------------------------
int __thiscall sub_1002024A(void *this, char a2, int a3, int a4, int a5)
{
  int v5; // ebx@1
  LPVOID v6; // eax@1
  int v7; // edx@1
  int v8; // edi@1
  int v9; // edi@2
  int (__thiscall *v10)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@2
  int result; // eax@2
  int v12; // esi@10
  void *v13; // esi@13
  int v14; // edi@13
  int v15; // esi@15
  int v16; // [sp-14h] [bp-3Ch]@2
  int v17; // [sp-10h] [bp-38h]@2
  int v18; // [sp-Ch] [bp-34h]@2
  int v19; // [sp-8h] [bp-30h]@2
  int v20; // [sp-4h] [bp-2Ch]@2
  char v21; // [sp+Ch] [bp-1Ch]@13
  LPVOID v22; // [sp+20h] [bp-8h]@1
  int v23; // [sp+24h] [bp-4h]@10

  v5 = (int)this;
  v6 = sub_100178E9();
  v7 = *(_DWORD *)(v5 + 32);
  v8 = (int)v6;
  v22 = v6;
  if ( *(_DWORD *)(v7 + 440) > 0 )
  {
    sub_10019F0A((int)&v17, (int)&a2);
    v9 = *(_DWORD *)(v5 + 32);
    v16 = v5;
    v10 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 60);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v9 + 60));
    result = v10(v9, v5, v17, v18, v19, v20);
    if ( (_BYTE)result )
      return result;
    v8 = (int)v22;
  }
  if ( !v8 || *(_BYTE *)(v8 + 76) || *(_DWORD *)(v5 + 32) != sub_10018398(v8) )
    goto LABEL_19;
  v22 = (LPVOID)v8;
  sub_1001AA0D();
  if ( *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v5 + 28) + 256) + 48) & 2
    || !((1 << (*(_DWORD *)(*(_DWORD *)(v8 + 156) + 144) & 0x1F)) & *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v5 + 28) + 32)
                                                                              + 4
                                                                              * (*(_DWORD *)(*(_DWORD *)(v8 + 156) + 144) >> 5)))
    || *(_DWORD *)(*(_DWORD *)(v8 + 156) + 20) - *(_DWORD *)(*(_DWORD *)(v8 + 156) + 16) >= *(_WORD *)(*(_DWORD *)(v5 + 32) + 16) )
  {
    sub_1001AA0D();
LABEL_19:
    sub_10019F0A((int)&v17, (int)&a2);
    return sub_10022170(*(void **)(v5 + 28), v5, v17, v18, v19, v20);
  }
  v23 = *(_DWORD *)(v5 + 28);
  v12 = *(_DWORD *)(v23 + 256);
  if ( sub_1001AAD4(v8) != v12 )
    *(_DWORD *)(v5 + 228) = 1;
  sub_10020E11(*(_DWORD *)(v8 + 156) + 16, v5);
  if ( *(_DWORD *)(*(_DWORD *)(v5 + 32) + 436) <= 0 )
  {
    v14 = v23;
  }
  else
  {
    sub_10019F0A((int)&v21, (int)&a2);
    v13 = *(void **)(v5 + 32);
    v20 = 11;
    sub_10019F0A((int)&v16, (int)&v21);
    v14 = v23;
    sub_100197F0(v13, v23, v16, v17, v18, v19, v20);
  }
  v15 = *(_DWORD *)(v14 + 256);
  if ( sub_1001AAD4((int)v22) != v15 )
    *(_DWORD *)(v5 + 228) = 0;
  return sub_1001AA0D();
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100203D7) --------------------------------------------------------
int __userpurge sub_100203D7@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // esi@1
  int v4; // ecx@1
  int v5; // eax@1

  sub_1000FB4A();
  v3 = v2;
  *(_DWORD *)(a1 - 16) = v2 != 4 ? v2 : 0;
  sub_1001AA0D();
  v4 = *(_DWORD *)(v3 + 156);
  *(_DWORD *)(a1 - 4) = 0;
  v5 = sub_1001F064(v4, a1);
  sub_1001FF73((void *)v5, *(_DWORD *)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 1;
  sub_1001AA0D();
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1002042B) --------------------------------------------------------
int __thiscall sub_1002042B(void *this)
{
  void *v1; // ebx@1
  int v2; // edi@1
  int (__thiscall *v3)(_DWORD); // esi@1
  int v4; // eax@1
  int v5; // edi@8
  int v6; // esi@16
  int v7; // eax@17
  void (__thiscall *v8)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@17
  int v10; // [sp-10h] [bp-24h]@17
  int v11; // [sp-Ch] [bp-20h]@17
  int v12; // [sp-8h] [bp-1Ch]@17
  int v13; // [sp-4h] [bp-18h]@1
  char v14; // [sp+12h] [bp-2h]@8
  char v15; // [sp+13h] [bp-1h]@8

  v1 = this;
  sub_1001AA0D();
  v2 = *((_DWORD *)v1 + 7);
  v13 = *((_DWORD *)v1 + 2);
  v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 4));
  v4 = v3(v2);
  sub_1001B15B(3, 4, v4, v13);
  if ( *(_BYTE *)(*((_DWORD *)v1 + 39) + 173) )
  {
    if ( _InterlockedIncrement((volatile signed __int32 *)v1 + 11) != 1
      || _InterlockedCompareExchange((volatile signed __int32 *)v1 + 11, 2, 1) != 1 )
      v13 = 2;
    else
      v13 = 1;
    sub_100210BC((int)((char *)v1 - 4), v13);
  }
  else if ( _InterlockedIncrement((volatile signed __int32 *)v1 + 11) == 1 )
  {
    v15 = 0;
    v14 = 0;
    v5 = sub_10020851((int)((char *)v1 - 4), (int)&v15, (int)&v14);
    if ( _InterlockedCompareExchange((volatile signed __int32 *)v1 + 11, 2, 1) == 1 )
    {
      if ( v15 )
        sub_10020DA1(v5, *((_DWORD *)v1 + 6), 0, 0);
      sub_100211DB((int)((char *)v1 - 4), v5, 1);
    }
    else if ( v5 )
    {
      if ( v15 )
      {
        sub_100190B3(*((_DWORD *)v1 + 7), v5, 1);
      }
      else
      {
        if ( v14 )
        {
          v6 = *(_DWORD *)(v5 + 168);
          sub_1001AA0D();
          sub_10023E63(v6, v5 + 4);
          sub_1001AA0D();
        }
        v7 = sub_10014379(v5 + 4);
        sub_10019F0A((int)&v10, v7 + 12);
        v8 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v5 + 20);
        j_nullsub_1(*(_DWORD *)(*(_DWORD *)v5 + 20));
        v8(v5, v10, v11, v12, v13);
      }
    }
  }
  return sub_1001AA0D();
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10020565) --------------------------------------------------------
char __thiscall sub_10020565(int this)
{
  int v1; // ebp@0
  int v2; // edi@1
  int v3; // ecx@2
  LPVOID v4; // eax@2
  int v5; // esi@4
  signed __int32 v7; // [sp+8h] [bp-8h]@2
  int v8; // [sp+Ch] [bp-4h]@3

  v2 = this;
  if ( *(_DWORD *)(this + 160) )
  {
    *(_BYTE *)(this + 176) = 1;
    v3 = *(_DWORD *)(this + 160);
    v7 = 0;
    LOBYTE(v4) = sub_1001EE72(v3, (int)&v7, 15, 1);
    if ( (_BYTE)v4 )
      LOBYTE(v4) = sub_1001EFAA(v8, v7, 0, 0);
  }
  else
  {
    v5 = this + 4;
    v4 = sub_100178E9();
    if ( v4 == (LPVOID)v5 )
    {
      *(_BYTE *)(v2 + 176) = 1;
    }
    else
    {
      sub_10020F5A(v2);
      sub_100205D9(v2, v1);
      LOBYTE(v4) = sub_10017774(*(_DWORD *)(v2 + 32));
    }
  }
  return (char)v4;
}

//----- (100205D9) --------------------------------------------------------
void __usercall sub_100205D9(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1

  v2 = a1;
  sub_1001A786(a1 + 4, a2);
  sub_10021071(v2, 0, 0);
}

//----- (100205F1) --------------------------------------------------------
int __usercall sub_100205F1@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1

  v2 = a1;
  sub_1001AA0D();
  sub_100205D9(v2, a2);
  return sub_10017774(*(_DWORD *)(v2 + 32));
}

//----- (1002060C) --------------------------------------------------------
#error "1002077B: call analysis failed (funcsize=118)"

//----- (100207A1) --------------------------------------------------------
int __thiscall sub_100207A1(int this, int a2)
{
  int v2; // ebp@0
  int v3; // esi@1

  v3 = this;
  sub_10026008((void *)a2, this);
  ++*(_DWORD *)(*(_DWORD *)(v3 + 160) + 108);
  sub_1001AA0D();
  sub_10024FC7(a2);
  sub_1001AA0D();
  return sub_1001AD97(v3 + 4, v2);
}

//----- (100207DE) --------------------------------------------------------
char __usercall sub_100207DE@<al>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // edi@1
  int v3; // ST00_4@3
  void (__cdecl *v4)(_DWORD); // esi@3
  int v5; // esi@4
  int v6; // ecx@4
  char result; // al@5

  v2 = a1;
  if ( *(_DWORD *)(a1 + 168) )
  {
    sub_1001AA0D();
    if ( *(_BYTE *)(v2 + 177) )
    {
      v3 = *(_DWORD *)(v2 + 168);
      v4 = *(void (__cdecl **)(_DWORD))(v3 + 12);
      j_nullsub_1(*(_DWORD *)(v3 + 12));
      v4(v3);
      *(_DWORD *)(v2 + 168) = 0;
    }
    else
    {
      v5 = *(_DWORD *)(v2 + 168);
      sub_1002605D(*(_DWORD *)(v2 + 168));
      v6 = *(_DWORD *)(v2 + 32);
      *(_DWORD *)(v2 + 168) = 0;
      sub_100190FC(v6, v5);
    }
    sub_1001AA0D();
    sub_1001AD97(v2 + 4, a2);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10020851) --------------------------------------------------------
int __thiscall sub_10020851(int this, int a2, int a3)
{
  int v3; // ebp@0
  int v4; // ebx@1
  int v5; // edi@1
  int v6; // edx@1
  int (__thiscall *v7)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@1
  int v8; // ST04_4@1
  int v9; // ecx@3
  int v10; // ebx@3
  int v11; // edi@6
  int v12; // ST04_4@6
  int (__thiscall *v13)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@6
  int v14; // edi@10
  int v15; // ST04_4@10
  int (__thiscall *v16)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@10
  int v17; // ecx@13
  int v19; // [sp+Ch] [bp-10h]@1
  int v20; // [sp+14h] [bp-8h]@1
  int v21; // [sp+18h] [bp-4h]@1

  v4 = this;
  v21 = this;
  v5 = *(_DWORD *)(this + 160);
  v6 = *(_DWORD *)(this + 28);
  v19 = 0;
  v20 = 0;
  v7 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(v5 + 72);
  v8 = v6;
  j_nullsub_1(*(_DWORD *)(v5 + 72));
  if ( !(unsigned __int8)v7(v5 + 40, &v19, v8, 0, 25) )
  {
    v17 = *(_DWORD *)(v4 + 32);
    v10 = sub_10017EE7(v3, 1);
    *(_BYTE *)a2 = v10 != 0;
    return v10;
  }
  if ( v19 == 1 )
    return v20;
  sub_1001AA0D();
  v9 = *(_DWORD *)(v4 + 32);
  v10 = sub_10017EE7(v3, 1);
  sub_1001AA0D();
  if ( !v10 )
  {
    v14 = *(_DWORD *)(v21 + 160);
    v15 = *(_DWORD *)(v21 + 28);
    v16 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(v14 + 72);
    j_nullsub_1(*(_DWORD *)(v14 + 72));
    if ( !(unsigned __int8)v16(v14 + 40, &v19, v15, 0, 1) )
      return v10;
    return sub_10024B36(&v19);
  }
  if ( !(unsigned __int8)sub_100251B6((int)&v19) )
  {
    v11 = *(_DWORD *)(v21 + 160);
    v12 = *(_DWORD *)(v21 + 28);
    v13 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(v11 + 72);
    j_nullsub_1(*(_DWORD *)(v11 + 72));
    if ( !(unsigned __int8)v13(v11 + 40, &v19, v12, 0, 7) )
    {
      *(_BYTE *)a2 = 1;
      return v10;
    }
    if ( v19 == 1 )
    {
      sub_100190B3(*(_DWORD *)(v21 + 32), v10, 1);
      return sub_10024B36(&v19);
    }
  }
  *(_BYTE *)a3 = v19 == 4;
  sub_10024B83((int)&v19, v10);
  return v10;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10020980) --------------------------------------------------------
int __thiscall sub_10020980(void *this, int a2)
{
  int v2; // ebp@0
  void *v3; // esi@1
  int v4; // eax@1

  v3 = this;
  sub_1001AA0D();
  v4 = sub_1001F064(*((_DWORD *)v3 + 39), v2);
  sub_1001FFED((void *)v4, a2);
  return sub_1001AA0D();
}

//----- (100209AC) --------------------------------------------------------
signed __int32 __thiscall sub_100209AC(int this, signed __int32 a2)
{
  signed __int32 v2; // esi@1

  v2 = 0;
  if ( a2
    && a2 == *(_DWORD *)(this + 164)
    && _InterlockedCompareExchange((volatile signed __int32 *)(this + 164), 0, a2) == a2 )
    v2 = a2;
  return v2;
}

//----- (100209DA) --------------------------------------------------------
int __thiscall sub_100209DA(int this)
{
  return *(_DWORD *)(this + 12);
}

//----- (100209DE) --------------------------------------------------------
int __thiscall sub_100209DE(void *this)
{
  return sub_100209DA((int)((char *)this - 4));
}

//----- (100209E6) --------------------------------------------------------
int __thiscall sub_100209E6(int this)
{
  return *(_DWORD *)(this + 156);
}

//----- (100209ED) --------------------------------------------------------
int __thiscall sub_100209ED(int this)
{
  int v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = *(_DWORD *)(this + 32);
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 52);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 52));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10020A05) --------------------------------------------------------
signed int __thiscall sub_10020A05(void *this)
{
  void *v1; // esi@1
  signed int v2; // edi@2

  v1 = this;
  sub_1001AA0D();
  if ( *((_DWORD *)v1 + 39) )
    v2 = *(_DWORD *)(*((_DWORD *)v1 + 39) + 136);
  else
    v2 = -1;
  sub_1001AA0D();
  return v2;
}

//----- (10020A34) --------------------------------------------------------
#error "10020BA4: call analysis failed (funcsize=134)"

//----- (10020BAC) --------------------------------------------------------
BOOL __thiscall sub_10020BAC(int this)
{
  return *(_DWORD *)(this + 44) == 2;
}

//----- (10020BB8) --------------------------------------------------------
char __usercall sub_10020BB8@<al>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1
  char result; // al@7

  v2 = a1;
  if ( *(_BYTE *)(a1 + 178) || !*(_BYTE *)(*(_DWORD *)(a1 + 160) + 173) )
  {
    result = 0;
  }
  else
  {
    if ( *(_DWORD *)(a1 + 172) )
      sub_1001F215(*(_DWORD *)(a1 + 32) + 60, *(_DWORD *)(*(_DWORD *)(a1 + 160) + 144));
    *(_DWORD *)(v2 + 172) = 0;
    if ( sub_100210BC(v2, 0) )
      sub_100205F1(v2, a2);
    result = 1;
  }
  return result;
}

//----- (10020C16) --------------------------------------------------------
int __thiscall sub_10020C16(void *this)
{
  int v1; // edi@1
  int v2; // eax@1
  int v3; // esi@1
  int v4; // ecx@3
  int (__thiscall *v5)(_DWORD); // esi@4
  int v6; // eax@4
  int v7; // ST08_4@5
  void (__thiscall *v8)(_DWORD, _DWORD); // esi@5
  void (__thiscall *v9)(_DWORD, _DWORD); // esi@6
  void (__thiscall *v10)(_DWORD, _DWORD, _DWORD); // esi@7
  int v12; // [sp+Ch] [bp-18h]@3
  int v13; // [sp+10h] [bp-14h]@1
  int v14; // [sp+14h] [bp-10h]@3
  int v15; // [sp+18h] [bp-Ch]@3
  int v16; // [sp+1Ch] [bp-8h]@3
  char v17; // [sp+22h] [bp-2h]@1
  char v18; // [sp+23h] [bp-1h]@1

  v1 = (int)this;
  sub_1001AA0D();
  v18 = 0;
  v17 = 0;
  v2 = sub_10020851(v1, (int)&v18, (int)&v17);
  v3 = v2;
  v13 = v2;
  if ( v18 )
    sub_10020DA1(v2, *(_DWORD *)(v1 + 28), 0, 0);
  sub_1001AA0D();
  v4 = *(_DWORD *)(v1 + 160);
  v12 = *(_DWORD *)(v1 + 32);
  *(_DWORD *)(v1 + 160) = 0;
  v16 = v4;
  v14 = *(_DWORD *)(v1 + 156);
  v15 = v3;
  if ( !v3 )
  {
    v5 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 4);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 4));
    v6 = v5(v16);
    v3 = v13;
    v15 = v6;
  }
  _InterlockedExchange((volatile signed __int32 *)(v1 + 44), 1);
  v7 = v3;
  v8 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v16 + 16);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v16 + 16));
  v8(v16, v7);
  if ( v15 )
  {
    v10 = *(void (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v14 + 4);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v14 + 4));
    v10(v14, v15, 2);
  }
  else
  {
    sub_1001F29B(v16, 4, 1);
    sub_1001778F(v12);
    v9 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v14 + 8);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v14 + 8));
    v9(v14, 2);
  }
  sub_1001AA0D();
  return sub_1001AA0D();
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10020D1A) --------------------------------------------------------
void __thiscall sub_10020D1A(int this, char a2)
{
  int v2; // ebx@1
  int v3; // edi@3
  void (__thiscall *v4)(_DWORD); // esi@3
  int v5; // eax@4
  int v6; // eax@5
  int v7; // eax@6
  char v8; // [sp+4h] [bp-Ch]@9

  v2 = this;
  if ( a2 )
  {
    ++*(_DWORD *)(this + 20);
    if ( *(_DWORD *)(this + 20) == 1 )
    {
      sub_1001AA0D();
      v3 = *(_DWORD *)(v2 + 156);
      v4 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 32);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 32));
      v4(v3);
      sub_1001AA0D();
    }
  }
  else
  {
    v5 = *(_DWORD *)(this + 20);
    if ( !v5 )
    {
      sub_10019F9E((int)&v8);
      sub_10027494((int)&v8, (int)&unk_100766A0);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_10020DA1);
    }
    v6 = v5 - 1;
    *(_DWORD *)(this + 20) = v6;
    if ( !v6 )
    {
      v7 = sub_100209AC(this - 4, *(_DWORD *)(this + 160));
      if ( v7 )
        sub_1001F30B(v7);
    }
  }
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10020DA1) --------------------------------------------------------
int __thiscall sub_10020DA1(int this, int a2, int a3, char a4)
{
  int result; // eax@1

  result = a2;
  *(_BYTE *)(this + 236) = 0;
  *(_DWORD *)(this + 28) = a2;
  if ( a3 )
  {
    if ( a4 )
    {
      result = *(_DWORD *)(a2 + 256);
      if ( !(*(_BYTE *)(result + 48) & 4) )
        _InterlockedIncrement((volatile signed __int32 *)(result + 20));
      *(_BYTE *)(this + 177) = 1;
    }
    else
    {
      *(_BYTE *)(this + 177) = 0;
    }
    *(_DWORD *)(this + 168) = a3;
  }
  else
  {
    result = *(_DWORD *)(a2 + 256);
    if ( !(*(_BYTE *)(result + 48) & 4) )
      _InterlockedIncrement((volatile signed __int32 *)(result + 20));
  }
  return result;
}

//----- (10020DFA) --------------------------------------------------------
int __thiscall sub_10020DFA(int this, int a2)
{
  int result; // eax@1

  *(_DWORD *)(this + 160) = a2;
  result = this + 44;
  _InterlockedExchange((volatile signed __int32 *)(this + 44), 0);
  return result;
}

//----- (10020E11) --------------------------------------------------------
int __thiscall sub_10020E11(int this, int a2)
{
  int v2; // edi@1
  int v3; // esi@1
  int result; // eax@2

  v2 = *(_DWORD *)(this + 4);
  v3 = *(_DWORD *)(this + 8);
  if ( v2 >= v3 + *(_DWORD *)this )
  {
    result = sub_10020A34(a2, 0, 0);
  }
  else
  {
    *(_DWORD *)(*(_DWORD *)(this + 12) + 4 * (v2 & v3)) = a2;
    result = v2 + 1;
    *(_DWORD *)(this + 4) = v2 + 1;
  }
  return result;
}
// 10020A34: using guessed type _DWORD __stdcall sub_10020A34(_DWORD, _DWORD, _DWORD);

//----- (10020E52) --------------------------------------------------------
void __thiscall sub_10020E52(int this)
{
  int v1; // edi@1
  int v2; // ecx@2
  void (__thiscall *v3)(_DWORD); // esi@4
  int v4; // [sp+4h] [bp-8h]@2

  v1 = this;
  if ( *(_BYTE *)(this + 178) )
  {
    v2 = *(_DWORD *)(this + 160);
    v4 = 0;
    if ( !sub_1001EE72(v2, (int)&v4, 15, 1) && !(unsigned __int8)sub_1001EF2C(*(_DWORD *)(v1 + 160), v1) )
    {
      do
      {
        v3 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 32);
        j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 32));
        v3(v1);
      }
      while ( !(unsigned __int8)sub_1001EF2C(*(_DWORD *)(v1 + 160), v1) );
    }
    *(_BYTE *)(v1 + 178) = 0;
  }
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10020EBC) --------------------------------------------------------
int __thiscall sub_10020EBC(void *this)
{
  int v1; // esi@1

  v1 = (int)this;
  sub_1001AA0D();
  sub_100210BC(v1, 3);
  return sub_1001AA0D();
}

//----- (10020EDB) --------------------------------------------------------
void __usercall sub_10020EDB(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1

  v2 = a1;
  sub_1001AD97(a1 + 4, a2);
  sub_10021071(v2, 0, 0);
  *(_DWORD *)(v2 + 72) = 0;
  *(_BYTE *)(v2 + 236) = 1;
}

//----- (10020EFE) --------------------------------------------------------
int __thiscall sub_10020EFE(int this, int a2, int a3, int a4)
{
  int v4; // edi@1
  int (__thiscall *v5)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@1

  v4 = this + 40;
  v5 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(this + 72);
  j_nullsub_1(*(_DWORD *)(this + 72));
  return v5(v4, a2, a3, a4, 7);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10020F25) --------------------------------------------------------
int __thiscall sub_10020F25(int this, int a2)
{
  int result; // eax@1
  char v3; // [sp+0h] [bp-Ch]@3

  result = a2;
  if ( !a2 )
  {
    sub_1000D988(&v3, (int)"pThreadProxy");
    sub_10027494((int)&v3, (int)&unk_10075484);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10020F5A);
  }
  *(_DWORD *)(this + 156) = a2;
  return result;
}

//----- (10020F5A) --------------------------------------------------------
char __thiscall sub_10020F5A(int this)
{
  int v1; // esi@1
  char result; // al@3
  char v3; // [sp+4h] [bp-10h]@3
  int v4; // [sp+Ch] [bp-8h]@2
  void (*v5)(); // [sp+10h] [bp-4h]@2

  v1 = this;
  if ( !*(_DWORD *)(this + 44) )
  {
    v4 = 0;
    v5 = sub_1001253A;
    do
      result = sub_10010BDE(&v3);
    while ( !*(_DWORD *)(v1 + 44) );
  }
  return result;
}

//----- (10020F87) --------------------------------------------------------
char __cdecl sub_10020F87(int a1, int a2)
{
  char result; // al@3
  char v3; // [sp+8h] [bp-10h]@3
  int v4; // [sp+10h] [bp-8h]@2
  void (*v5)(); // [sp+14h] [bp-4h]@2

  if ( *(_DWORD *)a1 != a2 )
  {
    v4 = 0;
    v5 = sub_1001253A;
    do
      result = sub_10010BDE(&v3);
    while ( *(_DWORD *)a1 != a2 );
  }
  return result;
}

//----- (10020FB6) --------------------------------------------------------
int __thiscall sub_10020FB6(void *this)
{
  void *v1; // ebx@1
  int v2; // edi@1
  int v3; // ST0C_4@1
  int (__thiscall *v4)(_DWORD); // esi@1
  int v5; // eax@1
  int v6; // edi@3
  int v7; // edx@3
  int (__thiscall *v8)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@3
  int v9; // ST04_4@3
  int result; // eax@6
  int v11; // edi@7
  int (__thiscall *v12)(_DWORD); // esi@7
  int v13; // [sp+Ch] [bp-10h]@3
  int v14; // [sp+14h] [bp-8h]@3
  int v15; // [sp+18h] [bp-4h]@1

  v15 = 0;
  v1 = this;
  sub_1001AA0D();
  v2 = *((_DWORD *)v1 + 7);
  v3 = *((_DWORD *)v1 + 2);
  v4 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 4));
  v5 = v4(v2);
  sub_1001B15B(5, 4, v5, v3);
  if ( *(_BYTE *)(*((_DWORD *)v1 + 39) + 173) )
  {
    sub_100210BC((int)((char *)v1 - 4), 2);
  }
  else
  {
    v6 = *((_DWORD *)v1 + 39);
    v7 = *((_DWORD *)v1 + 6);
    v13 = 0;
    v14 = 0;
    v8 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(v6 + 72);
    v9 = v7;
    j_nullsub_1(*(_DWORD *)(v6 + 72));
    if ( (unsigned __int8)v8(v6 + 40, &v13, v9, 0, 1) )
      sub_100211DB((int)((char *)v1 - 4), v14, 2);
    else
      LOBYTE(v15) = 1;
  }
  result = sub_1001AA0D();
  if ( (_BYTE)v15 )
  {
    v11 = *((_DWORD *)v1 + 38);
    v12 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v11 + 12);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v11 + 12));
    result = v12(v11);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10021071) --------------------------------------------------------
void __thiscall sub_10021071(int this, int a2, char a3)
{
  int v3; // esi@1
  int v4; // eax@3

  v3 = this;
  if ( *(_DWORD *)(this + 28) )
  {
    sub_10020F87(this + 228, 0);
    sub_10018914(*(void **)(*(_DWORD *)(v3 + 28) + 256));
    if ( a3 )
    {
      v4 = *(_DWORD *)(a2 + 256);
      if ( !(*(_BYTE *)(v4 + 48) & 4) )
        _InterlockedIncrement((volatile signed __int32 *)(v4 + 20));
    }
    *(_DWORD *)(v3 + 28) = a2;
  }
}

//----- (100210BC) --------------------------------------------------------
char __thiscall sub_100210BC(int this, int a2)
{
  int v2; // ebx@1
  int v3; // edi@1
  int v4; // edi@2
  void (__thiscall *v5)(_DWORD); // esi@2
  int v6; // edi@4
  int (__thiscall *v7)(_DWORD); // esi@4
  int v8; // eax@4
  int v9; // eax@5
  int v10; // edx@12
  void (__thiscall *v11)(_DWORD, _DWORD); // esi@12
  char v13; // [sp-10h] [bp-28h]@10
  int v14; // [sp-Ch] [bp-24h]@10
  int v15; // [sp-8h] [bp-20h]@10
  int v16; // [sp-4h] [bp-1Ch]@4
  int v17; // [sp+Ch] [bp-Ch]@2
  int v18; // [sp+10h] [bp-8h]@1
  int v19; // [sp+14h] [bp-4h]@1

  v2 = this;
  v18 = 0;
  v3 = *(_DWORD *)(this + 156);
  v19 = *(_DWORD *)(this + 156);
  if ( *(_DWORD *)(this + 160) )
  {
    sub_10020E52(this);
    v17 = *(_DWORD *)(*(_DWORD *)(v2 + 160) + 192);
    sub_1001AA0D();
    v4 = *(_DWORD *)(v2 + 160);
    v5 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 12);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v4 + 12));
    v5(v4);
    *(_DWORD *)(v2 + 160) = 0;
    if ( a2 )
    {
      sub_1001AA0D();
      _InterlockedExchange((volatile signed __int32 *)(v2 + 44), 1);
    }
    else
    {
      v6 = *(_DWORD *)(v2 + 32);
      v16 = *(_DWORD *)(v2 + 12);
      v7 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v6 + 4);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v6 + 4));
      v8 = v7(v6);
      sub_1001B15B(6, 4, v8, v16);
      sub_10022969(*(void **)(v2 + 28), v2);
    }
    sub_10019D1F(*(_DWORD *)(v2 + 32), (int)&v17);
    sub_10019DFC(*(void **)(v2 + 32), 0);
    LOBYTE(v9) = *(_BYTE *)(v2 + 176);
    v18 = v9;
    if ( !a2 )
      _InterlockedExchange((volatile signed __int32 *)(v2 + 44), 1);
    v3 = v19;
  }
  if ( a2 == 2 || a2 == 3 )
  {
    sub_10019F0A((int)&v13, *(_DWORD *)(v2 + 28) + 12);
    sub_10022170(*(void **)(v2 + 28), v2, v13, v14, v15, v16);
  }
  if ( a2 )
  {
    v10 = *(_DWORD *)v3;
    v16 = 1;
    v11 = *(void (__thiscall **)(_DWORD, _DWORD))(v10 + 8);
    j_nullsub_1(*(_DWORD *)(v10 + 8));
    v11(v3, v16);
  }
  return v18;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100211DB) --------------------------------------------------------
int __thiscall sub_100211DB(int this, int a2, int a3)
{
  int v3; // ebx@1
  signed int v4; // edi@1
  int v5; // edi@7
  int (__thiscall *v6)(_DWORD); // esi@7
  int v7; // eax@7
  int v8; // ecx@8
  int v9; // eax@8
  int (__thiscall *v10)(_DWORD); // esi@9
  int v11; // ebx@10
  void (__thiscall *v12)(_DWORD, _DWORD); // esi@10
  int v13; // ebx@11
  int (__thiscall *v14)(_DWORD, _DWORD); // esi@11
  int result; // eax@11
  int v16; // ebx@12
  int (__thiscall *v17)(_DWORD, _DWORD, _DWORD); // esi@12
  char v18; // [sp-10h] [bp-30h]@6
  int v19; // [sp-Ch] [bp-2Ch]@6
  int v20; // [sp-8h] [bp-28h]@6
  int v21; // [sp-4h] [bp-24h]@6
  int v22; // [sp+Ch] [bp-14h]@8
  int v23; // [sp+10h] [bp-10h]@8
  int v24; // [sp+14h] [bp-Ch]@8
  int v25; // [sp+18h] [bp-8h]@8
  int v26; // [sp+1Ch] [bp-4h]@8

  v3 = this;
  v4 = 1;
  if ( a3 )
  {
    if ( a3 != 1 )
    {
      if ( a3 == 2 )
      {
        sub_10019F0A((int)&v18, *(_DWORD *)(this + 28) + 12);
        sub_10022170(*(void **)(v3 + 28), v3, v18, v19, v20, v21);
      }
      else if ( a3 == 3 )
      {
        v4 = 2;
      }
    }
  }
  else
  {
    v5 = *(_DWORD *)(this + 32);
    v21 = *(_DWORD *)(this + 12);
    v6 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v5 + 4);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v5 + 4));
    v7 = v6(v5);
    sub_1001B15B(6, 4, v7, v21);
    sub_10022969(*(void **)(v3 + 28), v3);
    v4 = 0;
  }
  v22 = v3 + 4;
  sub_1001AA0D();
  v8 = *(_DWORD *)(v3 + 160);
  v23 = *(_DWORD *)(v3 + 32);
  *(_DWORD *)(v3 + 160) = 0;
  v24 = *(_DWORD *)(v3 + 156);
  v9 = a2;
  v26 = v8;
  v25 = a2;
  if ( !a2 )
  {
    v10 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v8 + 4);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v8 + 4));
    v25 = v10(v26);
    v9 = 0;
  }
  _InterlockedExchange((volatile signed __int32 *)(v3 + 44), 1);
  v11 = v26;
  v21 = v9;
  v12 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v26 + 16);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v26 + 16));
  v12(v11, v21);
  if ( v25 )
  {
    v16 = v24;
    v21 = v4;
    v20 = v25;
    v17 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v24 + 4);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v24 + 4));
    result = v17(v16, v20, v21);
  }
  else
  {
    sub_1001F29B(v11, 4, 1);
    sub_1001778F(v23);
    v13 = v24;
    v21 = v4;
    v14 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v24 + 8);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v24 + 8));
    result = v14(v13, v21);
  }
  if ( a3 )
    result = sub_1001AA0D();
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10021314) --------------------------------------------------------
int __fastcall sub_10021314(int a1)
{
  int v1; // ebx@1
  signed __int32 v2; // eax@2
  int v3; // edi@2
  int (__thiscall *v4)(_DWORD); // esi@2
  int v5; // eax@2
  int (__thiscall *v6)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@3
  int result; // eax@3
  char *v8; // eax@6
  int v9; // [sp-10h] [bp-38h]@3
  int v10; // [sp-Ch] [bp-34h]@3
  int v11; // [sp-8h] [bp-30h]@3
  int v12; // [sp-4h] [bp-2Ch]@2
  char v13; // [sp+Ch] [bp-1Ch]@7
  char v14; // [sp+18h] [bp-10h]@6
  signed __int32 v15; // [sp+24h] [bp-4h]@2

  v1 = a1;
  if ( (LPVOID)(a1 != 4 ? a1 : 0) == sub_100178E9() )
  {
    sub_10019F3F((int)&v13);
    v12 = (int)&unk_10076668;
    v8 = &v13;
    goto LABEL_8;
  }
  v2 = _InterlockedDecrement((volatile signed __int32 *)(v1 + 44));
  v3 = *(_DWORD *)(v1 + 28);
  v12 = *(_DWORD *)(v1 + 8);
  v15 = v2;
  v4 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 4));
  v5 = v4(v3);
  sub_1001B15B(4, 4, v5, v12);
  if ( v15 == 1 )
  {
    *(_DWORD *)(v1 + 44) = 0;
    sub_10020F5A(v1 - 4);
    sub_10019F0A((int)&v9, *(_DWORD *)(v1 + 24) + 12);
    v6 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)(v1 - 4) + 20);
    j_nullsub_1(v6);
    return v6(v1 - 4, v9, v10, v11, v12);
  }
  result = v15 + 1;
  if ( (unsigned int)(v15 + 1) > 1 )
  {
    sub_10019F50((int)&v14);
    v12 = (int)&unk_10076630;
    v8 = &v14;
LABEL_8:
    sub_10027494((int)v8, v12);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_100213D3);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100213D3) --------------------------------------------------------
int __thiscall sub_100213D3(int this)
{
  int v1; // ebx@1
  int v2; // edi@2
  unsigned int v3; // esi@2
  unsigned int v4; // eax@3
  int v5; // ecx@5
  int result; // eax@5
  int v7; // edi@8
  int (__thiscall *v8)(_DWORD); // esi@8
  void (__thiscall *v9)(_DWORD); // esi@10
  bool v10; // zf@12

  v1 = this;
  ++*(_DWORD *)(v1 + 172);
  if ( *(_DWORD *)(this + 172) == 1 )
  {
    v2 = *(_DWORD *)(this + 32);
    v3 = *(_DWORD *)(*(_DWORD *)(this + 160) + 144);
    sub_1001F255(v2 + 60, v3);
    sub_1001EF07(v2, v3);
  }
  v4 = *(_DWORD *)(v1 + 172);
  if ( v4 < 0x100 )
    goto LABEL_8;
  if ( v4 == 256 )
  {
    v5 = *(_DWORD *)(v1 + 160);
    *(_BYTE *)(v1 + 178) = 1;
    sub_1001F29B(v5, 2, 1);
    return sub_1001EF89(*(_DWORD *)(v1 + 160), v1);
  }
  if ( *(_BYTE *)(v1 + 179) & 2 )
  {
    *(_DWORD *)(v1 + 172) = v4 - 1;
LABEL_8:
    v7 = *(_DWORD *)(v1 + 156);
    v8 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v7 + 12);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v7 + 12));
    return v8(v7);
  }
  sub_10019EAB(*(void **)(v1 + 32), 1);
  while ( !(unsigned __int8)sub_1001EF2C(*(_DWORD *)(v1 + 160), v1) )
  {
    v9 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 32);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 32));
    v9(v1);
  }
  result = sub_10019EAB(*(void **)(v1 + 32), 0);
  v10 = *(_DWORD *)(v1 + 172) == 0;
  *(_BYTE *)(v1 + 178) = 0;
  if ( !v10 )
    result = sub_1001F215(*(_DWORD *)(v1 + 32) + 60, *(_DWORD *)(*(_DWORD *)(v1 + 160) + 144));
  *(_DWORD *)(v1 + 172) = 0;
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100214CF) --------------------------------------------------------
char __thiscall sub_100214CF(int this, int a2)
{
  int v2; // esi@1
  char result; // al@4

  v2 = this;
  if ( (unsigned __int8)sub_10020EFE(*(_DWORD *)(this + 160), a2, *(_DWORD *)(this + 28), *(_BYTE *)(this + 178)) )
  {
    sub_10020E52(v2);
    if ( *(_DWORD *)(v2 + 172) )
      sub_1001F215(*(_DWORD *)(v2 + 32) + 60, *(_DWORD *)(*(_DWORD *)(v2 + 160) + 144));
    *(_DWORD *)(v2 + 172) = 0;
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1002152B) --------------------------------------------------------
int __thiscall sub_1002152B(void *this)
{
  int v1; // ebp@0
  void *v2; // ebx@1
  int v3; // edi@1
  int v4; // ST0C_4@1
  int (__thiscall *v5)(_DWORD); // esi@1
  int v6; // eax@1
  int v7; // edi@3
  int v8; // edx@3
  int (__thiscall *v9)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@3
  int v10; // ST04_4@3
  int v11; // ecx@5
  int v12; // esi@5
  int v13; // edi@8
  int (__thiscall *v14)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@8
  int v15; // ST04_4@8
  int v16; // edi@16
  int (__thiscall *v17)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@16
  int v18; // ST04_4@16
  int result; // eax@19
  int v20; // edi@20
  int (__thiscall *v21)(_DWORD); // esi@20
  int v22; // [sp+Ch] [bp-14h]@3
  int v23; // [sp+14h] [bp-Ch]@3
  int v24; // [sp+18h] [bp-8h]@1
  int v25; // [sp+1Ch] [bp-4h]@5

  v24 = 0;
  v2 = this;
  sub_1001AA0D();
  v3 = *((_DWORD *)v2 + 7);
  v4 = *((_DWORD *)v2 + 2);
  v5 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 4));
  v6 = v5(v3);
  sub_1001B15B(5, 4, v6, v4);
  if ( *(_BYTE *)(*((_DWORD *)v2 + 39) + 173) )
  {
    sub_100210BC((int)((char *)v2 - 4), 2);
    goto LABEL_19;
  }
  v7 = *((_DWORD *)v2 + 39);
  v8 = *((_DWORD *)v2 + 6);
  v22 = 0;
  v23 = 0;
  v9 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(v7 + 76);
  v10 = v8;
  j_nullsub_1(*(_DWORD *)(v7 + 76));
  if ( !(unsigned __int8)v9(v7 + 40, &v22, v10, 0, 9) )
    goto LABEL_18;
  if ( v22 == 1 )
  {
LABEL_12:
    v12 = v23;
    goto LABEL_13;
  }
  sub_1001AA0D();
  v11 = *((_DWORD *)v2 + 7);
  v12 = sub_10017EE7(v1, 1);
  v25 = v12;
  sub_1001AA0D();
  if ( v12 )
  {
    if ( (unsigned __int8)sub_100251B6((int)&v22) )
    {
LABEL_7:
      sub_10024B83((int)&v22, v12);
      goto LABEL_13;
    }
    v13 = *((_DWORD *)v2 + 39);
    v14 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(v13 + 76);
    v15 = *((_DWORD *)v2 + 6);
    j_nullsub_1(*(_DWORD *)(v13 + 76));
    if ( (unsigned __int8)v14(v13 + 40, &v22, v15, 0, 3) )
    {
      if ( v22 != 1 )
      {
        v12 = v25;
        goto LABEL_7;
      }
      sub_100190B3(*((_DWORD *)v2 + 7), v25, 1);
      goto LABEL_12;
    }
    sub_100190B3(*((_DWORD *)v2 + 7), v25, 1);
    v12 = 0;
  }
  else
  {
    v16 = *((_DWORD *)v2 + 39);
    v17 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(v16 + 76);
    v18 = *((_DWORD *)v2 + 6);
    j_nullsub_1(*(_DWORD *)(v16 + 76));
    if ( !(unsigned __int8)v17(v16 + 40, &v22, v18, 0, 1) )
      goto LABEL_18;
    v12 = sub_10024B36(&v22);
  }
LABEL_13:
  if ( v12 )
  {
    sub_100211DB((int)((char *)v2 - 4), v12, 2);
    goto LABEL_19;
  }
LABEL_18:
  LOBYTE(v24) = 1;
LABEL_19:
  result = sub_1001AA0D();
  if ( (_BYTE)v24 )
  {
    v20 = *((_DWORD *)v2 + 38);
    v21 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v20 + 12);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v20 + 12));
    result = v21(v20);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100216AF) --------------------------------------------------------
int __userpurge sub_100216AF@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // edi@1
  int v5; // esi@1
  void *v6; // ecx@1

  sub_1000FB4A();
  v4 = v3;
  *(_DWORD *)(a1 - 16) = v3;
  v5 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(v3 + 4) = 0;
  *(_DWORD *)(v3 + 8) = 0;
  *(_DWORD *)v3 = v5;
  sub_10016574((PSLIST_HEADER)(v3 + 16), v5, 256, 64);
  *(_DWORD *)(a1 - 4) = 0;
  sub_10016574((PSLIST_HEADER)(v4 + 96), v5, 256, 64);
  *(_DWORD *)(v4 + 184) = *(_DWORD *)(a1 + 12);
  *(_DWORD *)(v4 + 176) = 0;
  *(_DWORD *)(v4 + 180) = 0;
  *(_DWORD *)(v4 + 188) = 0;
  *(_DWORD *)(a1 - 32) = 0;
  *(_DWORD *)(a1 - 28) = 0;
  *(_DWORD *)(a1 - 24) = 0;
  *(_DWORD *)(a1 - 20) = 0;
  v6 = *(void **)(v5 + 176);
  *(_BYTE *)(a1 - 4) = 1;
  *(_DWORD *)(v4 + 8) = sub_100222AB(v6, a1 - 32, v4);
  return sub_1000FB24(20);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10021738) --------------------------------------------------------
int __thiscall sub_10021738(PSLIST_HEADER ListHead)
{
  PSLIST_HEADER v1; // edi@1
  int v2; // eax@1
  int v3; // eax@1
  struct _SINGLE_LIST_ENTRY *v4; // ebx@1
  signed int i; // esi@2
  struct _SINGLE_LIST_ENTRY *v6; // esi@4

  v1 = ListHead;
  v2 = (int)InterlockedFlushSList(ListHead);
  sub_10021805(v2);
  v3 = (int)InterlockedFlushSList(v1 + 1);
  sub_10021805(v3);
  sub_10021805((int)v1[2].s.Next.Next);
  v4 = v1[6].s.Next.Next;
  if ( v4 )
  {
    do
    {
      for ( i = 0; i < (signed int)v1[5].s.Next.Next; ++i )
        sub_1001EBC1((int)v4->Next[i].Next);
      v6 = v4[1].Next;
      sub_1000F0A1(v4->Next);
      sub_1000F417(v4);
      v4 = v6;
    }
    while ( v6 );
  }
  return sub_1000F0A1(*(LPVOID *)&v1[6].s.Depth);
}

//----- (100217AF) --------------------------------------------------------
int __thiscall sub_100217AF(int this)
{
  int v1; // esi@1

  v1 = this;
  *(_DWORD *)(this + 8) = 0;
  sub_10021738((PSLIST_HEADER)(this + 96));
  return sub_10021738((PSLIST_HEADER)(v1 + 16));
}

//----- (100217C7) --------------------------------------------------------
int __thiscall sub_100217C7(int this)
{
  int result; // eax@1

  result = this + 188;
  _InterlockedExchange((volatile signed __int32 *)(this + 188), 1);
  return result;
}

//----- (100217F9) --------------------------------------------------------
char __cdecl sub_100217F9(int a1)
{
  char result; // al@1

  result = sub_10018385(*(_DWORD *)(a1 + 36));
  if ( !result )
  {
    sub_10021805(*(_DWORD *)(a1 + 16));
    *(_DWORD *)(a1 + 16) = 0;
    result = a1 + 72;
    _InterlockedExchange((volatile signed __int32 *)(a1 + 72), 0);
  }
  return result;
}

//----- (10021805) --------------------------------------------------------
int __stdcall sub_10021805(int a1)
{
  int v1; // esi@1
  int v2; // eax@2
  int result; // eax@2

  v1 = a1;
  while ( v1 )
  {
    v2 = v1 - 288;
    v1 = *(_DWORD *)v1;
    result = sub_1001EBC1(v2);
  }
  return result;
}

//----- (10021826) --------------------------------------------------------
char __thiscall sub_10021826(PSLIST_HEADER ListHead, int a2, int a3, char a4)
{
  int v4; // esi@1
  int v5; // edx@1
  signed __int32 v6; // edi@1
  char result; // al@2
  struct _SINGLE_LIST_ENTRY *v8; // ecx@3
  int v9; // eax@3
  int v10; // edx@4
  int v11; // ebx@4
  int v12; // edx@5
  PSINGLE_LIST_ENTRY v13; // eax@15
  int v14; // ST08_4@15

  v4 = (int)ListHead;
  v5 = a3 >> *(_DWORD *)&ListHead[5].s.Depth;
  v6 = a3 & (unsigned int)((char *)&ListHead[5].s.Next.Next[-1].Next + 3);
  if ( v5 < *(_DWORD *)&ListHead[7].s.Depth )
  {
    v8 = ListHead[7].s.Next.Next;
    v9 = *(_DWORD *)(v4 + 52);
    if ( v5 < (signed int)v8 )
    {
      v11 = *(_DWORD *)(v9 + 4 * v5);
    }
    else
    {
      v10 = v5 - (_DWORD)v8;
      v11 = *(_DWORD *)(v9 + 4 * (_DWORD)v8 - 4);
      if ( v10 >= 0 )
      {
        v12 = v10 + 1;
        do
        {
          v11 = *(_DWORD *)(v11 + 4);
          --v12;
        }
        while ( v12 );
      }
    }
    if ( _InterlockedCompareExchange((volatile signed __int32 *)(*(_DWORD *)v11 + 4 * v6), 0, a2) == a2 )
    {
      _InterlockedCompareExchange((volatile signed __int32 *)(v11 + 8), v6, -2);
      if ( a4 )
      {
        if ( (signed int)QueryDepthSList((PSLIST_HEADER)v4) <= *(_DWORD *)(v4 + 68) )
        {
          InterlockedPushEntrySList((PSLIST_HEADER)v4, (PSINGLE_LIST_ENTRY)(a2 + 288));
        }
        else
        {
          InterlockedPushEntrySList((PSLIST_HEADER)(v4 + 8), (PSINGLE_LIST_ENTRY)(a2 + 288));
          if ( (signed int)QueryDepthSList((PSLIST_HEADER)(v4 + 8)) > *(_DWORD *)(v4 + 68)
            && !sub_10018385(*(_DWORD *)(v4 + 36))
            && !_InterlockedCompareExchange((volatile signed __int32 *)(v4 + 72), 1, 0) )
          {
            v13 = InterlockedFlushSList((PSLIST_HEADER)(v4 + 8));
            v14 = *(_DWORD *)(v4 + 36);
            *(_DWORD *)(v4 + 16) = v13;
            sub_1001898B(v4 + 20, (int (__cdecl *)(_DWORD))sub_100217F9, v4, v14);
          }
        }
      }
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10021928) --------------------------------------------------------
char __thiscall sub_10021928(void *this, int a2)
{
  int v2; // ecx@2

  if ( *(_DWORD *)(a2 + 12) & 0xFFFFFFF )
    v2 = (int)((char *)this + 16);
  else
    v2 = (int)((char *)this + 96);
  return sub_10021826((PSLIST_HEADER)v2, a2, *(_DWORD *)(a2 + 248), 1);
}

//----- (10021951) --------------------------------------------------------
int __userpurge sub_10021951@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5)
{
  int v5; // ecx@1
  int v6; // esi@1
  int v7; // ebx@1
  int v8; // edi@1
  LPVOID v9; // eax@2

  sub_1000FB4A();
  v6 = v5;
  *(_DWORD *)(a1 - 16) = v5;
  v7 = v5 + 4;
  v8 = 0;
  *(_DWORD *)v5 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)v7 = 0;
  *(_DWORD *)(v7 + 4) = 0;
  *(_DWORD *)(v5 + 12) = *(_DWORD *)(a1 + 20);
  *(_DWORD *)(v5 + 16) = 0;
  *(_DWORD *)(v5 + 20) = 0;
  *(_DWORD *)(v5 + 24) = 0;
  *(_DWORD *)(v5 + 28) = 0;
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(v5 + 32) = 0;
  sub_100226C1(v5, v5 + 4);
  if ( !*(_BYTE *)(a1 + 16) )
  {
    v9 = sub_1000F0A6(0x2Cu);
    *(_DWORD *)(a1 - 20) = v9;
    *(_BYTE *)(a1 - 4) = 1;
    if ( v9 )
      v8 = sub_10021AE1(a1, *(_DWORD *)v6, v7, *(_DWORD *)(a1 + 20), 0);
    *(_DWORD *)(v6 + 16) = v8;
    *(_DWORD *)(v6 + 20) = v8;
  }
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (100219C8) --------------------------------------------------------
int __userpurge sub_100219C8@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // eax@1
  int v6; // ST00_4@1

  sub_1000FB4A();
  v4 = v3;
  *(_DWORD *)(a1 - 16) = v3;
  v5 = *(_DWORD *)(a1 + 8);
  v6 = *(_DWORD *)(a1 + 12);
  *(_DWORD *)v3 = &off_10066EE4;
  *(_DWORD *)(v3 + 4) = v5;
  *(_DWORD *)(v3 + 8) = 0;
  *(_DWORD *)(v3 + 12) = 0;
  *(_DWORD *)(v3 + 16) = 0;
  *(_DWORD *)(v3 + 20) = 0;
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(v3 + 32) = 0;
  *(_DWORD *)(v3 + 36) = 0;
  *(_DWORD *)(v3 + 40) = 0;
  *(_DWORD *)(v3 + 44) = 0;
  sub_100226EA(v3, v6);
  *(_DWORD *)(v4 + 28) = sub_10018014(*(_DWORD *)(v4 + 4));
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 10066EE4: using guessed type int (__stdcall *off_10066EE4)(int, int);

//----- (10021A21) --------------------------------------------------------
int __userpurge sub_10021A21@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // ecx@1
  int v5; // edi@1
  int v6; // edx@1
  int v7; // esi@1
  int v8; // eax@1
  int v9; // ecx@1
  int v10; // eax@1
  int v11; // ST00_4@1
  void *v12; // ST0C_4@1
  int v13; // ST04_4@1
  int v14; // ST0C_4@1
  int v15; // ST08_4@1

  sub_1000FB4A();
  v5 = v4;
  *(_DWORD *)(a1 - 16) = v4;
  *(_DWORD *)v4 = &off_10066ED0;
  v6 = v4 + 12;
  *(_DWORD *)v6 = 0;
  *(_DWORD *)(v6 + 4) = 0;
  *(_DWORD *)(v6 + 8) = 0;
  *(_DWORD *)(v6 + 12) = 0;
  *(_DWORD *)(v4 + 28) = 0;
  *(_DWORD *)(v4 + 32) = 0;
  v7 = *(_DWORD *)(a1 + 8);
  v8 = v4 + 40;
  *(_DWORD *)v8 = 0;
  *(_DWORD *)(v8 + 4) = v8;
  *(_DWORD *)(v8 + 8) = 0;
  v9 = *(_DWORD *)(v7 + 4);
  *(_DWORD *)(a1 - 4) = 0;
  v10 = sub_10017D35(a1, a1 - 24, v6);
  v11 = *(_DWORD *)(v7 + 4);
  *(_BYTE *)(a1 - 4) = 1;
  sub_10021951(a1, v11, v10, 0, 64);
  v12 = *(void **)(a1 - 20);
  *(_BYTE *)(a1 - 4) = 3;
  sub_1000F0A1(v12);
  sub_10016574((PSLIST_HEADER)(v5 + 88), *(_DWORD *)(v7 + 4), 256, 64);
  v13 = *(_DWORD *)(v7 + 4);
  *(_BYTE *)(a1 - 4) = 4;
  sub_10016574((PSLIST_HEADER)(v5 + 168), v13, 256, 0x7FFFFFFF);
  v14 = *(_DWORD *)(a1 + 16);
  *(_DWORD *)(v5 + 264) = 0;
  v15 = *(_DWORD *)(a1 + 12);
  *(_DWORD *)(v5 + 268) = 0;
  *(_BYTE *)(a1 - 4) = 5;
  sub_100226FD(v5, v7, v15, v14);
  return sub_1000FB24(12);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 10066ED0: using guessed type int (__thiscall *off_10066ED0)(LPVOID lpMem, char);

//----- (10021AE1) --------------------------------------------------------
int __userpurge sub_10021AE1@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5)
{
  int v5; // ecx@1
  int v6; // edi@1
  int v7; // ST0C_4@1
  bool v8; // of@1
  int v9; // eax@1
  LPVOID v10; // eax@1
  unsigned int v11; // ST08_4@1

  sub_1000FB4A();
  v6 = v5;
  *(_DWORD *)(a1 - 16) = v5;
  v5 += 4;
  v7 = *(_DWORD *)(a1 + 12);
  *(_DWORD *)v6 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)v5 = 0;
  *(_DWORD *)(v5 + 4) = 0;
  sub_100176BC((void *)v5, v7);
  *(_DWORD *)(v6 + 16) = *(_DWORD *)(a1 + 20);
  v9 = 4 * *(_DWORD *)(a1 + 16);
  v8 = (unsigned __int64)*(_DWORD *)(a1 + 16) >> 30 != 0;
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(v6 + 20) = 0;
  *(_DWORD *)(v6 + 24) = 0;
  v10 = sub_1000F40E(v9 | -v8);
  v11 = 4 * *(_DWORD *)(a1 + 16);
  *(_DWORD *)(v6 + 12) = v10;
  sub_10028330(v10, 0, v11);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10021B4D) --------------------------------------------------------
int __thiscall sub_10021B4D(PSLIST_HEADER ListHead)
{
  PSLIST_HEADER v1; // edi@1
  int v2; // eax@1
  int v3; // eax@1
  struct _SINGLE_LIST_ENTRY *v4; // ebx@1
  signed int i; // esi@2
  struct _SINGLE_LIST_ENTRY *v6; // esi@4

  v1 = ListHead;
  v2 = (int)InterlockedFlushSList(ListHead);
  sub_1002235A(v2);
  v3 = (int)InterlockedFlushSList(v1 + 1);
  sub_1002235A(v3);
  sub_1002235A((int)v1[2].s.Next.Next);
  v4 = v1[6].s.Next.Next;
  if ( v4 )
  {
    do
    {
      for ( i = 0; i < (signed int)v1[5].s.Next.Next; ++i )
        sub_1000F417(v4->Next[i].Next);
      v6 = v4[1].Next;
      sub_1000F0A1(v4->Next);
      sub_1000F417(v4);
      v4 = v6;
    }
    while ( v6 );
  }
  return sub_1000F0A1(*(LPVOID *)&v1[6].s.Depth);
}

//----- (10021BC7) --------------------------------------------------------
int __thiscall sub_10021BC7(PSLIST_HEADER ListHead)
{
  PSLIST_HEADER v1; // edi@1
  int v2; // eax@1
  int v3; // eax@1
  struct _SINGLE_LIST_ENTRY *v4; // ebx@1
  signed int i; // esi@2
  void *v6; // ecx@3
  struct _SINGLE_LIST_ENTRY *v7; // esi@6

  v1 = ListHead;
  v2 = (int)InterlockedFlushSList(ListHead);
  sub_1001A886(v2);
  v3 = (int)InterlockedFlushSList(v1 + 1);
  sub_1001A886(v3);
  sub_1001A886((int)v1[2].s.Next.Next);
  v4 = v1[6].s.Next.Next;
  if ( v4 )
  {
    do
    {
      for ( i = 0; i < (signed int)v1[5].s.Next.Next; ++i )
      {
        v6 = v4->Next[i].Next;
        if ( v6 )
          sub_1001A390(v6, 1);
      }
      v7 = v4[1].Next;
      sub_1000F0A1(v4->Next);
      sub_1000F417(v4);
      v4 = v7;
    }
    while ( v7 );
  }
  return sub_1000F0A1(*(LPVOID *)&v1[6].s.Depth);
}

//----- (10021C43) --------------------------------------------------------
int __thiscall sub_10021C43(int this)
{
  int v1; // esi@1
  int v2; // ecx@1
  int v3; // edi@2

  v1 = this;
  v2 = *(_DWORD *)(this + 20);
  if ( v2 )
  {
    do
    {
      v3 = *(_DWORD *)(v2 + 24);
      if ( v2 == *(_DWORD *)(v1 + 16) )
        sub_10022CE1(v2, *(_DWORD *)(v1 + 28) - *(_DWORD *)(v2 + 16));
      else
        sub_10022CE1(v2, *(_DWORD *)(v1 + 12));
      v2 = v3;
    }
    while ( v3 );
  }
  return sub_1000F0A1(*(LPVOID *)(v1 + 8));
}

//----- (10021CA9) --------------------------------------------------------
int __thiscall sub_10021CA9(signed __int32 this)
{
  signed __int32 v1; // esi@1
  int v2; // eax@1

  v1 = this;
  v2 = *(_DWORD *)(this + 12) & 0xFFFFFFF;
  *(_DWORD *)this = &off_10066ED0;
  if ( v2 == 3 )
    sub_10022286(*(_DWORD *)(*(_DWORD *)(this + 256) + 4), *(_DWORD *)(this + 36), this);
  sub_10021B4D((PSLIST_HEADER)(v1 + 168));
  sub_10021BC7((PSLIST_HEADER)(v1 + 88));
  sub_10021C43(v1 + 52);
  return sub_1000F0A1(*(LPVOID *)(v1 + 32));
}
// 10066ED0: using guessed type int (__thiscall *off_10066ED0)(LPVOID lpMem, char);

//----- (10021CF7) --------------------------------------------------------
int __thiscall sub_10021CF7(int this, int a2)
{
  int v2; // esi@1
  int result; // eax@1

  v2 = this;
  sub_1000F0A1(*(LPVOID *)(this + 4));
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 4);
  result = v2;
  *(_DWORD *)a2 = 0;
  *(_DWORD *)(a2 + 4) = 0;
  return result;
}

//----- (10021D21) --------------------------------------------------------
LPVOID __thiscall sub_10021D21(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_10021CA9((signed __int32)lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (10021D46) --------------------------------------------------------
int __thiscall sub_10021D46(int this, signed __int32 a2)
{
  int v2; // esi@1
  int v3; // ebx@1
  char v4; // al@1
  int v5; // edx@1
  volatile signed __int32 *v6; // edi@2
  bool v7; // sf@2
  unsigned __int8 v8; // of@2
  volatile signed __int32 *v9; // edx@3
  signed __int32 v10; // eax@3
  int v11; // edi@4
  volatile signed __int32 *v12; // edi@12
  LPVOID v13; // eax@14
  unsigned int v14; // ST0C_4@14
  signed __int32 v15; // ecx@14
  int v16; // eax@15
  int v17; // edx@20
  char v19; // [sp+Ch] [bp-24h]@25
  int v20; // [sp+14h] [bp-1Ch]@24
  int (*v21)(); // [sp+18h] [bp-18h]@24
  int v22; // [sp+1Ch] [bp-14h]@6
  volatile signed __int32 *v23; // [sp+20h] [bp-10h]@2
  signed __int32 v24; // [sp+24h] [bp-Ch]@3
  int v25; // [sp+28h] [bp-8h]@1
  char v26; // [sp+2Fh] [bp-1h]@1

  v2 = this;
  v26 = 0;
  v3 = 0;
  v4 = 0;
  v5 = *(_DWORD *)(this + 48);
  v25 = *(_DWORD *)(this + 48);
  do
  {
    v6 = (volatile signed __int32 *)(v5 + 8);
    v8 = __OFSUB__(*(_DWORD *)(v5 + 8), -1);
    v7 = *(_DWORD *)(v5 + 8) + 1 < 0;
    v23 = (volatile signed __int32 *)(v5 + 8);
    if ( v7 ^ v8 )
      goto LABEL_11;
    v9 = *(volatile signed __int32 **)v5;
    v10 = 0;
    v24 = 0;
    if ( *(_DWORD *)(v2 + 40) <= 0 )
      goto LABEL_10;
    v11 = v3;
    while ( *v9 )
    {
LABEL_8:
      ++v10;
      ++v9;
      ++v11;
      v24 = v10;
      if ( v10 >= *(_DWORD *)(v2 + 40) )
      {
        v6 = v23;
        goto LABEL_10;
      }
    }
    *(_DWORD *)a2 = v11;
    v22 = *(_DWORD *)(v2 + 64);
    if ( _InterlockedCompareExchange(v9, a2, 0) )
    {
      v10 = v24;
      goto LABEL_8;
    }
    v3 = v11;
    v26 = 1;
    if ( v11 >= v22 )
      _InterlockedIncrement((volatile signed __int32 *)(v2 + 64));
    v6 = v23;
    _InterlockedCompareExchange(v23, -1, v24);
LABEL_10:
    v5 = v25;
    v4 = v26;
LABEL_11:
    if ( !v4 )
    {
      _InterlockedCompareExchange(v6, -2, -1);
      v3 += *(_DWORD *)(v2 + 40);
      v12 = (volatile signed __int32 *)(v5 + 4);
      if ( !*(_DWORD *)(v5 + 4) && !_InterlockedCompareExchange(v12, 1, 0) )
      {
        v13 = sub_1000F40E(4 * *(_DWORD *)(v2 + 40) | -((unsigned __int64)*(_DWORD *)(v2 + 40) >> 30 != 0));
        v14 = 4 * *(_DWORD *)(v2 + 40);
        v22 = (int)v13;
        sub_10028330(v13, 0, v14);
        v15 = (signed __int32)sub_1000F0A6(0xCu);
        v23 = (volatile signed __int32 *)v15;
        if ( v15 )
        {
          v16 = v22;
          *(_DWORD *)(v15 + 4) = 0;
          *(_DWORD *)(v15 + 8) = -1;
          *(_DWORD *)v15 = v16;
        }
        else
        {
          v15 = 0;
        }
        v17 = *(_DWORD *)(v2 + 60);
        if ( v17 < *(_DWORD *)(v2 + 56) )
        {
          *(_DWORD *)(*(_DWORD *)(v2 + 52) + 4 * v17) = v15;
          ++*(_DWORD *)(v2 + 60);
        }
        _InterlockedExchange(v12, v15);
        v5 = v25;
      }
      if ( *v12 == 1 )
      {
        v20 = 0;
        v21 = sub_10012578;
        do
          sub_10010BDE(&v19);
        while ( *v12 == 1 );
        v5 = v25;
      }
      v4 = v26;
    }
    v5 = *(_DWORD *)(v5 + 4);
    v25 = v5;
  }
  while ( !v4 );
  return v3;
}

//----- (10021EA8) --------------------------------------------------------
int __thiscall sub_10021EA8(int this, signed __int32 a2)
{
  int v2; // esi@1
  int v3; // ebx@1
  char v4; // al@1
  int v5; // edx@1
  volatile signed __int32 *v6; // edi@2
  bool v7; // sf@2
  unsigned __int8 v8; // of@2
  volatile signed __int32 *v9; // edx@3
  signed __int32 v10; // eax@3
  int v11; // edi@4
  volatile signed __int32 *v12; // edi@12
  LPVOID v13; // eax@14
  unsigned int v14; // ST0C_4@14
  signed __int32 v15; // ecx@14
  int v16; // eax@15
  int v17; // edx@20
  char v19; // [sp+Ch] [bp-24h]@25
  int v20; // [sp+14h] [bp-1Ch]@24
  int (*v21)(); // [sp+18h] [bp-18h]@24
  int v22; // [sp+1Ch] [bp-14h]@6
  volatile signed __int32 *v23; // [sp+20h] [bp-10h]@2
  signed __int32 v24; // [sp+24h] [bp-Ch]@3
  int v25; // [sp+28h] [bp-8h]@1
  char v26; // [sp+2Fh] [bp-1h]@1

  v2 = this;
  v26 = 0;
  v3 = 0;
  v4 = 0;
  v5 = *(_DWORD *)(this + 48);
  v25 = *(_DWORD *)(this + 48);
  do
  {
    v6 = (volatile signed __int32 *)(v5 + 8);
    v8 = __OFSUB__(*(_DWORD *)(v5 + 8), -1);
    v7 = *(_DWORD *)(v5 + 8) + 1 < 0;
    v23 = (volatile signed __int32 *)(v5 + 8);
    if ( v7 ^ v8 )
      goto LABEL_11;
    v9 = *(volatile signed __int32 **)v5;
    v10 = 0;
    v24 = 0;
    if ( *(_DWORD *)(v2 + 40) <= 0 )
      goto LABEL_10;
    v11 = v3;
    while ( *v9 )
    {
LABEL_8:
      ++v10;
      ++v9;
      ++v11;
      v24 = v10;
      if ( v10 >= *(_DWORD *)(v2 + 40) )
      {
        v6 = v23;
        goto LABEL_10;
      }
    }
    *(_DWORD *)a2 = v11;
    v22 = *(_DWORD *)(v2 + 64);
    if ( _InterlockedCompareExchange(v9, a2, 0) )
    {
      v10 = v24;
      goto LABEL_8;
    }
    v3 = v11;
    v26 = 1;
    if ( v11 >= v22 )
      _InterlockedIncrement((volatile signed __int32 *)(v2 + 64));
    v6 = v23;
    _InterlockedCompareExchange(v23, -1, v24);
LABEL_10:
    v5 = v25;
    v4 = v26;
LABEL_11:
    if ( !v4 )
    {
      _InterlockedCompareExchange(v6, -2, -1);
      v3 += *(_DWORD *)(v2 + 40);
      v12 = (volatile signed __int32 *)(v5 + 4);
      if ( !*(_DWORD *)(v5 + 4) && !_InterlockedCompareExchange(v12, 1, 0) )
      {
        v13 = sub_1000F40E(4 * *(_DWORD *)(v2 + 40) | -((unsigned __int64)*(_DWORD *)(v2 + 40) >> 30 != 0));
        v14 = 4 * *(_DWORD *)(v2 + 40);
        v22 = (int)v13;
        sub_10028330(v13, 0, v14);
        v15 = (signed __int32)sub_1000F0A6(0xCu);
        v23 = (volatile signed __int32 *)v15;
        if ( v15 )
        {
          v16 = v22;
          *(_DWORD *)(v15 + 4) = 0;
          *(_DWORD *)(v15 + 8) = -1;
          *(_DWORD *)v15 = v16;
        }
        else
        {
          v15 = 0;
        }
        v17 = *(_DWORD *)(v2 + 60);
        if ( v17 < *(_DWORD *)(v2 + 56) )
        {
          *(_DWORD *)(*(_DWORD *)(v2 + 52) + 4 * v17) = v15;
          ++*(_DWORD *)(v2 + 60);
        }
        _InterlockedExchange(v12, v15);
        v5 = v25;
      }
      if ( *v12 == 1 )
      {
        v20 = 0;
        v21 = sub_10012578;
        do
          sub_10010BDE(&v19);
        while ( *v12 == 1 );
        v5 = v25;
      }
      v4 = v26;
    }
    v5 = *(_DWORD *)(v5 + 4);
    v25 = v5;
  }
  while ( !v4 );
  return v3;
}

//----- (1002200A) --------------------------------------------------------
int __thiscall sub_1002200A(int this, signed __int32 a2)
{
  int v2; // esi@1
  int v3; // ebx@1
  char v4; // al@1
  int v5; // edx@1
  volatile signed __int32 *v6; // edi@2
  bool v7; // sf@2
  unsigned __int8 v8; // of@2
  volatile signed __int32 *v9; // edx@3
  signed __int32 v10; // eax@3
  int v11; // edi@4
  volatile signed __int32 *v12; // edi@12
  LPVOID v13; // eax@14
  unsigned int v14; // ST0C_4@14
  signed __int32 v15; // ecx@14
  int v16; // eax@15
  int v17; // edx@20
  char v19; // [sp+Ch] [bp-24h]@25
  int v20; // [sp+14h] [bp-1Ch]@24
  int (*v21)(); // [sp+18h] [bp-18h]@24
  int v22; // [sp+1Ch] [bp-14h]@6
  volatile signed __int32 *v23; // [sp+20h] [bp-10h]@2
  signed __int32 v24; // [sp+24h] [bp-Ch]@3
  int v25; // [sp+28h] [bp-8h]@1
  char v26; // [sp+2Fh] [bp-1h]@1

  v2 = this;
  v26 = 0;
  v3 = 0;
  v4 = 0;
  v5 = *(_DWORD *)(this + 48);
  v25 = *(_DWORD *)(this + 48);
  do
  {
    v6 = (volatile signed __int32 *)(v5 + 8);
    v8 = __OFSUB__(*(_DWORD *)(v5 + 8), -1);
    v7 = *(_DWORD *)(v5 + 8) + 1 < 0;
    v23 = (volatile signed __int32 *)(v5 + 8);
    if ( v7 ^ v8 )
      goto LABEL_11;
    v9 = *(volatile signed __int32 **)v5;
    v10 = 0;
    v24 = 0;
    if ( *(_DWORD *)(v2 + 40) <= 0 )
      goto LABEL_10;
    v11 = v3;
    while ( *v9 )
    {
LABEL_8:
      ++v10;
      ++v9;
      ++v11;
      v24 = v10;
      if ( v10 >= *(_DWORD *)(v2 + 40) )
      {
        v6 = v23;
        goto LABEL_10;
      }
    }
    *(_DWORD *)(a2 + 248) = v11;
    v22 = *(_DWORD *)(v2 + 64);
    if ( _InterlockedCompareExchange(v9, a2, 0) )
    {
      v10 = v24;
      goto LABEL_8;
    }
    v3 = v11;
    v26 = 1;
    if ( v11 >= v22 )
      _InterlockedIncrement((volatile signed __int32 *)(v2 + 64));
    v6 = v23;
    _InterlockedCompareExchange(v23, -1, v24);
LABEL_10:
    v5 = v25;
    v4 = v26;
LABEL_11:
    if ( !v4 )
    {
      _InterlockedCompareExchange(v6, -2, -1);
      v3 += *(_DWORD *)(v2 + 40);
      v12 = (volatile signed __int32 *)(v5 + 4);
      if ( !*(_DWORD *)(v5 + 4) && !_InterlockedCompareExchange(v12, 1, 0) )
      {
        v13 = sub_1000F40E(4 * *(_DWORD *)(v2 + 40) | -((unsigned __int64)*(_DWORD *)(v2 + 40) >> 30 != 0));
        v14 = 4 * *(_DWORD *)(v2 + 40);
        v22 = (int)v13;
        sub_10028330(v13, 0, v14);
        v15 = (signed __int32)sub_1000F0A6(0xCu);
        v23 = (volatile signed __int32 *)v15;
        if ( v15 )
        {
          v16 = v22;
          *(_DWORD *)(v15 + 4) = 0;
          *(_DWORD *)(v15 + 8) = -1;
          *(_DWORD *)v15 = v16;
        }
        else
        {
          v15 = 0;
        }
        v17 = *(_DWORD *)(v2 + 60);
        if ( v17 < *(_DWORD *)(v2 + 56) )
        {
          *(_DWORD *)(*(_DWORD *)(v2 + 52) + 4 * v17) = v15;
          ++*(_DWORD *)(v2 + 60);
        }
        _InterlockedExchange(v12, v15);
        v5 = v25;
      }
      if ( *v12 == 1 )
      {
        v20 = 0;
        v21 = sub_10012578;
        do
          sub_10010BDE(&v19);
        while ( *v12 == 1 );
        v5 = v25;
      }
      v4 = v26;
    }
    v5 = *(_DWORD *)(v5 + 4);
    v25 = v5;
  }
  while ( !v4 );
  return v3;
}

//----- (10022170) --------------------------------------------------------
int __thiscall sub_10022170(void *this, int a2, char a3, int a4, int a5, int a6)
{
  int v6; // edi@1
  int v7; // eax@1
  int v8; // esi@3
  int v9; // ebx@5
  int v10; // eax@6
  int (__thiscall *v11)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@6
  int v12; // eax@7
  void (__thiscall *v13)(_DWORD, _DWORD); // esi@7
  void (__thiscall *v14)(_DWORD); // esi@9
  int result; // eax@12
  int v16; // [sp-14h] [bp-34h]@6
  int v17; // [sp-10h] [bp-30h]@6
  int v18; // [sp-Ch] [bp-2Ch]@6
  int v19; // [sp-8h] [bp-28h]@6
  int v20; // [sp-4h] [bp-24h]@6
  char v21; // [sp+Ch] [bp-14h]@11

  v6 = (int)this;
  v7 = (int)sub_100178E9();
  if ( v7 && sub_10014379(v7) == v6 )
  {
    v8 = a2;
  }
  else
  {
    v8 = a2;
    *(_DWORD *)(a2 + 228) = 1;
  }
  v9 = *(_DWORD *)(*(_DWORD *)(v6 + 256) + 4);
  if ( *(_DWORD *)(v9 + 440) <= 0
    || (sub_10019F0A((int)&v17, (int)&a3),
        v10 = *(_DWORD *)v9,
        v16 = v8,
        v11 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(v10 + 60),
        j_nullsub_1(*(_DWORD *)(v10 + 60)),
        !(unsigned __int8)v11(v9, v16, v17, v18, v19, v20)) )
  {
    v12 = *(_DWORD *)v6;
    v20 = a2;
    v13 = *(void (__thiscall **)(_DWORD, _DWORD))(v12 + 8);
    j_nullsub_1(*(_DWORD *)(v12 + 8));
    v13(v6, v20);
    if ( *(_DWORD *)(v6 + 12) & 0xFFFFFFF && (unsigned __int8)sub_1001A2EE((int)&a3, v6 + 12) )
    {
      v14 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v6 + 4);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v6 + 4));
      v14(v6);
    }
    if ( *(_DWORD *)(v9 + 436) > 0 )
    {
      sub_10019F0A((int)&v21, (int)&a3);
      v20 = 11;
      sub_10019F0A((int)&v16, (int)&v21);
      sub_100197F0((void *)v9, v6, v16, v17, v18, v19, v20);
    }
  }
  result = a2;
  *(_DWORD *)(a2 + 228) = 0;
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1002227A) --------------------------------------------------------
char __cdecl sub_1002227A(int a1)
{
  char result; // al@1

  result = sub_10018385(*(_DWORD *)(a1 + 36));
  if ( !result )
  {
    sub_1002235A(*(_DWORD *)(a1 + 16));
    *(_DWORD *)(a1 + 16) = 0;
    result = a1 + 72;
    _InterlockedExchange((volatile signed __int32 *)(a1 + 72), 0);
  }
  return result;
}

//----- (10022286) --------------------------------------------------------
signed __int32 __thiscall sub_10022286(int this, int a2, signed __int32 a3)
{
  signed __int32 result; // eax@1

  result = a3;
  if ( *(_DWORD *)((a2 << 7) + *(_DWORD *)(this + 92)) == a3 )
    result = _InterlockedCompareExchange((volatile signed __int32 *)((a2 << 7) + *(_DWORD *)(this + 92)), 0, a3);
  return result;
}

//----- (100222AB) --------------------------------------------------------
int __thiscall sub_100222AB(void *this, int a2, int a3)
{
  int v3; // eax@1
  int v4; // ebx@1
  PSINGLE_LIST_ENTRY v5; // eax@3
  int v6; // esi@4
  int (__thiscall *v7)(_DWORD, _DWORD, _DWORD); // esi@6
  int v8; // ecx@9
  int v10; // [sp+Ch] [bp-4h]@1

  v10 = (int)this;
  v3 = a3 + 96;
  v4 = 4 * ((*(_DWORD *)a2 & 0xFFFFFFF) == 0) + 12;
  if ( *(_DWORD *)a2 & 0xFFFFFFF )
    v3 = a3 + 16;
  v5 = InterlockedPopEntrySList((PSLIST_HEADER)v3);
  if ( v5 && (v6 = (int)&v5[-72], v5 != (PSINGLE_LIST_ENTRY)288) )
  {
    sub_100226FD(v6, v10, a3, a2);
  }
  else
  {
    v7 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v10 + 32);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v10 + 32));
    v6 = v7(v10, a3, a2);
  }
  *(_DWORD *)(v6 + 260) = *(_DWORD *)(v4 + v10);
  *(_DWORD *)(v4 + v10) = v6;
  if ( !*(_DWORD *)(a3 + 188) )
    sub_100217C7(a3);
  v8 = a3 + 96;
  if ( *(_DWORD *)a2 & 0xFFFFFFF )
    v8 = a3 + 16;
  sub_1002200A(v8, v6);
  return v6;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1002235A) --------------------------------------------------------
int __stdcall sub_1002235A(int a1)
{
  int v1; // esi@1
  void *v2; // eax@2
  int result; // eax@2

  v1 = a1;
  while ( v1 )
  {
    v2 = (void *)(v1 - 4);
    v1 = *(_DWORD *)v1;
    result = sub_1000F417(v2);
  }
  return result;
}

//----- (1002237B) --------------------------------------------------------
int __usercall sub_1002237B@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // esi@1
  volatile signed __int32 *v3; // edi@1
  LPVOID v4; // eax@3
  int v5; // eax@4

  sub_1000FB4A();
  v2 = v1;
  v3 = (volatile signed __int32 *)(v1 + 16);
  if ( !*(_DWORD *)(v1 + 16) && !_InterlockedCompareExchange(v3, 1, 0) )
  {
    v4 = sub_1000F0A6(0x2Cu);
    *(_DWORD *)(a1 - 16) = v4;
    *(_DWORD *)(a1 - 4) = 0;
    if ( v4 )
      v5 = sub_10021AE1(a1, *(_DWORD *)v2, v2 + 4, *(_DWORD *)(v2 + 12), 0);
    else
      v5 = 0;
    *(_DWORD *)(a1 - 4) = -1;
    *v3 = v5;
    *(_DWORD *)(v2 + 20) = v5;
  }
  if ( !*(_DWORD *)(v2 + 20) )
  {
    *(_DWORD *)(a1 - 24) = 0;
    *(_DWORD *)(a1 - 20) = sub_1001253A;
    do
      sub_10010BDE((void *)(a1 - 32));
    while ( !*(_DWORD *)(v2 + 20) );
  }
  return sub_1000FB24(20);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (100223F1) --------------------------------------------------------
char __thiscall sub_100223F1(void *this, int a2)
{
  int v2; // ebx@1
  int v3; // edx@1
  unsigned __int32 i; // esi@2
  signed __int32 v5; // eax@4
  int v6; // ecx@6
  int v7; // eax@6
  signed __int32 v8; // edx@7
  signed __int32 v9; // edi@7
  int v10; // eax@11
  int v11; // esi@16
  char v12; // al@16
  int v14; // [sp+Ch] [bp-18h]@16
  int v15; // [sp+10h] [bp-14h]@16
  int v16; // [sp+14h] [bp-10h]@1
  volatile signed __int32 *v17; // [sp+18h] [bp-Ch]@6
  int v18; // [sp+1Ch] [bp-8h]@11
  int v19; // [sp+20h] [bp-4h]@6

  v2 = (int)this;
  v16 = (int)this;
  v3 = (int)((char *)this + 24);
LABEL_2:
  for ( i = *(_DWORD *)v3; i != *(_DWORD *)(v2 + 28); i = v5 )
  {
    v5 = _InterlockedCompareExchange((volatile signed __int32 *)v3, i + 1, i);
    if ( v5 == i )
    {
      v6 = sub_10022797(v2, i, 0);
      v7 = v2 + 20;
      v19 = v6;
      v17 = (volatile signed __int32 *)(v2 + 20);
      if ( v6 != *(_DWORD *)(v2 + 20) )
      {
        v8 = *(_DWORD *)v7;
        v9 = *(_DWORD *)v7;
        while ( 1 )
        {
          while ( !(*(_DWORD *)(v2 + 12) + *(_DWORD *)(v9 + 20)) )
            v9 = *(_DWORD *)(v9 + 24);
          if ( *(_DWORD *)(v9 + 16) <= *(_DWORD *)(v8 + 16) )
            break;
          v10 = _InterlockedCompareExchange(v17, v9, v8);
          v2 = v16;
          v18 = v10;
          if ( v10 == v8 )
          {
            while ( v10 != v9 )
            {
              sub_10022CE1(v10, *(_DWORD *)(v2 + 12));
              v10 = *(_DWORD *)(v18 + 24);
              v18 = *(_DWORD *)(v18 + 24);
            }
            break;
          }
          v9 = v10;
          v8 = v10;
        }
        v6 = v19;
      }
      v11 = i - *(_DWORD *)(v6 + 16);
      v14 = v6;
      v15 = v11;
      v12 = sub_1001A73F((int)&v14, a2);
      v3 = v2 + 24;
      if ( v12 )
        return 1;
      goto LABEL_2;
    }
  }
  return 0;
}

//----- (100224E9) --------------------------------------------------------
int __thiscall sub_100224E9(int this, int a2)
{
  int v2; // edi@1
  int v3; // eax@1

  v2 = this;
  v3 = *(_DWORD *)(this + 256);
  if ( !(*(_BYTE *)(v3 + 48) & 4) )
    _InterlockedIncrement((volatile signed __int32 *)(v3 + 20));
  sub_1002291D(a2 + 76);
  _InterlockedExchange((volatile signed __int32 *)(a2 + 56), 1);
  return sub_10021D46(v2 + 168, a2 + 44);
}
// 1002291D: using guessed type int __thiscall sub_1002291D(_DWORD);

//----- (10022528) --------------------------------------------------------
#error "1002255B: call analysis failed (funcsize=17)"

//----- (10022563) --------------------------------------------------------
int __thiscall sub_10022563(void *this, int a2, int a3)
{
  int v3; // esi@1
  char v5; // [sp+Ch] [bp-10h]@1

  v3 = *(_DWORD *)((char *)this + ((*(_DWORD *)a2 & 0xFFFFFFF) != 0 ? 0xFFFFFFFC : 0) + 16);
  sub_1001FDFD(*(void **)(a3 + 4), (int)&v5);
  while ( v3 && (!(unsigned __int8)sub_1001A2EE(v3 + 12, a2) || *(_DWORD *)(v3 + 8) != a3) )
    v3 = *(_DWORD *)(v3 + 260);
  return v3;
}

//----- (100225B9) --------------------------------------------------------
int __thiscall sub_100225B9(int this)
{
  int v1; // edi@1
  signed int v2; // esi@1
  signed int v3; // ebx@1
  int v4; // eax@2
  int result; // eax@5
  int v6; // esi@7
  int v7; // [sp+Ch] [bp-4h]@2

  v1 = this;
  v2 = 0;
  v3 = *(_DWORD *)(this + 232);
  if ( v3 <= 0 )
  {
LABEL_5:
    result = 0;
  }
  else
  {
    while ( 1 )
    {
      v4 = sub_10016C85(v1 + 168, v2);
      v7 = v4;
      if ( v4 )
      {
        if ( sub_1002298F((PSLIST_HEADER)(v1 + 168), v4, v2, 0) )
          break;
      }
      ++v2;
      if ( v2 >= v3 )
        goto LABEL_5;
    }
    v6 = *(_DWORD *)(v7 + 8);
    _InterlockedExchange((volatile signed __int32 *)(v6 + 56), 0);
    sub_10018914(*(void **)(v1 + 256));
    result = v6;
  }
  return result;
}

//----- (10022620) --------------------------------------------------------
int __thiscall sub_10022620(int this, int a2, char a3)
{
  int v3; // ebp@0
  int v4; // edi@1
  int v5; // ecx@1
  int v6; // eax@1
  int v7; // esi@1

  v4 = this;
  v5 = *(_DWORD *)(*(_DWORD *)(this + 256) + 4);
  v6 = sub_10017EE7(v3, 1);
  v7 = v6;
  if ( v6 )
    sub_10020DA1(v6, v4, a2, a3);
  return v7;
}

//----- (10022653) --------------------------------------------------------
#error "100224E3: call analysis failed (funcsize=22)"

//----- (10022663) --------------------------------------------------------
int __userpurge sub_10022663@<eax>(int a1@<ebp>, int a2)
{
  int v2; // ecx@1
  int v3; // esi@1
  LPVOID v4; // eax@1
  LPVOID v5; // ecx@1
  int v6; // edi@1
  int v7; // eax@1

  sub_1000FB4A();
  v3 = v2;
  v4 = sub_1000F0A6(0x2Cu);
  v5 = v4;
  *(_DWORD *)(a1 - 16) = v4;
  v6 = *(_DWORD *)(a1 + 8);
  v7 = 0;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v5 )
    v7 = sub_10021AE1(a1, *(_DWORD *)v3, v3 + 4, *(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 12) + *(_DWORD *)(v6 + 16));
  *(_DWORD *)(v3 + 16) = v7;
  *(_DWORD *)(v6 + 24) = v7;
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (100226AD) --------------------------------------------------------
bool __thiscall sub_100226AD(int this)
{
  return *(_DWORD *)(this + 40) != 0;
}

//----- (100226B5) --------------------------------------------------------
BOOL __thiscall sub_100226B5(void *this)
{
  return sub_100228C4(this) != 0;
}

//----- (100226C1) --------------------------------------------------------
int __thiscall sub_100226C1(int this, int a2)
{
  int v2; // esi@1
  int result; // eax@1

  v2 = this;
  result = sub_100176BC((void *)(this + 4), a2);
  if ( *(_DWORD *)(v2 + 20) )
    result = sub_100176BC((void *)(*(_DWORD *)(v2 + 20) + 4), a2);
  return result;
}

//----- (100226EA) --------------------------------------------------------
int __thiscall sub_100226EA(int this, int a2)
{
  *(_DWORD *)(this + 20) = 1;
  return sub_10019F0A(this + 32, a2);
}

//----- (100226FD) --------------------------------------------------------
int __thiscall sub_100226FD(int this, int a2, int a3, int a4)
{
  int v4; // ebp@0
  int v5; // esi@1
  int v6; // ecx@1
  int v7; // eax@1
  char v9; // [sp+Ch] [bp-8h]@1
  LPVOID lpMem; // [sp+10h] [bp-4h]@1

  v5 = this;
  *(_DWORD *)(this + 256) = a2;
  *(_DWORD *)(this + 8) = a3;
  sub_10019F0A(this + 12, a4);
  *(_DWORD *)(v5 + 272) = 0;
  *(_DWORD *)(v5 + 284) = 1;
  v6 = *(_DWORD *)(a2 + 4);
  v7 = sub_10017D35(v4, (int)&v9, a4);
  sub_10021CF7(v5 + 28, v7);
  sub_1000F0A1(lpMem);
  if ( (*(_DWORD *)a4 & 0xFFFFFFF) == 3 )
    *(_DWORD *)(v5 + 36) = sub_1001F07D(*(_DWORD *)(a2 + 4), *(_DWORD *)(a4 + 8));
  return sub_100226C1(v5 + 52, v5 + 28);
}

//----- (10022781) --------------------------------------------------------
BOOL __thiscall sub_10022781(int this)
{
  return *(_DWORD *)(this + 4) <= *(_DWORD *)this && *(_DWORD *)(this + 80) <= *(_DWORD *)(this + 76);
}

//----- (10022797) --------------------------------------------------------
int __thiscall sub_10022797(int this, unsigned int a2, char a3)
{
  int v3; // ebp@0
  int v4; // esi@1
  int v5; // ecx@4
  int v6; // edx@6

  v4 = this;
  if ( !*(_DWORD *)(this + 20) )
    sub_1002237B(v3);
  if ( a3 )
    v5 = *(_DWORD *)(v4 + 16);
  else
    v5 = *(_DWORD *)(v4 + 20);
  v6 = v5;
  do
  {
    if ( a2 < *(_DWORD *)(v4 + 12) + *(_DWORD *)(v5 + 16) )
      break;
    v5 = *(_DWORD *)(v5 + 24);
    if ( !v5 )
      v5 = sub_10022663(v3, v6);
    v6 = v5;
  }
  while ( v5 );
  return v5;
}

//----- (100227E1) --------------------------------------------------------
int __thiscall sub_100227E1(int this, int a2, char a3)
{
  int v3; // edi@1
  int v4; // eax@1
  int v5; // ebx@2
  int v6; // esi@4
  int v7; // eax@5
  int v8; // eax@5
  int v9; // ST00_4@9
  int (__thiscall *v10)(_DWORD, _DWORD, _DWORD); // esi@9
  int result; // eax@9
  int (__thiscall *v12)(_DWORD, _DWORD, _DWORD); // esi@11
  char v13; // [sp+Ch] [bp-34h]@5
  char v14; // [sp+1Ch] [bp-24h]@4
  int v15; // [sp+2Ch] [bp-14h]@4
  int v16; // [sp+30h] [bp-10h]@4
  int v17; // [sp+34h] [bp-Ch]@4
  int v18; // [sp+38h] [bp-8h]@4
  int v19; // [sp+3Ch] [bp-4h]@4

  v3 = this;
  v4 = sub_10017A4F(*(void **)(this + 4));
  if ( v4 )
    v5 = *(_DWORD *)(v4 + 4);
  else
    v5 = sub_100180CC(*(_DWORD *)(v3 + 4));
  sub_1001FDFD(*(void **)(v5 + 4), (int)&v14);
  v6 = a2;
  v19 = v5;
  v15 = 0;
  v16 = 0;
  v17 = 0;
  v18 = 0;
  if ( !sub_10024A28((int)&v14, a2) )
  {
    do
    {
      v7 = sub_1001809F(*(_DWORD *)(v3 + 4), 0, v5);
      v5 = v7;
      v8 = sub_1001FDFD(*(void **)(v7 + 4), (int)&v13);
      sub_10019F0A((int)&v14, v8);
      if ( v5 == v19 )
        v6 = (int)&v15;
    }
    while ( !sub_10024A28((int)&v14, v6) );
    a2 = v6;
  }
  v9 = v6;
  v10 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v3 + 36);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 36));
  result = v10(v3, v9, v5);
  if ( !result && a3 )
  {
    sub_100124FC((volatile signed __int32 *)(v3 + 8));
    v12 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v3 + 36);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 36));
    result = v12(v3, a2, v5);
    if ( !result )
      result = sub_100222AB((void *)v3, a2, v5);
    *(_DWORD *)(v3 + 8) = 0;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100228C4) --------------------------------------------------------
int __thiscall sub_100228C4(void *this)
{
  int v1; // esi@1
  signed int v2; // edi@1
  int result; // eax@2

  v1 = (int)this;
  v2 = 0;
  if ( *((_DWORD *)this + 38) > 0 )
  {
    do
    {
      result = sub_10016C85(v1 + 88, v2);
      if ( result )
      {
        if ( *(_DWORD *)(result + 4) > *(_DWORD *)result || *(_DWORD *)(result + 80) > *(_DWORD *)(result + 76) )
          return result;
        if ( *(_DWORD *)(result + 56) == 1 )
          sub_10022B15(v1, result);
      }
      ++v2;
    }
    while ( v2 < *(_DWORD *)(v1 + 152) );
  }
  return *(_DWORD *)(v1 + 76) != *(_DWORD *)(v1 + 80);
}

//----- (1002291D) --------------------------------------------------------
#error "1002294A: call analysis failed (funcsize=15)"

//----- (10022950) --------------------------------------------------------
int __thiscall sub_10022950(void *this, int a2)
{
  return sub_10021D46((int)((char *)this + 168), a2 + 44);
}

//----- (10022969) --------------------------------------------------------
PSINGLE_LIST_ENTRY __thiscall sub_10022969(void *this, int a2)
{
  int v2; // ebp@0
  void *v3; // esi@1

  v3 = this;
  sub_10020EDB(a2, v2);
  return sub_100190B3(*(_DWORD *)(*((_DWORD *)v3 + 64) + 4), a2, 0);
}

//----- (1002298F) --------------------------------------------------------
char __thiscall sub_1002298F(PSLIST_HEADER ListHead, int a2, int a3, char a4)
{
  int v4; // esi@1
  int v5; // edx@1
  signed __int32 v6; // edi@1
  char result; // al@2
  struct _SINGLE_LIST_ENTRY *v8; // ecx@3
  int v9; // eax@3
  int v10; // edx@4
  int v11; // ebx@4
  int v12; // edx@5
  PSINGLE_LIST_ENTRY v13; // eax@15
  int v14; // ST08_4@15

  v4 = (int)ListHead;
  v5 = a3 >> *(_DWORD *)&ListHead[5].s.Depth;
  v6 = a3 & (unsigned int)((char *)&ListHead[5].s.Next.Next[-1].Next + 3);
  if ( v5 < *(_DWORD *)&ListHead[7].s.Depth )
  {
    v8 = ListHead[7].s.Next.Next;
    v9 = *(_DWORD *)(v4 + 52);
    if ( v5 < (signed int)v8 )
    {
      v11 = *(_DWORD *)(v9 + 4 * v5);
    }
    else
    {
      v10 = v5 - (_DWORD)v8;
      v11 = *(_DWORD *)(v9 + 4 * (_DWORD)v8 - 4);
      if ( v10 >= 0 )
      {
        v12 = v10 + 1;
        do
        {
          v11 = *(_DWORD *)(v11 + 4);
          --v12;
        }
        while ( v12 );
      }
    }
    if ( _InterlockedCompareExchange((volatile signed __int32 *)(*(_DWORD *)v11 + 4 * v6), 0, a2) == a2 )
    {
      _InterlockedCompareExchange((volatile signed __int32 *)(v11 + 8), v6, -2);
      if ( a4 )
      {
        if ( (signed int)QueryDepthSList((PSLIST_HEADER)v4) <= *(_DWORD *)(v4 + 68) )
        {
          InterlockedPushEntrySList((PSLIST_HEADER)v4, (PSINGLE_LIST_ENTRY)(a2 + 4));
        }
        else
        {
          InterlockedPushEntrySList((PSLIST_HEADER)(v4 + 8), (PSINGLE_LIST_ENTRY)(a2 + 4));
          if ( (signed int)QueryDepthSList((PSLIST_HEADER)(v4 + 8)) > *(_DWORD *)(v4 + 68)
            && !sub_10018385(*(_DWORD *)(v4 + 36))
            && !_InterlockedCompareExchange((volatile signed __int32 *)(v4 + 72), 1, 0) )
          {
            v13 = InterlockedFlushSList((PSLIST_HEADER)(v4 + 8));
            v14 = *(_DWORD *)(v4 + 36);
            *(_DWORD *)(v4 + 16) = v13;
            sub_1001898B(v4 + 20, (int (__cdecl *)(_DWORD))sub_1002227A, v4, v14);
          }
        }
      }
      result = 1;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10022A8C) --------------------------------------------------------
char __thiscall sub_10022A8C(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_10019490(*(void **)(*(_DWORD *)(this + 256) + 4), this + 272);
  return sub_10021928(*(void **)(v1 + 8), v1);
}

//----- (10022AAF) --------------------------------------------------------
char __thiscall sub_10022AAF(int this)
{
  int v1; // edi@1
  int v2; // ecx@1
  int v3; // esi@2
  char result; // al@2
  int v5; // ecx@3
  int v6; // esi@4

  v1 = this;
  v2 = *(_DWORD *)(this + 16);
  if ( v2 )
  {
    do
    {
      v3 = *(_DWORD *)(v2 + 260);
      result = sub_10022A8C(v2);
      v2 = v3;
    }
    while ( v3 );
  }
  v5 = *(_DWORD *)(v1 + 12);
  if ( v5 )
  {
    do
    {
      v6 = *(_DWORD *)(v5 + 260);
      result = sub_10022A8C(v5);
      v5 = v6;
    }
    while ( v6 );
  }
  *(_DWORD *)(v1 + 16) = 0;
  *(_DWORD *)(v1 + 12) = 0;
  return result;
}

//----- (10022AEE) --------------------------------------------------------
signed __int32 __thiscall sub_10022AEE(int this, int a2)
{
  int v2; // esi@1

  v2 = this;
  sub_1001AE64((PSLIST_HEADER)(this + 88), a2, *(_DWORD *)(a2 + 68), 1);
  return sub_10018914(*(void **)(v2 + 256));
}

//----- (10022B15) --------------------------------------------------------
char __thiscall sub_10022B15(int this, int a2)
{
  int v2; // edi@1

  v2 = this;
  if ( sub_1002298F((PSLIST_HEADER)(this + 168), a2 + 44, *(_DWORD *)(a2 + 44), 0) )
  {
    if ( *(_DWORD *)(a2 + 80) <= *(_DWORD *)(a2 + 76) )
    {
      sub_10023AA3(a2, v2);
      return 1;
    }
    sub_10023A45(a2, v2);
  }
  return 0;
}

//----- (10022B57) --------------------------------------------------------
int __thiscall sub_10022B57(void *this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3, int a4)
{
  void *v4; // edi@1
  int (__thiscall *v5)(_DWORD, _DWORD, _DWORD); // esi@1
  int v6; // eax@1

  v4 = this;
  v5 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 20);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 20));
  v6 = v5(v4, a4, 1);
  return sub_10022BAD(v6, a2, a3);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10022B86) --------------------------------------------------------
int __thiscall sub_10022B86(void *this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3)
{
  void *v3; // edi@1
  int v4; // ST00_4@1
  int (__thiscall *v5)(_DWORD, _DWORD, _DWORD); // esi@1
  int v6; // eax@1

  v3 = this;
  v4 = (int)((char *)this + 32);
  v5 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 20);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 20));
  v6 = v5(v3, v4, 1);
  return sub_10022BAD(v6, a2, a3);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10022BAD) --------------------------------------------------------
int __thiscall sub_10022BAD(int this, struct _SINGLE_LIST_ENTRY *a2, struct _SINGLE_LIST_ENTRY *a3)
{
  int v3; // ebx@1
  int v4; // eax@2
  int v5; // edi@2
  int v6; // eax@2
  int v7; // ecx@2
  int v8; // eax@4
  int v9; // esi@4
  int v10; // eax@6
  signed __int32 v11; // esi@9
  int v12; // edx@15
  void (__thiscall *v13)(_DWORD); // esi@16
  int result; // eax@17
  int (__thiscall *v15)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@18
  int v16; // [sp-10h] [bp-2Ch]@18
  int v17; // [sp-Ch] [bp-28h]@18
  struct _SINGLE_LIST_ENTRY *v18; // [sp-8h] [bp-24h]@2
  struct _SINGLE_LIST_ENTRY *v19; // [sp-4h] [bp-20h]@2
  char v20; // [sp+Ch] [bp-10h]@20
  signed __int32 v21; // [sp+18h] [bp-4h]@10

  v3 = this;
  if ( !a2 )
  {
    sub_1000D988(&v20, (int)"proc");
    sub_10027494((int)&v20, (int)&unk_10075484);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10022CE1);
  }
  v4 = *(_DWORD *)(this + 256);
  v19 = a3;
  v18 = a2;
  v5 = *(_DWORD *)(v4 + 4);
  v6 = sub_10018165(*(_DWORD *)(v4 + 4), a2, a3);
  v7 = *(_DWORD *)(v3 + 256);
  if ( !(*(_BYTE *)(v7 + 48) & 4) )
    _InterlockedIncrement((volatile signed __int32 *)(v7 + 20));
  sub_10022528(v6);
  v8 = (int)sub_100178E9();
  v9 = v8;
  if ( v8 && sub_10018398(v8) == v5 )
  {
    v10 = *(_DWORD *)(v9 + 156);
    if ( *(_BYTE *)(v9 + 76) )
      ++*(_DWORD *)(v10 + 8);
    else
      ++*(_DWORD *)(v10 + 104);
  }
  else
  {
    v11 = (signed __int32)sub_10012193(*(_DWORD *)(v5 + 24));
    if ( !v11 )
    {
      v11 = (signed __int32)sub_1000F0A6(0x1Cu);
      v21 = v11;
      if ( v11 )
      {
        *(_DWORD *)(v11 + 8) = 0;
        *(_DWORD *)(v11 + 12) = 0;
        *(_DWORD *)(v11 + 16) = 0;
        *(_DWORD *)(v11 + 20) = 0;
        *(_DWORD *)(v11 + 24) = 1;
      }
      else
      {
        v11 = 0;
      }
      sub_10021EA8(v5 + 200, v11);
      sub_100121A1(*(_DWORD *)(v5 + 24), (LPVOID)v11);
    }
    ++*(_DWORD *)(v11 + 8);
  }
  v12 = v3 + 12;
  if ( *(_DWORD *)(v3 + 12) & 0xFFFFFFF )
  {
    v13 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v3 + 4);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 4));
    v13(v3);
    v12 = v3 + 12;
  }
  result = *(_DWORD *)(v5 + 440);
  if ( *(_DWORD *)(v5 + 436) - result > 0 )
  {
    sub_10019F0A((int)&v16, v12);
    v15 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v5 + 56);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v5 + 56));
    result = v15(v5, v3, v16, v17, v18, v19);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 10022528: using guessed type _DWORD __stdcall sub_10022528(_DWORD);

//----- (10022CE1) --------------------------------------------------------
int __thiscall sub_10022CE1(int this, unsigned int a2)
{
  int result; // eax@1

  result = this + 20;
  if ( !(a2 + _InterlockedExchangeAdd((volatile signed __int32 *)(this + 20), a2)) )
    result = sub_1001898B(this + 28, (int (__cdecl *)(_DWORD))sub_1001F7CE, this, *(_DWORD *)this);
  return result;
}

//----- (10022D07) --------------------------------------------------------
int __thiscall sub_10022D07(int this, char a2)
{
  int v2; // ebp@0
  int v3; // esi@1
  signed int v4; // ebx@1
  signed int v5; // eax@2
  int v6; // eax@3
  int v7; // edi@3
  int result; // eax@5
  int v9; // eax@7
  int v10; // ecx@8
  int v11; // eax@8
  bool v12; // al@12
  int v13; // ecx@17
  int v14; // ecx@20
  int v15; // eax@21
  int v16; // edi@21
  bool v17; // al@26
  int v18; // eax@35
  int v19; // [sp+Ch] [bp-5Ch]@1
  int v20; // [sp+10h] [bp-58h]@0
  int v21; // [sp+14h] [bp-54h]@5
  int v22; // [sp+18h] [bp-50h]@2
  int v23; // [sp+1Ch] [bp-4Ch]@2
  char v24; // [sp+22h] [bp-46h]@2
  char v25; // [sp+23h] [bp-45h]@1
  int v26[16]; // [sp+24h] [bp-44h]@8

  v3 = this;
  LOBYTE(v20) = a2;
  v4 = 0;
  v25 = 0;
  v19 = *(_DWORD *)(this + 152);
  if ( v19 > 0 )
  {
    v5 = 0;
    v22 = 0;
    v24 = 0;
    v23 = 0;
    while ( 1 )
    {
      v6 = sub_10016C85(v3 + 88, v5);
      v7 = v6;
      if ( v6 )
      {
        if ( (unsigned __int8)sub_10022781(v6) )
        {
          v12 = *(_DWORD *)(v7 + 56) == 1;
        }
        else
        {
          result = sub_10023BEA(v2);
          v21 = result;
          if ( result )
            return result;
          if ( !v24 )
          {
            v9 = v22;
            if ( v22 < 15 )
            {
              v10 = v23;
              v26[v22] = v23;
              v11 = v9 + 1;
              v22 = v11;
              goto LABEL_17;
            }
            result = sub_10023AE9(v20);
            v21 = result;
            if ( result )
              return result;
          }
          v12 = *(_DWORD *)(v7 + 56) == 1 && (unsigned __int8)sub_10022781(v7);
        }
        v25 |= v12;
      }
      v11 = v22;
      v10 = v23;
LABEL_17:
      v13 = v10 + 1;
      v23 = v13;
      if ( v13 >= v19 )
      {
        if ( v11 > 0 )
        {
          v14 = 0;
          v23 = 0;
          while ( 1 )
          {
            v15 = sub_10016C85(v3 + 88, v26[v14]);
            v16 = v15;
            if ( v15 )
            {
              if ( !(unsigned __int8)sub_10022781(v15) )
              {
                result = sub_10023AE9(v20);
                v21 = result;
                if ( result )
                  return result;
              }
              v17 = *(_DWORD *)(v16 + 56) == 1 && (unsigned __int8)sub_10022781(v16);
              v25 |= v17;
            }
            v14 = v23 + 1;
            v23 = v14;
            if ( v14 >= v22 )
              goto LABEL_30;
          }
        }
        break;
      }
      v5 = v13;
    }
  }
LABEL_30:
  if ( sub_100223F1((void *)(v3 + 52), (int)&v21) )
  {
    sub_10023F1F(v21, 1);
    result = v21;
  }
  else
  {
    if ( *(_DWORD *)(v3 + 232) > 0 && v25 && *(_DWORD *)(v3 + 152) > 0 )
    {
      do
      {
        v18 = sub_10016C85(v3 + 88, v4);
        if ( v18 && *(_DWORD *)(v18 + 56) == 1 && *(_DWORD *)(v18 + 80) <= *(_DWORD *)(v18 + 76) )
          sub_10022B15(v3, v18);
        ++v4;
      }
      while ( v4 < *(_DWORD *)(v3 + 152) );
    }
    result = 0;
  }
  return result;
}
// 10023AE9: using guessed type _DWORD __stdcall sub_10023AE9(_DWORD);
// 10022D07: using guessed type int var_44[16];

//----- (10022EB8) --------------------------------------------------------
int __thiscall sub_10022EB8(int *this, int a2, int a3)
{
  int *v3; // esi@1
  unsigned int v4; // edi@1
  unsigned int v5; // esi@1
  int *v7; // [sp+10h] [bp-4h]@1

  v3 = this;
  v4 = 0;
  v7 = this;
  sub_100166FB((void *)a2, *this);
  v5 = (unsigned int)(*v3 + 31) >> 5;
  if ( v5 )
  {
    do
    {
      *(_DWORD *)(*(_DWORD *)(a2 + 4) + 4 * v4) = *(_DWORD *)(v7[1] + 4 * v4) & *(_DWORD *)(*(_DWORD *)(a3 + 4) + 4 * v4);
      ++v4;
    }
    while ( v4 < v5 );
  }
  return a2;
}

//----- (10022F0A) --------------------------------------------------------
int __thiscall sub_10022F0A(int this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // ST14_4@1
  volatile signed __int32 *v5; // ebx@1
  int v6; // eax@1
  int v7; // esi@1
  int v8; // edi@1
  int result; // eax@1

  v3 = this;
  v4 = this + 32;
  sub_100124FC((volatile signed __int32 *)(this + 32));
  v5 = (volatile signed __int32 *)(v3 + 28);
  v6 = sub_10022797(v3, *(_DWORD *)(v3 + 28), 1);
  v7 = v6;
  v8 = *v5 - *(_DWORD *)(v6 + 16);
  *(_DWORD *)(*(_DWORD *)(v6 + 12) + 4 * v8) = a3;
  _InterlockedIncrement(v5);
  *(_DWORD *)v4 = 0;
  result = a2;
  *(_DWORD *)(a2 + 4) = v8;
  *(_DWORD *)a2 = v7;
  return result;
}

//----- (10022F99) --------------------------------------------------------
volatile signed __int32 *__thiscall sub_10022F99(int this, int a2)
{
  unsigned int v2; // edi@1
  unsigned int v3; // esi@1
  volatile signed __int32 *result; // eax@2

  v2 = 0;
  v3 = (unsigned int)(*(_DWORD *)this + 31) >> 5;
  if ( v3 )
  {
    do
    {
      result = (volatile signed __int32 *)(4 * v2 + *(_DWORD *)(this + 4));
      _InterlockedOr(result, *(_DWORD *)(*(_DWORD *)(a2 + 4) + 4 * v2++));
    }
    while ( v2 < v3 );
  }
  return result;
}

//----- (10022FD1) --------------------------------------------------------
int __thiscall sub_10022FD1(void *this, int a2, int a3, int a4, int a5)
{
  void *v5; // edi@1
  int (__thiscall *v6)(_DWORD, _DWORD, _DWORD); // esi@1
  void *v7; // eax@1

  v5 = this;
  v6 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)this + 20);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 20));
  v7 = (void *)v6(v5, a4, 1);
  *(_DWORD *)a5 = v7;
  sub_10023008(v7, a2, a3);
  return a2;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10023008) --------------------------------------------------------
int __thiscall sub_10023008(void *this, int a2, int a3)
{
  sub_10022F0A((int)((char *)this + 52), a2, a3);
  return a2;
}

//----- (10023020) --------------------------------------------------------
signed __int32 __thiscall sub_10023020(signed __int32 this)
{
  signed __int32 v1; // esi@1
  int v2; // edi@1
  signed __int32 result; // eax@1

  v1 = this;
  v2 = *(_DWORD *)(*(_DWORD *)(this + 256) + 4);
  sub_10023053(*(void **)(*(_DWORD *)(this + 256) + 4), this + 28);
  result = *(_DWORD *)(v1 + 12) & 0xFFFFFFF;
  if ( result == 3 )
    result = sub_10023093(v2, *(_DWORD *)(v1 + 36), v1);
  return result;
}

//----- (10023053) --------------------------------------------------------
int __thiscall sub_10023053(void *this, int a2)
{
  void *v2; // esi@1
  int result; // eax@1
  int v4; // eax@2
  char v5; // [sp+8h] [bp-8h]@2
  LPVOID lpMem; // [sp+Ch] [bp-4h]@2

  v2 = this;
  result = sub_1001894D(a2, (int)((char *)this + 72));
  if ( (_BYTE)result )
  {
    v4 = sub_10022EB8((int *)a2, (int)&v5, (int)((char *)v2 + 72));
    sub_10022F99((int)((char *)v2 + 84), v4);
    result = sub_1000F0A1(lpMem);
  }
  return result;
}

//----- (10023093) --------------------------------------------------------
signed __int32 __thiscall sub_10023093(int this, int a2, signed __int32 a3)
{
  signed __int32 result; // eax@1

  result = *(_DWORD *)(this + 92);
  if ( !*(_DWORD *)((a2 << 7) + result) )
    result = _InterlockedCompareExchange((volatile signed __int32 *)((a2 << 7) + *(_DWORD *)(this + 92)), a3, 0);
  return result;
}

//----- (100230B9) --------------------------------------------------------
int __cdecl sub_100230B9(int a1)
{
  int v1; // ecx@1
  int v2; // ebx@1

  sub_1000FB4A();
  v2 = v1;
  sub_100124EC((void *)(v1 + 8));
  *(_DWORD *)(a1 + 232) = 0;
  **(_DWORD **)(v2 + 4) = a1;
  *(_DWORD *)(v2 + 4) = a1 + 232;
  sub_1001252F((void *)(v2 + 8));
  return sub_1000FB24(0);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (100230C8) --------------------------------------------------------
int __thiscall sub_100230C8(int this, int a2, int a3)
{
  bool v3; // zf@1
  int result; // eax@2
  int v5; // [sp+0h] [bp-10h]@1
  int v6; // [sp+4h] [bp-Ch]@1
  int v7; // [sp+8h] [bp-8h]@1
  int v8; // [sp+Ch] [bp-4h]@1

  v3 = (*(_BYTE *)(this + 48) & 4) == 0;
  v5 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  if ( v3 )
    result = *(_DWORD *)(this + 56);
  else
    result = sub_10022563((void *)this, (int)&v5, a3);
  return result;
}

//----- (100230F9) --------------------------------------------------------
int __thiscall sub_100230F9(int this, int a2, char a3)
{
  int v3; // esi@1
  bool v4; // zf@1
  int result; // eax@2
  int v6; // eax@6
  int v7; // [sp+8h] [bp-10h]@1
  int v8; // [sp+Ch] [bp-Ch]@1
  int v9; // [sp+10h] [bp-8h]@1
  int v10; // [sp+14h] [bp-4h]@1

  v3 = this;
  v7 = 0;
  v8 = 0;
  v9 = 0;
  v4 = (*(_BYTE *)(this + 48) & 4) == 0;
  v10 = 0;
  if ( v4 )
  {
    result = *(_DWORD *)(this + 56);
    if ( a3 && !result )
    {
      sub_100124FC((volatile signed __int32 *)(this + 8));
      result = *(_DWORD *)(v3 + 56);
      if ( !result )
      {
        v6 = sub_100180CC(*(_DWORD *)(v3 + 4));
        result = sub_100222AB((void *)v3, (int)&v7, v6);
        *(_DWORD *)(v3 + 56) = result;
      }
      *(_DWORD *)(v3 + 8) = 0;
    }
  }
  else
  {
    result = sub_100227E1(this, (int)&v7, a3);
  }
  return result;
}

//----- (10023164) --------------------------------------------------------
int __userpurge sub_10023164@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // eax@1
  int v6; // ecx@1
  signed __int32 v7; // eax@1
  int v8; // ecx@4

  sub_1000FB4A();
  v4 = v3;
  *(_DWORD *)(a1 - 16) = v3;
  sub_1001A0F8(*(_DWORD *)(a1 + 8), 1);
  *(_DWORD *)v4 = off_10066F18;
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(v4 + 160) = 0;
  *(_DWORD *)(v4 + 164) = 0;
  v5 = sub_10011D4E(0);
  v6 = *(_DWORD *)(v4 + 28);
  *(_DWORD *)(v4 + 168) = v5;
  *(_DWORD *)(v4 + 24) = sub_10017D2C(v6);
  v7 = (signed __int32)sub_1000F0A6(0x1Cu);
  *(_DWORD *)(a1 - 20) = v7;
  if ( v7 )
  {
    *(_DWORD *)(v7 + 8) = 0;
    *(_DWORD *)(v7 + 12) = 0;
    *(_DWORD *)(v7 + 16) = 0;
    *(_DWORD *)(v7 + 20) = 0;
    *(_DWORD *)(v7 + 24) = 1;
  }
  else
  {
    v7 = 0;
  }
  v8 = *(_DWORD *)(v4 + 28) + 200;
  *(_DWORD *)(v4 + 156) = v7;
  sub_10021EA8(v8, v7);
  sub_10023400((PVOID)v4, 0, *(_DWORD *)(a1 + 12));
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1001A0F8: using guessed type _DWORD __stdcall sub_1001A0F8(_DWORD, _DWORD);
// 10066F18: using guessed type int (*off_10066F18[5])();

//----- (100231FD) --------------------------------------------------------
int __thiscall sub_100231FD(void *this)
{
  int v1; // ebp@0
  void *v2; // esi@1

  v2 = this;
  *(_DWORD *)this = off_10066F18;
  sub_100232D3((int)this, v1);
  return sub_1001A236(v2);
}
// 10066F18: using guessed type int (*off_10066F18[5])();

//----- (10023244) --------------------------------------------------------
LPVOID __thiscall sub_10023244(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_100231FD(lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (10023269) --------------------------------------------------------
int __thiscall sub_10023269(int this, int a2)
{
  int v2; // ebp@0
  int v3; // eax@1
  int result; // eax@2

  v3 = sub_10023350(this, v2);
  if ( v3 )
    result = sub_1001FF73((void *)v3, a2);
  else
    result = sub_10020079(a2);
  return result;
}

//----- (1002328A) --------------------------------------------------------
DWORD __thiscall sub_1002328A(int this)
{
  int v1; // ebx@1
  int v2; // edi@1
  int v3; // ST0C_4@1
  int (__thiscall *v4)(_DWORD); // esi@1
  int v5; // eax@1
  DWORD result; // eax@1

  v1 = this;
  v2 = *(_DWORD *)(this + 28);
  v3 = *(_DWORD *)(this + 8);
  v4 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 4));
  v5 = v4(v2);
  sub_1001B15B(3, 4, v5, v3);
  result = _InterlockedIncrement((volatile signed __int32 *)(v1 + 44));
  if ( result == 1 )
    result = WaitForSingleObjectEx(*(HANDLE *)(v1 + 168), 0xFFFFFFFF, 0);
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100232D3) --------------------------------------------------------
int __usercall sub_100232D3@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1
  int result; // eax@7

  v2 = a1;
  sub_1001A786(a1, a2);
  if ( *(_DWORD *)(v2 + 164) )
  {
    CloseHandle(*(HANDLE *)(v2 + 164));
    *(_DWORD *)(v2 + 164) = 0;
  }
  if ( *(_DWORD *)(v2 + 168) )
    CloseHandle(*(HANDLE *)(v2 + 168));
  if ( *(_DWORD *)(v2 + 160) )
    sub_10019635(*(PSINGLE_LIST_ENTRY *)(v2 + 160));
  result = *(_DWORD *)(v2 + 156);
  *(_DWORD *)(v2 + 156) = 0;
  *(_DWORD *)(result + 24) = 0;
  return result;
}

//----- (1002332B) --------------------------------------------------------
char __thiscall sub_1002332B(int this, int a2)
{
  int v2; // ebp@0
  int v3; // eax@1
  char result; // al@2

  v3 = sub_10023350(this, v2);
  if ( v3 )
    result = sub_1001FFED((void *)v3, a2);
  else
    result = sub_1000F0A1((LPVOID)(a2 - 4));
  return result;
}

//----- (10023350) --------------------------------------------------------
int __usercall sub_10023350@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1

  v2 = a1;
  if ( !*(_DWORD *)(a1 + 160) )
    *(_DWORD *)(a1 + 160) = sub_100181EE(a2);
  return *(_DWORD *)(v2 + 160);
}

//----- (10023372) --------------------------------------------------------
signed int sub_10023372()
{
  return -1;
}

//----- (10023376) --------------------------------------------------------
int __stdcall sub_10023376(int a1, int a2, int a3, int a4)
{
  sub_100178A6(*(void **)(a2 + 28), a2, 0);
  return sub_100124B7(a1, a3);
}

//----- (10023398) --------------------------------------------------------
char __stdcall sub_10023398(PVOID a1, int a2)
{
  sub_100121E7(*((HANDLE *)a1 + 43));
  return sub_100178A6(*((void **)a1 + 7), (int)a1, 0);
}

//----- (100233BB) --------------------------------------------------------
BOOL __thiscall sub_100233BB(int this)
{
  return *(_DWORD *)(this + 44) == 1;
}

//----- (100233C7) --------------------------------------------------------
void __thiscall sub_100233C7(int this, char a2)
{
  int v2; // eax@3
  char v3; // [sp+0h] [bp-Ch]@6

  if ( a2 )
  {
    ++*(_DWORD *)(this + 20);
  }
  else
  {
    v2 = *(_DWORD *)(this + 20);
    if ( !v2 )
    {
      sub_10019F9E((int)&v3);
      sub_10027494((int)&v3, (int)&unk_100766A0);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_10023400);
    }
    *(_DWORD *)(this + 20) = v2 - 1;
  }
}

//----- (10023400) --------------------------------------------------------
int __userpurge sub_10023400@<eax>(PVOID Context@<ecx>, int a2@<edi>, char a3)
{
  int v3; // esi@1
  int result; // eax@1
  HANDLE *v5; // edi@2
  HANDLE v6; // ST08_4@2
  HANDLE v7; // ST04_4@2
  HANDLE v8; // eax@2
  int v9; // eax@3
  char v10; // [sp+8h] [bp-10h]@12

  v3 = (int)Context;
  *((_BYTE *)Context + 152) = a3;
  result = GetCurrentThreadId();
  *(_DWORD *)(v3 + 68) = result;
  if ( !a3 )
  {
    v5 = (HANDLE *)(v3 + 164);
    v6 = GetCurrentProcess();
    v7 = GetCurrentThread();
    v8 = GetCurrentProcess();
    if ( !DuplicateHandle(v8, v7, v6, (LPHANDLE)(v3 + 164), 0, 0, 2u) )
    {
      v9 = GetLastError();
      if ( v9 > 0 )
LABEL_11:
        v9 = (unsigned __int16)v9 | 0x80070000;
LABEL_12:
      sub_1001A018((int)&v10, v9);
      sub_10027494((int)&v10, (int)&unk_10075954);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_100234C7);
    }
    if ( sub_100145C1() < 3 )
    {
      result = (int)sub_1001203C(*v5, (WAITORTIMERCALLBACK)sub_10023398, (PVOID)v3);
      *(_DWORD *)(v3 + 172) = result;
    }
    else
    {
      result = sub_10012448((int)*v5, (int)sub_10023376, v3);
      *(_DWORD *)(v3 + 172) = result;
      if ( !result )
      {
        v9 = GetLastError();
        if ( v9 > 0 )
          goto LABEL_11;
        goto LABEL_12;
      }
    }
  }
  return result;
}

//----- (100234C7) --------------------------------------------------------
BOOL __usercall sub_100234C7@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // esi@1
  BOOL result; // eax@1

  v2 = a1;
  sub_1001AD97(a1, a2);
  result = *(_DWORD *)(v2 + 164);
  if ( result )
  {
    result = CloseHandle(*(HANDLE *)(v2 + 164));
    *(_DWORD *)(v2 + 164) = 0;
  }
  return result;
}

//----- (100234E9) --------------------------------------------------------
int __thiscall sub_100234E9(void *this)
{
  void *v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = this;
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)this + 28);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 28));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10023500) --------------------------------------------------------
signed __int32 __thiscall sub_10023500(void *this)
{
  void *v1; // ebx@1
  int v2; // edi@2
  int v3; // ST0C_4@2
  int (__thiscall *v4)(_DWORD); // esi@2
  int v5; // eax@2
  signed __int32 v6; // eax@2
  signed __int32 result; // eax@3
  char v8; // [sp+4h] [bp-Ch]@6

  v1 = this;
  if ( this == sub_100178E9() )
  {
    sub_10019F3F((int)&v8);
    sub_10027494((int)&v8, (int)&unk_10076668);
    goto LABEL_8;
  }
  v2 = *((_DWORD *)v1 + 7);
  v3 = *((_DWORD *)v1 + 2);
  v4 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 4));
  v5 = v4(v2);
  sub_1001B15B(4, 4, v5, v3);
  v6 = _InterlockedDecrement((volatile signed __int32 *)v1 + 11);
  if ( !v6 )
    return SetEvent(*((HANDLE *)v1 + 42));
  result = v6 + 1;
  if ( (unsigned int)result > 1 )
  {
    sub_10019F50((int)&v8);
    sub_10027494((int)&v8, (int)&unk_10076630);
LABEL_8:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10023582);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10023582) --------------------------------------------------------
BOOL __thiscall sub_10023582(int this)
{
  int v1; // edi@1
  int v2; // ST0C_4@1
  int (__thiscall *v3)(_DWORD); // esi@1
  int v4; // eax@1

  v1 = *(_DWORD *)(this + 28);
  v2 = *(_DWORD *)(this + 8);
  v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 4));
  v4 = v3(v1);
  sub_1001B15B(5, 4, v4, v2);
  return SwitchToThread();
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100235B1) --------------------------------------------------------
void *__thiscall sub_100235B1(void *this, int a2)
{
  void *v2; // esi@1
  void *result; // eax@1

  v2 = this;
  sub_100200B2(this, a2);
  *(_DWORD *)v2 = off_10066F84;
  result = v2;
  *((_DWORD *)v2 + 1) = off_10066FAC;
  return result;
}
// 10066F84: using guessed type int (*off_10066F84[3])();
// 10066FAC: using guessed type int (*off_10066FAC[5])();

//----- (100235D9) --------------------------------------------------------
void *__thiscall sub_100235D9(void *this, int a2)
{
  int v2; // ebp@0
  void *v3; // edi@1
  void *result; // eax@1

  v3 = this;
  *(_DWORD *)this = off_10066F64;
  sub_10016741(v2, a2);
  *(_DWORD *)v3 = off_10066FF8;
  result = v3;
  *((_DWORD *)v3 + 2) = &off_10067018;
  return result;
}
// 10066F64: using guessed type int (*off_10066F64[7])();
// 10066FF8: using guessed type int (*off_10066FF8[2])();
// 10067018: using guessed type int (__stdcall *off_10067018)(int);

//----- (1002360C) --------------------------------------------------------
int __thiscall sub_1002360C(void *this)
{
  void *v1; // ecx@1

  *(_DWORD *)this = off_10066FF8;
  v1 = (char *)this + 8;
  *(_DWORD *)v1 = &off_10067018;
  return sub_10016BCA(v1);
}
// 10066FF8: using guessed type int (*off_10066FF8[2])();
// 10067018: using guessed type int (__stdcall *off_10067018)(int);

//----- (10023620) --------------------------------------------------------
void __stdcall sub_10023620(int a1)
{
  JUMPOUT(&loc_10023630);
}

//----- (10023628) --------------------------------------------------------
void *__thiscall sub_10023628(void *this, char a2)
{
  void *v2; // esi@1

  v2 = (char *)this - 8;
  sub_1002360C((char *)this - 8);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (10023687) --------------------------------------------------------
int __thiscall sub_10023687(int this, int a2, unsigned int a3)
{
  return sub_100170FE((void *)(this + 8), a2, a3);
}

//----- (10023693) --------------------------------------------------------
int __usercall sub_10023693@<eax>(int a1@<ebp>)
{
  LPVOID v1; // ecx@1

  sub_1000FB4A();
  v1 = sub_1000F0A6(0x210u);
  *(_DWORD *)(a1 - 16) = v1;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v1 )
    sub_100235D9(v1, *(_DWORD *)(a1 + 8));
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (100236C6) --------------------------------------------------------
int __usercall sub_100236C6@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // esi@1
  LPVOID v3; // edx@1

  sub_1000FB4A();
  v2 = v1;
  v3 = sub_1000F0A6(0xF0u);
  *(_DWORD *)(a1 - 16) = v3;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v3 )
    sub_100235B1(v3, v2 != 8 ? v2 : 0);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10023704) --------------------------------------------------------
int __userpurge sub_10023704@<eax>(int a1@<ebp>, int a2, int a3)
{
  LPVOID v3; // eax@1

  sub_1000FB4A();
  v3 = sub_1000F0A6(0xE8u);
  *(_DWORD *)(a1 - 16) = v3;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v3 )
    sub_10026070(a1, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1002373C) --------------------------------------------------------
int __thiscall sub_1002373C(void *this)
{
  return (int)((char *)this - 8);
}

//----- (10023740) --------------------------------------------------------
int __thiscall sub_10023740(int this)
{
  int v1; // edi@1
  int (__thiscall *v2)(_DWORD); // esi@1

  v1 = this + 8;
  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)(this + 8) + 4);
  j_nullsub_1(v2);
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10023758) --------------------------------------------------------
void *__thiscall sub_10023758(void *this, void *a2)
{
  sub_10018148((int)((char *)this + 8), a2);
  return a2;
}

//----- (10023774) --------------------------------------------------------
void *__thiscall sub_10023774(void *this, void *a2)
{
  return sub_10023758((char *)this - 8, a2);
}

//----- (1002377F) --------------------------------------------------------
int __thiscall sub_1002377F(int this, int a2, unsigned int a3)
{
  return sub_100194F2((void *)(this + 8), a2, a3);
}

//----- (1002378B) --------------------------------------------------------
int __thiscall sub_1002378B(int this, int a2, int a3, int a4)
{
  return sub_100198AB((void *)(this + 8), a2, a3, a4);
}

//----- (10023797) --------------------------------------------------------
DWORD sub_10023797()
{
  DWORD result; // eax@1
  int v1; // eax@2
  char v2; // [sp+0h] [bp-10h]@5

  result = TlsAlloc();
  dwTlsIndex = result;
  if ( result == -1 )
  {
    v1 = GetLastError();
    if ( v1 > 0 )
      v1 = (unsigned __int16)v1 | 0x80070000;
    sub_1001A018((int)&v2, v1);
    sub_10027494((int)&v2, (int)&unk_10075954);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_100237DD);
  }
  return result;
}

//----- (100237DD) --------------------------------------------------------
BOOL sub_100237DD()
{
  BOOL result; // eax@1

  result = TlsFree(dwTlsIndex);
  dwTlsIndex = 0;
  return result;
}

//----- (100237F1) --------------------------------------------------------
int __thiscall sub_100237F1(int this, int a2)
{
  int v2; // esi@1

  v2 = this;
  sub_1003B1E0(this, a2);
  return v2;
}

//----- (10023809) --------------------------------------------------------
int __cdecl sub_10023809(int a1)
{
  sub_1003B1FB(a1);
  sub_1003B20E(a1);
  return a1;
}

//----- (10023823) --------------------------------------------------------
signed __int32 __thiscall sub_10023823(int this, int a2)
{
  volatile signed __int32 *v2; // esi@1
  signed __int32 v3; // edx@1
  signed __int32 v4; // ecx@1
  signed __int32 result; // eax@1

  v2 = (volatile signed __int32 *)(this + 24);
  v3 = *(_DWORD *)(this + 24);
  v4 = v3;
  for ( result = v3; ; v4 = result )
  {
    result = _InterlockedCompareExchange(v2, a2 | v4 & 0xFFFFFFFC, result);
    if ( result == v3 )
      break;
    v3 = result;
  }
  return result;
}

//----- (10023849) --------------------------------------------------------
signed int __thiscall sub_10023849(int this, int a2)
{
  signed int result; // eax@1
  unsigned int v3; // ecx@1

  result = *(_DWORD *)(this + 8);
  v3 = 0;
  if ( result & 1 )
  {
    v3 = result & 0xFFFFFFFE;
    if ( result & 0xFFFFFFFE )
      result = *(_DWORD *)(v3 + 104);
    else
      result = 2;
  }
  if ( a2 )
    *(_DWORD *)a2 = v3;
  return result;
}

//----- (10023871) --------------------------------------------------------
char __thiscall sub_10023871(int this)
{
  signed __int32 v1; // edx@1
  signed __int32 v2; // eax@2
  char result; // al@4

  v1 = *(_DWORD *)(this + 24);
  if ( v1 & 3 )
  {
LABEL_4:
    result = 0;
  }
  else
  {
    while ( 1 )
    {
      v2 = _InterlockedCompareExchange((volatile signed __int32 *)(this + 24), v1 | 1, v1);
      if ( v2 == v1 )
        break;
      v1 = v2;
      if ( v2 & 3 )
        goto LABEL_4;
    }
    result = 1;
  }
  return result;
}

//----- (10023899) --------------------------------------------------------
signed __int32 __thiscall sub_10023899(int this)
{
  volatile signed __int32 *v1; // esi@1
  signed __int32 i; // edx@1
  signed __int32 result; // eax@2
  signed __int32 v4; // eax@4
  int v5; // eax@6
  int v6; // edi@7
  volatile signed __int32 v7; // edx@9
  volatile signed __int32 v8; // ecx@9

  v1 = (volatile signed __int32 *)(this + 24);
  for ( i = *(_DWORD *)(this + 24); ; i = v4 )
  {
    result = i & 0xFFFFFFFC;
    if ( i & 0xFFFFFFFC )
    {
      if ( result != 12 )
        break;
    }
    v4 = _InterlockedCompareExchange(v1, i & 3 | 8, i);
    if ( v4 == i )
    {
      v5 = (int)sub_1000F0A6(8u);
      if ( v5 )
        v6 = sub_10023968(v5);
      else
        v6 = 0;
      v7 = *v1;
      v8 = *v1;
      for ( result = *v1; ; LOBYTE(v8) = result )
      {
        result = _InterlockedCompareExchange(v1, v6 | v8 & 3, result);
        if ( result == v7 )
          break;
        v7 = result;
      }
      return result;
    }
  }
  return result;
}
// 10023968: using guessed type int __cdecl sub_10023968(int);

//----- (100238F7) --------------------------------------------------------
int __usercall sub_100238F7@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // edi@1
  unsigned int v3; // esi@1
  int v4; // ecx@3
  int v6; // [sp-Ch] [bp-Ch]@4
  int v7; // [sp-8h] [bp-8h]@4
  signed int v8; // [sp-4h] [bp-4h]@1

  v8 = 12;
  sub_1000FB4A();
  v2 = v1;
  v3 = *(_DWORD *)(v1 + 24) & 0xFFFFFFFC;
  if ( v3 && v3 != 12 )
  {
    sub_1003B1E0(a1 - 24, *(_DWORD *)(v1 + 24) & 0xFFFFFFFC);
    *(_DWORD *)(a1 - 4) = 0;
    sub_1003B23B((LPVOID)v3);
    sub_1000F417((LPVOID)v3);
    *(_DWORD *)(v2 + 24) = 0;
    if ( !sub_100273CB() )
    {
      v7 = v4;
      v6 = v4;
      sub_100237F1((int)&v6, a1 - 24);
      sub_10023979(a1);
    }
    *(_DWORD *)(a1 - 4) = -1;
    sub_1003B23B((LPVOID)(a1 - 24));
  }
  return sub_1000FB24(v8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10023961) --------------------------------------------------------
void __thiscall __noreturn sub_10023961(void *this)
{
  sub_1003B24A(this);
  __debugbreak();
  JUMPOUT(*(_DWORD *)sub_10023968);
}
// 10023968: using guessed type int __cdecl sub_10023968(int);

//----- (10023968) --------------------------------------------------------
int __cdecl sub_10023968(int a1)
{
  sub_10023809(a1);
  return a1;
}
// 10023968: using guessed type int __cdecl sub_10023968(int);

//----- (10023979) --------------------------------------------------------
void __usercall __noreturn sub_10023979(int a1@<ebp>)
{
  sub_1000FB4A();
  *(_DWORD *)(a1 - 4) = 0;
  sub_10023961((void *)(a1 + 8));
}

//----- (10023992) --------------------------------------------------------
int __thiscall sub_10023992(int this, int a2)
{
  int v2; // esi@1
  LPVOID v3; // eax@1
  LPVOID v4; // ecx@2
  signed int v5; // edx@2

  v2 = this;
  *(_DWORD *)(this + 16) = a2;
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 24) = 0;
  *(_BYTE *)(this + 20) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 8) = 63;
  *(_DWORD *)(this + 28) = sub_1000F40E(0x100u);
  v3 = sub_1000F40E(0x200u);
  if ( v3 )
  {
    v4 = v3;
    v5 = 64;
    do
    {
      *(_DWORD *)v4 = 0;
      v4 = (char *)v4 + 8;
      *((_DWORD *)v4 - 1) = 0;
      --v5;
    }
    while ( v5 );
  }
  else
  {
    v3 = 0;
  }
  *(_DWORD *)(v2 + 32) = v3;
  return v2;
}

//----- (100239FB) --------------------------------------------------------
int __usercall sub_100239FB@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // edi@1
  int v3; // esi@1

  sub_1000FB4A();
  v2 = v1;
  *(_DWORD *)(a1 - 16) = v1;
  v3 = v1 + 112;
  sub_1001EBE2(v1, v1 + 112);
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(v2 + 56) = 0;
  *(_DWORD *)(v2 + 72) = 0;
  sub_10023992(v2 + 76, v3);
  *(_DWORD *)v3 = 0;
  *(_BYTE *)(a1 - 4) = 1;
  *(_DWORD *)(v2 + 44) = 0;
  *(_DWORD *)(v2 + 52) = v2;
  *(_DWORD *)(v2 + 64) = sub_10018021();
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10023A45) --------------------------------------------------------
int __thiscall sub_10023A45(int this, int a2)
{
  *(_DWORD *)(this + 60) = a2;
  return sub_1001898B(this + 28, sub_10023AC7, this, *(_DWORD *)(*(_DWORD *)(a2 + 256) + 4));
}

//----- (10023A69) --------------------------------------------------------
int __thiscall sub_10023A69(int this)
{
  int v1; // edi@1

  v1 = this;
  sub_100124EC((void *)(this + 112));
  *(_DWORD *)(v1 + 64) = sub_10018021();
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  *(_DWORD *)(v1 + 76) = 0;
  *(_DWORD *)(v1 + 80) = 0;
  *(_DWORD *)(v1 + 100) = 0;
  *(_BYTE *)(v1 + 96) = 0;
  *(_DWORD *)(v1 + 88) = 0;
  *(_DWORD *)(v1 + 56) = 0;
  *(_DWORD *)(v1 + 72) = 0;
  return sub_1001252F((void *)(v1 + 112));
}

//----- (10023AA3) --------------------------------------------------------
int __thiscall sub_10023AA3(int this, int a2)
{
  *(_DWORD *)(this + 60) = a2;
  return sub_1001898B(this + 28, (int (__cdecl *)(_DWORD))sub_10023AD8, this, *(_DWORD *)(*(_DWORD *)(a2 + 256) + 4));
}

//----- (10023AC7) --------------------------------------------------------
int __cdecl sub_10023AC7(int a1)
{
  return sub_10022950(*(void **)(a1 + 60), a1);
}

//----- (10023AD8) --------------------------------------------------------
signed __int32 __cdecl sub_10023AD8(int a1)
{
  return sub_10022AEE(*(_DWORD *)(a1 + 60), a1);
}

//----- (10023AE9) --------------------------------------------------------
#error "10023B24: call analysis failed (funcsize=19)"

//----- (10023BDE) --------------------------------------------------------
int __cdecl sub_10023BDE(int (__cdecl *a1)(_DWORD, _DWORD), int a2, int (__cdecl *a3)(_DWORD, _DWORD))
{
  signed int savedregs; // ST1C_4@1
  int v4; // ecx@1
  int v5; // ebx@1
  volatile signed __int32 *v6; // eax@1
  signed __int32 v7; // edi@1
  int v8; // esi@1
  int v9; // edx@2
  int v10; // ST14_4@4
  char v11; // al@5
  void *v13; // [sp+0h] [bp-1Ch]@1
  int v14; // [sp+8h] [bp-14h]@3
  int v15; // [sp+Ch] [bp-10h]@2

  savedregs = 16;
  sub_1000FB4A();
  v5 = v4;
  v13 = *(void **)(v4 + 16);
  sub_100124EC(v13);
  v6 = (volatile signed __int32 *)(v5 + 4);
  v7 = *(_DWORD *)(v5 + 4);
  v8 = *(_DWORD *)(v5 + 4) - 1;
  if ( v8 >= *(_DWORD *)v5 )
  {
    v15 = *(_DWORD *)(v5 + 4);
    v9 = *(_DWORD *)(v5 + 4);
    do
    {
      v14 = *(_DWORD *)(*(_DWORD *)(v5 + 28) + 4 * (v8 & *(_DWORD *)(v5 + 8)));
      if ( v14 )
      {
        v10 = *(_DWORD *)(*(_DWORD *)(v5 + 28) + 4 * (v8 & *(_DWORD *)(v5 + 8)));
        j_nullsub_1(a1);
        if ( (unsigned __int8)a1(v10, a2) )
        {
          j_nullsub_1(a3);
          v11 = a3(v14, a2);
          v9 = v15;
          if ( v11 )
          {
            if ( v15 == v7 )
              --v7;
            else
              *(_DWORD *)(*(_DWORD *)(v5 + 28) + 4 * (v8 & *(_DWORD *)(v5 + 8))) = 0;
          }
        }
        else
        {
          v9 = v15;
        }
      }
      --v8;
      --v9;
      v15 = v9;
    }
    while ( v8 >= *(_DWORD *)v5 );
    v6 = (volatile signed __int32 *)(v5 + 4);
  }
  _InterlockedExchange(v6, v7);
  sub_1001252F(v13);
  return sub_1000FB24(16);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (10023BEA) --------------------------------------------------------
int __usercall sub_10023BEA@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // esi@1
  int v3; // edx@1
  int v4; // ecx@1

  sub_1000FFB0((int)&unk_100769E8, 16);
  v2 = v1;
  *(_DWORD *)(a1 - 32) = v1;
  *(_DWORD *)(a1 - 28) = 0;
  if ( sub_10012543((void *)(v1 + 112)) )
  {
    *(_DWORD *)(a1 - 4) = 0;
    *(_DWORD *)(a1 - 28) = sub_10023D5C(v2, *(_DWORD *)(a1 + 8));
    *(_DWORD *)(a1 - 4) = -2;
    sub_10023C38(v2);
    **(_BYTE **)(a1 + 12) = 1;
  }
  else
  {
    **(_BYTE **)(a1 + 12) = 0;
  }
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (10023C32) --------------------------------------------------------
int __usercall sub_10023C32@<eax>(int a1@<ebp>)
{
  int v1; // ebx@1

  v1 = *(_DWORD *)(a1 - 28);
  return sub_10023C38(*(_DWORD *)(a1 - 32));
}

//----- (10023C38) --------------------------------------------------------
int __usercall sub_10023C38@<eax>(int a1@<esi>)
{
  return sub_1001252F((void *)(a1 + 112));
}

//----- (10023C50) --------------------------------------------------------
signed __int32 __thiscall sub_10023C50(void *this, char a2)
{
  void *i; // esi@1
  int v3; // edi@2
  int v4; // ecx@2
  signed __int32 v5; // ebx@5

  for ( i = this; ; *(_DWORD *)i = v3 + 1 )
  {
    if ( *(_DWORD *)i >= *((_DWORD *)i + 1) )
      return 0;
    v3 = *(_DWORD *)i;
    v4 = *(_DWORD *)i & *((_DWORD *)i + 2);
    if ( *(_BYTE *)(*((_DWORD *)i + 3) + 4 * v4) & 1 )
    {
      if ( !a2 && sub_1001FC9B((void *)(*((_DWORD *)i + 4) + 8 * v4)) )
        return 0;
    }
    v5 = _InterlockedExchange((volatile signed __int32 *)(*((_DWORD *)i + 3) + 4 * (*((_DWORD *)i + 2) & v3)), 0);
    if ( v5 & 1 )
    {
      v5 &= 0xFFFFFFFE;
      if ( !sub_1001A73F(*((_DWORD *)i + 4) + 8 * (*((_DWORD *)i + 2) & v3), 0) )
        continue;
    }
    break;
  }
  if ( v5 )
    *(_DWORD *)i = v3 + 1;
  return v5;
}

//----- (10023CCE) --------------------------------------------------------
signed __int32 __thiscall sub_10023CCE(void *this, char a2, int a3)
{
  void *v3; // esi@1
  int v4; // ecx@2
  signed __int32 v5; // ebx@8
  volatile signed __int32 v6; // edi@12

  v3 = this;
LABEL_11:
  v5 = 0;
  while ( 1 )
  {
    v6 = *(_DWORD *)v3;
    _InterlockedExchange((volatile signed __int32 *)v3, *(_DWORD *)v3 + 1);
    if ( v6 >= *((_DWORD *)v3 + 1) )
    {
      *(_DWORD *)v3 = v6;
      return v5;
    }
    v4 = v6 & *((_DWORD *)v3 + 2);
    if ( *(_BYTE *)(*((_DWORD *)v3 + 7) + 4 * v4) & 1 )
    {
      if ( !a2 && sub_1001FC9B((void *)(*((_DWORD *)v3 + 8) + 8 * v4)) )
        break;
    }
    if ( *((_BYTE *)v3 + 20) && *(_DWORD *)v3 >= *((_DWORD *)v3 + 6) )
      *((_BYTE *)v3 + 20) = 0;
    v5 = _InterlockedExchange((volatile signed __int32 *)(*((_DWORD *)v3 + 7) + 4 * (v6 & *((_DWORD *)v3 + 2))), 0);
    if ( v5 )
    {
      if ( v5 & 1 )
      {
        v5 &= 0xFFFFFFFE;
        if ( !sub_1001A73F(*((_DWORD *)v3 + 8) + 8 * (v6 & *((_DWORD *)v3 + 2)), 0) )
          goto LABEL_11;
      }
      return v5;
    }
  }
  *(_DWORD *)v3 = v6;
  return 0;
}

//----- (10023D5C) --------------------------------------------------------
signed __int32 __thiscall sub_10023D5C(int this, char a2)
{
  int v2; // esi@1
  signed __int32 result; // eax@2
  int v4; // eax@3
  int v5; // ebx@3
  int v6; // edi@3
  int (__thiscall *v7)(_DWORD); // esi@5
  LPVOID v8; // eax@8
  signed __int32 v9; // eax@13
  int v10; // ecx@14
  int v11; // [sp+4h] [bp-8h]@3
  int v12; // [sp+8h] [bp-4h]@1

  v2 = this;
  v12 = this;
  if ( (unsigned __int8)sub_10022781(this) )
    return 0;
  v4 = *(_DWORD *)(v2 + 72);
  v5 = 0;
  v11 = v4;
  v6 = 0;
  if ( v4 && *(_DWORD *)(v4 + 112) > 0 )
  {
    v7 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v4 + 16);
    j_nullsub_1(v7);
    if ( !(unsigned __int8)v7(v11) )
    {
      if ( !*(_BYTE *)(v12 + 96) || (v6 = sub_10023CCE((void *)(v12 + 76), a2, 1)) == 0 )
      {
        v8 = sub_100178E9();
        if ( v8 )
          v5 = (int)((char *)v8 - 4);
        *(_BYTE *)(v5 + 179) |= 2u;
        return v6;
      }
      goto LABEL_17;
    }
    v2 = v12;
  }
  result = sub_10023C50((void *)v2, a2);
  if ( result )
    return result;
  v9 = sub_10023CCE((void *)(v2 + 76), a2, 0);
  v6 = v9;
  if ( v9 )
  {
    v10 = *(_DWORD *)(v2 + 72);
    if ( !v10 || *(_DWORD *)(*(_DWORD *)(v9 + 8) + 12) != v10 )
    {
LABEL_17:
      sub_10023F1F(v6, 1);
      return v6;
    }
    sub_1001AD92(v10);
    sub_10023F1F(v6, 0);
  }
  return v6;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10023E1F) --------------------------------------------------------
int __cdecl sub_10023E1F(int a1)
{
  int v1; // ebp@0

  _InterlockedExchange((volatile signed __int32 *)(a1 + 116), 1);
  sub_1001A5AC(a1, -999);
  return sub_1001A643(v1, 0);
}

//----- (10023E46) --------------------------------------------------------
int __cdecl sub_10023E46(int a1)
{
  int (__thiscall *v1)(_DWORD, _DWORD); // esi@1

  v1 = (int (__thiscall *)(_DWORD, _DWORD))**(_DWORD **)a1;
  j_nullsub_1(**(_DWORD **)a1);
  return v1(a1, 1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10023E63) --------------------------------------------------------
int __thiscall sub_10023E63(int this, int a2)
{
  int result; // eax@2
  int v3; // esi@2
  int v4; // eax@3
  int v5; // edx@3
  void *v6; // ecx@3
  int v7; // edi@9
  int v8; // ebx@9
  void *v9; // edx@9
  void *v10; // [sp+0h] [bp-4h]@9
  _DWORD *savedregs; // [sp+4h] [bp+0h]@2

  if ( *(int (**)())(this + 12) == sub_10023F2C )
  {
    savedregs = &savedregs;
    result = a2 - 4;
    v3 = a2 != 0 ? a2 - 4 : 0;
    if ( !*(_DWORD *)(v3 + 0x34) )
    {
      v4 = *(_DWORD *)(this + 8);
      v5 = v3 + 4;
      v6 = *(void **)(v4 + 12);
      *(_DWORD *)(v5 + 48) = v4;
      *(_DWORD *)(v5 + 52) = v4;
      result = sub_1001A51F(v6, v3 != 0 ? v3 + 4 : 0, 0);
    }
  }
  else
  {
    savedregs = &savedregs;
    if ( a2 )
      result = a2 - 4;
    else
      result = 0;
    if ( !*(_DWORD *)(result + 52) )
    {
      v7 = *(_DWORD *)(this + 8);
      v8 = result + 4;
      v9 = *(void **)(v7 + 12);
      *(_DWORD *)(v8 + 48) = v7;
      *(_DWORD *)(v8 + 52) = v7;
      v10 = v9;
      if ( *(_BYTE *)(this + 17) )
      {
        *(_BYTE *)(result + 81) = 0;
        result = sub_1001A578((int)&savedregs, result + 96);
      }
      else
      {
        sub_100118C2(v7 + 32);
        ++*(_DWORD *)(v7 + 48);
        sub_100119E2(v7 + 32);
        result = sub_1001A51F(v10, v8, 1);
      }
    }
  }
  return result;
}
// 10023F2C: using guessed type int sub_10023F2C();

//----- (10023F1F) --------------------------------------------------------
char __thiscall sub_10023F1F(int this, char a2)
{
  char result; // al@1

  result = a2;
  *(_BYTE *)(this + 17) = a2;
  return result;
}

//----- (10023F2C) --------------------------------------------------------
#error "10024070: call analysis failed (funcsize=89)"

//----- (10024076) --------------------------------------------------------
int __thiscall sub_10024076(int this, int a2, int a3, int a4)
{
  int v4; // edi@1
  int result; // eax@1

  v4 = this;
  *(_DWORD *)this = off_1006707C;
  *(_DWORD *)(this + 4) = 0;
  sub_1001C7A9(this + 8, a2, a3, a4);
  *(_WORD *)(v4 + 68) = 0;
  *(_DWORD *)(v4 + 76) = 0;
  *(_DWORD *)(v4 + 72) = _InterlockedIncrement((volatile signed __int32 *)&dword_1007C5EC);
  result = v4;
  *(_DWORD *)(v4 + 36) = v4;
  return result;
}
// 1006707C: using guessed type int (*off_1006707C[2])();
// 1007C5EC: using guessed type int dword_1007C5EC;

//----- (100240C2) --------------------------------------------------------
LPVOID __thiscall sub_100240C2(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_1006707C;
  *((_DWORD *)lpMem + 2) = off_100669BC;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 100669BC: using guessed type int (*off_100669BC[2])();
// 1006707C: using guessed type int (*off_1006707C[2])();

//----- (100240EC) --------------------------------------------------------
int __usercall sub_100240EC@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  return sub_1001C85F(a1 + 8, a2);
}

//----- (100240F4) --------------------------------------------------------
int __thiscall sub_100240F4(int this)
{
  return *(_DWORD *)(this + 52);
}

//----- (100240F8) --------------------------------------------------------
int __thiscall sub_100240F8(int this)
{
  return *(_DWORD *)(this + 72);
}

//----- (100240FC) --------------------------------------------------------
int __thiscall sub_100240FC(int this)
{
  return *(_DWORD *)(this + 44);
}

//----- (10024100) --------------------------------------------------------
int __thiscall sub_10024100(int this, int a2)
{
  int v2; // esi@1
  int v3; // ecx@4
  char v5; // [sp+4h] [bp-Ch]@3

  v2 = this;
  if ( !a2 )
  {
    sub_1000D988(&v5, (int)"pScheduler");
    sub_10027494((int)&v5, (int)&unk_10075484);
    goto LABEL_6;
  }
  if ( *(_DWORD *)(*(_DWORD *)(this + 28) + 8) != a2 )
  {
    sub_100126E9((int)&v5);
    sub_10027494((int)&v5, (int)&unk_10075C24);
LABEL_6:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1002415A);
  }
  sub_1002415A(this);
  v3 = *(_DWORD *)(v2 + 28);
  return sub_1001D989(v2);
}
// 1001D989: using guessed type _DWORD __stdcall sub_1001D989(_DWORD);

//----- (1002415A) --------------------------------------------------------
signed __int32 __thiscall sub_1002415A(int this)
{
  signed __int32 result; // eax@1

  result = _InterlockedDecrement((volatile signed __int32 *)(this + 76));
  if ( !result )
    result = sub_1002417F(this);
  return result;
}

//----- (10024172) --------------------------------------------------------
signed __int32 __thiscall sub_10024172(int this)
{
  return sub_1001DDC5(*(_DWORD *)(this + 28), this + 8);
}

//----- (1002417F) --------------------------------------------------------
BOOL __thiscall sub_1002417F(int this)
{
  return sub_1001D824(*(_DWORD *)(this + 28), this + 8);
}

//----- (1002418C) --------------------------------------------------------
int __thiscall sub_1002418C(int this, int a2, int a3, int a4)
{
  int v4; // esi@1
  int result; // eax@1

  v4 = this;
  sub_10024076(this, a2, a3, a4);
  *(_DWORD *)v4 = off_100670A8;
  result = v4;
  *(_DWORD *)(v4 + 80) = 0;
  *(_DWORD *)(v4 + 84) = 0;
  return result;
}
// 100670A8: using guessed type int (*off_100670A8[2])();

//----- (100241C1) --------------------------------------------------------
BOOL __thiscall sub_100241C1(int this, int a2)
{
  return *(_WORD *)(a2 + 4) == *(_WORD *)(this + 4) && *(_DWORD *)a2 == *(_DWORD *)this;
}

//----- (100241E2) --------------------------------------------------------
LPVOID __thiscall sub_100241E2(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_1006707C;
  *((_DWORD *)lpMem + 2) = off_100669BC;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 100669BC: using guessed type int (*off_100669BC[2])();
// 1006707C: using guessed type int (*off_1006707C[2])();

//----- (1002420C) --------------------------------------------------------
int __thiscall sub_1002420C(void *this)
{
  void *v1; // esi@1
  int result; // eax@4
  char v3; // [sp+8h] [bp-10h]@2
  int v4; // [sp+10h] [bp-8h]@1
  void (*v5)(); // [sp+14h] [bp-4h]@1

  v5 = sub_1001253A;
  v1 = this;
  v4 = 0;
  while ( !*((_DWORD *)v1 + 1) )
    sub_10010BDE(&v3);
  result = *((_DWORD *)v1 + 1);
  *((_DWORD *)v1 + 1) = 0;
  return result;
}

//----- (1002423D) --------------------------------------------------------
int __thiscall sub_1002423D(void *this, signed __int32 a2)
{
  signed __int32 v2; // edi@1
  int v3; // ebx@1
  int (__thiscall *v4)(_DWORD); // esi@2
  int v5; // esi@2
  int v6; // edi@3
  int (__thiscall *v7)(_DWORD, _DWORD); // esi@3
  int v8; // eax@3
  int result; // eax@5
  char v10; // [sp+Ch] [bp-18h]@8
  char v11; // [sp+18h] [bp-Ch]@11

  v2 = a2;
  v3 = (int)this;
  if ( !a2 )
  {
    sub_1000D988(&v11, (int)"pContext");
    sub_10027494((int)&v11, (int)&unk_10075484);
    goto LABEL_12;
  }
  v4 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a2 + 8));
  v5 = v4(a2);
  if ( !v5 )
  {
    v6 = *(_DWORD *)(v3 + 28);
    v7 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v6 + 28);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v6 + 28));
    v8 = v7(v6, a2);
    v2 = a2;
    v5 = v8;
  }
  if ( _InterlockedIncrement((volatile signed __int32 *)(v3 + 76)) == 2 )
  {
    result = v3 + 4;
    _InterlockedExchange((volatile signed __int32 *)(v3 + 4), v2);
    return result;
  }
  sub_1002457A((void *)v3);
  if ( *(_DWORD *)(v3 + 80) && v5 != *(_DWORD *)(v3 + 80) )
  {
    sub_100126E9((int)&v10);
    sub_10027494((int)&v10, (int)&unk_10075C24);
LABEL_12:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_100242FF);
  }
  *(_DWORD *)(v3 + 84) = 0;
  sub_10024172(v3);
  sub_100242FF((void *)v3, v5);
  return sub_1002491F(v5);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100242FF) --------------------------------------------------------
int __thiscall sub_100242FF(void *this, int a2)
{
  void *v2; // edi@1
  int v3; // ebx@1
  int (__thiscall *v4)(_DWORD); // esi@1
  int v5; // eax@1

  v2 = this;
  sub_10024941(a2);
  *((_DWORD *)v2 + 20) = a2;
  *(_DWORD *)(a2 + 16) = v2;
  v3 = *((_DWORD *)v2 + 7);
  v4 = (int (__thiscall *)(_DWORD))**(_DWORD **)v2;
  j_nullsub_1(**(_DWORD **)v2);
  v5 = v4(v2);
  return sub_10024544(
           (void *)a2,
           *(_DWORD *)(52 * v5 + *(_DWORD *)(v3 + 16)),
           *(_WORD *)(52 * v5 + *(_DWORD *)(v3 + 16) + 12),
           0);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10024367) --------------------------------------------------------
char __thiscall sub_10024367(int this, int a2)
{
  int v2; // edi@1
  int (__thiscall *v3)(_DWORD); // esi@4
  int v4; // esi@4
  char v6; // [sp+Ch] [bp-28h]@5
  char v7; // [sp+18h] [bp-1Ch]@3
  char v8; // [sp+24h] [bp-10h]@10

  v2 = this;
  if ( !a2 )
  {
    sub_1000D988(&v8, (int)"pContext");
    sub_10027494((int)&v8, (int)&unk_10075484);
    goto LABEL_11;
  }
  if ( !*(_DWORD *)(this + 80) )
  {
    sub_100126E9((int)&v7);
    sub_10027494((int)&v7, (int)&unk_10075C24);
LABEL_11:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1002440B);
  }
  v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a2 + 8));
  v4 = v3(a2);
  if ( *(_DWORD *)(v2 + 80) != v4 )
  {
    sub_100126E9((int)&v6);
    sub_10027494((int)&v6, (int)&unk_10075C24);
    goto LABEL_11;
  }
  if ( _InterlockedDecrement((volatile signed __int32 *)(v2 + 76)) )
  {
    sub_1002420C((void *)v2);
  }
  else
  {
    _InterlockedExchange((volatile signed __int32 *)(v2 + 84), *(_DWORD *)(v2 + 80));
    sub_1002417F(v2);
    sub_1002496E(v4);
  }
  return 1;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1002440B) --------------------------------------------------------
int __thiscall sub_1002440B(int this)
{
  int v1; // edi@1
  LPVOID v2; // eax@1
  unsigned int v3; // eax@3
  int (__thiscall *v4)(_DWORD, _DWORD); // esi@7

  v1 = this;
  v2 = sub_10012193(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 28) + 12) + 112));
  if ( v2 && ((unsigned __int8)v2 & 3) == 1 && (v3 = (unsigned int)v2 & 0xFFFFFFFE) != 0 && v3 == *(_DWORD *)(v1 + 80) )
    *(_DWORD *)(v3 + 16) = 0;
  else
    sub_1002457A((void *)v1);
  v4 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v1 + 32);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 32));
  return v4(v1, 1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10024458) --------------------------------------------------------
void *__thiscall sub_10024458(int this, int a2)
{
  int v2; // edi@1
  int (__thiscall *v3)(_DWORD); // esi@4
  char v5; // [sp+Ch] [bp-24h]@5
  char v6; // [sp+18h] [bp-18h]@3
  char v7; // [sp+24h] [bp-Ch]@7

  v2 = this;
  if ( !a2 )
  {
    sub_1000D988(&v7, (int)"pContext");
    sub_10027494((int)&v7, (int)&unk_10075484);
    goto LABEL_8;
  }
  if ( !*(_DWORD *)(this + 80) )
  {
    sub_100126E9((int)&v6);
    sub_10027494((int)&v6, (int)&unk_10075C24);
LABEL_8:
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_100244D9);
  }
  v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a2 + 8));
  if ( *(_DWORD *)(v2 + 80) != v3(a2) )
  {
    sub_100126E9((int)&v5);
    sub_10027494((int)&v5, (int)&unk_10075C24);
    goto LABEL_8;
  }
  return sub_10014347(*(_DWORD *)(*(_DWORD *)(v2 + 28) + 12));
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100244D9) --------------------------------------------------------
int __thiscall sub_100244D9(int this, int a2)
{
  int v2; // esi@1
  int v3; // edi@1
  int result; // eax@1
  int v5; // eax@6
  int v6; // ebx@6
  int (__thiscall *v7)(_DWORD); // esi@6
  int (__thiscall *v8)(_DWORD, _DWORD, _DWORD); // esi@7

  v2 = this;
  v3 = *(_DWORD *)(this + 80);
  result = _InterlockedDecrement((volatile signed __int32 *)(this + 76));
  if ( result > 0 )
  {
    v5 = sub_1002420C((void *)this);
    v6 = v5;
    v7 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v5 + 8);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v5 + 8));
    result = v7(v6);
    if ( v3 != result )
    {
      v8 = *(int (__thiscall **)(_DWORD, _DWORD, _DWORD))(*(_DWORD *)v3 + 4);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 4));
      result = v8(v3, v6, a2);
    }
  }
  else
  {
    if ( !result )
      result = sub_1002417F(this);
    *(_DWORD *)(v2 + 80) = 0;
    if ( a2 == 1 )
      result = sub_1002496E(v3);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10024544) --------------------------------------------------------
int __thiscall sub_10024544(void *this, int a2, __int16 a3, int a4)
{
  void *v4; // edi@1
  int result; // eax@3

  v4 = this;
  if ( !(unsigned __int8)sub_100241C1((int)((char *)this + 48), (int)&a2) )
    sub_10012A6F((int)&a2, *((HANDLE *)v4 + 2));
  *((_WORD *)v4 + 26) = a3;
  result = a2;
  *((_DWORD *)v4 + 12) = a2;
  return result;
}

//----- (1002457A) --------------------------------------------------------
char __thiscall sub_1002457A(void *this)
{
  void *v1; // esi@1
  char result; // al@3
  char v3; // [sp+8h] [bp-10h]@3
  int v4; // [sp+10h] [bp-8h]@1
  void (*v5)(); // [sp+14h] [bp-4h]@1

  v5 = sub_1001253A;
  v1 = this;
  v4 = 0;
  while ( *((_DWORD *)v1 + 20) && !*((_DWORD *)v1 + 21) )
    result = sub_10010BDE(&v3);
  return result;
}

//----- (100245AA) --------------------------------------------------------
int __thiscall sub_100245AA(int this, int a2)
{
  int v2; // ST00_4@1
  int (__thiscall *v3)(_DWORD, _DWORD); // esi@1

  *(_DWORD *)(this + 64) = a2;
  v2 = this;
  v3 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)a2 + 12);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a2 + 12));
  return v3(a2, v2);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100245CC) --------------------------------------------------------
void __fastcall sub_100245CC(int a1)
{
  int v1; // ebx@1
  int v2; // edi@2
  int v3; // ST04_4@2
  int (__thiscall *v4)(_DWORD); // esi@2
  DWORD v5; // eax@2
  int v6; // edi@3
  void (__thiscall *v7)(_DWORD, _DWORD); // esi@3
  int v8; // edi@3
  void (__thiscall *v9)(_DWORD, _DWORD); // esi@3
  int v10; // esi@3
  int v11; // [sp+Ch] [bp-8h]@1
  int v12; // [sp+10h] [bp-4h]@1

  v12 = 0;
  v1 = a1;
  v11 = 8;
  if ( !*(_DWORD *)(a1 + 36) )
  {
    v2 = *(_DWORD *)(a1 + 4);
    v3 = a1 | 1;
    v4 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 16);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 16));
    v5 = v4(v2);
    sub_100121A1(v5, (LPVOID)v3);
    while ( !*(_DWORD *)(v1 + 36) )
    {
      v6 = *(_DWORD *)(v1 + 64);
      v7 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v6 + 12);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v6 + 12));
      v7(v6, v1);
      v8 = *(_DWORD *)(v1 + 64);
      v9 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 16);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v8 + 16));
      v9(v8, &v11);
      v10 = *(_DWORD *)(v1 + 16);
      *(_DWORD *)(v1 + 64) = 0;
      *(_DWORD *)(v1 + 16) = 0;
      sub_1002466D(v1);
      if ( v10 )
        sub_100244D9(v10, 1);
      else
        sub_1002496E(v1);
    }
  }
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1002466D) --------------------------------------------------------
int __thiscall sub_1002466D(int this)
{
  int v1; // edi@1
  int v2; // ST00_4@1
  int (__thiscall *v3)(_DWORD, _DWORD); // esi@1

  *(_DWORD *)(this + 64) = 0;
  v1 = *(_DWORD *)(this + 4);
  v2 = this;
  v3 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v1 + 4);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 4));
  return v3(v1, v2);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1002468A) --------------------------------------------------------
int __thiscall sub_1002468A(int this, int a2)
{
  int v2; // edx@2
  char v4; // [sp+0h] [bp-Ch]@10

  if ( !a2 )
    goto LABEL_10;
  v2 = *(_DWORD *)(this + 16);
  if ( !v2 )
  {
    if ( a2 == 1 )
      return sub_1002496E(this);
LABEL_10:
    sub_1000D988(&v4, (int)"switchState");
    sub_10027494((int)&v4, (int)&unk_10075484);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_100246E1);
  }
  if ( a2 == 2 )
    *(_DWORD *)(this + 16) = 0;
  return sub_100244D9(v2, a2);
}

//----- (100246E1) --------------------------------------------------------
int __thiscall sub_100246E1(void *this, int a2, int a3)
{
  void *v3; // ebx@1
  int (__thiscall *v4)(_DWORD); // esi@2
  int v5; // esi@2
  int v6; // edi@3
  int (__thiscall *v7)(_DWORD, _DWORD); // esi@3
  void *v8; // ecx@4
  int result; // eax@8
  char v10; // [sp+Ch] [bp-Ch]@11

  v3 = this;
  if ( !a2 )
  {
    sub_1000D988(&v10, (int)"pContext");
    sub_10027494((int)&v10, (int)&unk_10075484);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_10024796);
  }
  v4 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a2 + 8));
  v5 = v4(a2);
  if ( !v5 )
  {
    v6 = *(_DWORD *)(*((_DWORD *)v3 + 4) + 28);
    v7 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)v6 + 28);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v6 + 28));
    v5 = v7(v6, a2);
  }
  v8 = (void *)*((_DWORD *)v3 + 4);
  *((_DWORD *)v3 + 4) = 0;
  if ( a3 == 1 )
    _InterlockedExchange((volatile signed __int32 *)v3 + 8, 1);
  sub_100242FF(v8, v5);
  if ( a3 && a3 == 1 )
  {
    sub_10012119(*(HANDLE *)(v5 + 12), *((HANDLE *)v3 + 3), 0xFFFFFFFF, 1);
    result = (int)((char *)v3 + 32);
    _InterlockedExchange((volatile signed __int32 *)v3 + 8, 0);
  }
  else
  {
    result = sub_1002491F(v5);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10024796) --------------------------------------------------------
LPVOID __thiscall sub_10024796(int this, int a2, int a3)
{
  int v3; // edi@1
  int v4; // eax@1
  void (__thiscall *v5)(_DWORD); // esi@1
  LPVOID v6; // esi@1
  HANDLE v7; // eax@1
  int v8; // edi@2
  void (__thiscall *v9)(_DWORD); // esi@2
  int v10; // eax@2
  char v12; // [sp+Ch] [bp-14h]@5
  LPVOID lpParameter; // [sp+1Ch] [bp-4h]@1

  *(_DWORD *)(this + 4) = a2;
  *(_DWORD *)(this + 20) = a3;
  *(_DWORD *)this = off_100670E0;
  v3 = *(_DWORD *)(this + 4);
  *(_DWORD *)(this + 24) = 0;
  *(_BYTE *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 1;
  *(_DWORD *)(this + 36) = 0;
  v4 = *(_DWORD *)v3;
  lpParameter = (LPVOID)this;
  v5 = *(void (__thiscall **)(_DWORD))(v4 + 8);
  j_nullsub_1(*(_DWORD *)(v4 + 8));
  v5(v3);
  v6 = lpParameter;
  *((_DWORD *)lpParameter + 10) = _InterlockedIncrement((volatile signed __int32 *)&dword_1007A040);
  *((_DWORD *)v6 + 3) = sub_10011D4E(0);
  v7 = sub_1001230B(0, *((_DWORD *)v6 + 5) << 10, (LPTHREAD_START_ROUTINE)sub_1002498A, v6, 0x10000u, (LPDWORD)v6 + 11);
  *((_DWORD *)v6 + 2) = v7;
  if ( !v7 )
  {
    CloseHandle(*((HANDLE *)v6 + 3));
    v8 = *((_DWORD *)v6 + 1);
    v9 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)v8 + 12);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v8 + 12));
    v9(v8);
    v10 = GetLastError();
    if ( v10 > 0 )
      v10 = (unsigned __int16)v10 | 0x80070000;
    sub_1001A035((int)&v12, v10);
    sub_10027494((int)&v12, (int)&unk_10076AA0);
    __debugbreak();
    JUMPOUT(*(_DWORD *)sub_1002486B);
  }
  return v6;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 100670E0: using guessed type int (*off_100670E0[4])();
// 1007A040: using guessed type int dword_1007A040;

//----- (1002486B) --------------------------------------------------------
void *__thiscall sub_1002486B(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_10011BDE(this, a2);
  *(_DWORD *)v2 = &off_10066734;
  return v2;
}
// 10066734: using guessed type int (__thiscall *off_10066734)(LPVOID lpMem, char);

//----- (10024886) --------------------------------------------------------
int __thiscall sub_10024886(int this)
{
  int v1; // edi@1
  void *v2; // ST00_4@1
  int (*v3)(void); // esi@1

  v1 = this;
  v2 = *(void **)(this + 12);
  *(_DWORD *)this = off_100670E0;
  CloseHandle(v2);
  sub_10011D40(*(HANDLE *)(v1 + 8));
  v3 = *(int (**)(void))(**(_DWORD **)(v1 + 4) + 12);
  j_nullsub_1(v3);
  return v3();
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 100670E0: using guessed type int (*off_100670E0[4])();

//----- (100248E8) --------------------------------------------------------
LPVOID __thiscall sub_100248E8(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  sub_10024886((int)lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (1002490A) --------------------------------------------------------
BOOL __thiscall sub_1002490A(int this)
{
  void *v1; // ST00_4@1

  v1 = *(void **)(this + 12);
  *(_DWORD *)(this + 36) = 1;
  return SetEvent(v1);
}

//----- (1002491B) --------------------------------------------------------
int __thiscall sub_1002491B(int this)
{
  return *(_DWORD *)(this + 40);
}

//----- (1002491F) --------------------------------------------------------
BOOL __thiscall sub_1002491F(int this)
{
  return SetEvent(*(HANDLE *)(this + 12));
}

//----- (10024929) --------------------------------------------------------
int __thiscall sub_10024929(int this, int nPriority)
{
  void *v2; // ST00_4@1

  v2 = *(void **)(this + 8);
  *(_DWORD *)(this + 24) = nPriority;
  return sub_100120D3(v2, nPriority);
}

//----- (10024941) --------------------------------------------------------
char __thiscall sub_10024941(int this)
{
  int v1; // esi@1
  char result; // al@3
  char v3; // [sp+4h] [bp-10h]@3
  int v4; // [sp+Ch] [bp-8h]@2
  void (*v5)(); // [sp+10h] [bp-4h]@2

  v1 = this;
  if ( !*(_DWORD *)(this + 32) )
  {
    v4 = 0;
    v5 = sub_1001253A;
    do
      result = sub_10010BDE(&v3);
    while ( !*(_DWORD *)(v1 + 32) );
  }
  return result;
}

//----- (1002496E) --------------------------------------------------------
signed __int32 __thiscall sub_1002496E(int this)
{
  volatile signed __int32 *v1; // esi@1

  v1 = (volatile signed __int32 *)(this + 32);
  _InterlockedExchange((volatile signed __int32 *)(this + 32), 1);
  WaitForSingleObjectEx(*(HANDLE *)(this + 12), 0xFFFFFFFF, 0);
  return _InterlockedExchange(v1, 0);
}

//----- (1002498A) --------------------------------------------------------
int __stdcall sub_1002498A(LPVOID lpThreadParameter)
{
  void (__thiscall *v1)(_DWORD); // esi@1
  void (__thiscall *v2)(_DWORD, _DWORD); // esi@1

  WaitForSingleObjectEx(*((HANDLE *)lpThreadParameter + 3), 0xFFFFFFFF, 0);
  _InterlockedExchange((volatile signed __int32 *)lpThreadParameter + 8, 0);
  v1 = *(void (__thiscall **)(_DWORD))(*(_DWORD *)lpThreadParameter + 20);
  j_nullsub_1(v1);
  v1(lpThreadParameter);
  v2 = *(void (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)lpThreadParameter + 16);
  j_nullsub_1(v2);
  v2(lpThreadParameter, 1);
  sub_10012293(0);
  return 0;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100249D8) --------------------------------------------------------
int __thiscall sub_100249D8(int this, int a2, int a3, int a4, int a5)
{
  *(_DWORD *)this = a2 & 0xFFFFFFF;
  *(_DWORD *)(this + 4) = a4;
  *(_DWORD *)(this + 12) = a5;
  *(_DWORD *)(this + 8) = a3;
  return this;
}

//----- (100249FD) --------------------------------------------------------
BOOL __thiscall sub_100249FD(int this, char a2)
{
  int v2; // esi@1
  int v3; // eax@1

  v2 = this + 16;
  v3 = sub_1001AB0C((int)&a2, *(_DWORD *)(this + 16));
  return sub_10018A5D(v2, (int)&a2, v3) != 0;
}

//----- (10024A28) --------------------------------------------------------
char __thiscall sub_10024A28(int this, int a2)
{
  int v2; // eax@1
  int v3; // eax@2
  int v4; // eax@3
  char result; // al@5
  int v6; // eax@7

  v2 = *(_DWORD *)a2 & 0xFFFFFFF;
  if ( !v2 )
    return 1;
  v3 = v2 - 1;
  if ( !v3 )
  {
    v6 = *(_DWORD *)(*(_DWORD *)(this + 12) + 44);
    return v6 == *(_DWORD *)(a2 + 8);
  }
  v4 = v3 - 1;
  if ( !v4 )
  {
    v6 = *(_DWORD *)(this + 8);
    return v6 == *(_DWORD *)(a2 + 8);
  }
  if ( v4 == 1 )
    result = sub_100249FD(*(_DWORD *)(this + 12), *(_DWORD *)(a2 + 8));
  else
    result = 0;
  return result;
}

//----- (10024A73) --------------------------------------------------------
bool __thiscall sub_10024A73(int this, int a2)
{
  int v2; // eax@1
  int v3; // eax@2
  int v4; // eax@3
  bool result; // al@5
  int v6; // eax@6

  v2 = *(_DWORD *)a2 & 0xFFFFFFF;
  if ( v2 )
  {
    v3 = v2 - 1;
    if ( v3 )
    {
      v4 = v3 - 1;
      if ( v4 )
      {
        if ( v4 != 1 )
          return 0;
        v6 = *(_DWORD *)(this + 8);
      }
      else
      {
        v6 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 12) + 80) + 48);
      }
    }
    else
    {
      v6 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(this + 12) + 80) + 44);
    }
    result = v6 == *(_DWORD *)(a2 + 8);
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (10024ABF) --------------------------------------------------------
int __thiscall sub_10024ABF(int this, int a2)
{
  int v2; // edi@1
  int result; // eax@1

  v2 = this;
  *(_DWORD *)this = 1;
  *(_DWORD *)(this + 4) = sub_10014379(a2 + 4);
  result = v2;
  *(_DWORD *)(v2 + 8) = a2;
  return result;
}

//----- (10024AE5) --------------------------------------------------------
signed __int32 __thiscall sub_10024AE5(int this, int a2)
{
  signed __int32 result; // eax@2
  signed __int32 v3; // edx@3
  _DWORD *savedregs; // [sp+0h] [bp+0h]@3

  if ( *(_DWORD *)((a2 << 7) + *(_DWORD *)(this + 92)) > 1u )
  {
    savedregs = &savedregs;
    v3 = *(_DWORD *)((a2 << 7) + *(_DWORD *)(this + 92));
    if ( (unsigned int)v3 <= 1
      || v3 != _InterlockedCompareExchange((volatile signed __int32 *)((a2 << 7) + *(_DWORD *)(this + 92)), 1, v3) )
      result = 0;
    else
      result = v3;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10024B36) --------------------------------------------------------
int __thiscall sub_10024B36(void *this)
{
  void *v1; // esi@1
  int v3; // eax@6

  v1 = this;
  if ( *(_BYTE *)this & 0x18 && !(unsigned __int8)sub_100251B6((int)this) )
    return 0;
  if ( *(_DWORD *)v1 == 2 )
  {
    v3 = sub_10022620(*((_DWORD *)v1 + 1), *((_DWORD *)v1 + 2), 0);
LABEL_8:
    *((_DWORD *)v1 + 2) = v3;
    if ( v3 )
    {
      *(_BYTE *)(v3 + 179) |= 1u;
      *(_DWORD *)v1 = 1;
    }
    return *((_DWORD *)v1 + 2);
  }
  if ( *(_DWORD *)v1 == 4 )
  {
    v3 = sub_10022620(*((_DWORD *)v1 + 1), *((_DWORD *)v1 + 2), 1);
    goto LABEL_8;
  }
  return *((_DWORD *)v1 + 2);
}

//----- (10024B83) --------------------------------------------------------
int __thiscall sub_10024B83(int this, int a2)
{
  int v2; // esi@1
  int result; // eax@2

  v2 = this;
  if ( *(_DWORD *)this == 2 )
  {
    result = sub_10020DA1(a2, *(_DWORD *)(this + 4), *(_DWORD *)(this + 8), 0);
  }
  else
  {
    result = *(_DWORD *)this - 4;
    if ( *(_DWORD *)this == 4 )
      result = sub_10020DA1(a2, *(_DWORD *)(this + 4), *(_DWORD *)(this + 8), 1);
  }
  *(_DWORD *)(v2 + 8) = a2;
  *(_DWORD *)v2 = 1;
  return result;
}

//----- (10024BBD) --------------------------------------------------------
char __thiscall sub_10024BBD(int this, __int64 a2)
{
  char result; // al@2

  if ( (unsigned __int64)(a2 - *(_QWORD *)(this + 24)) > 0x3E8 )
  {
    result = 1;
    *(_QWORD *)(this + 24) = a2;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10024BF5) --------------------------------------------------------
char __thiscall sub_10024BF5(int this, int a2, int a3, char a4)
{
  int v4; // ebx@1
  int v5; // eax@3
  int v6; // eax@6
  int v8; // eax@10
  int v9; // eax@15
  char v10; // [sp+Ch] [bp-18h]@15
  char v11; // [sp+18h] [bp-Ch]@6

  v4 = this;
  if ( !a4 )
  {
    if ( *(_DWORD *)(this + 12) < 0x65u )
    {
      if ( *(_DWORD *)(a3 + 20) - *(_DWORD *)(a3 + 16) <= 0 )
        v8 = 0;
      else
        v8 = sub_1001F39D(a3 + 16);
    }
    else
    {
      if ( *(_DWORD *)(this + 12) >= 0x7Fu )
      {
LABEL_16:
        *(_DWORD *)(v4 + 12) = 0;
        return 0;
      }
      v8 = sub_10025FF1(a3);
    }
    if ( v8 )
    {
      v9 = sub_10024ABF((int)&v10, v8);
      *(_DWORD *)a2 = *(_DWORD *)v9;
      *(_DWORD *)(a2 + 4) = *(_DWORD *)(v9 + 4);
      *(_DWORD *)(a2 + 8) = *(_DWORD *)(v9 + 8);
      ++*(_DWORD *)(v4 + 12);
      return 1;
    }
    goto LABEL_16;
  }
  if ( *(_DWORD *)(a3 + 20) - *(_DWORD *)(a3 + 16) <= 0 )
    v5 = 0;
  else
    v5 = sub_1001F39D(a3 + 16);
  if ( v5 )
  {
    v6 = sub_10024ABF((int)&v11, v5);
    *(_DWORD *)a2 = *(_DWORD *)v6;
    *(_DWORD *)(a2 + 4) = *(_DWORD *)(v6 + 4);
    *(_DWORD *)(a2 + 8) = *(_DWORD *)(v6 + 8);
    return 1;
  }
  return 0;
}

//----- (10024C8E) --------------------------------------------------------
int __thiscall sub_10024C8E(int this, int a2, int a3)
{
  signed int v3; // edi@1
  signed int i; // esi@1
  int v5; // edx@2
  int result; // eax@3

  v3 = *(_DWORD *)(this + 44);
  for ( i = 0; i < v3; ++i )
  {
    v5 = (i + *(_DWORD *)a2 + (a3 != -1)) % v3;
    if ( v5 == a3 )
      break;
    result = *(_DWORD *)(*(_DWORD *)(this + 32) + 4 * v5);
    if ( result )
    {
      *(_DWORD *)a2 = v5;
      return result;
    }
  }
  return 0;
}

//----- (10024CDD) --------------------------------------------------------
int __thiscall sub_10024CDD(int this, int a2)
{
  int v2; // ebx@1
  int v3; // edi@1
  int result; // eax@1

  v2 = this + 16;
  v3 = *(_DWORD *)(this + 176);
  result = sub_10017AE5(*(_DWORD *)(this + 176), *(_DWORD *)(this + 80), a2, this + 16);
  if ( !result )
  {
    if ( v3 )
      result = sub_10017AE5(0, v3, a2, v2);
  }
  return result;
}

//----- (10024D18) --------------------------------------------------------
int __thiscall sub_10024D18(int this, int a2)
{
  int v2; // ebx@1
  int v3; // edi@1
  int result; // eax@1

  v2 = this + 96;
  v3 = *(_DWORD *)(this + 180);
  result = sub_10017AE5(*(_DWORD *)(this + 180), *(_DWORD *)(this + 160), a2, this + 96);
  if ( !result )
  {
    if ( v3 )
      result = sub_10017AE5(0, v3, a2, v2);
  }
  return result;
}

//----- (10024D56) --------------------------------------------------------
char __stdcall sub_10024D56(int a1, int a2, char a3)
{
  int v3; // eax@2
  char result; // al@4
  signed int v5; // [sp+8h] [bp-Ch]@3
  int v6; // [sp+10h] [bp-4h]@0

  if ( a3 )
  {
    v3 = sub_10022653(a2);
    if ( v3 )
    {
      v5 = 2;
      v6 = v3;
LABEL_4:
      result = 1;
      *(_DWORD *)a1 = v5;
      *(_DWORD *)(a1 + 4) = a2;
      *(_DWORD *)(a1 + 8) = v6;
      return result;
    }
  }
  else if ( sub_100226AD(a2) )
  {
    v5 = 8;
    goto LABEL_4;
  }
  return 0;
}
// 10022653: using guessed type int __thiscall sub_10022653(_DWORD);

//----- (10024DA8) --------------------------------------------------------
char __thiscall sub_10024DA8(void *this, int a2, int a3, char a4, int a5, char a6)
{
  int v6; // esi@1
  void *v7; // edi@1
  char result; // al@3
  int v9; // esi@5

  v6 = *(_DWORD *)(a3 + 256);
  v7 = this;
  if ( sub_10025EB0(this, a3, 0, a5, a6) || !sub_10024D56(a2, a3, a4) )
  {
    if ( a5 )
      v9 = *(_DWORD *)(v6 + 12);
    else
      v9 = *(_DWORD *)(v6 + 16);
    while ( v9 )
    {
      if ( !sub_10025EB0(v7, v9, a3, a5, a6) && sub_10024D56(a2, v9, a4) )
        goto LABEL_3;
      v9 = *(_DWORD *)(v9 + 260);
    }
    result = 0;
  }
  else
  {
LABEL_3:
    result = 1;
  }
  return result;
}

//----- (10024E29) --------------------------------------------------------
char __stdcall sub_10024E29(int a1, int a2)
{
  int (__thiscall *v2)(_DWORD); // esi@1
  int v3; // eax@1
  int v4; // esi@2
  char result; // al@2
  char v6; // [sp+8h] [bp-Ch]@2

  v2 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)a2 + 12);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)a2 + 12));
  v3 = v2(a2);
  if ( v3 )
  {
    v4 = sub_10024ABF((int)&v6, v3);
    result = 1;
    *(_DWORD *)a1 = *(_DWORD *)v4;
    v4 += 4;
    *(_DWORD *)(a1 + 4) = *(_DWORD *)v4;
    *(_DWORD *)(a1 + 8) = *(_DWORD *)(v4 + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10024E67) --------------------------------------------------------
char __thiscall sub_10024E67(void *this, int a2, int a3, int a4, char a5)
{
  int v5; // esi@1
  void *v6; // edi@1
  char result; // al@3
  int v8; // esi@5

  v5 = *(_DWORD *)(a3 + 256);
  v6 = this;
  if ( sub_10025EB0(this, a3, 0, a4, a5) || !sub_10024E29(a2, a3) )
  {
    if ( a4 )
      v8 = *(_DWORD *)(v5 + 12);
    else
      v8 = *(_DWORD *)(v5 + 16);
    while ( v8 )
    {
      if ( !sub_10025EB0(v6, v8, a3, a4, a5) && sub_10024E29(a2, v8) )
        goto LABEL_3;
      v8 = *(_DWORD *)(v8 + 260);
    }
    result = 0;
  }
  else
  {
LABEL_3:
    result = 1;
  }
  return result;
}

//----- (10024EE2) --------------------------------------------------------
char __stdcall sub_10024EE2(int a1, int a2, char a3, char a4)
{
  int v4; // eax@2
  int v5; // ST14_4@4
  char result; // al@4
  signed int v7; // [sp+8h] [bp-Ch]@3

  if ( a4 )
  {
    v4 = sub_10022D07(a2, a3);
    if ( v4 )
    {
      v7 = 4;
LABEL_4:
      v5 = v4;
      result = 1;
      *(_DWORD *)a1 = v7;
      *(_DWORD *)(a1 + 4) = a2;
      *(_DWORD *)(a1 + 8) = v5;
      return result;
    }
  }
  else
  {
    v4 = sub_100228C4((void *)a2);
    if ( v4 )
    {
      v7 = 16;
      goto LABEL_4;
    }
  }
  return 0;
}

//----- (10024F37) --------------------------------------------------------
char __thiscall sub_10024F37(void *this, int a2, int a3, char a4, int a5, char a6)
{
  void *v6; // edi@1
  char result; // al@3
  int v8; // esi@5
  int v9; // [sp+8h] [bp-4h]@1

  v6 = this;
  v9 = *(_DWORD *)(a3 + 256);
  if ( sub_10025EB0(this, a3, 0, a5, a6) || !sub_10024EE2(a2, a3, a6, a4) )
  {
    if ( a5 )
      v8 = *(_DWORD *)(v9 + 12);
    else
      v8 = *(_DWORD *)(v9 + 16);
    while ( v8 )
    {
      if ( !sub_10025EB0(v6, v8, a3, a5, a6) && sub_10024EE2(a2, v8, a6, a4) )
        goto LABEL_3;
      v8 = *(_DWORD *)(v8 + 260);
    }
    result = 0;
  }
  else
  {
LABEL_3:
    result = 1;
  }
  return result;
}

//----- (10024FC7) --------------------------------------------------------
int __thiscall sub_10024FC7(int this)
{
  int v1; // esi@1
  int result; // eax@2
  int v3; // ST00_4@3
  int (__cdecl *v4)(_DWORD); // esi@3

  v1 = this;
  if ( *(_DWORD *)this == 2 )
  {
    sub_1002605D(*(_DWORD *)(this + 8));
    result = sub_100190FC(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v1 + 4) + 256) + 4), *(_DWORD *)(v1 + 8));
  }
  else
  {
    result = *(_DWORD *)this - 4;
    if ( *(_DWORD *)this == 4 )
    {
      v3 = *(_DWORD *)(this + 8);
      v4 = *(int (__cdecl **)(_DWORD))(v3 + 12);
      j_nullsub_1(*(_DWORD *)(v3 + 12));
      result = v4(v3);
    }
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10025009) --------------------------------------------------------
void __thiscall sub_10025009(int this, signed __int64 a2)
{
  if ( (unsigned __int64)(a2 - *(_QWORD *)(this + 416)) > 0x7D0 )
    sub_10018B71(this, a2);
}

//----- (10025044) --------------------------------------------------------
char __thiscall sub_10025044(void *this, int a2)
{
  int v2; // edi@1
  int (__thiscall *v3)(_DWORD); // esi@1
  int v4; // eax@1
  int v5; // esi@2
  char result; // al@2
  char v7; // [sp+8h] [bp-Ch]@2

  v2 = *(_DWORD *)this;
  v3 = *(int (__thiscall **)(_DWORD))(**(_DWORD **)this + 8);
  j_nullsub_1(v3);
  v4 = v3(v2);
  if ( v4 )
  {
    v5 = sub_10024ABF((int)&v7, v4);
    result = 1;
    *(_DWORD *)a2 = *(_DWORD *)v5;
    v5 += 4;
    *(_DWORD *)(a2 + 4) = *(_DWORD *)v5;
    *(_DWORD *)(a2 + 8) = *(_DWORD *)(v5 + 4);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10025081) --------------------------------------------------------
bool __stdcall sub_10025081(int a1, int a2, char a3, unsigned int a4)
{
  return a4 & 1 && sub_10024E29(a2, a1)
      || a4 & 0xA && sub_10024D56(a2, a1, (a4 >> 1) & 1)
      || a4 & 0x14 && sub_10024EE2(a2, a1, a3, (a4 >> 2) & 1);
}

//----- (100250EE) --------------------------------------------------------
bool __stdcall sub_100250EE(int a1, int a2, char a3, unsigned int a4)
{
  return a4 & 0x14 && sub_10024EE2(a2, a1, a3, (a4 >> 2) & 1)
      || a4 & 0xA && sub_10024D56(a2, a1, (a4 >> 1) & 1)
      || a4 & 1 && sub_10024E29(a2, a1);
}

//----- (1002515C) --------------------------------------------------------
int __thiscall sub_1002515C(int this, int a2, int a3)
{
  int v3; // esi@1
  int result; // eax@1
  int v5; // edx@1

  v3 = this;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)this = a2;
  *(_DWORD *)(this + 8) = *(_DWORD *)(a2 + 144);
  *(_DWORD *)(this + 4) = **(_DWORD **)(a2 + 80);
  result = sub_10012022();
  *(_DWORD *)(v3 + 24) = result;
  *(_DWORD *)(v3 + 28) = v5;
  *(_DWORD *)(v3 + 16) = result;
  *(_DWORD *)(v3 + 20) = v5;
  if ( a3 == 1 )
  {
    *(_DWORD *)(v3 + 32) = sub_10025236;
    *(_DWORD *)(v3 + 36) = sub_10025502;
  }
  else
  {
    *(_DWORD *)(v3 + 32) = sub_10025A8D;
    *(_DWORD *)(v3 + 36) = sub_10025BA2;
  }
  return result;
}

//----- (100251B6) --------------------------------------------------------
BOOL __thiscall sub_100251B6(int this)
{
  int v1; // esi@1
  char v2; // al@4
  int v3; // edi@4
  int v4; // eax@6
  int v6; // [sp+8h] [bp-4h]@4

  v1 = this;
  if ( *(_DWORD *)this == 8 )
  {
    v4 = sub_10022653(*(_DWORD *)(this + 4));
    if ( !v4 )
      return (*(_BYTE *)v1 & 0x18) == 0;
    *(_DWORD *)v1 = 2;
    goto LABEL_10;
  }
  if ( *(_DWORD *)this != 16 )
    return (*(_BYTE *)v1 & 0x18) == 0;
  if ( *(_DWORD *)(this + 8) != 1 )
  {
    v4 = sub_10023AE9(0);
    if ( !v4 )
      return (*(_BYTE *)v1 & 0x18) == 0;
    *(_DWORD *)v1 = 4;
LABEL_10:
    *(_DWORD *)(v1 + 8) = v4;
    return (*(_BYTE *)v1 & 0x18) == 0;
  }
  v2 = sub_100223F1((void *)(*(_DWORD *)(this + 4) + 52), (int)&v6);
  v3 = v2 != 0 ? v6 : 0;
  if ( v2 != 0 ? v6 : 0 )
  {
    sub_10023F1F(v2 != 0 ? v6 : 0, 1);
    *(_DWORD *)(v1 + 8) = v3;
    *(_DWORD *)v1 = 4;
  }
  return (*(_BYTE *)v1 & 0x18) == 0;
}
// 10022653: using guessed type int __thiscall sub_10022653(_DWORD);
// 10023AE9: using guessed type _DWORD __stdcall sub_10023AE9(_DWORD);

//----- (10025236) --------------------------------------------------------
char __thiscall sub_10025236(void *this, int a2, int a3, char a4, unsigned int a5)
{
  int v5; // edi@1
  int v6; // ebx@1
  char result; // al@2
  signed __int64 v8; // rax@3
  int v9; // ecx@3
  int v10; // ecx@4
  int v11; // eax@10
  int v12; // eax@12
  int v13; // eax@14
  int v14; // edi@14
  int v15; // ecx@17
  bool v16; // zf@18
  signed int v17; // esi@21
  int v18; // eax@26
  int v19; // esi@44
  int v20; // edi@44
  int v21; // esi@44
  int v22; // [sp+10h] [bp-28h]@25
  int v23; // [sp+14h] [bp-24h]@17
  char v24; // [sp+18h] [bp-20h]@23
  char v25; // [sp+18h] [bp-20h]@44
  int v26; // [sp+1Ch] [bp-1Ch]@25
  char v27; // [sp+23h] [bp-15h]@1
  char v28; // [sp+24h] [bp-14h]@45
  int v29; // [sp+28h] [bp-10h]@14
  int v30; // [sp+2Ch] [bp-Ch]@18
  int v31; // [sp+30h] [bp-8h]@18

  v5 = a2;
  v6 = (int)this;
  v27 = 0;
  if ( sub_10025044(this, a2) )
  {
    result = 1;
  }
  else
  {
    LODWORD(v8) = sub_10012022();
    v9 = *(_DWORD *)(v6 + 4);
    *(_QWORD *)(v6 + 16) = v8;
    sub_10025009(v9, v8);
    if ( sub_10024BBD(v6, *(_QWORD *)(v6 + 16)) )
    {
      v10 = *(_DWORD *)(v6 + 4);
      if ( *(_DWORD *)(v10 + 304) )
      {
        while ( 1 )
        {
          v12 = sub_1001802E((void *)v10);
          if ( !v12 )
            break;
          if ( *(_DWORD *)v12 )
          {
            if ( a5 & 1 )
            {
              v11 = sub_10025FF1(v12 - 212);
              if ( v11 )
              {
                v13 = sub_10024ABF((int)&v29, v11);
                *(_DWORD *)a2 = *(_DWORD *)v13;
                v14 = a2 + 4;
                *(_DWORD *)v14 = *(_DWORD *)(v13 + 4);
                *(_DWORD *)(v14 + 4) = *(_DWORD *)(v13 + 8);
                v5 = a2;
LABEL_15:
                v27 = 1;
                break;
              }
            }
          }
          else if ( sub_10025081(v12 - 272, a2, a4, a5) )
          {
            goto LABEL_15;
          }
          v10 = *(_DWORD *)(v6 + 4);
        }
      }
      *(_BYTE *)(*(_DWORD *)v6 + 98) = 1;
    }
    v15 = *(_DWORD *)v6;
    v23 = *(_DWORD *)(*(_DWORD *)v6 + 84);
    if ( v27 )
      goto LABEL_52;
    v30 = 0;
    v16 = *(_BYTE *)(v15 + 96) == 0;
    v29 = 1;
    v31 = 2;
    v17 = v16 && !sub_1001EDDB(v15) && !a4;
    result = 0;
    v24 = 1;
    do
    {
      if ( v17 > 2 )
        break;
      v22 = a3;
      v26 = v23;
      if ( v23 )
      {
        while ( 1 )
        {
          v18 = sub_10024AE5(*(_DWORD *)(v6 + 4), *(_DWORD *)(v6 + 8));
          if ( v18 )
          {
            if ( sub_10025081(v18, v5, a4, a5) )
              break;
          }
          if ( v24 && a5 & 1 && sub_10024BF5(v6, v5, *(_DWORD *)v6, 0)
            || a5 & 1 && sub_10025882((void *)v6, v5, v26, v22, v24, *(&v29 + v17), a5, a4)
            || a5 & 0xA && sub_10025785((void *)v6, v5, v26, v22, (a5 >> 1) & 1, *(&v29 + v17), a5, a4)
            || a5 & 0x14 && sub_1002598D((void *)v6, v5, v26, v22, (a5 >> 2) & 1, *(&v29 + v17), a5, a4)
            || a5 & 1 && v17 == 2 && sub_10025F80((void *)v6, v5, *(_DWORD *)(v26 + 4), *(_DWORD *)v6) )
            break;
          v22 = 0;
          v24 = 0;
          v26 = sub_1001809F(*(_DWORD *)(v6 + 4), v23, v26);
          if ( !v26 )
          {
            result = v27;
            goto LABEL_42;
          }
        }
        result = 1;
        v27 = 1;
      }
LABEL_42:
      ++v17;
    }
    while ( !result );
    if ( result )
    {
LABEL_52:
      v19 = *(_DWORD *)(v5 + 4);
      v20 = *(_DWORD *)(v19 + 8);
      sub_10025E64(v19, *(_DWORD *)(v6 + 16), *(_DWORD *)(v6 + 20));
      v21 = v19 + 12;
      v25 = 0;
      if ( *(_DWORD *)v21 & 0xFFFFFFF )
      {
        sub_10019F0A((int)&v28, *(_DWORD *)v6 + 148);
        if ( sub_10024A73((int)&v28, v21) )
          v25 = 1;
      }
      sub_1001F897(*(_DWORD *)v6, v25, v20 == v23);
      result = v27;
    }
  }
  return result;
}

//----- (10025502) --------------------------------------------------------
char __thiscall sub_10025502(void *this, int a2, int a3, char a4, unsigned int a5)
{
  int v5; // edi@1
  int v6; // ebx@1
  char result; // al@2
  signed __int64 v8; // rax@3
  int v9; // ecx@3
  int v10; // ecx@4
  int v11; // eax@10
  int v12; // eax@12
  int v13; // eax@14
  int v14; // edi@14
  int v15; // ecx@17
  bool v16; // zf@18
  signed int v17; // esi@21
  int v18; // ecx@25
  int v19; // edx@25
  int i; // eax@26
  int v21; // eax@32
  int v22; // ecx@46
  int v23; // esi@46
  char v24; // [sp+10h] [bp-28h]@23
  int v25; // [sp+18h] [bp-20h]@17
  int v26; // [sp+1Ch] [bp-1Ch]@25
  int v27; // [sp+20h] [bp-18h]@25
  char v28; // [sp+27h] [bp-11h]@1
  int v29; // [sp+28h] [bp-10h]@14
  int v30; // [sp+2Ch] [bp-Ch]@18
  int v31; // [sp+30h] [bp-8h]@18

  v5 = a2;
  v6 = (int)this;
  v28 = 0;
  if ( sub_10025044(this, a2) )
  {
    result = 1;
  }
  else
  {
    LODWORD(v8) = sub_10012022();
    v9 = *(_DWORD *)(v6 + 4);
    *(_QWORD *)(v6 + 16) = v8;
    sub_10025009(v9, v8);
    if ( sub_10024BBD(v6, *(_QWORD *)(v6 + 16)) )
    {
      v10 = *(_DWORD *)(v6 + 4);
      if ( *(_DWORD *)(v10 + 304) )
      {
        while ( 1 )
        {
          v12 = sub_1001802E((void *)v10);
          if ( !v12 )
            break;
          if ( *(_DWORD *)v12 )
          {
            if ( a5 & 1 )
            {
              v11 = sub_10025FF1(v12 - 212);
              if ( v11 )
              {
                v13 = sub_10024ABF((int)&v29, v11);
                *(_DWORD *)a2 = *(_DWORD *)v13;
                v14 = a2 + 4;
                *(_DWORD *)v14 = *(_DWORD *)(v13 + 4);
                *(_DWORD *)(v14 + 4) = *(_DWORD *)(v13 + 8);
                v5 = a2;
LABEL_15:
                v28 = 1;
                break;
              }
            }
          }
          else if ( sub_100250EE(v12 - 272, a2, a4, a5) )
          {
            goto LABEL_15;
          }
          v10 = *(_DWORD *)(v6 + 4);
        }
      }
      *(_BYTE *)(*(_DWORD *)v6 + 98) = 1;
    }
    v15 = *(_DWORD *)v6;
    v25 = *(_DWORD *)(*(_DWORD *)v6 + 84);
    if ( v28 )
      goto LABEL_49;
    v30 = 0;
    v16 = *(_BYTE *)(v15 + 96) == 0;
    v29 = 1;
    v31 = 2;
    v17 = v16 && !sub_1001EDDB(v15) && !a4;
    result = 0;
    v24 = 1;
    do
    {
      if ( v17 > 2 )
        break;
      v18 = v25;
      v19 = a3;
      v26 = a3;
      v27 = v25;
      if ( v25 )
      {
        for ( i = a5 & 0x14; ; i = a5 & 0x14 )
        {
          if ( i )
          {
            if ( sub_1002598D((void *)v6, v5, v18, v19, (a5 >> 2) & 1, *(&v29 + v17), a5, a4) )
              goto LABEL_42;
            v18 = v27;
            v19 = v26;
          }
          if ( a5 & 0xA && sub_10025785((void *)v6, v5, v18, v19, (a5 >> 1) & 1, *(&v29 + v17), a5, a4) )
          {
LABEL_42:
            result = 1;
            v28 = 1;
            goto LABEL_44;
          }
          v21 = a5 & 1;
          if ( a5 & 1 )
          {
            if ( sub_10025882((void *)v6, v5, v27, v26, v24, *(&v29 + v17), a5, a4)
              || v17 == 2 && sub_10025F80((void *)v6, v5, *(_DWORD *)(v27 + 4), *(_DWORD *)v6) )
              goto LABEL_42;
            v21 = a5 & 1;
          }
          if ( v24 && v21 && sub_10024BF5(v6, v5, *(_DWORD *)v6, 1) )
            goto LABEL_42;
          v24 = 0;
          v26 = 0;
          v18 = sub_1001809F(*(_DWORD *)(v6 + 4), v25, v27);
          v27 = v18;
          if ( !v18 )
            break;
          v19 = 0;
        }
        result = v28;
      }
LABEL_44:
      ++v17;
    }
    while ( !result );
    if ( result )
    {
LABEL_49:
      v22 = *(_DWORD *)(v5 + 4);
      v23 = *(_DWORD *)(v22 + 8);
      sub_10025E64(v22, *(_DWORD *)(v6 + 16), *(_DWORD *)(v6 + 20));
      sub_1001F897(*(_DWORD *)v6, (*(_DWORD *)(*(_DWORD *)(v5 + 4) + 12) & 0xFFFFFFF) == 0, v23 == v25);
      result = v28;
    }
  }
  return result;
}

//----- (10025785) --------------------------------------------------------
char __thiscall sub_10025785(void *this, int a2, int a3, int a4, char a5, int a6, unsigned int a7, char a8)
{
  char result; // al@3
  int v9; // eax@5
  int v10; // ebx@7
  int v11; // eax@8
  int v12; // eax@12
  int i; // [sp+4h] [bp-Ch]@7
  void *v14; // [sp+8h] [bp-8h]@1
  int v15; // [sp+Ch] [bp-4h]@5

  v14 = this;
  if ( a4 && sub_10024DA8(this, a2, a4, a5, a6, a8) )
  {
    result = 1;
  }
  else
  {
    if ( a6 )
      v9 = sub_10024CDD(a3, (int)&v15);
    else
      v9 = sub_10024D18(a3, (int)&v15);
    v10 = v9;
    for ( i = v15; ; v10 = sub_10018063((int)&v15, i, v12) )
    {
      if ( !v10 )
        return 0;
      v11 = sub_10024AE5(*((_DWORD *)v14 + 1), *((_DWORD *)v14 + 2));
      if ( v11 )
      {
        if ( sub_10025081(v11, a2, a8, a7) )
          break;
      }
      if ( !sub_10025EB0(v14, v10, a4, a6, a8) && sub_10024D56(a2, v10, a5) )
      {
        if ( a6 )
          *(_DWORD *)(a3 + 176) = (v15 + 1) % *(_DWORD *)(a3 + 80);
        else
          *(_DWORD *)(a3 + 180) = (v15 + 1) % *(_DWORD *)(a3 + 160);
        break;
      }
      v12 = a3 + 96;
      if ( a6 )
        v12 = a3 + 16;
    }
    result = 1;
  }
  return result;
}

//----- (10025882) --------------------------------------------------------
char __thiscall sub_10025882(void *this, int a2, int a3, int a4, char a5, int a6, unsigned int a7, char a8)
{
  void *v8; // edi@1
  char result; // al@3
  int v10; // eax@7
  int v11; // eax@10
  int v12; // eax@14
  int i; // [sp+8h] [bp-Ch]@9
  int v14; // [sp+Ch] [bp-8h]@17
  int v15; // [sp+10h] [bp-4h]@7

  v8 = this;
  if ( a4 && sub_10024E67(this, a2, a4, a6, a8)
    || a5 && sub_10025F80(v8, a2, *(_DWORD *)(*(_DWORD *)v8 + 80), *(_DWORD *)v8) )
  {
    result = 1;
  }
  else
  {
    if ( a6 )
      v10 = sub_10024CDD(a3, (int)&v15);
    else
      v10 = sub_10024D18(a3, (int)&v15);
    for ( i = v15; ; v10 = sub_10018063((int)&v15, i, v12) )
    {
      v14 = v10;
      if ( !v10 )
        return 0;
      v11 = sub_10024AE5(*((_DWORD *)v8 + 1), *((_DWORD *)v8 + 2));
      if ( v11 )
      {
        if ( sub_10025081(v11, a2, a8, a7) )
          break;
      }
      if ( !sub_10025EB0(v8, v14, a4, a6, a8) && sub_10024E29(a2, v14) )
      {
        if ( a6 )
          *(_DWORD *)(a3 + 176) = (v15 + 1) % *(_DWORD *)(a3 + 80);
        else
          *(_DWORD *)(a3 + 180) = (v15 + 1) % *(_DWORD *)(a3 + 160);
        break;
      }
      v12 = a3 + 96;
      if ( a6 )
        v12 = a3 + 16;
    }
    result = 1;
  }
  return result;
}

//----- (1002598D) --------------------------------------------------------
char __thiscall sub_1002598D(void *this, int a2, int a3, int a4, char a5, int a6, unsigned int a7, char a8)
{
  char result; // al@3
  int v9; // eax@5
  int v10; // ebx@7
  int v11; // eax@8
  int v12; // eax@12
  int i; // [sp+4h] [bp-Ch]@7
  void *v14; // [sp+8h] [bp-8h]@1
  int v15; // [sp+Ch] [bp-4h]@5

  v14 = this;
  if ( a4 && sub_10024F37(this, a2, a4, a5, a6, a8) )
  {
    result = 1;
  }
  else
  {
    if ( a6 )
      v9 = sub_10024CDD(a3, (int)&v15);
    else
      v9 = sub_10024D18(a3, (int)&v15);
    v10 = v9;
    for ( i = v15; ; v10 = sub_10018063((int)&v15, i, v12) )
    {
      if ( !v10 )
        return 0;
      v11 = sub_10024AE5(*((_DWORD *)v14 + 1), *((_DWORD *)v14 + 2));
      if ( v11 )
      {
        if ( sub_10025081(v11, a2, a8, a7) )
          break;
      }
      if ( !sub_10025EB0(v14, v10, a4, a6, a8) && sub_10024EE2(a2, v10, a8, a5) )
      {
        if ( a6 )
          *(_DWORD *)(a3 + 176) = (v15 + 1) % *(_DWORD *)(a3 + 80);
        else
          *(_DWORD *)(a3 + 180) = (v15 + 1) % *(_DWORD *)(a3 + 160);
        break;
      }
      v12 = a3 + 96;
      if ( a6 )
        v12 = a3 + 16;
    }
    result = 1;
  }
  return result;
}

//----- (10025A8D) --------------------------------------------------------
char __thiscall sub_10025A8D(void *this, int a2, int a3, int a4, unsigned int a5)
{
  int v5; // esi@1
  char v6; // bl@1
  int v8; // edi@3
  unsigned int v9; // eax@3
  int v10; // eax@4
  char v11; // al@5
  int v12; // ecx@5
  int v13; // ecx@10
  int v14; // eax@11
  char v15; // al@12
  int v16; // ecx@16
  int v17; // eax@17
  char v18; // al@18
  int v19; // [sp-8h] [bp-18h]@5
  char v20; // [sp+8h] [bp-8h]@11
  int v21; // [sp+Ch] [bp-4h]@4
  int v22; // [sp+Ch] [bp-4h]@10
  int v23; // [sp+Ch] [bp-4h]@16
  int v24; // [sp+24h] [bp+14h]@17

  v5 = (int)this;
  v6 = 0;
  if ( sub_10025044(this, a2) )
    return 1;
  v8 = sub_100180CC(*(_DWORD *)(v5 + 4));
  v9 = a5;
  if ( !(a5 & 1) )
  {
LABEL_9:
    if ( v9 & 0xA && (v13 = v8, (v22 = v8) != 0) )
    {
      v14 = v9 >> 1;
      v20 = v14;
      while ( 1 )
      {
        v15 = sub_10025CB2(a2, v13, v14 & 1);
        v19 = v22;
        v12 = *(_DWORD *)(v5 + 4);
        v6 = v15;
        if ( v15 )
          break;
        v14 = sub_1001809F(v12, v8, v22);
        v13 = v14;
        v22 = v14;
        LOBYTE(v14) = v20;
        if ( !v13 )
        {
          v9 = a5;
          goto LABEL_15;
        }
      }
    }
    else
    {
LABEL_15:
      if ( !(v9 & 0x14) )
        return v6;
      v16 = v8;
      v23 = v8;
      if ( !v8 )
        return v6;
      v17 = v9 >> 2;
      v24 = v17;
      while ( 1 )
      {
        v18 = sub_10025DCA(a2, v16, v17 & 1);
        v19 = v23;
        v12 = *(_DWORD *)(v5 + 4);
        v6 = v18;
        if ( v18 )
          break;
        v17 = sub_1001809F(v12, v8, v23);
        v16 = v17;
        v23 = v17;
        LOBYTE(v17) = v24;
        if ( !v16 )
          return v6;
      }
    }
    goto LABEL_21;
  }
  v21 = v8;
  v10 = v8;
  if ( v8 )
  {
    while ( 1 )
    {
      v11 = sub_10025D48(a2, v10);
      v19 = v21;
      v12 = *(_DWORD *)(v5 + 4);
      v6 = v11;
      if ( v11 )
        break;
      v10 = sub_1001809F(v12, v8, v21);
      v21 = v10;
      if ( !v10 )
        goto LABEL_7;
    }
LABEL_21:
    sub_10019734(v12, v19);
    return v6;
  }
LABEL_7:
  v6 = sub_10025F3C(v5, a2, *(_DWORD *)(*(_DWORD *)v5 + 80));
  if ( !v6 )
  {
    v9 = a5;
    goto LABEL_9;
  }
  return v6;
}

//----- (10025BA2) --------------------------------------------------------
char __thiscall sub_10025BA2(void *this, int a2, int a3, int a4, unsigned int a5)
{
  int v5; // esi@1
  char v6; // bl@1
  int v8; // eax@3
  int v9; // edi@3
  int v10; // ecx@4
  unsigned int v11; // eax@5
  char v12; // al@6
  int v13; // ecx@6
  int v14; // eax@7
  int v15; // ecx@9
  unsigned int v16; // eax@10
  char v17; // al@11
  int v18; // eax@12
  int v19; // eax@14
  char v20; // al@15
  int v21; // [sp-8h] [bp-18h]@6
  int v22; // [sp+Ch] [bp-4h]@4
  int v23; // [sp+Ch] [bp-4h]@9
  int v24; // [sp+Ch] [bp-4h]@14

  v5 = (int)this;
  v6 = 0;
  if ( sub_10025044(this, a2) )
    return 1;
  v8 = sub_100180CC(*(_DWORD *)(v5 + 4));
  v9 = v8;
  if ( a5 & 0x14 )
  {
    v10 = v8;
    v22 = v8;
    if ( v8 )
    {
      v11 = a5 >> 2;
      do
      {
        v12 = sub_10025DCA(a2, v10, v11 & 1);
        v21 = v22;
        v13 = *(_DWORD *)(v5 + 4);
        v6 = v12;
        if ( v12 )
          goto LABEL_20;
        v14 = sub_1001809F(v13, v9, v22);
        v10 = v14;
        v22 = v14;
        v11 = a5 >> 2;
      }
      while ( v10 );
    }
  }
  if ( a5 & 0xA )
  {
    v15 = v9;
    v23 = v9;
    if ( v9 )
    {
      v16 = a5 >> 1;
      do
      {
        v17 = sub_10025CB2(a2, v15, v16 & 1);
        v21 = v23;
        v13 = *(_DWORD *)(v5 + 4);
        v6 = v17;
        if ( v17 )
          goto LABEL_20;
        v18 = sub_1001809F(v13, v9, v23);
        v15 = v18;
        v23 = v18;
        v16 = a5 >> 1;
      }
      while ( v15 );
    }
  }
  if ( a5 & 1 )
  {
    v24 = v9;
    v19 = v9;
    if ( v9 )
    {
      while ( 1 )
      {
        v20 = sub_10025D48(a2, v19);
        v21 = v24;
        v13 = *(_DWORD *)(v5 + 4);
        v6 = v20;
        if ( v20 )
          break;
        v19 = sub_1001809F(v13, v9, v24);
        v24 = v19;
        if ( !v19 )
          goto LABEL_17;
      }
LABEL_20:
      sub_10019734(v13, v21);
      return v6;
    }
LABEL_17:
    v6 = sub_10025F3C(v5, a2, *(_DWORD *)(*(_DWORD *)v5 + 80));
  }
  return v6;
}

//----- (10025CB2) --------------------------------------------------------
char __stdcall sub_10025CB2(int a1, int a2, char a3)
{
  int v3; // esi@1
  int v4; // eax@3
  char result; // al@5
  signed int v6; // [sp+Ch] [bp-14h]@4
  int v7; // [sp+14h] [bp-Ch]@0
  int v8; // [sp+18h] [bp-8h]@1
  int v9; // [sp+1Ch] [bp-4h]@1

  v3 = sub_10024D18(a2, (int)&v9);
  v8 = v9;
  while ( v3 )
  {
    if ( a3 )
    {
      v4 = sub_10022653(v3);
      if ( v4 )
      {
        v6 = 2;
        v7 = v4;
LABEL_5:
        result = 1;
        *(_DWORD *)(a2 + 180) = (v9 + 1) % *(_DWORD *)(a2 + 160);
        *(_DWORD *)a1 = v6;
        *(_DWORD *)(a1 + 4) = v3;
        *(_DWORD *)(a1 + 8) = v7;
        return result;
      }
    }
    else if ( sub_100226AD(v3) )
    {
      v6 = 8;
      goto LABEL_5;
    }
    v3 = sub_10018063((int)&v9, v8, a2 + 96);
  }
  return 0;
}
// 10022653: using guessed type int __thiscall sub_10022653(_DWORD);

//----- (10025D48) --------------------------------------------------------
char __stdcall sub_10025D48(int a1, int a2)
{
  int v2; // edi@1
  int (__thiscall *v3)(_DWORD); // esi@2
  int v4; // esi@2
  char result; // al@5
  int v6; // esi@7
  char v7; // [sp+Ch] [bp-14h]@7
  int i; // [sp+18h] [bp-8h]@1
  int v9; // [sp+1Ch] [bp-4h]@1

  v2 = sub_10024D18(a2, (int)&v9);
  for ( i = v9; ; v2 = sub_10018063((int)&v9, i, a2 + 96) )
  {
    if ( !v2 )
      return 0;
    v3 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v2 + 12);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 12));
    v4 = v3(v2);
    if ( v4 )
      break;
  }
  *(_DWORD *)(a2 + 180) = (v9 + 1) % *(_DWORD *)(a2 + 160);
  v6 = sub_10024ABF((int)&v7, v4);
  result = 1;
  *(_DWORD *)a1 = *(_DWORD *)v6;
  v6 += 4;
  *(_DWORD *)(a1 + 4) = *(_DWORD *)v6;
  *(_DWORD *)(a1 + 8) = *(_DWORD *)(v6 + 4);
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10025DCA) --------------------------------------------------------
char __stdcall sub_10025DCA(int a1, int a2, char a3)
{
  int v3; // esi@1
  int v4; // ebx@3
  char result; // al@5
  signed int v6; // [sp+Ch] [bp-14h]@4
  int v7; // [sp+18h] [bp-8h]@1
  int v8; // [sp+1Ch] [bp-4h]@1

  v3 = sub_10024D18(a2, (int)&v8);
  v7 = v8;
  while ( v3 )
  {
    if ( a3 )
    {
      v4 = sub_10022D07(v3, 0);
      if ( v4 )
      {
        v6 = 4;
LABEL_5:
        result = 1;
        *(_DWORD *)(a2 + 180) = (v8 + 1) % *(_DWORD *)(a2 + 160);
        *(_DWORD *)a1 = v6;
        *(_DWORD *)(a1 + 4) = v3;
        *(_DWORD *)(a1 + 8) = v4;
        return result;
      }
    }
    else
    {
      v4 = sub_100228C4((void *)v3);
      if ( v4 )
      {
        v6 = 16;
        goto LABEL_5;
      }
    }
    v3 = sub_10018063((int)&v8, v7, a2 + 96);
  }
  return 0;
}

//----- (10025E64) --------------------------------------------------------
int __thiscall sub_10025E64(int this, int a2, int a3)
{
  int result; // eax@1

  result = a2 - *(_DWORD *)(this + 264);
  if ( (unsigned int)result > 0x64 )
  {
    result = a3;
    *(_DWORD *)(this + 264) = a2;
    *(_DWORD *)(this + 268) = a3;
  }
  return result;
}

//----- (10025E8A) --------------------------------------------------------
int __thiscall sub_10025E8A(int this, int a2, int a3)
{
  int result; // eax@1

  result = a2 - *(_DWORD *)(this + 200);
  if ( (unsigned int)result > 0x64 )
  {
    result = a3;
    *(_DWORD *)(this + 200) = a2;
    *(_DWORD *)(this + 204) = a3;
  }
  return result;
}

//----- (10025EB0) --------------------------------------------------------
bool __thiscall sub_10025EB0(void *this, int a2, int a3, int a4, char a5)
{
  void *v5; // edi@1
  int v7; // edx@3
  char v8; // bl@3
  bool v9; // zf@9

  v5 = this;
  if ( a2 == a3 )
    return 1;
  v7 = a2 + 12;
  v8 = 0;
  if ( !a4 )
    return (*(_DWORD *)v7 & 0xFFFFFFF) != 0;
  if ( a4 == 1 )
  {
    if ( !(*(_DWORD *)v7 & 0xFFFFFFF) )
      return 1;
    v9 = sub_10024A73(*(_DWORD *)this + 148, a2 + 12) == 0;
  }
  else
  {
    if ( a4 != 2 )
      return v8;
    if ( !(*(_DWORD *)v7 & 0xFFFFFFF) || sub_10024A73(*(_DWORD *)this + 148, a2 + 12) )
      return 1;
    if ( !(unsigned __int8)sub_1001894D(*((_DWORD *)v5 + 1) + 60, a2 + 28) )
      return v8;
    v9 = a5 == 0;
  }
  if ( v9 )
    return 1;
  return v8;
}

//----- (10025F3C) --------------------------------------------------------
char __thiscall sub_10025F3C(int this, int a2, int a3)
{
  int v3; // esi@1
  int i; // eax@1
  int v6; // [sp+4h] [bp-4h]@1

  v6 = 0;
  v3 = this;
  for ( i = sub_10024C8E(*(_DWORD *)(this + 4), (int)&v6, -1); ; i = sub_10024C8E(*(_DWORD *)(v3 + 4), (int)&v6, 0) )
  {
    if ( !i )
      return 0;
    if ( i != a3 && sub_10025F80((void *)v3, a2, i, 0) )
      break;
  }
  return 1;
}

//----- (10025F80) --------------------------------------------------------
char __thiscall sub_10025F80(void *this, int a2, int a3, int a4)
{
  void *v4; // ebx@1
  int i; // eax@1
  int v6; // eax@3
  int v7; // esi@5
  char result; // al@6
  int v9; // esi@8
  char v10; // [sp+Ch] [bp-10h]@8
  char v11; // [sp+18h] [bp-4h]@1

  v4 = this;
  for ( i = sub_10017B10((void *)a3, 0, *(_DWORD *)(a3 + 120), (int)&v11); ; i = sub_1001810F(a3, (int)&v11, 0) )
  {
    v7 = i;
    if ( !i )
      return 0;
    if ( i != a4 )
    {
      sub_10025E8A(i, *((_DWORD *)v4 + 4), *((_DWORD *)v4 + 5));
      v6 = sub_10025FF1(v7);
      if ( v6 )
        break;
    }
  }
  v9 = sub_10024ABF((int)&v10, v6);
  result = 1;
  *(_DWORD *)a2 = *(_DWORD *)v9;
  v9 += 4;
  *(_DWORD *)(a2 + 4) = *(_DWORD *)v9;
  *(_DWORD *)(a2 + 8) = *(_DWORD *)(v9 + 4);
  return result;
}

//----- (10025FF1) --------------------------------------------------------
int __thiscall sub_10025FF1(int this)
{
  int v1; // edx@1

  v1 = 0;
  if ( *(_DWORD *)(this + 20) > *(_DWORD *)(this + 16) )
    v1 = sub_1001FE30(0);
  return v1;
}
// 1001FE30: using guessed type _DWORD __stdcall sub_1001FE30(_DWORD);

//----- (10026008) --------------------------------------------------------
void __thiscall sub_10026008(void *this, int a2)
{
  void *v2; // edi@1
  int v3; // eax@1
  int v4; // edx@2
  void *v5; // ecx@2
  int v6; // ecx@5

  v2 = this;
  v3 = sub_10014379(a2 + 4);
  if ( *(_DWORD *)v2 == 2 )
  {
    v4 = *((_DWORD *)v2 + 1);
    v5 = *(void **)(v3 + 256);
    if ( v5 == *(void **)(v4 + 256) )
      sub_10018914(v5);
    else
      sub_10021071(a2, v4, 0);
  }
  else
  {
    v6 = *((_DWORD *)v2 + 1);
    if ( *(_DWORD *)(v3 + 256) != *(_DWORD *)(v6 + 256) )
      sub_10021071(a2, v6, 1);
  }
}

//----- (1002605D) --------------------------------------------------------
int __thiscall sub_1002605D(int this)
{
  int v1; // ST00_4@1
  int (__cdecl *v2)(_DWORD); // esi@1

  v1 = *(_DWORD *)(this + 8);
  v2 = *(int (__cdecl **)(_DWORD))(this + 4);
  j_nullsub_1(*(_DWORD *)(this + 4));
  return v2(v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10026070) --------------------------------------------------------
int __userpurge sub_10026070@<eax>(int a1@<ebp>, int a2, int a3)
{
  void *v3; // ecx@1
  int v4; // esi@1
  int v5; // ST04_4@1
  int v6; // ST00_4@1

  sub_1000FB4A();
  v4 = (int)v3;
  *(_DWORD *)(a1 - 16) = v3;
  sub_1001EC5C(v3);
  v5 = *(_DWORD *)(a1 + 12);
  *(_DWORD *)(a1 - 4) = 0;
  v6 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)v4 = &off_100670FC;
  sub_1001F09D(v4, v6, v5);
  return sub_1000FB24(4);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 100670FC: using guessed type int (__thiscall *off_100670FC)(LPVOID lpMem, char);

//----- (100260A7) --------------------------------------------------------
LPVOID __thiscall sub_100260A7(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = &off_100670FC;
  sub_1001ECD5((int)lpMem);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}
// 100670FC: using guessed type int (__thiscall *off_100670FC)(LPVOID lpMem, char);

//----- (100260E0) --------------------------------------------------------
void *__cdecl sub_100260E0(void *a1, const void *a2, unsigned int a3)
{
  int v3; // esi@1
  unsigned int v4; // ecx@1
  int v5; // edi@1
  void *result; // eax@8
  __m128i v7; // xmm1@17
  __m128i v8; // xmm1@20
  int v9; // esi@20
  __m128i v10; // xmm3@21
  __m128i v11; // xmm0@21
  __m128i v12; // xmm5@21
  int v13; // esi@22
  __m128i v14; // xmm1@23
  int v15; // esi@23
  __m128i v16; // xmm3@24
  __m128i v17; // xmm0@24
  __m128i v18; // xmm5@24
  __m128i v19; // xmm1@26
  int v20; // esi@26
  __m128i v21; // xmm3@27
  __m128i v22; // xmm0@27
  __m128i v23; // xmm5@27
  __m128i v24; // xmm1@30
  int v25; // eax@32
  unsigned int v26; // edx@38
  unsigned int v27; // ecx@39
  int v28; // edi@39
  int v29; // esi@39
  int v30; // esi@44
  int v31; // edi@44
  int v32; // edx@47
  char v33; // dl@50
  unsigned int v34; // ecx@50
  const void *v35; // esi@50
  void *v36; // edi@50
  int v37; // edi@50
  int v38; // esi@50
  __m128i v39; // xmm1@58
  __m128i v40; // xmm2@58
  __m128i v41; // xmm3@58
  __m128i v42; // xmm4@58
  __m128i v43; // xmm5@58
  __m128i v44; // xmm6@58
  __m128i v45; // xmm7@58
  __m128i v46; // xmm1@60
  int v47; // eax@66
  unsigned int v48; // edx@67
  unsigned int j; // edx@67
  __m128i v50; // xmm1@68
  __m128i v51; // xmm2@68
  __m128i v52; // xmm3@68
  __m128i v53; // xmm5@68
  __m128i v54; // xmm6@68
  __m128i v55; // xmm7@68
  unsigned int k; // edx@70
  __m128i v57; // xmm1@71
  int v58; // ecx@72
  char v59; // al@73
  unsigned int l; // ecx@73
  int m; // ecx@75
  unsigned int v62; // eax@78
  int v63; // ecx@78
  unsigned int i; // eax@80
  int v65; // [sp-4h] [bp-Ch]@78

  v3 = (int)a2;
  v4 = a3;
  v5 = (int)a1;
  if ( a1 <= a2 || a1 >= (char *)a2 + a3 )
  {
    if ( a3 >= 0x20 )
    {
      if ( a3 >= 0x80 )
      {
        if ( _bittest((const signed __int32 *)&dword_1007C194, 1u) )
        {
          qmemcpy(a1, a2, a3);
          return a1;
        }
        if ( ((unsigned int)a2 ^ (unsigned int)a1) & 0xF || !_bittest((const signed __int32 *)&dword_1007A020, 1u) )
        {
          if ( _bittest((const signed __int32 *)&dword_1007C194, 0) && !((unsigned __int8)a1 & 3) )
          {
            if ( !((unsigned __int8)a2 & 3) )
            {
              if ( _bittest((const unsigned int *)&v5, 2u) )
              {
                v4 = a3 - 4;
                v3 = (int)((char *)a2 + 4);
                *(_DWORD *)a1 = *(_DWORD *)a2;
                v5 = (int)((char *)a1 + 4);
              }
              if ( _bittest((const unsigned int *)&v5, 3u) )
              {
                v7 = _mm_loadl_epi64((const __m128i *)v3);
                v4 -= 8;
                v3 += 8;
                _mm_storel_epi64((__m128i *)v5, v7);
                v5 += 8;
              }
              if ( v3 & 7 )
              {
                if ( _bittest((const unsigned int *)&v3, 3u) )
                {
                  v8 = _mm_load_si128((const __m128i *)(v3 - 12));
                  v9 = v3 - 12;
                  do
                  {
                    v10 = _mm_load_si128((const __m128i *)(v9 + 16));
                    v4 -= 48;
                    v11 = _mm_load_si128((const __m128i *)(v9 + 32));
                    v12 = _mm_load_si128((const __m128i *)(v9 + 48));
                    v9 += 48;
                    _mm_store_si128((__m128i *)v5, _mm_alignr_epi8(v10, v8, 12));
                    _mm_store_si128((__m128i *)(v5 + 16), _mm_alignr_epi8(v11, v10, 12));
                    v8 = v12;
                    _mm_store_si128((__m128i *)(v5 + 32), _mm_alignr_epi8(v12, v11, 12));
                    v5 += 48;
                  }
                  while ( (signed int)v4 >= 48 );
                  v13 = v9 + 12;
                }
                else
                {
                  v19 = _mm_load_si128((const __m128i *)(v3 - 4));
                  v20 = v3 - 4;
                  do
                  {
                    v21 = _mm_load_si128((const __m128i *)(v20 + 16));
                    v4 -= 48;
                    v22 = _mm_load_si128((const __m128i *)(v20 + 32));
                    v23 = _mm_load_si128((const __m128i *)(v20 + 48));
                    v20 += 48;
                    _mm_store_si128((__m128i *)v5, _mm_alignr_epi8(v21, v19, 4));
                    _mm_store_si128((__m128i *)(v5 + 16), _mm_alignr_epi8(v22, v21, 4));
                    v19 = v23;
                    _mm_store_si128((__m128i *)(v5 + 32), _mm_alignr_epi8(v23, v22, 4));
                    v5 += 48;
                  }
                  while ( (signed int)v4 >= 48 );
                  v13 = v20 + 4;
                }
              }
              else
              {
                v14 = _mm_load_si128((const __m128i *)(v3 - 8));
                v15 = v3 - 8;
                do
                {
                  v16 = _mm_load_si128((const __m128i *)(v15 + 16));
                  v4 -= 48;
                  v17 = _mm_load_si128((const __m128i *)(v15 + 32));
                  v18 = _mm_load_si128((const __m128i *)(v15 + 48));
                  v15 += 48;
                  _mm_store_si128((__m128i *)v5, _mm_alignr_epi8(v16, v14, 8));
                  _mm_store_si128((__m128i *)(v5 + 16), _mm_alignr_epi8(v17, v16, 8));
                  v14 = v18;
                  _mm_store_si128((__m128i *)(v5 + 32), _mm_alignr_epi8(v18, v17, 8));
                  v5 += 48;
                }
                while ( (signed int)v4 >= 48 );
                v13 = v15 + 8;
              }
              while ( (signed int)v4 >= 16 )
              {
                v24 = _mm_loadu_si128((const __m128i *)v13);
                v4 -= 16;
                v13 += 16;
                _mm_store_si128((__m128i *)v5, v24);
                v5 += 16;
              }
              if ( _bittest(&v4, 2u) )
              {
                v25 = *(_DWORD *)v13;
                v4 -= 4;
                v13 += 4;
                *(_DWORD *)v5 = v25;
                v5 += 4;
              }
              if ( _bittest(&v4, 3u) )
              {
                v4 -= 8;
                _mm_storel_epi64((__m128i *)v5, _mm_loadl_epi64((const __m128i *)v13));
              }
              JUMPOUT(__CS__, off_10026344[v4]);
            }
LABEL_38:
            v26 = v4;
            if ( v4 >= 0x20 )
            {
              v27 = v4 >> 2;
              qmemcpy((void *)v5, (const void *)v3, 4 * v27);
              v29 = v3 + 4 * v27;
              v28 = v5 + 4 * v27;
              switch ( v26 )
              {
                case 0u:
                  result = a1;
                  break;
                case 1u:
                  *(_BYTE *)v28 = *(_BYTE *)v29;
                  result = a1;
                  break;
                case 2u:
                  *(_BYTE *)v28 = *(_BYTE *)v29;
                  *(_BYTE *)(v28 + 1) = *(_BYTE *)(v29 + 1);
                  result = a1;
                  break;
                case 3u:
                  *(_BYTE *)v28 = *(_BYTE *)v29;
                  *(_BYTE *)(v28 + 1) = *(_BYTE *)(v29 + 1);
                  *(_BYTE *)(v28 + 2) = *(_BYTE *)(v29 + 2);
                  result = a1;
                  break;
              }
              return result;
            }
            goto LABEL_72;
          }
LABEL_36:
          if ( (unsigned __int8)a1 & 3 )
          {
            do
            {
              *(_BYTE *)v5 = *(_BYTE *)v3;
              --v4;
              ++v3;
              ++v5;
            }
            while ( v5 & 3 );
          }
          goto LABEL_38;
        }
        v47 = (unsigned __int8)a2 & 0xF;
        if ( (unsigned __int8)a2 & 0xF )
        {
          v65 = a3 - (16 - v47);
          v62 = 16 - v47;
          v63 = v62 & 3;
          if ( v62 & 3 )
          {
            do
            {
              *(_BYTE *)v5++ = *(_BYTE *)v3++;
              --v63;
            }
            while ( v63 );
          }
          for ( i = v62 >> 2; i; --i )
          {
            *(_DWORD *)v5 = *(_DWORD *)v3;
            v3 += 4;
            v5 += 4;
          }
          v4 = v65;
        }
        v48 = v4;
        v4 &= 0x7Fu;
        for ( j = v48 >> 7; j; --j )
        {
          v50 = _mm_load_si128((const __m128i *)(v3 + 16));
          v51 = _mm_load_si128((const __m128i *)(v3 + 32));
          v52 = _mm_load_si128((const __m128i *)(v3 + 48));
          _mm_store_si128((__m128i *)v5, _mm_load_si128((const __m128i *)v3));
          _mm_store_si128((__m128i *)(v5 + 16), v50);
          _mm_store_si128((__m128i *)(v5 + 32), v51);
          _mm_store_si128((__m128i *)(v5 + 48), v52);
          v53 = _mm_load_si128((const __m128i *)(v3 + 80));
          v54 = _mm_load_si128((const __m128i *)(v3 + 96));
          v55 = _mm_load_si128((const __m128i *)(v3 + 112));
          _mm_store_si128((__m128i *)(v5 + 64), _mm_load_si128((const __m128i *)(v3 + 64)));
          _mm_store_si128((__m128i *)(v5 + 80), v53);
          _mm_store_si128((__m128i *)(v5 + 96), v54);
          _mm_store_si128((__m128i *)(v5 + 112), v55);
          v3 += 128;
          v5 += 128;
        }
      }
      else if ( !_bittest((const signed __int32 *)&dword_1007A020, 1u) )
      {
        goto LABEL_36;
      }
      if ( !v4 )
        return a1;
      for ( k = v4 >> 5; k; --k )
      {
        v57 = _mm_loadu_si128((const __m128i *)(v3 + 16));
        _mm_storeu_si128((__m128i *)v5, _mm_loadu_si128((const __m128i *)v3));
        _mm_storeu_si128((__m128i *)(v5 + 16), v57);
        v3 += 32;
        v5 += 32;
      }
    }
LABEL_72:
    v58 = v4 & 0x1F;
    if ( v58 )
    {
      v59 = v58;
      for ( l = (unsigned int)v58 >> 2; l; --l )
      {
        *(_DWORD *)v5 = *(_DWORD *)v3;
        v5 += 4;
        v3 += 4;
      }
      for ( m = v59 & 3; m; --m )
        *(_BYTE *)v5++ = *(_BYTE *)v3++;
    }
    return a1;
  }
  v30 = (int)((char *)a2 + a3);
  v31 = (int)((char *)a1 + a3);
  if ( a3 >= 0x20 )
  {
    if ( _bittest((const signed __int32 *)&dword_1007A020, 1u) )
    {
      for ( ; v31 & 0xF; *(_BYTE *)v31 = *(_BYTE *)v30 )
      {
        --v4;
        --v30;
        --v31;
      }
      do
      {
        if ( v4 < 0x80 )
          break;
        v30 -= 128;
        v31 -= 128;
        v39 = _mm_loadu_si128((const __m128i *)(v30 + 16));
        v40 = _mm_loadu_si128((const __m128i *)(v30 + 32));
        v41 = _mm_loadu_si128((const __m128i *)(v30 + 48));
        v42 = _mm_loadu_si128((const __m128i *)(v30 + 64));
        v43 = _mm_loadu_si128((const __m128i *)(v30 + 80));
        v44 = _mm_loadu_si128((const __m128i *)(v30 + 96));
        v45 = _mm_loadu_si128((const __m128i *)(v30 + 112));
        _mm_storeu_si128((__m128i *)v31, _mm_loadu_si128((const __m128i *)v30));
        _mm_storeu_si128((__m128i *)(v31 + 16), v39);
        _mm_storeu_si128((__m128i *)(v31 + 32), v40);
        _mm_storeu_si128((__m128i *)(v31 + 48), v41);
        _mm_storeu_si128((__m128i *)(v31 + 64), v42);
        _mm_storeu_si128((__m128i *)(v31 + 80), v43);
        _mm_storeu_si128((__m128i *)(v31 + 96), v44);
        _mm_storeu_si128((__m128i *)(v31 + 112), v45);
        v4 -= 128;
      }
      while ( v4 & 0xFFFFFF80 );
      if ( v4 >= 0x20 )
      {
        do
        {
          v30 -= 32;
          v31 -= 32;
          v46 = _mm_loadu_si128((const __m128i *)(v30 + 16));
          _mm_storeu_si128((__m128i *)v31, _mm_loadu_si128((const __m128i *)v30));
          _mm_storeu_si128((__m128i *)(v31 + 16), v46);
          v4 -= 32;
        }
        while ( v4 & 0xFFFFFFE0 );
      }
    }
    else
    {
      if ( v31 & 3 )
      {
        v32 = v31 & 3;
        v4 = a3 - v32;
        do
        {
          *(_BYTE *)(v31-- - 1) = *(_BYTE *)(v30-- - 1);
          --v32;
        }
        while ( v32 );
      }
      if ( v4 >= 0x20 )
      {
        v33 = v4;
        v34 = v4 >> 2;
        v35 = (const void *)(v30 - 4);
        v36 = (void *)(v31 - 4);
        qmemcpy(v36, v35, 4 * v34);
        v38 = (int)((char *)v35 + 4 * v34);
        v37 = (int)((char *)v36 + 4 * v34);
        switch ( v33 & 3 )
        {
          case 0:
            result = a1;
            break;
          case 1:
            *(_BYTE *)(v37 + 3) = *(_BYTE *)(v38 + 3);
            result = a1;
            break;
          case 2:
            *(_BYTE *)(v37 + 3) = *(_BYTE *)(v38 + 3);
            *(_BYTE *)(v37 + 2) = *(_BYTE *)(v38 + 2);
            result = a1;
            break;
          case 3:
            *(_BYTE *)(v37 + 3) = *(_BYTE *)(v38 + 3);
            *(_BYTE *)(v37 + 2) = *(_BYTE *)(v38 + 2);
            *(_BYTE *)(v37 + 1) = *(_BYTE *)(v38 + 1);
            result = a1;
            break;
        }
        return result;
      }
    }
  }
  for ( ; v4 & 0xFFFFFFFC; v4 -= 4 )
  {
    v31 -= 4;
    v30 -= 4;
    *(_DWORD *)v31 = *(_DWORD *)v30;
  }
  for ( ; v4; --v4 )
  {
    --v31;
    --v30;
    *(_BYTE *)v31 = *(_BYTE *)v30;
  }
  return a1;
}
// 10026344: using guessed type void *off_10026344[4];
// 1007A020: using guessed type int dword_1007A020;
// 1007C194: using guessed type int dword_1007C194;

//----- (10026654) --------------------------------------------------------
int __usercall sub_10026654@<eax>(int a1@<ebp>)
{
  int v1; // edx@1
  int v2; // ecx@1
  int v3; // eax@1
  int v4; // ST04_4@12
  void (__cdecl *v5)(_DWORD); // esi@12

  sub_1000FFB0((int)&unk_10076B78, 8);
  v3 = *(_DWORD *)(a1 + 8);
  if ( v3
    && *(_DWORD *)v3 == -529697949
    && *(_DWORD *)(v3 + 16) == 3
    && (*(_DWORD *)(v3 + 20) == 429065504 || *(_DWORD *)(v3 + 20) == 429065505 || *(_DWORD *)(v3 + 20) == 429065506) )
  {
    v2 = *(_DWORD *)(v3 + 28);
    if ( v2 )
    {
      v1 = *(_DWORD *)(v2 + 4);
      if ( v1 )
      {
        *(_DWORD *)(a1 - 4) = 0;
        sub_10026F34(*(_DWORD *)(v3 + 24), v1);
        *(_DWORD *)(a1 - 4) = -2;
      }
      else if ( *(_BYTE *)v2 & 0x10 )
      {
        v2 = **(_DWORD **)(v3 + 24);
        if ( v2 )
        {
          v4 = **(_DWORD **)(v3 + 24);
          v5 = *(void (__cdecl **)(_DWORD))(*(_DWORD *)v2 + 8);
          j_nullsub_1(*(_DWORD *)(*(_DWORD *)v2 + 8));
          v5(v4);
        }
      }
    }
  }
  return sub_1000FFF6(v2, v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 10026F34: using guessed type _DWORD __cdecl sub_10026F34(_DWORD, _DWORD);

//----- (100266E8) --------------------------------------------------------
void *__thiscall sub_100266E8(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10067128;
  return v2;
}
// 10067128: using guessed type int (__thiscall *off_10067128)(LPVOID lpMem, char);

//----- (10026703) --------------------------------------------------------
int __thiscall sub_10026703(int this)
{
  int result; // eax@1

  *(_DWORD *)(this + 4) = 0;
  result = this;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 4) = "bad exception";
  *(_DWORD *)this = &off_10067128;
  return result;
}
// 10067128: using guessed type int (__thiscall *off_10067128)(LPVOID lpMem, char);

//----- (1002671B) --------------------------------------------------------
int __usercall sub_1002671B@<eax>(int a1@<ebp>, int a2@<esi>)
{
  int v2; // ebx@1
  int v3; // edi@1
  int v4; // eax@1
  int v5; // edx@1
  int v6; // ecx@1

  sub_1000FFB0((int)&unk_10076B30, 56);
  *(_DWORD *)(a1 - 28) = *(_DWORD *)(a1 + 24);
  *(_DWORD *)(a1 - 60) = 0;
  v2 = *(_DWORD *)(a1 + 12);
  *(_DWORD *)(a1 - 44) = *(_DWORD *)(v2 - 4);
  v3 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)(a1 - 48) = sub_1002776F(a1 - 72, *(_DWORD *)(v3 + 24));
  *(_DWORD *)(a1 - 52) = *((_DWORD *)sub_10028ACA() + 4);
  *(_DWORD *)(a1 - 56) = *((_DWORD *)sub_10028ACA() + 5);
  *((_DWORD *)sub_10028ACA() + 4) = v3;
  *((_DWORD *)sub_10028ACA() + 5) = *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(a1 - 64) = 1;
  *(_DWORD *)(a1 - 4) = 1;
  sub_10027502(v3, a2, v2, *(_DWORD *)(a1 + 20), *(_DWORD *)(a1 + 24), *(_DWORD *)(a1 + 28), *(_DWORD *)(a1 + 32));
  *(_DWORD *)(a1 - 28) = v4;
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(a1 - 4) = -2;
  *(_DWORD *)(a1 - 64) = 0;
  sub_10026856(v2, a1, v3);
  return sub_1000FFF6(v6, v5);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (10026850) --------------------------------------------------------
void *__usercall sub_10026850@<eax>(int a1@<ebp>)
{
  return sub_10026856(*(_DWORD *)(a1 + 12), a1, *(_DWORD *)(a1 + 8));
}

//----- (10026856) --------------------------------------------------------
void *__usercall sub_10026856@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  void *result; // eax@1
  int v4; // ST04_4@9
  int v5; // ebx@10

  *(_DWORD *)(a1 - 4) = *(_DWORD *)(a2 - 44);
  sub_10027793(a1, a3, *(_DWORD *)(a2 - 48));
  *((_DWORD *)sub_10028ACA() + 4) = *(_DWORD *)(a2 - 52);
  result = sub_10028ACA();
  *((_DWORD *)result + 5) = *(_DWORD *)(a2 - 56);
  if ( *(_DWORD *)a3 != -529697949
    || *(_DWORD *)(a3 + 16) != 3
    || *(_DWORD *)(a3 + 20) != 429065504 && *(_DWORD *)(a3 + 20) != 429065505 && *(_DWORD *)(a3 + 20) != 429065506 )
  {
    v5 = *(_DWORD *)(a2 - 28);
  }
  else if ( !*(_DWORD *)(a2 - 60) && *(_DWORD *)(a2 - 28) )
  {
    result = (void *)sub_100277DD(*(_DWORD *)(a3 + 24));
    if ( result )
    {
      v4 = *(_DWORD *)(a2 - 64) != 0;
      result = (void *)sub_10026654(a2);
    }
  }
  return result;
}

//----- (100268D7) --------------------------------------------------------
void __usercall __noreturn sub_100268D7(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  sub_1000FBB5((int)sub_1006348F, 4);
  if ( !*((_DWORD *)sub_10028ACA() + 7) )
  {
    *(_DWORD *)(a2 - 4) = 0;
    sub_10028A5C(a1, a2, a3);
  }
  sub_1002C84B(a1, a2, a3);
}

//----- (10026911) --------------------------------------------------------
int __usercall sub_10026911@<eax>(int a1@<ebx>, int a2@<esi>, PEXCEPTION_RECORD ExceptionRecord, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, PVOID TargetFrame)
{
  int v12; // ebp@0
  int v13; // ST28_4@6
  int v14; // ST10_4@6
  int result; // eax@6

  if ( a9 )
    sub_10026F60(v12);
  if ( TargetFrame )
    sub_100276E9(a4, a2, TargetFrame, ExceptionRecord);
  else
    sub_100276E9(a4, a2, (PVOID)a4, ExceptionRecord);
  v13 = *(_DWORD *)a10;
  sub_10027162(a1, v12, a4);
  *(_DWORD *)(a4 + 8) = *(_DWORD *)(a10 + 4) + 1;
  v14 = *(_DWORD *)(a8 + 12);
  result = sub_1002671B(v12, a10);
  if ( result )
    result = sub_100276B7(a1, v12, result, a4);
  return result;
}

//----- (1002698C) --------------------------------------------------------
signed int __cdecl sub_1002698C(int a1)
{
  _DWORD *v1; // eax@1
  signed int result; // eax@7

  v1 = *(_DWORD **)a1;
  if ( **(_DWORD **)a1 != -529697949
    || v1[4] != 3
    || v1[5] != 429065504 && v1[5] != 429065505 && v1[5] != 429065506
    || v1[7] )
  {
    result = 0;
  }
  else
  {
    *((_DWORD *)sub_10028ACA() + 8) = 1;
    result = 1;
  }
  return result;
}

//----- (100269D6) --------------------------------------------------------
void *__cdecl sub_100269D6(PEXCEPTION_RECORD ExceptionRecord, int a2, int a3, int a4, int a5, char a6, int a7, PVOID TargetFrame)
{
  int v8; // ebp@0
  int v9; // ebx@1
  int v10; // edi@1
  int v11; // eax@2
  int v12; // esi@6
  void *result; // eax@12
  int v14; // ST28_4@21
  int v15; // ecx@24
  int v16; // eax@32
  unsigned int v17; // edx@32
  int v18; // ecx@33
  int v19; // eax@33
  int v20; // ebx@36
  bool v21; // zf@36
  bool v22; // sf@36
  int v23; // ecx@37
  int *v24; // eax@37
  int v25; // edx@37
  int v26; // eax@37
  int v27; // ST2C_4@67
  void *v28; // [sp-4h] [bp-54h]@56
  EXCEPTION_RECORD *v29; // [sp+0h] [bp-50h]@0
  char v30; // [sp+Ch] [bp-44h]@23
  int v31; // [sp+18h] [bp-38h]@34
  int i; // [sp+1Ch] [bp-34h]@37
  int *v33; // [sp+20h] [bp-30h]@37
  unsigned int v34; // [sp+24h] [bp-2Ch]@32
  int v35; // [sp+28h] [bp-28h]@1
  int v36; // [sp+2Ch] [bp-24h]@38
  int v37; // [sp+30h] [bp-20h]@21
  int v38; // [sp+34h] [bp-1Ch]@36
  unsigned int v39; // [sp+38h] [bp-18h]@32
  int v40; // [sp+3Ch] [bp-14h]@36
  int *v41; // [sp+40h] [bp-10h]@38
  int v42; // [sp+44h] [bp-Ch]@13
  int v43; // [sp+48h] [bp-8h]@4
  char v44; // [sp+4Fh] [bp-1h]@1

  v9 = a2;
  v10 = a5;
  LOBYTE(v35) = 0;
  v44 = 0;
  if ( *(_DWORD *)(a5 + 4) > 128 )
    v11 = *(_DWORD *)(a2 + 8);
  else
    v11 = *(_BYTE *)(a2 + 8);
  v43 = v11;
  if ( v11 < -1 || v11 >= *(_DWORD *)(a5 + 4) )
    goto LABEL_64;
  v12 = (int)ExceptionRecord;
  if ( ExceptionRecord->ExceptionCode == -529697949 )
  {
    if ( ExceptionRecord->NumberParameters != 3
      || ExceptionRecord->ExceptionInformation[0] != 429065504
      && ExceptionRecord->ExceptionInformation[0] != 429065505
      && ExceptionRecord->ExceptionInformation[0] != 429065506
      || ExceptionRecord->ExceptionInformation[2] )
    {
      v15 = a3;
      v42 = a3;
    }
    else
    {
      result = sub_10028ACA();
      if ( !*((_DWORD *)result + 4) )
        return result;
      v12 = *((_DWORD *)sub_10028ACA() + 4);
      LOBYTE(v35) = 1;
      v42 = *((_DWORD *)sub_10028ACA() + 5);
      if ( !v12
        || *(_DWORD *)v12 == -529697949
        && *(_DWORD *)(v12 + 16) == 3
        && (*(_DWORD *)(v12 + 20) == 429065504
         || *(_DWORD *)(v12 + 20) == 429065505
         || *(_DWORD *)(v12 + 20) == 429065506)
        && !*(_DWORD *)(v12 + 28) )
        goto LABEL_64;
      if ( *((_DWORD *)sub_10028ACA() + 7) )
      {
        v37 = *((_DWORD *)sub_10028ACA() + 7);
        v14 = v37;
        *((_DWORD *)sub_10028ACA() + 7) = 0;
        if ( !sub_10026E59(a2, a5, v12, v14) )
        {
          if ( sub_10026EF5(v37) )
          {
            sub_10026654(v8);
            sub_10026703((int)&v30);
            sub_10027494((int)&v30, (int)&unk_10076C0C);
LABEL_65:
            v28 = TargetFrame;
LABEL_66:
            sub_100276E9(v10, v12, v28, v29);
            sub_10027162(v9, v8, v10);
            v27 = *(_DWORD *)(v10 + 28);
            sub_100268D7(v9, v8, v10);
          }
LABEL_64:
          sub_1002C84B(v9, v8, v10);
        }
      }
      v15 = v42;
      v11 = v43;
    }
    if ( *(_DWORD *)v12 == -529697949
      && *(_DWORD *)(v12 + 16) == 3
      && (*(_DWORD *)(v12 + 20) == 429065504 || *(_DWORD *)(v12 + 20) == 429065505 || *(_DWORD *)(v12 + 20) == 429065506) )
    {
      if ( *(_DWORD *)(a5 + 12) )
      {
        v16 = sub_1002763F(a5, a7, v11, (int)&v39, (int)&v34);
        v17 = v39;
        if ( v39 < v34 )
        {
          v18 = v16 + 16;
          v19 = v43;
          v37 = v18;
          do
          {
            v31 = v18 - 16;
            v10 = a5;
            if ( *(_DWORD *)(v18 - 16) <= v19 && v19 <= *(_DWORD *)(v18 - 12) )
            {
              v40 = *(_DWORD *)v18;
              v20 = *(_DWORD *)(v18 - 4);
              v21 = v20 == 0;
              v22 = v20 < 0;
              v38 = *(_DWORD *)(v18 - 4);
              v9 = a2;
              if ( !v22 && !v21 )
              {
                v23 = v40;
                v24 = *(int **)(*(_DWORD *)(v12 + 28) + 12);
                v25 = *v24;
                v33 = v24 + 1;
                v26 = v38;
                for ( i = v25; ; v25 = i )
                {
                  v41 = v33;
                  v10 = a5;
                  v36 = v25;
                  if ( v25 > 0 )
                    break;
LABEL_42:
                  --v26;
                  v23 += 16;
                  v38 = v26;
                  v40 = v23;
                  if ( v26 <= 0 )
                    goto LABEL_45;
                }
                while ( !sub_10027326(v23, *v41, *(_DWORD *)(v12 + 28)) )
                {
                  ++v41;
                  v23 = v40;
                  --v36;
                  if ( v36 <= 0 )
                  {
                    v26 = v38;
                    goto LABEL_42;
                  }
                }
                v44 = 1;
                sub_10026911(a2, v12, (PEXCEPTION_RECORD)v12, a2, v42, a4, a5, v40, *v41, v31, a7, TargetFrame);
LABEL_45:
                v17 = v39;
                v18 = v37;
                v19 = v43;
              }
            }
            ++v17;
            v18 += 20;
            v39 = v17;
            v37 = v18;
          }
          while ( v17 < v34 );
        }
      }
      if ( a6 )
        sub_10026654(v8);
      if ( !v44
        && (*(_DWORD *)v10 & 0x1FFFFFFFu) >= 0x19930521
        && (*(_DWORD *)(v10 + 28) || *(_BYTE *)(v10 + 32) & 4 && !a7) )
      {
        if ( *(_BYTE *)(v10 + 32) & 4 )
          goto LABEL_64;
        if ( !sub_10026E59(v9, v10, v12, *(_DWORD *)(v10 + 28)) )
        {
          sub_10028ACA();
          sub_10028ACA();
          *((_DWORD *)sub_10028ACA() + 4) = v12;
          v28 = (void *)v12;
          *((_DWORD *)sub_10028ACA() + 5) = v42;
          if ( !TargetFrame )
            goto LABEL_66;
          goto LABEL_65;
        }
      }
      goto LABEL_62;
    }
  }
  else
  {
    v15 = a3;
  }
  if ( *(_DWORD *)(a5 + 12) )
  {
    if ( a6 )
      goto LABEL_64;
    sub_10026D3E((PEXCEPTION_RECORD)v12, a2, v15, a4, a5, v11, a7, TargetFrame);
  }
LABEL_62:
  result = sub_10028ACA();
  if ( *((_DWORD *)result + 7) )
    goto LABEL_64;
  return result;
}

//----- (10026D3E) --------------------------------------------------------
void __cdecl sub_10026D3E(PEXCEPTION_RECORD ExceptionRecord, int a2, int a3, int a4, int a5, int a6, int a7, PVOID TargetFrame)
{
  int v8; // ebp@0
  int v9; // ebx@2
  PVOID v10; // esi@3
  int v11; // eax@8
  unsigned int v12; // ecx@8
  unsigned int v13; // edx@8
  int v14; // esi@9
  int v15; // eax@9
  int v16; // eax@12
  int v17; // eax@14
  unsigned int v18; // [sp+4h] [bp-8h]@8
  unsigned int v19; // [sp+8h] [bp-4h]@8

  if ( ExceptionRecord->ExceptionCode != -2147483645 )
  {
    v9 = a5;
    if ( !*((_DWORD *)sub_10028ACA() + 2)
      || (v10 = EncodePointer(0), *((PVOID *)sub_10028ACA() + 2) == v10)
      || ExceptionRecord->ExceptionCode == -532459699
      || ExceptionRecord->ExceptionCode == -532462766
      || !sub_10027562(a5, (int)ExceptionRecord, a2, a3, a4, a5, a7, (int)TargetFrame) )
    {
      if ( !*(_DWORD *)(a5 + 12) )
        sub_1002C84B(a5, v8, (int)ExceptionRecord);
      v11 = sub_1002763F(a5, a7, a6, (int)&v18, (int)&v19);
      v12 = v18;
      v13 = v19;
      if ( v18 < v19 )
      {
        v14 = v11 + 12;
        v15 = a6;
        do
        {
          if ( v15 >= *(_DWORD *)(v14 - 12) && v15 <= *(_DWORD *)(v14 - 8) )
          {
            v16 = 16 * *(_DWORD *)v14;
            if ( !*(_DWORD *)(*(_DWORD *)(v14 + 4) + v16 - 12)
              || (v13 = v19, v9 = a5, !*(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v14 + 4) + v16 - 12) + 8)) )
            {
              v17 = *(_DWORD *)(v14 + 4) - 16 + v16;
              if ( !(*(_BYTE *)v17 & 0x40) )
              {
                sub_10026911(v9, v14, ExceptionRecord, a2, a3, a4, v9, v17, 0, v14 - 12, a7, TargetFrame);
                v13 = v19;
                v12 = v18;
              }
            }
            v15 = a6;
          }
          ++v12;
          v14 += 20;
          v18 = v12;
        }
        while ( v12 < v13 );
      }
    }
  }
}

//----- (10026E59) --------------------------------------------------------
char __usercall sub_10026E59@<al>(int a1@<ebx>, int a2@<edi>, int a3, int a4)
{
  int v4; // ebp@0
  int v5; // edi@2
  char v6; // bl@2
  int v7; // edx@3
  int *v8; // eax@3
  int v9; // ecx@3
  int v10; // eax@3
  int *v11; // ecx@4
  int v12; // eax@5
  int v13; // eax@7
  bool v14; // zf@7
  bool v15; // sf@7
  int v17; // [sp+Ch] [bp-18h]@3
  int v18; // [sp+10h] [bp-14h]@5
  int v19; // [sp+14h] [bp-10h]@3
  int v20; // [sp+18h] [bp-Ch]@4
  int v21; // [sp+1Ch] [bp-8h]@4
  int v22; // [sp+20h] [bp-4h]@3

  if ( !a4 )
    sub_1002C84B(a1, v4, a2);
  v5 = *(_DWORD *)a4;
  v6 = 0;
  if ( *(_DWORD *)a4 > 0 )
  {
    v7 = 0;
    v22 = 0;
    v8 = *(int **)(*(_DWORD *)(a3 + 28) + 12);
    v9 = *v8;
    v10 = (int)(v8 + 1);
    v19 = v9;
    v17 = v10;
    do
    {
      v11 = (int *)v10;
      v20 = v10;
      v21 = v19;
      if ( v19 > 0 )
      {
        v12 = v7 + *(_DWORD *)(a4 + 4);
        v18 = v7 + *(_DWORD *)(a4 + 4);
        while ( !sub_10027326(v12, *v11, *(_DWORD *)(a3 + 28)) )
        {
          v13 = v21 - 1;
          v11 = (int *)(v20 + 4);
          v21 = v13;
          v14 = v13 == 0;
          v15 = v13 < 0;
          v20 += 4;
          v12 = v18;
          if ( v15 || v14 )
            goto LABEL_10;
        }
        v6 = 1;
LABEL_10:
        v7 = v22;
      }
      v10 = v17;
      v7 += 16;
      v22 = v7;
      --v5;
    }
    while ( v5 );
  }
  return v6;
}

//----- (10026EF5) --------------------------------------------------------
char __cdecl sub_10026EF5(int a1)
{
  int v1; // esi@1
  int v2; // ebx@2
  char result; // al@5

  v1 = 0;
  if ( *(_DWORD *)a1 <= 0 )
  {
LABEL_5:
    result = 0;
  }
  else
  {
    v2 = 0;
    while ( sub_1002848A(*(_DWORD *)(v2 + *(_DWORD *)(a1 + 4) + 4) + 4, (int)&unk_1007BBA0) )
    {
      ++v1;
      v2 += 16;
      if ( v1 >= *(_DWORD *)a1 )
        goto LABEL_5;
    }
    result = 1;
  }
  return result;
}

//----- (10026F34) --------------------------------------------------------
#error "10026F35: positive sp value has been found (funcsize=0)"

//----- (10026F3B) --------------------------------------------------------
int __cdecl sub_10026F3B(int a1, int a2)
{
  int v2; // esi@1
  int result; // eax@1

  v2 = *(_DWORD *)(a2 + 4);
  result = a1 + *(_DWORD *)a2;
  if ( v2 >= 0 )
    result += v2 + *(_DWORD *)(*(_DWORD *)(v2 + a1) + *(_DWORD *)(a2 + 8));
  return result;
}

//----- (10026F60) --------------------------------------------------------
int __usercall sub_10026F60@<eax>(int a1@<ebp>)
{
  int v1; // edx@1
  int v2; // edi@2
  int v3; // esi@4
  int v4; // ebx@4
  int v5; // eax@4
  int v6; // edx@4
  int v7; // ecx@4

  sub_1000FFB0((int)&unk_10076B58, 8);
  v1 = *(_DWORD *)(a1 + 16);
  if ( *(_DWORD *)v1 >= 0 )
    v2 = *(_DWORD *)(v1 + 8) + *(_DWORD *)(a1 + 12) + 12;
  else
    v2 = *(_DWORD *)(a1 + 12);
  *(_DWORD *)(a1 - 4) = 0;
  v3 = *(_DWORD *)(a1 + 20);
  v4 = *(_DWORD *)(a1 + 8);
  v5 = sub_10026FEF(a1) - 1;
  if ( v5 )
  {
    if ( v5 == 1 )
    {
      sub_10026F3B(*(_DWORD *)(v4 + 24), v3 + 8);
      sub_10026F34(v2, *(_DWORD *)(v3 + 24));
    }
  }
  else
  {
    sub_10026F3B(*(_DWORD *)(v4 + 24), v3 + 8);
    sub_10026F34(v2, *(_DWORD *)(v3 + 24));
  }
  *(_DWORD *)(a1 - 4) = -2;
  return sub_1000FFF6(v7, v6);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 10026F34: using guessed type _DWORD __cdecl sub_10026F34(_DWORD, _DWORD);

//----- (10026FE2) --------------------------------------------------------
signed int sub_10026FE2()
{
  return 1;
}

//----- (10026FE6) --------------------------------------------------------
void __usercall __noreturn sub_10026FE6(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  sub_1002C84B(a1, a2, a3);
}

//----- (10026FEF) --------------------------------------------------------
int __usercall sub_10026FEF@<eax>(int a1@<ebp>)
{
  int v1; // edx@1
  int v2; // eax@1
  int v3; // ecx@1
  void *v4; // esi@5
  int v5; // edi@7
  int v6; // eax@9
  int v7; // ecx@10
  int v8; // eax@12
  int v9; // eax@16
  int v10; // ecx@25
  unsigned int v11; // ST08_4@27
  int v12; // eax@27
  int v14; // [sp-Ch] [bp-Ch]@16

  sub_1000FFB0((int)&unk_10076BF0, 16);
  v2 = *(_DWORD *)(a1 + 16);
  v3 = *(_DWORD *)(v2 + 4);
  if ( v3 )
  {
    if ( *(_BYTE *)(v3 + 8) )
    {
      v1 = *(_DWORD *)(v2 + 8);
      if ( v1 || *(_DWORD *)v2 < 0 )
      {
        v3 = *(_DWORD *)v2;
        v4 = *(void **)(a1 + 12);
        if ( *(_DWORD *)v2 >= 0 )
          v4 = (char *)v4 + v1 + 12;
        *(_DWORD *)(a1 - 4) = 0;
        v5 = *(_DWORD *)(a1 + 20);
        if ( (char)v3 < 0 && *(_BYTE *)v5 & 0x10 && (v6 = dword_1007C638, *(_DWORD *)(a1 - 28) = dword_1007C638, v6) )
        {
          j_nullsub_1(v6);
          v7 = (*(int (**)(void))(a1 - 28))();
        }
        else
        {
          v8 = *(_DWORD *)(a1 + 8);
          if ( !(v3 & 8) )
          {
            if ( *(_BYTE *)v5 & 1 )
            {
              if ( *(_DWORD *)(v8 + 24) && v4 )
              {
                sub_100260E0(v4, *(const void **)(v8 + 24), *(_DWORD *)(v5 + 20));
                if ( *(_DWORD *)(v5 + 20) != 4 || !*(_DWORD *)v4 )
                  goto LABEL_31;
                v9 = sub_10026F3B(*(_DWORD *)v4, v5 + 8);
                goto LABEL_23;
              }
            }
            else if ( *(_DWORD *)(v5 + 24) )
            {
              if ( *(_DWORD *)(v8 + 24) && v4 )
              {
                *(_DWORD *)(a1 - 32) = ((*(_BYTE *)v5 & 4) != 0) + 1;
                goto LABEL_31;
              }
            }
            else
            {
              v10 = *(_DWORD *)(v8 + 24);
              if ( v10 && v4 )
              {
                v11 = *(_DWORD *)(v5 + 20);
                v12 = sub_10026F3B(v10, v5 + 8);
                sub_100260E0(v4, (const void *)v12, v11);
                goto LABEL_31;
              }
            }
LABEL_11:
            sub_1002C84B(0, a1, v5);
          }
          v7 = *(_DWORD *)(v8 + 24);
        }
        if ( v7 && v4 )
        {
          *(_DWORD *)v4 = v7;
          v9 = sub_10026F3B(v7, v5 + 8);
LABEL_23:
          v3 = v14;
          *(_DWORD *)v4 = v9;
LABEL_31:
          *(_DWORD *)(a1 - 4) = -2;
          return sub_1000FFF6(v3, v1);
        }
        goto LABEL_11;
      }
    }
  }
  return sub_1000FFF6(v3, v1);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007C638: using guessed type int dword_1007C638;

//----- (1002711D) --------------------------------------------------------
int __usercall sub_1002711D@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  int v3; // ebp@0
  _DWORD *v4; // eax@1
  void *v5; // eax@6

  v4 = *(_DWORD **)a3;
  if ( **(_DWORD **)a3 == -532462766 || *v4 == -532459699 )
  {
    if ( *((_DWORD *)sub_10028ACA() + 6) > 0 )
    {
      v5 = sub_10028ACA();
      --*((_DWORD *)v5 + 6);
    }
  }
  else if ( *v4 == -529697949 )
  {
    *((_DWORD *)sub_10028ACA() + 6) = 0;
    sub_1002C84B(a1, v3, a2);
  }
  return 0;
}

//----- (10027162) --------------------------------------------------------
int __usercall sub_10027162@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // eax@1
  bool v4; // zf@1
  bool v5; // sf@1
  unsigned __int8 v6; // of@1
  int v7; // eax@1
  int v8; // esi@2
  void *v9; // eax@4
  int v10; // ecx@7
  int v11; // eax@8
  int v12; // edx@8
  int v13; // eax@9
  int v14; // edx@12
  int v15; // ecx@12

  sub_1000FFB0((int)&unk_10076B08, 16);
  v3 = *(_DWORD *)(a2 + 16);
  v6 = __OFSUB__(*(_DWORD *)(v3 + 4), 128);
  v4 = *(_DWORD *)(v3 + 4) == 128;
  v5 = *(_DWORD *)(v3 + 4) - 128 < 0;
  v7 = *(_DWORD *)(a2 + 8);
  if ( (unsigned __int8)(v5 ^ v6) | v4 )
    v8 = *(_BYTE *)(v7 + 8);
  else
    v8 = *(_DWORD *)(v7 + 8);
  *(_DWORD *)(a2 - 28) = v8;
  v9 = sub_10028ACA();
  ++*((_DWORD *)v9 + 6);
  *(_DWORD *)(a2 - 4) = 0;
  while ( v8 != *(_DWORD *)(a2 + 20) )
  {
    if ( v8 <= -1 )
      goto LABEL_11;
    v10 = *(_DWORD *)(a2 + 16);
    if ( v8 >= *(_DWORD *)(v10 + 4) )
      goto LABEL_11;
    v11 = *(_DWORD *)(v10 + 8);
    v12 = *(_DWORD *)(v11 + 8 * v8);
    *(_DWORD *)(a2 - 32) = v12;
    *(_DWORD *)(a2 - 4) = 1;
    if ( *(_DWORD *)(v11 + 8 * v8 + 4) )
    {
      v13 = *(_DWORD *)(a2 + 8);
      *(_DWORD *)(v13 + 8) = v12;
      sub_10028BC0(v10, a2, a3, v8, *(_DWORD *)(*(_DWORD *)(v10 + 8) + 8 * v8 + 4), v13, 259);
    }
    *(_DWORD *)(a2 - 4) = 0;
    v8 = *(_DWORD *)(a2 - 32);
    *(_DWORD *)(a2 - 28) = v8;
  }
  *(_DWORD *)(a2 - 4) = -2;
  sub_10027216();
  if ( v8 != *(_DWORD *)(a2 + 20) )
LABEL_11:
    sub_1002C84B(a1, a2, a3);
  *(_DWORD *)(*(_DWORD *)(a2 + 8) + 8) = v8;
  return sub_1000FFF6(v15, v14);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (10027216) --------------------------------------------------------
void *sub_10027216()
{
  void *result; // eax@1

  result = sub_10028ACA();
  if ( *((_DWORD *)result + 6) > 0 )
  {
    result = sub_10028ACA();
    --*((_DWORD *)result + 6);
  }
  return result;
}

//----- (1002722A) --------------------------------------------------------
int __cdecl sub_1002722A(int a1, int a2, int a3, int a4, int a5, int a6, void *a7, char a8)
{
  int v8; // ecx@0
  int v9; // ebp@0
  int v10; // eax@11
  int (__cdecl *v11)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@18

  nullsub_1(v8);
  if ( *((_DWORD *)sub_10028ACA() + 8)
    || *(_DWORD *)a1 == -529697949
    || *(_DWORD *)a1 == -2147483610
    || (*(_DWORD *)a5 & 0x1FFFFFFFu) < 0x19930522
    || !(*(_BYTE *)(a5 + 32) & 1) )
  {
    if ( *(_BYTE *)(a1 + 4) & 0x66 )
    {
      if ( *(_DWORD *)(a5 + 4) )
      {
        if ( !a6 )
          sub_10027162(0x1FFFFFFF, v9, 429065506);
      }
    }
    else if ( *(_DWORD *)(a5 + 12)
           || (v10 = *(_DWORD *)a5 & 0x1FFFFFFF, (unsigned int)v10 >= 0x19930521) && *(_DWORD *)(a5 + 28)
           || (unsigned int)v10 >= 0x19930522 && *(_BYTE *)(a5 + 32) & 4 )
    {
      if ( *(_DWORD *)a1 == -529697949 && *(_DWORD *)(a1 + 16) >= 3u && *(_DWORD *)(a1 + 20) > 0x19930522u )
      {
        v11 = *(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)(a1 + 28)
                                                                                                + 8);
        if ( v11 )
        {
          j_nullsub_1(v11);
          return v11(a1, a2, a3, a4, a5, a6, a7, (unsigned __int8)a8);
        }
      }
      sub_100269D6((PEXCEPTION_RECORD)a1, a2, a3, a4, a5, a8, a6, a7);
    }
  }
  return 1;
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10027326) --------------------------------------------------------
signed int __cdecl sub_10027326(int a1, int a2, int a3)
{
  int v3; // eax@1
  int v4; // ebx@5
  signed int v5; // esi@5
  int v6; // eax@6
  signed int result; // eax@9

  v3 = *(_DWORD *)(a1 + 4);
  if ( !v3 || !*(_BYTE *)(v3 + 8) || *(_BYTE *)a1 & 0x80 && *(_BYTE *)a2 & 0x10 )
  {
    result = 1;
  }
  else
  {
    v4 = *(_DWORD *)(a2 + 4);
    v5 = 0;
    if ( v3 == v4 )
      goto LABEL_21;
    v6 = strcmp((const char *)(v3 + 8), (const char *)(v4 + 8));
    if ( v6 )
      v6 = -(v6 < 0) | 1;
    if ( v6 )
    {
      result = 0;
    }
    else
    {
LABEL_21:
      if ( (!(*(_BYTE *)a2 & 2) || *(_BYTE *)a1 & 8)
        && (!(*(_BYTE *)a3 & 1) || *(_BYTE *)a1 & 1)
        && (!(*(_BYTE *)a3 & 2) || *(_BYTE *)a1 & 2) )
        v5 = 1;
      result = v5;
    }
  }
  return result;
}

//----- (100273B4) --------------------------------------------------------
char *sub_100273B4()
{
  return (char *)sub_10028ACA() + 16;
}

//----- (100273BD) --------------------------------------------------------
char *sub_100273BD()
{
  return (char *)sub_10028ACA() + 24;
}

//----- (100273CB) --------------------------------------------------------
bool sub_100273CB()
{
  return *((_DWORD *)sub_10028ACA() + 6) != 0;
}

//----- (100273D8) --------------------------------------------------------
int sub_100273D8()
{
  return __ROR4__(
           __security_cookie ^ _InterlockedCompareExchange((volatile signed __int32 *)&dword_1007C698, 0, 0),
           __security_cookie & 0x1F);
}
// 1007C698: using guessed type int dword_1007C698;

//----- (100273F7) --------------------------------------------------------
void __usercall __noreturn sub_100273F7(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // eax@1
  void *v4; // ecx@1
  int v5; // esi@1

  v3 = sub_100273D8();
  v5 = v3;
  if ( v3 )
  {
    j_nullsub_1(v3);
    ((void (*)(void))v5)();
  }
  sub_1002D71C(v4, a1, a2, a3, v5);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10027412) --------------------------------------------------------
const char *__cdecl sub_10027412(int a1, int a2)
{
  unsigned int v2; // kr00_4@3
  int v3; // eax@3
  void *v4; // esi@3
  void *v5; // ecx@4
  const char *result; // eax@5

  if ( *(_BYTE *)(a1 + 4) && *(_DWORD *)a1 )
  {
    v2 = strlen(*(const char **)a1);
    v3 = (int)sub_1002C36D(v2 + 1);
    v4 = (void *)v3;
    if ( v3 )
    {
      sub_1002ED3A(v2 + 1, a1, v3, v2 + 1, *(_DWORD *)a1);
      v5 = v4;
      v4 = 0;
      *(_DWORD *)a2 = v5;
      *(_BYTE *)(a2 + 4) = 1;
    }
    result = (const char *)sub_1002C0EC(v4);
  }
  else
  {
    result = *(const char **)a1;
    *(_DWORD *)a2 = *(_DWORD *)a1;
    *(_BYTE *)(a2 + 4) = 0;
  }
  return result;
}

//----- (10027475) --------------------------------------------------------
int __cdecl sub_10027475(int a1)
{
  int result; // eax@2

  if ( *(_BYTE *)(a1 + 4) )
    result = sub_1002C0EC(*(LPVOID *)a1);
  *(_DWORD *)a1 = 0;
  *(_BYTE *)(a1 + 4) = 0;
  return result;
}

//----- (10027494) --------------------------------------------------------
void __stdcall sub_10027494(int a1, int a2)
{
  int v2; // edi@1
  int v3; // ST0C_4@3
  void (__stdcall *v4)(_DWORD); // esi@3
  DWORD dwExceptionCode; // [sp+Ch] [bp-20h]@1
  DWORD dwExceptionFlags; // [sp+10h] [bp-1Ch]@7
  DWORD nNumberOfArguments; // [sp+1Ch] [bp-10h]@7
  ULONG_PTR Arguments; // [sp+20h] [bp-Ch]@6
  int v9; // [sp+24h] [bp-8h]@4
  int v10; // [sp+28h] [bp-4h]@4

  qmemcpy(&dwExceptionCode, &unk_10067140, 0x20u);
  v2 = a2;
  if ( a2 && *(_BYTE *)a2 & 0x10 )
  {
    v3 = *(_DWORD *)a1 - 4;
    v4 = *(void (__stdcall **)(_DWORD))(*(_DWORD *)v3 + 32);
    v2 = *(_DWORD *)(*(_DWORD *)v3 + 24);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)v3 + 32));
    v4(v3);
  }
  v9 = a1;
  v10 = v2;
  if ( v2 && *(_BYTE *)v2 & 8 )
    Arguments = 26820608;
  RaiseException(dwExceptionCode, dwExceptionFlags, nNumberOfArguments, &Arguments);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10027502) --------------------------------------------------------
void __usercall sub_10027502(int a1@<edi>, int a2@<esi>, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // ebp@0
  int v8; // [sp+0h] [bp-18h]@1
  int (__cdecl *v9)(int, int, int); // [sp+4h] [bp-14h]@1
  unsigned int v10; // [sp+8h] [bp-10h]@1
  int v11; // [sp+Ch] [bp-Ch]@1
  int v12; // [sp+10h] [bp-8h]@1
  int v13; // [sp+14h] [bp-4h]@1

  v10 = (unsigned int)&v8 ^ __security_cookie;
  v11 = a4;
  v9 = sub_1002773E;
  v12 = a3;
  v13 = a6 + 1;
  v8 = a6 + 1;
  sub_10028BC0(a3, v7, a1, a2, a5, a3, a7);
}

//----- (10027562) --------------------------------------------------------
signed int __usercall sub_10027562@<eax>(int a1@<ebx>, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  signed int result; // eax@2
  int v9; // [sp+0h] [bp-3Ch]@3
  int v10; // [sp+4h] [bp-38h]@3
  int (__usercall *v11)@<eax>(int@<ebp>, int@<edi>, int@<esi>, int@<ebx>); // [sp+8h] [bp-34h]@3
  unsigned int v12; // [sp+Ch] [bp-30h]@3
  int v13; // [sp+10h] [bp-2Ch]@3
  int v14; // [sp+14h] [bp-28h]@3
  int v15; // [sp+18h] [bp-24h]@3
  int v16; // [sp+1Ch] [bp-20h]@3
  int *v17; // [sp+20h] [bp-1Ch]@3
  int *v18; // [sp+24h] [bp-18h]@3
  int v19; // [sp+28h] [bp-14h]@3
  int v20; // [sp+2Ch] [bp-10h]@3
  int v21; // [sp+30h] [bp-Ch]@3
  int v22; // [sp+34h] [bp-8h]@3
  int v23; // [sp+38h] [bp-4h]@3
  int savedregs; // [sp+3Ch] [bp+0h]@3

  if ( a2 == 291 )
  {
    *(_DWORD *)a3 = &loc_10027611;
    result = 1;
  }
  else
  {
    v11 = sub_10027803;
    v12 = (unsigned int)&v10 ^ __security_cookie;
    v13 = a6;
    v14 = a3;
    v15 = a7;
    v16 = a8;
    v19 = 0;
    v17 = &v9;
    v18 = &savedregs;
    v10 = a8;
    v22 = 1;
    v20 = a2;
    v21 = a4;
    v23 = *((_DWORD *)sub_10028ACA() + 2);
    __guard_check_icall_fptr(v23);
    ((void (__cdecl *)(_DWORD, int *))v23)(*(_DWORD *)a2, &v20);
    v22 = 0;
    if ( v19 )
      *(_DWORD *)v10 = *(_DWORD *)a1;
    result = v22;
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002763F) --------------------------------------------------------
int __cdecl sub_1002763F(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // ebp@0
  int v6; // esi@1
  int v7; // edi@1
  unsigned int v8; // ecx@1
  unsigned int v9; // edx@1
  int v10; // ebx@1
  int v11; // eax@2
  int v12; // ecx@9
  unsigned int v14; // [sp+Ch] [bp-4h]@1

  v6 = a2;
  v7 = a1;
  v8 = *(_DWORD *)(a1 + 12);
  v9 = *(_DWORD *)(a1 + 12);
  v10 = *(_DWORD *)(a1 + 16);
  v14 = *(_DWORD *)(a1 + 12);
  if ( a2 >= 0 )
  {
    v11 = v10 + 20 * v8 + 8;
    while ( v8 != -1 )
    {
      v11 -= 20;
      --v8;
      v7 = a1;
      if ( *(_DWORD *)(v11 - 4) < a3 && (v7 = a1, a3 <= *(_DWORD *)v11) || v8 == -1 )
      {
        v9 = v14;
        --v6;
        v14 = v8;
      }
      if ( v6 < 0 )
        goto LABEL_9;
    }
LABEL_12:
    sub_1002C84B(v10, v5, v7);
  }
LABEL_9:
  v12 = v8 + 1;
  *(_DWORD *)a4 = v12;
  *(_DWORD *)a5 = v9;
  if ( v9 > *(_DWORD *)(v7 + 12) || v12 > v9 )
    goto LABEL_12;
  return v10 + 20 * v12;
}

//----- (100276B7) --------------------------------------------------------
int __usercall sub_100276B7@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4)
{
  int v4; // et1@1
  int (*v5)(void); // eax@1
  int v6; // ebx@1
  int v7; // ebp@1
  int v8; // et1@1

  *(_DWORD *)(a2 - 4) = *(_DWORD *)(a2 + 12) + 12;
  v4 = *(_DWORD *)a1;
  v5 = *(int (**)(void))(a2 + 8);
  v6 = *(_DWORD *)(a2 + 12);
  v7 = *(_DWORD *)(a2 - 4);
  v8 = *(_DWORD *)(v6 - 4);
  return v5();
}

//----- (100276E9) --------------------------------------------------------
int __userpurge sub_100276E9@<eax>(int a1@<edi>, int a2@<esi>, PVOID TargetFrame, PEXCEPTION_RECORD ExceptionRecord)
{
  int result; // eax@1

  RtlUnwind(TargetFrame, &loc_10027713, ExceptionRecord, 0);
  result = ExceptionRecord->ExceptionFlags & 0xFFFFFFFD;
  ExceptionRecord->ExceptionFlags = result;
  *(_DWORD *)a2 = a1;
  return result;
}

//----- (1002773E) --------------------------------------------------------
int __cdecl sub_1002773E(int a1, int a2, int a3)
{
  sub_1000FB0D(a2 ^ *(_DWORD *)(a2 + 8));
  return sub_1002722A(a1, *(_DWORD *)(a2 + 16), a3, 0, *(_DWORD *)(a2 + 12), *(_DWORD *)(a2 + 20), (void *)a2, 0);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1002776F) --------------------------------------------------------
int __cdecl sub_1002776F(int a1, int a2)
{
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = *((_DWORD *)sub_10028ACA() + 9);
  *((_DWORD *)sub_10028ACA() + 9) = a1;
  return a1;
}

//----- (10027793) --------------------------------------------------------
int __usercall sub_10027793@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  int v3; // ebp@0
  char *v4; // ecx@2
  int result; // eax@2
  int i; // ecx@4

  if ( a3 == *((_DWORD *)sub_10028ACA() + 9) )
  {
    v4 = (char *)sub_10028ACA() + 36;
    result = *(_DWORD *)(a3 + 4);
    *(_DWORD *)v4 = result;
  }
  else
  {
    for ( i = *((_DWORD *)sub_10028ACA() + 9); ; i = *(_DWORD *)(i + 4) )
    {
      if ( !*(_DWORD *)(i + 4) )
        sub_1002C84B(a1, v3, a2);
      if ( a3 == *(_DWORD *)(i + 4) )
        break;
    }
    result = *(_DWORD *)(a3 + 4);
    *(_DWORD *)(i + 4) = result;
  }
  return result;
}

//----- (100277DD) --------------------------------------------------------
signed int __cdecl sub_100277DD(int a1)
{
  int v1; // eax@1
  signed int result; // eax@4

  v1 = *((_DWORD *)sub_10028ACA() + 9);
  if ( v1 )
  {
    while ( *(_DWORD *)v1 != a1 )
    {
      v1 = *(_DWORD *)(v1 + 4);
      if ( !v1 )
        goto LABEL_4;
    }
    result = 0;
  }
  else
  {
LABEL_4:
    result = 1;
  }
  return result;
}

//----- (10027803) --------------------------------------------------------
int __usercall sub_10027803@<eax>(int a1@<ebp>, int a2@<edi>, int a3@<esi>, int a4@<ebx>)
{
  int result; // eax@2
  int (*v5)(void); // eax@5
  int v6; // ebx@5
  int v7; // et1@5
  int v8; // ebp@5

  sub_1000FB0D(*(_DWORD *)(a1 + 12) ^ *(_DWORD *)(*(_DWORD *)(a1 + 12) + 8));
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 8) + 4) & 0x66 )
  {
    *(_DWORD *)(*(_DWORD *)(a1 + 12) + 36) = 1;
    result = 1;
  }
  else
  {
    sub_1002722A(
      *(_DWORD *)(a1 + 8),
      *(_DWORD *)(*(_DWORD *)(a1 + 12) + 16),
      *(_DWORD *)(a1 + 16),
      0,
      *(_DWORD *)(*(_DWORD *)(a1 + 12) + 12),
      *(_DWORD *)(*(_DWORD *)(a1 + 12) + 20),
      *(void **)(*(_DWORD *)(a1 + 12) + 24),
      1);
    if ( !*(_DWORD *)(*(_DWORD *)(a1 + 12) + 36) )
      sub_100276E9(a2, a3, *(PVOID *)(a1 + 12), *(PEXCEPTION_RECORD *)(a1 + 8));
    sub_10027562(a4, 291, a1 - 4, 0, 0, 0, 0, 0);
    v5 = *(int (**)(void))(a1 - 4);
    v6 = *(_DWORD *)(a1 + 12);
    v7 = *(_DWORD *)(v6 + 28);
    v8 = *(_DWORD *)(v6 + 32);
    result = v5();
  }
  return result;
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100278A2) --------------------------------------------------------
int __usercall sub_100278A2@<eax>(int a1@<eax>, int a2, int a3, int a4, int a5)
{
  return sub_1002722A(a2, a3, a4, a5, a1, 0, 0, 0);
}

//----- (100278E0) --------------------------------------------------------
void *__cdecl sub_100278E0(void *a1, const void *a2, unsigned int a3)
{
  int v3; // esi@1
  unsigned int v4; // ecx@1
  int v5; // edi@1
  void *result; // eax@8
  __m128i v7; // xmm1@17
  __m128i v8; // xmm1@20
  int v9; // esi@20
  __m128i v10; // xmm3@21
  __m128i v11; // xmm0@21
  __m128i v12; // xmm5@21
  int v13; // esi@22
  __m128i v14; // xmm1@23
  int v15; // esi@23
  __m128i v16; // xmm3@24
  __m128i v17; // xmm0@24
  __m128i v18; // xmm5@24
  __m128i v19; // xmm1@26
  int v20; // esi@26
  __m128i v21; // xmm3@27
  __m128i v22; // xmm0@27
  __m128i v23; // xmm5@27
  __m128i v24; // xmm1@30
  int v25; // eax@32
  unsigned int v26; // edx@38
  unsigned int v27; // ecx@39
  int v28; // edi@39
  int v29; // esi@39
  int v30; // esi@44
  int v31; // edi@44
  int v32; // edx@47
  char v33; // dl@50
  unsigned int v34; // ecx@50
  const void *v35; // esi@50
  void *v36; // edi@50
  int v37; // edi@50
  int v38; // esi@50
  __m128i v39; // xmm1@58
  __m128i v40; // xmm2@58
  __m128i v41; // xmm3@58
  __m128i v42; // xmm4@58
  __m128i v43; // xmm5@58
  __m128i v44; // xmm6@58
  __m128i v45; // xmm7@58
  __m128i v46; // xmm1@60
  int v47; // eax@66
  unsigned int v48; // edx@67
  unsigned int j; // edx@67
  __m128i v50; // xmm1@68
  __m128i v51; // xmm2@68
  __m128i v52; // xmm3@68
  __m128i v53; // xmm5@68
  __m128i v54; // xmm6@68
  __m128i v55; // xmm7@68
  unsigned int k; // edx@70
  __m128i v57; // xmm1@71
  int v58; // ecx@72
  char v59; // al@73
  unsigned int l; // ecx@73
  int m; // ecx@75
  unsigned int v62; // eax@78
  int v63; // ecx@78
  unsigned int i; // eax@80
  int v65; // [sp-4h] [bp-Ch]@78

  v3 = (int)a2;
  v4 = a3;
  v5 = (int)a1;
  if ( a1 <= a2 || a1 >= (char *)a2 + a3 )
  {
    if ( a3 >= 0x20 )
    {
      if ( a3 >= 0x80 )
      {
        if ( _bittest((const signed __int32 *)&dword_1007C194, 1u) )
        {
          qmemcpy(a1, a2, a3);
          return a1;
        }
        if ( ((unsigned int)a2 ^ (unsigned int)a1) & 0xF || !_bittest((const signed __int32 *)&dword_1007A020, 1u) )
        {
          if ( _bittest((const signed __int32 *)&dword_1007C194, 0) && !((unsigned __int8)a1 & 3) )
          {
            if ( !((unsigned __int8)a2 & 3) )
            {
              if ( _bittest((const unsigned int *)&v5, 2u) )
              {
                v4 = a3 - 4;
                v3 = (int)((char *)a2 + 4);
                *(_DWORD *)a1 = *(_DWORD *)a2;
                v5 = (int)((char *)a1 + 4);
              }
              if ( _bittest((const unsigned int *)&v5, 3u) )
              {
                v7 = _mm_loadl_epi64((const __m128i *)v3);
                v4 -= 8;
                v3 += 8;
                _mm_storel_epi64((__m128i *)v5, v7);
                v5 += 8;
              }
              if ( v3 & 7 )
              {
                if ( _bittest((const unsigned int *)&v3, 3u) )
                {
                  v8 = _mm_load_si128((const __m128i *)(v3 - 12));
                  v9 = v3 - 12;
                  do
                  {
                    v10 = _mm_load_si128((const __m128i *)(v9 + 16));
                    v4 -= 48;
                    v11 = _mm_load_si128((const __m128i *)(v9 + 32));
                    v12 = _mm_load_si128((const __m128i *)(v9 + 48));
                    v9 += 48;
                    _mm_store_si128((__m128i *)v5, _mm_alignr_epi8(v10, v8, 12));
                    _mm_store_si128((__m128i *)(v5 + 16), _mm_alignr_epi8(v11, v10, 12));
                    v8 = v12;
                    _mm_store_si128((__m128i *)(v5 + 32), _mm_alignr_epi8(v12, v11, 12));
                    v5 += 48;
                  }
                  while ( (signed int)v4 >= 48 );
                  v13 = v9 + 12;
                }
                else
                {
                  v19 = _mm_load_si128((const __m128i *)(v3 - 4));
                  v20 = v3 - 4;
                  do
                  {
                    v21 = _mm_load_si128((const __m128i *)(v20 + 16));
                    v4 -= 48;
                    v22 = _mm_load_si128((const __m128i *)(v20 + 32));
                    v23 = _mm_load_si128((const __m128i *)(v20 + 48));
                    v20 += 48;
                    _mm_store_si128((__m128i *)v5, _mm_alignr_epi8(v21, v19, 4));
                    _mm_store_si128((__m128i *)(v5 + 16), _mm_alignr_epi8(v22, v21, 4));
                    v19 = v23;
                    _mm_store_si128((__m128i *)(v5 + 32), _mm_alignr_epi8(v23, v22, 4));
                    v5 += 48;
                  }
                  while ( (signed int)v4 >= 48 );
                  v13 = v20 + 4;
                }
              }
              else
              {
                v14 = _mm_load_si128((const __m128i *)(v3 - 8));
                v15 = v3 - 8;
                do
                {
                  v16 = _mm_load_si128((const __m128i *)(v15 + 16));
                  v4 -= 48;
                  v17 = _mm_load_si128((const __m128i *)(v15 + 32));
                  v18 = _mm_load_si128((const __m128i *)(v15 + 48));
                  v15 += 48;
                  _mm_store_si128((__m128i *)v5, _mm_alignr_epi8(v16, v14, 8));
                  _mm_store_si128((__m128i *)(v5 + 16), _mm_alignr_epi8(v17, v16, 8));
                  v14 = v18;
                  _mm_store_si128((__m128i *)(v5 + 32), _mm_alignr_epi8(v18, v17, 8));
                  v5 += 48;
                }
                while ( (signed int)v4 >= 48 );
                v13 = v15 + 8;
              }
              while ( (signed int)v4 >= 16 )
              {
                v24 = _mm_loadu_si128((const __m128i *)v13);
                v4 -= 16;
                v13 += 16;
                _mm_store_si128((__m128i *)v5, v24);
                v5 += 16;
              }
              if ( _bittest(&v4, 2u) )
              {
                v25 = *(_DWORD *)v13;
                v4 -= 4;
                v13 += 4;
                *(_DWORD *)v5 = v25;
                v5 += 4;
              }
              if ( _bittest(&v4, 3u) )
              {
                v4 -= 8;
                _mm_storel_epi64((__m128i *)v5, _mm_loadl_epi64((const __m128i *)v13));
              }
              JUMPOUT(__CS__, off_10027B44[v4]);
            }
LABEL_38:
            v26 = v4;
            if ( v4 >= 0x20 )
            {
              v27 = v4 >> 2;
              qmemcpy((void *)v5, (const void *)v3, 4 * v27);
              v29 = v3 + 4 * v27;
              v28 = v5 + 4 * v27;
              switch ( v26 )
              {
                case 0u:
                  result = a1;
                  break;
                case 1u:
                  *(_BYTE *)v28 = *(_BYTE *)v29;
                  result = a1;
                  break;
                case 2u:
                  *(_BYTE *)v28 = *(_BYTE *)v29;
                  *(_BYTE *)(v28 + 1) = *(_BYTE *)(v29 + 1);
                  result = a1;
                  break;
                case 3u:
                  *(_BYTE *)v28 = *(_BYTE *)v29;
                  *(_BYTE *)(v28 + 1) = *(_BYTE *)(v29 + 1);
                  *(_BYTE *)(v28 + 2) = *(_BYTE *)(v29 + 2);
                  result = a1;
                  break;
              }
              return result;
            }
            goto LABEL_72;
          }
LABEL_36:
          if ( (unsigned __int8)a1 & 3 )
          {
            do
            {
              *(_BYTE *)v5 = *(_BYTE *)v3;
              --v4;
              ++v3;
              ++v5;
            }
            while ( v5 & 3 );
          }
          goto LABEL_38;
        }
        v47 = (unsigned __int8)a2 & 0xF;
        if ( (unsigned __int8)a2 & 0xF )
        {
          v65 = a3 - (16 - v47);
          v62 = 16 - v47;
          v63 = v62 & 3;
          if ( v62 & 3 )
          {
            do
            {
              *(_BYTE *)v5++ = *(_BYTE *)v3++;
              --v63;
            }
            while ( v63 );
          }
          for ( i = v62 >> 2; i; --i )
          {
            *(_DWORD *)v5 = *(_DWORD *)v3;
            v3 += 4;
            v5 += 4;
          }
          v4 = v65;
        }
        v48 = v4;
        v4 &= 0x7Fu;
        for ( j = v48 >> 7; j; --j )
        {
          v50 = _mm_load_si128((const __m128i *)(v3 + 16));
          v51 = _mm_load_si128((const __m128i *)(v3 + 32));
          v52 = _mm_load_si128((const __m128i *)(v3 + 48));
          _mm_store_si128((__m128i *)v5, _mm_load_si128((const __m128i *)v3));
          _mm_store_si128((__m128i *)(v5 + 16), v50);
          _mm_store_si128((__m128i *)(v5 + 32), v51);
          _mm_store_si128((__m128i *)(v5 + 48), v52);
          v53 = _mm_load_si128((const __m128i *)(v3 + 80));
          v54 = _mm_load_si128((const __m128i *)(v3 + 96));
          v55 = _mm_load_si128((const __m128i *)(v3 + 112));
          _mm_store_si128((__m128i *)(v5 + 64), _mm_load_si128((const __m128i *)(v3 + 64)));
          _mm_store_si128((__m128i *)(v5 + 80), v53);
          _mm_store_si128((__m128i *)(v5 + 96), v54);
          _mm_store_si128((__m128i *)(v5 + 112), v55);
          v3 += 128;
          v5 += 128;
        }
      }
      else if ( !_bittest((const signed __int32 *)&dword_1007A020, 1u) )
      {
        goto LABEL_36;
      }
      if ( !v4 )
        return a1;
      for ( k = v4 >> 5; k; --k )
      {
        v57 = _mm_loadu_si128((const __m128i *)(v3 + 16));
        _mm_storeu_si128((__m128i *)v5, _mm_loadu_si128((const __m128i *)v3));
        _mm_storeu_si128((__m128i *)(v5 + 16), v57);
        v3 += 32;
        v5 += 32;
      }
    }
LABEL_72:
    v58 = v4 & 0x1F;
    if ( v58 )
    {
      v59 = v58;
      for ( l = (unsigned int)v58 >> 2; l; --l )
      {
        *(_DWORD *)v5 = *(_DWORD *)v3;
        v5 += 4;
        v3 += 4;
      }
      for ( m = v59 & 3; m; --m )
        *(_BYTE *)v5++ = *(_BYTE *)v3++;
    }
    return a1;
  }
  v30 = (int)((char *)a2 + a3);
  v31 = (int)((char *)a1 + a3);
  if ( a3 >= 0x20 )
  {
    if ( _bittest((const signed __int32 *)&dword_1007A020, 1u) )
    {
      for ( ; v31 & 0xF; *(_BYTE *)v31 = *(_BYTE *)v30 )
      {
        --v4;
        --v30;
        --v31;
      }
      do
      {
        if ( v4 < 0x80 )
          break;
        v30 -= 128;
        v31 -= 128;
        v39 = _mm_loadu_si128((const __m128i *)(v30 + 16));
        v40 = _mm_loadu_si128((const __m128i *)(v30 + 32));
        v41 = _mm_loadu_si128((const __m128i *)(v30 + 48));
        v42 = _mm_loadu_si128((const __m128i *)(v30 + 64));
        v43 = _mm_loadu_si128((const __m128i *)(v30 + 80));
        v44 = _mm_loadu_si128((const __m128i *)(v30 + 96));
        v45 = _mm_loadu_si128((const __m128i *)(v30 + 112));
        _mm_storeu_si128((__m128i *)v31, _mm_loadu_si128((const __m128i *)v30));
        _mm_storeu_si128((__m128i *)(v31 + 16), v39);
        _mm_storeu_si128((__m128i *)(v31 + 32), v40);
        _mm_storeu_si128((__m128i *)(v31 + 48), v41);
        _mm_storeu_si128((__m128i *)(v31 + 64), v42);
        _mm_storeu_si128((__m128i *)(v31 + 80), v43);
        _mm_storeu_si128((__m128i *)(v31 + 96), v44);
        _mm_storeu_si128((__m128i *)(v31 + 112), v45);
        v4 -= 128;
      }
      while ( v4 & 0xFFFFFF80 );
      if ( v4 >= 0x20 )
      {
        do
        {
          v30 -= 32;
          v31 -= 32;
          v46 = _mm_loadu_si128((const __m128i *)(v30 + 16));
          _mm_storeu_si128((__m128i *)v31, _mm_loadu_si128((const __m128i *)v30));
          _mm_storeu_si128((__m128i *)(v31 + 16), v46);
          v4 -= 32;
        }
        while ( v4 & 0xFFFFFFE0 );
      }
    }
    else
    {
      if ( v31 & 3 )
      {
        v32 = v31 & 3;
        v4 = a3 - v32;
        do
        {
          *(_BYTE *)(v31-- - 1) = *(_BYTE *)(v30-- - 1);
          --v32;
        }
        while ( v32 );
      }
      if ( v4 >= 0x20 )
      {
        v33 = v4;
        v34 = v4 >> 2;
        v35 = (const void *)(v30 - 4);
        v36 = (void *)(v31 - 4);
        qmemcpy(v36, v35, 4 * v34);
        v38 = (int)((char *)v35 + 4 * v34);
        v37 = (int)((char *)v36 + 4 * v34);
        switch ( v33 & 3 )
        {
          case 0:
            result = a1;
            break;
          case 1:
            *(_BYTE *)(v37 + 3) = *(_BYTE *)(v38 + 3);
            result = a1;
            break;
          case 2:
            *(_BYTE *)(v37 + 3) = *(_BYTE *)(v38 + 3);
            *(_BYTE *)(v37 + 2) = *(_BYTE *)(v38 + 2);
            result = a1;
            break;
          case 3:
            *(_BYTE *)(v37 + 3) = *(_BYTE *)(v38 + 3);
            *(_BYTE *)(v37 + 2) = *(_BYTE *)(v38 + 2);
            *(_BYTE *)(v37 + 1) = *(_BYTE *)(v38 + 1);
            result = a1;
            break;
        }
        return result;
      }
    }
  }
  for ( ; v4 & 0xFFFFFFFC; v4 -= 4 )
  {
    v31 -= 4;
    v30 -= 4;
    *(_DWORD *)v31 = *(_DWORD *)v30;
  }
  for ( ; v4; --v4 )
  {
    --v31;
    --v30;
    *(_BYTE *)v31 = *(_BYTE *)v30;
  }
  return a1;
}
// 10027B44: using guessed type void *off_10027B44[4];
// 1007A020: using guessed type int dword_1007A020;
// 1007C194: using guessed type int dword_1007C194;

//----- (10027E54) --------------------------------------------------------
char sub_10027E54()
{
  sub_10028C0C();
  sub_100282B8();
  if ( !sub_10028C29() )
    return 0;
  if ( !sub_10028B6A() )
  {
    sub_10028C65();
    return 0;
  }
  return 1;
}

//----- (10027E7D) --------------------------------------------------------
bool sub_10027E7D()
{
  return sub_10028AD8() != 0;
}

//----- (10027E88) --------------------------------------------------------
char sub_10027E88()
{
  sub_10028A94(0);
  return 1;
}

//----- (10027E93) --------------------------------------------------------
char __cdecl sub_10027E93(char a1)
{
  if ( !a1 )
  {
    sub_10028B9D();
    sub_10028C65();
    sub_100282F2(0);
  }
  return 1;
}

//----- (10027EC0) --------------------------------------------------------
int __cdecl sub_10027EC0(int a1, int a2)
{
  if ( *(_DWORD *)a1 != -2 )
    sub_1000FB0D(*(_DWORD *)(*(_DWORD *)a1 + a2) ^ (a2 + *(_DWORD *)(a1 + 4)));
  return sub_1000FB0D(*(_DWORD *)(*(_DWORD *)(a1 + 8) + a2) ^ (a2 + *(_DWORD *)(a1 + 12)));
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10027F00) --------------------------------------------------------
int __cdecl sub_10027F00(PEXCEPTION_RECORD ExceptionRecord, PVOID TargetFrame, int a3)
{
  int v3; // ebp@0
  int v4; // esi@1
  int v5; // ebx@1
  int v6; // ecx@1
  unsigned int v7; // edi@2
  int v8; // eax@3
  void *v9; // ecx@3
  int v10; // eax@3
  unsigned int v11; // ebx@3
  int v12; // eax@4
  char v13; // cl@4
  EXCEPTION_RECORD *v14; // eax@6
  PEXCEPTION_RECORD v16; // [sp+Ch] [bp-1Ch]@2
  int v17; // [sp+10h] [bp-18h]@2
  int v18; // [sp+14h] [bp-14h]@1
  int v19; // [sp+18h] [bp-10h]@3
  int v20; // [sp+1Ch] [bp-Ch]@1
  int v21; // [sp+20h] [bp-8h]@1
  char v22; // [sp+27h] [bp-1h]@1

  v4 = (int)TargetFrame;
  v22 = 0;
  v20 = 1;
  v5 = __security_cookie ^ *((_DWORD *)TargetFrame + 2);
  v18 = (int)((char *)TargetFrame + 16);
  v21 = v5;
  sub_10027EC0(v5, (int)((char *)TargetFrame + 16));
  nullsub_1(v6);
  if ( ExceptionRecord->ExceptionFlags & 0x66 )
  {
    if ( *((_DWORD *)TargetFrame + 3) != -2 )
    {
      sub_10028DE7((int)TargetFrame, 0xFFFFFFFE, (int)((char *)TargetFrame + 16), (int)&__security_cookie);
      goto LABEL_21;
    }
  }
  else
  {
    v16 = ExceptionRecord;
    v17 = a3;
    v7 = *((_DWORD *)TargetFrame + 3);
    *((_DWORD *)TargetFrame - 1) = &v16;
    if ( v7 != -2 )
    {
      while ( 1 )
      {
        v8 = v7 + 2 * (v7 + 2);
        v9 = *(void **)(v5 + 4 * v8 + 4);
        v10 = v5 + 4 * v8;
        v11 = *(_DWORD *)v10;
        v19 = v10;
        if ( v9 )
        {
          v12 = sub_10028D9E(v9);
          v13 = 1;
          v22 = 1;
          if ( v12 < 0 )
          {
            v5 = v21;
            v20 = 0;
            goto LABEL_21;
          }
          if ( v12 > 0 )
          {
            v14 = ExceptionRecord;
            if ( ExceptionRecord->ExceptionCode == -529697949 && sub_10026654 )
            {
              if ( sub_1003B4A0((int)&off_10067120) )
              {
                j_nullsub_1(sub_10026654);
                sub_10026654(v3);
                v4 = (int)TargetFrame;
              }
              v14 = ExceptionRecord;
            }
            sub_10028DCE((PVOID)v4, v14);
            if ( *(_DWORD *)(v4 + 12) != v7 )
              sub_10028DE7(v4, v7, v4 + 16, (int)&__security_cookie);
            *(_DWORD *)(v4 + 12) = v11;
            sub_10027EC0(v21, v4 + 16);
            sub_10028DB5(*(_DWORD *)(v19 + 8), v4 + 16);
            __debugbreak();
            JUMPOUT(*(_DWORD *)sub_10028066);
          }
        }
        else
        {
          v13 = v22;
        }
        v7 = v11;
        if ( v11 == -2 )
          break;
        v5 = v21;
      }
      if ( v13 )
      {
        v5 = v21;
LABEL_21:
        sub_10027EC0(v5, v18);
        return v20;
      }
    }
  }
  return v20;
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 10067120: using guessed type int (*off_10067120)();

//----- (10028066) --------------------------------------------------------
int __cdecl sub_10028066(int a1, LPCSTR lpProcName, int a3, int a4)
{
  volatile signed __int32 *v4; // ebx@1
  signed __int32 v5; // eax@1
  int v6; // edx@1
  int v7; // esi@1
  int v9; // esi@4
  HMODULE v10; // eax@5
  int v11; // eax@10
  int v12; // edi@14

  v4 = &dword_1007C64C[a1];
  v5 = _InterlockedCompareExchange(&dword_1007C64C[a1], 0, 0);
  v6 = __security_cookie;
  v7 = __ROR4__(v5 ^ __security_cookie, __security_cookie & 0x1F);
  if ( v7 != -1 )
  {
    if ( v7 )
      return v7;
    v9 = a3;
    if ( a3 == a4 )
    {
LABEL_8:
      v10 = 0;
    }
    else
    {
      while ( 1 )
      {
        v10 = sub_10028106(*(_DWORD *)v9);
        if ( v10 )
          break;
        v9 += 4;
        if ( v9 == a4 )
        {
          v6 = __security_cookie;
          goto LABEL_8;
        }
      }
      v6 = __security_cookie;
    }
    if ( v10 )
    {
      v11 = (int)GetProcAddress(v10, lpProcName);
      v7 = v11;
      if ( v11 )
      {
        _InterlockedExchange(v4, sub_1000F4E5(v11));
        return v7;
      }
      v6 = __security_cookie;
    }
    v12 = __ROR4__(-1, 32 - (v6 & 0x1F));
    _InterlockedExchange(v4, v6 ^ v12);
  }
  return 0;
}

//----- (10028106) --------------------------------------------------------
HMODULE __cdecl sub_10028106(int a1)
{
  volatile signed __int32 *v1; // edi@1
  signed __int32 v2; // eax@1
  HMODULE result; // eax@2
  const WCHAR *v4; // ebx@3
  HMODULE v5; // esi@3

  v1 = &dword_1007C63C[a1];
  v2 = _InterlockedCompareExchange(&dword_1007C63C[a1], 0, 0);
  if ( v2 )
  {
    result = (HMODULE)(v2 != -1 ? v2 : 0);
  }
  else
  {
    v4 = (&lpLibFileName)[2 * a1];
    v5 = LoadLibraryExW(v4, 0, 0x800u);
    if ( v5 || (GetLastError() != 87 ? (v5 = 0) : (v5 = LoadLibraryExW(v4, 0, 0)), v5) )
    {
      if ( _InterlockedExchange(v1, (signed __int32)v5) )
        FreeLibrary(v5);
      result = v5;
    }
    else
    {
      _InterlockedExchange(v1, -1);
      result = 0;
    }
  }
  return result;
}

//----- (10028187) --------------------------------------------------------
DWORD __cdecl sub_10028187(int a1)
{
  int v1; // eax@1
  int v2; // esi@1
  DWORD result; // eax@2

  v1 = sub_10028066(4, "FlsAlloc", (int)&unk_10067210, (int)&unk_10067218);
  v2 = v1;
  if ( v1 )
  {
    j_nullsub_1(v1);
    result = ((int (__stdcall *)(int))v2)(a1);
  }
  else
  {
    result = TlsAlloc();
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100281C1) --------------------------------------------------------
int __cdecl sub_100281C1(DWORD dwTlsIndex)
{
  int v1; // eax@1
  int v2; // esi@1
  int result; // eax@2

  v1 = sub_10028066(5, "FlsFree", (int)&unk_10067218, (int)&unk_10067220);
  v2 = v1;
  if ( v1 )
  {
    j_nullsub_1(v1);
    result = ((int (__stdcall *)(DWORD))v2)(dwTlsIndex);
  }
  else
  {
    result = TlsFree(dwTlsIndex);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (100281FB) --------------------------------------------------------
int __cdecl sub_100281FB(DWORD dwTlsIndex)
{
  int v1; // eax@1
  int v2; // esi@1
  int result; // eax@2

  v1 = sub_10028066(6, "FlsGetValue", (int)&unk_10067220, (int)&unk_10067228);
  v2 = v1;
  if ( v1 )
  {
    j_nullsub_1(v1);
    result = ((int (__stdcall *)(DWORD))v2)(dwTlsIndex);
  }
  else
  {
    result = (int)TlsGetValue(dwTlsIndex);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10028235) --------------------------------------------------------
int __cdecl sub_10028235(DWORD dwTlsIndex, LPVOID lpTlsValue)
{
  int v2; // eax@1
  int v3; // esi@1
  int result; // eax@2

  v2 = sub_10028066(7, "FlsSetValue", (int)&unk_10067228, (int)&unk_10067230);
  v3 = v2;
  if ( v2 )
  {
    j_nullsub_1(v2);
    result = ((int (__stdcall *)(DWORD, LPVOID))v3)(dwTlsIndex, lpTlsValue);
  }
  else
  {
    result = TlsSetValue(dwTlsIndex, lpTlsValue);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10028272) --------------------------------------------------------
int __cdecl sub_10028272(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount, int a3)
{
  int v3; // eax@1
  int v4; // esi@1
  int result; // eax@2

  v3 = sub_10028066(8, "InitializeCriticalSectionEx", (int)&unk_10067230, (int)&off_10067238);
  v4 = v3;
  if ( v3 )
  {
    j_nullsub_1(v3);
    result = ((int (__stdcall *)(LPCRITICAL_SECTION, DWORD, int))v4)(lpCriticalSection, dwSpinCount, a3);
  }
  else
  {
    result = InitializeCriticalSectionAndSpinCount(lpCriticalSection, dwSpinCount);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 10067238: using guessed type void *off_10067238;

//----- (100282B8) --------------------------------------------------------
_UNKNOWN *sub_100282B8()
{
  _UNKNOWN *result; // eax@1
  int v1; // esi@1
  int v2; // ecx@1
  int v3; // esi@1

  result = &unk_1007C64C;
  v1 = __ROR4__(0, 32 - (__security_cookie & 0x1F));
  v2 = 0;
  v3 = __security_cookie ^ v1;
  do
  {
    ++v2;
    *(_DWORD *)result = v3;
    result = (char *)result + 4;
  }
  while ( v2 != (&unk_1007C670 < &unk_1007C64C ? 0 : 9) );
  return result;
}

//----- (100282F2) --------------------------------------------------------
BOOL __cdecl sub_100282F2(char a1)
{
  HMODULE *v1; // esi@2
  BOOL result; // eax@5

  if ( !a1 )
  {
    v1 = (HMODULE *)dword_1007C63C;
    do
    {
      if ( *v1 )
      {
        if ( *v1 != (HMODULE)-1 )
          result = FreeLibrary(*v1);
        *v1 = 0;
      }
      ++v1;
    }
    while ( (_UNKNOWN *)v1 != &unk_1007C64C );
  }
  return result;
}

//----- (10028330) --------------------------------------------------------
void *__cdecl sub_10028330(void *a1, char a2, unsigned int a3)
{
  int v3; // ecx@1
  unsigned int v4; // edi@1
  unsigned int v5; // eax@2
  __m128i v7; // xmm0@7
  int v8; // edi@15

  v3 = a3;
  v4 = (unsigned int)a1;
  if ( !a3 )
    return a1;
  v5 = 16843009 * (unsigned __int8)a2;
  if ( (signed int)a3 <= 32 )
    goto LABEL_16;
  if ( (signed int)a3 >= 128 )
  {
    if ( _bittest((const signed __int32 *)&dword_1007C194, 1u) )
    {
      memset(a1, a2, a3);
      return a1;
    }
    if ( !_bittest((const signed __int32 *)&dword_1007A020, 1u) )
      goto LABEL_16;
    v7 = _mm_shuffle_epi32(_mm_cvtsi32_si128(v5), 0);
    *(_OWORD *)a1 = v7;
    v4 = (unsigned int)((char *)a1 + 16) & 0xFFFFFFF0;
    v3 = (int)((char *)a1 + a3 - v4);
    if ( v3 > 128 )
    {
      do
      {
        _mm_store_si128((__m128i *)v4, v7);
        _mm_store_si128((__m128i *)(v4 + 16), v7);
        _mm_store_si128((__m128i *)(v4 + 32), v7);
        _mm_store_si128((__m128i *)(v4 + 48), v7);
        _mm_store_si128((__m128i *)(v4 + 64), v7);
        _mm_store_si128((__m128i *)(v4 + 80), v7);
        _mm_store_si128((__m128i *)(v4 + 96), v7);
        _mm_store_si128((__m128i *)(v4 + 112), v7);
        v4 += 128;
        v3 -= 128;
      }
      while ( v3 & 0xFFFFFF00 );
      goto LABEL_12;
    }
  }
  if ( !_bittest((const signed __int32 *)&dword_1007A020, 1u) )
  {
LABEL_16:
    while ( v3 & 3 )
    {
      *(_BYTE *)v4++ = a2;
      --v3;
    }
    if ( v3 & 4 )
    {
      *(_DWORD *)v4 = v5;
      v4 += 4;
      v3 -= 4;
    }
    for ( ; v3 & 0xFFFFFFF8; v3 -= 8 )
    {
      *(_DWORD *)v4 = v5;
      *(_DWORD *)(v4 + 4) = v5;
      v4 += 8;
    }
    return a1;
  }
  v7 = _mm_shuffle_epi32(_mm_cvtsi32_si128(v5), 0);
LABEL_12:
  if ( (unsigned int)v3 < 0x20 )
    goto LABEL_25;
  do
  {
    _mm_storeu_si128((__m128i *)v4, v7);
    _mm_storeu_si128((__m128i *)(v4 + 16), v7);
    v4 += 32;
    v3 -= 32;
  }
  while ( (unsigned int)v3 >= 0x20 );
  if ( v3 & 0x1F )
  {
LABEL_25:
    v8 = v3 + v4 - 32;
    _mm_storeu_si128((__m128i *)v8, v7);
    _mm_storeu_si128((__m128i *)(v8 + 16), v7);
    return a1;
  }
  return a1;
}
// 1007A020: using guessed type int dword_1007A020;
// 1007C194: using guessed type int dword_1007C194;

//----- (1002848A) --------------------------------------------------------
int __cdecl sub_1002848A(int a1, int a2)
{
  int result; // eax@2
  int v3; // ecx@3
  int v4; // eax@3
  bool v5; // cf@4
  unsigned __int8 v6; // dl@6

  if ( a1 == a2 )
  {
LABEL_2:
    result = 0;
  }
  else
  {
    v3 = a2 + 5;
    v4 = a1 + 5;
    while ( 1 )
    {
      v5 = *(_BYTE *)v4 < *(_BYTE *)v3;
      if ( *(_BYTE *)v4 != *(_BYTE *)v3 )
        break;
      if ( !*(_BYTE *)v4 )
        goto LABEL_2;
      v6 = *(_BYTE *)(v4 + 1);
      v5 = v6 < *(_BYTE *)(v3 + 1);
      if ( v6 != *(_BYTE *)(v3 + 1) )
        break;
      v4 += 2;
      v3 += 2;
      if ( !v6 )
        goto LABEL_2;
    }
    result = -v5 | 1;
  }
  return result;
}

//----- (100284C6) --------------------------------------------------------
PSINGLE_LIST_ENTRY __cdecl sub_100284C6(PSLIST_HEADER ListHead)
{
  PSINGLE_LIST_ENTRY result; // eax@1
  PSINGLE_LIST_ENTRY v2; // esi@2

  result = InterlockedFlushSList(ListHead);
  if ( result )
  {
    do
    {
      v2 = result->Next;
      sub_1002D7BC(result);
      result = v2;
    }
    while ( v2 );
  }
  return result;
}

//----- (100284E9) --------------------------------------------------------
void *__thiscall sub_100284E9(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10067254;
  return v2;
}
// 10067254: using guessed type int (__thiscall *off_10067254)(LPVOID lpMem, char);

//----- (10028504) --------------------------------------------------------
void *__thiscall sub_10028504(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_1006723C;
  return v2;
}
// 1006723C: using guessed type int (__thiscall *off_1006723C)(LPVOID lpMem, char);

//----- (1002851F) --------------------------------------------------------
void *__thiscall sub_1002851F(void *this, int a2)
{
  void *v2; // esi@1

  v2 = this;
  sub_1000D90A(this, a2);
  *(_DWORD *)v2 = &off_10067248;
  return v2;
}
// 10067248: using guessed type int (__thiscall *off_10067248)(LPVOID lpMem, char);

//----- (1002853A) --------------------------------------------------------
int __cdecl sub_1002853A(int a1)
{
  int v1; // ecx@1
  int result; // eax@1

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 4);
  result = a1 - *(_DWORD *)(v1 + 4);
  if ( *(_DWORD *)(v1 + 8) )
    result -= *(_DWORD *)(a1 - *(_DWORD *)(v1 + 8));
  return result;
}

//----- (10028557) --------------------------------------------------------
int __cdecl sub_10028557(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // edx@1
  signed int v6; // ecx@1
  int v7; // eax@1
  signed int v8; // ebx@1
  int v9; // edi@1
  int v10; // esi@1
  int v11; // esi@2
  int v12; // eax@4
  int v13; // eax@11
  int v15; // ebx@23
  int v16; // [sp+Ch] [bp-14h]@1
  unsigned int v17; // [sp+10h] [bp-10h]@1
  unsigned int v18; // [sp+14h] [bp-Ch]@1
  signed int v19; // [sp+18h] [bp-8h]@1
  int v20; // [sp+1Ch] [bp-4h]@1

  v5 = 0;
  v18 = 0;
  v6 = -1;
  v7 = *(_DWORD *)(a2 + 16);
  v8 = 0;
  v9 = 0;
  v20 = 0;
  v19 = -1;
  v10 = *(_DWORD *)(v7 + 12);
  v16 = *(_DWORD *)(v7 + 12);
  v17 = *(_DWORD *)(v7 + 8);
  if ( !v17 )
    return 0;
  while ( 1 )
  {
    v11 = *(_DWORD *)(v10 + 4 * v8);
    if ( v8 - v6 <= v18 )
      goto LABEL_10;
    if ( *(_DWORD *)v11 != a5 )
    {
      v12 = strcmp((const char *)(*(_DWORD *)v11 + 8), (const char *)(a5 + 8));
      if ( v12 )
        v12 = -(v12 < 0) | 1;
      if ( v12 )
        goto LABEL_10;
      v5 = v20;
    }
    if ( v5 )
    {
      if ( !(*(_BYTE *)(v11 + 20) & 3) && !(*(_BYTE *)(v5 + 20) & 1) )
        return v11;
      return 0;
    }
    v9 = v11;
    v19 = v8;
    v18 = *(_DWORD *)(v11 + 4);
LABEL_10:
    if ( *(_DWORD *)v11 == a3 )
      goto LABEL_33;
    v13 = strcmp((const char *)(*(_DWORD *)v11 + 8), (const char *)(a3 + 8));
    if ( v13 )
      v13 = -(v13 < 0) | 1;
    if ( !v13 )
    {
LABEL_33:
      if ( sub_1002891E(a1, v11 + 8) == a4 )
        break;
    }
    v5 = v20;
LABEL_18:
    ++v8;
    if ( v8 >= v17 )
      return 0;
    v6 = v19;
    v10 = v16;
  }
  if ( !v9 )
  {
    v5 = v11;
    v20 = v11;
    goto LABEL_18;
  }
  v15 = v8 - v19;
  if ( v15 > v18 )
  {
    if ( !(*(_BYTE *)(v9 + 20) & 3) )
      goto LABEL_26;
    return 0;
  }
  if ( !(*(_BYTE *)(v9 + 20) & 0x40) )
  {
    if ( !v19 )
    {
LABEL_26:
      if ( *(_BYTE *)(v11 + 20) & 1 )
        return 0;
    }
    return v9;
  }
  return (*(_BYTE *)(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v9 + 24) + 12) + 4 * v15) + 20) & 1) == 0 ? v9 : 0;
}

//----- (100286A4) --------------------------------------------------------
int __cdecl sub_100286A4(int a1, int a2, int a3)
{
  int v3; // eax@1
  int v4; // edx@1
  unsigned int v5; // esi@1
  unsigned int v6; // eax@1
  int v7; // ecx@2
  int v8; // ecx@2
  int v9; // ecx@3
  int i; // ecx@9
  int v12; // eax@10
  int v13; // eax@11
  int v14; // eax@12
  int v15; // [sp+Ch] [bp-8h]@2
  int v16; // [sp+10h] [bp-4h]@1

  v3 = *(_DWORD *)(a1 + 16);
  v4 = *(_DWORD *)(v3 + 12);
  v5 = *(_DWORD *)(v3 + 8);
  v6 = 0;
  v16 = v4;
  if ( v5 )
  {
    while ( 1 )
    {
      v7 = *(_DWORD *)(v4 + 4 * v6);
      v15 = v7;
      v8 = *(_DWORD *)v7;
      if ( v8 == a3 )
        break;
      v9 = strcmp((const char *)(v8 + 8), (const char *)(a3 + 8));
      if ( v9 )
        v9 = -(v9 < 0) | 1;
      v4 = v16;
      if ( !v9 )
        break;
      ++v6;
      if ( v6 >= v5 )
        return 0;
    }
    for ( i = v6 + 1; i < v5; ++i )
    {
      v12 = *(_DWORD *)(v4 + 4 * i);
      if ( *(_BYTE *)(v12 + 20) & 4 )
        break;
      v13 = *(_DWORD *)v12;
      if ( v13 == a2 )
        return v15;
      v14 = strcmp((const char *)(v13 + 8), (const char *)(a2 + 8));
      if ( v14 )
        v14 = -(v14 < 0) | 1;
      if ( !v14 )
        return v15;
      v4 = v16;
    }
  }
  return 0;
}

//----- (10028767) --------------------------------------------------------
int __cdecl sub_10028767(int a1, int a2, int a3, int a4, int a5)
{
  signed int v5; // ecx@1
  int v6; // eax@1
  signed int v7; // edi@1
  int v8; // ebx@1
  int v9; // esi@1
  int v10; // esi@2
  int v11; // eax@4
  int v12; // eax@11
  char v13; // dl@15
  int v14; // ecx@15
  int v15; // esi@20
  char v16; // cl@20
  int v17; // eax@21
  int v18; // eax@24
  int v19; // eax@28
  int result; // eax@35
  int v21; // [sp+Ch] [bp-24h]@1
  unsigned int v22; // [sp+10h] [bp-20h]@1
  int v23; // [sp+14h] [bp-1Ch]@1
  signed int v24; // [sp+18h] [bp-18h]@1
  unsigned int v25; // [sp+1Ch] [bp-14h]@1
  signed int v26; // [sp+20h] [bp-10h]@1
  int v27; // [sp+24h] [bp-Ch]@1
  int v28; // [sp+28h] [bp-8h]@1
  char v29; // [sp+2Fh] [bp-1h]@1

  v5 = -1;
  v6 = *(_DWORD *)(a2 + 16);
  v7 = 0;
  v28 = 0;
  v8 = 0;
  v23 = 0;
  v27 = 0;
  v9 = *(_DWORD *)(v6 + 12);
  v21 = *(_DWORD *)(v6 + 12);
  v22 = *(_DWORD *)(v6 + 8);
  v25 = 0;
  v26 = -1;
  v29 = 1;
  v24 = -1;
  if ( !v22 )
    goto LABEL_38;
  while ( 1 )
  {
    v10 = *(_DWORD *)(v9 + 4 * v7);
    if ( v7 - v5 > v25 )
    {
      if ( *(_DWORD *)v10 == a5 )
        goto LABEL_41;
      v11 = strcmp((const char *)(*(_DWORD *)v10 + 8), (const char *)(a5 + 8));
      if ( v11 )
        v11 = -(v11 < 0) | 1;
      if ( !v11 )
      {
LABEL_41:
        if ( !(*(_BYTE *)(v10 + 20) & 3) )
          v23 = v10;
        v27 = v10;
        v26 = v7;
        v25 = *(_DWORD *)(v10 + 4);
      }
    }
    if ( *(_DWORD *)v10 != a3 )
    {
      v12 = strcmp((const char *)(*(_DWORD *)v10 + 8), (const char *)(a3 + 8));
      if ( v12 )
        v12 = -(v12 < 0) | 1;
      if ( v12 )
        goto LABEL_27;
    }
    if ( sub_1002891E(a1, v10 + 8) != a4 )
      goto LABEL_27;
    v13 = v29;
    v14 = v7 - v26;
    if ( v7 - v26 <= v25 )
    {
      if ( v29 )
      {
        if ( *(_BYTE *)(v27 + 20) & 0x40 )
        {
          v15 = v27;
          v17 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v27 + 24) + 12) + 4 * v14) + 20);
          v16 = ~(unsigned __int8)(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v27 + 24) + 12) + 4 * v14) + 20) >> 2) & 1;
          v13 = (v17 & 1) == 0 ? v29 : 0;
          v29 = (v17 & 1) == 0 ? v29 : 0;
        }
        else
        {
          if ( !v26 )
          {
            v13 = (*(_BYTE *)(v10 + 20) & 1) == 0 ? v29 : 0;
            v29 = (*(_BYTE *)(v10 + 20) & 1) == 0 ? v29 : 0;
          }
          v15 = v27;
          v16 = 1;
        }
        if ( v13 && v16 )
        {
          v18 = sub_1002891E(a1, v15 + 8);
          if ( v8 && v24 != v18 )
            goto LABEL_38;
          v8 = v15;
          v24 = v18;
LABEL_27:
          v13 = v29;
        }
      }
LABEL_28:
      v19 = v28;
      goto LABEL_29;
    }
    if ( *(_BYTE *)(v10 + 20) & 5 )
      goto LABEL_28;
    v19 = v10;
    v28 = v10;
LABEL_29:
    ++v7;
    if ( v7 >= v22 )
      break;
    v5 = v26;
    v9 = v21;
  }
  if ( v13 && v8 )
    return v8;
  if ( !v19 || (result = v23) == 0 )
LABEL_38:
    result = 0;
  return result;
}

//----- (1002891E) --------------------------------------------------------
int __cdecl sub_1002891E(int a1, int a2)
{
  int v2; // edx@1

  v2 = 0;
  if ( *(_DWORD *)(a2 + 4) >= 0 )
    v2 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a2 + 4) + a1) + *(_DWORD *)(a2 + 8)) + *(_DWORD *)(a2 + 4);
  return v2 + *(_DWORD *)a2;
}

//----- (10028942) --------------------------------------------------------
int __cdecl sub_10028942(int a1, int a2)
{
  int result; // eax@1

  result = a1;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 4) = a2;
  *(_DWORD *)a1 = &off_10067254;
  return result;
}
// 10067254: using guessed type int (__thiscall *off_10067254)(LPVOID lpMem, char);

//----- (1002895E) --------------------------------------------------------
int __cdecl sub_1002895E(int a1, int a2)
{
  int result; // eax@1

  result = a1;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 4) = a2;
  *(_DWORD *)a1 = &off_1006723C;
  return result;
}
// 1006723C: using guessed type int (__thiscall *off_1006723C)(LPVOID lpMem, char);

//----- (1002897A) --------------------------------------------------------
int __usercall sub_1002897A@<eax>(int a1@<ebp>)
{
  int v1; // edx@1
  int v2; // ecx@1
  int v3; // edi@1
  int v5; // ebx@3
  int v6; // eax@3
  int v7; // edi@3
  int v8; // ecx@3
  int v9; // eax@4
  int v10; // eax@9
  int v11; // ST10_4@9
  int v12; // [sp-14h] [bp-14h]@5
  int v13; // [sp-Ch] [bp-Ch]@3

  sub_1000FFB0((int)&unk_10076C48, 24);
  v3 = *(_DWORD *)(a1 + 8);
  if ( !v3 )
    return sub_1000FFF6(v2, v1);
  *(_DWORD *)(a1 - 4) = 0;
  v5 = sub_1002853A(v3);
  v6 = *(_DWORD *)(*(_DWORD *)v3 - 4);
  v7 = v3 - *(_DWORD *)(a1 + 12) - v5;
  v8 = *(_DWORD *)(*(_DWORD *)(v6 + 16) + 4);
  v13 = *(_DWORD *)(a1 + 20);
  if ( v8 & 1 )
  {
    v12 = *(_DWORD *)(a1 + 16);
    if ( v8 & 2 )
      v9 = sub_10028767(v5, v6, v12, v7, v13);
    else
      v9 = sub_10028557(v5, v6, v12, v7, v13);
  }
  else
  {
    v9 = sub_100286A4(v6, *(_DWORD *)(a1 + 16), v13);
  }
  if ( v9 )
  {
    v10 = sub_1002891E(v5, v9 + 8);
    v2 = v11;
    *(_DWORD *)(a1 - 28) = v5 + v10;
LABEL_10:
    *(_DWORD *)(a1 - 4) = -2;
    return sub_1000FFF6(v2, v1);
  }
  *(_DWORD *)(a1 - 28) = 0;
  if ( !*(_DWORD *)(a1 + 24) )
    goto LABEL_10;
  sub_1002895E(a1 - 40, (int)"Bad dynamic_cast!");
  sub_10027494(a1 - 40, (int)&unk_10076CBC);
  return ***(_DWORD ***)(a1 - 20) == -1073741819;
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (10028A3E) --------------------------------------------------------
#error "10028A41: positive sp value has been found (funcsize=1)"

//----- (10028A5C) --------------------------------------------------------
void __usercall __noreturn sub_10028A5C(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  void *v3; // eax@1
  void (*v4)(void); // esi@1

  v3 = sub_10028ACA();
  v4 = (void (*)(void))*((_DWORD *)v3 + 1);
  if ( v4 )
  {
    j_nullsub_1(*((_DWORD *)v3 + 1));
    v4();
  }
  sub_1002C84B(a1, a2, a3);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (10028A78) --------------------------------------------------------
void __stdcall sub_10028A78(LPVOID lpMem)
{
  if ( lpMem )
  {
    if ( lpMem != &unk_1007C670 )
      sub_1002D7BC(lpMem);
  }
}

//----- (10028A94) --------------------------------------------------------
void __cdecl sub_10028A94(void *a1)
{
  DWORD v1; // eax@1
  void *v2; // esi@2

  v1 = dword_1007A0E0;
  if ( dword_1007A0E0 != -1 )
  {
    v2 = a1;
    if ( !a1 )
    {
      v2 = (void *)sub_100281FB(dword_1007A0E0);
      v1 = dword_1007A0E0;
    }
    sub_10028235(v1, 0);
    sub_10028A78(v2);
  }
}

//----- (10028ACA) --------------------------------------------------------
void *sub_10028ACA()
{
  void *result; // eax@1

  result = sub_10028AD8();
  JUMPOUT(result, 0, sub_1002D71C);
  return result;
}

//----- (10028AD8) --------------------------------------------------------
void *sub_10028AD8()
{
  DWORD v1; // edi@3
  int v2; // eax@3
  void *v3; // ebx@3
  LPVOID v4; // eax@7
  void *v5; // esi@7

  if ( dword_1007A0E0 == -1 )
    return 0;
  v1 = GetLastError();
  v2 = sub_100281FB(dword_1007A0E0);
  v3 = (void *)v2;
  if ( v2 == -1 )
  {
LABEL_6:
    v3 = 0;
    goto LABEL_12;
  }
  if ( !v2 )
  {
    if ( sub_10028235(dword_1007A0E0, (LPVOID)0xFFFFFFFF) )
    {
      v4 = sub_1002D75F(1u, 0x28u);
      v5 = v4;
      if ( v4 && sub_10028235(dword_1007A0E0, v4) )
      {
        v3 = v5;
        v5 = 0;
      }
      else
      {
        v3 = 0;
        sub_10028235(dword_1007A0E0, 0);
      }
      sub_1002D7BC(v5);
      goto LABEL_12;
    }
    goto LABEL_6;
  }
LABEL_12:
  SetLastError(v1);
  return v3;
}

//----- (10028B6A) --------------------------------------------------------
char sub_10028B6A()
{
  DWORD v0; // eax@1

  v0 = sub_10028187((int)sub_10028A78);
  dword_1007A0E0 = v0;
  if ( v0 == -1 )
    return 0;
  if ( !sub_10028235(v0, &unk_1007C670) )
  {
    sub_10028B9D();
    return 0;
  }
  return 1;
}

//----- (10028B9D) --------------------------------------------------------
char sub_10028B9D()
{
  if ( dword_1007A0E0 != -1 )
  {
    sub_100281C1(dword_1007A0E0);
    dword_1007A0E0 = -1;
  }
  return 1;
}

//----- (10028BC0) --------------------------------------------------------
void __userpurge sub_10028BC0(int a1@<ecx>, int a2@<ebp>, int a3@<edi>, int a4@<esi>, int a5, int a6, int a7)
{
  int v7; // ST10_4@1
  int v8; // eax@1
  int v9; // ST08_4@1
  int v10; // ecx@1
  int v11; // ebp@1
  void (__stdcall *v12)(_DWORD, _DWORD); // eax@1

  v7 = a1;
  *(_DWORD *)(a2 - 4) = *(_DWORD *)(a2 + 12) + 12;
  v8 = *(_DWORD *)(a2 + 8);
  v9 = *(_DWORD *)(a2 + 16);
  v10 = *(_DWORD *)(a2 + 16);
  v11 = *(_DWORD *)(a2 - 4);
  sub_10028F0C();
  v12(a3, a4);
  *(_DWORD *)(v7 + 16);
  sub_10028F0C();
}

//----- (10028C0C) --------------------------------------------------------
int sub_10028C0C()
{
  int v0; // eax@1
  int result; // eax@1

  v0 = __ROR4__(0, 32 - (__security_cookie & 0x1F));
  result = __security_cookie ^ v0;
  dword_1007C698 = result;
  return result;
}
// 1007C698: using guessed type int dword_1007C698;

//----- (10028C29) --------------------------------------------------------
char sub_10028C29()
{
  struct _RTL_CRITICAL_SECTION *v0; // edi@1
  unsigned int v1; // esi@1

  v0 = &stru_1007C69C;
  v1 = 0;
  while ( sub_10028272(v0, 0xFA0u, 0) )
  {
    ++dword_1007C6B4;
    v1 += 24;
    ++v0;
    if ( v1 >= 0x18 )
      return 1;
  }
  sub_10028C65();
  return 0;
}
// 1007C6B4: using guessed type int dword_1007C6B4;

//----- (10028C65) --------------------------------------------------------
char sub_10028C65()
{
  int v0; // esi@1
  struct _RTL_CRITICAL_SECTION *v1; // edi@2

  v0 = dword_1007C6B4;
  if ( dword_1007C6B4 )
  {
    v1 = (struct _RTL_CRITICAL_SECTION *)((char *)&unk_1007C684 + 24 * dword_1007C6B4);
    do
    {
      DeleteCriticalSection(v1);
      --dword_1007C6B4;
      --v1;
      --v0;
    }
    while ( v0 );
  }
  return 1;
}
// 1007C6B4: using guessed type int dword_1007C6B4;

//----- (10028CA0) --------------------------------------------------------
int __usercall sub_10028CA0@<eax>(int a1@<ebp>, int a2, int a3, unsigned int a4)
{
  int result; // eax@2
  unsigned int v5; // esi@2
  int v6; // esi@5
  int v7; // ebx@5
  int v8; // [sp-8h] [bp-28h]@1
  signed int (__cdecl *v9)(int, int, int, int); // [sp-4h] [bp-24h]@1
  unsigned int v10; // [sp+0h] [bp-20h]@1
  unsigned int v11; // [sp+4h] [bp-1Ch]@1
  int v12; // [sp+8h] [bp-18h]@1
  int v13; // [sp+Ch] [bp-14h]@1

  v13 = a2;
  v12 = a3;
  v11 = a4;
  v9 = sub_10028D30;
  v10 = (unsigned int)&v8 ^ __security_cookie;
  while ( 1 )
  {
    result = a3;
    v5 = *(_DWORD *)(a3 + 12);
    if ( v5 == -2 || a4 != -2 && v5 <= a4 )
      break;
    v6 = 3 * v5;
    v7 = (*(_DWORD *)a2 ^ *(_DWORD *)(a3 + 8)) + 4 * v6 + 16;
    *(_DWORD *)(a3 + 12) = *(_DWORD *)((*(_DWORD *)a2 ^ *(_DWORD *)(a3 + 8)) + 4 * v6 + 0x10);
    if ( !*(_DWORD *)(v7 + 4) )
    {
      sub_10028F15(*(_DWORD *)(v7 + 8), a1, 257);
      sub_10028F34(*(int (**)(void))(v7 + 8));
    }
  }
  return result;
}

//----- (10028D30) --------------------------------------------------------
signed int __cdecl sub_10028D30(int a1, int a2, int a3, int a4)
{
  signed int result; // eax@1
  int v5; // eax@2

  result = 1;
  if ( *(_DWORD *)(a1 + 4) & 6 )
  {
    v5 = sub_1000FB0D(a2 ^ *(_DWORD *)(a2 + 8));
    sub_10028CA0(*(_DWORD *)(v5 + 24), *(_DWORD *)(v5 + 20), *(_DWORD *)(v5 + 16), *(_DWORD *)(v5 + 12));
    *(_DWORD *)a4 = a2;
    result = 3;
  }
  return result;
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10028D9E) --------------------------------------------------------
int __thiscall sub_10028D9E(void *this)
{
  return ((int (__fastcall *)(_DWORD, _DWORD))this)(this, 0);
}

//----- (10028DB5) --------------------------------------------------------
int __fastcall sub_10028DB5(int a1, int a2)
{
  int v2; // esi@1

  v2 = a1;
  sub_10028F15(a1, a2, 1);
  return ((int (__fastcall *)(_DWORD, _DWORD))v2)(0, 0);
}

//----- (10028DCE) --------------------------------------------------------
void __fastcall sub_10028DCE(PVOID TargetFrame, PEXCEPTION_RECORD ExceptionRecord)
{
  RtlUnwind(TargetFrame, &loc_10028DE2, ExceptionRecord, 0);
}

//----- (10028DE7) --------------------------------------------------------
int __fastcall sub_10028DE7(int a1, unsigned int a2, int a3, int a4)
{
  return sub_10028CA0(a3, a4, a1, a2);
}

//----- (10028E20) --------------------------------------------------------
signed int __cdecl sub_10028E20(int a1, int a2, int a3, int a4, int a5)
{
  signed int result; // eax@1
  int v6; // eax@2

  result = 1;
  if ( *(_DWORD *)(a1 + 4) & 6 )
  {
    v6 = sub_1000FB0D(a5 ^ *(_DWORD *)(a5 - 4));
    sub_10028E65(*(_DWORD *)(v6 + 16), *(_DWORD *)(v6 + 36), *(_DWORD *)(v6 + 40));
    *(_DWORD *)a4 = a2;
    result = 3;
  }
  return result;
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10028E65) --------------------------------------------------------
int __usercall sub_10028E65@<eax>(int a1@<ebp>, int a2, unsigned int a3)
{
  int result; // eax@2
  int v4; // ebx@2
  unsigned int v5; // esi@2
  int v6; // esi@5
  signed int (__cdecl *v7)(int, int, int, int, int); // [sp+4h] [bp-1Ch]@1
  int v8; // [sp+8h] [bp-18h]@1
  int v9; // [sp+Ch] [bp-14h]@1

  v9 = a2;
  v8 = -2;
  v7 = sub_10028E20;
  while ( 1 )
  {
    result = a2;
    v4 = *(_DWORD *)(a2 + 8);
    v5 = *(_DWORD *)(a2 + 12);
    if ( v5 == -1 || a3 != -1 && v5 <= a3 )
      break;
    v6 = 3 * v5;
    v8 = *(_DWORD *)(v4 + 4 * v6);
    *(_DWORD *)(a2 + 12) = v8;
    if ( !*(_DWORD *)(v4 + 4 * v6 + 4) )
    {
      sub_10028F15(*(_DWORD *)(v4 + 4 * v6 + 8), a1, 257);
      sub_10028F34(*(int (**)(void))(v4 + 4 * v6 + 8));
    }
  }
  return result;
}

//----- (10028F0C) --------------------------------------------------------
void sub_10028F0C()
{
  JUMPOUT(&loc_10028F20);
}

//----- (10028F15) --------------------------------------------------------
int __userpurge sub_10028F15@<eax>(int result@<eax>, int a2@<ebp>, int a3)
{
  dword_1007A0F0[2] = a3;
  dword_1007A0F0[1] = result;
  dword_1007A0F0[3] = a2;
  return result;
}

//----- (10028F34) --------------------------------------------------------
int __usercall sub_10028F34@<eax>(int (*a1)(void)@<eax>)
{
  return a1();
}

//----- (10028F37) --------------------------------------------------------
int __usercall sub_10028F37@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // edx@1
  int v4; // ecx@1
  int v5; // esi@1
  int v6; // esi@10

  sub_1000FFB0((int)&unk_10076CF8, 16);
  v5 = *(_DWORD *)(a2 + 8);
  if ( v5 && (a3 = *(_DWORD *)(a2 + 12)) != 0 && (a1 = 0, *(_WORD *)a3) )
  {
    if ( *(_WORD *)v5 )
    {
      sub_1002EDE2(a2);
      v4 = a2 - 28;
      if ( *(_DWORD *)(a2 - 28) )
      {
        *(_DWORD *)(a2 - 32) = 0;
        *(_DWORD *)(a2 - 4) = 0;
        v6 = sub_1002F2FB(0, v5, a3, *(_DWORD *)(a2 + 16), *(_DWORD *)(a2 - 28));
        *(_DWORD *)(a2 - 32) = v6;
        *(_DWORD *)(a2 - 4) = -2;
        sub_10028FE1(a2, v6);
      }
      else
      {
        *(_DWORD *)sub_1002E9D5() = 24;
      }
    }
    else
    {
      *(_DWORD *)sub_1002E9D5() = 22;
    }
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a3);
  }
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (10028FE1) --------------------------------------------------------
void __usercall sub_10028FE1(int a1@<ebp>, int a2@<esi>)
{
  if ( !a2 )
    sub_1002EE41(*(_DWORD *)(a1 - 28));
  sub_1002D92E(*(_DWORD *)(a1 - 28));
}

//----- (10028FF8) --------------------------------------------------------
signed int __usercall sub_10028FF8@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  int v3; // ebp@0
  signed int v4; // esi@2
  int v5; // eax@3

  if ( a3 )
  {
    v5 = sub_10028F37(a1, v3, a2);
    *(_DWORD *)a3 = v5;
    if ( v5 )
      v4 = 0;
    else
      v4 = *(_DWORD *)sub_1002E9D5();
  }
  else
  {
    v4 = 22;
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
  }
  return v4;
}

//----- (1002903F) --------------------------------------------------------
signed int __usercall sub_1002903F@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  signed int result; // eax@2
  int v4; // edi@3
  int v5; // eax@4

  if ( a3 )
  {
    v4 = -1;
    if ( (*(_DWORD *)(a3 + 12) >> 13) & 1 )
    {
      v4 = sub_1002EA60(a1, a3);
      sub_1002F4F1(a3);
      v5 = sub_1002F4CB(a1, v4, a3);
      if ( sub_1002F3B0(a1, v4, v5) >= 0 )
      {
        if ( *(_DWORD *)(a3 + 28) )
        {
          sub_1002D7BC(*(LPVOID *)(a3 + 28));
          *(_DWORD *)(a3 + 28) = 0;
        }
      }
      else
      {
        v4 = -1;
      }
    }
    sub_1002EE41(a3);
    result = v4;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    result = -1;
  }
  return result;
}

//----- (100290B5) --------------------------------------------------------
int __usercall sub_100290B5@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@1
  int v4; // edx@2
  int v5; // ecx@2
  int v6; // ST00_4@5

  sub_1000FFB0((int)&unk_10076D18, 16);
  v3 = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(a2 - 32) = v3;
  if ( v3 )
  {
    if ( (*(_DWORD *)(v3 + 12) >> 12) & 1 )
    {
      sub_1002EE41(v3);
      v5 = v6;
    }
    else
    {
      *(_DWORD *)(a2 - 28) = 0;
      sub_1002D91A(v3);
      *(_DWORD *)(a2 - 4) = 0;
      *(_DWORD *)(a2 - 28) = sub_1002903F(a1, a3, v3);
      *(_DWORD *)(a2 - 4) = -2;
      sub_1002912B(a2);
    }
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a3);
  }
  return sub_1000FFF6(v5, v4);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002912B) --------------------------------------------------------
void __usercall sub_1002912B(int a1@<ebp>)
{
  sub_1002D92E(*(_DWORD *)(a1 - 32));
}

//----- (10029135) --------------------------------------------------------
int __userpurge sub_10029135@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4, int a5)
{
  int v5; // edx@1
  int v6; // ecx@1

  sub_1000FFB0((int)&unk_10076D38, 12);
  *(_DWORD *)(a2 - 28) = 0;
  sub_1002D91A(**(_DWORD **)(a2 + 8));
  *(_DWORD *)(a2 - 4) = 0;
  *(_DWORD *)(a2 - 28) = sub_100291AE(*(int ***)(a2 + 12), a1);
  *(_DWORD *)(a2 - 4) = -2;
  sub_1002917A(a2);
  return sub_1000FFF6(v6, v5);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002917A) --------------------------------------------------------
void __usercall sub_1002917A(int a1@<ebp>)
{
  sub_1002D92E(**(_DWORD **)(a1 + 16));
}

//----- (10029186) --------------------------------------------------------
int __usercall sub_10029186@<eax>(int a1@<ebx>, int a2, int a3)
{
  int v3; // ebp@0
  int v5; // [sp+0h] [bp-Ch]@1
  int v6; // [sp+4h] [bp-8h]@1

  v6 = a2;
  v5 = a2;
  return sub_10029135(a1, v3, (int)&v5, a3, (int)&v6);
}

//----- (100291AE) --------------------------------------------------------
unsigned int __usercall sub_100291AE@<eax>(int **a1@<ecx>, int a2@<ebx>)
{
  int **v2; // esi@1
  int v3; // edi@1
  char v4; // ST28_1@1
  unsigned int v5; // esi@1

  v2 = a1;
  v3 = **a1;
  v4 = sub_1002FF9E(a2, v3, **a1);
  v5 = sub_100291F4(*v2[1], *v2[2], *v2[3], **v2);
  sub_10030053(a2, v4, v3);
  return v5;
}

//----- (100291F4) --------------------------------------------------------
unsigned int __cdecl sub_100291F4(int a1, unsigned int a2, int a3, int a4)
{
  int v4; // ebp@0
  int v6; // ecx@7
  signed int v7; // edx@10
  int v8; // edi@12
  unsigned int v9; // eax@14
  int v10; // eax@23
  int v11; // eax@28
  int v12; // edx@29
  unsigned int v13; // [sp+10h] [bp-8h]@14
  int v14; // [sp+10h] [bp-8h]@24
  unsigned int v15; // [sp+14h] [bp-4h]@12

  if ( !a2 || !a3 )
    return 0;
  if ( !a4 || (v6 = a1) == 0 || a3 > 0xFFFFFFFF / a2 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a4, a3);
    return 0;
  }
  if ( *(_DWORD *)(a4 + 12) & 0x4C0 )
    v7 = *(_DWORD *)(a4 + 24);
  else
    v7 = 4096;
  v15 = v7;
  v8 = a3 * a2;
  if ( !(a3 * a2) )
    return a3;
  while ( 1 )
  {
    if ( *(_DWORD *)(a4 + 12) & 0xC0 )
    {
      v9 = *(_DWORD *)(a4 + 8);
      v13 = v9;
      if ( v9 )
      {
        if ( (v9 & 0x80000000) != 0 )
          goto LABEL_39;
        if ( v8 < v9 )
        {
          v9 = v8;
          v13 = v8;
        }
        sub_100278E0(*(void **)a4, (const void *)v6, v9);
        *(_DWORD *)(a4 + 8) -= v13;
        v8 -= v13;
        *(_DWORD *)a4 += v13;
        v6 = v13 + a1;
        a1 += v13;
        goto LABEL_33;
      }
    }
    if ( v8 >= (unsigned int)v7 )
      break;
    if ( sub_1002FF93(a4, v8, *(_BYTE *)v6, a4) == -1 )
      return (a3 * a2 - v8) / a2;
    v7 = *(_DWORD *)(a4 + 24);
    v6 = a1 + 1;
    --v8;
    ++a1;
    v15 = v7;
    if ( v7 <= 0 )
    {
      v7 = 1;
      v15 = 1;
    }
LABEL_37:
    if ( !v8 )
      return a3;
  }
  if ( *(_DWORD *)(a4 + 12) & 0xC0 )
  {
    if ( sub_1002EA60(a4, a4) )
      return (a3 * a2 - v8) / a2;
    v7 = v15;
  }
  v10 = v8;
  if ( v7 )
  {
    v10 = v8 - v8 % v15;
    v14 = v8 - v8 % v15;
  }
  else
  {
    v14 = v8;
  }
  if ( (unsigned int)v10 >= 0xFFFFFFFF )
    v14 = -1;
  sub_1002F4CB(a4, v8, a4);
  v11 = sub_1002FABF(a4, v4, v8);
  if ( v11 != -1 )
  {
    v12 = v14;
    if ( v11 <= (unsigned int)v14 )
      v12 = v11;
    a1 += v12;
    v8 -= v12;
    if ( v11 >= (unsigned int)v14 )
    {
      v6 = a1;
LABEL_33:
      v7 = v15;
      goto LABEL_37;
    }
  }
LABEL_39:
  _InterlockedOr((volatile signed __int32 *)(a4 + 12), 0x10u);
  return (a3 * a2 - v8) / a2;
}

//----- (1002936D) --------------------------------------------------------
int __usercall sub_1002936D@<eax>(int a1@<ebx>, int a2@<edi>, char a3, int a4, int a5, int a6)
{
  int *v7; // [sp+0h] [bp-10h]@7
  char *v8; // [sp+4h] [bp-Ch]@7
  int *v9; // [sp+8h] [bp-8h]@7
  int *v10; // [sp+Ch] [bp-4h]@7

  if ( !a4 || !a5 )
    return 0;
  if ( !a6 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return 0;
  }
  v7 = &a6;
  v8 = &a3;
  v9 = &a4;
  v10 = &a5;
  return sub_10029186(a1, a6, (int)&v7);
}

//----- (100293C5) --------------------------------------------------------
signed int __usercall sub_100293C5@<eax>(int a1@<edi>, int a2, int a3, int *a4, int a5, int a6, int a7, int a8)
{
  int v9; // edi@5
  signed int v10; // esi@8
  int v11; // eax@12
  int v12; // [sp+4h] [bp-484h]@5
  char v13; // [sp+8h] [bp-480h]@8
  char v14; // [sp+10h] [bp-478h]@22
  int v15; // [sp+14h] [bp-474h]@5
  int *v16; // [sp+18h] [bp-470h]@5
  int v17; // [sp+1Ch] [bp-46Ch]@5
  int v18; // [sp+20h] [bp-468h]@5
  int v19; // [sp+24h] [bp-464h]@5
  int *v20; // [sp+28h] [bp-460h]@1
  char v21; // [sp+2Ch] [bp-45Ch]@8
  char v22; // [sp+6Ch] [bp-41Ch]@22

  v20 = a4;
  if ( !a6 || a5 && !a4 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a5, a1);
    return -1;
  }
  sub_10029BD2((int)&v12, a5, a7);
  v19 = 0;
  v9 = (int)v20;
  v15 = a2 & 2;
  v16 = v20;
  v17 = a5;
  v18 = 0;
  if ( a2 & 2 || (LOBYTE(v19) = 0, !v20) )
    LOBYTE(v19) = 1;
  v20 = (int *)&v16;
  sub_10029B68((int)&v21, (int)&v20, a2, a3, a6, (int)&v13, a8);
  v10 = sub_10029E6C((int)&v21, a5, v9);
  if ( !v9 )
    goto LABEL_22;
  if ( !(a2 & 1) )
  {
    if ( v15 )
    {
      if ( !a5 )
        goto LABEL_22;
      if ( v10 < 0 )
      {
        *(_BYTE *)v9 = 0;
        goto LABEL_22;
      }
      v11 = v18;
      if ( v18 != a5 )
      {
LABEL_21:
        *(_BYTE *)(v9 + v11) = 0;
        goto LABEL_22;
      }
    }
    else
    {
      if ( !a5 )
      {
LABEL_27:
        v10 = -1;
        goto LABEL_22;
      }
      v11 = v18;
      if ( v18 != a5 )
        goto LABEL_21;
      v10 = -2;
    }
    *(_BYTE *)(v9 + a5 - 1) = 0;
    goto LABEL_22;
  }
  if ( !a5 && v10 )
    goto LABEL_27;
  v11 = v18;
  if ( v18 != a5 )
    goto LABEL_21;
  if ( v10 >= 0 && v10 > (unsigned int)a5 )
    goto LABEL_27;
LABEL_22:
  sub_10029C55((int)&v22);
  if ( v14 )
    *(_DWORD *)(v12 + 848) &= 0xFFFFFFFD;
  return v10;
}

//----- (10029541) --------------------------------------------------------
signed int __usercall sub_10029541@<eax>(int a1@<edi>, int a2, int a3, int *a4, int a5, int a6, int a7, int a8)
{
  int v9; // edi@5
  signed int v10; // esi@8
  int v11; // eax@12
  int v12; // [sp+4h] [bp-484h]@5
  char v13; // [sp+8h] [bp-480h]@8
  char v14; // [sp+10h] [bp-478h]@22
  int v15; // [sp+14h] [bp-474h]@5
  int *v16; // [sp+18h] [bp-470h]@5
  int v17; // [sp+1Ch] [bp-46Ch]@5
  int v18; // [sp+20h] [bp-468h]@5
  int v19; // [sp+24h] [bp-464h]@5
  int *v20; // [sp+28h] [bp-460h]@1
  char v21; // [sp+2Ch] [bp-45Ch]@8
  char v22; // [sp+6Ch] [bp-41Ch]@22

  v20 = a4;
  if ( !a6 || a5 && !a4 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a5, a1);
    return -1;
  }
  sub_10029BD2((int)&v12, a5, a7);
  v19 = 0;
  v9 = (int)v20;
  v15 = a2 & 2;
  v16 = v20;
  v17 = a5;
  v18 = 0;
  if ( a2 & 2 || (LOBYTE(v19) = 0, !v20) )
    LOBYTE(v19) = 1;
  v20 = (int *)&v16;
  sub_10029B9D((int)&v21, (int)&v20, a2, a3, a6, (int)&v13, a8);
  v10 = sub_10029F94((int)&v21, a5, v9);
  if ( !v9 )
    goto LABEL_22;
  if ( !(a2 & 1) )
  {
    if ( v15 )
    {
      if ( !a5 )
        goto LABEL_22;
      if ( v10 < 0 )
      {
        *(_WORD *)v9 = 0;
        goto LABEL_22;
      }
      v11 = v18;
      if ( v18 != a5 )
      {
LABEL_21:
        *(_WORD *)(v9 + 2 * v11) = 0;
        goto LABEL_22;
      }
    }
    else
    {
      if ( !a5 )
      {
LABEL_27:
        v10 = -1;
        goto LABEL_22;
      }
      v11 = v18;
      if ( v18 != a5 )
        goto LABEL_21;
      v10 = -2;
    }
    *(_WORD *)(v9 + 2 * a5 - 2) = 0;
    goto LABEL_22;
  }
  if ( !a5 && v10 )
    goto LABEL_27;
  v11 = v18;
  if ( v18 != a5 )
    goto LABEL_21;
  if ( v10 >= 0 && v10 > (unsigned int)a5 )
    goto LABEL_27;
LABEL_22:
  sub_10029C55((int)&v22);
  if ( v14 )
    *(_DWORD *)(v12 + 848) &= 0xFFFFFFFD;
  return v10;
}

//----- (100296C6) --------------------------------------------------------
signed int __usercall sub_100296C6@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int *a5, int a6, int a7, int a8, int a9)
{
  signed int result; // eax@2

  if ( !a7 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return -1;
  }
  if ( !a5 || !a6 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    goto LABEL_10;
  }
  result = sub_100293C5(a2, a3, a4, a5, a6, a7, a8, a9);
  if ( result < 0 )
    *(_BYTE *)a5 = 0;
  if ( result == -2 )
  {
    *(_DWORD *)sub_1002E9D5() = 34;
LABEL_10:
    sub_1002B787(a1, a2);
    result = -1;
  }
  return result;
}

//----- (1002973E) --------------------------------------------------------
signed int __usercall sub_1002973E@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int *a5, int a6, int a7, int a8, int a9)
{
  signed int result; // eax@2

  if ( !a7 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return -1;
  }
  if ( !a5 || !a6 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    goto LABEL_10;
  }
  result = sub_10029541(a2, a3, a4, a5, a6, a7, a8, a9);
  if ( result < 0 )
    *(_WORD *)a5 = 0;
  if ( result == -2 )
  {
    *(_DWORD *)sub_1002E9D5() = 34;
LABEL_10:
    sub_1002B787(a1, a2);
    result = -1;
  }
  return result;
}

//----- (100297B8) --------------------------------------------------------
signed int __thiscall sub_100297B8(int this)
{
  signed int result; // eax@2

  if ( *(_DWORD *)(this + 1028) )
    result = *(_DWORD *)(this + 1024) >> 1;
  else
    result = 512;
  return result;
}

//----- (100297D0) --------------------------------------------------------
char __thiscall sub_100297D0(int this, unsigned int a2)
{
  int v2; // edi@1
  char result; // al@2
  char v4; // bl@3
  SIZE_T v5; // esi@3
  LPVOID v6; // eax@7
  LPVOID v7; // [sp+8h] [bp-4h]@7

  v2 = this;
  if ( (0xFFFFFFFF / a2 & 0xFFFFFFFE) >= 2 )
  {
    v4 = 0;
    v5 = 2 * a2;
    if ( (*(_DWORD *)(this + 1028) || v5 > 0x400) && v5 > *(_DWORD *)(this + 1024) )
    {
      v6 = sub_1002ED94(v5);
      v7 = v6;
      if ( v6 )
      {
        sub_10029C6F((LPVOID *)(v2 + 1028), &v7);
        v6 = v7;
        v4 = 1;
        *(_DWORD *)(v2 + 1024) = v5;
      }
      sub_1002D7BC(v6);
      result = v4;
    }
    else
    {
      result = 1;
    }
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 12;
    result = 0;
  }
  return result;
}

//----- (10029856) --------------------------------------------------------
bool __cdecl sub_10029856(int a1, int a2, char a3, int a4)
{
  bool v4; // cl@7
  bool result; // al@9

  if ( a4 == 2 )
    goto LABEL_14;
  if ( a4 == 3 || a4 == 12 )
    return 1;
  if ( a4 == 13 )
  {
LABEL_14:
    result = 0;
  }
  else
  {
    v4 = a3 == 99 || a3 == 115;
    result = v4 == 0;
  }
  return result;
}

//----- (10029896) --------------------------------------------------------
bool __cdecl sub_10029896(char a1, int a2, __int16 a3, int a4)
{
  char v4; // cl@5
  char v5; // dl@5
  bool result; // al@10

  if ( a4 == 2 )
  {
    result = 0;
  }
  else if ( a4 == 3 || a4 == 12 || a4 == 13 )
  {
    result = 1;
  }
  else
  {
    v4 = 0;
    v5 = 1;
    if ( !(a1 & 4) )
      v5 = 0;
    if ( a3 == 99 || a3 == 115 )
      v4 = 1;
    result = v5 == v4;
  }
  return result;
}

//----- (100298E5) --------------------------------------------------------
int __thiscall sub_100298E5(int this)
{
  int v1; // esi@1
  int v2; // edi@1
  signed int v3; // eax@1
  int result; // eax@2

  v1 = this;
  v2 = *(_DWORD *)(this + 1028);
  v3 = sub_100297B8(this);
  if ( v2 )
    result = v2 + v3;
  else
    result = v1 + v3;
  return result;
}

//----- (10029903) --------------------------------------------------------
int __thiscall sub_10029903(void *this, unsigned int a2, unsigned int a3, char a4)
{
  void *v4; // esi@1
  int v5; // ecx@1
  int v6; // edi@1
  unsigned int v7; // ebx@3
  int v8; // edi@3
  int v9; // ecx@4
  char v10; // dl@6
  int v11; // eax@9
  int result; // eax@9

  v4 = this;
  v5 = (int)((char *)this + 64);
  v6 = *(_DWORD *)(v5 + 1028);
  if ( !v6 )
    v6 = v5;
  v7 = a2;
  v8 = sub_100297B8(v5) - 1 + v6;
  for ( *((_DWORD *)v4 + 13) = v8; ; --*((_DWORD *)v4 + 13) )
  {
    v9 = *((_DWORD *)v4 + 10);
    if ( v9 <= 0 && !v7 )
      break;
    v10 = v7 % a3 + 48;
    *((_DWORD *)v4 + 10) = v9 - 1;
    v7 /= a3;
    if ( v10 > 57 )
      v10 += a4 == 0 ? 39 : 7;
    **((_BYTE **)v4 + 13) = v10;
  }
  v11 = *((_DWORD *)v4 + 13);
  *((_DWORD *)v4 + 14) = v8 - v11;
  result = v11 + 1;
  *((_DWORD *)v4 + 13) = result;
  return result;
}

//----- (10029978) --------------------------------------------------------
int __thiscall sub_10029978(void *this, unsigned int a2, unsigned int a3, unsigned int a4, char a5)
{
  void *v5; // esi@1
  int v6; // ecx@1
  int v7; // edi@1
  signed int v8; // eax@3
  unsigned int v9; // edx@3
  unsigned int v10; // ebx@3
  int v11; // edi@3
  int v12; // ecx@4
  unsigned int v13; // eax@6
  char v14; // cl@6
  char v15; // cl@6
  int v16; // eax@9
  int result; // eax@9

  v5 = this;
  v6 = (int)((char *)this + 64);
  v7 = *(_DWORD *)(v6 + 1028);
  if ( !v7 )
    v7 = v6;
  v8 = sub_100297B8(v6);
  v9 = a3;
  v10 = a2;
  v11 = v8 - 1 + v7;
  for ( *((_DWORD *)v5 + 13) = v11; ; --*((_DWORD *)v5 + 13) )
  {
    v12 = *((_DWORD *)v5 + 10);
    if ( v12 <= 0 && !(v9 | v10) )
      break;
    *((_DWORD *)v5 + 10) = v12 - 1;
    v13 = sub_1000FBF0(__PAIR__(v9, v10), a4);
    v15 = v14 + 48;
    v10 = v13;
    if ( v15 > 57 )
      v15 += a5 == 0 ? 39 : 7;
    **((_BYTE **)v5 + 13) = v15;
  }
  v16 = *((_DWORD *)v5 + 13);
  *((_DWORD *)v5 + 14) = v11 - v16;
  result = v16 + 1;
  *((_DWORD *)v5 + 13) = result;
  return result;
}

//----- (10029A00) --------------------------------------------------------
char __cdecl sub_10029A00(void *a1, char a2, int a3, int a4)
{
  int i; // esi@1
  char result; // al@2

  for ( i = 0; i < a3; ++i )
  {
    result = sub_1002B28F(a1, a2, a4);
    if ( *(_DWORD *)a4 == -1 )
      break;
  }
  return result;
}

//----- (10029A2C) --------------------------------------------------------
char __cdecl sub_10029A2C(void *a1, char a2, int a3, int a4)
{
  int i; // esi@1
  char result; // al@2

  for ( i = 0; i < a3; ++i )
  {
    result = sub_1002B2D1(a1, a2, a4);
    if ( *(_DWORD *)a4 == -1 )
      break;
  }
  return result;
}

//----- (10029A5D) --------------------------------------------------------
int __thiscall sub_10029A5D(int this)
{
  *(_DWORD *)this = 0;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = 0;
  *(_DWORD *)(this + 20) = 0;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 40) = 0;
  *(_WORD *)(this + 48) = 0;
  *(_DWORD *)(this + 56) = 0;
  *(_BYTE *)(this + 60) = 0;
  *(_DWORD *)(this + 1088) = 0;
  *(_DWORD *)(this + 1092) = 0;
  return this;
}

//----- (10029AA4) --------------------------------------------------------
int __thiscall sub_10029AA4(int this)
{
  int result; // eax@1

  *(_DWORD *)this = 0;
  *(_WORD *)(this + 50) = 0;
  result = this;
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  *(_DWORD *)(this + 16) = 0;
  *(_DWORD *)(this + 20) = 0;
  *(_DWORD *)(this + 24) = 0;
  *(_DWORD *)(this + 28) = 0;
  *(_DWORD *)(this + 32) = 0;
  *(_DWORD *)(this + 36) = 0;
  *(_DWORD *)(this + 40) = 0;
  *(_BYTE *)(this + 48) = 0;
  *(_DWORD *)(this + 56) = 0;
  *(_BYTE *)(this + 60) = 0;
  *(_DWORD *)(this + 1088) = 0;
  *(_DWORD *)(this + 1092) = 0;
  return result;
}

//----- (10029AF0) --------------------------------------------------------
int __thiscall sub_10029AF0(int this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // esi@1

  v7 = this;
  sub_10029A5D(this);
  *(_DWORD *)(v7 + 1096) = *(_DWORD *)a2;
  *(_DWORD *)v7 = a3;
  *(_DWORD *)(v7 + 4) = a4;
  *(_DWORD *)(v7 + 8) = a6;
  *(_DWORD *)(v7 + 16) = a5;
  *(_DWORD *)(v7 + 20) = a7;
  return v7;
}

//----- (10029B2C) --------------------------------------------------------
int __thiscall sub_10029B2C(int this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // esi@1

  v7 = this;
  sub_10029AA4(this);
  *(_DWORD *)(v7 + 1096) = *(_DWORD *)a2;
  *(_DWORD *)v7 = a3;
  *(_DWORD *)(v7 + 4) = a4;
  *(_DWORD *)(v7 + 8) = a6;
  *(_DWORD *)(v7 + 16) = a5;
  *(_DWORD *)(v7 + 20) = a7;
  return v7;
}

//----- (10029B68) --------------------------------------------------------
int __thiscall sub_10029B68(int this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // esi@1

  v7 = this;
  sub_10029AF0(this, a2, a3, a4, a5, a6, a7);
  *(_DWORD *)(v7 + 1104) = 0;
  *(_DWORD *)(v7 + 12) = sub_1002E9D5();
  return v7;
}

//----- (10029B9D) --------------------------------------------------------
int __thiscall sub_10029B9D(int this, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // esi@1

  v7 = this;
  sub_10029B2C(this, a2, a3, a4, a5, a6, a7);
  *(_DWORD *)(v7 + 1104) = 0;
  *(_DWORD *)(v7 + 12) = sub_1002E9D5();
  return v7;
}

//----- (10029BD2) --------------------------------------------------------
int __userpurge sub_10029BD2@<eax>(int a1@<ecx>, int a2@<ebx>, int a3)
{
  int v3; // ebp@0
  int v4; // edi@1
  void *v5; // eax@2
  int v6; // eax@6
  int v7; // eax@6

  v4 = a1;
  *(_BYTE *)(a1 + 12) = 0;
  if ( a3 )
  {
    *(_DWORD *)(a1 + 4) = *(_DWORD *)a3;
    v5 = *(void **)(a3 + 4);
LABEL_5:
    *(_DWORD *)(a1 + 8) = v5;
    return v4;
  }
  if ( !dword_1007C994 )
  {
    *(_DWORD *)(a1 + 4) = off_1007A280;
    v5 = off_1007A284;
    goto LABEL_5;
  }
  v6 = sub_10030B70(a2, v3);
  *(_DWORD *)v4 = v6;
  *(_DWORD *)(v4 + 4) = *(_DWORD *)(v6 + 76);
  *(_DWORD *)(v4 + 8) = *(_DWORD *)(v6 + 72);
  sub_10030CBF(a2, v6, (int *)(v4 + 4));
  sub_10030CEC(a2, *(_DWORD *)v4, (int *)(v4 + 8));
  v7 = *(_DWORD *)(*(_DWORD *)v4 + 848);
  if ( !(v7 & 2) )
  {
    *(_DWORD *)(*(_DWORD *)v4 + 848) = v7 | 2;
    *(_BYTE *)(v4 + 12) = 1;
  }
  return v4;
}
// 1007A280: using guessed type wchar_t **off_1007A280;
// 1007A284: using guessed type void *off_1007A284;
// 1007C994: using guessed type int dword_1007C994;

//----- (10029C55) --------------------------------------------------------
void __thiscall sub_10029C55(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_1002D7BC(*(LPVOID *)(this + 1028));
  *(_DWORD *)(v1 + 1028) = 0;
}

//----- (10029C6F) --------------------------------------------------------
LPVOID *__thiscall sub_10029C6F(LPVOID *this, LPVOID *a2)
{
  LPVOID *v2; // esi@1
  LPVOID *result; // eax@1

  v2 = this;
  sub_1002D7BC(*this);
  *v2 = 0;
  *v2 = *a2;
  result = v2;
  *a2 = 0;
  return result;
}

//----- (10029C93) --------------------------------------------------------
char __cdecl sub_10029C93(int a1, int a2)
{
  int v2; // ecx@1
  char v3; // bl@1
  char result; // al@5
  int v5; // ecx@5
  char v6; // al@10
  int v7; // edx@11

  v2 = a1;
  v3 = ***(_BYTE ***)(*(_DWORD *)a2 + 136);
  while ( *(_BYTE *)v2 && *(_BYTE *)v2 != v3 )
    ++v2;
  result = *(_BYTE *)v2;
  v5 = v2 + 1;
  if ( result )
  {
    while ( 1 )
    {
      v6 = *(_BYTE *)v5;
      if ( !*(_BYTE *)v5 || v6 == 101 || v6 == 69 )
        break;
      ++v5;
    }
    v7 = v5;
    do
      --v5;
    while ( *(_BYTE *)v5 == 48 );
    if ( *(_BYTE *)v5 == v3 )
      --v5;
    do
    {
      result = *(_BYTE *)v7;
      ++v5;
      ++v7;
      *(_BYTE *)v5 = result;
    }
    while ( result );
  }
  return result;
}

//----- (10029CEA) --------------------------------------------------------
unsigned int __stdcall sub_10029CEA(char a1, int a2)
{
  int v2; // eax@2

  if ( (unsigned __int8)(a1 - 32) > 0x5Au )
    v2 = 0;
  else
    v2 = byte_100679D8[a1] & 0xF;
  return (unsigned int)(unsigned __int8)*(&byte_100679F8[9 * v2] + a2) >> 4;
}

//----- (10029D1F) --------------------------------------------------------
unsigned int __stdcall sub_10029D1F(unsigned __int16 a1, int a2)
{
  int v2; // eax@2

  if ( (unsigned __int16)(a1 - 32) > 0x5Au )
    v2 = 0;
  else
    v2 = byte_100679D8[a1] & 0xF;
  return (unsigned int)(unsigned __int8)*(&byte_100679F8[9 * v2] + a2) >> 4;
}

//----- (10029D56) --------------------------------------------------------
char __usercall sub_10029D56@<al>(int a1@<ebx>, int *a2, int a3)
{
  int *v3; // esi@1
  bool i; // zf@1
  char v5; // cl@6
  int v6; // esi@6
  char v7; // al@7
  char result; // al@7

  v3 = a2;
  for ( i = sub_10030272(a1, *(_BYTE *)a2) == 101; !i; i = sub_100300C4(a1, *(_BYTE *)v3) == 0 )
    v3 = (int *)((char *)v3 + 1);
  if ( sub_10030272(a1, *(_BYTE *)v3) == 120 )
    v3 = (int *)((char *)v3 + 2);
  v5 = *(_BYTE *)v3;
  *(_BYTE *)v3 = ***(_BYTE ***)(*(_DWORD *)a3 + 136);
  v6 = (int)((char *)v3 + 1);
  do
  {
    v7 = *(_BYTE *)v6;
    *(_BYTE *)v6 = v5;
    v5 = v7;
    result = *(_BYTE *)v6++;
  }
  while ( result );
  return result;
}

//----- (10029DB2) --------------------------------------------------------
char __thiscall sub_10029DB2(int this, int a2)
{
  int v2; // esi@1
  int v3; // edi@1
  int v4; // ebx@1
  int v5; // eax@1
  char result; // al@3
  unsigned int v7; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)(this + 12);
  v4 = *(_DWORD *)v3;
  *(_DWORD *)v3 = 0;
  v5 = *(_DWORD *)(this + 16);
  v7 = 0;
  *(_DWORD *)a2 = sub_1002D2AE((int)&v7, v4, v3, v5 - 1, (int)&v7, 10);
  if ( **(_DWORD **)(v2 + 12) == 34 || v7 < *(_DWORD *)(v2 + 16) )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)(v2 + 16) = v7;
    result = 1;
  }
  if ( !*(_DWORD *)v3 )
  {
    if ( v4 )
      *(_DWORD *)v3 = v4;
  }
  return result;
}

//----- (10029E0E) --------------------------------------------------------
char __thiscall sub_10029E0E(int this, int a2)
{
  int v2; // esi@1
  int v3; // edi@1
  int v4; // ebx@1
  int v5; // eax@1
  char result; // al@3
  unsigned int v7; // [sp+Ch] [bp-4h]@1

  v2 = this;
  v3 = *(_DWORD *)(this + 12);
  v4 = *(_DWORD *)v3;
  *(_DWORD *)v3 = 0;
  v5 = *(_DWORD *)(this + 16);
  v7 = 0;
  *(_DWORD *)a2 = sub_1002D2DA((int)&v7, v4, v3, v5 - 2, (int)&v7, 0xAu);
  if ( **(_DWORD **)(v2 + 12) == 34 || v7 < *(_DWORD *)(v2 + 16) )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)(v2 + 16) = v7;
    result = 1;
  }
  if ( !*(_DWORD *)v3 )
  {
    if ( v4 )
      *(_DWORD *)v3 = v4;
  }
  return result;
}

//----- (10029E6C) --------------------------------------------------------
signed int __usercall sub_10029E6C@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  unsigned int v5; // eax@8
  char v6; // al@10
  char v7; // al@19

  v3 = a1;
  if ( !sub_1002D236(a1 + 1096, a2, a3) )
    return -1;
  if ( !*(_DWORD *)(v3 + 16) )
  {
LABEL_4:
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(0, a3);
    return -1;
  }
  while ( 1 )
  {
    ++*(_DWORD *)(v3 + 1104);
    if ( *(_DWORD *)(v3 + 1104) == 2 )
      return *(_DWORD *)(v3 + 24);
    *(_DWORD *)(v3 + 56) = 0;
    *(_DWORD *)(v3 + 28) = 0;
LABEL_19:
    v7 = **(_BYTE **)(v3 + 16);
    *(_BYTE *)(v3 + 49) = v7;
    if ( !v7 )
    {
      ++*(_DWORD *)(v3 + 16);
      goto LABEL_21;
    }
    ++*(_DWORD *)(v3 + 16);
    if ( *(_DWORD *)(v3 + 24) >= 0 )
      break;
LABEL_21:
    if ( !sub_1002B26D(v3, 0, a3) )
      return -1;
  }
  v5 = sub_10029CEA(*(_BYTE *)(v3 + 49), *(_DWORD *)(v3 + 28));
  *(_DWORD *)(v3 + 28) = v5;
  if ( v5 == 8 )
    goto LABEL_4;
  switch ( v5 )
  {
    case 0u:
      v6 = sub_1002A13E(v3, 0, a3);
      goto LABEL_18;
    case 1u:
      *(_DWORD *)(v3 + 40) = -1;
      *(_DWORD *)(v3 + 36) = 0;
      *(_BYTE *)(v3 + 48) = 0;
      *(_DWORD *)(v3 + 32) = 0;
      *(_DWORD *)(v3 + 44) = 0;
      *(_BYTE *)(v3 + 60) = 0;
      goto LABEL_19;
    case 2u:
      v6 = sub_1002A0C4(v3);
      goto LABEL_18;
    case 3u:
      v6 = sub_1002A9E4(v3);
      goto LABEL_18;
    case 4u:
      *(_DWORD *)(v3 + 40) = 0;
      goto LABEL_19;
    case 5u:
      v6 = sub_1002A222(v3);
      goto LABEL_18;
    case 6u:
      v6 = sub_1002A273(v3, 0, a3);
      goto LABEL_18;
    case 7u:
      v6 = sub_1002A558(v3, a3);
LABEL_18:
      if ( v6 )
        goto LABEL_19;
      break;
    default:
      return -1;
  }
  return -1;
}

//----- (10029F94) --------------------------------------------------------
signed int __usercall sub_10029F94@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  unsigned int v5; // eax@8
  char v6; // al@10
  __int16 v7; // ax@19

  v3 = a1;
  if ( !sub_1002D236(a1 + 1096, a2, a3) )
    return -1;
  if ( !*(_DWORD *)(v3 + 16) )
  {
LABEL_4:
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(0, a3);
    return -1;
  }
  while ( 1 )
  {
    ++*(_DWORD *)(v3 + 1104);
    if ( *(_DWORD *)(v3 + 1104) == 2 )
      return *(_DWORD *)(v3 + 24);
    *(_DWORD *)(v3 + 56) = 0;
    *(_DWORD *)(v3 + 28) = 0;
LABEL_19:
    v7 = **(_WORD **)(v3 + 16);
    *(_WORD *)(v3 + 50) = v7;
    if ( !v7 )
    {
      *(_DWORD *)(v3 + 16) += 2;
      goto LABEL_21;
    }
    *(_DWORD *)(v3 + 16) += 2;
    if ( *(_DWORD *)(v3 + 24) >= 0 )
      break;
LABEL_21:
    if ( !sub_1002B26D(v3, 0, a3) )
      return -1;
  }
  v5 = sub_10029D1F(*(_WORD *)(v3 + 50), *(_DWORD *)(v3 + 28));
  *(_DWORD *)(v3 + 28) = v5;
  if ( v5 == 8 )
    goto LABEL_4;
  switch ( v5 )
  {
    case 0u:
      v6 = sub_1002A15D(v3, 0, a3);
      goto LABEL_18;
    case 1u:
      *(_DWORD *)(v3 + 40) = -1;
      *(_DWORD *)(v3 + 36) = 0;
      *(_BYTE *)(v3 + 48) = 0;
      *(_DWORD *)(v3 + 32) = 0;
      *(_DWORD *)(v3 + 44) = 0;
      *(_BYTE *)(v3 + 60) = 0;
      goto LABEL_19;
    case 2u:
      v6 = sub_1002A101(v3);
      goto LABEL_18;
    case 3u:
      v6 = sub_1002AA0F(v3);
      goto LABEL_18;
    case 4u:
      *(_DWORD *)(v3 + 40) = 0;
      goto LABEL_19;
    case 5u:
      v6 = sub_1002A24A(v3);
      goto LABEL_18;
    case 6u:
      v6 = sub_1002A3DC(v3, 0, a3);
      goto LABEL_18;
    case 7u:
      v6 = sub_1002A787(v3, a3);
LABEL_18:
      if ( v6 )
        goto LABEL_19;
      break;
    default:
      return -1;
  }
  return -1;
}

//----- (1002A0C4) --------------------------------------------------------
char __thiscall sub_1002A0C4(int this)
{
  switch ( *(_BYTE *)(this + 49) )
  {
    case 0x20:
      *(_DWORD *)(this + 32) |= 2u;
      break;
    case 0x23:
      *(_DWORD *)(this + 32) |= 0x20u;
      break;
    case 0x2B:
      *(_DWORD *)(this + 32) |= 1u;
      break;
    case 0x2D:
      *(_DWORD *)(this + 32) |= 4u;
      break;
    case 0x30:
      *(_DWORD *)(this + 32) |= 8u;
      break;
  }
  return 1;
}

//----- (1002A101) --------------------------------------------------------
char __thiscall sub_1002A101(int this)
{
  switch ( *(_WORD *)(this + 50) )
  {
    case 0x20:
      *(_DWORD *)(this + 32) |= 2u;
      break;
    case 0x23:
      *(_DWORD *)(this + 32) |= 0x20u;
      break;
    case 0x2B:
      *(_DWORD *)(this + 32) |= 1u;
      break;
    case 0x2D:
      *(_DWORD *)(this + 32) |= 4u;
      break;
    case 0x30:
      *(_DWORD *)(this + 32) |= 8u;
      break;
  }
  return 1;
}

//----- (1002A13E) --------------------------------------------------------
char __usercall sub_1002A13E@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  char result; // al@2

  if ( sub_1002A17C(a1, a2) )
  {
    result = 1;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a2, a3);
    result = 0;
  }
  return result;
}

//----- (1002A15D) --------------------------------------------------------
char __usercall sub_1002A15D@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  char result; // al@2

  if ( sub_1002A1A6(a1) )
  {
    result = 1;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a2, a3);
    result = 0;
  }
  return result;
}

//----- (1002A17C) --------------------------------------------------------
char __usercall sub_1002A17C@<al>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // esi@1
  char result; // al@1

  v2 = a1;
  result = sub_1002A1C1(a1, a2, 0);
  if ( result )
  {
    sub_1002B28F((void *)(v2 + 1096), *(_BYTE *)(v2 + 49), v2 + 24);
    result = 1;
  }
  return result;
}

//----- (1002A1A6) --------------------------------------------------------
char __thiscall sub_1002A1A6(int this)
{
  *(_BYTE *)(this + 60) = 1;
  sub_1002B2D1((void *)(this + 1096), *(_WORD *)(this + 50), this + 24);
  return 1;
}

//----- (1002A1C1) --------------------------------------------------------
char __userpurge sub_1002A1C1@<al>(int a1@<ecx>, int a2@<ebx>, int a3)
{
  int v3; // esi@1
  int v4; // eax@1
  char v5; // cl@1
  int v6; // ecx@2
  bool v7; // zf@2
  char result; // al@3

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 8);
  v5 = *(_BYTE *)(a1 + 49);
  *(_BYTE *)(v3 + 60) = 0;
  if ( *(_WORD *)(**(_DWORD **)v4 + 2 * (unsigned __int8)v5) & 0x8000
    && (sub_1002B28F((void *)(v3 + 1096), v5, v3 + 24),
        v6 = *(_DWORD *)(v3 + 16),
        *(_BYTE *)(v3 + 49) = *(_BYTE *)v6,
        v7 = *(_BYTE *)(v3 + 49) == 0,
        *(_DWORD *)(v3 + 16) = v6 + 1,
        v7) )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a2, 0x8000);
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (1002A222) --------------------------------------------------------
char __thiscall sub_1002A222(int this)
{
  char result; // al@2
  int v2; // eax@3

  if ( *(_BYTE *)(this + 49) == 42 )
  {
    *(_DWORD *)(this + 20) += 4;
    v2 = *(_DWORD *)(*(_DWORD *)(this + 20) - 4);
    *(_DWORD *)(this + 40) = v2;
    if ( v2 < 0 )
      *(_DWORD *)(this + 40) = -1;
    result = 1;
  }
  else
  {
    result = sub_10029DB2(this, this + 40);
  }
  return result;
}

//----- (1002A24A) --------------------------------------------------------
char __thiscall sub_1002A24A(int this)
{
  char result; // al@2
  int v2; // eax@3

  if ( *(_WORD *)(this + 50) == 42 )
  {
    *(_DWORD *)(this + 20) += 4;
    v2 = *(_DWORD *)(*(_DWORD *)(this + 20) - 4);
    *(_DWORD *)(this + 40) = v2;
    if ( v2 < 0 )
      *(_DWORD *)(this + 40) = -1;
    result = 1;
  }
  else
  {
    result = sub_10029E0E(this, this + 40);
  }
  return result;
}

//----- (1002A273) --------------------------------------------------------
char __usercall sub_1002A273@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // eax@1
  int v5; // eax@15
  int v6; // edx@20
  char v7; // al@20
  int v8; // eax@41

  LOBYTE(v3) = *(_BYTE *)(a1 + 49);
  if ( (_BYTE)v3 == 70 )
  {
    if ( !(*(_DWORD *)a1 & 8) )
    {
      *(_DWORD *)(a1 + 28) = 7;
      return sub_1002A558(a1, a3);
    }
    return 1;
  }
  if ( (_BYTE)v3 == 78 )
  {
    if ( !(*(_DWORD *)a1 & 8) )
    {
      *(_DWORD *)(a1 + 28) = 8;
LABEL_7:
      *(_DWORD *)sub_1002E9D5() = 22;
      sub_1002B787(a2, a3);
      return 0;
    }
  }
  else
  {
    if ( *(_DWORD *)(a1 + 44) )
      goto LABEL_7;
    v3 = (char)v3;
    if ( (char)v3 > 106 )
    {
      switch ( v3 )
      {
        case 108:
          v8 = *(_DWORD *)(a1 + 16);
          if ( *(_BYTE *)v8 == 108 )
          {
            *(_DWORD *)(a1 + 44) = 4;
            *(_DWORD *)(a1 + 16) = v8 + 1;
          }
          else
          {
            *(_DWORD *)(a1 + 44) = 3;
          }
          break;
        case 116:
          *(_DWORD *)(a1 + 44) = 7;
          break;
        case 119:
          *(_DWORD *)(a1 + 44) = 12;
          break;
        case 122:
          *(_DWORD *)(a1 + 44) = 6;
          break;
      }
    }
    else if ( (char)v3 == 106 )
    {
      *(_DWORD *)(a1 + 44) = 5;
    }
    else
    {
      switch ( v3 )
      {
        case 73:
          v6 = *(_DWORD *)(a1 + 16);
          v7 = *(_BYTE *)v6;
          if ( *(_BYTE *)v6 != 51 || *(_BYTE *)(v6 + 1) != 50 )
          {
            if ( v7 != 54 || *(_BYTE *)(v6 + 1) != 52 )
            {
              if ( v7 == 100 || v7 == 105 || v7 == 111 || v7 == 117 || v7 == 120 || v7 == 88 )
                *(_DWORD *)(a1 + 44) = 9;
            }
            else
            {
              *(_DWORD *)(a1 + 44) = 11;
              *(_DWORD *)(a1 + 16) = v6 + 2;
            }
          }
          else
          {
            *(_DWORD *)(a1 + 44) = 10;
            *(_DWORD *)(a1 + 16) = v6 + 2;
          }
          break;
        case 76:
          *(_DWORD *)(a1 + 44) = 8;
          break;
        case 84:
          *(_DWORD *)(a1 + 44) = 13;
          break;
        case 104:
          v5 = *(_DWORD *)(a1 + 16);
          if ( *(_BYTE *)v5 == 104 )
          {
            *(_DWORD *)(a1 + 44) = 1;
            *(_DWORD *)(a1 + 16) = v5 + 1;
          }
          else
          {
            *(_DWORD *)(a1 + 44) = 2;
          }
          break;
      }
    }
  }
  return 1;
}

//----- (1002A3DC) --------------------------------------------------------
char __usercall sub_1002A3DC@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  signed int v3; // eax@1
  int v5; // eax@15
  int v6; // edx@20
  int v7; // eax@20
  int v8; // eax@41

  v3 = *(_WORD *)(a1 + 50);
  if ( v3 == 70 )
  {
    if ( !(*(_DWORD *)a1 & 8) )
    {
      *(_DWORD *)(a1 + 28) = 7;
      return sub_1002A787(a1, a3);
    }
    return 1;
  }
  if ( v3 == 78 )
  {
    if ( !(*(_DWORD *)a1 & 8) )
    {
      *(_DWORD *)(a1 + 28) = 8;
LABEL_7:
      *(_DWORD *)sub_1002E9D5() = 22;
      sub_1002B787(a2, a3);
      return 0;
    }
  }
  else
  {
    if ( *(_DWORD *)(a1 + 44) )
      goto LABEL_7;
    if ( v3 > 106 )
    {
      switch ( v3 )
      {
        case 108:
          v8 = *(_DWORD *)(a1 + 16);
          if ( *(_WORD *)v8 == 108 )
          {
            *(_DWORD *)(a1 + 44) = 4;
            *(_DWORD *)(a1 + 16) = v8 + 2;
          }
          else
          {
            *(_DWORD *)(a1 + 44) = 3;
          }
          break;
        case 116:
          *(_DWORD *)(a1 + 44) = 7;
          break;
        case 119:
          *(_DWORD *)(a1 + 44) = 12;
          break;
        case 122:
          *(_DWORD *)(a1 + 44) = 6;
          break;
      }
    }
    else
    {
      switch ( v3 )
      {
        case 106:
          *(_DWORD *)(a1 + 44) = 5;
          break;
        case 73:
          v6 = *(_DWORD *)(a1 + 16);
          v7 = *(_WORD *)v6;
          if ( v7 != 51 || *(_WORD *)(v6 + 2) != 50 )
          {
            if ( v7 != 54 || *(_WORD *)(v6 + 2) != 52 )
            {
              if ( v7 == 100 || v7 == 105 || v7 == 111 || v7 == 117 || v7 == 120 || v7 == 88 )
                *(_DWORD *)(a1 + 44) = 9;
            }
            else
            {
              *(_DWORD *)(a1 + 44) = 11;
              *(_DWORD *)(a1 + 16) = v6 + 4;
            }
          }
          else
          {
            *(_DWORD *)(a1 + 44) = 10;
            *(_DWORD *)(a1 + 16) = v6 + 4;
          }
          break;
        case 76:
          *(_DWORD *)(a1 + 44) = 8;
          break;
        case 84:
          *(_DWORD *)(a1 + 44) = 13;
          break;
        case 104:
          v5 = *(_DWORD *)(a1 + 16);
          if ( *(_WORD *)v5 == 104 )
          {
            *(_DWORD *)(a1 + 44) = 1;
            *(_DWORD *)(a1 + 16) = v5 + 2;
          }
          else
          {
            *(_DWORD *)(a1 + 44) = 2;
          }
          break;
      }
    }
  }
  return 1;
}

//----- (1002A558) --------------------------------------------------------
char __usercall sub_1002A558@<al>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // esi@1
  char v3; // bl@1
  signed int v4; // eax@1
  char v5; // al@10
  int v7; // eax@15
  int v8; // eax@16
  int v9; // eax@33
  int v10; // eax@34
  unsigned int v11; // edx@39
  unsigned int v12; // edi@39
  char v13; // cl@47
  bool v14; // al@53
  bool v15; // al@59
  int v16; // ebx@62
  char v17; // [sp-4h] [bp-10h]@13
  __int16 v18; // [sp+8h] [bp-4h]@39
  char v19; // [sp+Ah] [bp-2h]@39

  v2 = a1;
  v3 = 1;
  v4 = *(_BYTE *)(a1 + 49);
  if ( v4 <= 100 )
  {
    if ( v4 != 100 )
    {
      if ( v4 > 88 )
      {
        v7 = v4 - 90;
        if ( !v7 )
        {
          v5 = sub_1002AA97(a1);
          goto LABEL_11;
        }
        v8 = v7 - 7;
        if ( !v8 )
          goto LABEL_31;
        if ( v8 != 2 )
          return 0;
        goto LABEL_18;
      }
      if ( v4 != 88 )
      {
        if ( v4 != 65 )
        {
          if ( v4 != 67 )
          {
            if ( v4 <= 68 )
              return 0;
            if ( v4 > 71 )
            {
              if ( v4 == 83 )
              {
LABEL_10:
                v5 = sub_1002B146(a1);
                goto LABEL_11;
              }
              return 0;
            }
            goto LABEL_31;
          }
LABEL_18:
          v5 = sub_1002AE29(a1, 0);
          goto LABEL_11;
        }
LABEL_31:
        v5 = sub_1002AB5D(a1, 1);
        goto LABEL_11;
      }
      v17 = 1;
      goto LABEL_14;
    }
    goto LABEL_28;
  }
  if ( v4 > 112 )
  {
    v9 = v4 - 115;
    if ( !v9 )
      goto LABEL_10;
    v10 = v9 - 2;
    if ( v10 )
    {
      if ( v10 != 3 )
        return 0;
      v17 = 0;
LABEL_14:
      v5 = sub_1002AF51(a1, a2, 0x10u, v17);
      goto LABEL_11;
    }
    goto LABEL_29;
  }
  if ( v4 == 112 )
  {
    v5 = sub_1002B12E(a1, a2);
    goto LABEL_11;
  }
  if ( v4 <= 103 )
    goto LABEL_31;
  if ( v4 == 105 )
  {
LABEL_28:
    *(_DWORD *)(a1 + 32) |= 0x10u;
LABEL_29:
    v5 = sub_1002AF51(a1, a2, 0xAu, 0);
    goto LABEL_11;
  }
  if ( v4 == 110 )
  {
    v5 = sub_1002B09B(a1, 1);
  }
  else
  {
    if ( v4 != 111 )
      return 0;
    v5 = sub_1002B10F(a1, a2);
  }
LABEL_11:
  if ( !v5 )
    return 0;
  if ( *(_BYTE *)(v2 + 48) )
    return 1;
  v11 = *(_DWORD *)(v2 + 32);
  v18 = 0;
  v12 = 0;
  v19 = 0;
  if ( (v11 >> 4) & 1 )
  {
    if ( (v11 >> 6) & 1 )
    {
      LOBYTE(v18) = 45;
LABEL_46:
      v12 = 1;
      goto LABEL_47;
    }
    if ( v11 & 1 )
    {
      LOBYTE(v18) = 43;
      goto LABEL_46;
    }
    if ( (v11 >> 1) & 1 )
    {
      LOBYTE(v18) = 32;
      goto LABEL_46;
    }
  }
LABEL_47:
  v13 = *(_BYTE *)(v2 + 49);
  if ( v13 != 120 && v13 != 88 || !((v11 >> 5) & 1) )
    v3 = 0;
  v14 = v13 == 97 || v13 == 65;
  if ( v3 || v14 )
  {
    *((_BYTE *)&v18 + v12) = 48;
    v15 = v13 == 88 || v13 == 65;
    *((_BYTE *)&v18 + v12 + 1) = v15 == 0 ? 120 : 88;
    v12 += 2;
  }
  v16 = *(_DWORD *)(v2 + 36) - *(_DWORD *)(v2 + 56) - v12;
  if ( !(v11 & 0xC) )
    sub_10029A00((void *)(v2 + 1096), 32, v16, v2 + 24);
  sub_1002B448((void *)(v2 + 1096), &v18, v12, v2 + 24, *(_DWORD *)(v2 + 12));
  if ( (*(_DWORD *)(v2 + 32) >> 3) & 1 && !((*(_DWORD *)(v2 + 32) >> 2) & 1) )
    sub_10029A00((void *)(v2 + 1096), 48, v16, v2 + 24);
  sub_1002B316(v2, 0);
  if ( *(_DWORD *)(v2 + 24) >= 0 )
  {
    if ( (*(_DWORD *)(v2 + 32) >> 2) & 1 )
      sub_10029A00((void *)(v2 + 1096), 32, v16, v2 + 24);
  }
  return 1;
}

//----- (1002A787) --------------------------------------------------------
char __usercall sub_1002A787@<al>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // esi@1
  int v3; // ebx@1
  signed int v4; // eax@1
  char v5; // al@10
  int v7; // eax@15
  int v8; // eax@16
  int v9; // eax@33
  int v10; // eax@34
  unsigned int v11; // edx@38
  int v12; // ecx@47
  bool v13; // ah@50
  bool v14; // al@54
  bool v15; // al@60
  int v16; // edi@63
  signed __int16 v17; // [sp-8h] [bp-1Ch]@40
  char v18; // [sp-4h] [bp-18h]@13
  int v19; // [sp+8h] [bp-Ch]@38
  __int16 v20; // [sp+Ch] [bp-8h]@38

  v2 = a1;
  v3 = 0;
  v4 = *(_WORD *)(a1 + 50);
  if ( v4 <= 100 )
  {
    if ( v4 != 100 )
    {
      if ( v4 > 88 )
      {
        v7 = v4 - 90;
        if ( !v7 )
        {
          v5 = sub_1002AAFA(a1);
          goto LABEL_11;
        }
        v8 = v7 - 7;
        if ( !v8 )
          goto LABEL_31;
        if ( v8 != 2 )
          return 0;
        goto LABEL_18;
      }
      if ( v4 != 88 )
      {
        if ( v4 != 65 )
        {
          if ( v4 != 67 )
          {
            if ( v4 <= 68 )
              return 0;
            if ( v4 > 71 )
            {
              if ( v4 == 83 )
              {
LABEL_10:
                v5 = sub_1002B1B9(a1);
                goto LABEL_11;
              }
              return 0;
            }
            goto LABEL_31;
          }
LABEL_18:
          v5 = sub_1002AEB9(a1, 0);
          goto LABEL_11;
        }
LABEL_31:
        v5 = sub_1002ACB7(a1, 0);
        goto LABEL_11;
      }
      v18 = 1;
      goto LABEL_14;
    }
    goto LABEL_28;
  }
  if ( v4 > 112 )
  {
    v9 = v4 - 115;
    if ( !v9 )
      goto LABEL_10;
    v10 = v9 - 2;
    if ( v10 )
    {
      if ( v10 != 3 )
        return 0;
      v18 = 0;
LABEL_14:
      v5 = sub_1002AF51(a1, a2, 0x10u, v18);
      goto LABEL_11;
    }
    goto LABEL_29;
  }
  if ( v4 == 112 )
  {
    v5 = sub_1002B12E(a1, a2);
    goto LABEL_11;
  }
  if ( v4 <= 103 )
    goto LABEL_31;
  if ( v4 == 105 )
  {
LABEL_28:
    *(_DWORD *)(a1 + 32) |= 0x10u;
LABEL_29:
    v5 = sub_1002AF51(a1, a2, 0xAu, 0);
    goto LABEL_11;
  }
  if ( v4 == 110 )
  {
    v5 = sub_1002B09B(a1, 0);
  }
  else
  {
    if ( v4 != 111 )
      return 0;
    v5 = sub_1002B10F(a1, a2);
  }
LABEL_11:
  if ( !v5 )
    return 0;
  if ( !*(_BYTE *)(v2 + 48) )
  {
    v11 = *(_DWORD *)(v2 + 32);
    v19 = 0;
    v20 = 0;
    if ( (v11 >> 4) & 1 )
    {
      if ( (v11 >> 6) & 1 )
      {
        v17 = 45;
LABEL_41:
        LOWORD(v19) = v17;
LABEL_46:
        v3 = 1;
        goto LABEL_47;
      }
      if ( v11 & 1 )
      {
        v17 = 43;
        goto LABEL_41;
      }
      if ( (v11 >> 1) & 1 )
      {
        LOWORD(v19) = 32;
        goto LABEL_46;
      }
    }
LABEL_47:
    v12 = *(_WORD *)(v2 + 50);
    v13 = (v12 == 120 || (_WORD)v12 == 88) && (v11 >> 5) & 1;
    v14 = v12 == 97 || (_WORD)v12 == 65;
    if ( v13 || v14 )
    {
      *((_WORD *)&v19 + v3) = 48;
      v15 = (_WORD)v12 == 88 || (_WORD)v12 == 65;
      *((_WORD *)&v19 + v3 + 1) = v15 == 0 ? 120 : 88;
      v3 += 2;
    }
    v16 = *(_DWORD *)(v2 + 36) - *(_DWORD *)(v2 + 56) - v3;
    if ( !(v11 & 0xC) )
      sub_10029A2C((void *)(v2 + 1096), 32, v16, v2 + 24);
    sub_1002B4DB((void *)(v2 + 1096), &v19, v3, v2 + 24, *(_DWORD *)(v2 + 12));
    if ( (*(_DWORD *)(v2 + 32) >> 3) & 1 && !((*(_DWORD *)(v2 + 32) >> 2) & 1) )
      sub_10029A2C((void *)(v2 + 1096), 48, v16, v2 + 24);
    sub_1002B3BD(v2, 0);
    if ( *(_DWORD *)(v2 + 24) >= 0 )
    {
      if ( (*(_DWORD *)(v2 + 32) >> 2) & 1 )
        sub_10029A2C((void *)(v2 + 1096), 32, v16, v2 + 24);
    }
  }
  return 1;
}

//----- (1002A9E4) --------------------------------------------------------
char __thiscall sub_1002A9E4(int this)
{
  char result; // al@2
  int v2; // eax@3

  if ( *(_BYTE *)(this + 49) == 42 )
  {
    *(_DWORD *)(this + 20) += 4;
    v2 = *(_DWORD *)(*(_DWORD *)(this + 20) - 4);
    *(_DWORD *)(this + 36) = v2;
    if ( v2 < 0 )
    {
      *(_DWORD *)(this + 32) |= 4u;
      *(_DWORD *)(this + 36) = -*(_DWORD *)(this + 36);
    }
    result = 1;
  }
  else
  {
    result = sub_10029DB2(this, this + 36);
  }
  return result;
}

//----- (1002AA0F) --------------------------------------------------------
char __thiscall sub_1002AA0F(int this)
{
  char result; // al@2
  int v2; // eax@3

  if ( *(_WORD *)(this + 50) == 42 )
  {
    *(_DWORD *)(this + 20) += 4;
    v2 = *(_DWORD *)(*(_DWORD *)(this + 20) - 4);
    *(_DWORD *)(this + 36) = v2;
    if ( v2 < 0 )
    {
      *(_DWORD *)(this + 32) |= 4u;
      *(_DWORD *)(this + 36) = -*(_DWORD *)(this + 36);
    }
    result = 1;
  }
  else
  {
    result = sub_10029E0E(this, this + 36);
  }
  return result;
}

//----- (1002AA3B) --------------------------------------------------------
signed int __cdecl sub_1002AA3B(int a1)
{
  signed int result; // eax@3
  signed int v2; // [sp-4h] [bp-4h]@2

  switch ( a1 )
  {
    case 0:
    case 3:
    case 6:
    case 7:
    case 9:
    case 10:
      v2 = 4;
      goto LABEL_3;
    case 1:
      return 1;
    case 2:
      v2 = 2;
      goto LABEL_3;
    case 4:
    case 5:
    case 11:
      v2 = 8;
LABEL_3:
      result = v2;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (1002AA97) --------------------------------------------------------
char __thiscall sub_1002AA97(int this)
{
  int v1; // esi@1
  int v2; // edi@1
  int v3; // ebx@2
  bool v4; // al@3
  bool v5; // zf@3
  unsigned int v6; // eax@3

  v1 = this;
  *(_DWORD *)(v1 + 20) += 4;
  v2 = *(_DWORD *)(*(_DWORD *)(this + 20) - 4);
  if ( !v2 || (v3 = *(_DWORD *)(v2 + 4)) == 0 )
  {
    *(_DWORD *)(this + 52) = "(null)";
    *(_DWORD *)(this + 56) = 6;
    goto LABEL_7;
  }
  v4 = sub_10029856(*(_DWORD *)this, *(_DWORD *)(this + 4), *(_BYTE *)(this + 49), *(_DWORD *)(this + 44));
  *(_DWORD *)(v1 + 52) = v3;
  v5 = v4 == 0;
  v6 = *(_WORD *)v2;
  if ( v5 )
  {
    *(_DWORD *)(v1 + 56) = v6;
LABEL_7:
    *(_BYTE *)(v1 + 60) = 0;
    return 1;
  }
  *(_DWORD *)(v1 + 56) = v6 >> 1;
  *(_BYTE *)(v1 + 60) = 1;
  return 1;
}

//----- (1002AAFA) --------------------------------------------------------
char __thiscall sub_1002AAFA(int this)
{
  int v1; // esi@1
  int v2; // edi@1
  int v3; // ebx@2
  bool v4; // al@3
  bool v5; // zf@3
  unsigned int v6; // eax@3

  v1 = this;
  *(_DWORD *)(v1 + 20) += 4;
  v2 = *(_DWORD *)(*(_DWORD *)(this + 20) - 4);
  if ( !v2 || (v3 = *(_DWORD *)(v2 + 4)) == 0 )
  {
    *(_DWORD *)(this + 52) = "(null)";
    *(_DWORD *)(this + 56) = 6;
    goto LABEL_7;
  }
  v4 = sub_10029896(*(_DWORD *)this, *(_DWORD *)(this + 4), *(_WORD *)(this + 50), *(_DWORD *)(this + 44));
  *(_DWORD *)(v1 + 52) = v3;
  v5 = v4 == 0;
  v6 = *(_WORD *)v2;
  if ( v5 )
  {
    *(_DWORD *)(v1 + 56) = v6;
LABEL_7:
    *(_BYTE *)(v1 + 60) = 0;
    return 1;
  }
  *(_DWORD *)(v1 + 56) = v6 >> 1;
  *(_BYTE *)(v1 + 60) = 1;
  return 1;
}

//----- (1002AB5D) --------------------------------------------------------
char __usercall sub_1002AB5D@<al>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // esi@1
  int v3; // eax@1
  char v4; // al@2
  char v5; // al@7
  int v6; // eax@12
  int v7; // ecx@14
  signed int v8; // eax@14
  int v9; // ebx@14
  int v10; // ST24_4@16
  int v11; // ST20_4@16
  int v12; // ST1C_4@16
  unsigned int v13; // ST18_4@16
  signed int v14; // ST14_4@16
  int v15; // ST10_4@16
  int v16; // ST0C_4@16
  signed int v17; // eax@16
  char v18; // al@19
  int v19; // eax@23
  const char *v20; // edx@25
  const char v21; // al@25
  char result; // al@30
  int v23; // [sp-4h] [bp-14h]@10
  int v24; // [sp+8h] [bp-8h]@14
  int v25; // [sp+Ch] [bp-4h]@14

  v2 = a1;
  *(_DWORD *)(v2 + 32) |= 0x10u;
  v3 = *(_DWORD *)(a1 + 40);
  if ( v3 >= 0 )
  {
    if ( !v3 )
    {
      v5 = *(_BYTE *)(a1 + 49);
      if ( v5 == 103 || v5 == 71 )
        *(_DWORD *)(a1 + 40) = 1;
    }
  }
  else
  {
    v4 = *(_BYTE *)(a1 + 49);
    if ( v4 == 97 || v4 == 65 )
      *(_DWORD *)(a1 + 40) = 13;
    else
      *(_DWORD *)(a1 + 40) = 6;
  }
  v23 = a2;
  if ( !sub_100297D0(a1 + 64, *(_DWORD *)(a1 + 40) + 349) )
    *(_DWORD *)(v2 + 40) = sub_100297B8(v2 + 64) - 349;
  v6 = *(_DWORD *)(v2 + 1092);
  if ( !v6 )
    v6 = v2 + 64;
  v24 = 0;
  v25 = 0;
  *(_DWORD *)(v2 + 52) = v6;
  *(_DWORD *)(v2 + 20) += 8;
  v7 = *(_DWORD *)(v2 + 20);
  v24 = *(_DWORD *)(v7 - 8);
  v25 = *(_DWORD *)(v7 - 4);
  v8 = sub_100297B8(v2 + 64);
  v9 = *(_DWORD *)(v2 + 1092);
  if ( !v9 )
    v9 = v2 + 64;
  v10 = *(_DWORD *)(v2 + 8);
  v11 = *(_DWORD *)(v2 + 4);
  v12 = *(_DWORD *)v2;
  v13 = *(_DWORD *)(v2 + 40);
  v14 = *(_BYTE *)(v2 + 49);
  v15 = v8;
  v16 = sub_100298E5(v2 + 64);
  v17 = sub_100297B8(v2 + 64);
  sub_100315E4(v9, (int)&v24, v9, v17, v16, v15, v14, v13, v12, v11, v10);
  if ( (*(_DWORD *)(v2 + 32) >> 5) & 1 && !*(_DWORD *)(v2 + 40) )
    sub_10029D56(v23, *(int **)(v2 + 52), *(_DWORD *)(v2 + 8));
  v18 = *(_BYTE *)(v2 + 49);
  if ( (v18 == 103 || v18 == 71) && !((*(_DWORD *)(v2 + 32) >> 5) & 1) )
    sub_10029C93(*(_DWORD *)(v2 + 52), *(_DWORD *)(v2 + 8));
  v19 = *(_DWORD *)(v2 + 52);
  if ( *(_BYTE *)v19 == 45 )
  {
    *(_DWORD *)(v2 + 32) |= 0x40u;
    *(_DWORD *)(v2 + 52) = v19 + 1;
  }
  v20 = *(const char **)(v2 + 52);
  v21 = *v20;
  if ( *v20 == 105 || v21 == 73 || v21 == 110 || v21 == 78 )
    *(_BYTE *)(v2 + 49) = 115;
  result = 1;
  *(_DWORD *)(v2 + 56) = strlen(v20);
  return result;
}
// 1002AB5D: could not find valid save-restore pair for ebx

//----- (1002ACB7) --------------------------------------------------------
char __usercall sub_1002ACB7@<al>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // esi@1
  int v3; // eax@1
  int v4; // eax@2
  __int16 v5; // ax@7
  int v6; // eax@12
  int v7; // ecx@14
  signed int v8; // eax@14
  int v9; // ebx@14
  int v10; // ST24_4@16
  int v11; // ST20_4@16
  int v12; // ST1C_4@16
  unsigned int v13; // ST18_4@16
  signed int v14; // ST14_4@16
  int v15; // ST10_4@16
  int v16; // ST0C_4@16
  signed int v17; // eax@16
  __int16 v18; // ax@19
  int v19; // eax@23
  const char *v20; // edx@25
  const char v21; // al@25
  char result; // al@30
  int v23; // [sp-4h] [bp-14h]@10
  int v24; // [sp+8h] [bp-8h]@14
  int v25; // [sp+Ch] [bp-4h]@14

  v2 = a1;
  *(_DWORD *)(v2 + 32) |= 0x10u;
  v3 = *(_DWORD *)(a1 + 40);
  if ( v3 >= 0 )
  {
    if ( !v3 )
    {
      v5 = *(_WORD *)(a1 + 50);
      if ( v5 == 103 || v5 == 71 )
        *(_DWORD *)(a1 + 40) = 1;
    }
  }
  else
  {
    v4 = *(_WORD *)(a1 + 50);
    if ( v4 == 97 || v4 == 65 )
      *(_DWORD *)(a1 + 40) = 13;
    else
      *(_DWORD *)(a1 + 40) = 6;
  }
  v23 = a2;
  if ( !sub_100297D0(a1 + 64, *(_DWORD *)(a1 + 40) + 349) )
    *(_DWORD *)(v2 + 40) = sub_100297B8(v2 + 64) - 349;
  v6 = *(_DWORD *)(v2 + 1092);
  if ( !v6 )
    v6 = v2 + 64;
  v24 = 0;
  v25 = 0;
  *(_DWORD *)(v2 + 52) = v6;
  *(_DWORD *)(v2 + 20) += 8;
  v7 = *(_DWORD *)(v2 + 20);
  v24 = *(_DWORD *)(v7 - 8);
  v25 = *(_DWORD *)(v7 - 4);
  v8 = sub_100297B8(v2 + 64);
  v9 = *(_DWORD *)(v2 + 1092);
  if ( !v9 )
    v9 = v2 + 64;
  v10 = *(_DWORD *)(v2 + 8);
  v11 = *(_DWORD *)(v2 + 4);
  v12 = *(_DWORD *)v2;
  v13 = *(_DWORD *)(v2 + 40);
  v14 = *(_BYTE *)(v2 + 50);
  v15 = v8;
  v16 = sub_100298E5(v2 + 64);
  v17 = sub_100297B8(v2 + 64);
  sub_100315E4(v9, (int)&v24, v9, v17, v16, v15, v14, v13, v12, v11, v10);
  if ( (*(_DWORD *)(v2 + 32) >> 5) & 1 && !*(_DWORD *)(v2 + 40) )
    sub_10029D56(v23, *(int **)(v2 + 52), *(_DWORD *)(v2 + 8));
  v18 = *(_WORD *)(v2 + 50);
  if ( (v18 == 103 || v18 == 71) && !((*(_DWORD *)(v2 + 32) >> 5) & 1) )
    sub_10029C93(*(_DWORD *)(v2 + 52), *(_DWORD *)(v2 + 8));
  v19 = *(_DWORD *)(v2 + 52);
  if ( *(_BYTE *)v19 == 45 )
  {
    *(_DWORD *)(v2 + 32) |= 0x40u;
    *(_DWORD *)(v2 + 52) = v19 + 1;
  }
  v20 = *(const char **)(v2 + 52);
  v21 = *v20;
  if ( *v20 == 105 || v21 == 73 || v21 == 110 || v21 == 78 )
    *(_WORD *)(v2 + 50) = 115;
  result = 1;
  *(_DWORD *)(v2 + 56) = strlen(v20);
  return result;
}
// 1002ACB7: could not find valid save-restore pair for ebx

//----- (1002AE29) --------------------------------------------------------
char __thiscall sub_1002AE29(int this, int a2)
{
  int v2; // esi@1
  int v3; // edi@1
  CHAR *v4; // ebx@2
  WCHAR v5; // ST0C_2@4
  int v6; // eax@4
  int v7; // ecx@6

  v2 = this;
  v3 = this + 64;
  if ( sub_10029856(*(_DWORD *)this, *(_DWORD *)(this + 4), *(_BYTE *)(this + 49), *(_DWORD *)(this + 44)) )
  {
    *(_DWORD *)(v2 + 20) += 4;
    v4 = *(CHAR **)(v2 + 1092);
    if ( !v4 )
      v4 = (CHAR *)(v2 + 64);
    v5 = *(_WORD *)(*(_DWORD *)(v2 + 20) - 4);
    v6 = sub_100297B8(v2 + 64);
    if ( sub_100304D7(v2 + 56, v4, v6, v5) )
      *(_BYTE *)(v2 + 48) = 1;
  }
  else
  {
    v7 = *(_DWORD *)(v2 + 1092);
    if ( !v7 )
      v7 = v2 + 64;
    *(_DWORD *)(v2 + 20) += 4;
    *(_BYTE *)v7 = *(_BYTE *)(*(_DWORD *)(v2 + 20) - 4);
    *(_DWORD *)(v2 + 56) = 1;
  }
  if ( *(_DWORD *)(v2 + 1092) )
    v3 = *(_DWORD *)(v3 + 1028);
  *(_DWORD *)(v2 + 52) = v3;
  return 1;
}

//----- (1002AEB9) --------------------------------------------------------
char __thiscall sub_1002AEB9(int this, int a2)
{
  int v2; // esi@1
  __int16 v3; // bx@1
  int v4; // edi@1
  WCHAR *v5; // ecx@2
  int v6; // eax@6
  char result; // al@11
  CHAR MultiByteStr; // [sp+Ch] [bp-4h]@2
  char v9; // [sp+Dh] [bp-3h]@2

  v2 = this;
  *(_BYTE *)(this + 60) = 1;
  *(_DWORD *)(v2 + 20) += 4;
  v3 = *(_WORD *)(*(_DWORD *)(this + 20) - 4);
  v4 = this + 64;
  if ( sub_10029896(*(_DWORD *)this, *(_DWORD *)(this + 4), *(_WORD *)(this + 50), *(_DWORD *)(this + 44)) )
  {
    v6 = *(_DWORD *)(v2 + 1092);
    if ( !v6 )
      v6 = v2 + 64;
    *(_WORD *)v6 = v3;
  }
  else
  {
    v5 = *(WCHAR **)(v2 + 1092);
    MultiByteStr = v3;
    v9 = 0;
    if ( !v5 )
      v5 = (WCHAR *)(v2 + 64);
    if ( sub_100302A2(v5, &MultiByteStr, *(_DWORD *)(**(_DWORD **)(v2 + 8) + 4), *(_DWORD *)(v2 + 8)) < 0 )
      *(_BYTE *)(v2 + 48) = 1;
  }
  if ( *(_DWORD *)(v2 + 1092) )
    v4 = *(_DWORD *)(v4 + 1028);
  *(_DWORD *)(v2 + 52) = v4;
  result = 1;
  *(_DWORD *)(v2 + 56) = 1;
  return result;
}

//----- (1002AF51) --------------------------------------------------------
char __userpurge sub_1002AF51@<al>(int a1@<ecx>, int a2@<edi>, unsigned int a3, char a4)
{
  int v4; // esi@1
  int v5; // eax@1
  int v6; // ebx@1
  int v8; // eax@6
  unsigned int v9; // ecx@6
  __int64 v10; // rax@6
  bool v11; // zf@7
  unsigned int v12; // eax@10
  int v13; // eax@10
  unsigned int v14; // eax@13
  int v15; // eax@13

  v4 = a1;
  v5 = sub_1002AA3B(*(_DWORD *)(a1 + 44));
  v6 = v5;
  if ( v5 == 1 )
  {
    v14 = *(_DWORD *)(v4 + 32);
    *(_DWORD *)(v4 + 20) += 4;
    v11 = ((v14 >> 4) & 1) == 0;
    v15 = *(_DWORD *)(v4 + 20);
    if ( v11 )
      LODWORD(v10) = *(_BYTE *)(v10 - 4);
    else
      LODWORD(v10) = *(_BYTE *)(v10 - 4);
    goto LABEL_16;
  }
  if ( v5 == 2 )
  {
    v12 = *(_DWORD *)(v4 + 32);
    *(_DWORD *)(v4 + 20) += 4;
    v11 = ((v12 >> 4) & 1) == 0;
    v13 = *(_DWORD *)(v4 + 20);
    if ( v11 )
      LODWORD(v10) = *(_WORD *)(v10 - 4);
    else
      LODWORD(v10) = *(_WORD *)(v10 - 4);
LABEL_16:
    v10 = (signed int)v10;
    v9 = v10;
    goto LABEL_17;
  }
  if ( v5 == 4 )
  {
    LODWORD(v10) = *(_DWORD *)(v4 + 32);
    *(_DWORD *)(v4 + 20) += 4;
    v11 = (((unsigned int)v10 >> 4) & 1) == 0;
    LODWORD(v10) = *(_DWORD *)(v4 + 20);
    if ( v11 )
    {
      v9 = *(_DWORD *)(v10 - 4);
      HIDWORD(v10) = 0;
      goto LABEL_17;
    }
    LODWORD(v10) = *(_DWORD *)(v10 - 4);
    goto LABEL_16;
  }
  if ( v5 != 8 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(v5, a2);
    return 0;
  }
  v8 = *(_DWORD *)(v4 + 32);
  *(_DWORD *)(v4 + 20) += 8;
  LODWORD(v10) = *(_DWORD *)(v4 + 20);
  v9 = *(_DWORD *)(v10 - 8);
  HIDWORD(v10) = *(_DWORD *)(v10 - 4);
LABEL_17:
  if ( (*(_DWORD *)(v4 + 32) >> 4) & 1 && v10 < 0 )
  {
    v9 = -v9;
    HIDWORD(v10) = (unsigned __int64)-(signed __int64)__PAIR__(HIDWORD(v10), v9) >> 32;
    *(_DWORD *)(v4 + 32) |= 0x40u;
  }
  if ( *(_DWORD *)(v4 + 40) >= 0 )
  {
    *(_DWORD *)(v4 + 32) &= 0xFFFFFFF7;
    if ( *(_DWORD *)(v4 + 40) > 512 )
      *(_DWORD *)(v4 + 40) = 512;
  }
  else
  {
    *(_DWORD *)(v4 + 40) = 1;
  }
  if ( !__PAIR__(v9, HIDWORD(v10)) )
    *(_DWORD *)(v4 + 32) &= 0xFFFFFFDF;
  if ( v6 == 8 )
    sub_10029978((void *)v4, v9, HIDWORD(v10), a3, a4);
  else
    sub_10029903((void *)v4, v9, a3, a4);
  if ( (*(_DWORD *)(v4 + 32) >> 7) & 1 && (!*(_DWORD *)(v4 + 56) || **(_BYTE **)(v4 + 52) != 48) )
  {
    --*(_DWORD *)(v4 + 52);
    **(_BYTE **)(v4 + 52) = 48;
    ++*(_DWORD *)(v4 + 56);
  }
  return 1;
}

//----- (1002B09B) --------------------------------------------------------
char __usercall sub_1002B09B@<al>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // esi@1
  int v3; // edi@1
  int v5; // eax@3
  int v6; // eax@4
  int v7; // eax@5

  v2 = a1;
  *(_DWORD *)(v2 + 20) += 4;
  v3 = *(_DWORD *)(*(_DWORD *)(a1 + 20) - 4);
  if ( !sub_1003172E() )
    goto LABEL_2;
  v5 = sub_1002AA3B(*(_DWORD *)(v2 + 44)) - 1;
  if ( v5 )
  {
    v6 = v5 - 1;
    if ( v6 )
    {
      v7 = v6 - 2;
      if ( v7 )
      {
        if ( v7 != 4 )
        {
LABEL_2:
          *(_DWORD *)sub_1002E9D5() = 22;
          sub_1002B787(a2, v3);
          return 0;
        }
        *(_QWORD *)v3 = *(_DWORD *)(v2 + 24);
      }
      else
      {
        *(_DWORD *)v3 = *(_DWORD *)(v2 + 24);
      }
    }
    else
    {
      *(_WORD *)v3 = *(_WORD *)(v2 + 24);
    }
  }
  else
  {
    *(_BYTE *)v3 = *(_BYTE *)(v2 + 24);
  }
  *(_BYTE *)(v2 + 48) = 1;
  return 1;
}

//----- (1002B10F) --------------------------------------------------------
char __usercall sub_1002B10F@<al>(int a1@<ecx>, int a2@<edi>)
{
  if ( (*(_DWORD *)(a1 + 32) >> 5) & 1 )
    *(_DWORD *)(a1 + 32) |= 0x80u;
  return sub_1002AF51(a1, a2, 8u, 0);
}

//----- (1002B12E) --------------------------------------------------------
char __usercall sub_1002B12E@<al>(int a1@<ecx>, int a2@<edi>)
{
  *(_DWORD *)(a1 + 40) = 8;
  *(_DWORD *)(a1 + 44) = 10;
  return sub_1002AF51(a1, a2, 0x10u, 1);
}

//----- (1002B146) --------------------------------------------------------
char __thiscall sub_1002B146(int this)
{
  int v1; // esi@1
  signed int v2; // edi@1
  int v3; // ebx@1
  int v4; // ST08_4@6
  int v5; // eax@6

  v1 = this;
  *(_DWORD *)(v1 + 20) += 4;
  v2 = *(_DWORD *)(this + 40);
  v3 = *(_DWORD *)(*(_DWORD *)(this + 20) - 4);
  *(_DWORD *)(this + 52) = v3;
  if ( v2 == -1 )
    v2 = 0x7FFFFFFF;
  if ( sub_10029856(*(_DWORD *)this, *(_DWORD *)(this + 4), *(_BYTE *)(this + 49), *(_DWORD *)(this + 44)) )
  {
    if ( !v3 )
      *(_DWORD *)(v1 + 52) = L"(null)";
    v4 = *(_DWORD *)(v1 + 52);
    *(_BYTE *)(v1 + 60) = 1;
    v5 = sub_1003061B(v4, v2);
  }
  else
  {
    if ( !v3 )
      *(_DWORD *)(v1 + 52) = "(null)";
    v5 = sub_100304F4(*(_DWORD *)(v1 + 52), v2);
  }
  *(_DWORD *)(v1 + 56) = v5;
  return 1;
}
// 10067A5C: using guessed type wchar_t aNull_0[7];

//----- (1002B1B9) --------------------------------------------------------
char __thiscall sub_1002B1B9(int this)
{
  int v1; // esi@1
  signed int v2; // edi@1
  int v3; // ebx@1
  int v4; // ST08_4@6
  int v5; // eax@6

  v1 = this;
  *(_DWORD *)(v1 + 20) += 4;
  v2 = *(_DWORD *)(this + 40);
  v3 = *(_DWORD *)(*(_DWORD *)(this + 20) - 4);
  *(_DWORD *)(this + 52) = v3;
  if ( v2 == -1 )
    v2 = 0x7FFFFFFF;
  if ( sub_10029896(*(_DWORD *)this, *(_DWORD *)(this + 4), *(_WORD *)(this + 50), *(_DWORD *)(this + 44)) )
  {
    if ( !v3 )
      *(_DWORD *)(v1 + 52) = L"(null)";
    v4 = *(_DWORD *)(v1 + 52);
    *(_BYTE *)(v1 + 60) = 1;
    v5 = sub_1003061B(v4, v2);
  }
  else
  {
    if ( !v3 )
      *(_DWORD *)(v1 + 52) = "(null)";
    v5 = sub_1002B22D(v1, v2, 0);
  }
  *(_DWORD *)(v1 + 56) = v5;
  return 1;
}
// 10067A5C: using guessed type wchar_t aNull_0[7];

//----- (1002B22D) --------------------------------------------------------
int __thiscall sub_1002B22D(int this, int a2, int a3)
{
  int v3; // esi@1
  int i; // edx@1

  v3 = 0;
  for ( i = *(_DWORD *)(this + 52); v3 < a2; ++v3 )
  {
    if ( !*(_BYTE *)i )
      break;
    if ( *(_WORD *)(***(_DWORD ***)(this + 8) + 2 * *(_BYTE *)i) & 0x8000 )
      ++i;
    ++i;
  }
  return v3;
}

//----- (1002B26D) --------------------------------------------------------
char __usercall sub_1002B26D@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  char result; // al@3

  if ( *(_DWORD *)(a1 + 28) && *(_DWORD *)(a1 + 28) != 7 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a2, a3);
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (1002B28F) --------------------------------------------------------
char __thiscall sub_1002B28F(void *this, char a2, int a3)
{
  void *v3; // edx@1
  int v4; // ecx@1
  char result; // al@5

  v3 = this;
  v4 = *(_DWORD *)this;
  if ( *(_DWORD *)(v4 + 8) == *(_DWORD *)(v4 + 4) )
  {
    if ( *(_BYTE *)(v4 + 12) )
      ++*(_DWORD *)a3;
    else
      *(_DWORD *)a3 = -1;
    result = *(_BYTE *)(*(_DWORD *)v3 + 12);
  }
  else
  {
    ++*(_DWORD *)a3;
    ++*(_DWORD *)(*(_DWORD *)v3 + 8);
    *(_BYTE *)(**(_DWORD **)v3)++ = a2;
    result = 1;
  }
  return result;
}

//----- (1002B2D1) --------------------------------------------------------
char __thiscall sub_1002B2D1(void *this, __int16 a2, int a3)
{
  void *v3; // edx@1
  int v4; // ecx@1
  char result; // al@5

  v3 = this;
  v4 = *(_DWORD *)this;
  if ( *(_DWORD *)(v4 + 8) == *(_DWORD *)(v4 + 4) )
  {
    if ( *(_BYTE *)(v4 + 12) )
      ++*(_DWORD *)a3;
    else
      *(_DWORD *)a3 = -1;
    result = *(_BYTE *)(*(_DWORD *)v3 + 12);
  }
  else
  {
    ++*(_DWORD *)a3;
    ++*(_DWORD *)(*(_DWORD *)v3 + 8);
    ***(_WORD ***)v3 = a2;
    **(_DWORD **)v3 += 2;
    result = 1;
  }
  return result;
}

//----- (1002B316) --------------------------------------------------------
char __thiscall sub_1002B316(int this, int a2)
{
  int v2; // esi@1
  int v3; // eax@2
  WCHAR *v4; // edi@3
  int v5; // ebx@3
  WCHAR v6; // ax@4
  int v8; // [sp+Ch] [bp-10h]@4
  CHAR MultiByteStr; // [sp+10h] [bp-Ch]@4

  v2 = this;
  if ( *(_BYTE *)(this + 60) && (v3 = *(_DWORD *)(this + 56), v3 > 0) )
  {
    v4 = *(WCHAR **)(this + 52);
    v5 = 0;
    if ( v3 )
    {
      while ( 1 )
      {
        v6 = *v4;
        ++v4;
        v8 = 0;
        if ( sub_100304D7((int)&v8, &MultiByteStr, 6, v6) || !v8 )
          break;
        sub_1002B448((void *)(v2 + 1096), &MultiByteStr, v8, v2 + 24, *(_DWORD *)(v2 + 12));
        ++v5;
        if ( v5 == *(_DWORD *)(v2 + 56) )
          return 1;
      }
      *(_DWORD *)(v2 + 24) = -1;
    }
  }
  else
  {
    sub_1002B448(
      (void *)(this + 1096),
      *(const void **)(this + 52),
      *(_DWORD *)(this + 56),
      this + 24,
      *(_DWORD *)(this + 12));
  }
  return 1;
}

//----- (1002B3BD) --------------------------------------------------------
char __thiscall sub_1002B3BD(int this, int a2)
{
  int v2; // esi@1
  int v3; // eax@2
  const CHAR *v4; // ebx@3
  int v5; // edi@3
  int v7; // [sp+Ch] [bp-8h]@4
  WCHAR WideCharStr[2]; // [sp+10h] [bp-4h]@4

  v2 = this;
  if ( *(_BYTE *)(this + 60) || (v3 = *(_DWORD *)(this + 56), v3 <= 0) )
  {
    sub_1002B4DB(
      (void *)(this + 1096),
      *(const void **)(this + 52),
      *(_DWORD *)(this + 56),
      this + 24,
      *(_DWORD *)(this + 12));
  }
  else
  {
    v4 = *(const CHAR **)(this + 52);
    v5 = 0;
    if ( v3 )
    {
      while ( 1 )
      {
        WideCharStr[0] = 0;
        v7 = sub_100302A2(WideCharStr, v4, *(_DWORD *)(**(_DWORD **)(v2 + 8) + 4), *(_DWORD *)(v2 + 8));
        if ( v7 <= 0 )
          break;
        sub_1002B2D1((void *)(v2 + 1096), WideCharStr[0], v2 + 24);
        v4 += v7;
        ++v5;
        if ( v5 == *(_DWORD *)(v2 + 56) )
          return 1;
      }
      *(_DWORD *)(v2 + 24) = -1;
    }
  }
  return 1;
}

//----- (1002B448) --------------------------------------------------------
unsigned int __thiscall sub_1002B448(void *this, const void *a2, unsigned int a3, unsigned int a4, int a5)
{
  void *v5; // eax@1
  int v6; // ecx@1
  int v7; // eax@1
  int v8; // esi@1
  unsigned int result; // eax@3
  unsigned int v10; // esi@5
  void *v11; // [sp+8h] [bp-8h]@1
  int v12; // [sp+Ch] [bp-4h]@1

  v5 = this;
  v11 = this;
  v6 = *(_DWORD *)a5;
  *(_DWORD *)a5 = 0;
  v7 = *(_DWORD *)v5;
  v12 = v6;
  v8 = *(_DWORD *)(v7 + 4);
  if ( *(_DWORD *)(v7 + 8) == v8 )
  {
    if ( !*(_BYTE *)(v7 + 12) )
    {
      result = a4;
      *(_DWORD *)a4 = -1;
      goto LABEL_13;
    }
    result = a3;
    *(_DWORD *)a4 += a3;
  }
  else
  {
    v10 = v8 - *(_DWORD *)(v7 + 8);
    if ( v10 >= a3 )
      v10 = a3;
    sub_100278E0(*(void **)v7, a2, v10);
    **(_DWORD **)v11 += v10;
    *(_DWORD *)(*(_DWORD *)v11 + 8) += v10;
    result = a4;
    if ( *(_BYTE *)(*(_DWORD *)v11 + 12) )
    {
      *(_DWORD *)a4 += a3;
    }
    else if ( v10 == a3 )
    {
      *(_DWORD *)a4 += v10;
    }
    else
    {
      *(_DWORD *)a4 = -1;
    }
  }
  v6 = v12;
LABEL_13:
  if ( !*(_DWORD *)a5 )
  {
    if ( v6 )
      *(_DWORD *)a5 = v6;
  }
  return result;
}

//----- (1002B4DB) --------------------------------------------------------
int __thiscall sub_1002B4DB(void *this, const void *a2, int a3, int a4, int a5)
{
  void *v5; // eax@1
  int v6; // ecx@1
  int v7; // edx@1
  int v8; // edi@1
  int result; // eax@3
  int v10; // edi@5
  void *v11; // [sp+8h] [bp-8h]@1
  int v12; // [sp+Ch] [bp-4h]@1

  v5 = this;
  v11 = this;
  v6 = *(_DWORD *)a5;
  *(_DWORD *)a5 = 0;
  v7 = *(_DWORD *)v5;
  v12 = v6;
  v8 = *(_DWORD *)(*(_DWORD *)v5 + 4);
  if ( *(_DWORD *)(*(_DWORD *)v5 + 8) == v8 )
  {
    if ( !*(_BYTE *)(v7 + 12) )
    {
      result = a4;
      *(_DWORD *)a4 = -1;
      goto LABEL_13;
    }
    result = a3;
    *(_DWORD *)a4 += a3;
  }
  else
  {
    v10 = v8 - *(_DWORD *)(v7 + 8);
    if ( v10 >= (unsigned int)a3 )
      v10 = a3;
    sub_100278E0(*(void **)v7, a2, 2 * v10);
    **(_DWORD **)v11 += 2 * v10;
    *(_DWORD *)(*(_DWORD *)v11 + 8) += v10;
    result = a4;
    if ( *(_BYTE *)(*(_DWORD *)v11 + 12) )
    {
      *(_DWORD *)a4 += a3;
    }
    else if ( v10 == a3 )
    {
      *(_DWORD *)a4 += v10;
    }
    else
    {
      *(_DWORD *)a4 = -1;
    }
  }
  v6 = v12;
LABEL_13:
  if ( !*(_DWORD *)a5 )
  {
    if ( v6 )
      *(_DWORD *)a5 = v6;
  }
  return result;
}

//----- (1002B575) --------------------------------------------------------
signed int __usercall sub_1002B575@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int *a5, int a6, int a7, int a8, int a9)
{
  return sub_100296C6(a1, a2, a3, a4, a5, a6, a7, a8, a9);
}

//----- (1002B599) --------------------------------------------------------
signed int __usercall sub_1002B599@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int *a5, int a6, int a7, int a8, int a9)
{
  return sub_1002973E(a1, a2, a3, a4, a5, a6, a7, a8, a9);
}

//----- (1002B5BD) --------------------------------------------------------
void __usercall sub_1002B5BD(int a1@<ebx>, int a2@<edi>, int a3@<esi>, int a4, int a5, int a6)
{
  int v6; // ecx@3
  int v7; // edx@3
  unsigned int v8; // et0@3
  BOOL v9; // edi@3
  struct _EXCEPTION_POINTERS ExceptionInfo; // [sp+4h] [bp-328h]@3
  int v11; // [sp+Ch] [bp-320h]@3
  int v12; // [sp+10h] [bp-31Ch]@3
  int v13; // [sp+18h] [bp-314h]@3
  int v14; // [sp+5Ch] [bp-2D0h]@3
  __int16 v15; // [sp+E8h] [bp-244h]@3
  __int16 v16; // [sp+ECh] [bp-240h]@3
  __int16 v17; // [sp+F0h] [bp-23Ch]@3
  __int16 v18; // [sp+F4h] [bp-238h]@3
  int v19; // [sp+F8h] [bp-234h]@3
  int v20; // [sp+FCh] [bp-230h]@3
  int v21; // [sp+100h] [bp-22Ch]@3
  int v22; // [sp+104h] [bp-228h]@3
  int v23; // [sp+108h] [bp-224h]@3
  int *v24; // [sp+10Ch] [bp-220h]@3
  int v25; // [sp+110h] [bp-21Ch]@3
  int v26; // [sp+114h] [bp-218h]@3
  __int16 v27; // [sp+118h] [bp-214h]@3
  unsigned int v28; // [sp+11Ch] [bp-210h]@3
  void **v29; // [sp+120h] [bp-20Ch]@3
  __int16 v30; // [sp+124h] [bp-208h]@3
  int savedregs; // [sp+32Ch] [bp+0h]@3
  int retaddr; // [sp+330h] [bp+4h]@3

  if ( a4 != -1 )
    sub_1000FF9A();
  sub_10028330(&v11, 0, 0x50u);
  sub_10028330(&v14, 0, 0x2CCu);
  ExceptionInfo.ExceptionRecord = (PEXCEPTION_RECORD)&v11;
  ExceptionInfo.ContextRecord = (PCONTEXT)&v14;
  v24 = &v14;
  v23 = v6;
  v22 = v7;
  v21 = a1;
  v20 = a3;
  v19 = a2;
  v30 = __SS__;
  v27 = __CS__;
  v18 = __DS__;
  v17 = __ES__;
  v16 = __FS__;
  v15 = __GS__;
  v8 = __readeflags();
  v28 = v8;
  v26 = retaddr;
  v29 = (void **)&retaddr;
  v14 = 65537;
  v25 = savedregs;
  v11 = a5;
  v12 = a6;
  v13 = retaddr;
  v9 = IsDebuggerPresent();
  SetUnhandledExceptionFilter(0);
  if ( !UnhandledExceptionFilter(&ExceptionInfo) && !v9 && a4 != -1 )
    sub_1000FF9A();
}

//----- (1002B6F8) --------------------------------------------------------
int __usercall sub_1002B6F8@<eax>(int a1@<edx>, int a2)
{
  return sub_100333F3((unsigned int)&dword_1007C6F4, a1, a2);
}
// 1007C6F4: using guessed type int dword_1007C6F4;

//----- (1002B70C) --------------------------------------------------------
int __usercall sub_1002B70C@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax@1
  int (__cdecl *v8)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // esi@2
  int v10; // [sp-14h] [bp-1Ch]@3
  int v11; // [sp-10h] [bp-18h]@3
  int v12; // [sp-Ch] [bp-14h]@3
  int v13; // [sp-8h] [bp-10h]@3
  int v14; // [sp-4h] [bp-Ch]@3

  v7 = sub_10030BF4();
  if ( v7 && (v8 = *(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(v7 + 860)) != 0 )
  {
    v14 = a7;
    v13 = a6;
    v12 = a5;
    v11 = a4;
    v10 = a3;
  }
  else
  {
    v14 = a7;
    v13 = a6;
    v12 = a5;
    v8 = (int (__cdecl *)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))__ROR4__(
                                                                    dword_1007C6F4 ^ __security_cookie,
                                                                    __security_cookie & 0x1F);
    v11 = a4;
    v10 = a3;
    if ( !v8 )
    {
      sub_1002B7B4(a1, a2);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_1002B787);
    }
  }
  __guard_check_icall_fptr(v8);
  return v8(v10, v11, v12, v13, v14);
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);
// 1007C6F4: using guessed type int dword_1007C6F4;

//----- (1002B787) --------------------------------------------------------
int __usercall sub_1002B787@<eax>(int a1@<ebx>, int a2@<edi>)
{
  return sub_1002B70C(a1, a2, 0, 0, 0, 0, 0);
}

//----- (1002B797) --------------------------------------------------------
void __usercall __noreturn sub_1002B797(int a1@<ebx>, int a2@<edi>)
{
  sub_1002B70C(a1, a2, 0, 0, 0, 0, 0);
  sub_1002B7B4(a1, a2);
  __debugbreak();
  JUMPOUT(*(_DWORD *)sub_1002B7B4);
}

//----- (1002B7B4) --------------------------------------------------------
BOOL __usercall sub_1002B7B4@<eax>(int a1@<ebx>, int a2@<edi>)
{
  HANDLE v2; // eax@3

  if ( IsProcessorFeaturePresent(0x17u) )
    __fastfail(5u);
  sub_1002B5BD(a1, a2, -1073740777, 2, -1073740777, 1);
  v2 = GetCurrentProcess();
  return TerminateProcess(v2, 0xC0000417);
}

//----- (1002B84A) --------------------------------------------------------
void __usercall sub_1002B84A(int a1@<ebp>)
{
  sub_1002D92E(*(_DWORD *)(a1 + 8));
}

//----- (1002B854) --------------------------------------------------------
int __usercall sub_1002B854@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  signed __int64 v3; // rax@1

  LODWORD(v3) = sub_1002B87F(a1, a2, a3);
  if ( v3 > 0x7FFFFFFF )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    LODWORD(v3) = -1;
  }
  return v3;
}

//----- (1002B87F) --------------------------------------------------------
int __usercall sub_1002B87F@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  signed int v4; // esi@3
  int v5; // eax@5
  int v6; // edx@5
  int v7; // ebx@5
  int v8; // edi@5
  __int64 v9; // rax@9
  int v10; // esi@9
  int v11; // eax@14
  int v12; // ecx@15
  int v13; // edi@15
  int v14; // [sp+0h] [bp-10h]@9
  int v15; // [sp+4h] [bp-Ch]@9
  unsigned int v16; // [sp+8h] [bp-8h]@5
  char v17; // [sp+Fh] [bp-1h]@9

  if ( !a3 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return -1;
  }
  v4 = sub_1002F4CB(a1, a2, a3);
  if ( *(_DWORD *)(a3 + 8) < 0 )
    *(_DWORD *)(a3 + 8) = 0;
  v5 = sub_10031CE2(a1);
  v7 = v6;
  v8 = v5;
  v16 = v5;
  if ( v6 <= 0 && v6 < 0 )
    return -1;
  if ( !(*(_DWORD *)(a3 + 12) & 0xC0) )
    return v5 - *(_DWORD *)(a3 + 8);
  v15 = v4 >> 6;
  v14 = 2 * (v4 & 0x3F);
  v17 = BYTE1((*(&lpCriticalSection + (v4 >> 6)))[v14 + 1].LockSemaphore);
  v9 = *(_DWORD *)a3 - *(_DWORD *)(a3 + 4);
  v10 = *(_DWORD *)a3 - *(_DWORD *)(a3 + 4);
  if ( !(*(_DWORD *)(a3 + 12) & 3) )
  {
    if ( (*(_DWORD *)(a3 + 12) >> 2) & 1 )
    {
LABEL_23:
      v11 = a3;
      goto LABEL_24;
    }
    *(_DWORD *)sub_1002E9D5() = 22;
    return -1;
  }
  if ( v17 == 1 )
  {
    v8 = v16;
    if ( BYTE1((*(&lpCriticalSection + v15))[v14 + 1].SpinCount) & 2 )
      return sub_1002BB98(v15, v7, v16, a3, v16, (DWORD *)v7);
  }
  if ( !((unsigned int)(*(&lpCriticalSection + v15))[v14 + 1].LockSemaphore & 0x80) )
    goto LABEL_23;
  v11 = a3;
  v8 = v16;
  if ( (*(_DWORD *)a3 - *(_DWORD *)(a3 + 4)) & (unsigned int)~((*(_DWORD *)a3 - (unsigned __int64)*(_DWORD *)(a3 + 4)) >> 32) )
  {
    v12 = *(_DWORD *)(a3 + 4);
    v13 = 0;
    do
    {
      if ( *(_BYTE *)v12 == 10 )
        HIDWORD(v9) = (__PAIR__(HIDWORD(v9), v10++) + 1) >> 32;
      ++v12;
      ++v13;
    }
    while ( v13 != ((*(_DWORD *)a3 - *(_DWORD *)(a3 + 4)) & (unsigned int)~((*(_DWORD *)a3
                                                                           - (unsigned __int64)*(_DWORD *)(a3 + 4)) >> 32)) );
    v8 = v16;
  }
LABEL_24:
  if ( v7 | v8 )
  {
    if ( *(_DWORD *)(v11 + 12) & 1 )
      return sub_1002BA14(v7, v8, a3, __PAIR__(v7, v8), __PAIR__(HIDWORD(v9), v10));
    if ( v17 == 1 )
      v10 = sub_1003B5A0(__PAIR__(HIDWORD(v9), v10), 2u, 0);
    v10 += v8;
  }
  return v10;
}

//----- (1002BA14) --------------------------------------------------------
int __usercall sub_1002BA14@<eax>(int a1@<ebx>, int a2@<edi>, int a3, __int64 a4, unsigned __int64 a5)
{
  __int64 v5; // rax@4
  int v6; // ebx@5
  int v7; // esi@5
  __int64 v8; // rax@6
  int v9; // edx@7
  int v10; // ecx@8
  bool v11; // zf@12
  int v12; // eax@25
  unsigned int v13; // edx@25
  unsigned int v14; // edi@25
  int v15; // esi@25
  __int64 v16; // rax@25
  int v18; // [sp+8h] [bp-18h]@1
  int v19; // [sp+Ch] [bp-14h]@3
  unsigned int v20; // [sp+10h] [bp-10h]@1
  signed int v21; // [sp+14h] [bp-Ch]@1
  int v22; // [sp+14h] [bp-Ch]@7
  unsigned int v23; // [sp+18h] [bp-8h]@1

  v21 = sub_1002F4CB(a1, a2, a3);
  v23 = 2;
  v18 = (int)*(&lpCriticalSection + (v21 >> 6));
  v20 = 48 * (v21 & 0x3F);
  if ( *(_BYTE *)(v18 + v20 + 41) != 1 )
    v23 = 1;
  v19 = *(_DWORD *)(a3 + 8);
  if ( v19 )
  {
    v6 = (unsigned __int64)(v19 + (signed __int64)(*(_DWORD *)a3 - *(_DWORD *)(a3 + 4))) >> 32;
    v7 = v19 + *(_DWORD *)a3 - *(_DWORD *)(a3 + 4);
    if ( *(_BYTE *)(v18 + v20 + 40) & 0x80 )
    {
      LODWORD(v8) = sub_10031CE2(v6);
      if ( v8 == a4 )
      {
        v22 = 0;
        *(_DWORD *)(a3 + 4);
        v9 = (unsigned int)(v7 + *(_DWORD *)(a3 + 4)) >= *(_DWORD *)(a3 + 4) ? v7 : 0;
        if ( (unsigned int)(v7 + *(_DWORD *)(a3 + 4)) >= *(_DWORD *)(a3 + 4) ? v7 : 0 )
        {
          v10 = *(_DWORD *)(a3 + 4);
          do
          {
            if ( *(_BYTE *)v10 == 10 )
              v6 = (__PAIR__((unsigned int)v6, v7++) + 1) >> 32;
            ++v10;
            ++v22;
          }
          while ( v22 != v9 );
        }
        v11 = ((*(_DWORD *)(a3 + 12) >> 5) & 1) == 0;
      }
      else
      {
        if ( (HIDWORD(v8) & sub_10031CE2(v6)) == -1 )
        {
          LODWORD(v5) = -1;
          return v5;
        }
        if ( v6 > 0
          || v6 >= 0 && (unsigned int)v7 > 0x200
          || !((*(_DWORD *)(a3 + 12) >> 6) & 1)
          || (*(_WORD *)(a3 + 12) >> 8) & 1 )
        {
          v6 = (unsigned __int64)*(_DWORD *)(a3 + 24) >> 32;
          v7 = *(_DWORD *)(a3 + 24);
        }
        else
        {
          v7 = 512;
          v6 = 0;
        }
        v11 = ((unsigned int)(*(&lpCriticalSection + (v21 >> 6)))[v20 / 0x18 + 1].LockSemaphore & 4) == 0;
      }
      if ( !v11 )
        v6 = (__PAIR__((unsigned int)v6, v7++) + 1) >> 32;
    }
    v12 = sub_1003B5A0(__PAIR__(v6, v7), v23, 0);
    v14 = v13;
    v15 = v12;
    LODWORD(v16) = sub_1003B5A0(a5, v23, 0);
    return a4 + v16 - __PAIR__(v14, v15);
  }
  LODWORD(v5) = a4;
  return v5;
}

//----- (1002BB98) --------------------------------------------------------
int __usercall sub_1002BB98@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4, unsigned int a5, DWORD *a6)
{
  int v6; // ebx@1
  int v7; // eax@2
  unsigned int v8; // edx@2
  int v9; // edi@2
  int v10; // ecx@2
  int v11; // eax@2
  int v12; // edx@2
  int v13; // ecx@2
  int v14; // edx@5
  unsigned int v15; // edx@10
  char *v16; // edi@10
  unsigned int v17; // ecx@10
  unsigned int v18; // esi@10
  unsigned int v20; // [sp+0h] [bp-1018h]@2
  DWORD NumberOfBytesRead; // [sp+8h] [bp-1010h]@4
  int v22; // [sp+Ch] [bp-100Ch]@2
  int v23; // [sp+10h] [bp-1008h]@2
  char Buffer[4072]; // [sp+14h] [bp-1004h]@4
  unsigned __int64 v25; // [sp+FFCh] [bp-1Ch]@2
  DWORD *v26; // [sp+1004h] [bp-14h]@2
  int v27; // [sp+1008h] [bp-10h]@2
  int v28; // [sp+100Ch] [bp-Ch]@2
  int v29; // [sp+1014h] [bp-4h]@19
  int savedregs; // [sp+1018h] [bp+0h]@19

  sub_1003B650(a1);
  v6 = sub_1002F4CB(a2, a3, a4);
  if ( *(_DWORD *)(a4 + 8) )
  {
    v7 = *(_DWORD *)a4 - *(_DWORD *)(a4 + 4);
    v28 = a3;
    v23 = sub_1003B5A0(v7, 2u, 0);
    v20 = v8;
    v9 = 48 * (v6 & 0x3F);
    v27 = 0;
    v10 = (int)*(&lpCriticalSection + (v6 >> 6));
    v26 = *(DWORD **)(v10 + v9 + 36);
    HIDWORD(v25) = *(_DWORD *)(v10 + v9 + 32);
    LODWORD(v25) = v6;
    v11 = sub_10031CE2(v6);
    v13 = (int)*(&lpCriticalSection + (v6 >> 6));
    v22 = v11;
    if ( v11 == *(_DWORD *)(v13 + v9 + 32) && v12 == *(_DWORD *)(v13 + v9 + 36) )
    {
      v27 = 0;
      v26 = &NumberOfBytesRead;
      HIDWORD(v25) = 4096;
      LODWORD(v25) = Buffer;
      if ( ReadFile(*(HANDLE *)(v13 + v9 + 24), Buffer, 0x1000u, &NumberOfBytesRead, 0) )
      {
        v27 = 0;
        v26 = a6;
        v25 = __PAIR__(a5, v6);
        sub_10031CE2(v6);
        if ( (v14 > 0 || v14 >= 0) && ((v20 & 0x80000000) != 0 || (signed int)v20 <= 0 && v23 <= NumberOfBytesRead) )
        {
          v15 = 0;
          v16 = &Buffer[NumberOfBytesRead];
          v17 = (unsigned int)Buffer;
          v18 = 0;
          if ( v23 || v20 )
          {
            do
            {
              if ( v17 >= (unsigned int)v16 )
                break;
              if ( *(_BYTE *)v17 == 13 )
              {
                if ( v17 < (unsigned int)(v16 - 1) && *(_BYTE *)(v17 + 1) == 10 )
                  ++v17;
              }
              else
              {
                v17 += byte_1007A2C0[*(_BYTE *)v17];
              }
              v15 = (__PAIR__(v15, v18++) + 1) >> 32;
              ++v17;
            }
            while ( __PAIR__(v15, v18) != __PAIR__(v20, v23) );
          }
        }
      }
    }
  }
  return sub_1000FB0D((unsigned int)&savedregs ^ v29);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);
// 1003B650: using guessed type int __thiscall sub_1003B650(_DWORD);
// 1002BB98: using guessed type char Buffer[4072];

//----- (1002BD33) --------------------------------------------------------
int __usercall sub_1002BD33@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  return sub_1002B87F(a1, a2, a3);
}

//----- (1002BD3E) --------------------------------------------------------
int __usercall sub_1002BD3E@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  int v3; // edx@2
  int v4; // ecx@2
  int v6; // ebp@1
  int savedregs; // [sp+1Ch] [bp+0h]@0

  v6 = savedregs;
  sub_1000FFB0((int)&unk_10076D58, 12);
  if ( a3 )
  {
    sub_1002D91A(a3);
    sub_1002B854(a1, a2, a3);
    sub_1002B84A(v6);
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
  }
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002BD49) --------------------------------------------------------
signed int __cdecl sub_1002BD49(__int64 a1, __int64 a2, int a3)
{
  int v3; // edi@1
  signed int result; // eax@1
  signed int v5; // ecx@1

  v3 = (unsigned __int64)(a1 - a2) >> 32;
  result = 0;
  v5 = 1;
  if ( SHIDWORD(a1) < 0 == SHIDWORD(a2) < 0 )
    goto LABEL_10;
  if ( v3 > 0 || v3 >= 0 )
    v5 = 0;
  if ( SHIDWORD(a1) < 0 == v5 )
  {
LABEL_10:
    *(_DWORD *)a3 = a1 - a2;
    *(_DWORD *)(a3 + 4) = v3;
  }
  else
  {
    *(_DWORD *)a3 = -1;
    *(_DWORD *)(a3 + 4) = -1;
    result = -2147024362;
  }
  return result;
}

//----- (1002BDCA) --------------------------------------------------------
int __usercall sub_1002BDCA@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // edx@2
  int v4; // ecx@2
  int v5; // esi@3

  sub_1000FFB0((int)&unk_10076D78, 12);
  if ( !*(_DWORD *)(a2 + 8) || (v5 = *(_DWORD *)(a2 + 20)) != 0 && v5 != 1 && v5 != 2 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a3);
  }
  else
  {
    *(_DWORD *)(a2 - 28) = -1;
    sub_1002D91A(*(_DWORD *)(a2 + 8));
    *(_DWORD *)(a2 - 4) = 0;
    *(_DWORD *)(a2 - 28) = sub_1002BF2A(*(_DWORD *)(a2 + 8), *(LARGE_INTEGER *)(a2 + 12), v5);
    *(_DWORD *)(a2 - 4) = -2;
    sub_1002BE47(a2);
  }
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002BE47) --------------------------------------------------------
void __usercall sub_1002BE47(int a1@<ebp>)
{
  sub_1002D92E(*(_DWORD *)(a1 + 8));
}

//----- (1002BE51) --------------------------------------------------------
char __usercall sub_1002BE51@<al>(int a1@<ebx>, int a2@<edi>, int a3, __int64 a4, int a5)
{
  char result; // al@2
  int v6; // edx@6
  int v7; // eax@6
  int v8; // ecx@6
  __int64 v9; // rax@9
  int v10; // esi@11
  __int64 v11; // rax@15
  int v12; // edi@16

  if ( a5 == 2 || !(*(_DWORD *)(a3 + 12) & 0x4C0) || *(_DWORD *)(a3 + 12) & 6 )
    return 0;
  if ( *(_DWORD *)(a3 + 8) < 0 )
    return 0;
  v6 = *(_DWORD *)(a3 + 16);
  v7 = 48 * (*(_DWORD *)(a3 + 16) & 0x3F);
  v8 = (int)*(&lpCriticalSection + (v6 >> 6));
  if ( *(_BYTE *)(v8 + v7 + 40) & 0x80 || *(_BYTE *)(v8 + v7 + 41) )
    return 0;
  if ( a5 )
  {
    v10 = a3;
  }
  else
  {
    LODWORD(v9) = sub_10031CFD(a1, a2, v6, 0i64, 1u);
    if ( SHIDWORD(v9) <= 0 && SHIDWORD(v9) < 0 )
      return 0;
    v10 = a3;
    if ( sub_1002BD49(a4, v9 - *(_DWORD *)(a3 + 8), (int)&a4) < 0 )
      return 0;
  }
  v11 = *(_DWORD *)(v10 + 4) - *(_DWORD *)v10;
  if ( SHIDWORD(v11) > SHIDWORD(a4) )
    return 0;
  v12 = a4;
  if ( SHIDWORD(v11) >= SHIDWORD(a4) && (unsigned int)v11 > (unsigned int)a4 )
    return 0;
  if ( a4 > *(_DWORD *)(v10 + 8) )
    return 0;
  result = 1;
  *(_DWORD *)v10 += a4;
  *(_DWORD *)(a3 + 8) -= v12;
  return result;
}

//----- (1002BF2A) --------------------------------------------------------
DWORD __cdecl sub_1002BF2A(int a1, LARGE_INTEGER liDistanceToMove, int dwMoveMethod)
{
  DWORD result; // eax@2
  DWORD v4; // esi@3
  int v5; // edi@3
  int v6; // ebx@3
  __int64 v7; // rax@5
  int v8; // edx@6
  int v9; // ecx@6

  if ( (*(_DWORD *)(a1 + 12) >> 13) & 1 )
  {
    _InterlockedAnd((volatile signed __int32 *)(a1 + 12), 0xFFFFFFF7);
    v4 = dwMoveMethod;
    v5 = liDistanceToMove.HighPart;
    v6 = liDistanceToMove.LowPart;
    if ( sub_1002BE51(liDistanceToMove.LowPart, liDistanceToMove.HighPart, a1, liDistanceToMove.QuadPart, dwMoveMethod) )
      goto LABEL_15;
    if ( dwMoveMethod == 1 )
    {
      LODWORD(v7) = sub_1002BD33(liDistanceToMove.LowPart, liDistanceToMove.HighPart, a1);
      v5 = (unsigned __int64)(v7 + *(_QWORD *)&liDistanceToMove) >> 32;
      v6 = v7 + liDistanceToMove.LowPart;
      v4 = 0;
    }
    sub_1002EA60(v6, a1);
    v9 = *(_DWORD *)(a1 + 4);
    *(_DWORD *)(a1 + 8) = 0;
    *(_DWORD *)a1 = v9;
    if ( (*(_DWORD *)(a1 + 12) >> 2) & 1 )
    {
      _InterlockedAnd((volatile signed __int32 *)(a1 + 12), 0xFFFFFFFC);
    }
    else if ( (*(_BYTE *)(a1 + 12) & 0x41) == 65 && !((*(_WORD *)(a1 + 12) >> 8) & 1) )
    {
      *(_DWORD *)(a1 + 24) = 512;
    }
    result = v8 & sub_10031CFD(v6, v5, *(_DWORD *)(a1 + 16), (LARGE_INTEGER)__PAIR__(v5, v6), v4);
    if ( result != -1 )
LABEL_15:
      result = 0;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    result = -1;
  }
  return result;
}

//----- (1002C003) --------------------------------------------------------
int __usercall sub_1002C003@<eax>(int a1@<ebx>, int a2@<edi>)
{
  int v2; // ebp@0

  return sub_1002BDCA(a1, v2, a2);
}

//----- (1002C01E) --------------------------------------------------------
int __usercall sub_1002C01E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@1
  int v4; // edx@2
  int v5; // ecx@2
  signed int v7; // edi@4
  volatile signed __int32 *v8; // esi@4
  struct _RTL_CRITICAL_SECTION *v9; // edx@6

  sub_1000FFB0((int)&unk_10076D98, 12);
  v3 = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(a2 - 28) = v3;
  if ( v3 )
  {
    v7 = sub_1002F4CB(a1, a3, v3);
    sub_1002D91A(v3);
    *(_DWORD *)(a2 - 4) = 0;
    sub_1002EA60(0, v3);
    *(_DWORD *)v3 = *(_DWORD *)(v3 + 4);
    *(_DWORD *)(v3 + 8) = 0;
    v8 = (volatile signed __int32 *)(v3 + 12);
    _InterlockedAnd(v8, 0xFFFFFFE7);
    if ( v7 == -1 || v7 == -2 )
      v9 = (struct _RTL_CRITICAL_SECTION *)&unk_1007A290;
    else
      v9 = &(*(&lpCriticalSection + (v7 >> 6)))[2 * (v7 & 0x3F)];
    LOBYTE(v9[1].LockSemaphore) &= 0xFDu;
    if ( ((volatile unsigned __int32)*v8 >> 2) & 1 )
      _InterlockedAnd(v8, 0xFFFFFFFC);
    if ( sub_10031CD7(0, v7, v7, 0i64) == -1 )
      _InterlockedOr(v8, 0x10u);
    *(_DWORD *)(a2 - 4) = -2;
    sub_1002C0E2(a2);
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a3);
  }
  return sub_1000FFF6(v5, v4);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002C0E2) --------------------------------------------------------
void __usercall sub_1002C0E2(int a1@<ebp>)
{
  sub_1002D92E(*(_DWORD *)(a1 - 28));
}

//----- (1002C0F1) --------------------------------------------------------
unsigned int __usercall sub_1002C0F1@<eax>(int a1@<ebx>, void *a2, unsigned int a3, unsigned int a4, unsigned __int64 a5)
{
  int v5; // edi@3
  int v7; // ecx@8
  unsigned int v8; // edx@16
  bool i; // zf@16
  unsigned int v10; // eax@18
  unsigned int v11; // eax@25
  int v12; // ST0C_4@31
  int v13; // eax@31
  int v14; // eax@31
  signed int v15; // eax@34
  unsigned int v16; // [sp-4h] [bp-24h]@43
  unsigned int v17; // [sp+Ch] [bp-14h]@18
  signed int v18; // [sp+Ch] [bp-14h]@26
  volatile signed __int32 *v19; // [sp+10h] [bp-10h]@13
  unsigned int v20; // [sp+14h] [bp-Ch]@14
  unsigned int v21; // [sp+18h] [bp-8h]@38
  LPWSTR lpWideCharStr; // [sp+1Ch] [bp-4h]@16

  if ( !a4 || !(_DWORD)a5 )
    return 0;
  v5 = (int)a2;
  if ( !a2 )
    goto LABEL_49;
  v7 = HIDWORD(a5);
  a1 = a3;
  if ( a5 > 0xFFFFFFFF / a4 )
  {
    if ( a3 != -1 )
    {
      sub_10028330(a2, 0, a3);
      v7 = HIDWORD(a5);
    }
    if ( !v7 || (unsigned int)a5 > 0xFFFFFFFF / a4 )
    {
LABEL_49:
      *(_DWORD *)sub_1002E9D5() = 22;
      goto LABEL_5;
    }
  }
  v19 = (volatile signed __int32 *)(v7 + 12);
  if ( *(_DWORD *)(v7 + 12) & 0x4C0 )
    v20 = *(_DWORD *)(v7 + 24);
  else
    v20 = 4096;
  v8 = a3;
  lpWideCharStr = (LPWSTR)a2;
  v5 = a5 * a4;
  for ( i = (_DWORD)a5 * a4 == 0; ; i = v5 == 0 )
  {
    v21 = v8;
    if ( i )
      return a5;
    if ( *(_DWORD *)(v7 + 12) & 0x4C0 )
    {
      v10 = *(_DWORD *)(v7 + 8);
      v17 = v10;
      if ( v10 )
      {
        if ( (v10 & 0x80000000) != 0 )
          goto LABEL_43;
        if ( v5 < v10 )
        {
          v10 = v5;
          v17 = v5;
        }
        if ( v10 > v8 )
          goto LABEL_40;
        sub_100343A9(a3, v5, lpWideCharStr, v8, *(_DWORD *)v7, v10);
        v7 = HIDWORD(a5);
        v5 -= v17;
        lpWideCharStr = (LPWSTR)((char *)lpWideCharStr + v17);
        *(_DWORD *)(v7 + 8) -= v17;
        *(_DWORD *)v7 += v17;
        v8 = v21 - v17;
        continue;
      }
    }
    if ( v5 < v20 )
      break;
    v11 = 0x7FFFFFFF;
    if ( (unsigned int)v5 <= 0x7FFFFFFF )
    {
      v11 = v5;
      v18 = v5;
    }
    else
    {
      v18 = 0x7FFFFFFF;
    }
    if ( v20 )
      v11 = v18 - v11 % v20;
    if ( v11 > v8 )
      goto LABEL_40;
    v12 = v11;
    v13 = sub_1002F4CB(a3, v5, v7);
    v14 = sub_10032313(v5, v13, lpWideCharStr, v12);
    if ( !v14 )
    {
      v16 = 8;
      goto LABEL_44;
    }
    if ( v14 < 0 )
    {
LABEL_43:
      v16 = 16;
LABEL_44:
      _InterlockedOr(v19, v16);
      return ((unsigned int)a5 * a4 - v5) / a4;
    }
    v5 -= v14;
    lpWideCharStr = (LPWSTR)((char *)lpWideCharStr + v14);
    v8 = v21 - v14;
    v7 = HIDWORD(a5);
LABEL_37:
    ;
  }
  v15 = sub_10032849(a3, v5, v7);
  if ( v15 == -1 )
    return ((unsigned int)a5 * a4 - v5) / a4;
  if ( v21 )
  {
    *(_BYTE *)lpWideCharStr = v15;
    v7 = HIDWORD(a5);
    --v5;
    lpWideCharStr = (LPWSTR)((char *)lpWideCharStr + 1);
    v8 = v21 - 1;
    v20 = *(_DWORD *)(HIDWORD(a5) + 24);
    goto LABEL_37;
  }
LABEL_40:
  if ( a3 != -1 )
    sub_10028330(a2, 0, a3);
  *(_DWORD *)sub_1002E9D5() = 34;
LABEL_5:
  sub_1002B787(a1, v5);
  return 0;
}

//----- (1002C2BD) --------------------------------------------------------
int __usercall sub_1002C2BD@<eax>(int a1@<ebx>, int a2@<edi>)
{
  int v2; // ebp@0

  return sub_1002C2DA(a1, v2, a2);
}

//----- (1002C2DA) --------------------------------------------------------
int __usercall sub_1002C2DA@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // edx@1
  int v4; // ecx@1
  int v5; // esi@3
  unsigned __int64 v7; // ST0C_8@8

  sub_1000FFB0((int)&unk_10076DB8, 12);
  if ( *(_DWORD *)(a2 + 16) && *(_DWORD *)(a2 + 20) )
  {
    v5 = *(_DWORD *)(a2 + 24);
    if ( v5 )
    {
      *(_DWORD *)(a2 - 28) = 0;
      sub_1002D91A(v5);
      *(_DWORD *)(a2 - 4) = 0;
      HIDWORD(v7) = v5;
      LODWORD(v7) = *(_DWORD *)(a2 + 20);
      *(_DWORD *)(a2 - 28) = sub_1002C0F1(a1, *(void **)(a2 + 8), *(_DWORD *)(a2 + 12), *(_DWORD *)(a2 + 16), v7);
      *(_DWORD *)(a2 - 4) = -2;
      sub_1002C365();
    }
    else
    {
      if ( *(_DWORD *)(a2 + 12) != -1 )
        sub_10028330(*(void **)(a2 + 8), 0, *(_DWORD *)(a2 + 12));
      *(_DWORD *)sub_1002E9D5() = 22;
      sub_1002B787(a1, a3);
    }
  }
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002C35F) --------------------------------------------------------
void __usercall sub_1002C35F(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // edi@1

  v1 = *(_DWORD *)(a1 + 24);
  v2 = *(_DWORD *)(a1 - 28);
  sub_1002C365();
}

//----- (1002C365) --------------------------------------------------------
void sub_1002C365()
{
  int v0; // [sp+0h] [bp-4h]@0

  sub_1002D92E(v0);
}

//----- (1002C36D) --------------------------------------------------------
LPVOID __cdecl sub_1002C36D(SIZE_T dwBytes)
{
  return sub_1002ED94(dwBytes);
}

//----- (1002C378) --------------------------------------------------------
void __usercall __noreturn StartAddress(int a1@<ebx>, int a2@<ebp>)
{
  int v2; // edi@1
  DWORD v3; // eax@2
  void (__cdecl *v4)(_DWORD); // esi@5
  int v5; // ST00_4@5

  sub_1003B680((int)&unk_10076DD8, 16);
  v2 = *(_DWORD *)(a2 + 8);
  if ( !v2 )
  {
    v3 = GetLastError();
    ExitThread(v3);
  }
  *(_DWORD *)(sub_10030B70(a1, a2) + 864) = v2;
  if ( sub_10032CCD() )
    *(_BYTE *)(v2 + 16) = sub_10032C0C(1) == 0;
  *(_DWORD *)(a2 - 4) = 0;
  v4 = *(void (__cdecl **)(_DWORD))v2;
  v5 = *(_DWORD *)(v2 + 4);
  __guard_check_icall_fptr(*(void (__cdecl **)(_DWORD))v2);
  v4(v5);
  sub_1002C664(0);
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002C3D7) --------------------------------------------------------
int __usercall sub_1002C3D7@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // eax@1

  v1 = *(_DWORD *)(a1 - 20);
  v2 = **(_DWORD **)v1;
  *(_DWORD *)(a1 - 32) = v2;
  return sub_1002DAAC(v2, v1);
}

//----- (1002C3EB) --------------------------------------------------------
#error "1002C3EE: positive sp value has been found (funcsize=1)"

//----- (1002C3F7) --------------------------------------------------------
void __userpurge __noreturn sub_1002C3F7(int a1@<ebx>, int a2@<ebp>, LPVOID lpThreadParameter)
{
  int v3; // edi@1
  DWORD v4; // eax@2
  int (__cdecl *v5)(_DWORD); // esi@5
  DWORD v6; // eax@6
  int v7; // [sp-Ch] [bp-Ch]@5

  sub_1003B680((int)&unk_10076DF8, 16);
  v3 = *(_DWORD *)(a2 + 8);
  if ( !v3 )
  {
    v4 = GetLastError();
    ExitThread(v4);
  }
  *(_DWORD *)(sub_10030B70(a1, a2) + 864) = v3;
  if ( sub_10032CCD() )
    *(_BYTE *)(v3 + 16) = sub_10032C0C(1) == 0;
  *(_DWORD *)(a2 - 4) = 0;
  v5 = *(int (__cdecl **)(_DWORD))v3;
  v7 = *(_DWORD *)(v3 + 4);
  __guard_check_icall_fptr(*(int (__cdecl **)(_DWORD))v3);
  v6 = v5(v7);
  sub_1002C664(v6);
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002C454) --------------------------------------------------------
int __usercall sub_1002C454@<eax>(int a1@<ebp>)
{
  int v1; // ecx@1
  int v2; // eax@1

  v1 = *(_DWORD *)(a1 - 20);
  v2 = **(_DWORD **)v1;
  *(_DWORD *)(a1 - 32) = v2;
  return sub_1002DAAC(v2, v1);
}

//----- (1002C468) --------------------------------------------------------
#error "1002C46B: positive sp value has been found (funcsize=1)"

//----- (1002C474) --------------------------------------------------------
void __stdcall sub_1002C474(LPVOID lpMem)
{
  if ( lpMem )
  {
    if ( *((_DWORD *)lpMem + 2) )
      CloseHandle(*((HANDLE *)lpMem + 2));
    if ( *((_DWORD *)lpMem + 3) )
      FreeLibrary(*((HMODULE *)lpMem + 3));
    sub_1002D7BC(lpMem);
  }
}

//----- (1002C4AB) --------------------------------------------------------
void __cdecl __noreturn sub_1002C4AB(DWORD dwExitCode)
{
  int v1; // eax@1
  int v2; // esi@3
  int v3; // eax@6
  HMODULE v4; // eax@9

  v1 = sub_10030BF4();
  if ( v1 )
  {
    v2 = *(_DWORD *)(v1 + 864);
    if ( v2 )
    {
      if ( *(_BYTE *)(v2 + 16) )
        sub_10032C5E();
      v3 = *(_DWORD *)(v2 + 8);
      if ( v3 != -1 && v3 )
        CloseHandle(*(HANDLE *)(v2 + 8));
      v4 = *(HMODULE *)(v2 + 12);
      if ( v4 != (HMODULE)-1 )
      {
        if ( v4 )
          FreeLibraryAndExitThread(v4, dwExitCode);
      }
    }
  }
  ExitThread(dwExitCode);
}

//----- (1002C502) --------------------------------------------------------
LPVOID __cdecl sub_1002C502(LPCWSTR lpModuleName, int a2)
{
  LPVOID v2; // esi@1

  v2 = sub_1002D75F(1u, 0x14u);
  sub_1002D7BC(0);
  if ( v2 )
  {
    *((_DWORD *)v2 + 1) = a2;
    *(_DWORD *)v2 = lpModuleName;
    GetModuleHandleExW(4u, lpModuleName, (HMODULE *)v2 + 3);
  }
  sub_1002C474(0);
  return v2;
}

//----- (1002C54B) --------------------------------------------------------
int __usercall sub_1002C54B@<eax>(int a1@<ebx>, int a2@<edi>, LPCWSTR lpModuleName, SIZE_T dwStackSize, int a5)
{
  LPVOID v6; // esi@3
  HANDLE v7; // eax@4
  signed int v8; // edi@4
  int v9; // eax@5
  DWORD ThreadId; // [sp+0h] [bp-8h]@4

  if ( !lpModuleName )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return -1;
  }
  v6 = sub_1002C502(lpModuleName, a5);
  if ( v6 )
  {
    ThreadId = 0;
    v7 = CreateThread(0, dwStackSize, (LPTHREAD_START_ROUTINE)StartAddress, v6, 4u, &ThreadId);
    v8 = (signed int)v7;
    if ( v7 )
    {
      *((_DWORD *)v6 + 2) = v7;
      if ( ResumeThread(v7) != -1 )
      {
        v6 = 0;
        goto LABEL_7;
      }
    }
    v9 = GetLastError();
    sub_1002E99F(v9);
  }
  v8 = -1;
LABEL_7:
  sub_1002C474(v6);
  return v8;
}

//----- (1002C5D7) --------------------------------------------------------
HANDLE __usercall sub_1002C5D7@<eax>(int a1@<ebx>, int a2@<edi>, LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPCWSTR lpModuleName, int a6, DWORD dwCreationFlags, int a8)
{
  LPVOID v9; // esi@3
  HANDLE v10; // edi@4
  int v11; // eax@5
  DWORD ThreadId; // [sp+0h] [bp-8h]@4

  if ( !lpModuleName )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return 0;
  }
  v9 = sub_1002C502(lpModuleName, a6);
  if ( v9 )
  {
    v10 = CreateThread(
            lpThreadAttributes,
            dwStackSize,
            (LPTHREAD_START_ROUTINE)sub_1002C3F7,
            v9,
            dwCreationFlags,
            &ThreadId);
    if ( v10 )
    {
      if ( a8 )
        *(_DWORD *)a8 = ThreadId;
      v9 = 0;
      goto LABEL_7;
    }
    v11 = GetLastError();
    sub_1002E99F(v11);
  }
  v10 = 0;
LABEL_7:
  sub_1002C474(v9);
  return v10;
}

//----- (1002C65C) --------------------------------------------------------
void __noreturn sub_1002C65C()
{
  sub_1002C4AB(0);
}

//----- (1002C664) --------------------------------------------------------
void __cdecl __noreturn sub_1002C664(DWORD dwExitCode)
{
  sub_1002C4AB(dwExitCode);
}

//----- (1002C672) --------------------------------------------------------
int __usercall sub_1002C672@<eax>(int a1@<ebx>, int a2@<edi>, int a3, WCHAR *a4)
{
  int result; // eax@3
  WCHAR *v5; // ecx@4
  int v6; // edx@5
  unsigned __int16 v7; // ax@6
  unsigned __int16 v8; // si@8
  WCHAR v9; // ax@10

  if ( dword_1007C994 )
  {
    result = sub_1002C707(a1, a2, a3, a4, 0);
  }
  else if ( a3 && (v5 = a4) != 0 )
  {
    v6 = a3 - (_DWORD)a4;
    do
    {
      v7 = *(WCHAR *)((char *)v5 + v6);
      if ( v7 < 0x41u || v7 > 0x5Au )
        v8 = *(WCHAR *)((char *)v5 + v6);
      else
        v8 = v7 + 32;
      v9 = *v5;
      if ( *v5 >= 0x41u && v9 <= 0x5Au )
        v9 += 32;
      ++v5;
    }
    while ( v8 && v8 == v9 );
    result = v8 - v9;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    result = 0x7FFFFFFF;
  }
  return result;
}
// 1007C994: using guessed type int dword_1007C994;

//----- (1002C707) --------------------------------------------------------
int __usercall sub_1002C707@<eax>(int a1@<ebx>, int a2@<edi>, int a3, WCHAR *a4, int a5)
{
  int v5; // ebx@1
  WCHAR *v6; // esi@2
  int v7; // edx@3
  int v8; // ebx@5
  unsigned __int16 v9; // ax@6
  WCHAR v10; // di@8
  WCHAR v11; // ax@10
  int v13; // [sp+8h] [bp-10h]@1
  int v14; // [sp+Ch] [bp-Ch]@4
  char v15; // [sp+14h] [bp-4h]@19

  sub_10029BD2((int)&v13, a1, a5);
  v5 = a3;
  if ( a3 && (v6 = a4) != 0 )
  {
    if ( *(_DWORD *)(v14 + 168) )
    {
      do
      {
        v10 = sub_10032D8A(v5, *(_WORD *)v5, (int)&v14);
        v5 += 2;
        v11 = sub_10032D8A(v5, *v6, (int)&v14);
        ++v6;
      }
      while ( v10 && v10 == v11 );
    }
    else
    {
      v8 = a3 - (_DWORD)a4;
      do
      {
        v9 = *(WCHAR *)((char *)v6 + v8);
        if ( v9 < 0x41u || v9 > 0x5Au )
          v10 = *(WCHAR *)((char *)v6 + v8);
        else
          v10 = v9 + 32;
        v11 = *v6;
        if ( *v6 >= 0x41u && v11 <= 0x5Au )
          v11 += 32;
        ++v6;
      }
      while ( v10 && v10 == v11 );
    }
    v7 = v10 - v11;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a3, a2);
    v7 = 0x7FFFFFFF;
  }
  if ( v15 )
    *(_DWORD *)(v13 + 848) &= 0xFFFFFFFD;
  return v7;
}

//----- (1002C7E7) --------------------------------------------------------
signed int __usercall sub_1002C7E7@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5)
{
  int v5; // ecx@2
  int v6; // eax@5
  signed int v7; // esi@6
  int v9; // edi@8
  __int16 v10; // ax@9
  signed int v11; // [sp-4h] [bp-8h]@5
  int v12; // [sp-4h] [bp-8h]@8

  if ( !a3 )
    goto LABEL_5;
  v5 = a4;
  if ( !a4 )
    goto LABEL_5;
  if ( !a5 )
  {
    *(_WORD *)a3 = 0;
LABEL_5:
    v6 = sub_1002E9D5();
    v11 = 22;
    goto LABEL_6;
  }
  v12 = a2;
  v9 = a3;
  do
  {
    v10 = *(_WORD *)(a5 - a3 + v9);
    *(_WORD *)v9 = v10;
    v9 += 2;
    if ( !v10 )
      break;
    --v5;
  }
  while ( v5 );
  a2 = v12;
  if ( v5 )
    return 0;
  *(_WORD *)a3 = 0;
  v6 = sub_1002E9D5();
  v11 = 34;
LABEL_6:
  v7 = v11;
  *(_DWORD *)v6 = v11;
  sub_1002B787(a1, a2);
  return v7;
}

//----- (1002C84B) --------------------------------------------------------
void __usercall __noreturn sub_1002C84B(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  void *v3; // ecx@1
  int v4; // esi@1

  sub_1003B680((int)&unk_10076E18, 12);
  v4 = *(_DWORD *)(sub_10030B70(a1, a2) + 12);
  if ( v4 )
  {
    *(_DWORD *)(a2 - 4) = 0;
    __guard_check_icall_fptr(v4);
    ((void (*)(void))v4)();
    *(_DWORD *)(a2 - 4) = -2;
  }
  sub_1002D71C(v3, a1, a2, a3, v4);
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002C887) --------------------------------------------------------
bool __cdecl sub_1002C887(char a1, unsigned int a2)
{
  return a1 & 4 || a1 & 1 && (a1 & 2 && a2 > 0x80000000 || !(a1 & 2) && a2 > 0x7FFFFFFF);
}

//----- (1002C8BA) --------------------------------------------------------
int __cdecl sub_1002C8BA(int a1, int a2, int a3)
{
  int result; // eax@1

  result = a1;
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = a3;
  if ( a3 )
    *(_DWORD *)a3 = a2;
  return result;
}

//----- (1002C8D5) --------------------------------------------------------
signed int __usercall sub_1002C8D5@<eax>(char a1@<bl>, int a2@<edi>, int a3, int a4, int a5, signed int a6, char a7)
{
  int v7; // edi@2
  signed int v8; // ebx@6
  int v10; // eax@10
  unsigned __int8 v11; // bl@12
  int v12; // esi@16
  int v13; // eax@21
  char v14; // al@30
  int v15; // esi@30
  int v16; // edx@38
  signed int v17; // ecx@40
  char v18; // bl@52
  int v19; // esi@54
  int v20; // [sp+8h] [bp-28h]@10
  char v21; // [sp+Ch] [bp-24h]@12
  char v22; // [sp+14h] [bp-1Ch]@63
  int v23; // [sp+18h] [bp-18h]@10
  unsigned __int64 v24; // [sp+1Ch] [bp-14h]@30
  unsigned int v25; // [sp+24h] [bp-Ch]@10
  int v26; // [sp+28h] [bp-8h]@13
  int v27; // [sp+2Ch] [bp-4h]@12

  if ( !sub_1002D236((int)&a4, a1, a2) )
    goto LABEL_6;
  v7 = a6;
  if ( a6 && (a6 < 2 || a6 > 36) )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, v7);
LABEL_6:
    v8 = 0;
    goto LABEL_7;
  }
  sub_10029BD2((int)&v20, a1, a3);
  v10 = a4;
  v25 = 0;
  v23 = a4;
  while ( 1 )
  {
    v11 = *(_BYTE *)v10;
    a4 = v10 + 1;
    LOBYTE(v27) = v11;
    if ( !sub_1002D27B(v11, v11, 8, (int)&v21) )
      break;
    v10 = a4;
  }
  v26 = a7 != 0;
  if ( v11 == 45 )
  {
    v26 = (a7 != 0) | 2;
  }
  else if ( v11 != 43 )
  {
    v12 = a4;
    goto LABEL_18;
  }
  v11 = *(_BYTE *)a4;
  v12 = a4 + 1;
  LOBYTE(v27) = *(_BYTE *)a4++;
LABEL_18:
  if ( !v7 || v7 == 16 )
  {
    if ( (unsigned __int8)(v11 - 48) > 9u )
    {
      if ( (unsigned __int8)(v11 - 97) > 0x19u )
      {
        if ( (unsigned __int8)(v11 - 65) > 0x19u )
          v13 = -1;
        else
          v13 = (char)v11 - 55;
      }
      else
      {
        v13 = (char)v11 - 87;
      }
    }
    else
    {
      v13 = (char)v11 - 48;
    }
    if ( v13 )
    {
      if ( !v7 )
        v7 = 10;
    }
    else
    {
      v14 = *(_BYTE *)v12;
      v15 = v12 + 1;
      BYTE4(v24) = v14;
      a4 = v15;
      if ( v14 == 120 || v14 == 88 )
      {
        if ( !v7 )
          v7 = 16;
        v11 = *(_BYTE *)v15;
        v12 = v15 + 1;
        LOBYTE(v27) = v11;
        a4 = v12;
      }
      else
      {
        if ( !v7 )
          v7 = 8;
        sub_1002D1E2((int)&a4, v11, v7, SBYTE4(v24));
        v12 = a4;
      }
    }
  }
  LODWORD(v24) = 0xFFFFFFFF % v7;
  v16 = v26;
  HIDWORD(v24) = 0xFFFFFFFF / v7;
  while ( 1 )
  {
    if ( (unsigned __int8)(v11 - 48) > 9u )
    {
      if ( (unsigned __int8)(v11 - 97) > 0x19u )
        v17 = (unsigned __int8)(v11 - 65) > 0x19u ? -1 : (char)v11 - 55;
      else
        v17 = (char)v11 - 87;
    }
    else
    {
      v17 = (char)v11 - 48;
    }
    if ( v17 == -1 || v17 >= (unsigned int)v7 )
      break;
    v16 |= 8u;
    if ( __PAIR__(v25, v17) <= v24 )
      v25 = v17 + v7 * v25;
    else
      v16 |= 4u;
    v11 = *(_BYTE *)v12++;
    LOBYTE(v27) = v11;
    a4 = v12;
  }
  v26 = v16;
  sub_1002D1E2((int)&a4, v11, v7, v27);
  v18 = v26;
  if ( !(v26 & 8) )
  {
    v8 = 0;
    a4 = v23;
    goto LABEL_63;
  }
  v19 = v25;
  if ( !sub_1002C887(v26, v25) )
  {
    if ( v18 & 2 )
      v19 = -v19;
    goto LABEL_62;
  }
  *(_DWORD *)sub_1002E9D5() = 34;
  if ( !(v18 & 1) )
  {
    v19 = -1;
LABEL_62:
    v8 = v19;
    goto LABEL_63;
  }
  if ( v18 & 2 )
    v8 = 2147483648;
  else
    v8 = 0x7FFFFFFF;
LABEL_63:
  if ( v22 )
    *(_DWORD *)(v20 + 848) &= 0xFFFFFFFD;
LABEL_7:
  if ( a5 )
    *(_DWORD *)a5 = a4;
  return v8;
}

//----- (1002CAFD) --------------------------------------------------------
signed int __usercall sub_1002CAFD@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5, unsigned int a6, char a7)
{
  signed int v7; // ebx@6
  int v9; // eax@10
  unsigned __int16 v10; // si@12
  int v11; // ebx@13
  int v12; // edi@16
  int v13; // eax@22
  int v14; // eax@79
  int v15; // eax@86
  int v16; // edi@86
  int v17; // eax@96
  int v18; // eax@153
  int v19; // esi@165
  int v20; // [sp+8h] [bp-1Ch]@10
  char v21; // [sp+14h] [bp-10h]@174
  int v22; // [sp+18h] [bp-Ch]@10
  unsigned int v23; // [sp+1Ch] [bp-8h]@10
  int v24; // [sp+20h] [bp-4h]@18

  if ( !sub_1002D236((int)&a4, a1, a2) )
    goto LABEL_6;
  if ( a6 && ((signed int)a6 < 2 || (signed int)a6 > 36) )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, 2);
LABEL_6:
    v7 = 0;
    goto LABEL_7;
  }
  sub_10029BD2((int)&v20, a1, a3);
  v9 = a4;
  v23 = 0;
  v22 = a4;
  while ( 1 )
  {
    v10 = *(_WORD *)v9;
    a4 = v9 + 2;
    if ( !sub_10032E79(v10, 8u) )
      break;
    v9 = a4;
  }
  v11 = a7 != 0;
  if ( v10 == 45 )
  {
    v11 |= 2u;
  }
  else if ( v10 != 43 )
  {
    v12 = a4;
    goto LABEL_18;
  }
  v10 = *(_WORD *)a4;
  v12 = a4 + 2;
  a4 += 2;
LABEL_18:
  v24 = 25;
  if ( a6 && a6 != 16 )
    goto LABEL_94;
  if ( v10 < 0x30u )
    goto LABEL_76;
  if ( v10 >= 0x3Au )
  {
    if ( v10 >= 0xFF10u )
    {
      if ( v10 >= 0xFF1Au )
        v13 = -1;
      else
        v13 = v10 - 65296;
    }
    else
    {
      if ( v10 < 0x660u )
        goto LABEL_76;
      if ( v10 >= 0x66Au )
      {
        if ( v10 < 0x6F0u )
          goto LABEL_76;
        if ( v10 >= 0x6FAu )
        {
          if ( v10 < 0x966u )
            goto LABEL_76;
          if ( v10 >= 0x970u )
          {
            if ( v10 < 0x9E6u )
              goto LABEL_76;
            if ( v10 >= 0x9F0u )
            {
              if ( v10 < 0xA66u )
                goto LABEL_76;
              if ( v10 >= 0xA70u )
              {
                if ( v10 < 0xAE6u )
                  goto LABEL_76;
                if ( v10 >= 0xAF0u )
                {
                  if ( v10 < 0xB66u )
                    goto LABEL_76;
                  if ( v10 >= 0xB70u )
                  {
                    if ( v10 < 0xC66u )
                      goto LABEL_76;
                    if ( v10 >= 0xC70u )
                    {
                      if ( v10 < 0xCE6u )
                        goto LABEL_76;
                      if ( v10 >= 0xCF0u )
                      {
                        if ( v10 < 0xD66u )
                          goto LABEL_76;
                        if ( v10 >= 0xD70u )
                        {
                          if ( v10 < 0xE50u )
                            goto LABEL_76;
                          if ( v10 >= 0xE5Au )
                          {
                            if ( v10 < 0xED0u )
                              goto LABEL_76;
                            if ( v10 >= 0xEDAu )
                            {
                              if ( v10 < 0xF20u )
                                goto LABEL_76;
                              if ( v10 >= 0xF2Au )
                              {
                                if ( v10 < 0x1040u )
                                  goto LABEL_76;
                                if ( v10 >= 0x104Au )
                                {
                                  if ( v10 < 0x17E0u )
                                    goto LABEL_76;
                                  if ( v10 >= 0x17EAu )
                                  {
                                    if ( v10 < 0x1810u || v10 >= 0x181Au )
                                      goto LABEL_76;
                                    v13 = v10 - 6160;
                                  }
                                  else
                                  {
                                    v13 = v10 - 6112;
                                  }
                                }
                                else
                                {
                                  v13 = v10 - 4160;
                                }
                              }
                              else
                              {
                                v13 = v10 - 3872;
                              }
                            }
                            else
                            {
                              v13 = v10 - 3792;
                            }
                          }
                          else
                          {
                            v13 = v10 - 3664;
                          }
                        }
                        else
                        {
                          v13 = v10 - 3430;
                        }
                      }
                      else
                      {
                        v13 = v10 - 3302;
                      }
                    }
                    else
                    {
                      v13 = v10 - 3174;
                    }
                  }
                  else
                  {
                    v13 = v10 - 2918;
                  }
                }
                else
                {
                  v13 = v10 - 2790;
                }
              }
              else
              {
                v13 = v10 - 2662;
              }
            }
            else
            {
              v13 = v10 - 2534;
            }
          }
          else
          {
            v13 = v10 - 2406;
          }
        }
        else
        {
          v13 = v10 - 1776;
        }
      }
      else
      {
        v13 = v10 - 1632;
      }
    }
  }
  else
  {
    v13 = v10 - 48;
  }
  if ( v13 == -1 )
  {
LABEL_76:
    if ( (v10 < 0x41u || v10 > 0x5Au) && (unsigned __int16)(v10 - 97) > (unsigned __int16)v24 )
    {
      v13 = -1;
    }
    else
    {
      v14 = v10;
      if ( (unsigned __int16)(v10 - 97) <= (unsigned __int16)v24 )
        v14 = v10 - 32;
      v13 = v14 - 55;
    }
  }
  if ( v13 )
  {
    if ( !a6 )
      a6 = 10;
  }
  else
  {
    v15 = *(_WORD *)v12;
    v16 = v12 + 2;
    a4 = v16;
    if ( v15 == 120 || v15 == 88 )
    {
      if ( !a6 )
        a6 = 16;
      v10 = *(_WORD *)v16;
      v12 = v16 + 2;
      a4 = v12;
    }
    else
    {
      if ( !a6 )
        a6 = 8;
      sub_1002D20A((int)&a4, v11, v16, v15);
      v12 = a4;
    }
  }
  while ( 1 )
  {
LABEL_94:
    if ( v10 >= 0x30u )
    {
      if ( v10 < 0x3Au )
      {
        v17 = v10 - 48;
        goto LABEL_149;
      }
      if ( v10 >= 0xFF10u )
      {
        if ( v10 >= 0xFF1Au )
          v17 = -1;
        else
          v17 = v10 - 65296;
LABEL_149:
        if ( v17 != -1 )
          goto LABEL_157;
        goto LABEL_150;
      }
      if ( v10 >= 0x660u )
      {
        if ( v10 < 0x66Au )
        {
          v17 = v10 - 1632;
          goto LABEL_149;
        }
        if ( v10 >= 0x6F0u )
        {
          if ( v10 < 0x6FAu )
          {
            v17 = v10 - 1776;
            goto LABEL_149;
          }
          if ( v10 >= 0x966u )
          {
            if ( v10 < 0x970u )
            {
              v17 = v10 - 2406;
              goto LABEL_149;
            }
            if ( v10 >= 0x9E6u )
            {
              if ( v10 < 0x9F0u )
              {
                v17 = v10 - 2534;
                goto LABEL_149;
              }
              if ( v10 >= 0xA66u )
              {
                if ( v10 < 0xA70u )
                {
                  v17 = v10 - 2662;
                  goto LABEL_149;
                }
                if ( v10 >= 0xAE6u )
                {
                  if ( v10 < 0xAF0u )
                  {
                    v17 = v10 - 2790;
                    goto LABEL_149;
                  }
                  if ( v10 >= 0xB66u )
                  {
                    if ( v10 < 0xB70u )
                    {
                      v17 = v10 - 2918;
                      goto LABEL_149;
                    }
                    if ( v10 >= 0xC66u )
                    {
                      if ( v10 < 0xC70u )
                      {
                        v17 = v10 - 3174;
                        goto LABEL_149;
                      }
                      if ( v10 >= 0xCE6u )
                      {
                        if ( v10 < 0xCF0u )
                        {
                          v17 = v10 - 3302;
                          goto LABEL_149;
                        }
                        if ( v10 >= 0xD66u )
                        {
                          if ( v10 < 0xD70u )
                          {
                            v17 = v10 - 3430;
                            goto LABEL_149;
                          }
                          if ( v10 >= 0xE50u )
                          {
                            if ( v10 < 0xE5Au )
                            {
                              v17 = v10 - 3664;
                              goto LABEL_149;
                            }
                            if ( v10 >= 0xED0u )
                            {
                              if ( v10 < 0xEDAu )
                              {
                                v17 = v10 - 3792;
                                goto LABEL_149;
                              }
                              if ( v10 >= 0xF20u )
                              {
                                if ( v10 < 0xF2Au )
                                {
                                  v17 = v10 - 3872;
                                  goto LABEL_149;
                                }
                                if ( v10 >= 0x1040u )
                                {
                                  if ( v10 < 0x104Au )
                                  {
                                    v17 = v10 - 4160;
                                    goto LABEL_149;
                                  }
                                  if ( v10 >= 0x17E0u )
                                  {
                                    if ( v10 < 0x17EAu )
                                    {
                                      v17 = v10 - 6112;
                                      goto LABEL_149;
                                    }
                                    if ( v10 >= 0x1810u && v10 < 0x181Au )
                                    {
                                      v17 = v10 - 6160;
                                      goto LABEL_149;
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
LABEL_150:
    if ( (v10 < 0x41u || v10 > 0x5Au) && (unsigned __int16)(v10 - 97) > (unsigned __int16)v24 )
    {
      v17 = -1;
    }
    else
    {
      v18 = v10;
      if ( (unsigned __int16)(v10 - 97) <= (unsigned __int16)v24 )
        v18 = v10 - 32;
      v17 = v18 - 55;
    }
LABEL_157:
    if ( v17 == -1 || v17 >= a6 )
      break;
    v11 |= 8u;
    if ( __PAIR__(v23, v17) <= __PAIR__(0xFFFFFFFF / a6, 0xFFFFFFFF % a6) )
      v23 = v17 + a6 * v23;
    else
      v11 |= 4u;
    v10 = *(_WORD *)v12;
    v12 += 2;
    a4 = v12;
  }
  sub_1002D20A((int)&a4, v11, v12, v10);
  if ( v11 & 8 )
  {
    v19 = v23;
    if ( sub_1002C887(v11, v23) )
    {
      *(_DWORD *)sub_1002E9D5() = 34;
      if ( v11 & 1 )
      {
        if ( v11 & 2 )
          v7 = 2147483648;
        else
          v7 = 0x7FFFFFFF;
        goto LABEL_174;
      }
      v19 = -1;
    }
    else if ( v11 & 2 )
    {
      v19 = -v19;
    }
    v7 = v19;
  }
  else
  {
    v7 = 0;
    a4 = v22;
  }
LABEL_174:
  if ( v21 )
    *(_DWORD *)(v20 + 848) &= 0xFFFFFFFD;
LABEL_7:
  if ( a5 )
    *(_DWORD *)a5 = a4;
  return v7;
}

//----- (1002D1E2) --------------------------------------------------------
char __userpurge sub_1002D1E2@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, char a4)
{
  char result; // al@1
  int v5; // ecx@1

  --*(_DWORD *)a1;
  result = a4;
  v5 = *(_DWORD *)a1;
  if ( a4 )
  {
    if ( *(_BYTE *)v5 != a4 )
    {
      *(_DWORD *)sub_1002E9D5() = 22;
      result = sub_1002B787(a2, a3);
    }
  }
  return result;
}

//----- (1002D20A) --------------------------------------------------------
__int16 __userpurge sub_1002D20A@<ax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, __int16 a4)
{
  __int16 result; // ax@1
  int v5; // ecx@1

  *(_DWORD *)a1 -= 2;
  result = a4;
  v5 = *(_DWORD *)a1;
  if ( a4 )
  {
    if ( *(_WORD *)v5 != a4 )
    {
      *(_DWORD *)sub_1002E9D5() = 22;
      result = sub_1002B787(a2, a3);
    }
  }
  return result;
}

//----- (1002D236) --------------------------------------------------------
char __usercall sub_1002D236@<al>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  char result; // al@2

  if ( *(_DWORD *)a1 )
  {
    result = 1;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a2, a3);
    result = 0;
  }
  return result;
}

//----- (1002D251) --------------------------------------------------------
int __usercall sub_1002D251@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4, int a5)
{
  int v5; // eax@2

  if ( a5 )
    v5 = *(_WORD *)(**(_DWORD **)a5 + 2 * a3);
  else
    v5 = *(_WORD *)(sub_10032E53(a1, a2) + 2 * a3);
  return a4 & v5;
}

//----- (1002D27B) --------------------------------------------------------
int __usercall sub_1002D27B@<eax>(int a1@<ebx>, int a2, int a3, int a4)
{
  int result; // eax@3

  if ( a4 && *(_DWORD *)(*(_DWORD *)a4 + 4) > 1 )
    result = sub_10032ED8(a2, a3, a4);
  else
    result = sub_1002D251(a4, a1, a2, a3, a4);
  return result;
}

//----- (1002D2AE) --------------------------------------------------------
signed int __usercall sub_1002D2AE@<eax>(int a1@<ecx>, char a2@<bl>, int a3@<edi>, int a4, int a5, signed int a6)
{
  int v7; // [sp-14h] [bp-14h]@1
  int v8; // [sp-10h] [bp-10h]@1
  signed int v9; // [sp-Ch] [bp-Ch]@1
  signed int v10; // [sp-8h] [bp-8h]@1
  int v11; // [sp-4h] [bp-4h]@1

  v11 = a1;
  v10 = 1;
  v9 = a6;
  v8 = a1;
  v7 = a1;
  sub_1002C8BA((int)&v7, a4, a5);
  return sub_1002C8D5(a2, a3, 0, v7, v8, v9, v10);
}

//----- (1002D2DA) --------------------------------------------------------
signed int __usercall sub_1002D2DA@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4, int a5, unsigned int a6)
{
  int v7; // [sp-14h] [bp-14h]@1
  int v8; // [sp-10h] [bp-10h]@1
  unsigned int v9; // [sp-Ch] [bp-Ch]@1
  signed int v10; // [sp-8h] [bp-8h]@1
  int v11; // [sp-4h] [bp-4h]@1

  v11 = a1;
  v10 = 1;
  v9 = a6;
  v8 = a1;
  v7 = a1;
  sub_1002C8BA((int)&v7, a4, a5);
  return sub_1002CAFD(a2, a3, 0, v7, v8, v9, v10);
}

//----- (1002D306) --------------------------------------------------------
int __userpurge sub_1002D306@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4, int a5)
{
  int v5; // edx@1
  int v6; // ecx@1

  sub_1000FFB0((int)&unk_10076E38, 12);
  *(_DWORD *)(a2 - 28) = 0;
  sub_1002D91A(**(_DWORD **)(a2 + 8));
  *(_DWORD *)(a2 - 4) = 0;
  *(_DWORD *)(a2 - 28) = sub_1002D37F(*(int ***)(a2 + 12), a1);
  *(_DWORD *)(a2 - 4) = -2;
  sub_1002D34B(a2);
  return sub_1000FFF6(v6, v5);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002D34B) --------------------------------------------------------
void __usercall sub_1002D34B(int a1@<ebp>)
{
  sub_1002D92E(**(_DWORD **)(a1 + 16));
}

//----- (1002D357) --------------------------------------------------------
int __usercall sub_1002D357@<eax>(int a1@<ebx>, int a2, int a3)
{
  int v3; // ebp@0
  int v5; // [sp+0h] [bp-Ch]@1
  int v6; // [sp+4h] [bp-8h]@1

  v6 = a2;
  v5 = a2;
  return sub_1002D306(a1, v3, (int)&v5, a3, (int)&v6);
}

//----- (1002D37F) --------------------------------------------------------
int __usercall sub_1002D37F@<eax>(int **a1@<ecx>, int a2@<ebx>)
{
  int **v2; // esi@1
  int v3; // edi@1
  char v4; // ST2C_1@1
  int v5; // ebx@1

  v2 = a1;
  v3 = **a1;
  v4 = sub_1002FF9E(a2, v3, **a1);
  v5 = sub_100291F4(*v2[1], 1u, *v2[2], **v2) == *v2[2];
  sub_10030053(v5, v4, v3);
  return v5 - 1;
}

//----- (1002D3CD) --------------------------------------------------------
int __usercall sub_1002D3CD@<eax>(int a1@<ebx>, int a2@<edi>, const char *a3, int a4)
{
  int result; // eax@2
  signed int v5; // eax@5
  signed int v6; // edx@5
  struct _RTL_CRITICAL_SECTION *v7; // esi@5
  struct _RTL_CRITICAL_SECTION *v8; // eax@7
  int *v9; // [sp+0h] [bp-10h]@15
  const char **v10; // [sp+4h] [bp-Ch]@15
  int *v11; // [sp+8h] [bp-8h]@15
  unsigned int v12; // [sp+Ch] [bp-4h]@15

  if ( a3 && a4 )
  {
    if ( (*(_DWORD *)(a4 + 12) >> 12) & 1 )
      goto LABEL_18;
    v5 = sub_1002F4CB(a1, a2, a4);
    v6 = v5;
    v7 = (struct _RTL_CRITICAL_SECTION *)&unk_1007A290;
    if ( v5 == -1 || v5 == -2 )
      v8 = (struct _RTL_CRITICAL_SECTION *)&unk_1007A290;
    else
      v8 = &(*(&lpCriticalSection + (v5 >> 6)))[2 * (v5 & 0x3F)];
    if ( BYTE1(v8[1].LockSemaphore) )
      goto LABEL_19;
    if ( v6 != -1 && v6 != -2 )
      v7 = &(*(&lpCriticalSection + (v6 >> 6)))[2 * (v6 & 0x3F)];
    if ( BYTE1(v7[1].SpinCount) & 1 )
    {
LABEL_19:
      *(_DWORD *)sub_1002E9D5() = 22;
      sub_1002B787(a1, a2);
      result = -1;
    }
    else
    {
LABEL_18:
      v12 = strlen(a3);
      v9 = &a4;
      v10 = &a3;
      v11 = (int *)&v12;
      result = sub_1002D357(a1, a4, (int)&v9);
    }
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    result = -1;
  }
  return result;
}

//----- (1002D4AD) --------------------------------------------------------
int __cdecl sub_1002D4AD(int a1)
{
  int result; // eax@1

  result = a1;
  if ( a1 )
    result = sub_1002C0EC(*(LPVOID *)((a1 & 0xFFFFFFFC) - 4));
  return result;
}

//----- (1002D4C7) --------------------------------------------------------
int __usercall sub_1002D4C7@<eax>(int a1@<ebx>, int a2@<edi>, SIZE_T a3, unsigned int a4)
{
  _DWORD *savedregs; // [sp+0h] [bp+0h]@1

  savedregs = &savedregs;
  return sub_1002D4E9(a1, a2, a3, a4, 0);
}

//----- (1002D4E9) --------------------------------------------------------
int __usercall sub_1002D4E9@<eax>(int a1@<ebx>, int a2@<edi>, SIZE_T a3, unsigned int a4, SIZE_T a5)
{
  signed int v5; // ecx@1
  int v6; // ebx@7
  int v7; // edi@7
  SIZE_T v8; // ecx@7
  LPVOID v9; // edx@9
  int result; // eax@10

  v5 = a4;
  if ( !a4 || (a4 - 1) & a4 || a5 && a5 >= a3 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
  }
  else
  {
    if ( a4 <= 4 )
      v5 = 4;
    v6 = v5 - 1;
    v7 = -a5 & 3;
    v8 = a3 + v5 - 1 + v7 + 4;
    if ( a3 <= v8 )
    {
      v9 = sub_1002C36D(v8);
      if ( v9 )
      {
        result = (~v6 & (unsigned int)((char *)v9 + v6 + v7 + a5 + 4)) - a5;
        *(_DWORD *)(result - v7 - 4) = v9;
        return result;
      }
    }
    else
    {
      *(_DWORD *)sub_1002E9D5() = 12;
    }
  }
  return 0;
}

//----- (1002D573) --------------------------------------------------------
int __usercall sub_1002D573@<eax>(int a1@<ebx>, int a2@<edi>, int a3, SIZE_T a4, unsigned int a5, SIZE_T a6)
{
  void *v6; // esi@1
  signed int v8; // ecx@5
  int v9; // ebx@9
  int v10; // ecx@16
  void *v11; // eax@16
  LPVOID v12; // edi@16
  int v13; // [sp+8h] [bp-1Ch]@16
  int v14; // [sp+Ch] [bp-18h]@11
  unsigned int v15; // [sp+10h] [bp-14h]@11
  signed int v16; // [sp+14h] [bp-10h]@1
  int v17; // [sp+18h] [bp-Ch]@11
  int dwBytes; // [sp+1Ch] [bp-8h]@13
  int v19; // [sp+20h] [bp-4h]@11

  v16 = 0;
  v6 = (void *)a3;
  if ( !a3 )
    return sub_1002D4E9(a1, a2, a4, a5, a6);
  if ( !a4 )
  {
    sub_1002D4AD(a3);
    return 0;
  }
  v8 = a5;
  if ( !a5 || (a5 - 1) & a5 || a6 && a6 >= a4 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a4);
    return 0;
  }
  v9 = *(_DWORD *)((a3 & 0xFFFFFFFC) - 4);
  if ( a5 <= 4 )
    v8 = 4;
  v17 = v8 - 1;
  v19 = -a6 & 3;
  v14 = a3 - v9;
  v15 = v9 - a3 + sub_100332FC(v9, a4, (LPCVOID)v9);
  if ( v15 > a4 )
    v15 = a4;
  dwBytes = v17 + v19 + a4 + 4;
  if ( a4 > dwBytes )
  {
    *(_DWORD *)sub_1002E9D5() = 12;
    return 0;
  }
  if ( v17 + v9 + v19 + 4 >= (unsigned int)a3 )
  {
    v13 = *(_DWORD *)sub_1002E9D5();
    v11 = sub_10033232(v10, v9, (LPCVOID)v9, dwBytes);
    v12 = v11;
    if ( v11 )
    {
      v9 = (int)v11;
      goto LABEL_21;
    }
    *(_DWORD *)sub_1002E9D5() = v13;
  }
  v12 = sub_1002C36D(dwBytes);
  if ( !v12 )
    return 0;
  v16 = 1;
LABEL_21:
  if ( v12 != (LPVOID)(a3 - v14) || (a6 + v19 + a3) & ~v17 )
  {
    v6 = (void *)((~v17 & (unsigned int)((char *)v12 + v19 + v17 + a6 + 4)) - a6);
    sub_100260E0(v6, (const void *)(v9 + v14), v15);
    if ( v16 )
      sub_1002C0EC((LPVOID)v9);
    *(_DWORD *)((char *)v6 + -v19 - 4) = v12;
  }
  return (int)v6;
}

//----- (1002D6F7) --------------------------------------------------------
int __usercall sub_1002D6F7@<eax>(int a1@<ebx>, int a2@<edi>, int a3, SIZE_T a4, unsigned int a5)
{
  _DWORD *savedregs; // [sp+0h] [bp+0h]@1

  savedregs = &savedregs;
  return sub_1002D573(a1, a2, a3, a4, a5, 0);
}

//----- (1002D71C) --------------------------------------------------------
void __usercall __noreturn sub_1002D71C(void *a1@<ecx>, int a2@<ebx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>)
{
  if ( sub_1003344C(a1) )
    sub_100334A7(a3);
  if ( byte_1007A100 & 2 )
  {
    if ( IsProcessorFeaturePresent(0x17u) )
      __fastfail(7u);
    sub_1002B5BD(a2, a4, a5, 3, 1073741845, 1);
  }
  sub_1002DE58();
  __debugbreak();
  JUMPOUT(*(_DWORD *)sub_1002D75F);
}
// 1007A100: using guessed type char byte_1007A100;

//----- (1002D75F) --------------------------------------------------------
LPVOID __cdecl sub_1002D75F(unsigned int a1, unsigned int a2)
{
  unsigned int v2; // esi@3
  LPVOID result; // eax@7

  if ( a1 && 0xFFFFFFE0 / a1 < a2 )
  {
LABEL_9:
    *(_DWORD *)sub_1002E9D5() = 12;
    result = 0;
  }
  else
  {
    v2 = a2 * a1;
    if ( !(a2 * a1) )
      v2 = 1;
    while ( 1 )
    {
      result = HeapAlloc(hHeap, 8u, v2);
      if ( result )
        break;
      if ( !sub_100336AF() || !sub_1002D9F6(v2) )
        goto LABEL_9;
    }
  }
  return result;
}

//----- (1002D7BC) --------------------------------------------------------
void __cdecl sub_1002D7BC(LPVOID lpMem)
{
  int v1; // esi@3
  int v2; // eax@3

  if ( lpMem )
  {
    if ( !HeapFree(hHeap, 0, lpMem) )
    {
      v1 = sub_1002E9D5();
      v2 = GetLastError();
      *(_DWORD *)v1 = sub_1002E95C(v2);
    }
  }
}

//----- (1002D7F6) --------------------------------------------------------
signed int sub_1002D7F6()
{
  unsigned int v0; // eax@1
  signed int result; // eax@8
  signed int v2; // edi@9
  _UNKNOWN *v3; // esi@9
  PRTL_CRITICAL_SECTION_DEBUG v4; // eax@10

  v0 = dword_1007C6F8;
  if ( !dword_1007C6F8 )
  {
    v0 = 512;
LABEL_5:
    dword_1007C6F8 = v0;
    goto LABEL_6;
  }
  if ( dword_1007C6F8 < 3 )
  {
    v0 = 3;
    goto LABEL_5;
  }
LABEL_6:
  dword_1007C6FC = (int)sub_1002D75F(v0, 4u);
  sub_1002D7BC(0);
  if ( dword_1007C6FC
    || (dword_1007C6F8 = 3, dword_1007C6FC = (int)sub_1002D75F(3u, 4u), sub_1002D7BC(0), dword_1007C6FC) )
  {
    v2 = 0;
    v3 = &unk_1007A108;
    do
    {
      sub_10032AC6((LPCRITICAL_SECTION)((char *)v3 + 32), 0xFA0u, 0);
      *(_DWORD *)(dword_1007C6FC + 4 * v2) = v3;
      v4 = (*(&lpCriticalSection + (v2 >> 6)))[2 * (v2 & 0x3F) + 1].DebugInfo;
      if ( v4 == (PRTL_CRITICAL_SECTION_DEBUG)-1 || v4 == (PRTL_CRITICAL_SECTION_DEBUG)-2 || !v4 )
        *((_DWORD *)v3 + 4) = -2;
      v3 = (char *)v3 + 56;
      ++v2;
    }
    while ( v3 != &unk_1007A1B0 );
    result = 0;
  }
  else
  {
    result = -1;
  }
  return result;
}
// 1007C6F8: using guessed type int dword_1007C6F8;
// 1007C6FC: using guessed type int dword_1007C6FC;

//----- (1002D8BE) --------------------------------------------------------
char *__cdecl sub_1002D8BE(int a1)
{
  return (char *)&unk_1007A108 + 56 * a1;
}

//----- (1002D91A) --------------------------------------------------------
void __cdecl sub_1002D91A(int a1)
{
  EnterCriticalSection((LPCRITICAL_SECTION)(a1 + 32));
}

//----- (1002D92E) --------------------------------------------------------
void __cdecl sub_1002D92E(int a1)
{
  LeaveCriticalSection((LPCRITICAL_SECTION)(a1 + 32));
}

//----- (1002D983) --------------------------------------------------------
void __cdecl sub_1002D983(int a1)
{
  EnterCriticalSection((LPCRITICAL_SECTION)&unk_1007C708 + a1);
}

//----- (1002D99A) --------------------------------------------------------
char sub_1002D99A()
{
  int v0; // esi@1
  struct _RTL_CRITICAL_SECTION *v1; // edi@2

  v0 = dword_1007C840;
  if ( dword_1007C840 )
  {
    v1 = (struct _RTL_CRITICAL_SECTION *)((char *)&unk_1007C6F0 + 24 * dword_1007C840);
    do
    {
      DeleteCriticalSection(v1);
      --dword_1007C840;
      --v1;
      --v0;
    }
    while ( v0 );
  }
  return 1;
}
// 1007C840: using guessed type int dword_1007C840;

//----- (1002D9CB) --------------------------------------------------------
void __cdecl sub_1002D9CB(int a1)
{
  LeaveCriticalSection((LPCRITICAL_SECTION)&unk_1007C708 + a1);
}

//----- (1002D9E2) --------------------------------------------------------
int __usercall sub_1002D9E2@<eax>(int a1@<edx>, int a2)
{
  return sub_100333F3((unsigned int)&dword_1007C844, a1, a2);
}
// 1007C844: using guessed type int dword_1007C844;

//----- (1002D9F6) --------------------------------------------------------
int __cdecl sub_1002D9F6(int a1)
{
  int v1; // ebp@0
  int v2; // eax@1
  int v3; // esi@1
  int result; // eax@3

  v2 = sub_1002DA3A(v1);
  v3 = v2;
  result = 0;
  if ( v2 )
  {
    __guard_check_icall_fptr(v2);
    if ( ((int (__cdecl *)(int))v3)(a1) )
      result = 1;
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002DA3A) --------------------------------------------------------
int __usercall sub_1002DA3A@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // edx@1
  int v3; // ecx@1

  sub_1000FFB0((int)&unk_10076E58, 12);
  *(_DWORD *)(a1 - 28) = 0;
  sub_1002D983(0);
  *(_DWORD *)(a1 - 4) = 0;
  v1 = __ROR4__(dword_1007C844 ^ __security_cookie, __security_cookie & 0x1F);
  *(_DWORD *)(a1 - 28) = v1;
  *(_DWORD *)(a1 - 4) = -2;
  sub_1002DA83();
  return sub_1000FFF6(v3, v2);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007C844: using guessed type int dword_1007C844;

//----- (1002DA83) --------------------------------------------------------
void sub_1002DA83()
{
  sub_1002D9CB(0);
}

//----- (1002DA8C) --------------------------------------------------------
int __cdecl sub_1002DA8C(int a1, int a2)
{
  int result; // eax@2

  if ( a1 == -529697949 )
    result = sub_1002DAAC(-529697949, a2);
  else
    result = 0;
  return result;
}

//----- (1002DAAC) --------------------------------------------------------
int __cdecl sub_1002DAAC(int a1, int a2)
{
  int result; // eax@1
  int v3; // esi@1
  int v4; // edx@2
  int v5; // ecx@2
  int v6; // eax@2
  void (__cdecl *v7)(_DWORD); // edi@7
  int v8; // eax@13
  int v9; // edx@13
  int v10; // ebx@16
  int v11; // ST04_4@35
  int v12; // ST04_4@36
  int v13; // [sp+4h] [bp-8h]@12

  result = sub_10030BF4();
  v3 = result;
  if ( result )
  {
    v4 = *(_DWORD *)result;
    v5 = v4;
    v6 = *(_DWORD *)result + 144;
    if ( v4 == v4 + 144 )
    {
LABEL_5:
      v5 = 0;
    }
    else
    {
      while ( *(_DWORD *)v5 != a1 )
      {
        v5 += 12;
        if ( v5 == v6 )
          goto LABEL_5;
      }
    }
    if ( v5 && (v7 = *(void (__cdecl **)(_DWORD))(v5 + 8)) != 0 )
    {
      if ( v7 == (void (__cdecl *)(_DWORD))5 )
      {
        *(_DWORD *)(v5 + 8) = 0;
        result = 1;
      }
      else
      {
        if ( v7 != (void (__cdecl *)(_DWORD))1 )
        {
          v13 = *(_DWORD *)(v3 + 4);
          *(_DWORD *)(v3 + 4) = a2;
          if ( *(_DWORD *)(v5 + 4) == 8 )
          {
            v8 = v4 + 36;
            v9 = v4 + 144;
            while ( v8 != v9 )
            {
              *(_DWORD *)(v8 + 8) = 0;
              v8 += 12;
            }
            v10 = *(_DWORD *)(v3 + 8);
            if ( *(_DWORD *)v5 > 0xC0000091 )
            {
              switch ( *(_DWORD *)v5 )
              {
                case 0xC0000092:
                  *(_DWORD *)(v3 + 8) = 138;
                  break;
                case 0xC0000093:
                  *(_DWORD *)(v3 + 8) = 133;
                  break;
                case 0xC00002B4:
                  *(_DWORD *)(v3 + 8) = 142;
                  break;
                case 0xC00002B5:
                  *(_DWORD *)(v3 + 8) = 141;
                  break;
              }
            }
            else
            {
              switch ( *(_DWORD *)v5 )
              {
                case 0xC0000091:
                  *(_DWORD *)(v3 + 8) = 132;
                  break;
                case 0xC000008D:
                  *(_DWORD *)(v3 + 8) = 130;
                  break;
                case 0xC000008E:
                  *(_DWORD *)(v3 + 8) = 131;
                  break;
                case 0xC000008F:
                  *(_DWORD *)(v3 + 8) = 134;
                  break;
                case 0xC0000090:
                  *(_DWORD *)(v3 + 8) = 129;
                  break;
              }
            }
            v11 = *(_DWORD *)(v3 + 8);
            __guard_check_icall_fptr(v7);
            v7(8);
            *(_DWORD *)(v3 + 8) = v10;
          }
          else
          {
            v12 = *(_DWORD *)(v5 + 4);
            *(_DWORD *)(v5 + 8) = 0;
            __guard_check_icall_fptr(v7);
            v7(v12);
          }
          *(_DWORD *)(v3 + 4) = v13;
        }
        result = -1;
      }
    }
    else
    {
      result = 0;
    }
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002DC1F) --------------------------------------------------------
BOOL __cdecl sub_1002DC1F(int a1)
{
  return a1 == -529697949;
}

//----- (1002DC32) --------------------------------------------------------
int __usercall sub_1002DC32@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // edi@5
  int v3; // eax@6
  void (__cdecl *v4)(_DWORD, _DWORD); // ebx@7
  _UNKNOWN *v6; // [sp-Ch] [bp-Ch]@4
  int v7; // [sp-8h] [bp-8h]@1

  sub_1003B680((int)&unk_10076E78, 12);
  v1 = *(_DWORD *)(a1 + 16);
  if ( !v1 && sub_1002DD8C() )
    sub_1002DDD0(*(_DWORD *)(a1 + 8));
  sub_1002D983(2);
  *(_DWORD *)(a1 - 4) = 0;
  if ( !byte_1007C850 )
  {
    _InterlockedExchange((volatile signed __int32 *)&dword_1007C848, 1);
    *(_DWORD *)(a1 - 4) = 1;
    v2 = *(_DWORD *)(a1 + 12);
    if ( v2 )
    {
      if ( v2 != 1 )
      {
LABEL_12:
        *(_DWORD *)(a1 - 4) = 0;
        if ( !v2 )
          sub_1002E8BB((unsigned int *)&unk_100652AC, (unsigned int)&unk_100652C0);
        sub_1002E8BB((unsigned int *)&unk_100652C4, (unsigned int)&unk_100652C8);
        if ( !v1 )
          byte_1007C850 = 1;
        goto LABEL_16;
      }
      v6 = &unk_1007C97C;
    }
    else
    {
      v3 = __ROR4__(0, 32 - (__security_cookie & 0x1F));
      if ( dword_1007C84C != (__security_cookie ^ v3) )
      {
        LOBYTE(v6) = 0;
        v4 = (void (__cdecl *)(_DWORD, _DWORD))__ROR4__(dword_1007C84C ^ __security_cookie, __security_cookie & 0x1F);
        __guard_check_icall_fptr(v4);
        v4(0, 0);
      }
    }
    sub_1002E700((char)v6);
    goto LABEL_12;
  }
LABEL_16:
  *(_DWORD *)(a1 - 4) = -2;
  sub_1002DD3C();
  if ( !v1 )
    sub_1002DD4B(*(_DWORD *)(a1 + 8));
  return sub_1003B6C9(v7);
}
// 1003B6C9: using guessed type int __cdecl sub_1003B6C9(_DWORD);
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);
// 1007C848: using guessed type int dword_1007C848;
// 1007C84C: using guessed type int dword_1007C84C;
// 1007C850: using guessed type char byte_1007C850;

//----- (1002DD21) --------------------------------------------------------
BOOL __usercall sub_1002DD21@<eax>(int a1@<ebp>)
{
  return sub_1002DC1F(***(_DWORD ***)(a1 - 20));
}

//----- (1002DD31) --------------------------------------------------------
void __usercall __noreturn sub_1002DD31(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  sub_1002C84B(a1, a2, a3);
}

//----- (1002DD3C) --------------------------------------------------------
void sub_1002DD3C()
{
  sub_1002D9CB(2);
}

//----- (1002DD4B) --------------------------------------------------------
void __cdecl __noreturn sub_1002DD4B(UINT uExitCode)
{
  HANDLE v1; // eax@3

  if ( sub_10032CCD() && !((*(_WORD *)(__readfsdword(48) + 104) >> 8) & 1) )
  {
    v1 = GetCurrentProcess();
    TerminateProcess(v1, uExitCode);
  }
  sub_1002DDD0(uExitCode);
  ExitProcess(uExitCode);
}

//----- (1002DD8C) --------------------------------------------------------
bool sub_1002DD8C()
{
  HMODULE v0; // ecx@1
  bool result; // al@2
  int v2; // eax@4

  v0 = GetModuleHandleW(0);
  if ( v0
    && *(_WORD *)v0 == 23117
    && (v2 = (int)((char *)v0 + *((_DWORD *)v0 + 15)), *(_DWORD *)v2 == 17744)
    && *(_WORD *)(v2 + 24) == 267
    && *(_DWORD *)(v2 + 116) > 0xEu )
    result = *(_DWORD *)(v2 + 232) != 0;
  else
    result = 0;
  return result;
}

//----- (1002DDD0) --------------------------------------------------------
FARPROC __cdecl sub_1002DDD0(int a1)
{
  FARPROC result; // eax@1
  FARPROC v2; // esi@2
  HMODULE phModule; // [sp+0h] [bp-8h]@1

  phModule = 0;
  result = (FARPROC)GetModuleHandleExW(0, L"mscoree.dll", &phModule);
  if ( result )
  {
    result = GetProcAddress(phModule, "CorExitProcess");
    v2 = result;
    if ( result )
    {
      __guard_check_icall_fptr(result);
      result = (FARPROC)((int (__stdcall *)(int))v2)(a1);
    }
  }
  if ( phModule )
    result = (FARPROC)FreeLibrary(phModule);
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002DE3A) --------------------------------------------------------
int __cdecl sub_1002DE3A(int a1)
{
  int result; // eax@1

  result = a1;
  dword_1007C84C = a1;
  return result;
}
// 1007C84C: using guessed type int dword_1007C84C;

//----- (1002DE58) --------------------------------------------------------
int sub_1002DE58()
{
  int v0; // ebp@0

  return sub_1002DC32(v0);
}

//----- (1002DE6E) --------------------------------------------------------
int sub_1002DE6E()
{
  return dword_1007C848;
}
// 1007C848: using guessed type int dword_1007C848;

//----- (1002DE74) --------------------------------------------------------
signed int __usercall sub_1002DE74@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  signed int v4; // edi@4
  int v5; // ebx@4
  LPCSTR *v6; // esi@7
  void *v7; // eax@10
  signed int v8; // ebx@11
  LPVOID v9; // eax@13
  LPVOID v10; // edx@14
  int v11; // ecx@14
  LPVOID i; // eax@14
  unsigned int v13; // [sp+4h] [bp-Ch]@7
  LPVOID lpMem; // [sp+8h] [bp-8h]@12
  unsigned int v15; // [sp+Ch] [bp-4h]@7

  if ( a3 != 2 && a3 != 1 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return 22;
  }
  sub_100340F8(a1);
  v4 = 0;
  GetModuleFileNameA(0, Filename, 0x104u);
  v5 = dword_1007CCC0;
  dword_1007CCC8 = (int)Filename;
  if ( !dword_1007CCC0 || !*(_BYTE *)dword_1007CCC0 )
    v5 = (int)Filename;
  v15 = 0;
  v13 = 0;
  sub_1002DF98(v5, 0, 0, (int)&v15, (int)&v13);
  v6 = (LPCSTR *)sub_1002E10D(v15, v13, 1u);
  if ( v6 )
  {
    sub_1002DF98(v5, (int)v6, (int)&v6[v15], (int)&v15, (int)&v13);
    if ( a3 != 1 )
    {
      lpMem = 0;
      v8 = sub_10033C13(v5, 0, v6, (int)&lpMem);
      if ( v8 )
      {
        v9 = lpMem;
      }
      else
      {
        v10 = lpMem;
        v11 = 0;
        for ( i = lpMem; *(_DWORD *)i; ++v11 )
          i = (char *)i + 4;
        v9 = 0;
        dword_1007CCB4 = v11;
        lpMem = 0;
        v8 = 0;
        dword_1007CCB8 = v10;
      }
      sub_1002D7BC(v9);
      lpMem = 0;
      goto LABEL_18;
    }
    dword_1007CCB4 = v15 - 1;
    v7 = v6;
    v6 = 0;
    dword_1007CCB8 = v7;
  }
  else
  {
    v4 = 12;
    *(_DWORD *)sub_1002E9D5() = 12;
  }
  v8 = v4;
LABEL_18:
  sub_1002D7BC(v6);
  return v8;
}
// 1007CCB4: using guessed type int dword_1007CCB4;
// 1007CCC0: using guessed type int dword_1007CCC0;
// 1007CCC8: using guessed type int dword_1007CCC8;

//----- (1002DF98) --------------------------------------------------------
int __cdecl sub_1002DF98(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // esi@1
  int v6; // edi@1
  bool v7; // cl@3
  char v8; // al@5
  unsigned __int8 v9; // al@8
  signed int v10; // edx@29
  unsigned int v11; // eax@29
  bool v12; // cl@34
  char v13; // al@44
  int result; // eax@61
  unsigned __int8 v15; // [sp+Eh] [bp-2h]@8
  bool v16; // [sp+Fh] [bp-1h]@3
  bool v17; // [sp+Fh] [bp-1h]@20

  v5 = a1;
  *(_DWORD *)a5 = 0;
  v6 = a3;
  *(_DWORD *)a4 = 1;
  if ( a2 )
  {
    *(_DWORD *)a2 = a3;
    a2 += 4;
  }
  v7 = 0;
  v16 = 0;
  do
  {
    if ( *(_BYTE *)v5 == 34 )
    {
      v8 = 34;
      v7 = v7 == 0;
      ++v5;
      v16 = v7;
    }
    else
    {
      ++*(_DWORD *)a5;
      if ( v6 )
        *(_BYTE *)v6++ = *(_BYTE *)v5;
      v9 = *(_BYTE *)v5++;
      v15 = v9;
      if ( sub_10034483(a5, v9) )
      {
        ++*(_DWORD *)a5;
        if ( v6 )
          *(_BYTE *)v6++ = *(_BYTE *)v5;
        ++v5;
      }
      v8 = v15;
      if ( !v15 )
      {
        --v5;
        goto LABEL_20;
      }
      v7 = v16;
    }
  }
  while ( v7 || v8 != 32 && v8 != 9 );
  if ( v6 )
    *(_BYTE *)(v6 - 1) = 0;
LABEL_20:
  v17 = 0;
LABEL_21:
  if ( *(_BYTE *)v5 )
  {
    while ( *(_BYTE *)v5 == 32 || *(_BYTE *)v5 == 9 )
      ++v5;
    if ( *(_BYTE *)v5 )
    {
      if ( a2 )
      {
        *(_DWORD *)a2 = v6;
        a2 += 4;
      }
      ++*(_DWORD *)a4;
      while ( 1 )
      {
        v10 = 1;
        v11 = 0;
        while ( *(_BYTE *)v5 == 92 )
        {
          ++v5;
          ++v11;
        }
        if ( *(_BYTE *)v5 == 34 )
          break;
LABEL_43:
        while ( v11 )
        {
          --v11;
          if ( v6 )
            *(_BYTE *)v6++ = 92;
          ++*(_DWORD *)a5;
        }
        v13 = *(_BYTE *)v5;
        if ( !*(_BYTE *)v5 || !v17 && (v13 == 32 || v13 == 9) )
        {
          if ( v6 )
            *(_BYTE *)v6++ = 0;
          ++*(_DWORD *)a5;
          goto LABEL_21;
        }
        if ( v10 )
        {
          if ( v6 )
            *(_BYTE *)v6++ = v13;
          if ( sub_10034483(a5, *(_BYTE *)v5) )
          {
            ++v5;
            ++*(_DWORD *)a5;
            if ( v6 )
              *(_BYTE *)v6++ = *(_BYTE *)v5;
          }
          ++*(_DWORD *)a5;
        }
        ++v5;
      }
      if ( !(v11 & 1) )
      {
        v12 = v17;
        if ( v17 )
        {
          if ( *(_BYTE *)(v5 + 1) == 34 )
          {
            ++v5;
            goto LABEL_39;
          }
          v12 = v17;
        }
        v10 = 0;
        v17 = v12 == 0;
      }
LABEL_39:
      v11 >>= 1;
      goto LABEL_43;
    }
  }
  if ( a2 )
    *(_DWORD *)a2 = 0;
  result = a4;
  ++*(_DWORD *)result;
  return result;
}

//----- (1002E10D) --------------------------------------------------------
LPVOID __cdecl sub_1002E10D(unsigned int a1, unsigned int a2, unsigned int a3)
{
  LPVOID result; // eax@2
  LPVOID v4; // esi@6

  if ( a1 < 0x3FFFFFFF )
  {
    if ( a2 < 0xFFFFFFFF / a3 && -1 - 4 * a1 > a3 * a2 )
    {
      v4 = sub_1002D75F(a3 * a2 + 4 * a1, 1u);
      sub_1002D7BC(0);
      result = v4;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1002E162) --------------------------------------------------------
signed int __usercall sub_1002E162@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  return sub_1002DE74(a1, a2, a3);
}

//----- (1002E16D) --------------------------------------------------------
signed int __usercall sub_1002E16D@<eax>(int a1@<ebx>)
{
  signed int result; // eax@2
  int v2; // eax@3
  void *v3; // esi@3
  signed int v4; // edi@4
  int v5; // eax@5
  int v6; // edx@5

  if ( dword_1007C960 )
  {
    result = 0;
  }
  else
  {
    sub_100340F8(a1);
    v2 = (int)sub_100344EB();
    v3 = (void *)v2;
    if ( v2 )
    {
      v5 = sub_1002E1C6(v2);
      if ( v5 )
      {
        dword_1007C96C = (LPVOID)v5;
        sub_100333F3((unsigned int)&dword_1007C960, v6, v5);
        v4 = 0;
      }
      else
      {
        v4 = -1;
      }
      sub_1002D7BC(0);
    }
    else
    {
      v4 = -1;
    }
    sub_1002D7BC(v3);
    result = v4;
  }
  return result;
}
// 1007C960: using guessed type int dword_1007C960;

//----- (1002E1C6) --------------------------------------------------------
int __cdecl sub_1002E1C6(int a1)
{
  int v1; // edi@1
  int v2; // edx@1
  const char *v3; // esi@1
  const char i; // al@1
  LPVOID v5; // eax@6
  int v6; // ebx@6
  unsigned int v7; // ecx@8
  int v8; // eax@8
  int v9; // eax@9
  int v10; // esi@9
  int v12; // [sp+Ch] [bp-8h]@8
  LPVOID v13; // [sp+10h] [bp-4h]@7

  v1 = a1;
  v2 = 0;
  v3 = (const char *)a1;
  for ( i = *(_BYTE *)a1; i; i = *v3 )
  {
    if ( i != 61 )
      ++v2;
    v3 += strlen(v3) + 1;
  }
  v5 = sub_1002D75F(v2 + 1, 4u);
  v6 = (int)v5;
  if ( v5 )
  {
    v13 = v5;
    while ( *(_BYTE *)v1 )
    {
      v7 = strlen((const char *)v1);
      v8 = v7 + 1;
      v12 = v7 + 1;
      if ( *(_BYTE *)v1 != 61 )
      {
        v9 = (int)sub_1002D75F(v7 + 1, 1u);
        v10 = v9;
        if ( !v9 )
        {
          sub_1002E297((LPVOID)v6);
          sub_1002D7BC(0);
          goto LABEL_16;
        }
        if ( sub_1002ED3A(v6, v1, v9, v12, v1) )
        {
          sub_1002B7B4(v6, v1);
          __debugbreak();
          JUMPOUT(*(_DWORD *)sub_1002E297);
        }
        *(_DWORD *)v13 = v10;
        v13 = (char *)v13 + 4;
        sub_1002D7BC(0);
        v8 = v12;
      }
      v1 += v8;
    }
  }
  else
  {
LABEL_16:
    v6 = 0;
  }
  sub_1002D7BC(0);
  return v6;
}

//----- (1002E297) --------------------------------------------------------
void __cdecl sub_1002E297(LPVOID lpMem)
{
  void *v1; // eax@2
  LPVOID v2; // edi@2

  if ( lpMem )
  {
    v1 = *(void **)lpMem;
    v2 = lpMem;
    while ( v1 )
    {
      sub_1002D7BC(v1);
      v2 = (char *)v2 + 4;
      v1 = *(void **)v2;
    }
    sub_1002D7BC(lpMem);
  }
}

//----- (1002E2C6) --------------------------------------------------------
int __thiscall sub_1002E2C6(void *this, int (__cdecl *a2)(_DWORD))
{
  void *v2; // esi@1
  int v3; // edi@1
  int result; // eax@2

  v2 = this;
  v3 = (int)((char *)this + 4);
  while ( v2 != (void *)v3 )
  {
    __guard_check_icall_fptr(a2);
    result = a2(v2);
    v2 = (char *)v2 + 4;
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002E306) --------------------------------------------------------
void __cdecl sub_1002E306(LPVOID *a1)
{
  if ( *a1 != dword_1007C96C )
    sub_1002E297(*a1);
}

//----- (1002E321) --------------------------------------------------------
void __cdecl sub_1002E321(LPVOID *a1)
{
  if ( *a1 != dword_1007C968 )
    sub_1002E297(*a1);
}

//----- (1002E33C) --------------------------------------------------------
void sub_1002E33C()
{
  sub_1002E2C6(&dword_1007C960, (int (__cdecl *)(_DWORD))sub_1002E306);
  sub_1002E2C6(&unk_1007C964, (int (__cdecl *)(_DWORD))sub_1002E321);
  sub_1002E297(dword_1007C96C);
  sub_1002E297(dword_1007C968);
}
// 1007C960: using guessed type int dword_1007C960;

//----- (1002E378) --------------------------------------------------------
int __userpurge sub_1002E378@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // edx@1
  int v5; // ecx@1

  sub_1000FFB0((int)&unk_10076EA0, 12);
  *(_DWORD *)(a1 - 28) = 0;
  sub_1002D983(**(_DWORD **)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(a1 - 28) = sub_1002E5A9(*(void **)(a1 + 12));
  *(_DWORD *)(a1 - 4) = -2;
  sub_1002E3BD(a1);
  return sub_1000FFF6(v5, v4);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002E3BD) --------------------------------------------------------
void __usercall sub_1002E3BD(int a1@<ebp>)
{
  sub_1002D9CB(**(_DWORD **)(a1 + 16));
}

//----- (1002E3C9) --------------------------------------------------------
int __userpurge sub_1002E3C9@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // edx@1
  int v5; // ecx@1

  sub_1000FFB0((int)&unk_10076EC0, 12);
  *(_DWORD *)(a1 - 28) = 0;
  sub_1002D983(**(_DWORD **)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  *(_DWORD *)(a1 - 28) = sub_1002E489(*(void **)(a1 + 12));
  *(_DWORD *)(a1 - 4) = -2;
  sub_1002E40E(a1);
  return sub_1000FFF6(v5, v4);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002E40E) --------------------------------------------------------
void __usercall sub_1002E40E(int a1@<ebp>)
{
  sub_1002D9CB(**(_DWORD **)(a1 + 16));
}

//----- (1002E41A) --------------------------------------------------------
int __cdecl sub_1002E41A(int a1, int a2)
{
  int v2; // ebp@0
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@1

  v5 = a1;
  v4 = a1;
  return sub_1002E3C9(v2, (int)&v4, a2, (int)&v5);
}

//----- (1002E442) --------------------------------------------------------
int __cdecl sub_1002E442(int a1, int a2)
{
  int v2; // ebp@0
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@1

  v5 = a1;
  v4 = a1;
  return sub_1002E378(v2, (int)&v4, a2, (int)&v5);
}

//----- (1002E46A) --------------------------------------------------------
int __cdecl sub_1002E46A(int a1)
{
  int v1; // eax@1

  v1 = __ROR4__(a1, 32 - (__security_cookie & 0x1F));
  return __security_cookie ^ v1;
}

//----- (1002E489) --------------------------------------------------------
signed int __thiscall sub_1002E489(void *this)
{
  int v1; // ebx@1
  signed int result; // eax@2
  int v3; // edx@3
  char v4; // si@3
  void *v5; // edi@3
  unsigned int v6; // ebx@3
  int v7; // eax@6
  int v8; // eax@6
  void (*v9)(void); // esi@9
  int v10; // eax@9
  void *v11; // et0@9
  unsigned int v12; // eax@9
  void *v13; // ecx@9
  int v14; // edx@15
  int v15; // edx@15
  void *v16; // [sp+4h] [bp-18h]@1
  char v17; // [sp+8h] [bp-14h]@3
  unsigned int v18; // [sp+Ch] [bp-10h]@5
  void *v19; // [sp+10h] [bp-Ch]@5
  void *v20; // [sp+14h] [bp-8h]@9

  v16 = this;
  v1 = **(_DWORD **)this;
  if ( v1 )
  {
    v3 = __security_cookie;
    v4 = __security_cookie & 0x1F;
    v17 = __security_cookie & 0x1F;
    v5 = (void *)__ROR4__(__security_cookie ^ *(_DWORD *)v1, __security_cookie & 0x1F);
    v6 = __ROR4__(__security_cookie ^ *(_DWORD *)(v1 + 4), __security_cookie & 0x1F);
    if ( v5 && v5 != (void *)-1 )
    {
      v19 = v5;
      v18 = v6;
LABEL_6:
      v7 = __ROR4__(0, 32 - v4);
      v8 = v3 ^ v7;
      while ( 1 )
      {
        v6 -= 4;
        if ( v6 < (unsigned int)v5 )
          break;
        if ( *(_DWORD *)v6 != v8 )
        {
          v9 = (void (*)(void))__ROR4__(v3 ^ *(_DWORD *)v6, v17);
          *(_DWORD *)v6 = v8;
          __guard_check_icall_fptr(v9);
          v9();
          v3 = __security_cookie;
          v4 = __security_cookie & 0x1F;
          v17 = __security_cookie & 0x1F;
          v10 = **(_DWORD **)v16;
          v11 = (void *)__ROR4__(__security_cookie ^ *(_DWORD *)v10, __security_cookie & 0x1F);
          v20 = v11;
          v12 = __ROR4__(__security_cookie ^ *(_DWORD *)(v10 + 4), __security_cookie & 0x1F);
          v13 = v11;
          if ( v11 == v19 )
          {
            if ( v12 == v18 )
              goto LABEL_6;
            v13 = v20;
          }
          v19 = v13;
          v5 = v13;
          v18 = v12;
          v6 = v12;
          goto LABEL_6;
        }
      }
      if ( v5 != (void *)-1 )
      {
        sub_1002D7BC(v5);
        LOBYTE(v3) = __security_cookie;
      }
      v14 = __ROR4__(0, 32 - (v3 & 0x1F));
      v15 = __security_cookie ^ v14;
      ***(_DWORD ***)v16 = v15;
      *(_DWORD *)(**(_DWORD **)v16 + 4) = v15;
      *(_DWORD *)(**(_DWORD **)v16 + 8) = v15;
    }
    result = 0;
  }
  else
  {
    result = -1;
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002E5A9) --------------------------------------------------------
signed int __thiscall sub_1002E5A9(void *this)
{
  int v1; // esi@1
  int v3; // ebx@3
  int v4; // edi@3
  int v5; // esi@3
  int v6; // ebx@3
  signed int v7; // eax@4
  int v8; // esi@4
  int v9; // edi@6
  LPVOID v10; // ST24_4@9
  int v11; // ecx@9
  LPVOID v12; // ST24_4@10
  int v13; // ST24_4@12
  int v14; // eax@12
  int v15; // ecx@12
  int v16; // eax@13
  int v17; // [sp+4h] [bp-Ch]@12
  void *v18; // [sp+8h] [bp-8h]@1
  unsigned int v19; // [sp+Ch] [bp-4h]@12

  v18 = this;
  v1 = **(_DWORD **)this;
  if ( !v1 )
    return -1;
  v3 = *(_DWORD *)v1;
  v4 = __ROR4__(__security_cookie ^ *(_DWORD *)(v1 + 4), __security_cookie & 0x1F);
  v5 = __ROR4__(__security_cookie ^ *(_DWORD *)(v1 + 8), __security_cookie & 0x1F);
  v6 = __ROR4__(__security_cookie ^ v3, __security_cookie & 0x1F);
  if ( v4 == v5 )
  {
    v7 = 512;
    v8 = (v5 - v6) >> 2;
    if ( (unsigned int)v8 <= 0x200 )
      v7 = v8;
    v9 = v7 + v8;
    if ( !(v7 + v8) )
      v9 = 32;
    if ( v9 < (unsigned int)v8 || (v10 = sub_1002E9E8(v9, (LPCVOID)v6, v9, 4u), sub_1002D7BC(0), (v11 = (int)v10) == 0) )
    {
      v9 = v8 + 4;
      v12 = sub_1002E9E8(v8 + 4, (LPCVOID)v6, v8 + 4, 4u);
      sub_1002D7BC(0);
      v11 = (int)v12;
      if ( !v12 )
        return -1;
    }
    v6 = v11;
    v13 = v11 + 4 * v8;
    v5 = v11 + 4 * v9;
    v4 = v13;
    v14 = __ROR4__(0, 32 - (__security_cookie & 0x1F));
    v15 = v13;
    v17 = __security_cookie ^ v14;
    v19 = v5 >= (unsigned int)v13 ? (unsigned int)(v5 - v13 + 3) >> 2 : 0;
    if ( v19 )
    {
      v16 = 0;
      do
      {
        ++v16;
        *(_DWORD *)v15 = v17;
        v15 += 4;
      }
      while ( v16 != v19 );
    }
  }
  *(_DWORD *)v4 = sub_1002E46A(**((_DWORD **)v18 + 1));
  ***(_DWORD ***)v18 = sub_1000F4E5(v6);
  *(_DWORD *)(**(_DWORD **)v18 + 4) = sub_1000F4E5(v4 + 4);
  *(_DWORD *)(**(_DWORD **)v18 + 8) = sub_1000F4E5(v5);
  return 0;
}

//----- (1002E6EA) --------------------------------------------------------
int __cdecl sub_1002E6EA(char a1)
{
  return sub_1002E75A((unsigned int)&unk_1007C970, a1);
}

//----- (1002E700) --------------------------------------------------------
int __cdecl sub_1002E700(char a1)
{
  char *v2; // [sp+0h] [bp-4h]@1

  v2 = &a1;
  return sub_1002E41A(2, (int)&v2);
}

//----- (1002E71D) --------------------------------------------------------
signed int __cdecl sub_1002E71D(int a1)
{
  signed int result; // eax@2
  int v2; // eax@4
  int v3; // eax@4

  if ( a1 )
  {
    if ( *(_DWORD *)a1 == *(_DWORD *)(a1 + 8) )
    {
      v2 = __ROR4__(0, 32 - (__security_cookie & 0x1F));
      v3 = __security_cookie ^ v2;
      *(_DWORD *)a1 = v3;
      *(_DWORD *)(a1 + 4) = v3;
      *(_DWORD *)(a1 + 8) = v3;
    }
    result = 0;
  }
  else
  {
    result = -1;
  }
  return result;
}

//----- (1002E75A) --------------------------------------------------------
int __cdecl sub_1002E75A(char a1, char a2)
{
  char *v3; // [sp+0h] [bp-8h]@1
  char *v4; // [sp+4h] [bp-4h]@1

  v3 = &a1;
  v4 = &a2;
  return sub_1002E442(2, (int)&v3);
}

//----- (1002E77E) --------------------------------------------------------
char __fastcall sub_1002E77E(int a1, int a2)
{
  sub_100333F3((unsigned int)&dword_1007C998, a2, (int)&off_1007A1C8);
  return 1;
}
// 1007A1C8: using guessed type wchar_t *off_1007A1C8;
// 1007C998: using guessed type int dword_1007C998;

//----- (1002E790) --------------------------------------------------------
char sub_1002E790()
{
  sub_1002E71D((int)&unk_1007C970);
  sub_1002E71D((int)&unk_1007C97C);
  return 1;
}

//----- (1002E7AA) --------------------------------------------------------
char sub_1002E7AA()
{
  sub_1002E33C();
  return 1;
}

//----- (1002E7B2) --------------------------------------------------------
char __fastcall sub_1002E7B2(int a1, int a2)
{
  int v2; // esi@1
  int v3; // esi@1
  int v4; // edx@1
  int v5; // edx@1
  int v6; // edx@1

  v2 = __ROR4__(0, 32 - (__security_cookie & 0x1F));
  v3 = __security_cookie ^ v2;
  sub_1002B6F8(a2, v3);
  sub_1002D9E2(v4, v3);
  sub_10033463(v5, v3);
  sub_10034657(v6, v3);
  sub_1002DE3A(v3);
  return 1;
}

//----- (1002E7EF) --------------------------------------------------------
char sub_1002E7EF()
{
  return sub_10027E93(0);
}

//----- (1002E7F8) --------------------------------------------------------
char sub_1002E7F8()
{
  if ( !_InterlockedExchangeAdd((volatile signed __int32 *)off_1007A8E0, 0xFFFFFFFF) && off_1007A8E0 != &unk_1007A6C0 )
  {
    sub_1002D7BC(off_1007A8E0);
    off_1007A8E0 = &unk_1007A6C0;
  }
  sub_1002D7BC(dword_1007C988);
  dword_1007C988 = 0;
  sub_1002D7BC(dword_1007C98C);
  dword_1007C98C = 0;
  sub_1002D7BC(dword_1007CCB8);
  dword_1007CCB8 = 0;
  sub_1002D7BC(dword_1007CCBC);
  dword_1007CCBC = 0;
  return 1;
}

//----- (1002E86F) --------------------------------------------------------
char sub_1002E86F()
{
  return 1;
}

//----- (1002E872) --------------------------------------------------------
char sub_1002E872()
{
  return sub_1003456E(&off_10067B38, (int (**)(void))dword_10067BB0);
}
// 10067B38: using guessed type int (*off_10067B38)();
// 10067BB0: using guessed type int dword_10067BB0[];

//----- (1002E884) --------------------------------------------------------
bool sub_1002E884()
{
  return sub_10030BF4() != 0;
}

//----- (1002E88F) --------------------------------------------------------
char sub_1002E88F()
{
  sub_10030B44();
  return 1;
}

//----- (1002E897) --------------------------------------------------------
char sub_1002E897()
{
  return sub_100345F1((int)&off_10067B38, (int)dword_10067BB0);
}
// 10067B38: using guessed type int (*off_10067B38)();
// 10067BB0: using guessed type int dword_10067BB0[];

//----- (1002E8A9) --------------------------------------------------------
char sub_1002E8A9()
{
  sub_10030CA5();
  return 1;
}

//----- (1002E8BB) --------------------------------------------------------
unsigned int __cdecl sub_1002E8BB(unsigned int *a1, unsigned int a2)
{
  unsigned int *v2; // esi@1
  int v3; // edi@1
  unsigned int result; // eax@1
  unsigned int v5; // ebx@1
  int (*v6)(void); // [sp+Ch] [bp-8h]@2

  v2 = a1;
  v3 = 0;
  result = (a2 - (unsigned int)a1 + 3) >> 2;
  v5 = a2 >= (unsigned int)a1 ? result : 0;
  if ( a2 >= (unsigned int)a1 ? result : 0 )
  {
    do
    {
      result = *v2;
      v6 = (int (*)(void))*v2;
      if ( *v2 )
      {
        __guard_check_icall_fptr(result);
        result = v6();
      }
      ++v2;
      ++v3;
    }
    while ( v3 != v5 );
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002E917) --------------------------------------------------------
int __cdecl sub_1002E917(int (**a1)(void), int (**a2)(void))
{
  int (**i)(void); // esi@1
  int (*v3)(void); // edi@2
  int result; // eax@3

  for ( i = a1; i != a2; ++i )
  {
    v3 = *i;
    if ( *i )
    {
      __guard_check_icall_fptr(*i);
      result = v3();
      if ( result )
        return result;
    }
  }
  return 0;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1002E95C) --------------------------------------------------------
signed int __cdecl sub_1002E95C(int a1)
{
  unsigned int v1; // eax@1
  signed int result; // eax@5

  v1 = 0;
  do
  {
    if ( a1 == dword_10067BB0[2 * v1] )
      return dword_10067BB4[2 * v1];
    ++v1;
  }
  while ( v1 < 0x2D );
  if ( (unsigned int)(a1 - 19) > 0x11 )
    result = (unsigned int)(a1 - 188) > 0xE ? 22 : 8;
  else
    result = 13;
  return result;
}
// 10067BB0: using guessed type int dword_10067BB0[];
// 10067BB4: using guessed type int dword_10067BB4[];

//----- (1002E99F) --------------------------------------------------------
int __cdecl sub_1002E99F(int a1)
{
  signed int v1; // esi@1
  int result; // eax@1

  *(_DWORD *)sub_1002E9C2() = a1;
  v1 = sub_1002E95C(a1);
  result = sub_1002E9D5();
  *(_DWORD *)result = v1;
  return result;
}

//----- (1002E9C2) --------------------------------------------------------
int sub_1002E9C2()
{
  int v0; // eax@1
  int result; // eax@2

  v0 = sub_10030BF4();
  if ( v0 )
    result = v0 + 20;
  else
    result = (int)&unk_1007A1B4;
  return result;
}

//----- (1002E9D5) --------------------------------------------------------
int sub_1002E9D5()
{
  int v0; // eax@1
  int result; // eax@2

  v0 = sub_10030BF4();
  if ( v0 )
    result = v0 + 16;
  else
    result = (int)&unk_1007A1B0;
  return result;
}

//----- (1002E9E8) --------------------------------------------------------
LPVOID __usercall sub_1002E9E8@<eax>(int a1@<edi>, LPCVOID lpMem, unsigned int a3, unsigned int a4)
{
  LPVOID result; // eax@3
  SIZE_T v5; // edi@5
  int v6; // esi@7
  LPVOID v7; // ebx@7
  _DWORD *savedregs; // [sp+0h] [bp+0h]@1

  savedregs = &savedregs;
  if ( a3 && 0xFFFFFFE0 / a3 < a4 )
  {
    *(_DWORD *)sub_1002E9D5() = 12;
    result = 0;
  }
  else
  {
    if ( lpMem )
      v5 = sub_100332FC((int)lpMem, a1, lpMem);
    else
      v5 = 0;
    v6 = a4 * a3;
    v7 = sub_100346B4((LPVOID)lpMem, a4 * a3);
    if ( v7 )
    {
      if ( v5 < v6 )
        sub_10028330((char *)v7 + v5, 0, v6 - v5);
    }
    result = v7;
  }
  return result;
}

//----- (1002EA60) --------------------------------------------------------
signed int __usercall sub_1002EA60@<eax>(int a1@<ebx>, int a2)
{
  int v2; // ebp@0
  volatile signed __int32 *v3; // esi@1
  int v5; // eax@4
  int v6; // edi@4

  v3 = (volatile signed __int32 *)(a2 + 12);
  if ( (*(_DWORD *)(a2 + 12) & 3) != 2 || !(*v3 & 0xC0) )
    return 0;
  v5 = *(_DWORD *)(a2 + 4);
  v6 = *(_DWORD *)a2 - v5;
  *(_DWORD *)a2 = v5;
  *(_DWORD *)(a2 + 8) = 0;
  if ( v6 > 0 )
  {
    sub_1002F4CB(a1, v6, a2);
    if ( v6 != sub_1002FABF(a1, v2, v6) )
    {
      _InterlockedOr(v3, 0x10u);
      return -1;
    }
    if ( ((volatile unsigned __int32)*v3 >> 2) & 1 )
      _InterlockedAnd(v3, 0xFFFFFFFD);
  }
  return 0;
}

//----- (1002EAC6) --------------------------------------------------------
int __usercall sub_1002EAC6@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  int v3; // ebp@0
  int result; // eax@2
  int v5; // eax@6

  if ( a3 )
  {
    if ( sub_1002EA60(a1, a3)
      || (*(_DWORD *)(a3 + 12) >> 11) & 1 && (v5 = sub_1002F4CB(a1, a2, a3), sub_100347DD(a1, a2, v5)) )
      result = -1;
    else
      result = 0;
  }
  else
  {
    result = sub_1002EB16(v3);
  }
  return result;
}

//----- (1002EB0D) --------------------------------------------------------
int __usercall sub_1002EB0D@<eax>(int a1@<ebp>)
{
  return sub_1002EB16(a1);
}

//----- (1002EB16) --------------------------------------------------------
int __usercall sub_1002EB16@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // eax@1
  int v3; // ebx@1
  int v4; // edi@3
  int v5; // edx@14
  int v6; // ecx@14
  int v7; // eax@14
  int v8; // eax@15

  sub_1000FFB0((int)&unk_10076EE0, 28);
  *(_DWORD *)(a1 - 28) = 0;
  *(_DWORD *)(a1 - 36) = 0;
  sub_1002D983(8);
  *(_DWORD *)(a1 - 4) = 0;
  v1 = dword_1007C6FC;
  v2 = dword_1007C6FC + 4 * dword_1007C6F8;
  *(_DWORD *)(a1 - 44) = v2;
  v3 = *(_DWORD *)(a1 + 8);
  while ( 1 )
  {
    *(_DWORD *)(a1 - 32) = v1;
    if ( v1 == v2 )
      break;
    v4 = *(_DWORD *)v1;
    *(_DWORD *)(a1 - 40) = *(_DWORD *)v1;
    if ( v4 )
    {
      sub_1002D91A(v4);
      *(_DWORD *)(a1 - 4) = 1;
      if ( (*(_DWORD *)(v4 + 12) >> 13) & 1 )
      {
        if ( v3 == 1 )
        {
          if ( sub_1002EAC6(1, v4, v4) != -1 )
            ++*(_DWORD *)(a1 - 28);
        }
        else if ( !v3 && (*(_DWORD *)(v4 + 12) >> 1) & 1 && sub_1002EAC6(0, v4, v4) == -1 )
        {
          *(_DWORD *)(a1 - 36) = -1;
        }
      }
      *(_DWORD *)(a1 - 4) = 0;
      sub_1002EBBB(a1);
      v2 = *(_DWORD *)(a1 - 44);
    }
    v1 += 4;
  }
  *(_DWORD *)(a1 - 4) = -2;
  sub_1002EBE5();
  v7 = *(_DWORD *)(a1 - 28);
  if ( v3 != 1 )
    v8 = *(_DWORD *)(a1 - 36);
  return sub_1000FFF6(v6, v5);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007C6F8: using guessed type int dword_1007C6F8;
// 1007C6FC: using guessed type int dword_1007C6FC;

//----- (1002EBB5) --------------------------------------------------------
void __usercall sub_1002EBB5(int a1@<ebp>)
{
  int v1; // ebx@1
  int v2; // esi@1

  v1 = *(_DWORD *)(a1 + 8);
  v2 = *(_DWORD *)(a1 - 32);
  sub_1002EBBB(a1);
}

//----- (1002EBBB) --------------------------------------------------------
void __usercall sub_1002EBBB(int a1@<ebp>)
{
  sub_1002D92E(*(_DWORD *)(a1 - 40));
}

//----- (1002EBE5) --------------------------------------------------------
void sub_1002EBE5()
{
  sub_1002D9CB(8);
}

//----- (1002EC2C) --------------------------------------------------------
void __usercall sub_1002EC2C(__int64 a1@<st0>, __int16 a2@<cx>)
{
  int v2; // eax@2
  bool v3; // zf@2
  char v4; // [sp+0h] [bp-8h]@0

  if ( !dword_1023992C )
    goto LABEL_9;
  v2 = _mm_getcsr() & 0x7F80;
  v3 = v2 == 8064;
  if ( v2 == 8064 )
    v3 = (v4 & 0x7F) == 127;
  if ( v3 )
    sub_10034860(a1);
  else
LABEL_9:
    sub_10034D64(a2, (int)&unk_100690EA);
}
// 1023992C: using guessed type int dword_1023992C;

//----- (1002EC80) --------------------------------------------------------
void __usercall sub_1002EC80(unsigned __int64 a1@<st0>)
{
  int v1; // ST00_4@1
  int v2; // ST04_4@1

  sub_10035298(a1, a1 >> 32);
  sub_1002EC9D(v1, v2);
}
// 1002EC9D: using guessed type double __cdecl sub_1002EC9D(_DWORD, _DWORD);

//----- (1002EC9D) --------------------------------------------------------
#error "1002ED33: call analysis failed (funcsize=60)"

//----- (1002ED3A) --------------------------------------------------------
signed int __usercall sub_1002ED3A@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5)
{
  int v5; // ecx@2
  int v6; // eax@5
  signed int v7; // esi@6
  int v9; // edi@8
  char v10; // al@9
  signed int v11; // [sp-4h] [bp-8h]@5
  int v12; // [sp-4h] [bp-8h]@8

  if ( !a3 )
    goto LABEL_5;
  v5 = a4;
  if ( !a4 )
    goto LABEL_5;
  if ( !a5 )
  {
    *(_BYTE *)a3 = 0;
LABEL_5:
    v6 = sub_1002E9D5();
    v11 = 22;
    goto LABEL_6;
  }
  v12 = a2;
  v9 = a3;
  do
  {
    v10 = *(_BYTE *)(a5 - a3 + v9);
    *(_BYTE *)v9++ = v10;
    if ( !v10 )
      break;
    --v5;
  }
  while ( v5 );
  a2 = v12;
  if ( v5 )
    return 0;
  *(_BYTE *)a3 = 0;
  v6 = sub_1002E9D5();
  v11 = 34;
LABEL_6:
  v7 = v11;
  *(_DWORD *)v6 = v11;
  sub_1002B787(a1, a2);
  return v7;
}

//----- (1002ED94) --------------------------------------------------------
LPVOID __cdecl sub_1002ED94(SIZE_T dwBytes)
{
  signed int v1; // esi@1
  LPVOID result; // eax@6

  v1 = dwBytes;
  if ( dwBytes > 0xFFFFFFE0 )
  {
LABEL_8:
    *(_DWORD *)sub_1002E9D5() = 12;
    result = 0;
  }
  else
  {
    if ( !dwBytes )
      v1 = 1;
    while ( 1 )
    {
      result = HeapAlloc(hHeap, 0, v1);
      if ( result )
        break;
      if ( !sub_100336AF() || !sub_1002D9F6(v1) )
        goto LABEL_8;
    }
  }
  return result;
}

//----- (1002EDE2) --------------------------------------------------------
int __usercall sub_1002EDE2@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // eax@1
  int v3; // edx@3
  int v4; // ecx@3

  sub_1000FFB0((int)&unk_10076F08, 12);
  v1 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)v1 = 0;
  sub_1002D983(8);
  *(_DWORD *)(a1 - 4) = 0;
  v2 = *(_DWORD *)sub_1002EE7C(a1 - 28);
  *(_DWORD *)v1 = v2;
  if ( v2 )
  {
    *(_DWORD *)(v2 + 8) = 0;
    *(_DWORD *)(v2 + 28) = 0;
    *(_DWORD *)v2 = 0;
    *(_DWORD *)(v2 + 4) = 0;
    *(_DWORD *)(v2 + 16) = -1;
  }
  *(_DWORD *)(a1 - 4) = -2;
  sub_1002EE38();
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002EE38) --------------------------------------------------------
void sub_1002EE38()
{
  sub_1002D9CB(8);
}

//----- (1002EE41) --------------------------------------------------------
int __cdecl sub_1002EE41(int a1)
{
  int result; // eax@1

  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 16) = -1;
  *(_DWORD *)(a1 + 20) = 0;
  *(_DWORD *)(a1 + 24) = 0;
  *(_DWORD *)(a1 + 28) = 0;
  result = a1 + 12;
  _InterlockedExchange((volatile signed __int32 *)(a1 + 12), 0);
  return result;
}

//----- (1002EE7C) --------------------------------------------------------
int __cdecl sub_1002EE7C(int a1)
{
  int *v1; // edi@1
  int v2; // ebx@1
  int v3; // esi@2
  int result; // eax@8
  int v5; // [sp+Ch] [bp-4h]@1

  v1 = (int *)(dword_1007C6FC + 12);
  v2 = dword_1007C6FC + 12 + 4 * (dword_1007C6F8 - 3);
  v5 = dword_1007C6FC + 12 + 4 * (dword_1007C6F8 - 3);
  while ( 1 )
  {
    if ( v1 == (int *)v2 )
      goto LABEL_8;
    v3 = *v1;
    if ( !*v1 )
      break;
    if ( !((*(_DWORD *)(v3 + 12) >> 13) & 1) )
    {
      sub_1002D91A(*v1);
      v2 = v5;
      if ( ~(unsigned __int8)((unsigned int)_InterlockedOr((volatile signed __int32 *)(v3 + 12), 0x2000u) >> 13) & 1 )
        goto LABEL_10;
      sub_1002D92E(v3);
    }
    ++v1;
  }
  *v1 = (int)sub_1002D75F(1u, 0x38u);
  sub_1002D7BC(0);
  if ( !*v1 )
  {
LABEL_8:
    result = a1;
    *(_DWORD *)a1 = 0;
    return result;
  }
  *(_DWORD *)(*v1 + 16) = -1;
  sub_10032AC6((LPCRITICAL_SECTION)(*v1 + 32), 0xFA0u, 0);
  v3 = *v1;
  _InterlockedOr((volatile signed __int32 *)(*v1 + 12), 0x2000u);
  sub_1002D91A(v3);
LABEL_10:
  result = a1;
  *(_DWORD *)a1 = v3;
  return result;
}
// 1007C6F8: using guessed type int dword_1007C6F8;
// 1007C6FC: using guessed type int dword_1007C6FC;

//----- (1002EF3F) --------------------------------------------------------
int __cdecl sub_1002EF3F(int a1, int a2)
{
  int v2; // esi@1
  int v3; // eax@4
  char v4; // dl@4
  int v5; // esi@11
  char v6; // cl@11
  signed int v7; // eax@12
  int v8; // eax@15
  int v9; // eax@16
  int v10; // eax@17
  int v11; // eax@18
  int v12; // eax@19
  char v13; // ch@21
  char v14; // al@24
  int v15; // eax@32
  int v16; // eax@33
  int v17; // eax@34
  int v18; // eax@35
  int i; // esi@54
  char v21; // [sp+18h] [bp-4h]@11
  char v22; // [sp+19h] [bp-3h]@11
  char v23; // [sp+1Ah] [bp-2h]@11
  char v24; // [sp+1Bh] [bp-1h]@11

  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  v2 = a2;
  *(_DWORD *)(a1 + 4) = dword_1007CCD4;
  while ( *(_WORD *)v2 == 32 )
    v2 += 2;
  v3 = *(_WORD *)v2;
  v4 = 0;
  if ( v3 == 97 )
  {
    *(_DWORD *)a1 = 265;
LABEL_10:
    *(_DWORD *)(a1 + 4) = 2;
    goto LABEL_11;
  }
  if ( v3 != 114 )
  {
    if ( v3 != 119 )
      goto LABEL_68;
    *(_DWORD *)a1 = 769;
    goto LABEL_10;
  }
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 1;
LABEL_11:
  v5 = v2 + 2;
  v22 = 0;
  v21 = 0;
  v23 = 0;
  v6 = 1;
  v24 = 0;
  while ( 1 )
  {
    v7 = *(_WORD *)v5;
    if ( !(_WORD)v7 )
      break;
    if ( v7 > 83 )
    {
      v15 = v7 - 84;
      if ( v15 )
      {
        v16 = v15 - 14;
        if ( v16 )
        {
          v17 = v16 - 1;
          if ( v17 )
          {
            v18 = v17 - 11;
            if ( v18 )
            {
              if ( v18 != 6 )
                goto LABEL_68;
              v14 = sub_1002F2DB(a1);
            }
            else
            {
              v14 = sub_1002F284(a1, (int)&v22);
            }
          }
          else
          {
            v14 = sub_1002F262(a1, (int)&v22);
          }
        }
        else
        {
          v14 = sub_1002F242(a1);
        }
      }
      else
      {
        v14 = sub_1002F223(a1);
      }
      goto LABEL_42;
    }
    if ( v7 == 83 )
    {
      v13 = v24;
      if ( !v4 )
      {
        *(_DWORD *)a1 |= 0x20u;
        goto LABEL_31;
      }
    }
    else
    {
      v8 = v7 - 32;
      if ( !v8 )
        goto LABEL_43;
      v9 = v8 - 11;
      if ( !v9 )
      {
        v14 = sub_1002F2A6(a1, (int)&v21);
LABEL_42:
        v4 = v23;
        v6 = v14;
        goto LABEL_43;
      }
      v10 = v9 - 1;
      if ( v10 )
      {
        v11 = v10 - 24;
        if ( !v11 )
        {
          v14 = sub_1002F208(a1);
          goto LABEL_42;
        }
        v12 = v11 - 10;
        if ( !v12 )
        {
          *(_DWORD *)a1 |= 0x80u;
          v6 = 1;
LABEL_43:
          v13 = v24;
          goto LABEL_44;
        }
        if ( v12 != 4 )
          goto LABEL_68;
        v13 = v24;
        if ( !v4 )
        {
          *(_DWORD *)a1 |= 0x10u;
LABEL_31:
          v4 = 1;
          v23 = 1;
          v6 = 1;
          goto LABEL_44;
        }
      }
      else
      {
        v13 = 1;
        v24 = 1;
      }
    }
    v6 = 0;
LABEL_44:
    v5 += 2 * (v6 != 0);
    if ( !v6 )
      goto LABEL_47;
  }
  v13 = v24;
LABEL_47:
  if ( !v13 )
    goto LABEL_49;
  do
  {
    v5 += 2;
LABEL_49:
    ;
  }
  while ( *(_WORD *)v5 == 32 );
  if ( v13 )
  {
    if ( sub_1003539C(v5, (int)L"ccs", 3) )
      goto LABEL_68;
    for ( i = v5 + 6; *(_WORD *)i == 32; i += 2 )
      ;
    if ( *(_WORD *)i != 61 )
      goto LABEL_68;
    do
      i += 2;
    while ( *(_WORD *)i == 32 );
    if ( sub_100353D6(a1, 32, i, (int)L"UTF-8", 5) )
    {
      if ( sub_100353D6(a1, 32, i, (int)L"UTF-16LEUNICODE", 8) )
      {
        if ( sub_100353D6(a1, 32, i, (int)L"F-16LEUNICODE", 7) )
          goto LABEL_68;
        v5 = i + 14;
        *(_DWORD *)a1 |= 0x10000u;
      }
      else
      {
        v5 = i + 16;
        *(_DWORD *)a1 |= 0x20000u;
      }
    }
    else
    {
      v5 = i + 10;
      *(_DWORD *)a1 |= 0x40000u;
    }
    while ( *(_WORD *)v5 == 32 )
      v5 += 2;
  }
  if ( *(_WORD *)v5 )
  {
LABEL_68:
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, 32);
    return a1;
  }
  *(_BYTE *)(a1 + 8) = 1;
  return a1;
}
// 10067D28: using guessed type wchar_t aCcs[4];
// 10067D30: using guessed type wchar_t aUtf8[6];
// 10067D3C: using guessed type wchar_t aUtf16leunicode[16];
// 1007CCD4: using guessed type int dword_1007CCD4;

//----- (1002F183) --------------------------------------------------------
int __usercall sub_1002F183@<eax>(int a1@<ebx>, int a2, int a3, int a4, int a5)
{
  int v5; // eax@1
  int result; // eax@2
  char v7; // [sp+8h] [bp-1Ch]@1
  int v8; // [sp+14h] [bp-10h]@1
  unsigned int v9; // [sp+18h] [bp-Ch]@1
  int v10; // [sp+1Ch] [bp-8h]@1
  int v11; // [sp+20h] [bp-4h]@3

  v5 = sub_1002EF3F((int)&v7, a3);
  v8 = *(_DWORD *)v5;
  v9 = *(_DWORD *)(v5 + 4);
  v10 = *(_DWORD *)(v5 + 8);
  if ( !(_BYTE)v10 || sub_10035F0B(a1, (int)&v11) )
  {
    result = 0;
  }
  else
  {
    ++dword_1007C700;
    _InterlockedOr((volatile signed __int32 *)(a5 + 12), v9);
    *(_DWORD *)(a5 + 8) = 0;
    *(_DWORD *)(a5 + 28) = 0;
    *(_DWORD *)(a5 + 4) = 0;
    *(_DWORD *)a5 = 0;
    *(_DWORD *)(a5 + 16) = v11;
    result = a5;
  }
  return result;
}
// 1007C700: using guessed type int dword_1007C700;

//----- (1002F208) --------------------------------------------------------
char __cdecl sub_1002F208(int a1)
{
  char result; // al@2

  if ( *(_DWORD *)a1 & 0x40 )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)a1 |= 0x40u;
    result = 1;
  }
  return result;
}

//----- (1002F223) --------------------------------------------------------
char __cdecl sub_1002F223(int a1)
{
  char result; // al@2

  if ( *(_DWORD *)a1 & 0x1000 )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)a1 |= 0x1000u;
    result = 1;
  }
  return result;
}

//----- (1002F242) --------------------------------------------------------
char __cdecl sub_1002F242(int a1)
{
  char result; // al@2

  if ( *(_DWORD *)a1 & 0xC000 )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)a1 |= 0x8000u;
    result = 1;
  }
  return result;
}

//----- (1002F262) --------------------------------------------------------
char __cdecl sub_1002F262(int a1, int a2)
{
  char result; // al@2

  if ( *(_BYTE *)a2 )
  {
    result = 0;
  }
  else
  {
    *(_BYTE *)a2 = 1;
    result = 1;
    *(_DWORD *)(a1 + 4) |= 0x800u;
  }
  return result;
}

//----- (1002F284) --------------------------------------------------------
char __cdecl sub_1002F284(int a1, int a2)
{
  char result; // al@2

  if ( *(_BYTE *)a2 )
  {
    result = 0;
  }
  else
  {
    *(_BYTE *)a2 = 1;
    result = 1;
    *(_DWORD *)(a1 + 4) &= 0xFFFFF7FF;
  }
  return result;
}

//----- (1002F2A6) --------------------------------------------------------
char __cdecl sub_1002F2A6(int a1, int a2)
{
  char result; // al@2
  unsigned int v3; // ecx@4

  if ( *(_BYTE *)a2 || (*(_BYTE *)a2 = 1, *(_DWORD *)a1 & 2) )
  {
    result = 0;
  }
  else
  {
    v3 = *(_DWORD *)(a1 + 4) & 0xFFFFFFFC | 4;
    *(_DWORD *)a1 = *(_DWORD *)a1 & 0xFFFFFFFE | 2;
    *(_DWORD *)(a1 + 4) = v3;
    result = 1;
  }
  return result;
}

//----- (1002F2DB) --------------------------------------------------------
char __cdecl sub_1002F2DB(int a1)
{
  char result; // al@2

  if ( *(_DWORD *)a1 & 0xC000 )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)a1 |= 0x4000u;
    result = 1;
  }
  return result;
}

//----- (1002F2FB) --------------------------------------------------------
int __usercall sub_1002F2FB@<eax>(int a1@<ebx>, int a2, int a3, int a4, int a5)
{
  return sub_1002F183(a1, a2, a3, a4, a5);
}

//----- (1002F306) --------------------------------------------------------
int __userpurge sub_1002F306@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4, int a5)
{
  signed int v5; // esi@2
  int v6; // edx@4
  int v7; // ecx@4

  sub_1000FFB0((int)&unk_10076F28, 12);
  *(_DWORD *)(a2 - 28) = 0;
  sub_10036072(**(_DWORD **)(a2 + 8));
  *(_DWORD *)(a2 - 4) = 0;
  if ( (unsigned int)(*(&lpCriticalSection + (***(_DWORD ***)(a2 + 12) >> 6)))[2 * (***(_DWORD ***)(a2 + 12) & 0x3F) + 1].LockSemaphore & 1 )
  {
    v5 = sub_1002F42F(a1, ***(_DWORD ***)(a2 + 12));
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 9;
    v5 = -1;
  }
  *(_DWORD *)(a2 - 28) = v5;
  *(_DWORD *)(a2 - 4) = -2;
  sub_1002F37C(a2);
  return sub_1000FFF6(v7, v6);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1002F37C) --------------------------------------------------------
void __usercall sub_1002F37C(int a1@<ebp>)
{
  sub_10036129(**(_DWORD **)(a1 + 16));
}

//----- (1002F388) --------------------------------------------------------
int __usercall sub_1002F388@<eax>(int a1@<ebx>, int a2, int a3)
{
  int v3; // ebp@0
  int v5; // [sp+0h] [bp-Ch]@1
  int v6; // [sp+4h] [bp-8h]@1

  v6 = a2;
  v5 = a2;
  return sub_1002F306(a1, v3, (int)&v5, a3, (int)&v6);
}

//----- (1002F3B0) --------------------------------------------------------
int __usercall sub_1002F3B0@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  int *v4; // [sp+4h] [bp-4h]@6

  if ( a3 == -2 )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
  }
  else
  {
    if ( a3 >= 0
      && a3 < (unsigned int)dword_1007CBA0
      && (unsigned int)(*(&lpCriticalSection + (a3 >> 6)))[2 * (a3 & 0x3F) + 1].LockSemaphore & 1 )
    {
      v4 = &a3;
      return sub_1002F388(a1, a3, (int)&v4);
    }
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
    sub_1002B787(a1, a2);
  }
  return -1;
}
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (1002F42F) --------------------------------------------------------
signed int __usercall sub_1002F42F@<eax>(int a1@<ebx>, int a2)
{
  int v2; // esi@2
  signed int v3; // esi@7
  signed int v4; // eax@8
  signed int result; // eax@11

  if ( sub_100362EF(a1, a2, a2) == -1
    || (a2 == 1 && (unsigned int)lpCriticalSection[5].LockSemaphore & 1
     || a2 == 2 && (unsigned int)lpCriticalSection[3].LockSemaphore & 1)
    && (v3 = sub_100362EF(a1, a2, 2), sub_100362EF(a1, a2, 1) == v3)
    || (v4 = sub_100362EF(a1, a2, a2), CloseHandle((HANDLE)v4)) )
    v2 = 0;
  else
    v2 = GetLastError();
  sub_1003625E(a2);
  LOBYTE((*(&lpCriticalSection + (a2 >> 6)))[2 * (a2 & 0x3F) + 1].LockSemaphore) = 0;
  if ( v2 )
  {
    sub_1002E99F(v2);
    result = -1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1002F4CB) --------------------------------------------------------
signed int __usercall sub_1002F4CB@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  signed int result; // eax@2

  if ( a3 )
  {
    result = *(_DWORD *)(a3 + 16);
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    result = -1;
  }
  return result;
}

//----- (1002F4F1) --------------------------------------------------------
unsigned __int32 __cdecl sub_1002F4F1(int a1)
{
  volatile signed __int32 *v1; // edi@1
  volatile unsigned __int32 result; // eax@1

  v1 = (volatile signed __int32 *)(a1 + 12);
  result = *(_DWORD *)(a1 + 12) >> 13;
  if ( result & 1 )
  {
    result = (volatile unsigned __int32)*v1 >> 6;
    if ( result & 1 )
    {
      sub_1002D7BC(*(LPVOID *)(a1 + 4));
      _InterlockedAnd(v1, 0xFFFFFEBF);
      result = 0;
      *(_DWORD *)(a1 + 4) = 0;
      *(_DWORD *)a1 = 0;
      *(_DWORD *)(a1 + 8) = 0;
    }
  }
  return result;
}

//----- (1002F52F) --------------------------------------------------------
int __cdecl sub_1002F52F(int a1, signed int a2, LPCSTR lpMultiByteStr, int a4)
{
  int v4; // ebx@1
  LPCSTR v5; // edi@1
  UINT v6; // eax@1
  int v7; // ecx@1
  int v8; // edx@2
  int v9; // eax@3
  int v10; // eax@10
  UINT CodePage; // [sp+Ch] [bp-38h]@1
  DWORD v13; // [sp+10h] [bp-34h]@10
  signed int v14; // [sp+18h] [bp-2Ch]@1
  PRTL_CRITICAL_SECTION_DEBUG hFile; // [sp+1Ch] [bp-28h]@1
  const CHAR *v16; // [sp+20h] [bp-24h]@1
  DWORD NumberOfBytesWritten; // [sp+24h] [bp-20h]@11
  __int16 Buffer; // [sp+28h] [bp-1Ch]@2
  WCHAR WideCharStr; // [sp+2Ch] [bp-18h]@2
  CHAR MultiByteStr; // [sp+30h] [bp-14h]@10
  char v21; // [sp+38h] [bp-Ch]@3
  char v22; // [sp+39h] [bp-Bh]@3

  v4 = 48 * (a2 & 0x3F);
  v5 = lpMultiByteStr;
  v14 = a2 >> 6;
  hFile = (*(&lpCriticalSection + (a2 >> 6)))[v4 / 0x18u + 1].DebugInfo;
  v16 = &lpMultiByteStr[a4];
  v6 = GetConsoleCP();
  v7 = (int)&lpMultiByteStr[a4];
  CodePage = v6;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  if ( lpMultiByteStr < &lpMultiByteStr[a4] )
  {
    while ( 1 )
    {
      BYTE1(v7) = *v5;
      WideCharStr = 0;
      HIBYTE(Buffer) = BYTE1(v7);
      v8 = (int)*(&lpCriticalSection + v14);
      LOBYTE(v7) = *(_BYTE *)(v8 + v4 + 45);
      if ( v7 & 4 )
        break;
      if ( !(*(_WORD *)(sub_10032E53(v7, v4) + 2 * *v5) & 0x8000) )
      {
        v9 = sub_1003039C(&WideCharStr, v5, 1);
LABEL_9:
        if ( v9 == -1 )
          return a1;
        goto LABEL_10;
      }
      if ( v5 >= v16 )
      {
        BYTE2((*(&lpCriticalSection + v14))[v4 / 0x18u + 1].SpinCount) = *v5;
        BYTE1((*(&lpCriticalSection + v14))[v4 / 0x18u + 1].SpinCount) |= 4u;
        ++*(_DWORD *)(a1 + 4);
        return a1;
      }
      if ( sub_1003039C(&WideCharStr, v5, 2) == -1 )
        return a1;
      ++v5;
LABEL_10:
      ++v5;
      v10 = WideCharToMultiByte(CodePage, 0, &WideCharStr, 1, &MultiByteStr, 5, 0, 0);
      v13 = v10;
      if ( !v10 )
        return a1;
      if ( !WriteFile(hFile, &MultiByteStr, v10, &NumberOfBytesWritten, 0) )
      {
LABEL_20:
        *(_DWORD *)a1 = GetLastError();
        return a1;
      }
      *(_DWORD *)(a1 + 4) = &v5[*(_DWORD *)(a1 + 8) - (_DWORD)lpMultiByteStr];
      if ( NumberOfBytesWritten < v13 )
        return a1;
      if ( HIBYTE(Buffer) == 10 )
      {
        Buffer = 13;
        if ( !WriteFile(hFile, &Buffer, 1u, &NumberOfBytesWritten, 0) )
          goto LABEL_20;
        if ( NumberOfBytesWritten < 1 )
          return a1;
        ++*(_DWORD *)(a1 + 8);
        ++*(_DWORD *)(a1 + 4);
      }
      if ( v5 >= v16 )
        return a1;
    }
    v21 = *(_BYTE *)(v8 + v4 + 46);
    v22 = BYTE1(v7);
    *(_BYTE *)(v8 + v4 + 45) = v7 & 0xFB;
    v9 = sub_1003039C(&WideCharStr, &v21, 2);
    goto LABEL_9;
  }
  return a1;
}

//----- (1002F6E2) --------------------------------------------------------
int __cdecl sub_1002F6E2(int a1, unsigned int a2, int a3)
{
  unsigned int v3; // edi@1
  int v4; // ebx@2

  v3 = a2;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  if ( v3 < v3 + a3 )
  {
    while ( 1 )
    {
      v4 = *(_WORD *)v3;
      if ( sub_100363AF(*(_WORD *)v3) != (_WORD)v4 )
        break;
      *(_DWORD *)(a1 + 4) += 2;
      if ( v4 == 10 )
      {
        if ( sub_100363AF(13) != 13 )
          break;
        ++*(_DWORD *)(a1 + 4);
        ++*(_DWORD *)(a1 + 8);
      }
      v3 += 2;
      if ( v3 >= a2 + a3 )
        return a1;
    }
    *(_DWORD *)a1 = GetLastError();
  }
  return a1;
}

//----- (1002F74F) --------------------------------------------------------
bool __usercall sub_1002F74F@<al>(int a1@<ebx>, int a2@<edi>, signed int a3)
{
  int v3; // ebp@0
  bool result; // al@2
  signed int v5; // edi@3
  int v6; // esi@3
  DWORD Mode; // [sp+4h] [bp-4h]@7

  if ( sub_10036359(a1, a2, a3) )
  {
    v5 = a3 >> 6;
    v6 = 2 * (a3 & 0x3F);
    if ( (unsigned int)(*(&lpCriticalSection + (a3 >> 6)))[v6 + 1].LockSemaphore & 0x80
      && (*(_DWORD *)(*(_DWORD *)(sub_10030B70(a1, v3) + 76) + 168)
       || BYTE1((*(&lpCriticalSection + v5))[v6 + 1].LockSemaphore)) )
      result = GetConsoleMode((*(&lpCriticalSection + v5))[v6 + 1].DebugInfo, &Mode) != 0;
    else
      result = 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1002F7C5) --------------------------------------------------------
int __cdecl sub_1002F7C5(int a1, signed int a2, unsigned int a3, int a4)
{
  int v4; // ecx@0
  unsigned int v5; // ebx@1
  PRTL_CRITICAL_SECTION_DEBUG v6; // ecx@1
  unsigned int v7; // eax@1
  unsigned int v8; // edi@2
  char v9; // al@4
  DWORD v10; // edi@7
  DWORD v11; // eax@8
  struct _RTL_CRITICAL_SECTION_DEBUG *v13; // [sp+0h] [bp-1410h]@1
  DWORD NumberOfBytesWritten; // [sp+4h] [bp-140Ch]@7
  unsigned int v15; // [sp+8h] [bp-1408h]@1
  char Buffer; // [sp+Ch] [bp-1404h]@2
  char v17; // [sp+140Bh] [bp-5h]@6
  int v18; // [sp+140Ch] [bp-4h]@13
  int savedregs; // [sp+1410h] [bp+0h]@13

  sub_1003B650(v4);
  v5 = a3;
  v6 = (*(&lpCriticalSection + (a2 >> 6)))[2 * (a2 & 0x3F) + 1].DebugInfo;
  *(_DWORD *)a1 = 0;
  v7 = a3 + a4;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  v13 = v6;
  v15 = a3 + a4;
  while ( v5 < v7 )
  {
    v8 = (unsigned int)&Buffer;
    do
    {
      if ( v5 >= v7 )
        break;
      v9 = *(_BYTE *)v5++;
      if ( v9 == 10 )
      {
        ++*(_DWORD *)(a1 + 8);
        *(_BYTE *)v8++ = 13;
      }
      *(_BYTE *)v8++ = v9;
      v7 = v15;
    }
    while ( v8 < (unsigned int)&v17 );
    v10 = v8 - (_DWORD)&Buffer;
    if ( !WriteFile(v6, &Buffer, v10, &NumberOfBytesWritten, 0) )
    {
      *(_DWORD *)a1 = GetLastError();
      return sub_1000FB0D((unsigned int)&savedregs ^ v18);
    }
    v11 = NumberOfBytesWritten;
    *(_DWORD *)(a1 + 4) += NumberOfBytesWritten;
    if ( v11 < v10 )
      return sub_1000FB0D((unsigned int)&savedregs ^ v18);
    v7 = v15;
    v6 = v13;
  }
  return sub_1000FB0D((unsigned int)&savedregs ^ v18);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);
// 1003B650: using guessed type int __thiscall sub_1003B650(_DWORD);

//----- (1002F8A4) --------------------------------------------------------
int __cdecl sub_1002F8A4(int a1, signed int a2, unsigned int a3, int a4)
{
  int v4; // ecx@0
  unsigned int v5; // ebx@1
  PRTL_CRITICAL_SECTION_DEBUG v6; // ecx@1
  unsigned int v7; // eax@1
  unsigned int v8; // edi@2
  int v9; // eax@4
  unsigned int v10; // edi@7
  DWORD v11; // eax@8
  PRTL_CRITICAL_SECTION_DEBUG v13; // [sp+0h] [bp-1410h]@1
  DWORD NumberOfBytesWritten; // [sp+4h] [bp-140Ch]@7
  unsigned int v15; // [sp+8h] [bp-1408h]@1
  char Buffer; // [sp+Ch] [bp-1404h]@2
  char v17; // [sp+140Ah] [bp-6h]@6
  int v18; // [sp+140Ch] [bp-4h]@13
  int savedregs; // [sp+1410h] [bp+0h]@13

  sub_1003B650(v4);
  v5 = a3;
  v6 = (*(&lpCriticalSection + (a2 >> 6)))[2 * (a2 & 0x3F) + 1].DebugInfo;
  v7 = a3 + a4;
  v13 = (*(&lpCriticalSection + (a2 >> 6)))[2 * (a2 & 0x3F) + 1].DebugInfo;
  v15 = a3 + a4;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  while ( v5 < v7 )
  {
    v8 = (unsigned int)&Buffer;
    do
    {
      if ( v5 >= v7 )
        break;
      v9 = *(_WORD *)v5;
      v5 += 2;
      if ( v9 == 10 )
      {
        *(_DWORD *)(a1 + 8) += 2;
        *(_WORD *)v8 = 13;
        v8 += 2;
      }
      *(_WORD *)v8 = v9;
      v8 += 2;
      v7 = v15;
    }
    while ( v8 < (unsigned int)&v17 );
    v10 = (v8 - (_DWORD)&Buffer) & 0xFFFFFFFE;
    if ( !WriteFile(v6, &Buffer, v10, &NumberOfBytesWritten, 0) )
    {
      *(_DWORD *)a1 = GetLastError();
      return sub_1000FB0D((unsigned int)&savedregs ^ v18);
    }
    v11 = NumberOfBytesWritten;
    *(_DWORD *)(a1 + 4) += NumberOfBytesWritten;
    if ( v11 < v10 )
      return sub_1000FB0D((unsigned int)&savedregs ^ v18);
    v7 = v15;
    v6 = v13;
  }
  return sub_1000FB0D((unsigned int)&savedregs ^ v18);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);
// 1003B650: using guessed type int __thiscall sub_1003B650(_DWORD);

//----- (1002F992) --------------------------------------------------------
int __cdecl sub_1002F992(int a1, signed int a2, unsigned int a3, int a4)
{
  int v4; // ecx@0
  unsigned int v5; // ebx@1
  unsigned int v6; // edi@1
  unsigned int v7; // esi@2
  WCHAR *v8; // eax@2
  int v9; // ecx@4
  int v10; // eax@7
  int v12; // [sp+0h] [bp-1418h]@7
  PRTL_CRITICAL_SECTION_DEBUG hFile; // [sp+4h] [bp-1414h]@1
  DWORD NumberOfBytesWritten; // [sp+8h] [bp-1410h]@8
  unsigned int v15; // [sp+Ch] [bp-140Ch]@1
  char MultiByteStr[3416]; // [sp+10h] [bp-1408h]@7
  WCHAR WideCharStr; // [sp+D68h] [bp-6B0h]@2
  char v18; // [sp+1410h] [bp-8h]@6
  int v19; // [sp+1414h] [bp-4h]@13
  int savedregs; // [sp+1418h] [bp+0h]@13

  sub_1003B650(v4);
  v5 = 0;
  v6 = a3;
  hFile = (*(&lpCriticalSection + (a2 >> 6)))[2 * (a2 & 0x3F) + 1].DebugInfo;
  *(_DWORD *)a1 = 0;
  *(_DWORD *)(a1 + 4) = 0;
  v15 = a3 + a4;
  *(_DWORD *)(a1 + 8) = 0;
  if ( a3 < a3 + a4 )
  {
LABEL_2:
    v7 = v15;
    v8 = &WideCharStr;
    do
    {
      if ( v6 >= v7 )
        break;
      v9 = *(_WORD *)v6;
      v6 += 2;
      if ( v9 == 10 )
      {
        *v8 = 13;
        ++v8;
      }
      *v8 = v9;
      ++v8;
    }
    while ( (unsigned int)v8 < (unsigned int)&v18 );
    v10 = WideCharToMultiByte(0xFDE9u, 0, &WideCharStr, v8 - &WideCharStr, MultiByteStr, 3413, 0, 0);
    v12 = v10;
    if ( v10 )
    {
      while ( WriteFile(hFile, &MultiByteStr[v5], v10 - v5, &NumberOfBytesWritten, 0) )
      {
        v5 += NumberOfBytesWritten;
        v10 = v12;
        if ( v5 >= v12 )
        {
          *(_DWORD *)(a1 + 4) = v6 - a3;
          if ( v6 >= v15 )
            return sub_1000FB0D((unsigned int)&savedregs ^ v19);
          v5 = 0;
          goto LABEL_2;
        }
      }
    }
    *(_DWORD *)a1 = GetLastError();
  }
  return sub_1000FB0D((unsigned int)&savedregs ^ v19);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);
// 1003B650: using guessed type int __thiscall sub_1003B650(_DWORD);
// 1002F992: using guessed type CHAR MultiByteStr[3416];

//----- (1002FABF) --------------------------------------------------------
int __usercall sub_1002FABF@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // edx@1
  int v4; // ecx@1
  unsigned int v5; // esi@1
  int v6; // ecx@5

  sub_1000FFB0((int)&unk_10076F48, 20);
  v5 = *(_DWORD *)(a2 + 8);
  if ( v5 == -2 )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
  }
  else if ( (v5 & 0x80000000) == 0
         && v5 < dword_1007CBA0
         && (a1 = (signed int)v5 >> 6,
             v6 = 2 * (*(_DWORD *)(a2 + 8) & 0x3F),
             *(_DWORD *)(a2 - 32) = v6 * 24,
             (unsigned int)(*(&lpCriticalSection + ((signed int)v5 >> 6)))[v6 + 1].LockSemaphore & 1) )
  {
    sub_10036072(v5);
    *(_DWORD *)(a2 - 28) = -1;
    *(_DWORD *)(a2 - 4) = 0;
    if ( *((_BYTE *)&(*(&lpCriticalSection + a1))[1].LockSemaphore + *(_DWORD *)(a2 - 32)) & 1 )
    {
      *(_DWORD *)(a2 - 28) = sub_1002FBAA(a1, v5, *(LPCVOID *)(a2 + 12), *(_DWORD *)(a2 + 16));
    }
    else
    {
      *(_DWORD *)sub_1002E9D5() = 9;
      *(_DWORD *)sub_1002E9C2() = 0;
    }
    *(_DWORD *)(a2 - 4) = -2;
    sub_1002FB81();
  }
  else
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
    sub_1002B787(a1, a3);
  }
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (1002FB7B) --------------------------------------------------------
void __usercall sub_1002FB7B(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // edi@1

  v1 = *(_DWORD *)(a1 + 8);
  v2 = *(_DWORD *)(a1 - 28);
  sub_1002FB81();
}

//----- (1002FB81) --------------------------------------------------------
void sub_1002FB81()
{
  signed int v0; // [sp+0h] [bp-4h]@0

  sub_10036129(v0);
}

//----- (1002FBAA) --------------------------------------------------------
int __usercall sub_1002FBAA@<eax>(int a1@<ebx>, int a2, LPCVOID lpBuffer, int a4)
{
  LPCVOID v4; // edi@1
  int v6; // edx@5
  int v7; // eax@5
  int v8; // ebx@5
  int v9; // eax@14
  int *v10; // esi@15
  int v11; // ecx@18
  void *v12; // eax@25
  int v13; // esi@28
  int v14; // [sp+10h] [bp-28h]@28
  int v15; // [sp+1Ch] [bp-1Ch]@5
  int v16; // [sp+20h] [bp-18h]@5
  DWORD v17; // [sp+24h] [bp-14h]@14
  DWORD NumberOfBytesWritten; // [sp+28h] [bp-10h]@25
  int v19; // [sp+2Ch] [bp-Ch]@25
  DWORD nNumberOfBytesToWrite; // [sp+30h] [bp-8h]@1

  nNumberOfBytesToWrite = a4;
  v4 = lpBuffer;
  if ( !a4 )
    return 0;
  if ( !lpBuffer )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, 0);
    return -1;
  }
  v8 = a2 >> 6;
  v6 = 48 * (a2 & 0x3F);
  v15 = a2 >> 6;
  v7 = (int)*(&lpCriticalSection + (a2 >> 6));
  v16 = v6;
  LOBYTE(v8) = *(_BYTE *)(v7 + v6 + 41);
  if ( ((_BYTE)v8 == 2 || (_BYTE)v8 == 1) && !(~(_BYTE)a4 & 1) )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(v8, (int)lpBuffer);
    return -1;
  }
  if ( *(_BYTE *)(v7 + v6 + 40) & 0x20 )
    sub_10031CFD(v8, (int)lpBuffer, a2, 0i64, 2u);
  if ( sub_1002F74F(v8, (int)lpBuffer, a2) )
  {
    if ( (_BYTE)v8 )
    {
      if ( (unsigned __int8)(v8 - 1) > 1u )
        goto LABEL_34;
      v9 = sub_1002F6E2((int)&v17, (unsigned int)lpBuffer, nNumberOfBytesToWrite);
    }
    else
    {
      v9 = sub_1002F52F((int)&v17, a2, (LPCSTR)lpBuffer, nNumberOfBytesToWrite);
    }
LABEL_15:
    v10 = (int *)v9;
    goto LABEL_28;
  }
  v11 = (int)*(&lpCriticalSection + v15);
  if ( *(_BYTE *)(v11 + v16 + 40) & 0x80 )
  {
    if ( (_BYTE)v8 )
    {
      if ( (char)v8 == 1 )
      {
        v9 = sub_1002F992((int)&v17, a2, (unsigned int)lpBuffer, nNumberOfBytesToWrite);
      }
      else
      {
        if ( (char)v8 != 2 )
          goto LABEL_34;
        v9 = sub_1002F8A4((int)&v17, a2, (unsigned int)lpBuffer, nNumberOfBytesToWrite);
      }
    }
    else
    {
      v9 = sub_1002F7C5((int)&v17, a2, (unsigned int)lpBuffer, nNumberOfBytesToWrite);
    }
    goto LABEL_15;
  }
  v12 = *(void **)(v11 + v16 + 24);
  v17 = 0;
  NumberOfBytesWritten = 0;
  v19 = 0;
  if ( !WriteFile(v12, lpBuffer, nNumberOfBytesToWrite, &NumberOfBytesWritten, 0) )
    v17 = GetLastError();
  v10 = (int *)&v17;
LABEL_28:
  v14 = *v10;
  v13 = (int)(v10 + 1);
  if ( !*(_DWORD *)v13 )
  {
    if ( v14 )
    {
      if ( v14 == 5 )
      {
        *(_DWORD *)sub_1002E9D5() = 9;
        *(_DWORD *)sub_1002E9C2() = 5;
      }
      else
      {
        sub_1002E99F(v14);
      }
      return -1;
    }
    v4 = lpBuffer;
LABEL_34:
    if ( *((_BYTE *)&(*(&lpCriticalSection + v15))[1].LockSemaphore + v16) & 0x40 && *(_BYTE *)v4 == 26 )
      return 0;
    *(_DWORD *)sub_1002E9D5() = 28;
    *(_DWORD *)sub_1002E9C2() = 0;
    return -1;
  }
  return *(_DWORD *)v13 - *(_DWORD *)(v13 + 4);
}

//----- (1002FDB6) --------------------------------------------------------
signed int __usercall sub_1002FDB6@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4)
{
  int v4; // edi@1
  int v5; // eax@3
  signed int result; // eax@4

  v4 = sub_1002F4CB(a1, a2, a4);
  if ( !(*(_DWORD *)(a4 + 12) & 6) )
  {
    *(_DWORD *)sub_1002E9D5() = 9;
LABEL_3:
    v5 = a4;
LABEL_4:
    _InterlockedOr((volatile signed __int32 *)(v5 + 12), 0x10u);
    return -1;
  }
  if ( (*(_DWORD *)(a4 + 12) >> 12) & 1 )
  {
    *(_DWORD *)sub_1002E9D5() = 34;
    goto LABEL_3;
  }
  if ( *(_DWORD *)(a4 + 12) & 1 )
  {
    *(_DWORD *)(a4 + 8) = 0;
    v5 = a4;
    if ( !((*(_DWORD *)(a4 + 12) >> 3) & 1) )
      goto LABEL_4;
    *(_DWORD *)a4 = *(_DWORD *)(a4 + 4);
    _InterlockedAnd((volatile signed __int32 *)(a4 + 12), 0xFFFFFFFE);
  }
  _InterlockedOr((volatile signed __int32 *)(a4 + 12), 2u);
  _InterlockedAnd((volatile signed __int32 *)(a4 + 12), 0xFFFFFFF7);
  *(_DWORD *)(a4 + 8) = 0;
  if ( !(*(_DWORD *)(a4 + 12) & 0x4C0)
    && ((char *)a4 != sub_1002D8BE(1) && (char *)a4 != sub_1002D8BE(2) || !sub_10036359(2, v4, v4)) )
    sub_100363F4(a4);
  if ( sub_1002FEC7(a3, v4, a3, a4) )
  {
    result = (unsigned __int8)a3;
  }
  else
  {
    _InterlockedOr((volatile signed __int32 *)(a4 + 12), 0x10u);
    result = -1;
  }
  return result;
}

//----- (1002FEC7) --------------------------------------------------------
bool __usercall sub_1002FEC7@<al>(int a1@<ebx>, int a2@<edi>, char a3, int a4)
{
  int v4; // ebp@0
  signed int v5; // edx@1
  int v6; // edi@2
  int v7; // eax@2
  int v8; // esi@2
  int v9; // ST08_4@3
  int v10; // eax@4
  struct _RTL_CRITICAL_SECTION *v11; // eax@7
  int v12; // eax@10
  int v13; // edx@10

  v5 = sub_1002F4CB(a1, a2, a4);
  if ( !(*(_DWORD *)(a4 + 12) & 0xC0) )
    return sub_1002FABF(a1, v4, a2) == 1;
  v6 = 0;
  v7 = *(_DWORD *)(a4 + 4);
  v8 = *(_DWORD *)a4 - v7;
  *(_DWORD *)a4 = v7 + 1;
  *(_DWORD *)(a4 + 8) = *(_DWORD *)(a4 + 24) - 1;
  if ( v8 <= 0 )
  {
    if ( v5 == -1 || v5 == -2 )
      v11 = (struct _RTL_CRITICAL_SECTION *)&unk_1007A290;
    else
      v11 = &(*(&lpCriticalSection + (v5 >> 6)))[2 * (v5 & 0x3F)];
    if ( (unsigned int)v11[1].LockSemaphore & 0x20 )
    {
      v12 = sub_10031CE2(a1);
      if ( (v13 & v12) == -1 )
      {
        _InterlockedOr((volatile signed __int32 *)(a4 + 12), 0x10u);
        LOBYTE(v10) = 1;
        return v10;
      }
    }
  }
  else
  {
    v9 = *(_DWORD *)(a4 + 4);
    v6 = sub_1002FABF(a1, v4, 0);
  }
  **(_BYTE **)(a4 + 4) = a3;
  LOBYTE(v10) = v6 == v8;
  return v10;
}

//----- (1002FF93) --------------------------------------------------------
signed int __usercall sub_1002FF93@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4)
{
  return sub_1002FDB6(a1, a2, a3, a4);
}

//----- (1002FF9E) --------------------------------------------------------
char __usercall sub_1002FF9E@<al>(int a1@<ebx>, int a2@<edi>, int a3)
{
  signed int v3; // eax@1
  LPVOID *v5; // edi@4
  LPVOID v6; // eax@8

  v3 = sub_1002F4CB(a1, a2, a3);
  if ( !sub_10036359(a1, a2, v3) )
    return 0;
  if ( (char *)a3 == sub_1002D8BE(1) )
  {
    v5 = &dword_1007C988;
  }
  else
  {
    if ( (char *)a3 != sub_1002D8BE(2) )
      return 0;
    v5 = &dword_1007C98C;
  }
  ++dword_1007C700;
  if ( *(_DWORD *)(a3 + 12) & 0x4C0 )
    return 0;
  _InterlockedOr((volatile signed __int32 *)(a3 + 12), 0x282u);
  v6 = *v5;
  if ( *v5 || (*v5 = sub_1002ED94(0x1000u), sub_1002D7BC(0), (v6 = *v5) != 0) )
  {
    *(_DWORD *)(a3 + 4) = v6;
    *(_DWORD *)a3 = *v5;
    *(_DWORD *)(a3 + 8) = 4096;
    *(_DWORD *)(a3 + 24) = 4096;
  }
  else
  {
    *(_DWORD *)(a3 + 8) = 2;
    *(_DWORD *)(a3 + 4) = a3 + 20;
    *(_DWORD *)a3 = a3 + 20;
    *(_DWORD *)(a3 + 24) = 2;
  }
  return 1;
}
// 1007C700: using guessed type int dword_1007C700;

//----- (10030053) --------------------------------------------------------
int __usercall sub_10030053@<eax>(int a1@<ebx>, char a2, int a3)
{
  int result; // eax@2

  if ( a2 )
  {
    result = *(_DWORD *)(a3 + 12) >> 9;
    if ( result & 1 )
    {
      sub_1002EA60(a1, a3);
      _InterlockedAnd((volatile signed __int32 *)(a3 + 12), 0xFFFFFD7F);
      result = 0;
      *(_DWORD *)(a3 + 24) = 0;
      *(_DWORD *)(a3 + 4) = 0;
      *(_DWORD *)a3 = 0;
    }
  }
  return result;
}

//----- (1003008C) --------------------------------------------------------
int __usercall sub_1003008C@<eax>(int a1@<ebx>, int a2, int a3)
{
  int result; // eax@1
  int v4; // [sp+0h] [bp-10h]@1
  char v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+Ch] [bp-4h]@1

  sub_10029BD2((int)&v4, a1, a3);
  result = sub_1002D27B(a1, a2, 4, (int)&v5);
  if ( v6 )
    *(_DWORD *)(v4 + 848) &= 0xFFFFFFFD;
  return result;
}

//----- (100300C4) --------------------------------------------------------
int __usercall sub_100300C4@<eax>(int a1@<ebx>, int a2)
{
  int result; // eax@2
  wchar_t v3; // ax@3

  if ( dword_1007C994 )
  {
    result = sub_1003008C(a1, a2, 0);
  }
  else
  {
    v3 = off_1007A1C8[a2];
    result = v3 & 4;
  }
  return result;
}
// 1007A1C8: using guessed type wchar_t *off_1007A1C8;
// 1007C994: using guessed type int dword_1007C994;

//----- (100300F1) --------------------------------------------------------
int __usercall sub_100300F1@<eax>(int a1@<ebx>, int a2, DWORD dwMapFlags, int a4)
{
  int v4; // ecx@3
  int result; // eax@5
  int v6; // ecx@11
  int v7; // eax@13
  int v8; // edx@19
  int v9; // [sp+4h] [bp-1Ch]@1
  int v10; // [sp+8h] [bp-18h]@2
  char v11; // [sp+10h] [bp-10h]@3
  int v12; // [sp+14h] [bp-Ch]@10
  WCHAR DestStr; // [sp+18h] [bp-8h]@13
  char v14; // [sp+1Ah] [bp-6h]@13
  CHAR MultiByteStr[2]; // [sp+1Ch] [bp-4h]@9
  char v16; // [sp+1Eh] [bp-2h]@9

  sub_10029BD2((int)&v9, a1, a4);
  if ( (unsigned int)a2 < 0x100 )
  {
    if ( (unsigned __int8)sub_1003023B(a2, a2, (int)&v10) )
    {
      v4 = *(_BYTE *)(*(_DWORD *)(v10 + 148) + a2);
      if ( v11 )
        *(_DWORD *)(v9 + 848) &= 0xFFFFFFFD;
      return v4;
    }
    if ( v11 )
      *(_DWORD *)(v9 + 848) &= 0xFFFFFFFD;
    return a2;
  }
  *(_WORD *)MultiByteStr = 0;
  v16 = 0;
  if ( *(_DWORD *)(v10 + 4) > 1 && (v12 = a2 >> 8, sub_10036451(a2, BYTE1(a2), (int)&v10)) )
  {
    MultiByteStr[0] = v12;
    MultiByteStr[1] = a2;
    v16 = 0;
    v6 = 2;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 42;
    MultiByteStr[0] = a2;
    v6 = 1;
    MultiByteStr[1] = 0;
  }
  DestStr = 0;
  v14 = 0;
  v7 = sub_100331C7(
         a2,
         (int)&v10,
         *(_DWORD *)(v10 + 168),
         dwMapFlags,
         MultiByteStr,
         v6,
         &DestStr,
         3,
         *(_DWORD *)(v10 + 8),
         1);
  if ( !v7 )
  {
    if ( v11 )
      *(_DWORD *)(v9 + 848) &= 0xFFFFFFFD;
    return a2;
  }
  if ( v7 == 1 )
  {
    result = (unsigned __int8)DestStr;
    if ( v11 )
      *(_DWORD *)(v9 + 848) &= 0xFFFFFFFD;
  }
  else
  {
    v8 = HIBYTE(DestStr) | ((unsigned __int8)DestStr << 8);
    if ( v11 )
      *(_DWORD *)(v9 + 848) &= 0xFFFFFFFD;
    result = v8;
  }
  return result;
}

//----- (1003023B) --------------------------------------------------------
BOOL __usercall sub_1003023B@<eax>(int a1@<ebx>, int a2, int a3)
{
  return sub_1002D27B(a1, a2, 1, a3) != 0;
}

//----- (10030258) --------------------------------------------------------
int __usercall sub_10030258@<eax>(int a1@<ebx>, int a2, int a3)
{
  return sub_100300F1(a1, a2, 0x100u, a3);
}

//----- (10030272) --------------------------------------------------------
int __usercall sub_10030272@<eax>(int a1@<ebx>, int a2)
{
  int v2; // ecx@2

  if ( dword_1007C994 )
  {
    v2 = sub_10030258(a1, a2, 0);
  }
  else
  {
    v2 = a2;
    if ( (unsigned int)(a2 - 65) <= 0x19 )
      v2 = a2 + 32;
  }
  return v2;
}
// 1007C994: using guessed type int dword_1007C994;

//----- (100302A2) --------------------------------------------------------
int __cdecl sub_100302A2(LPWSTR lpWideCharStr, LPCSTR lpMultiByteStr, int a3, int a4)
{
  signed int v5; // edi@11
  int v6; // edi@13
  bool v7; // cf@14
  int v8; // eax@15
  int v9; // [sp+8h] [bp-10h]@8
  int v10; // [sp+Ch] [bp-Ch]@8
  char v11; // [sp+14h] [bp-4h]@22

  if ( !lpMultiByteStr || !a3 )
    return 0;
  if ( !*lpMultiByteStr )
  {
    if ( lpWideCharStr )
      *lpWideCharStr = 0;
    return 0;
  }
  sub_10029BD2((int)&v9, a3, a4);
  if ( !*(_DWORD *)(v10 + 168) )
  {
    if ( lpWideCharStr )
      *lpWideCharStr = *lpMultiByteStr;
    v5 = 1;
    goto LABEL_22;
  }
  if ( !sub_10036451(a3, *lpMultiByteStr, (int)&v10) )
  {
    v5 = 1;
    if ( MultiByteToWideChar(*(_DWORD *)(v10 + 8), 9u, lpMultiByteStr, 1, lpWideCharStr, lpWideCharStr != 0) )
      goto LABEL_22;
    goto LABEL_21;
  }
  v6 = v10;
  if ( *(_DWORD *)(v10 + 4) <= 1 )
    goto LABEL_27;
  v7 = (unsigned int)a3 < *(_DWORD *)(v10 + 4);
  if ( a3 < *(_DWORD *)(v10 + 4) )
  {
LABEL_17:
    if ( !v7 && lpMultiByteStr[1] )
      goto LABEL_19;
LABEL_21:
    v5 = -1;
    *(_DWORD *)sub_1002E9D5() = 42;
    goto LABEL_22;
  }
  v8 = MultiByteToWideChar(
         *(_DWORD *)(v10 + 8),
         9u,
         lpMultiByteStr,
         *(_DWORD *)(v10 + 4),
         lpWideCharStr,
         lpWideCharStr != 0);
  v6 = v10;
  if ( !v8 )
  {
LABEL_27:
    v7 = (unsigned int)a3 < *(_DWORD *)(v6 + 4);
    goto LABEL_17;
  }
LABEL_19:
  v5 = *(_DWORD *)(v6 + 4);
LABEL_22:
  if ( v11 )
    *(_DWORD *)(v9 + 848) &= 0xFFFFFFFD;
  return v5;
}

//----- (1003039C) --------------------------------------------------------
int __cdecl sub_1003039C(LPWSTR lpWideCharStr, LPCSTR lpMultiByteStr, int a3)
{
  return sub_100302A2(lpWideCharStr, lpMultiByteStr, a3, 0);
}

//----- (100303B6) --------------------------------------------------------
int __cdecl sub_100303B6(int a1, LPSTR lpMultiByteStr, int cbMultiByte, WCHAR WideCharStr, int a5)
{
  signed int v6; // esi@9
  int v7; // ecx@25
  int v8; // [sp+8h] [bp-14h]@10
  int v9; // [sp+Ch] [bp-10h]@10
  char v10; // [sp+14h] [bp-8h]@16
  BOOL UsedDefaultChar; // [sp+18h] [bp-4h]@25

  if ( lpMultiByteStr || !cbMultiByte )
  {
    if ( a1 )
      *(_DWORD *)a1 = -1;
    if ( (unsigned int)cbMultiByte > 0x7FFFFFFF )
    {
      v6 = 22;
      *(_DWORD *)sub_1002E9D5() = 22;
      sub_1002B787((int)lpMultiByteStr, cbMultiByte);
      return v6;
    }
    sub_10029BD2((int)&v8, (int)lpMultiByteStr, a5);
    v6 = 0;
    if ( *(_DWORD *)(v9 + 168) )
    {
      UsedDefaultChar = 0;
      v7 = WideCharToMultiByte(
             *(_DWORD *)(v9 + 8),
             0,
             &WideCharStr,
             1,
             lpMultiByteStr,
             cbMultiByte,
             0,
             &UsedDefaultChar);
      if ( v7 )
      {
        if ( !UsedDefaultChar )
        {
          if ( a1 )
            *(_DWORD *)a1 = v7;
          goto LABEL_16;
        }
        goto LABEL_15;
      }
      if ( GetLastError() != 122 )
      {
LABEL_15:
        v6 = 42;
        *(_DWORD *)sub_1002E9D5() = 42;
        goto LABEL_16;
      }
      if ( lpMultiByteStr && cbMultiByte )
        sub_10028330(lpMultiByteStr, 0, cbMultiByte);
    }
    else
    {
      if ( WideCharStr > 0xFFu )
      {
        if ( lpMultiByteStr && cbMultiByte )
          sub_10028330(lpMultiByteStr, 0, cbMultiByte);
        goto LABEL_15;
      }
      if ( !lpMultiByteStr )
      {
LABEL_23:
        if ( a1 )
          *(_DWORD *)a1 = 1;
        goto LABEL_16;
      }
      if ( cbMultiByte )
      {
        *lpMultiByteStr = WideCharStr;
        goto LABEL_23;
      }
    }
    v6 = 34;
    *(_DWORD *)sub_1002E9D5() = 34;
    sub_1002B787((int)lpMultiByteStr, cbMultiByte);
LABEL_16:
    if ( v10 )
      *(_DWORD *)(v8 + 848) &= 0xFFFFFFFD;
    return v6;
  }
  if ( a1 )
    *(_DWORD *)a1 = 0;
  return 0;
}

//----- (100304D7) --------------------------------------------------------
int __cdecl sub_100304D7(int a1, LPSTR lpMultiByteStr, int cbMultiByte, WCHAR WideCharStr)
{
  return sub_100303B6(a1, lpMultiByteStr, cbMultiByte, WideCharStr, 0);
}

//----- (100304F4) --------------------------------------------------------
int __cdecl sub_100304F4(int a1, int a2)
{
  int v2; // edx@2
  int k; // ecx@4
  int v4; // ecx@7
  int v5; // ecx@8
  int v7; // edi@8
  int v8; // edx@18
  int j; // ecx@20
  __m128i *v10; // ecx@24
  int v11; // edi@24
  int i; // ecx@33

  if ( dword_1007C190 < 5 )
  {
    if ( dword_1007C190 < 1 )
    {
      for ( i = a1; i != a1 + a2; ++i )
      {
        if ( !*(_BYTE *)i )
          break;
      }
      v4 = i - a1;
    }
    else
    {
      v8 = (a1 & 0xF) != 0 ? 16 - (a1 & 0xF) : 0;
      if ( a2 < (unsigned int)v8 )
        v8 = a2;
      for ( j = a1; j != v8 + a1; ++j )
      {
        if ( !*(_BYTE *)j )
          break;
      }
      v4 = j - a1;
      if ( v4 == v8 )
      {
        v10 = (__m128i *)(a1 + v4);
        v11 = (int)((char *)v10 + a2 - v8 - (((_BYTE)a2 - (_BYTE)v8) & 0xF));
        while ( v10 != (__m128i *)v11 && !_mm_movemask_epi8(_mm_cmpeq_epi8(*v10, 0i64)) )
          ++v10;
        while ( v10 != (__m128i *)(a1 + a2) && LOBYTE(v10->m128i_i32[0]) )
          v10 = (__m128i *)((char *)v10 + 1);
        v4 = (int)((char *)v10 - a1);
      }
    }
  }
  else
  {
    v2 = (a1 & 0x1F) != 0 ? 32 - (a1 & 0x1F) : 0;
    if ( a2 < (unsigned int)v2 )
      v2 = a2;
    for ( k = a1; k != v2 + a1; ++k )
    {
      if ( !*(_BYTE *)k )
        break;
    }
    v4 = k - a1;
    if ( v4 == v2 )
    {
      v5 = a1 + v4;
      _EAX = ((_BYTE)a2 - (_BYTE)v2) & 0x1F;
      __asm { vxorps  ymm1, ymm1, ymm1 }
      v7 = v5 + a2 - v2 - _EAX;
      while ( v5 != v7 )
      {
        __asm
        {
          vpcmpeqb ymm0, ymm1, ymmword ptr [ecx]
          vpmovmskb eax, ymm0
        }
        if ( _EAX )
          break;
        v5 += 32;
      }
      while ( v5 != a1 + a2 && *(_BYTE *)v5 )
        ++v5;
      v4 = v5 - a1;
      __asm { vzeroupper }
    }
  }
  return v4;
}
// 1007C190: using guessed type int dword_1007C190;

//----- (1003061B) --------------------------------------------------------
int __cdecl sub_1003061B(int a1, unsigned int a2)
{
  int v2; // edx@3
  int v3; // eax@3
  unsigned int v4; // esi@7
  int j; // edx@9
  int v6; // edx@12
  int v7; // edx@13
  int v9; // ecx@13
  int v10; // eax@24
  unsigned int v11; // esi@28
  int i; // edx@30
  __m128i *v13; // edx@34
  int v14; // ecx@34
  signed int v15; // edx@42
  int v16; // eax@43
  int v18; // [sp+8h] [bp-4h]@9
  int v19; // [sp+8h] [bp-4h]@30

  if ( dword_1007C190 < 5 )
  {
    if ( dword_1007C190 < 1 )
    {
      v2 = a1;
      v16 = a1 + 2 * a2;
      if ( a1 != v16 )
      {
        do
        {
          if ( !*(_WORD *)v2 )
            break;
          v2 += 2;
        }
        while ( v2 != v16 );
      }
      goto LABEL_46;
    }
    if ( a1 & 1 )
    {
      v2 = a1;
      v10 = a1 + 2 * a2;
      if ( a1 != v10 )
      {
        do
        {
          if ( !*(_WORD *)v2 )
            break;
          v2 += 2;
        }
        while ( v2 != v10 );
      }
      goto LABEL_46;
    }
    v11 = ((16 - (a1 & 0xF)) & (unsigned int)-((a1 & 0xF) != 0)) >> 1;
    if ( a2 < v11 )
      v11 = a2;
    v19 = a1 + 2 * v11;
    for ( i = a1; i != v19; i += 2 )
    {
      if ( !*(_WORD *)i )
        break;
    }
    v6 = (i - a1) >> 1;
    if ( v6 == v11 )
    {
      v13 = (__m128i *)(a1 + 2 * v6);
      v14 = (int)((char *)v13 + 2 * (a2 - v11 - (((_BYTE)a2 - (_BYTE)v11) & 0xF)));
      while ( v13 != (__m128i *)v14 && !_mm_movemask_epi8(_mm_cmpeq_epi16(*v13, 0i64)) )
        ++v13;
      while ( v13 != (__m128i *)(a1 + 2 * a2) && LOWORD(v13->m128i_i32[0]) )
        v13 = (__m128i *)((char *)v13 + 2);
      v15 = (signed int)((char *)v13 - a1);
      return v15 >> 1;
    }
  }
  else
  {
    if ( a1 & 1 )
    {
      v2 = a1;
      v3 = a1 + 2 * a2;
      if ( a1 != v3 )
      {
        do
        {
          if ( !*(_WORD *)v2 )
            break;
          v2 += 2;
        }
        while ( v2 != v3 );
      }
LABEL_46:
      v15 = v2 - a1;
      return v15 >> 1;
    }
    v4 = ((32 - (a1 & 0x1F)) & (unsigned int)-((a1 & 0x1F) != 0)) >> 1;
    if ( a2 < v4 )
      v4 = a2;
    v18 = a1 + 2 * v4;
    for ( j = a1; j != v18; j += 2 )
    {
      if ( !*(_WORD *)j )
        break;
    }
    v6 = (j - a1) >> 1;
    if ( v6 == v4 )
    {
      v7 = a1 + 2 * v6;
      _EAX = ((_BYTE)a2 - (_BYTE)v4) & 0x1F;
      __asm { vxorps  ymm1, ymm1, ymm1 }
      v9 = v7 + 2 * (a2 - v4 - _EAX);
      while ( v7 != v9 )
      {
        __asm
        {
          vpcmpeqw ymm0, ymm1, ymmword ptr [edx]
          vpmovmskb eax, ymm0
        }
        if ( _EAX )
          break;
        v7 += 32;
      }
      while ( v7 != a1 + 2 * a2 && *(_WORD *)v7 )
        v7 += 2;
      v6 = (v7 - a1) >> 1;
      __asm { vzeroupper }
    }
  }
  return v6;
}
// 1007C190: using guessed type int dword_1007C190;

//----- (100307D2) --------------------------------------------------------
int __userpurge sub_100307D2@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // edx@1
  int v5; // ecx@1

  sub_1000FFB0((int)&unk_10076F88, 8);
  sub_1002D983(**(_DWORD **)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  sub_10030AF9(***(_DWORD ***)(a1 + 12), ***(_DWORD ***)(*(_DWORD *)(a1 + 12) + 4));
  *(_DWORD *)(a1 - 4) = -2;
  sub_10030816(a1);
  return sub_1000FFF6(v5, v4);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (10030816) --------------------------------------------------------
void __usercall sub_10030816(int a1@<ebp>)
{
  sub_1002D9CB(**(_DWORD **)(a1 + 16));
}

//----- (10030822) --------------------------------------------------------
int __userpurge sub_10030822@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  void *v4; // ecx@1
  int v5; // edx@5
  int v6; // ecx@5

  sub_1000FFB0((int)&unk_10076FA8, 8);
  sub_1002D983(**(_DWORD **)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  v4 = *(void **)(***(_DWORD ***)(a1 + 12) + 72);
  if ( v4 && !_InterlockedExchangeAdd((volatile signed __int32 *)v4, 0xFFFFFFFF) && v4 != &unk_1007A6C0 )
    sub_1002D7BC(v4);
  *(_DWORD *)(a1 - 4) = -2;
  sub_10030877(a1);
  return sub_1000FFF6(v6, v5);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (10030877) --------------------------------------------------------
void __usercall sub_10030877(int a1@<ebp>)
{
  sub_1002D9CB(**(_DWORD **)(a1 + 16));
}

//----- (10030883) --------------------------------------------------------
int __userpurge sub_10030883@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // edx@1
  int v5; // ecx@1

  sub_1000FFB0((int)&unk_10076FC8, 8);
  sub_1002D983(**(_DWORD **)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  sub_10030AF9(***(_DWORD ***)(a1 + 12), 0);
  *(_DWORD *)(a1 - 4) = -2;
  sub_100308C2(a1);
  return sub_1000FFF6(v5, v4);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (100308C2) --------------------------------------------------------
void __usercall sub_100308C2(int a1@<ebp>)
{
  sub_1002D9CB(**(_DWORD **)(a1 + 16));
}

//----- (100308CE) --------------------------------------------------------
int __userpurge sub_100308CE@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // edx@1
  int v5; // ecx@1

  sub_1000FFB0((int)&unk_10076F68, 8);
  sub_1002D983(**(_DWORD **)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  _InterlockedIncrement(*(volatile signed __int32 **)(***(_DWORD ***)(a1 + 12) + 72));
  *(_DWORD *)(a1 - 4) = -2;
  sub_1003090A(a1);
  return sub_1000FFF6(v5, v4);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (1003090A) --------------------------------------------------------
void __usercall sub_1003090A(int a1@<ebp>)
{
  sub_1002D9CB(**(_DWORD **)(a1 + 16));
}

//----- (10030916) --------------------------------------------------------
int __cdecl sub_10030916(int a1, int a2)
{
  int v2; // ebp@0
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@1

  v5 = a1;
  v4 = a1;
  return sub_10030822(v2, (int)&v4, a2, (int)&v5);
}

//----- (1003093E) --------------------------------------------------------
int __cdecl sub_1003093E(int a1, int a2)
{
  int v2; // ebp@0
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@1

  v5 = a1;
  v4 = a1;
  return sub_100307D2(v2, (int)&v4, a2, (int)&v5);
}

//----- (10030966) --------------------------------------------------------
int __cdecl sub_10030966(int a1, int a2)
{
  int v2; // ebp@0
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@1

  v5 = a1;
  v4 = a1;
  return sub_10030883(v2, (int)&v4, a2, (int)&v5);
}

//----- (1003098E) --------------------------------------------------------
int __cdecl sub_1003098E(int a1, int a2)
{
  int v2; // ebp@0
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@1

  v5 = a1;
  v4 = a1;
  return sub_100308CE(v2, (int)&v4, a2, (int)&v5);
}

//----- (100309B6) --------------------------------------------------------
int __cdecl sub_100309B6(int a1, char a2)
{
  int *v3; // [sp+0h] [bp-8h]@1
  char *v4; // [sp+4h] [bp-4h]@1

  *(_DWORD *)(a1 + 24) = 1;
  *(_DWORD *)a1 = &unk_10067A70;
  *(_DWORD *)(a1 + 848) = 1;
  *(_DWORD *)(a1 + 72) = &unk_1007A6C0;
  *(_WORD *)(a1 + 108) = 67;
  *(_WORD *)(a1 + 370) = 67;
  *(_DWORD *)(a1 + 844) = 0;
  v4 = (char *)&a1;
  sub_1003098E(5, (int)&v4);
  v3 = &a1;
  v4 = &a2;
  return sub_1003093E(4, (int)&v3);
}

//----- (10030A2F) --------------------------------------------------------
void __stdcall sub_10030A2F(LPVOID lpMem)
{
  if ( lpMem )
  {
    sub_10030A50((int)lpMem);
    sub_1002D7BC(lpMem);
  }
}

//----- (10030A50) --------------------------------------------------------
int __cdecl sub_10030A50(int a1)
{
  int v1; // ecx@0
  int v2; // eax@1
  int v4; // [sp+0h] [bp-4h]@1

  v4 = v1;
  v2 = a1;
  if ( *(_UNKNOWN **)a1 != &unk_10067A70 )
  {
    sub_1002D7BC(*(LPVOID *)a1);
    v2 = a1;
  }
  sub_1002D7BC(*(LPVOID *)(v2 + 60));
  sub_1002D7BC(*(LPVOID *)(a1 + 48));
  sub_1002D7BC(*(LPVOID *)(a1 + 52));
  sub_1002D7BC(*(LPVOID *)(a1 + 56));
  sub_1002D7BC(*(LPVOID *)(a1 + 40));
  sub_1002D7BC(*(LPVOID *)(a1 + 44));
  sub_1002D7BC(*(LPVOID *)(a1 + 64));
  sub_1002D7BC(*(LPVOID *)(a1 + 68));
  sub_1002D7BC(*(LPVOID *)(a1 + 864));
  v4 = (int)&a1;
  sub_10030916(5, (int)&v4);
  v4 = (int)&a1;
  return sub_10030966(4, (int)&v4);
}

//----- (10030AF9) --------------------------------------------------------
signed __int32 __cdecl sub_10030AF9(int a1, int a2)
{
  int v2; // eax@2
  signed __int32 result; // eax@6

  if ( *(_DWORD *)(a1 + 76) )
  {
    sub_100366D3(*(_DWORD *)(a1 + 76));
    v2 = *(_DWORD *)(a1 + 76);
    if ( v2 != dword_1007C998 && (wchar_t **)v2 != &off_1007A1C8 && !*(_DWORD *)(v2 + 12) )
      sub_10036507(*(LPVOID *)(a1 + 76));
  }
  result = a2;
  *(_DWORD *)(a1 + 76) = a2;
  if ( a2 )
    result = sub_1003648A(a2);
  return result;
}
// 1007A1C8: using guessed type wchar_t *off_1007A1C8;
// 1007C998: using guessed type int dword_1007C998;

//----- (10030B44) --------------------------------------------------------
void sub_10030B44()
{
  void *v0; // esi@2

  if ( dword_1007A1C0 != -1 )
  {
    v0 = (void *)sub_10032A17(dword_1007A1C0);
    if ( v0 )
    {
      sub_10032A6D(dword_1007A1C0, 0);
      sub_10030A2F(v0);
    }
  }
}

//----- (10030B70) --------------------------------------------------------
int __usercall sub_10030B70@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  DWORD v2; // esi@1
  int v3; // edi@2
  LPVOID v4; // eax@3
  void *v6; // ecx@10

  v2 = GetLastError();
  if ( dword_1007A1C0 == -1 || (v3 = sub_10032A17(dword_1007A1C0)) == 0 )
  {
    v4 = sub_1002D75F(1u, 0x364u);
    v3 = (int)v4;
    if ( !v4 )
    {
      sub_1002D7BC(0);
      goto LABEL_10;
    }
    if ( !sub_10032A6D(dword_1007A1C0, v4) )
    {
      sub_1002D7BC((LPVOID)v3);
      goto LABEL_10;
    }
    sub_100309B6(v3, (unsigned int)&dword_1007C998);
    sub_1002D7BC(0);
    if ( !v3 )
    {
LABEL_10:
      SetLastError(v2);
      sub_1002D71C(v6, a1, a2, v3, v2);
    }
  }
  SetLastError(v2);
  return v3;
}
// 1007C998: using guessed type int dword_1007C998;

//----- (10030BF4) --------------------------------------------------------
int sub_10030BF4()
{
  DWORD v0; // esi@1
  int v1; // ebx@1
  int v2; // edi@2
  LPVOID v3; // eax@3

  v0 = GetLastError();
  v1 = 0;
  if ( dword_1007A1C0 != -1 )
  {
    v2 = sub_10032A17(dword_1007A1C0);
    if ( v2 )
      goto LABEL_14;
  }
  v3 = sub_1002D75F(1u, 0x364u);
  v2 = (int)v3;
  if ( !v3 )
  {
    sub_1002D7BC(0);
    goto LABEL_9;
  }
  if ( !sub_10032A6D(dword_1007A1C0, v3) )
  {
    sub_1002D7BC((LPVOID)v2);
    goto LABEL_9;
  }
  sub_100309B6(v2, (unsigned int)&dword_1007C998);
  sub_1002D7BC(0);
  if ( v2 )
  {
LABEL_14:
    SetLastError(v0);
    return v2;
  }
LABEL_9:
  SetLastError(v0);
  return v1;
}
// 1007C998: using guessed type int dword_1007C998;

//----- (10030C79) --------------------------------------------------------
char sub_10030C79()
{
  dword_1007A1C0 = sub_1003296B((int)sub_10030A2F);
  if ( dword_1007A1C0 == -1 )
    return 0;
  if ( !sub_10030BF4() )
  {
    sub_10030CA5();
    return 0;
  }
  return 1;
}

//----- (10030CA5) --------------------------------------------------------
char sub_10030CA5()
{
  if ( dword_1007A1C0 != -1 )
  {
    sub_100329C1(dword_1007A1C0);
    dword_1007A1C0 = -1;
  }
  return 1;
}

//----- (10030CBF) --------------------------------------------------------
int __usercall sub_10030CBF@<eax>(int a1@<ebx>, int a2, int *a3)
{
  int v3; // ebp@0
  int result; // eax@1

  result = *a3;
  if ( *a3 != dword_1007C998 )
  {
    result = dword_1007A8F0;
    if ( !(dword_1007A8F0 & *(_DWORD *)(a2 + 848)) )
    {
      result = sub_10036754(a1, v3);
      *a3 = result;
    }
  }
  return result;
}
// 1007A8F0: using guessed type int dword_1007A8F0;
// 1007C998: using guessed type int dword_1007C998;

//----- (10030CEC) --------------------------------------------------------
int __usercall sub_10030CEC@<eax>(int a1@<ebx>, int a2, int *a3)
{
  int v3; // ebp@0
  int result; // eax@1

  result = *a3;
  if ( (LPVOID)*a3 != off_1007A8E0 )
  {
    result = dword_1007A8F0;
    if ( !(dword_1007A8F0 & *(_DWORD *)(a2 + 848)) )
    {
      result = sub_10034116(a1, v3);
      *a3 = result;
    }
  }
  return result;
}
// 1007A8F0: using guessed type int dword_1007A8F0;

//----- (10030D19) --------------------------------------------------------
signed int __cdecl sub_10030D19(int a1)
{
  int v1; // ebx@1
  int v2; // esi@1
  signed int result; // eax@3
  signed int v4; // [sp-4h] [bp-10h]@7

  v1 = *(_DWORD *)a1;
  v2 = *(_DWORD *)(a1 + 4);
  if ( ((*(_DWORD *)(a1 + 4) >> 20) & 0x7FF) == 2047 )
  {
    if ( v2 & 0xFFFFF | v1 )
    {
      if ( !(v2 & 0x80000000) || v1 || (v2 & 0xFFFFF) != 0x80000 )
      {
        if ( v2 & 0x80000 )
          v4 = 2;
        else
          v4 = 3;
      }
      else
      {
        v4 = 4;
      }
      result = v4;
    }
    else
    {
      result = 1;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (10030D85) --------------------------------------------------------
char __cdecl sub_10030D85(int a1)
{
  char v1; // dl@1

  v1 = 0;
  if ( *(_DWORD *)(a1 + 4) & 0x80000000 )
    v1 = 1;
  return v1;
}

//----- (10030DA3) --------------------------------------------------------
signed int __cdecl sub_10030DA3(int a1, int a2, int a3, int a4, int a5, unsigned int a6, char a7, int a8, int a9)
{
  unsigned int v9; // edi@1
  int v10; // esi@3
  signed int v11; // edi@4
  int v12; // edx@5
  unsigned int v13; // ecx@5
  int v14; // eax@8
  int v15; // ecx@13
  int v16; // esi@14
  int v17; // ecx@18
  int v18; // esi@18
  signed int v19; // ecx@23
  int v20; // eax@23
  unsigned __int64 v21; // rax@25
  unsigned int v22; // eax@25
  unsigned int v23; // ecx@27
  unsigned __int64 v24; // rax@29
  int i; // eax@30
  int v26; // ecx@43
  unsigned __int64 v27; // rcx@43
  int v28; // esi@44
  int v29; // edi@46
  char v30; // al@49
  int v31; // edx@49
  char v32; // al@51
  int v33; // edx@51
  char v34; // al@54
  int v35; // edx@54
  int v37; // [sp+Ch] [bp-30h]@3
  int v38; // [sp+10h] [bp-2Ch]@20
  char v39; // [sp+18h] [bp-24h]@56
  int v40; // [sp+1Ch] [bp-20h]@5
  int v41; // [sp+20h] [bp-1Ch]@13
  int v42; // [sp+24h] [bp-18h]@18
  int v43; // [sp+2Ch] [bp-10h]@21
  unsigned int v44; // [sp+30h] [bp-Ch]@13
  int v45; // [sp+34h] [bp-8h]@23
  unsigned int v46; // [sp+38h] [bp-4h]@23

  v9 = a6;
  if ( (a6 & 0x80000000) != 0 )
    v9 = 0;
  v10 = a2;
  *(_BYTE *)a2 = 0;
  sub_10029BD2((int)&v37, 0, a9);
  if ( a3 > v9 + 11 )
  {
    v12 = a1;
    v13 = *(_DWORD *)(a1 + 4);
    v40 = *(_DWORD *)a1;
    if ( ((v13 >> 20) & 0x7FF) == 2047 )
    {
      v11 = sub_100310A6(0, (double *)a1, a2, a3, a4, a5, v9, 0, a8, 0);
      if ( v11 )
      {
        *(_BYTE *)a2 = 0;
      }
      else
      {
        v14 = sub_1003B800(a2, 0x65u);
        if ( v14 )
        {
          *(_BYTE *)v14 = a7 == 0 ? 112 : 80;
          *(_BYTE *)(v14 + 3) = 0;
        }
        v11 = 0;
      }
    }
    else
    {
      if ( v13 & 0x80000000 )
      {
        *(_BYTE *)a2 = 45;
        v10 = a2 + 1;
      }
      v15 = *(_DWORD *)(a1 + 4);
      v44 = 1023;
      v41 = a7 == 0 ? 39 : 7;
      if ( v15 & 0x7FF00000 )
      {
        *(_BYTE *)v10 = 49;
        v16 = v10 + 1;
      }
      else
      {
        *(_BYTE *)v10 = 48;
        v16 = v10 + 1;
        if ( *(_DWORD *)(a1 + 4) & 0xFFFFF | *(_DWORD *)a1 )
          v44 = 1022;
        else
          v44 = 0;
      }
      v17 = v16;
      v18 = v16 + 1;
      v42 = v17;
      if ( v9 )
        *(_BYTE *)v17 = ***(_BYTE ***)(v38 + 136);
      else
        *(_BYTE *)v17 = 0;
      v43 = *(_DWORD *)(a1 + 4) & 0xFFFFF;
      if ( v43 || *(_DWORD *)a1 )
      {
        v46 = 0;
        v19 = 983040;
        LOWORD(v20) = 48;
        v45 = 48;
        v43 = 983040;
        do
        {
          if ( (signed int)v9 <= 0 )
            break;
          LODWORD(v21) = v46 & *(_DWORD *)v12;
          HIDWORD(v21) = v19 & *(_DWORD *)(v12 + 4) & 0xFFFFF;
          v22 = (unsigned __int16)(sub_1003B7C0(v21, v45) + 48);
          if ( v22 > 0x39 )
            LOBYTE(v22) = (a7 == 0 ? 39 : 7) + v22;
          v23 = v43;
          v12 = a1;
          *(_BYTE *)v18++ = v22;
          v46 = __PAIR__(v23, v46) >> 4;
          v19 = v23 >> 4;
          v20 = v45 - 4;
          --v9;
          v43 = v19;
          v45 = v20;
        }
        while ( (signed __int16)v20 >= 0 );
        if ( (signed __int16)v20 >= 0 )
        {
          LODWORD(v24) = v46 & *(_DWORD *)v12;
          HIDWORD(v24) = v19 & *(_DWORD *)(v12 + 4) & 0xFFFFF;
          if ( (unsigned __int16)sub_1003B7C0(v24, v45) > 8u )
          {
            for ( i = v18 - 1; *(_BYTE *)i == 102 || *(_BYTE *)i == 70; --i )
              *(_BYTE *)i = 48;
            if ( i == v42 )
            {
              ++*(_BYTE *)(i - 1);
            }
            else if ( *(_BYTE *)i == 57 )
            {
              *(_BYTE *)i = v41 + 58;
            }
            else
            {
              ++*(_BYTE *)i;
            }
          }
        }
      }
      if ( (signed int)v9 > 0 )
      {
        sub_10028330((void *)v18, 48, v9);
        v18 += v9;
      }
      if ( !*(_BYTE *)v42 )
        v18 = v42;
      *(_BYTE *)v18 = a7 == 0 ? 112 : 80;
      LOWORD(v26) = sub_1003B7C0(*(_QWORD *)a1, 0x34u);
      v27 = (v26 & 0x7FFi64) - __PAIR__((v26 & 0x7FFui64) >> 32, v44);
      if ( SHIDWORD(v27) < 0 )
      {
        *(_BYTE *)(v18 + 1) = 45;
        v28 = v18 + 2;
        v27 = -(signed __int64)v27;
      }
      else
      {
        *(_BYTE *)(v18 + 1) = 43;
        v28 = v18 + 2;
      }
      v29 = v28;
      *(_BYTE *)v28 = 48;
      if ( SHIDWORD(v27) >= 0 )
      {
        if ( (SHIDWORD(v27) > 0 || (unsigned int)v27 >= 0x3E8)
          && (v30 = sub_1003B6E0(v27, 1000i64), v41 = v31, *(_BYTE *)v28 = v30 + 48, ++v28, v28 != v29)
          || (signed __int64)v27 >= 100 )
        {
          v32 = sub_1003B6E0(v27, 100i64);
          v41 = v33;
          *(_BYTE *)v28++ = v32 + 48;
        }
      }
      if ( v28 != v29 || (signed __int64)v27 >= 10 )
      {
        v34 = sub_1003B6E0(v27, 10i64);
        v41 = v35;
        *(_BYTE *)v28++ = v34 + 48;
      }
      v11 = 0;
      *(_BYTE *)v28 = v27 + 48;
      *(_BYTE *)(v28 + 1) = 0;
    }
  }
  else
  {
    v11 = 34;
    *(_DWORD *)sub_1002E9D5() = 34;
    sub_1002B787(0, 34);
  }
  if ( v39 )
    *(_DWORD *)(v37 + 848) &= 0xFFFFFFFD;
  return v11;
}

//----- (100310A6) --------------------------------------------------------
signed int __usercall sub_100310A6@<eax>(int a1@<ebx>, double *a2, int a3, int a4, int a5, int a6, int a7, char a8, int a9, int a10)
{
  unsigned int v10; // ecx@1
  signed int result; // eax@3
  int v12; // [sp+8h] [bp-Ch]@1

  sub_10036DBE(*a2, a7 + 1, (int)&v12, a5, a6);
  v10 = -1;
  if ( a4 != -1 )
    v10 = a4 - (v12 == 45) - (a7 > 0);
  result = sub_1003681B(a1, a3, (void *)(a3 + (v12 == 45) + (a7 > 0)), v10, a7 + 1, (int)&v12);
  if ( result )
    *(_BYTE *)a3 = 0;
  else
    result = sub_10031141(a1, a3, a4, a7, a8, a9, (int)&v12, 0, a10);
  return result;
}

//----- (10031141) --------------------------------------------------------
signed int __usercall sub_10031141@<eax>(int a1@<ebx>, int a2, int a3, int a4, char a5, int a6, int a7, char a8, int a9)
{
  int v9; // eax@2
  signed int result; // eax@5
  char v11; // dl@7
  int v12; // esi@9
  int v13; // esi@13
  int v14; // eax@13
  signed __int64 v15; // rax@19
  signed __int64 v16; // rax@22
  signed __int64 v17; // rt2@22
  signed __int64 v18; // rt2@24
  int v19; // [sp+8h] [bp-10h]@7
  int v20; // [sp+Ch] [bp-Ch]@12
  char v21; // [sp+14h] [bp-4h]@29

  if ( a4 <= 0 )
    v9 = 0;
  else
    v9 = a4;
  if ( a3 > (unsigned int)(v9 + 9) )
  {
    sub_10029BD2((int)&v19, a1, a9);
    v11 = a8;
    if ( a8 )
    {
      sub_100315B0(a2, a3, (const void *)(a2 + (*(_DWORD *)a7 == 45)), a4 > 0);
      v11 = a8;
    }
    v12 = a2;
    if ( *(_DWORD *)a7 == 45 )
    {
      *(_BYTE *)a2 = 45;
      v12 = a2 + 1;
    }
    if ( a4 > 0 )
    {
      *(_BYTE *)v12 = *(_BYTE *)(v12 + 1);
      ++v12;
      *(_BYTE *)v12 = ***(_BYTE ***)(v20 + 136);
    }
    v13 = a4 + (v11 == 0) + v12;
    v14 = -1;
    if ( a3 != -1 )
      v14 = a3 + a2 - v13;
    if ( sub_1002ED3A(a2, a4, v13, v14, (int)"e+000") )
    {
      sub_1002B7B4(a1, a4);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_1003128C);
    }
    if ( a5 )
      *(_BYTE *)v13 = 69;
    if ( **(_BYTE **)(a7 + 8) != 48 )
    {
      HIDWORD(v15) = *(_DWORD *)(a7 + 4) - 1;
      if ( SHIDWORD(v15) < 0 )
      {
        HIDWORD(v15) = -HIDWORD(v15);
        *(_BYTE *)(v13 + 1) = 45;
      }
      if ( SHIDWORD(v15) >= 100 )
      {
        v16 = SHIDWORD(v15);
        v17 = v16 % 100;
        LODWORD(v15) = v16 / 100;
        HIDWORD(v15) = v17;
        *(_BYTE *)(v13 + 2) += v15;
      }
      if ( SHIDWORD(v15) >= 10 )
      {
        v15 = SHIDWORD(v15);
        v18 = v15 % 10;
        LODWORD(v15) = v15 / 10;
        BYTE4(v15) = v18;
        *(_BYTE *)(v13 + 3) += v15;
      }
      *(_BYTE *)(v13 + 4) += BYTE4(v15);
    }
    if ( a6 == 2 && *(_BYTE *)(v13 + 2) == 48 )
      sub_100260E0((void *)(v13 + 2), (const void *)(v13 + 3), 3u);
    if ( v21 )
      *(_DWORD *)(v19 + 848) &= 0xFFFFFFFD;
    result = 0;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 34;
    sub_1002B787(a1, a4);
    result = 34;
  }
  return result;
}

//----- (1003128C) --------------------------------------------------------
signed int __usercall sub_1003128C@<eax>(int a1@<ebx>, double *a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  unsigned int v8; // ecx@1
  signed int result; // eax@3
  int v10; // [sp+8h] [bp-Ch]@1
  int v11; // [sp+Ch] [bp-8h]@1
  int v12; // [sp+10h] [bp-4h]@1

  v10 = 0;
  v11 = 0;
  v12 = 0;
  sub_10036DBE(*a2, a7, (int)&v10, a5, a6);
  v8 = -1;
  if ( a4 != -1 )
    v8 = a4 - (v10 == 45);
  result = sub_1003681B(a1, a7, (void *)(a3 + (v10 == 45)), v8, a7 + v11, (int)&v10);
  if ( result )
    *(_BYTE *)a3 = 0;
  else
    result = sub_10031319(a1, a3, a4, a7, (int)&v10, 0, a8);
  return result;
}

//----- (10031319) --------------------------------------------------------
int __usercall sub_10031319@<eax>(int a1@<ebx>, int a2, int a3, int a4, int a5, char a6, int a7)
{
  int v7; // edi@1
  int v8; // ecx@1
  const void *v9; // esi@4
  int v10; // eax@6
  int v11; // esi@7
  const void *v12; // esi@10
  int v13; // ecx@10
  int v15; // [sp+Ch] [bp-10h]@1
  int v16; // [sp+10h] [bp-Ch]@10
  char v17; // [sp+18h] [bp-4h]@15

  sub_10029BD2((int)&v15, a1, a7);
  v7 = a4;
  v8 = *(_DWORD *)(a5 + 4) - 1;
  if ( a6 && v8 == a4 )
    *(_WORD *)(v8 + (*(_DWORD *)a5 == 45) + a2) = 48;
  v9 = (const void *)a2;
  if ( *(_DWORD *)a5 == 45 )
  {
    *(_BYTE *)a2 = 45;
    v9 = (const void *)(a2 + 1);
  }
  v10 = *(_DWORD *)(a5 + 4);
  if ( v10 > 0 )
  {
    v11 = (int)((char *)v9 + v10);
  }
  else
  {
    sub_100315B0(a2, a3, v9, 1);
    *(_BYTE *)v9 = 48;
    v11 = (int)((char *)v9 + 1);
  }
  if ( a4 > 0 )
  {
    sub_100315B0(a2, a3, (const void *)v11, 1);
    *(_BYTE *)v11 = ***(_BYTE ***)(v16 + 136);
    v12 = (const void *)(v11 + 1);
    v13 = *(_DWORD *)(a5 + 4);
    if ( v13 < 0 )
    {
      if ( a6 || -v13 < a4 )
        v7 = -v13;
      sub_100315B0(a2, a3, v12, v7);
      sub_10028330((void *)v12, 48, v7);
    }
  }
  if ( v17 )
    *(_DWORD *)(v15 + 848) &= 0xFFFFFFFD;
  return 0;
}

//----- (100313F0) --------------------------------------------------------
signed int __cdecl sub_100313F0(double *a1, int a2, int a3, int a4, int a5, int a6, char a7, int a8, int a9)
{
  int v9; // ecx@1
  unsigned int v10; // eax@1
  void *v11; // esi@1
  signed int result; // eax@3
  char v13; // al@8
  int v14; // [sp+Ch] [bp-10h]@1
  int v15; // [sp+10h] [bp-Ch]@1
  int v16; // [sp+14h] [bp-8h]@1
  int v17; // [sp+18h] [bp-4h]@1

  v14 = 0;
  v15 = 0;
  v16 = 0;
  sub_10036DBE(*a1, a6, (int)&v14, a4, a5);
  v9 = v14 == 45;
  v17 = v15 - 1;
  v10 = -1;
  v11 = (void *)(v9 + a2);
  if ( a3 != -1 )
    v10 = a3 - v9;
  result = sub_1003681B(a2, a6, v11, v10, a6, (int)&v14);
  if ( result )
  {
    *(_BYTE *)a2 = 0;
  }
  else if ( v15 - 1 < -4 || v15 - 1 >= a6 )
  {
    result = sub_10031141(a2, a2, a3, a6, a7, a8, (int)&v14, 1, a9);
  }
  else
  {
    if ( v17 < v15 - 1 )
    {
      do
      {
        v13 = *(_BYTE *)v11;
        v11 = (char *)v11 + 1;
      }
      while ( v13 );
      *((char *)v11 - 2) = 0;
    }
    result = sub_10031319(a2, a2, a3, a6, (int)&v14, 1, a9);
  }
  return result;
}

//----- (100314B8) --------------------------------------------------------
signed int __usercall sub_100314B8@<eax>(int a1@<edi>, int a2, unsigned __int8 a3, int a4, unsigned int a5, char a6)
{
  int v6; // edx@1
  int v7; // ecx@1
  signed int result; // eax@2
  int v9; // ebx@6
  char v10[4]; // [sp+8h] [bp-44h]@6
  char v11[4]; // [sp+Ch] [bp-40h]@6
  char v12[4]; // [sp+10h] [bp-3Ch]@6
  char v13[4]; // [sp+14h] [bp-38h]@6
  char v14[4]; // [sp+18h] [bp-34h]@6
  char v15[4]; // [sp+1Ch] [bp-30h]@6
  char v16[4]; // [sp+20h] [bp-2Ch]@6
  char v17[4]; // [sp+24h] [bp-28h]@6
  int v18; // [sp+28h] [bp-24h]@6
  char v19[4]; // [sp+2Ch] [bp-20h]@6
  int v20; // [sp+30h] [bp-1Ch]@6
  char v21[4]; // [sp+34h] [bp-18h]@6
  int v22; // [sp+38h] [bp-14h]@6
  char v23[4]; // [sp+3Ch] [bp-10h]@6
  int v24; // [sp+40h] [bp-Ch]@6
  char v25[4]; // [sp+44h] [bp-8h]@6

  v6 = a5;
  v7 = a4;
  if ( a5 >= (unsigned int)a3 + 4 )
  {
    if ( a3 )
    {
      *(_BYTE *)a4 = 45;
      v7 = a4 + 1;
      v6 = a5 - 1;
      *(_BYTE *)(a4 + 1) = 0;
    }
    v18 = (int)"NAN(SNAN)";
    *(_DWORD *)v10 = "INF";
    *(_DWORD *)v11 = "INF";
    *(_DWORD *)v12 = "inf";
    *(_DWORD *)v13 = "inf";
    v20 = (int)"nan(snan)";
    *(_DWORD *)v16 = "nan";
    v9 = a6 != 0 ? 0 : 2;
    *(_DWORD *)v17 = "nan";
    *(_DWORD *)v21 = "nan";
    *(_DWORD *)v25 = "nan";
    v22 = (int)"NAN(IND)";
    *(_DWORD *)v14 = "NAN";
    *(_DWORD *)v15 = "NAN";
    *(_DWORD *)v19 = "NAN";
    *(_DWORD *)v23 = "NAN";
    v24 = (int)"nan(ind)";
    result = sub_1002ED3A(
               v9,
               4 * a2 - 4 + 1,
               v7,
               v6,
               *(_DWORD *)&v10[4 * (v9 + 4 * a2 - 4 + 1 - (strlen(*(const char **)&v10[4 * (4 * a2 - 4 + v9)]) < v6))]);
    if ( result )
    {
      sub_1002B7B4(v9, a1);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_100315B0);
    }
  }
  else
  {
    *(_BYTE *)a4 = 0;
    result = 12;
  }
  return result;
}
// 100314B8: could not find valid save-restore pair for edi

//----- (100315B0) --------------------------------------------------------
void *__cdecl sub_100315B0(int a1, int a2, const void *a3, int a4)
{
  void *result; // eax@2

  if ( a4 )
    result = sub_100260E0((char *)a3 + a4, a3, strlen((const char *)a3) + 1);
  return result;
}

//----- (100315E4) --------------------------------------------------------
signed int __usercall sub_100315E4@<eax>(int a1@<ebx>, int a2, int a3, unsigned int a4, int a5, int a6, signed int a7, unsigned int a8, char a9, int a10, int a11)
{
  signed int result; // eax@2
  unsigned __int8 v12; // al@14
  bool v13; // zf@21
  int v14; // esi@21
  int v15; // [sp-8h] [bp-18h]@16
  int v16; // [sp+8h] [bp-8h]@13
  char v17; // [sp+Ch] [bp-4h]@10

  if ( !a3 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, 0);
    return 22;
  }
  if ( !a4 || !a5 || !a6 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a4, a3);
    return 22;
  }
  if ( a7 == 65 || a7 == 69 || a7 == 70 || (v17 = 0, a7 == 71) )
    v17 = 1;
  if ( !(a9 & 8) )
  {
    v16 = sub_10030D19(a2);
    if ( v16 )
    {
      v12 = sub_10030D85(a2);
      return sub_100314B8(a3, v16, v12, a3, a4, v17);
    }
  }
  if ( a9 & 0x10 )
    v15 = 3;
  else
    v15 = 2;
  if ( a7 > 97 )
  {
    v14 = a7 - 101;
    v13 = a7 == 101;
  }
  else
  {
    if ( a7 == 97 || a7 == 65 )
      return sub_10030DA3(a2, a3, a4, a5, a6, a8, v17, v15, a11);
    v14 = a7 - 69;
    v13 = a7 == 69;
  }
  if ( v13 )
  {
    result = sub_100310A6(a4, (double *)a2, a3, a4, a5, a6, a8, v17, v15, a11);
  }
  else if ( v14 == 1 )
  {
    result = sub_1003128C(a4, (double *)a2, a3, a4, a5, a6, a8, a11);
  }
  else
  {
    result = sub_100313F0((double *)a2, a3, a4, a5, a6, a8, v17, v15, a11);
  }
  return result;
}

//----- (1003172E) --------------------------------------------------------
BOOL sub_1003172E()
{
  return dword_1007C990 == (__security_cookie | 1);
}
// 1007C990: using guessed type int dword_1007C990;

//----- (10031743) --------------------------------------------------------
signed __int32 sub_10031743()
{
  return _InterlockedExchange((volatile signed __int32 *)&dword_1007C994, 1);
}
// 1007C994: using guessed type int dword_1007C994;

//----- (1003174E) --------------------------------------------------------
int __usercall sub_1003174E@<eax>(int a1@<ebp>)
{
  int v1; // edx@1
  int v2; // ecx@1

  sub_1000FFB0((int)&unk_10076FE8, 8);
  if ( (wchar_t **)dword_1007C998 != &off_1007A1C8 )
  {
    sub_1002D983(4);
    *(_DWORD *)(a1 - 4) = 0;
    dword_1007C998 = sub_100367CB((signed __int32 *)&dword_1007C998, (int)&off_1007A1C8);
    *(_DWORD *)(a1 - 4) = -2;
    sub_10031797();
  }
  return sub_1000FFF6(v2, v1);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007A1C8: using guessed type wchar_t *off_1007A1C8;
// 1007C998: using guessed type int dword_1007C998;

//----- (10031797) --------------------------------------------------------
void sub_10031797()
{
  sub_1002D9CB(4);
}

//----- (100317A0) --------------------------------------------------------
void __usercall sub_100317A0(int a1@<edi>)
{
  int v1; // ebp@0
  signed int v2; // esi@3
  int v3; // ebx@3
  signed int v4; // edi@7
  int v5; // eax@8
  struct _RTL_CRITICAL_SECTION *v6; // edx@14
  struct _STARTUPINFOW StartupInfo; // [sp+0h] [bp-48h]@1
  BYTE *v8; // [sp+44h] [bp-4h]@3

  GetStartupInfoW(&StartupInfo);
  if ( StartupInfo.cbReserved2 && StartupInfo.lpReserved2 )
  {
    v2 = *(_DWORD *)StartupInfo.lpReserved2;
    v3 = (int)(StartupInfo.lpReserved2 + 4);
    v8 = &StartupInfo.lpReserved2[*(_DWORD *)StartupInfo.lpReserved2 + 4];
    if ( v2 >= 0x2000 )
      v2 = 0x2000;
    sub_10035FDA(v3, v1, a1);
    if ( v2 > dword_1007CBA0 )
      v2 = dword_1007CBA0;
    v4 = 0;
    if ( v2 )
    {
      v5 = (int)v8;
      do
      {
        if ( *(_DWORD *)v5 != -1 && *(_DWORD *)v5 != -2 && *(_BYTE *)v3 & 1 )
        {
          if ( *(_BYTE *)v3 & 8 || GetFileType(*(HANDLE *)v5) )
          {
            v6 = &(*(&lpCriticalSection + (v4 >> 6)))[2 * (v4 & 0x3F)];
            v6[1].DebugInfo = *(PRTL_CRITICAL_SECTION_DEBUG *)v8;
            LOBYTE(v6[1].LockSemaphore) = *(_BYTE *)v3;
          }
          v5 = (int)v8;
        }
        ++v4;
        v5 += 4;
        ++v3;
        v8 = (BYTE *)v5;
      }
      while ( v4 != v2 );
    }
  }
}
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (10031A4A) --------------------------------------------------------
void __usercall sub_10031A4A(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // edi@1

  v1 = *(_DWORD *)(a1 + 8);
  v2 = *(_DWORD *)(a1 - 28);
  sub_10031A50();
}

//----- (10031A50) --------------------------------------------------------
void sub_10031A50()
{
  signed int v0; // [sp+0h] [bp-4h]@0

  sub_10036129(v0);
}

//----- (10031A79) --------------------------------------------------------
int __usercall sub_10031A79@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  int v2; // ecx@1
  int v3; // edi@1
  int v4; // edx@5
  signed int v5; // ebx@6
  signed int v6; // edx@8
  signed int v7; // edx@9

  sub_1000FFB0((int)&unk_10077048, 28);
  v3 = *(_DWORD *)(a2 + 8);
  if ( v3 == -2 )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
LABEL_11:
    v7 = -1;
    return sub_1000FFF6(v2, v7);
  }
  if ( v3 < 0
    || v3 >= (unsigned int)dword_1007CBA0
    || (*(_DWORD *)(a2 - 28) = v3 >> 6,
        v4 = 2 * (v3 & 0x3F),
        *(_DWORD *)(a2 - 32) = v4 * 24,
        !((unsigned int)(*(&lpCriticalSection + (v3 >> 6)))[v4 + 1].LockSemaphore & 1)) )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
    sub_1002B787(a1, v3);
    goto LABEL_11;
  }
  sub_10036072(v3);
  *(_DWORD *)(a2 - 44) = -1;
  v5 = -1;
  *(_DWORD *)(a2 - 40) = -1;
  *(_DWORD *)(a2 - 4) = 0;
  if ( *((_BYTE *)&(*(&lpCriticalSection + *(_DWORD *)(a2 - 28)))[1].LockSemaphore + *(_DWORD *)(a2 - 32)) & 1 )
  {
    *(_DWORD *)(a2 - 44) = sub_10031BD5(-1, v3, v3, *(LARGE_INTEGER *)(a2 + 12), *(_DWORD *)(a2 + 20));
    v5 = v6;
    *(_DWORD *)(a2 - 40) = v6;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 9;
    *(_DWORD *)sub_1002E9C2() = 0;
  }
  *(_DWORD *)(a2 - 4) = -2;
  sub_10031B51();
  v7 = v5;
  return sub_1000FFF6(v2, v7);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (10031B48) --------------------------------------------------------
void __usercall sub_10031B48(int a1@<ebp>)
{
  int v1; // edi@1
  int v2; // ebx@1
  int v3; // esi@1

  v1 = *(_DWORD *)(a1 + 8);
  v2 = *(_DWORD *)(a1 - 40);
  v3 = *(_DWORD *)(a1 - 44);
  sub_10031B51();
}

//----- (10031B51) --------------------------------------------------------
void sub_10031B51()
{
  signed int v0; // [sp+0h] [bp-4h]@0

  sub_10036129(v0);
}

//----- (10031B7E) --------------------------------------------------------
signed int __usercall sub_10031B7E@<eax>(int a1@<ebx>, int a2@<edi>, signed int a3, LARGE_INTEGER liDistanceToMove)
{
  signed int v4; // eax@1
  DWORD v6; // edx@4

  v4 = sub_100362EF(a1, a2, a3);
  if ( v4 == -1 )
  {
    *(_DWORD *)sub_1002E9D5() = 9;
    return -1;
  }
  v6 = sub_10031C53((HANDLE)v4, liDistanceToMove);
  if ( v6 == -1 )
    return -1;
  LOBYTE((*(&lpCriticalSection + (a3 >> 6)))[2 * (a3 & 0x3F) + 1].LockSemaphore) &= 0xFDu;
  return v6;
}

//----- (10031BD5) --------------------------------------------------------
DWORD __usercall sub_10031BD5@<eax>(int a1@<ebx>, int a2@<edi>, int a3, LARGE_INTEGER liDistanceToMove, DWORD dwMoveMethod)
{
  signed int v5; // eax@1
  DWORD result; // eax@3
  int v7; // eax@5
  LARGE_INTEGER NewFilePointer; // [sp+8h] [bp-8h]@4

  v5 = sub_100362EF(a1, a2, a3);
  if ( v5 == -1 )
  {
    *(_DWORD *)sub_1002E9D5() = 9;
    return -1;
  }
  if ( !SetFilePointerEx((HANDLE)v5, liDistanceToMove, &NewFilePointer, dwMoveMethod) )
  {
    v7 = GetLastError();
    sub_1002E99F(v7);
    return -1;
  }
  if ( (NewFilePointer.HighPart & NewFilePointer.LowPart) == -1 )
    return -1;
  result = NewFilePointer.LowPart;
  LOBYTE((*(&lpCriticalSection + (a3 >> 6)))[2 * (a3 & 0x3F) + 1].LockSemaphore) &= 0xFDu;
  return result;
}

//----- (10031C53) --------------------------------------------------------
DWORD __cdecl sub_10031C53(HANDLE hFile, LARGE_INTEGER liDistanceToMove)
{
  int v2; // eax@2
  DWORD result; // eax@4
  LARGE_INTEGER NewFilePointer; // [sp+4h] [bp-10h]@1
  LARGE_INTEGER v5; // [sp+Ch] [bp-8h]@3

  if ( SetFilePointerEx(hFile, 0i64, &NewFilePointer, 1u)
    && (v5 = 0i64,
        SetFilePointerEx(hFile, (LARGE_INTEGER)*(signed int *)&liDistanceToMove, &v5, liDistanceToMove.HighPart)) )
  {
    result = v5.LowPart;
    if ( v5.QuadPart <= 0x7FFFFFFF )
      return result;
    SetFilePointerEx(hFile, NewFilePointer, 0, 0);
    *(_DWORD *)sub_1002E9D5() = 22;
  }
  else
  {
    v2 = GetLastError();
    sub_1002E99F(v2);
  }
  return -1;
}

//----- (10031CD7) --------------------------------------------------------
int __usercall sub_10031CD7@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3, LARGE_INTEGER a4)
{
  int v4; // edx@1
  int v5; // ecx@1
  int v7; // [sp+0h] [bp-20h]@5

  sub_1000FFB0((int)&unk_10077028, 20);
  if ( a3 == -2 )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
  }
  else if ( (a3 & 0x80000000) == 0
         && a3 < dword_1007CBA0
         && (a1 = (signed int)a3 >> 6,
             v7 = 2 * (a3 & 0x3F),
             (unsigned int)(*(&lpCriticalSection + ((signed int)a3 >> 6)))[v7 + 1].LockSemaphore & 1) )
  {
    sub_10036072(a3);
    if ( (unsigned int)(*(&lpCriticalSection + a1))[v7 + 1].LockSemaphore & 1 )
    {
      sub_10031B7E(a1, -1, a3, a4);
    }
    else
    {
      *(_DWORD *)sub_1002E9D5() = 9;
      *(_DWORD *)sub_1002E9C2() = 0;
    }
    sub_10031A50();
  }
  else
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
    sub_1002B787(a1, a2);
  }
  return sub_1000FFF6(v5, v4);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (10031CE2) --------------------------------------------------------
int __usercall sub_10031CE2@<eax>(int a1@<ebx>)
{
  int v1; // ebp@0

  return sub_10031A79(a1, v1);
}

//----- (10031CFD) --------------------------------------------------------
DWORD __usercall sub_10031CFD@<eax>(int a1@<ebx>, int a2@<edi>, int a3, LARGE_INTEGER liDistanceToMove, DWORD dwMoveMethod)
{
  return sub_10031BD5(a1, a2, a3, liDistanceToMove, dwMoveMethod);
}

//----- (10031D18) --------------------------------------------------------
int __cdecl sub_10031D18(signed int a1, unsigned int a2, int a3)
{
  unsigned int v3; // edx@1
  int v4; // edi@1
  int v5; // eax@1
  int v6; // ebx@5
  unsigned int v7; // esi@5
  int v8; // eax@6
  char v9; // cl@7
  int v10; // ecx@10
  int v11; // ecx@16
  char v12; // dl@17
  int v13; // ecx@30
  char v14; // al@30
  DWORD NumberOfBytesRead; // [sp+Ch] [bp-18h]@14
  HANDLE hFile; // [sp+10h] [bp-14h]@1
  int v18; // [sp+14h] [bp-10h]@1
  int v19; // [sp+18h] [bp-Ch]@14
  int v20; // [sp+1Ch] [bp-8h]@5
  char Buffer; // [sp+23h] [bp-1h]@14

  v3 = a2;
  v4 = 48 * (a1 & 0x3F);
  v5 = (int)*(&lpCriticalSection + (a1 >> 6));
  v18 = a1 >> 6;
  hFile = *(HANDLE *)(v5 + v4 + 24);
  if ( a3 && *(_BYTE *)a2 == 10 )
    *(_BYTE *)(v5 + v4 + 40) |= 4u;
  else
    *(_BYTE *)(v5 + v4 + 40) &= 0xFBu;
  v6 = a2;
  v20 = a2 + a3;
  v7 = a2;
  if ( a2 < a2 + a3 )
  {
    v8 = a2 + 1;
    while ( 1 )
    {
      v9 = *(_BYTE *)v6;
      if ( *(_BYTE *)v6 == 26 )
      {
        v13 = (int)*(&lpCriticalSection + v18);
        v14 = *(_BYTE *)(v13 + v4 + 40);
        if ( v14 & 0x40 )
          *(_BYTE *)v7++ = *(_BYTE *)v6;
        else
          *(_BYTE *)(v13 + v4 + 40) = v14 | 2;
        return v7 - v3;
      }
      if ( v9 == 13 )
        break;
      *(_BYTE *)v7++ = v9;
      ++v6;
      ++v8;
LABEL_27:
      v10 = v20;
LABEL_28:
      if ( v6 >= (unsigned int)v10 )
        return v7 - v3;
    }
    v10 = v20;
    if ( v8 < (unsigned int)v20 )
    {
      if ( *(_BYTE *)v8 == 10 )
      {
        v6 += 2;
        *(_BYTE *)v7 = 10;
        v8 += 2;
        ++v7;
      }
      else
      {
        *(_BYTE *)v7++ = 13;
        ++v6;
        ++v8;
      }
      goto LABEL_28;
    }
    ++v6;
    v19 = v8 + 1;
    if ( !ReadFile(hFile, &Buffer, 1u, &NumberOfBytesRead, 0) || !NumberOfBytesRead )
      goto LABEL_36;
    v11 = v18;
    if ( (unsigned int)(*(&lpCriticalSection + v18))[v4 / 0x18u + 1].LockSemaphore & 0x48 )
    {
      v12 = Buffer;
      if ( Buffer == 10 )
      {
        *(_BYTE *)v7 = Buffer;
      }
      else
      {
        *(_BYTE *)v7 = 13;
        BYTE2((*(&lpCriticalSection + v11))[v4 / 0x18u + 1].LockSemaphore) = v12;
      }
      goto LABEL_25;
    }
    if ( Buffer == 10 )
    {
      v3 = a2;
      if ( v7 == a2 )
      {
        *(_BYTE *)v7++ = 10;
LABEL_26:
        v8 = v19;
        goto LABEL_27;
      }
    }
    sub_10031CFD(v6, v4, a1, (LARGE_INTEGER)-1i64, 1u);
    if ( Buffer != 10 )
LABEL_36:
      *(_BYTE *)v7++ = 13;
LABEL_25:
    v3 = a2;
    goto LABEL_26;
  }
  return v7 - v3;
}

//----- (10031E6F) --------------------------------------------------------
unsigned int __cdecl sub_10031E6F(signed int a1, unsigned int a2, int a3)
{
  int v3; // edi@1
  int v4; // eax@1
  unsigned int v5; // edx@1
  int v6; // ebx@5
  unsigned int v7; // esi@5
  int v8; // eax@6
  int v9; // ecx@16
  __int16 v10; // dx@17
  int v11; // ecx@29
  char v12; // al@29
  DWORD NumberOfBytesRead; // [sp+Ch] [bp-18h]@14
  HANDLE hFile; // [sp+10h] [bp-14h]@1
  unsigned int v16; // [sp+14h] [bp-10h]@5
  int v17; // [sp+18h] [bp-Ch]@7
  int v18; // [sp+1Ch] [bp-8h]@1
  __int16 Buffer; // [sp+20h] [bp-4h]@14

  v3 = 48 * (a1 & 0x3F);
  v18 = a1 >> 6;
  v4 = (int)*(&lpCriticalSection + (a1 >> 6));
  hFile = *(HANDLE *)(v4 + v3 + 24);
  v5 = a2;
  if ( a3 && *(_WORD *)a2 == 10 )
    *(_BYTE *)(v4 + v3 + 40) |= 4u;
  else
    *(_BYTE *)(v4 + v3 + 40) &= 0xFBu;
  v6 = a2;
  v16 = a2 + 2 * a3;
  v7 = a2;
  if ( a2 < v16 )
  {
    v8 = a2 + 2;
    do
    {
      v17 = *(_WORD *)v6;
      if ( v17 == 26 )
      {
        v11 = (int)*(&lpCriticalSection + v18);
        v12 = *(_BYTE *)(v11 + v3 + 40);
        if ( v12 & 0x40 )
        {
          *(_WORD *)v7 = *(_WORD *)v6;
          v7 += 2;
        }
        else
        {
          *(_BYTE *)(v11 + v3 + 40) = v12 | 2;
        }
        return (v7 - v5) & 0xFFFFFFFE;
      }
      v5 = a2;
      if ( (_WORD)v17 == 13 )
      {
        if ( v8 >= v16 )
        {
          v6 += 2;
          v17 = v8 + 2;
          if ( !ReadFile(hFile, &Buffer, 2u, &NumberOfBytesRead, 0) || !NumberOfBytesRead )
            goto LABEL_24;
          v9 = v18;
          if ( (unsigned int)(*(&lpCriticalSection + v18))[v3 / 0x18u + 1].LockSemaphore & 0x48 )
          {
            v10 = Buffer;
            if ( Buffer == 10 )
            {
              *(_WORD *)v7 = 10;
            }
            else
            {
              *(_WORD *)v7 = 13;
              BYTE2((*(&lpCriticalSection + v9))[v3 / 0x18u + 1].LockSemaphore) = v10;
              BYTE3((*(&lpCriticalSection + v9))[v3 / 0x18u + 1].LockSemaphore) = HIBYTE(v10);
              LOBYTE((*(&lpCriticalSection + v9))[v3 / 0x18u + 1].SpinCount) = 10;
            }
            goto LABEL_25;
          }
          if ( Buffer != 10 || (v5 = a2, v7 != a2) )
          {
            sub_10031CFD(v6, v3, a1, (LARGE_INTEGER)-2i64, 1u);
            if ( Buffer != 10 )
            {
LABEL_24:
              *(_WORD *)v7 = 13;
              v7 += 2;
            }
LABEL_25:
            v8 = v17;
LABEL_26:
            v5 = a2;
            continue;
          }
          *(_WORD *)v7 = 10;
          v7 += 2;
          v8 = v17;
        }
        else
        {
          v5 = a2;
          if ( *(_WORD *)v8 != 10 )
          {
            *(_WORD *)v7 = 13;
            v6 += 2;
            v7 += 2;
            v8 += 2;
            goto LABEL_26;
          }
          v6 += 4;
          *(_WORD *)v7 = 10;
          v8 += 4;
          v7 += 2;
        }
      }
      else
      {
        v6 += 2;
        *(_WORD *)v7 = v17;
        v7 += 2;
        v8 += 2;
      }
    }
    while ( v6 < v16 );
  }
  return (v7 - v5) & 0xFFFFFFFE;
}

//----- (1003202F) --------------------------------------------------------
int __cdecl sub_1003202F(int a1, LPCSTR lpMultiByteStr, int a3, LPWSTR lpWideCharStr, int cchWideChar)
{
  int result; // eax@1
  int v6; // edi@2
  int v7; // esi@3
  signed int v8; // edx@5
  char v9; // cl@10
  int v10; // esi@15
  char v11; // al@16
  char v12; // al@18
  int v13; // esi@21
  int v14; // eax@21
  int v15; // eax@22
  int v16; // [sp+4h] [bp-8h]@2
  int v17; // [sp+8h] [bp-4h]@2

  result = sub_10031D18(a1, (unsigned int)lpMultiByteStr, a3);
  if ( result )
  {
    v6 = 2 * (a1 & 0x3F);
    v17 = a1 >> 6;
    v16 = (int)*(&lpCriticalSection + (a1 >> 6));
    if ( *(_BYTE *)(v16 + v6 * 24 + 41) )
    {
      v7 = (int)&lpMultiByteStr[result - 1];
      LOBYTE(result) = *(_BYTE *)v7;
      if ( *(_BYTE *)v7 < 0 )
      {
        result = (unsigned __int8)result;
        v8 = 1;
        while ( !byte_1007A2C0[result] && (unsigned int)v8 <= 4 && v7 >= (unsigned int)lpMultiByteStr )
        {
          --v7;
          ++v8;
          result = *(_BYTE *)v7;
        }
        v9 = *(_BYTE *)v7;
        if ( !byte_1007A2C0[*(_BYTE *)v7] )
        {
          *(_DWORD *)sub_1002E9D5() = 42;
          return -1;
        }
        if ( byte_1007A2C0[*(_BYTE *)v7] + 1 == v8 )
        {
          v7 += v8;
        }
        else if ( *(_BYTE *)(v16 + v6 * 24 + 40) & 0x48 )
        {
          v10 = v7 + 1;
          *(_BYTE *)(v16 + v6 * 24 + 42) = v9;
          if ( (unsigned int)v8 >= 2 )
          {
            v11 = *(_BYTE *)v10++;
            BYTE3((*(&lpCriticalSection + v17))[v6 + 1].LockSemaphore) = v11;
          }
          if ( v8 == 3 )
          {
            v12 = *(_BYTE *)v10++;
            LOBYTE((*(&lpCriticalSection + v17))[v6 + 1].SpinCount) = v12;
          }
          v7 = v10 - v8;
        }
        else
        {
          sub_10031CFD((int)lpMultiByteStr, v6 * 24, a1, (LARGE_INTEGER)-v8, 1u);
        }
      }
      else
      {
        ++v7;
      }
      v13 = v7 - (_DWORD)lpMultiByteStr;
      v14 = MultiByteToWideChar(0xFDE9u, 0, lpMultiByteStr, v13, lpWideCharStr, cchWideChar);
      if ( !v14 )
      {
        v15 = GetLastError();
        sub_1002E99F(v15);
        return -1;
      }
      BYTE1((*(&lpCriticalSection + v17))[v6 + 1].SpinCount) ^= (BYTE1((*(&lpCriticalSection + v17))[v6 + 1].SpinCount) ^ 2 * (v14 != v13)) & 2;
      result = 2 * v14;
    }
  }
  return result;
}

//----- (1003217F) --------------------------------------------------------
unsigned int __cdecl sub_1003217F(signed int a1, unsigned int a2, int a3)
{
  unsigned int v3; // edi@1
  unsigned int v4; // esi@1
  int v5; // edx@1
  unsigned int v6; // eax@1
  int v7; // ecx@2
  int v8; // ebx@3

  v3 = a2;
  v4 = a2;
  v5 = a2 + 2 * a3;
  v6 = a2;
  if ( a2 < v5 )
  {
    v7 = a2 + 2;
    while ( 1 )
    {
      v8 = *(_WORD *)v6;
      if ( v8 == 26 )
        break;
      if ( v8 != 13 || v7 >= (unsigned int)v5 || (v3 = a2, *(_WORD *)v7 != 10) )
      {
        *(_WORD *)v4 = v8;
        v6 += 2;
        v4 += 2;
        v7 += 2;
      }
      else
      {
        v6 += 4;
        *(_WORD *)v4 = 10;
        v7 += 4;
        v4 += 2;
      }
      if ( v6 >= v5 )
        return (v4 - v3) & 0xFFFFFFFE;
    }
    LOBYTE((*(&lpCriticalSection + (a1 >> 6)))[2 * (a1 & 0x3F) + 1].LockSemaphore) |= 2u;
  }
  return (v4 - v3) & 0xFFFFFFFE;
}

//----- (10032200) --------------------------------------------------------
int __usercall sub_10032200@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // edx@1
  int v4; // ecx@1
  unsigned int v5; // esi@1
  int v6; // ecx@5

  sub_1000FFB0((int)&unk_10077068, 20);
  v5 = *(_DWORD *)(a2 + 8);
  if ( v5 == -2 )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
    return sub_1000FFF6(v4, v3);
  }
  if ( (v5 & 0x80000000) != 0
    || v5 >= dword_1007CBA0
    || (a1 = (signed int)v5 >> 6,
        v6 = 2 * (*(_DWORD *)(a2 + 8) & 0x3F),
        *(_DWORD *)(a2 - 32) = v6 * 24,
        !((unsigned int)(*(&lpCriticalSection + ((signed int)v5 >> 6)))[v6 + 1].LockSemaphore & 1)) )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
    goto LABEL_13;
  }
  if ( *(_DWORD *)(a2 + 16) > 0x7FFFFFFFu )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 22;
LABEL_13:
    sub_1002B787(a1, a3);
    return sub_1000FFF6(v4, v3);
  }
  sub_10036072(v5);
  *(_DWORD *)(a2 - 28) = -1;
  *(_DWORD *)(a2 - 4) = 0;
  if ( *((_BYTE *)&(*(&lpCriticalSection + a1))[1].LockSemaphore + *(_DWORD *)(a2 - 32)) & 1 )
  {
    *(_DWORD *)(a2 - 28) = sub_10032313(-1, v5, *(LPWSTR *)(a2 + 12), *(_DWORD *)(a2 + 16));
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 9;
    *(_DWORD *)sub_1002E9C2() = 0;
  }
  *(_DWORD *)(a2 - 4) = -2;
  sub_100322EA();
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (100322E4) --------------------------------------------------------
void __usercall sub_100322E4(int a1@<ebp>)
{
  int v1; // esi@1
  int v2; // edi@1

  v1 = *(_DWORD *)(a1 + 8);
  v2 = *(_DWORD *)(a1 - 28);
  sub_100322EA();
}

//----- (100322EA) --------------------------------------------------------
void sub_100322EA()
{
  signed int v0; // [sp+0h] [bp-4h]@0

  sub_10036129(v0);
}

//----- (10032313) --------------------------------------------------------
int __usercall sub_10032313@<eax>(int a1@<edi>, int a2, LPWSTR lpWideCharStr, int a4)
{
  int v4; // edx@5
  int v5; // eax@5
  DWORD v6; // ecx@6
  void *v7; // esi@11
  char v8; // al@11
  LPVOID v9; // esi@11
  int v10; // eax@11
  LPWSTR v11; // eax@14
  unsigned int v12; // eax@17
  DWORD v13; // eax@21
  int v14; // ecx@21
  int v15; // edi@21
  int v16; // edx@21
  int v17; // edi@22
  DWORD v18; // ebx@22
  bool v19; // zf@22
  int v20; // ebx@22
  char v21; // bl@23
  DWORD v22; // ecx@25
  LPVOID v23; // eax@28
  DWORD v24; // ecx@28
  LPVOID v25; // eax@31
  int v26; // eax@37
  int v27; // edi@39
  int v29; // ecx@41
  unsigned int v30; // eax@48
  int v31; // [sp-8h] [bp-38h]@50
  DWORD Mode; // [sp+8h] [bp-28h]@34
  unsigned int v33; // [sp+Ch] [bp-24h]@22
  DWORD NumberOfCharsRead; // [sp+10h] [bp-20h]@22
  HANDLE hConsoleHandle; // [sp+14h] [bp-1Ch]@11
  int v36; // [sp+18h] [bp-18h]@5
  DWORD dwMoveMethod; // [sp+1Ch] [bp-14h]@5
  int v38; // [sp+20h] [bp-10h]@5
  DWORD nNumberOfBytesToRead; // [sp+24h] [bp-Ch]@14
  LPVOID lpBuffer; // [sp+28h] [bp-8h]@14
  char v41; // [sp+2Eh] [bp-2h]@23
  char v42; // [sp+2Fh] [bp-1h]@5

  if ( a2 != -2 )
  {
    if ( a2 >= 0
      && a2 < (unsigned int)dword_1007CBA0
      && (dwMoveMethod = 1,
          a1 = a2 >> 6,
          v4 = 48 * (a2 & 0x3F),
          v38 = a2 >> 6,
          v5 = (int)*(&lpCriticalSection + (a2 >> 6)),
          v36 = v4,
          v42 = *(_BYTE *)(v4 + v5 + 40),
          v42 & 1) )
    {
      v6 = a4;
      if ( (unsigned int)a4 <= 0x7FFFFFFF )
      {
        if ( !a4 || v42 & 2 )
          return 0;
        if ( lpWideCharStr )
        {
          v7 = *(void **)(v4 + v5 + 24);
          v8 = *(_BYTE *)(v4 + v5 + 41);
          v42 = v8;
          hConsoleHandle = v7;
          v9 = 0;
          v10 = v8 - 1;
          if ( v10 )
          {
            if ( v10 != 1 || ~(_BYTE)a4 & 1 )
            {
              v11 = lpWideCharStr;
              nNumberOfBytesToRead = a4;
              lpBuffer = lpWideCharStr;
LABEL_22:
              v17 = 0;
              v33 = (unsigned int)v11;
              v18 = (DWORD)*(&lpCriticalSection + v38);
              NumberOfCharsRead = v18;
              v19 = (*(_BYTE *)(v4 + v18 + 40) & 0x48) == 0;
              v20 = a2;
              if ( !v19 )
              {
                v21 = *(_BYTE *)(v4 + NumberOfCharsRead + 42);
                v41 = v21;
                v19 = v21 == 10;
                v20 = a2;
                if ( !v19 )
                {
                  if ( v6 )
                  {
                    v17 = dwMoveMethod;
                    *(_BYTE *)v11 = v41;
                    v20 = a2;
                    v22 = v6 - 1;
                    v19 = v42 == 0;
                    lpBuffer = (char *)v11 + 1;
                    nNumberOfBytesToRead = v22;
                    *((_BYTE *)&(*(&lpCriticalSection + v38))[1].LockSemaphore + v4 + 2) = 10;
                    if ( !v19 )
                    {
                      v41 = *((_BYTE *)&(*(&lpCriticalSection + v38))[1].LockSemaphore + v4 + 3);
                      if ( v41 != 10 )
                      {
                        if ( v22 )
                        {
                          v23 = lpBuffer;
                          v17 = 2;
                          *(_BYTE *)lpBuffer = v41;
                          v20 = a2;
                          v24 = v22 - 1;
                          lpBuffer = (char *)v23 + 1;
                          nNumberOfBytesToRead = v24;
                          *((_BYTE *)&(*(&lpCriticalSection + v38))[1].LockSemaphore + v4 + 3) = 10;
                          if ( v42 == (_BYTE)dwMoveMethod )
                          {
                            v41 = *((_BYTE *)&(*(&lpCriticalSection + v38))[1].SpinCount + v4);
                            if ( v41 != 10 )
                            {
                              if ( v24 )
                              {
                                v25 = lpBuffer;
                                v17 = 3;
                                *(_BYTE *)lpBuffer = v41;
                                v20 = a2;
                                lpBuffer = (char *)v25 + 1;
                                nNumberOfBytesToRead = v24 - 1;
                                *((_BYTE *)&(*(&lpCriticalSection + v38))[1].SpinCount + v4) = 10;
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
              if ( sub_10036359(v20, v17, v20)
                && *((_BYTE *)&(*(&lpCriticalSection + v38))[1].LockSemaphore + v36) & 0x80
                && GetConsoleMode(hConsoleHandle, &Mode) )
              {
                if ( v42 == 2 )
                {
                  if ( !ReadConsoleW(hConsoleHandle, lpBuffer, nNumberOfBytesToRead >> 1, &NumberOfCharsRead, 0) )
                  {
                    v26 = GetLastError();
LABEL_38:
                    sub_1002E99F(v26);
                    goto LABEL_39;
                  }
                  v29 = a4;
                  v27 = v17 + 2 * NumberOfCharsRead;
                  goto LABEL_46;
                }
              }
              else
              {
                LOBYTE(dwMoveMethod) = 0;
              }
              if ( !ReadFile(hConsoleHandle, lpBuffer, nNumberOfBytesToRead, &NumberOfCharsRead, 0)
                || (v29 = a4, NumberOfCharsRead > a4) )
              {
                v26 = GetLastError();
                if ( v26 == 5 )
                {
                  *(_DWORD *)sub_1002E9D5() = 9;
                  *(_DWORD *)sub_1002E9C2() = 5;
                  goto LABEL_39;
                }
                if ( v26 == 109 )
                {
                  v27 = 0;
                  goto LABEL_40;
                }
                goto LABEL_38;
              }
              v27 = NumberOfCharsRead + v17;
LABEL_46:
              if ( *((_BYTE *)&(*(&lpCriticalSection + v38))[1].LockSemaphore + v36) & 0x80 )
              {
                if ( v42 == 2 )
                {
                  v31 = (unsigned int)v27 >> 1;
                  if ( (_BYTE)dwMoveMethod )
                    v30 = sub_1003217F(v20, v33, v31);
                  else
                    v30 = sub_10031E6F(v20, v33, v31);
                }
                else
                {
                  v30 = sub_1003202F(v20, (LPCSTR)lpBuffer, v27, lpWideCharStr, (unsigned int)v29 >> 1);
                }
                v27 = v30;
              }
              goto LABEL_40;
            }
          }
          else if ( (unsigned __int8)~(_BYTE)a4 & (unsigned __int8)dwMoveMethod )
          {
            v12 = 4;
            nNumberOfBytesToRead = 4;
            if ( (unsigned int)a4 >> 1 >= 4 )
            {
              v12 = (unsigned int)a4 >> 1;
              nNumberOfBytesToRead = (unsigned int)a4 >> 1;
            }
            v9 = sub_1002ED94(v12);
            sub_1002D7BC(0);
            sub_1002D7BC(0);
            lpBuffer = v9;
            if ( v9 )
            {
              v13 = sub_10031CFD(a2, a1, a2, 0i64, dwMoveMethod);
              v14 = (int)*(&lpCriticalSection + a1);
              v15 = v36;
              *(_DWORD *)(v36 + v14 + 32) = v13;
              v11 = (LPWSTR)v9;
              *(_DWORD *)(v15 + v14 + 36) = v16;
              v4 = v15;
              v6 = nNumberOfBytesToRead;
              goto LABEL_22;
            }
            *(_DWORD *)sub_1002E9D5() = 12;
            *(_DWORD *)sub_1002E9C2() = 8;
LABEL_39:
            v27 = -1;
LABEL_40:
            sub_1002D7BC(v9);
            return v27;
          }
          *(_DWORD *)sub_1002E9C2() = 0;
          *(_DWORD *)sub_1002E9D5() = 22;
          sub_1002B787(a2, a1);
          goto LABEL_39;
        }
      }
      *(_DWORD *)sub_1002E9C2() = 0;
      *(_DWORD *)sub_1002E9D5() = 22;
    }
    else
    {
      *(_DWORD *)sub_1002E9C2() = 0;
      *(_DWORD *)sub_1002E9D5() = 9;
    }
    sub_1002B787(a2, a1);
    return -1;
  }
  *(_DWORD *)sub_1002E9C2() = 0;
  *(_DWORD *)sub_1002E9D5() = 9;
  return -1;
}
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (100326C8) --------------------------------------------------------
signed int __usercall sub_100326C8@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  int v3; // ebp@0
  int v5; // ST08_4@9
  int v6; // ST04_4@9
  int v7; // edx@9
  signed int v8; // eax@14
  struct _RTL_CRITICAL_SECTION *v9; // eax@14
  int v10; // eax@18

  if ( !a3 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return -1;
  }
  if ( !((*(_DWORD *)(a3 + 12) >> 13) & 1) || (*(_DWORD *)(a3 + 12) >> 12) & 1 )
    return -1;
  if ( (*(_DWORD *)(a3 + 12) >> 1) & 1 )
  {
    _InterlockedOr((volatile signed __int32 *)(a3 + 12), 0x10u);
    return -1;
  }
  _InterlockedOr((volatile signed __int32 *)(a3 + 12), 1u);
  if ( !(*(_DWORD *)(a3 + 12) & 0x4C0) )
    sub_100363F4(a3);
  *(_DWORD *)a3 = *(_DWORD *)(a3 + 4);
  v5 = *(_DWORD *)(a3 + 24);
  v6 = *(_DWORD *)(a3 + 4);
  sub_1002F4CB(1, a2, a3);
  *(_DWORD *)(a3 + 8) = sub_10032200(1, v3, a2);
  v7 = *(_DWORD *)(a3 + 8);
  if ( !v7 || v7 == -1 )
  {
    _InterlockedOr((volatile signed __int32 *)(a3 + 12), 8 * (v7 != 0) + 8);
    *(_DWORD *)(a3 + 8) = 0;
    return -1;
  }
  if ( !(*(_DWORD *)(a3 + 12) & 6) )
  {
    if ( sub_1002F4CB(1, a2, a3) == -1 || sub_1002F4CB(1, a2, a3) == -2 )
    {
      v9 = (struct _RTL_CRITICAL_SECTION *)&unk_1007A290;
    }
    else
    {
      v8 = sub_1002F4CB(1, a2, a3);
      v9 = &(*(&lpCriticalSection + (v8 >> 6)))[2 * (sub_1002F4CB(1, v8 >> 6, a3) & 0x3F)];
    }
    if ( ((unsigned int)v9[1].LockSemaphore & 0x82) == -126 )
      _InterlockedOr((volatile signed __int32 *)(a3 + 12), 0x20u);
  }
  v10 = a3;
  if ( *(_DWORD *)(a3 + 24) == 512 )
  {
    if ( (*(_DWORD *)(a3 + 12) >> 6) & 1 )
    {
      if ( !((*(_WORD *)(a3 + 12) >> 8) & 1) )
        *(_DWORD *)(a3 + 24) = 4096;
    }
    v10 = a3;
  }
  --*(_DWORD *)(v10 + 8);
  return *(_BYTE *)(*(_DWORD *)v10)++;
}

//----- (10032849) --------------------------------------------------------
signed int __usercall sub_10032849@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  return sub_100326C8(a1, a2, a3);
}

//----- (10032854) --------------------------------------------------------
int __cdecl sub_10032854(int a1, LPCSTR lpProcName, int a3, int a4)
{
  volatile signed __int32 *v4; // ebx@1
  int v5; // edx@1
  int v6; // esi@1
  int v8; // esi@4
  HMODULE v9; // eax@5
  int v10; // eax@10
  int v11; // edi@14

  v4 = (volatile signed __int32 *)((char *)&unk_1007CBF8 + 4 * a1);
  v5 = __security_cookie;
  v6 = __ROR4__(*v4 ^ __security_cookie, __security_cookie & 0x1F);
  if ( v6 != -1 )
  {
    if ( v6 )
      return v6;
    v8 = a3;
    if ( a3 == a4 )
    {
LABEL_8:
      v9 = 0;
    }
    else
    {
      while ( 1 )
      {
        v9 = sub_100328F0(*(_DWORD *)v8);
        if ( v9 )
          break;
        v8 += 4;
        if ( v8 == a4 )
        {
          v5 = __security_cookie;
          goto LABEL_8;
        }
      }
      v5 = __security_cookie;
    }
    if ( v9 )
    {
      v10 = (int)GetProcAddress(v9, lpProcName);
      v6 = v10;
      if ( v10 )
      {
        _InterlockedExchange(v4, sub_1000F4E5(v10));
        return v6;
      }
      v5 = __security_cookie;
    }
    v11 = __ROR4__(-1, 32 - (v5 & 0x1F));
    _InterlockedExchange(v4, v5 ^ v11);
  }
  return 0;
}

//----- (100328F0) --------------------------------------------------------
HMODULE __cdecl sub_100328F0(int a1)
{
  volatile signed __int32 *v1; // edi@1
  HMODULE result; // eax@2
  const WCHAR *v3; // ebx@3
  HMODULE v4; // esi@3

  v1 = (volatile signed __int32 *)((char *)&unk_1007CBA8 + 4 * a1);
  if ( *v1 )
  {
    result = (HMODULE)(*v1 != -1 ? *v1 : 0);
  }
  else
  {
    v3 = (&off_10068268)[2 * a1];
    v4 = LoadLibraryExW((&off_10068268)[2 * a1], 0, 0x800u);
    if ( v4 || (GetLastError() != 87 ? (v4 = 0) : (v4 = LoadLibraryExW(v3, 0, 0)), v4) )
    {
      if ( _InterlockedExchange(v1, (signed __int32)v4) )
        FreeLibrary(v4);
      result = v4;
    }
    else
    {
      _InterlockedExchange(v1, -1);
      result = 0;
    }
  }
  return result;
}

//----- (1003296B) --------------------------------------------------------
DWORD __stdcall sub_1003296B(int a1)
{
  int v1; // eax@1
  int v2; // esi@1
  DWORD result; // eax@2

  v1 = sub_10032854(3, "FlsAlloc", (int)&unk_10068708, (int)&unk_10068710);
  v2 = v1;
  if ( v1 )
  {
    __guard_check_icall_fptr(v1);
    result = ((int (__stdcall *)(int))v2)(a1);
  }
  else
  {
    result = TlsAlloc();
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (100329C1) --------------------------------------------------------
int __stdcall sub_100329C1(DWORD dwTlsIndex)
{
  int v1; // eax@1
  int v2; // esi@1
  int result; // eax@2

  v1 = sub_10032854(4, "FlsFree", (int)&unk_10068710, (int)&unk_10068718);
  v2 = v1;
  if ( v1 )
  {
    __guard_check_icall_fptr(v1);
    result = ((int (__stdcall *)(DWORD))v2)(dwTlsIndex);
  }
  else
  {
    result = TlsFree(dwTlsIndex);
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (10032A17) --------------------------------------------------------
int __stdcall sub_10032A17(DWORD dwTlsIndex)
{
  int v1; // eax@1
  int v2; // esi@1
  int result; // eax@2

  v1 = sub_10032854(5, "FlsGetValue", (int)&unk_10068718, (int)&unk_10068720);
  v2 = v1;
  if ( v1 )
  {
    __guard_check_icall_fptr(v1);
    result = ((int (__stdcall *)(DWORD))v2)(dwTlsIndex);
  }
  else
  {
    result = (int)TlsGetValue(dwTlsIndex);
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (10032A6D) --------------------------------------------------------
int __stdcall sub_10032A6D(DWORD dwTlsIndex, LPVOID lpTlsValue)
{
  int v2; // eax@1
  int v3; // esi@1
  int result; // eax@2

  v2 = sub_10032854(6, "FlsSetValue", (int)&unk_10068720, (int)&unk_10068728);
  v3 = v2;
  if ( v2 )
  {
    __guard_check_icall_fptr(v2);
    result = ((int (__stdcall *)(DWORD, LPVOID))v3)(dwTlsIndex, lpTlsValue);
  }
  else
  {
    result = TlsSetValue(dwTlsIndex, lpTlsValue);
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (10032AC6) --------------------------------------------------------
int __stdcall sub_10032AC6(LPCRITICAL_SECTION lpCriticalSection, DWORD dwSpinCount, int a3)
{
  int v3; // eax@1
  int v4; // esi@1
  int result; // eax@2

  v3 = sub_10032854(20, "InitializeCriticalSectionEx", (int)&unk_10068730, (int)&unk_10068738);
  v4 = v3;
  if ( v3 )
  {
    __guard_check_icall_fptr(v3);
    result = ((int (__stdcall *)(LPCRITICAL_SECTION, DWORD, int))v4)(lpCriticalSection, dwSpinCount, a3);
  }
  else
  {
    result = InitializeCriticalSectionAndSpinCount(lpCriticalSection, dwSpinCount);
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (10032B28) --------------------------------------------------------
int __stdcall sub_10032B28(int a1, DWORD dwMapFlags, LPCWSTR lpSrcStr, int cchSrc, LPWSTR lpDestStr, int cchDest, int a7, int a8, int a9)
{
  int v9; // eax@1
  int v10; // esi@1
  int result; // eax@2
  int v12; // eax@3

  v9 = sub_10032854(22, "LCMapStringEx", (int)&unk_10068738, (int)&unk_10068740);
  v10 = v9;
  if ( v9 )
  {
    __guard_check_icall_fptr(v9);
    result = ((int (__stdcall *)(int, DWORD, LPCWSTR, int, LPWSTR, int, int, int, int))v10)(
               a1,
               dwMapFlags,
               lpSrcStr,
               cchSrc,
               lpDestStr,
               cchDest,
               a7,
               a8,
               a9);
  }
  else
  {
    v12 = sub_10032BB0(a1, 0);
    result = LCMapStringW(v12, dwMapFlags, lpSrcStr, cchSrc, lpDestStr, cchDest);
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (10032BB0) --------------------------------------------------------
int __stdcall sub_10032BB0(int a1, int a2)
{
  int v2; // eax@1
  int v3; // esi@1
  int result; // eax@2

  v2 = sub_10032854(24, "LocaleNameToLCID", (int)&unk_10068740, (int)"LocaleNameToLCID");
  v3 = v2;
  if ( v2 )
  {
    __guard_check_icall_fptr(v2);
    result = ((int (__stdcall *)(int, int))v3)(a1, a2);
  }
  else
  {
    result = sub_100385BA(a1);
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (10032C0C) --------------------------------------------------------
int __stdcall sub_10032C0C(int a1)
{
  int v1; // eax@1
  int v2; // esi@1
  int result; // eax@2

  v1 = sub_10032854(28, "RoInitialize", (int)"\n", (int)"\n");
  v2 = v1;
  if ( v1 )
  {
    __guard_check_icall_fptr(v1);
    result = ((int (__stdcall *)(int))v2)(a1);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (10032C5E) --------------------------------------------------------
int sub_10032C5E()
{
  int result; // eax@1
  int (*v1)(void); // esi@1

  result = sub_10032854(29, "RoUninitialize", (int)"\n", (int)&unk_10068764);
  v1 = (int (*)(void))result;
  if ( result )
  {
    __guard_check_icall_fptr(result);
    result = v1();
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (10032CA7) --------------------------------------------------------
char sub_10032CA7()
{
  int v0; // eax@1

  v0 = __ROR4__(0, 32 - (__security_cookie & 0x1F));
  memset32(&unk_1007CBF8, __security_cookie ^ v0, 0x20u);
  return 1;
}

//----- (10032CCD) --------------------------------------------------------
bool sub_10032CCD()
{
  bool result; // al@2
  int v1; // esi@3
  int v2; // [sp+0h] [bp-8h]@4

  if ( dword_1007CC78 )
  {
    result = dword_1007CC78 == 1;
  }
  else
  {
    v1 = sub_10032854(8, "GetCurrentPackageId", (int)&unk_10068728, (int)&unk_10068730);
    if ( v1 && (v2 = 0, __guard_check_icall_fptr(v1), ((int (__stdcall *)(int *, _DWORD))v1)(&v2, 0) == 122) )
    {
      _InterlockedExchange((volatile signed __int32 *)&dword_1007CC78, 1);
      result = 1;
    }
    else
    {
      _InterlockedExchange((volatile signed __int32 *)&dword_1007CC78, 2);
      result = 0;
    }
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);
// 1007CC78: using guessed type int dword_1007CC78;

//----- (10032D54) --------------------------------------------------------
char __cdecl sub_10032D54(char a1)
{
  HMODULE *v1; // esi@2

  if ( !a1 )
  {
    v1 = (HMODULE *)&unk_1007CBA8;
    do
    {
      if ( *v1 )
      {
        if ( *v1 != (HMODULE)-1 )
          FreeLibrary(*v1);
        *v1 = 0;
      }
      ++v1;
    }
    while ( (_UNKNOWN *)v1 != &unk_1007CBF8 );
  }
  return 1;
}

//----- (10032D8A) --------------------------------------------------------
WCHAR __usercall sub_10032D8A@<ax>(int a1@<ebx>, WCHAR SrcStr, int a3)
{
  WCHAR result; // ax@1
  int v4; // eax@2
  WCHAR v5; // cx@3
  int v6; // [sp+0h] [bp-18h]@2
  int v7; // [sp+4h] [bp-14h]@2
  char v8; // [sp+Ch] [bp-Ch]@16
  int v9; // [sp+10h] [bp-8h]@4
  WCHAR DestStr; // [sp+14h] [bp-4h]@12

  result = -1;
  if ( SrcStr != -1 )
  {
    sub_10029BD2((int)&v6, a1, a3);
    v4 = *(_DWORD *)(v7 + 168);
    if ( v4 )
    {
      if ( SrcStr >= 0x100u )
      {
        if ( sub_100385E6(v4, 0x100u, &SrcStr, 1, &DestStr, 1) )
        {
          result = DestStr;
LABEL_16:
          if ( v8 )
            *(_DWORD *)(v6 + 848) &= 0xFFFFFFFD;
          return result;
        }
        result = SrcStr;
LABEL_14:
        v9 = result;
        goto LABEL_16;
      }
      if ( sub_10032E79(SrcStr, 1u) )
        result = *(_BYTE *)(*(_DWORD *)(v7 + 148) + SrcStr);
      else
        result = SrcStr;
    }
    else
    {
      v5 = SrcStr;
      if ( (unsigned __int16)(SrcStr - 65) <= 0x19u )
      {
        v9 = (unsigned __int16)(SrcStr + 32);
        v5 = SrcStr + 32;
      }
      result = v5;
      v9 = v5;
    }
    v9 = result;
    goto LABEL_14;
  }
  return result;
}

//----- (10032E53) --------------------------------------------------------
int __usercall sub_10032E53@<eax>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // ebp@0
  int v3; // eax@1
  int v5; // [sp+0h] [bp-4h]@1

  v5 = a1;
  v3 = sub_10030B70(a2, v2);
  v5 = *(_DWORD *)(v3 + 76);
  sub_10030CBF(a2, v3, &v5);
  return *(_DWORD *)v5;
}

//----- (10032E79) --------------------------------------------------------
int __cdecl sub_10032E79(WCHAR a1, unsigned __int16 a2)
{
  WORD v3; // ax@4
  WCHAR SrcStr; // [sp+0h] [bp-8h]@5
  WORD CharType; // [sp+4h] [bp-4h]@5

  if ( a1 == -1 )
    return 0;
  if ( a1 >= 0x100u )
  {
    SrcStr = a1;
    CharType = 0;
    if ( !GetStringTypeW(1u, &SrcStr, 1, &CharType) )
      return 0;
    v3 = CharType;
  }
  else
  {
    v3 = *(_WORD *)&off_1007A3C0[2 * a1];
  }
  return a2 & v3;
}
// 1007A3C0: using guessed type char *off_1007A3C0;

//----- (10032ED8) --------------------------------------------------------
int __cdecl sub_10032ED8(int a1, int a2, int a3)
{
  int v3; // eax@2
  int v4; // ecx@4
  int result; // eax@9
  int v6; // [sp+8h] [bp-20h]@1
  int v7; // [sp+Ch] [bp-1Ch]@2
  char v8; // [sp+14h] [bp-14h]@7
  CHAR MultiByteStr; // [sp+18h] [bp-10h]@4
  char v10; // [sp+19h] [bp-Fh]@4
  char v11; // [sp+1Ah] [bp-Eh]@4
  WORD CharType[2]; // [sp+1Ch] [bp-Ch]@6
  __int16 v13; // [sp+20h] [bp-8h]@6

  sub_10029BD2((int)&v6, a1, a3);
  if ( (unsigned int)(a1 + 1) <= 0x100 )
  {
    v3 = *(_WORD *)(*(_DWORD *)v7 + 2 * a1);
    goto LABEL_11;
  }
  if ( sub_10036451(a1, BYTE1(a1), (int)&v7) )
  {
    MultiByteStr = BYTE1(a1);
    v10 = a1;
    v11 = 0;
    v4 = 2;
  }
  else
  {
    MultiByteStr = a1;
    v10 = 0;
    v4 = 1;
  }
  *(_DWORD *)CharType = 0;
  v13 = 0;
  if ( sub_100383E1(a1, (int)&v7, 1u, &MultiByteStr, v4, CharType, *(_DWORD *)(v7 + 8), 1) )
  {
    v3 = CharType[0];
LABEL_11:
    result = a2 & v3;
    if ( v8 )
      *(_DWORD *)(v6 + 848) &= 0xFFFFFFFD;
    return result;
  }
  if ( v8 )
    *(_DWORD *)(v6 + 848) &= 0xFFFFFFFD;
  return 0;
}

//----- (10032FAA) --------------------------------------------------------
int __cdecl sub_10032FAA(int a1, int a2, DWORD dwMapFlags, LPCSTR lpMultiByteStr, int cbMultiByte, LPWSTR lpDestStr, int cchDest, UINT CodePage, int a9)
{
  int v9; // esi@1
  int v10; // eax@2
  UINT v11; // edi@4
  int result; // eax@6
  int v13; // edx@7
  void *v14; // ecx@8
  int v15; // ebx@9
  LPVOID v16; // eax@11
  int v17; // edi@17
  int v18; // eax@17
  int v19; // esi@17
  int v20; // edx@23
  void *v21; // ecx@24
  int v22; // edi@25
  LPVOID v23; // eax@27
  int v24; // eax@34
  signed int v25; // [sp+0h] [bp-14h]@9
  int cchWideChar; // [sp+Ch] [bp-8h]@6

  v9 = cbMultiByte;
  if ( cbMultiByte > 0 )
  {
    v10 = sub_10038624((int)lpMultiByteStr, cbMultiByte);
    v9 = v10 + 1;
    if ( v10 >= cbMultiByte )
      v9 = v10;
  }
  v11 = CodePage;
  if ( !CodePage )
  {
    v11 = *(_DWORD *)(*(_DWORD *)a1 + 8);
    CodePage = *(_DWORD *)(*(_DWORD *)a1 + 8);
  }
  result = MultiByteToWideChar(v11, 8 * (a9 != 0) + 1, lpMultiByteStr, v9, 0, 0);
  cchWideChar = result;
  if ( result )
  {
    v13 = 2 * result;
    if ( !(2 * result < (unsigned int)(2 * result + 8) ? 2 * result + 8 : 0) )
    {
      v15 = 0;
      goto LABEL_15;
    }
    v14 = (void *)(v13 + 8);
    if ( ((v13 + 8) & (unsigned int)-(v13 < (unsigned int)(v13 + 8))) > 0x400 )
    {
      v16 = sub_1002ED94(v13 < (unsigned int)v14 ? (unsigned int)v14 : 0);
      v15 = (int)v16;
      if ( v16 )
      {
        *(_DWORD *)v16 = 56797;
        goto LABEL_13;
      }
    }
    else
    {
      sub_1003B2A0(v14);
      v15 = (int)&v25;
      if ( &v25 )
      {
        v25 = 52428;
LABEL_13:
        v15 += 8;
LABEL_15:
        if ( !v15 )
          goto LABEL_37;
        if ( !MultiByteToWideChar(v11, 1u, lpMultiByteStr, v9, (LPWSTR)v15, cchWideChar) )
          goto LABEL_37;
        v17 = cchWideChar;
        v18 = sub_10032B28(a2, dwMapFlags, (LPCWSTR)v15, cchWideChar, 0, 0, 0, 0, 0);
        v19 = v18;
        if ( !v18 )
          goto LABEL_37;
        if ( dwMapFlags & 0x400 )
        {
          if ( !cchDest )
            goto LABEL_38;
          if ( v18 <= cchDest )
          {
            v19 = sub_10032B28(a2, dwMapFlags, (LPCWSTR)v15, v17, lpDestStr, cchDest, 0, 0, 0);
            if ( v19 )
              goto LABEL_38;
          }
          goto LABEL_37;
        }
        v20 = 2 * v18;
        if ( !(2 * v18 < (unsigned int)(2 * v18 + 8) ? 2 * v18 + 8 : 0) )
        {
          v22 = 0;
LABEL_31:
          if ( v22 && sub_10032B28(a2, dwMapFlags, (LPCWSTR)v15, cchWideChar, (LPWSTR)v22, v19, 0, 0, 0) )
          {
            v24 = cchDest ? WideCharToMultiByte(CodePage, 0, (LPCWSTR)v22, v19, (LPSTR)lpDestStr, cchDest, 0, 0) : WideCharToMultiByte(CodePage, 0, (LPCWSTR)v22, v19, 0, 0, 0, 0);
            v19 = v24;
            if ( v24 )
            {
              sub_10033212(v22);
              goto LABEL_38;
            }
          }
          goto LABEL_36;
        }
        v21 = (void *)(v20 + 8);
        if ( ((v20 + 8) & (unsigned int)-(v20 < (unsigned int)(v20 + 8))) > 0x400 )
        {
          v23 = sub_1002ED94(v20 < (unsigned int)v21 ? (unsigned int)v21 : 0);
          v22 = (int)v23;
          if ( v23 )
          {
            *(_DWORD *)v23 = 56797;
            goto LABEL_29;
          }
        }
        else
        {
          sub_1003B2A0(v21);
          v22 = (int)&v25;
          if ( &v25 )
          {
            v25 = 52428;
LABEL_29:
            v22 += 8;
            goto LABEL_31;
          }
        }
LABEL_36:
        sub_10033212(v22);
        goto LABEL_37;
      }
    }
LABEL_37:
    v19 = 0;
LABEL_38:
    sub_10033212(v15);
    result = v19;
  }
  return result;
}

//----- (100331C7) --------------------------------------------------------
int __usercall sub_100331C7@<eax>(int a1@<ebx>, int a2, int a3, DWORD dwMapFlags, LPCSTR lpMultiByteStr, int cbMultiByte, LPWSTR lpDestStr, int cchDest, UINT CodePage, int a10)
{
  int result; // eax@1
  int v11; // [sp+0h] [bp-10h]@1
  int v12; // [sp+4h] [bp-Ch]@1
  char v13; // [sp+Ch] [bp-4h]@1

  sub_10029BD2((int)&v11, a1, a2);
  result = sub_10032FAA((int)&v12, a3, dwMapFlags, lpMultiByteStr, cbMultiByte, lpDestStr, cchDest, CodePage, a10);
  if ( v13 )
    *(_DWORD *)(v11 + 848) &= 0xFFFFFFFD;
  return result;
}

//----- (10033212) --------------------------------------------------------
void __cdecl sub_10033212(int a1)
{
  if ( a1 )
  {
    if ( *(_DWORD *)(a1 - 8) == 56797 )
      sub_1002D7BC((LPVOID)(a1 - 8));
  }
}

//----- (10033232) --------------------------------------------------------
void *__usercall sub_10033232@<eax>(int a1@<ecx>, int a2@<ebx>, LPCVOID lpMem, SIZE_T dwBytes)
{
  void *result; // eax@2
  signed int v5; // esi@3
  SIZE_T v6; // ebx@5
  int v7; // esi@13
  int v8; // eax@13
  int HeapInformation; // [sp+0h] [bp-4h]@1
  _DWORD *savedregs; // [sp+4h] [bp+0h]@1

  savedregs = &savedregs;
  HeapInformation = a1;
  if ( lpMem )
  {
    v5 = dwBytes;
    if ( dwBytes <= 0xFFFFFFE0 )
    {
      v6 = HeapSize(hHeap, 0, lpMem);
      if ( !dwBytes )
        v5 = 1;
      result = HeapReAlloc(hHeap, 0x10u, (LPVOID)lpMem, v5);
      if ( !result )
      {
        if ( v6 <= 0x4000
          && v5 <= v6
          && (HeapInformation = -1, HeapQueryInformation(hHeap, 0, &HeapInformation, 4u, 0))
          && HeapInformation == 2 )
        {
          result = (void *)lpMem;
        }
        else
        {
          v7 = sub_1002E9D5();
          v8 = GetLastError();
          *(_DWORD *)v7 = sub_1002E95C(v8);
          result = 0;
        }
      }
    }
    else
    {
      *(_DWORD *)sub_1002E9D5() = 12;
      result = 0;
    }
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a2, 0);
    result = 0;
  }
  return result;
}

//----- (100332FC) --------------------------------------------------------
SIZE_T __usercall sub_100332FC@<eax>(int a1@<ebx>, int a2@<edi>, LPCVOID lpMem)
{
  SIZE_T result; // eax@2

  if ( lpMem )
  {
    result = HeapSize(hHeap, 0, lpMem);
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    result = -1;
  }
  return result;
}

//----- (1003332F) --------------------------------------------------------
int __userpurge sub_1003332F@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // esi@1
  int v5; // edx@1
  int v6; // ecx@1

  sub_1000FFB0((int)&unk_100770A8, 12);
  *(_DWORD *)(a1 - 28) = 0;
  sub_1002D983(**(_DWORD **)(a1 + 8));
  *(_DWORD *)(a1 - 4) = 0;
  v4 = __ROR4__(dword_1007CC84 ^ __security_cookie, __security_cookie & 0x1F);
  *(_DWORD *)(a1 - 28) = v4;
  *(_DWORD *)(a1 - 4) = -2;
  sub_1003337D(a1);
  return sub_1000FFF6(v6, v5);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007CC84: using guessed type int dword_1007CC84;

//----- (1003337D) --------------------------------------------------------
void __usercall sub_1003337D(int a1@<ebp>)
{
  sub_1002D9CB(**(_DWORD **)(a1 + 16));
}

//----- (10033389) --------------------------------------------------------
int __cdecl sub_10033389(int a1, int a2)
{
  int v2; // ebp@0
  int v4; // [sp+0h] [bp-Ch]@1
  int v5; // [sp+4h] [bp-8h]@1

  v5 = a1;
  v4 = a1;
  return sub_1003332F(v2, (int)&v4, a2, (int)&v5);
}

//----- (100333B1) --------------------------------------------------------
int *__cdecl sub_100333B1(int a1)
{
  int *result; // eax@6

  if ( a1 == 2 )
  {
    result = (int *)&unk_1007CC7C;
  }
  else
  {
    if ( a1 == 6 )
      return &dword_1007CC84;
    if ( a1 == 15 )
    {
      result = (int *)&unk_1007CC88;
    }
    else
    {
      if ( a1 != 21 )
      {
        if ( a1 != 22 )
          return 0;
        return &dword_1007CC84;
      }
      result = (int *)&unk_1007CC80;
    }
  }
  return result;
}
// 1007CC84: using guessed type int dword_1007CC84;

//----- (100333F3) --------------------------------------------------------
int __fastcall sub_100333F3(unsigned int a1, int a2, int a3)
{
  int v3; // esi@1
  int result; // eax@1

  v3 = 0;
  result = a1 + 4 >= a1 ? 1 : 0;
  if ( result )
  {
    do
    {
      ++v3;
      *(_DWORD *)a1 = a3;
      a1 += 4;
    }
    while ( v3 != result );
  }
  return result;
}

//----- (10033424) --------------------------------------------------------
int __cdecl sub_10033424(int a1, int a2)
{
  int result; // eax@1

  result = a2;
  if ( a2 == a2 + 144 )
  {
LABEL_4:
    result = 0;
  }
  else
  {
    while ( *(_DWORD *)(result + 4) != a1 )
    {
      result += 12;
      if ( result == a2 + 144 )
        goto LABEL_4;
    }
  }
  return result;
}

//----- (1003344C) --------------------------------------------------------
int __thiscall sub_1003344C(void *this)
{
  void *v2; // [sp-2h] [bp-4h]@1

  v2 = this;
  return sub_10033389(3, (int)((char *)&v2 + 3));
}

//----- (10033463) --------------------------------------------------------
int __usercall sub_10033463@<eax>(int a1@<edx>, int a2)
{
  int v2; // edx@1
  int v3; // edx@1
  int v4; // edx@1

  sub_100333F3((unsigned int)&unk_1007CC7C, a1, a2);
  sub_100333F3((unsigned int)&unk_1007CC80, v2, a2);
  sub_100333F3((unsigned int)&dword_1007CC84, v3, a2);
  return sub_100333F3((unsigned int)&unk_1007CC88, v4, a2);
}
// 1007CC84: using guessed type int dword_1007CC84;

//----- (1003349E) --------------------------------------------------------
int __usercall sub_1003349E@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  return sub_10030B70(a1, a2) + 8;
}

//----- (100334A7) --------------------------------------------------------
int __usercall sub_100334A7@<eax>(int a1@<ebp>)
{
  int v1; // ebx@1
  int v2; // esi@1
  int *v3; // eax@11
  char v4; // cl@11
  int v5; // eax@12
  int v6; // eax@14
  int v7; // eax@19
  int v8; // edx@20
  int v9; // eax@22
  int v10; // edx@22
  int v11; // eax@33
  int v12; // ecx@33
  int v13; // eax@36
  int v14; // ST04_4@39
  signed int v16; // [sp-Ch] [bp-Ch]@0

  sub_1003B680((int)&unk_10077088, 44);
  v1 = 0;
  *(_DWORD *)(a1 - 44) = 0;
  *(_DWORD *)(a1 - 52) = 0;
  *(_BYTE *)(a1 - 29) = 1;
  v2 = *(_DWORD *)(a1 + 8);
  if ( v2 > 8 )
  {
    if ( v2 != 11 )
    {
      if ( v2 == 15 || v2 > 20 && v2 <= 22 )
        goto LABEL_11;
      goto LABEL_15;
    }
  }
  else if ( v2 != 8 )
  {
    if ( v2 == 2 )
    {
LABEL_11:
      v3 = sub_100333B1(*(_DWORD *)(a1 + 8));
      goto LABEL_17;
    }
    if ( v2 != 4 )
    {
      if ( v2 == 6 )
        goto LABEL_11;
LABEL_15:
      *(_DWORD *)sub_1002E9D5() = 22;
      sub_1002B787(v1, 8);
      return sub_1003B6C9(v16);
    }
  }
  v5 = sub_10030BF4();
  v1 = v5;
  *(_DWORD *)(a1 - 44) = v5;
  if ( !v5 )
    return sub_1003B6C9(v16);
  v6 = sub_10033424(v2, *(_DWORD *)v5);
  if ( !v6 )
    goto LABEL_15;
  v3 = (int *)(v6 + 8);
  v4 = 0;
  *(_BYTE *)(a1 - 29) = 0;
LABEL_17:
  *(_DWORD *)(a1 - 40) = v3;
  *(_DWORD *)(a1 - 48) = 0;
  if ( v4 )
  {
    sub_1002D983(3);
    v4 = *(_BYTE *)(a1 - 29);
  }
  *(_DWORD *)(a1 - 36) = 0;
  *(_BYTE *)(a1 - 30) = 0;
  *(_DWORD *)(a1 - 4) = 0;
  v7 = *(_DWORD *)(a1 - 40);
  if ( v4 )
  {
    v8 = __ROR4__(*(_DWORD *)v7 ^ __security_cookie, __security_cookie & 0x1F);
    v4 = *(_BYTE *)(a1 - 29);
  }
  else
  {
    v8 = *(_DWORD *)v7;
  }
  v9 = v8;
  *(_DWORD *)(a1 - 36) = v8;
  v10 = v8 == 1;
  *(_DWORD *)(a1 - 56) = v10;
  *(_BYTE *)(a1 - 30) = v10;
  if ( (_BYTE)v10 )
    goto LABEL_37;
  if ( !v9 )
  {
    if ( v4 )
      sub_1002D9CB(3);
    v16 = 3;
    sub_1002DE58();
  }
  if ( v2 == 8 || v2 == 11 || v2 == 4 )
  {
    *(_DWORD *)(a1 - 48) = *(_DWORD *)(v1 + 4);
    *(_DWORD *)(v1 + 4) = 0;
    if ( v2 != 8 )
      goto LABEL_36;
    *(_DWORD *)(a1 - 52) = *(_DWORD *)sub_1003349E(v1, a1);
    *(_DWORD *)sub_1003349E(v1, a1) = 140;
  }
  if ( v2 == 8 )
  {
    v11 = *(_DWORD *)v1 + 36;
    v12 = *(_DWORD *)v1 + 144;
    while ( 1 )
    {
      *(_DWORD *)(a1 - 60) = v11;
      if ( v11 == v12 )
        break;
      *(_DWORD *)(v11 + 8) = 0;
      v11 += 12;
    }
    goto LABEL_37;
  }
LABEL_36:
  v13 = __ROR4__(0, 32 - (__security_cookie & 0x1F));
  **(_DWORD **)(a1 - 40) = __security_cookie ^ v13;
LABEL_37:
  *(_DWORD *)(a1 - 4) = -2;
  sub_10033667(a1);
  if ( !*(_BYTE *)(a1 - 56) )
  {
    if ( v2 == 8 )
    {
      v14 = *(_DWORD *)(sub_10030B70(v1, a1) + 8);
      __guard_check_icall_fptr(*(_DWORD *)(a1 - 36));
      (*(void (__cdecl **)(signed int, int))(a1 - 36))(8, v14);
    }
    else
    {
      __guard_check_icall_fptr(*(_DWORD *)(a1 - 36));
      (*(void (__cdecl **)(int))(a1 - 36))(v2);
    }
    if ( v2 == 8 || v2 == 11 || v2 == 4 )
    {
      *(_DWORD *)(v1 + 4) = *(_DWORD *)(a1 - 48);
      if ( v2 == 8 )
        *(_DWORD *)(sub_10030B70(v1, a1) + 8) = *(_DWORD *)(a1 - 52);
    }
  }
  return sub_1003B6C9(v16);
}
// 1003B6C9: using guessed type int __cdecl sub_1003B6C9(_DWORD);
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (10033658) --------------------------------------------------------
void __usercall sub_10033658(int a1@<eax>, int a2@<ebp>)
{
  int v2; // esi@1
  int v3; // ebx@1

  v2 = *(_DWORD *)(a2 + 8);
  v3 = *(_DWORD *)(a2 - 44);
  LOBYTE(a1) = *(_BYTE *)(a2 - 30);
  *(_DWORD *)(a2 - 56) = a1;
  sub_10033667(a2);
}

//----- (10033667) --------------------------------------------------------
void __usercall sub_10033667(int a1@<ebp>)
{
  if ( *(_BYTE *)(a1 - 29) )
    sub_1002D9CB(3);
}

//----- (100336AF) --------------------------------------------------------
int sub_100336AF()
{
  return dword_1007CC8C;
}
// 1007CC8C: using guessed type int dword_1007CC8C;

//----- (100336B5) --------------------------------------------------------
bool sub_100336B5()
{
  hHeap = GetProcessHeap();
  return hHeap != 0;
}

//----- (100336C6) --------------------------------------------------------
char sub_100336C6()
{
  hHeap = 0;
  return 1;
}

//----- (100336D0) --------------------------------------------------------
int __usercall sub_100336D0@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  signed int i; // esi@1
  int v4; // eax@3
  int v5; // ST00_4@5
  int v6; // eax@9
  int v7; // edx@9
  int v8; // ecx@9

  sub_1000FFB0((int)&unk_100770C8, 16);
  *(_DWORD *)(a2 - 28) = 0;
  sub_1002D983(8);
  *(_DWORD *)(a2 - 4) = 0;
  for ( i = 3; ; ++i )
  {
    *(_DWORD *)(a2 - 32) = i;
    if ( i == dword_1007C6F8 )
      break;
    v4 = *(_DWORD *)(dword_1007C6FC + 4 * i);
    if ( v4 )
    {
      if ( (*(_DWORD *)(v4 + 12) >> 13) & 1 )
      {
        v5 = *(_DWORD *)(dword_1007C6FC + 4 * i);
        if ( sub_100290B5(a1, a2, a3) != -1 )
          ++*(_DWORD *)(a2 - 28);
      }
      DeleteCriticalSection((LPCRITICAL_SECTION)(*(_DWORD *)(dword_1007C6FC + 4 * i) + 32));
      sub_1002D7BC(*(LPVOID *)(dword_1007C6FC + 4 * i));
      *(_DWORD *)(dword_1007C6FC + 4 * i) = 0;
    }
  }
  *(_DWORD *)(a2 - 4) = -2;
  sub_10033767();
  v6 = *(_DWORD *)(a2 - 28);
  return sub_1000FFF6(v8, v7);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007C6F8: using guessed type int dword_1007C6F8;
// 1007C6FC: using guessed type int dword_1007C6FC;

//----- (10033767) --------------------------------------------------------
void sub_10033767()
{
  sub_1002D9CB(8);
}

//----- (10033770) --------------------------------------------------------
signed int __cdecl sub_10033770(unsigned int a1, unsigned int a2)
{
  signed int result; // eax@2

  if ( a2 <= a1 )
    result = a2 < a1;
  else
    result = -1;
  return result;
}

//----- (10033788) --------------------------------------------------------
signed int __usercall sub_10033788@<eax>(int a1@<ebx>, int a2@<edi>, LPCSTR *a3, int a4)
{
  signed int result; // eax@2
  LPCSTR *v5; // esi@3
  char v6; // cl@3
  signed int v7; // edi@3
  int v8; // ebx@3
  LPCSTR v9; // ST0C_4@4
  int v10; // eax@4
  int v11; // eax@5
  unsigned int v12; // edx@10
  unsigned int v13; // esi@10
  signed int v14; // edx@11
  unsigned int v15; // ebx@11
  int v16; // ecx@12
  char v17; // al@13
  LPVOID v18; // esi@16
  int v19; // edx@18
  int v20; // ecx@20
  char v21; // al@21
  int v22; // ST0C_4@22
  int v23; // edx@23
  int v24; // [sp+4h] [bp-20h]@3
  int v25; // [sp+8h] [bp-1Ch]@3
  int v26; // [sp+Ch] [bp-18h]@3
  char *v27; // [sp+10h] [bp-14h]@19
  char *v28; // [sp+14h] [bp-10h]@18
  int v29; // [sp+18h] [bp-Ch]@10
  int v30; // [sp+1Ch] [bp-8h]@10
  unsigned int v31; // [sp+20h] [bp-4h]@4

  if ( a4 )
  {
    v5 = a3;
    v6 = 0;
    *(_DWORD *)a4 = 0;
    v7 = 0;
    v8 = 0;
    v24 = 0;
    v25 = 0;
    v26 = 0;
    if ( *a3 )
    {
      while ( 1 )
      {
        LOWORD(v31) = 16170;
        v9 = *v5;
        BYTE2(v31) = v6;
        LOBYTE(v10) = sub_10038B80((int)v9, (int)&v31);
        v11 = v10 ? sub_100339AE(v7, *v5, v10, (int)&v24) : sub_10033918((int)*v5, 0, 0, (int)&v24);
        v7 = v11;
        if ( v11 )
          break;
        ++v5;
        v6 = 0;
        if ( !*v5 )
        {
          v8 = v25;
          v7 = v24;
          goto LABEL_10;
        }
      }
    }
    else
    {
LABEL_10:
      v30 = 0;
      v31 = 0;
      v12 = ((v8 - v7) >> 2) + 1;
      v29 = ((v8 - v7) >> 2) + 1;
      v13 = v8 >= (unsigned int)v7 ? (unsigned int)(v8 - v7 + 3) >> 2 : 0;
      if ( v13 )
      {
        v14 = v7;
        v15 = 0;
        do
        {
          v16 = *(_DWORD *)v14;
          v31 = *(_DWORD *)v14 + 1;
          do
            v17 = *(_BYTE *)v16++;
          while ( v17 );
          v15 += v16 - v31 + 1;
          v14 += 4;
          ++v30;
        }
        while ( v30 != v13 );
        v12 = v29;
        v31 = v15;
        v8 = v25;
      }
      v18 = sub_1002E10D(v12, v31, 1u);
      if ( v18 )
      {
        v28 = (char *)v18 + 4 * v29;
        v19 = (int)((char *)v18 + 4 * v29);
        v29 = (int)((char *)v18 + 4 * v29);
        if ( v7 != v8 )
        {
          v27 = (char *)v18 - v7;
          do
          {
            v20 = *(_DWORD *)v7;
            v30 = *(_DWORD *)v7 + 1;
            do
              v21 = *(_BYTE *)v20++;
            while ( v21 );
            v22 = *(_DWORD *)v7;
            v30 = v20 - v30 + 1;
            if ( sub_10038B6B(v8, v7, v19, (int)(&v28[v31] - v19), v22, v30) )
            {
              sub_1002B7B4(v8, v7);
              __debugbreak();
              JUMPOUT(*(_DWORD *)sub_10033918);
            }
            v23 = v29;
            *(_DWORD *)&v27[v7] = v29;
            v7 += 4;
            v19 = v30 + v23;
            v29 = v19;
          }
          while ( v7 != v8 );
        }
        v7 = 0;
        *(_DWORD *)a4 = v18;
      }
      else
      {
        v7 = -1;
      }
      sub_1002D7BC(0);
    }
    sub_10033B32(&v24);
    result = v7;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    result = 22;
  }
  return result;
}

//----- (10033918) --------------------------------------------------------
signed int __cdecl sub_10033918(int a1, int a2, int a3, int a4)
{
  unsigned int v4; // kr00_4@1
  int v5; // ecx@1
  signed int result; // eax@2
  int v7; // ebx@3
  int v8; // eax@3
  void *v9; // esi@3
  int v10; // esi@6

  v4 = strlen((const char *)a1);
  v5 = v4 + 1;
  if ( v4 + 1 <= -1 - a3 )
  {
    v7 = v5 + a3 + 1;
    v8 = (int)sub_1002D75F(v5 + a3 + 1, 1u);
    v9 = (void *)v8;
    if ( a3 && sub_10038B6B(v7, a3, v8, v7, a2, a3)
      || (v7 -= a3, sub_10038B6B(v7, a3, (int)((char *)v9 + a3), v7, a1, v4 + 1)) )
    {
      sub_1002B7B4(v7, a3);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_100339AE);
    }
    v10 = sub_10033B57(a4, v9);
    sub_1002D7BC(0);
    result = v10;
  }
  else
  {
    result = 12;
  }
  return result;
}

//----- (100339AE) --------------------------------------------------------
int __usercall sub_100339AE@<eax>(int a1@<edi>, LPCSTR lpFileName, int a3, int a4)
{
  int i; // ecx@1
  const CHAR v5; // al@2
  const CHAR v6; // dl@7
  int result; // eax@9
  int v8; // edi@10
  bool v9; // al@13
  HANDLE v10; // esi@15
  int v11; // eax@15
  signed int v12; // eax@16
  bool v13; // zf@28
  int v14; // eax@29
  int v15; // [sp+Ch] [bp-150h]@22
  int v16; // [sp+10h] [bp-14Ch]@15
  char FindFileData; // [sp+18h] [bp-144h]@15
  char v18; // [sp+44h] [bp-118h]@23
  char v19; // [sp+45h] [bp-117h]@24
  char v20; // [sp+46h] [bp-116h]@26

  for ( i = a3; ; i = sub_10038BC0((int)lpFileName, a1, (unsigned int)lpFileName, i) )
  {
    if ( (LPCSTR)i != lpFileName )
    {
      v5 = *(_BYTE *)i;
      if ( *(_BYTE *)i != 47 && v5 != 92 && v5 != 58 )
        continue;
    }
    break;
  }
  v6 = *(_BYTE *)i;
  if ( *(_BYTE *)i != 58 || (LPCSTR)i == lpFileName + 1 )
  {
    v8 = 0;
    v9 = v6 == 47 || v6 == 92 || v6 == 58;
    v16 = v9 != 0 ? i - (_DWORD)lpFileName + 1 : 0;
    sub_10028330(&FindFileData, 0, 0x140u);
    v10 = FindFirstFileExA(lpFileName, 0, &FindFileData, 0, 0, 0);
    v11 = a4;
    if ( v10 == (HANDLE)-1 )
    {
      v12 = sub_10033918((int)lpFileName, 0, 0, a4);
    }
    else
    {
      v15 = (*(_DWORD *)(a4 + 4) - *(_DWORD *)a4) >> 2;
      while ( 1 )
      {
        if ( v18 != 46 || v19 && (v19 != 46 || v20) )
        {
          v12 = sub_10033918((int)&v18, (int)lpFileName, v16, v11);
          if ( v12 )
            break;
        }
        v13 = FindNextFileA(v10, (LPWIN32_FIND_DATAA)&FindFileData) == 0;
        v11 = a4;
        if ( v13 )
        {
          v14 = (*(_DWORD *)(a4 + 4) - *(_DWORD *)a4) >> 2;
          if ( v15 != v14 )
            sub_10038720((int)lpFileName, *(_DWORD *)a4 + 4 * v15, v14 - v15, 4, sub_10033770);
          goto LABEL_18;
        }
      }
    }
    v8 = v12;
LABEL_18:
    if ( v10 != (HANDLE)-1 )
      FindClose(v10);
    result = v8;
  }
  else
  {
    result = sub_10033918((int)lpFileName, 0, 0, a4);
  }
  return result;
}

//----- (10033B32) --------------------------------------------------------
void __thiscall sub_10033B32(void *this)
{
  void *v1; // edi@1
  LPVOID *i; // esi@1

  v1 = this;
  for ( i = *(LPVOID **)this; i != *((LPVOID **)v1 + 1); ++i )
    sub_1002D7BC(*i);
  sub_1002D7BC(*(LPVOID *)v1);
}

//----- (10033B57) --------------------------------------------------------
int __thiscall sub_10033B57(int this, LPVOID lpMem)
{
  int v2; // esi@1
  signed int v3; // edi@1
  int result; // eax@2

  v2 = this;
  v3 = sub_10033B8C(this);
  if ( v3 )
  {
    sub_1002D7BC(lpMem);
    result = v3;
  }
  else
  {
    **(_DWORD **)(v2 + 4) = lpMem;
    *(_DWORD *)(v2 + 4) += 4;
    result = 0;
  }
  return result;
}

//----- (10033B8C) --------------------------------------------------------
signed int __thiscall sub_10033B8C(int this)
{
  int v1; // esi@1
  int v2; // edi@1
  int v4; // eax@4
  unsigned int v5; // edi@7
  LPVOID v6; // eax@8
  signed int v7; // esi@9

  v1 = this;
  v2 = *(_DWORD *)(this + 8);
  if ( *(_DWORD *)(this + 4) != v2 )
    return 0;
  if ( !*(_DWORD *)this )
  {
    *(_DWORD *)this = sub_1002D75F(4u, 4u);
    sub_1002D7BC(0);
    v4 = *(_DWORD *)v1;
    if ( *(_DWORD *)v1 )
    {
      *(_DWORD *)(v1 + 4) = v4;
      *(_DWORD *)(v1 + 8) = v4 + 16;
      return 0;
    }
    return 12;
  }
  v5 = (v2 - *(_DWORD *)this) >> 2;
  if ( v5 > 0x7FFFFFFF )
    return 12;
  v6 = sub_1002E9E8(v5, *(LPCVOID *)this, 2 * v5, 4u);
  if ( v6 )
  {
    *(_DWORD *)v1 = v6;
    *(_DWORD *)(v1 + 4) = (char *)v6 + 4 * v5;
    *(_DWORD *)(v1 + 8) = (char *)v6 + 8 * v5;
    v7 = 0;
  }
  else
  {
    v7 = 12;
  }
  sub_1002D7BC(0);
  return v7;
}

//----- (10033C13) --------------------------------------------------------
signed int __usercall sub_10033C13@<eax>(int a1@<ebx>, int a2@<edi>, LPCSTR *a3, int a4)
{
  return sub_10033788(a1, a2, a3, a4);
}

//----- (10033C1E) --------------------------------------------------------
int __userpurge sub_10033C1E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>, int a4, int a5, int a6)
{
  int v6; // edx@1
  int v7; // ecx@1

  sub_1000FFB0((int)&unk_10077108, 8);
  sub_1002D983(**(_DWORD **)(a2 + 8));
  *(_DWORD *)(a2 - 4) = 0;
  sub_10033C89(*(_DWORD *)(a2 + 12), a1, a3);
  *(_DWORD *)(a2 - 4) = -2;
  sub_10033C55(a2);
  return sub_1000FFF6(v7, v6);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (10033C55) --------------------------------------------------------
void __usercall sub_10033C55(int a1@<ebp>)
{
  sub_1002D9CB(**(_DWORD **)(a1 + 16));
}

//----- (10033C61) --------------------------------------------------------
int __usercall sub_10033C61@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4)
{
  int v4; // ebp@0
  int v6; // [sp+0h] [bp-Ch]@1
  int v7; // [sp+4h] [bp-8h]@1

  v7 = a3;
  v6 = a3;
  return sub_10033C1E(a1, v4, a2, (int)&v6, a4, (int)&v7);
}

//----- (10033C89) --------------------------------------------------------
int __usercall sub_10033C89@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  int result; // eax@4

  v3 = a1;
  dword_1007CC98 = *(_DWORD *)(*(_DWORD *)(**(_DWORD **)a1 + 72) + 4);
  dword_1007CC9C = *(_DWORD *)(*(_DWORD *)(**(_DWORD **)a1 + 72) + 8);
  dword_1007CC94 = *(_DWORD *)(*(_DWORD *)(**(_DWORD **)a1 + 72) + 540);
  sub_100343A9(a2, a3, &unk_1007CCA0, 0xCu, *(_DWORD *)(**(_DWORD **)a1 + 72) + 12, 0xCu);
  sub_100343A9(a2, a3, &unk_1007A4B8, 0x101u, *(_DWORD *)(**(_DWORD **)v3 + 72) + 24, 0x101u);
  sub_100343A9(a2, a3, &unk_1007A5C0, 0x100u, *(_DWORD *)(**(_DWORD **)v3 + 72) + 281, 0x100u);
  if ( !_InterlockedExchangeAdd((volatile signed __int32 *)off_1007A8E0, 0xFFFFFFFF) && off_1007A8E0 != &unk_1007A6C0 )
    sub_1002D7BC(off_1007A8E0);
  off_1007A8E0 = *(LPVOID *)(**(_DWORD **)v3 + 72);
  result = *(_DWORD *)(**(_DWORD **)v3 + 72);
  _InterlockedIncrement(*(volatile signed __int32 **)(**(_DWORD **)v3 + 72));
  return result;
}
// 1007CC94: using guessed type int dword_1007CC94;
// 1007CC98: using guessed type int dword_1007CC98;
// 1007CC9C: using guessed type int dword_1007CC9C;

//----- (10033D4D) --------------------------------------------------------
int __cdecl sub_10033D4D(int a1)
{
  int result; // eax@5

  switch ( a1 )
  {
    case 932:
      result = (int)L"ja-JP";
      break;
    case 936:
      result = (int)L"zh-CN";
      break;
    case 949:
      result = (int)L"ko-KR";
      break;
    case 950:
      result = (int)L"zh-TW";
      break;
    default:
      result = 0;
      break;
  }
  return result;
}
// 10068F80: using guessed type wchar_t aJaJp[6];
// 10068F8C: using guessed type wchar_t aZhCn[6];
// 10068F98: using guessed type wchar_t aKoKr[6];
// 10068FA4: using guessed type wchar_t aZhTw[6];

//----- (10033D8B) --------------------------------------------------------
UINT __usercall sub_10033D8B@<eax>(int a1@<ebx>, UINT a2)
{
  UINT result; // eax@1
  int v3; // [sp+0h] [bp-10h]@1
  int v4; // [sp+4h] [bp-Ch]@6
  char v5; // [sp+Ch] [bp-4h]@7

  sub_10029BD2((int)&v3, a1, 0);
  dword_1007CCAC = 0;
  result = a2;
  switch ( a2 )
  {
    case 0xFFFFFFFE:
      dword_1007CCAC = 1;
      result = GetOEMCP();
      break;
    case 0xFFFFFFFD:
      dword_1007CCAC = 1;
      result = GetACP();
      break;
    case 0xFFFFFFFC:
      dword_1007CCAC = 1;
      result = *(_DWORD *)(v4 + 8);
      break;
  }
  if ( v5 )
    *(_DWORD *)(v3 + 848) &= 0xFFFFFFFD;
  return result;
}
// 1007CCAC: using guessed type int dword_1007CCAC;

//----- (10033DFE) --------------------------------------------------------
int __cdecl sub_10033DFE(int a1)
{
  int v1; // esi@1
  int result; // eax@1
  signed int v3; // ecx@1
  char *v4; // edi@1
  int v5; // ecx@3
  signed int v6; // edx@3

  v1 = a1 + 24;
  sub_10028330((void *)(a1 + 24), 0, 0x101u);
  *(_DWORD *)(a1 + 4) = 0;
  result = 0;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 540) = 0;
  v3 = 257;
  *(_DWORD *)(a1 + 12) = 0;
  *(_DWORD *)(a1 + 16) = 0;
  *(_DWORD *)(a1 + 20) = 0;
  v4 = (char *)&unk_1007A6C0 - a1;
  do
  {
    *(_BYTE *)v1 = v4[v1];
    ++v1;
    --v3;
  }
  while ( v3 );
  v5 = a1 + 281;
  v6 = 256;
  do
  {
    LOBYTE(result) = v4[v5];
    *(_BYTE *)v5++ = result;
    --v6;
  }
  while ( v6 );
  return result;
}

//----- (10033E63) --------------------------------------------------------
char __cdecl sub_10033E63(int a1)
{
  unsigned int v1; // eax@2
  unsigned int i; // eax@4
  char *v3; // ecx@4
  unsigned int v4; // edx@5
  unsigned int v5; // ecx@11
  int v6; // eax@12
  int v7; // edx@20
  unsigned int v8; // ecx@20
  int v9; // edx@21
  char v10; // al@22
  struct _cpinfo CPInfo; // [sp+14h] [bp-718h]@1
  WORD CharType[512]; // [sp+28h] [bp-704h]@11
  _BYTE v14[256]; // [sp+428h] [bp-304h]@11
  _BYTE DestStr[256]; // [sp+528h] [bp-204h]@11
  CHAR MultiByteStr[256]; // [sp+628h] [bp-104h]@3

  if ( GetCPInfo(*(_DWORD *)(a1 + 4), &CPInfo) )
  {
    v1 = 0;
    do
    {
      MultiByteStr[v1] = v1;
      ++v1;
    }
    while ( v1 < 0x100 );
    LOBYTE(i) = CPInfo.LeadByte[0];
    v3 = (char *)CPInfo.LeadByte;
    MultiByteStr[0] = 32;
    while ( (_BYTE)i )
    {
      v4 = (unsigned __int8)v3[1];
      for ( i = (unsigned __int8)i; i <= v4 && i < 0x100; ++i )
        MultiByteStr[i] = 32;
      v3 += 2;
      LOBYTE(i) = *v3;
    }
    sub_100383E1(0, 0, 1u, MultiByteStr, 256, CharType, *(_DWORD *)(a1 + 4), 0);
    sub_100331C7(0, 0, *(_DWORD *)(a1 + 540), 0x100u, MultiByteStr, 256, (LPWSTR)DestStr, 256, *(_DWORD *)(a1 + 4), 0);
    sub_100331C7(0, 0, *(_DWORD *)(a1 + 540), 0x200u, MultiByteStr, 256, (LPWSTR)v14, 256, *(_DWORD *)(a1 + 4), 0);
    v5 = 0;
    while ( 1 )
    {
      LOWORD(v6) = CharType[v5];
      if ( v6 & 1 )
      {
        *(_BYTE *)(a1 + v5 + 25) |= 0x10u;
        LOBYTE(v6) = DestStr[v5];
      }
      else
      {
        if ( !(v6 & 2) )
        {
          *(_BYTE *)(a1 + v5 + 281) = 0;
          goto LABEL_18;
        }
        *(_BYTE *)(a1 + v5 + 25) |= 0x20u;
        LOBYTE(v6) = v14[v5];
      }
      *(_BYTE *)(a1 + v5 + 281) = v6;
LABEL_18:
      ++v5;
      if ( v5 >= 0x100 )
        return v6;
    }
  }
  v7 = a1 + 281;
  v8 = 0;
  v6 = -97 - (a1 + 281);
  do
  {
    v9 = v8 + v7;
    if ( (unsigned int)(v9 + v6 + 32) <= 0x19 )
    {
      *(_BYTE *)(a1 + v8 + 25) |= 0x10u;
      v10 = v8 + 32;
LABEL_25:
      *(_BYTE *)v9 = v10;
      goto LABEL_27;
    }
    if ( (unsigned int)(v9 + v6) <= 0x19 )
    {
      *(_BYTE *)(a1 + v8 + 25) |= 0x20u;
      v10 = v8 - 32;
      goto LABEL_25;
    }
    *(_BYTE *)v9 = 0;
LABEL_27:
    v6 = -97 - (a1 + 281);
    v7 = a1 + 281;
    ++v8;
  }
  while ( v8 < 0x100 );
  return v6;
}
// 10033E63: using guessed type CHAR MultiByteStr[256];
// 10033E63: using guessed type WORD CharType[512];

//----- (10033FF7) --------------------------------------------------------
signed int __usercall sub_10033FF7@<eax>(int a1@<ebx>, UINT a2, char a3)
{
  int v3; // ebp@0
  LPVOID v5; // eax@3
  void *v6; // edi@3
  UINT v7; // ST00_4@4
  signed int v8; // esi@4
  int v9; // ebx@11
  void *v10; // ecx@14
  UINT v11; // [sp+0h] [bp-Ch]@1
  int v12; // [sp+8h] [bp-4h]@1

  v12 = sub_10030B70(a1, v3);
  sub_10034116(a1, v3);
  v11 = sub_10033D8B(a1, a2);
  if ( v11 == *(_DWORD *)(*(_DWORD *)(v12 + 72) + 4) )
    return 0;
  v5 = sub_1002ED94(0x220u);
  v6 = v5;
  if ( v5 )
  {
    qmemcpy(v5, *(const void **)(v12 + 72), 0x220u);
    v6 = v5;
    v7 = v11;
    *(_DWORD *)v5 = 0;
    v8 = sub_100341B8(-1, v7, (int)v5);
    if ( v8 != -1 )
    {
      if ( !a3 )
        sub_10031743();
      v9 = _InterlockedDecrement(*(volatile signed __int32 **)(v12 + 72));
      if ( !v9 && *(_UNKNOWN **)(v12 + 72) != &unk_1007A6C0 )
        sub_1002D7BC(*(LPVOID *)(v12 + 72));
      *(_DWORD *)v6 = 1;
      v10 = v6;
      v6 = 0;
      *(_DWORD *)(v12 + 72) = v10;
      if ( !(*(_BYTE *)(v12 + 848) & 2) && !(dword_1007A8F0 & 1) )
      {
        v11 = (UINT)&v12;
        sub_10033C61(v9, 0, 5, (int)&v11);
        if ( a3 )
          off_1007A284 = off_1007A8E0;
      }
      goto LABEL_7;
    }
    *(_DWORD *)sub_1002E9D5() = 22;
  }
  v8 = -1;
LABEL_7:
  sub_1002D7BC(v6);
  return v8;
}
// 1007A284: using guessed type void *off_1007A284;
// 1007A8F0: using guessed type int dword_1007A8F0;

//----- (100340F8) --------------------------------------------------------
char __usercall sub_100340F8@<al>(int a1@<ebx>)
{
  if ( !byte_1007CCB0 )
  {
    sub_10033FF7(a1, 0xFFFFFFFD, 1);
    byte_1007CCB0 = 1;
  }
  return 1;
}
// 1007CCB0: using guessed type char byte_1007CCB0;

//----- (10034116) --------------------------------------------------------
int __usercall sub_10034116@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  int v2; // eax@1
  int v3; // edx@1
  int v4; // edi@1
  void *v5; // ecx@1
  LPVOID v6; // esi@3

  sub_1000FFB0((int)&unk_100770E8, 12);
  *(_DWORD *)(a2 - 28) = 0;
  v2 = sub_10030B70(a1, a2);
  v4 = v2;
  v5 = (void *)dword_1007A8F0;
  if ( dword_1007A8F0 & *(_DWORD *)(v2 + 848) && *(_DWORD *)(v2 + 76) )
  {
    v6 = *(LPVOID *)(v2 + 72);
  }
  else
  {
    sub_1002D983(5);
    *(_DWORD *)(a2 - 4) = 0;
    v6 = *(LPVOID *)(v4 + 72);
    *(_DWORD *)(a2 - 28) = v6;
    if ( v6 != off_1007A8E0 )
    {
      if ( v6 && !_InterlockedExchangeAdd((volatile signed __int32 *)v6, 0xFFFFFFFF) && v6 != &unk_1007A6C0 )
        sub_1002D7BC(v6);
      *(_DWORD *)(v4 + 72) = off_1007A8E0;
      v6 = off_1007A8E0;
      *(_DWORD *)(a2 - 28) = off_1007A8E0;
      _InterlockedIncrement((volatile signed __int32 *)v6);
    }
    *(_DWORD *)(a2 - 4) = -2;
    sub_100341A7();
  }
  if ( !v6 )
    sub_1002D71C(v5, a1, a2, v4, 0);
  return sub_1000FFF6(v5, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007A8F0: using guessed type int dword_1007A8F0;

//----- (100341A7) --------------------------------------------------------
void sub_100341A7()
{
  sub_1002D9CB(5);
}

//----- (100341B8) --------------------------------------------------------
signed int __usercall sub_100341B8@<eax>(int a1@<ebx>, UINT a2, int a3)
{
  UINT v3; // ebx@1
  signed int result; // eax@2
  unsigned int v5; // edi@3
  int v6; // ecx@3
  unsigned int v7; // eax@3
  char *v8; // eax@11
  char v9; // cl@12
  unsigned int v10; // edx@13
  unsigned int j; // ecx@13
  int v12; // eax@17
  signed int v13; // ecx@17
  char *v14; // eax@25
  char *v15; // ecx@26
  unsigned int i; // eax@27
  unsigned int v17; // edx@28
  int v18; // ecx@35
  char *v19; // edx@35
  signed int v20; // edi@35
  __int16 v21; // ax@36
  int v22; // [sp+8h] [bp-20h]@25
  int v23; // [sp+Ch] [bp-1Ch]@3
  char *v24; // [sp+Ch] [bp-1Ch]@25
  struct _cpinfo CPInfo; // [sp+10h] [bp-18h]@9

  v3 = sub_10033D8B(a1, a2);
  if ( v3 )
  {
    v5 = 0;
    v6 = 0;
    v7 = 0;
    v23 = 0;
    do
    {
      if ( dword_1007A3C8[v7] == v3 )
      {
        sub_10028330((void *)(a3 + 24), 0, 0x101u);
        v22 = 48 * v23;
        v14 = &aJ[48 * v23];
        v24 = &aJ[48 * v23];
        do
        {
          v15 = v14;
          if ( *v14 )
          {
            do
            {
              LOBYTE(i) = v15[1];
              if ( !(_BYTE)i )
                break;
              v17 = (unsigned __int8)*v15;
              for ( i = (unsigned __int8)i; v17 <= i && v17 < 0x100; i = (unsigned __int8)v15[1] )
                *(_BYTE *)(a3 + v17++ + 25) |= byte_1007A3C4[v5];
              v15 += 2;
            }
            while ( *v15 );
            v14 = v24;
          }
          ++v5;
          v14 += 8;
          v24 = v14;
        }
        while ( v5 < 4 );
        *(_DWORD *)(a3 + 4) = v3;
        *(_DWORD *)(a3 + 8) = 1;
        *(_DWORD *)(a3 + 540) = sub_10033D4D(v3);
        v18 = a3 + 12;
        v19 = &aVyv[v22];
        v20 = 6;
        do
        {
          v21 = *(_WORD *)v19;
          v19 += 2;
          *(_WORD *)v18 = v21;
          v18 += 2;
          --v20;
        }
        while ( v20 );
LABEL_37:
        sub_10033E63(a3);
        goto LABEL_38;
      }
      ++v6;
      v7 += 12;
      v23 = v6;
    }
    while ( v7 < 60 );
    if ( v3 == 65000 || v3 == 65001 || !IsValidCodePage((unsigned __int16)v3) )
      return -1;
    if ( GetCPInfo(v3, &CPInfo) )
    {
      sub_10028330((void *)(a3 + 24), 0, 0x101u);
      *(_DWORD *)(a3 + 4) = v3;
      *(_DWORD *)(a3 + 540) = 0;
      if ( CPInfo.MaxCharSize <= 1 )
      {
        *(_DWORD *)(a3 + 8) = 0;
      }
      else
      {
        v8 = (char *)CPInfo.LeadByte;
        if ( CPInfo.LeadByte[0] )
        {
          do
          {
            v9 = v8[1];
            if ( !v9 )
              break;
            v10 = (unsigned __int8)v9;
            for ( j = (unsigned __int8)*v8; j <= v10; ++j )
              *(_BYTE *)(a3 + j + 25) |= 4u;
            v8 += 2;
          }
          while ( *v8 );
        }
        v12 = a3 + 26;
        v13 = 254;
        do
        {
          *(_BYTE *)v12++ |= 8u;
          --v13;
        }
        while ( v13 );
        *(_DWORD *)(a3 + 540) = sub_10033D4D(*(_DWORD *)(a3 + 4));
        *(_DWORD *)(a3 + 8) = 1;
      }
      *(_DWORD *)(a3 + 12) = 0;
      *(_DWORD *)(a3 + 16) = 0;
      *(_DWORD *)(a3 + 20) = 0;
      goto LABEL_37;
    }
    if ( !dword_1007CCAC )
      return -1;
    sub_10033DFE(a3);
LABEL_38:
    result = 0;
  }
  else
  {
    sub_10033DFE(a3);
    result = 0;
  }
  return result;
}
// 1007A3C8: using guessed type int dword_1007A3C8[];
// 1007CCAC: using guessed type int dword_1007CCAC;

//----- (100343A9) --------------------------------------------------------
signed int __usercall sub_100343A9@<eax>(int a1@<ebx>, int a2@<edi>, void *a3, unsigned int a4, int a5, unsigned int a6)
{
  int v7; // eax@9
  signed int v8; // [sp-8h] [bp-Ch]@9

  if ( !a6 )
    return 0;
  if ( !a3 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return 22;
  }
  if ( a5 && a4 >= a6 )
  {
    sub_100278E0(a3, (const void *)a5, a6);
    return 0;
  }
  sub_10028330(a3, 0, a4);
  if ( !a5 )
  {
    v7 = sub_1002E9D5();
    v8 = 22;
LABEL_12:
    *(_DWORD *)v7 = v8;
    sub_1002B787(a1, a5);
    return v8;
  }
  if ( a4 < a6 )
  {
    v7 = sub_1002E9D5();
    v8 = 34;
    goto LABEL_12;
  }
  return 22;
}

//----- (1003442A) --------------------------------------------------------
signed int __usercall sub_1003442A@<eax>(int a1@<ebx>, int a2, unsigned __int8 a3, int a4, unsigned __int8 a5)
{
  signed int v5; // edx@2
  int v6; // eax@3
  int v8; // [sp+4h] [bp-10h]@1
  int v9; // [sp+8h] [bp-Ch]@3
  int v10; // [sp+Ch] [bp-8h]@1
  char v11; // [sp+10h] [bp-4h]@7

  sub_10029BD2((int)&v8, a1, a2);
  if ( a5 & *(_BYTE *)(v10 + a3 + 25)
    || ((v5 = 0, !a4) ? (v6 = 0) : (v6 = (unsigned __int16)(a4 & *(_WORD *)(*(_DWORD *)v9 + 2 * a3))), v6) )
    v5 = 1;
  if ( v11 )
    *(_DWORD *)(v8 + 848) &= 0xFFFFFFFD;
  return v5;
}

//----- (10034483) --------------------------------------------------------
signed int __usercall sub_10034483@<eax>(int a1@<ebx>, unsigned __int8 a2)
{
  return sub_1003442A(a1, 0, a2, 0, 4u);
}

//----- (1003449B) --------------------------------------------------------
char sub_1003449B()
{
  dword_1007CCC0 = (int)GetCommandLineA();
  dword_1007CCC4 = (int)GetCommandLineW();
  return 1;
}
// 1007CCC0: using guessed type int dword_1007CCC0;
// 1007CCC4: using guessed type int dword_1007CCC4;

//----- (100344B4) --------------------------------------------------------
int __cdecl sub_100344B4(const unsigned __int16 *a1)
{
  const unsigned __int16 *i; // edx@1

  for ( i = a1; *i; i += wcslen(i) + 1 )
    ;
  return (int)(i + 1);
}

//----- (100344EB) --------------------------------------------------------
CHAR *sub_100344EB()
{
  const unsigned __int16 *v0; // eax@1
  const WCHAR *v1; // esi@1
  int v2; // eax@2
  int v3; // ebx@2
  int v4; // eax@2
  CHAR *v5; // edi@3
  CHAR *v6; // ebx@5
  int cbMultiByte; // [sp+Ch] [bp-4h]@2

  v0 = GetEnvironmentStringsW();
  v1 = v0;
  if ( v0
    && (v2 = sub_100344B4(v0),
        v3 = (v2 - (signed int)v1) >> 1,
        v4 = WideCharToMultiByte(0, 0, v1, v3, 0, 0, 0, 0),
        (cbMultiByte = v4) != 0) )
  {
    v5 = (CHAR *)sub_1002ED94(v4);
    if ( v5 && WideCharToMultiByte(0, 0, v1, v3, v5, cbMultiByte, 0, 0) )
    {
      v6 = v5;
      v5 = 0;
    }
    else
    {
      v6 = 0;
    }
    sub_1002D7BC(v5);
  }
  else
  {
    v6 = 0;
  }
  if ( v1 )
    FreeEnvironmentStringsW((LPWCH)v1);
  return v6;
}

//----- (1003456E) --------------------------------------------------------
char __cdecl sub_1003456E(int (**a1)(void), int (**a2)(void))
{
  char result; // al@2
  int (**v3)(void); // esi@3
  int (*v4)(void); // ebx@4
  int v5; // esi@10
  void (__cdecl *v6)(_DWORD); // ebx@12

  if ( a1 == a2 )
  {
    result = 1;
  }
  else
  {
    v3 = a1;
    do
    {
      v4 = *v3;
      if ( *v3 )
      {
        __guard_check_icall_fptr(*v3);
        if ( !(unsigned __int8)v4() )
          break;
      }
      v3 += 2;
    }
    while ( v3 != a2 );
    if ( v3 == a2 )
    {
      result = 1;
    }
    else
    {
      if ( v3 != a1 )
      {
        v5 = (int)(v3 - 1);
        do
        {
          if ( *(_DWORD *)(v5 - 4) )
          {
            v6 = *(void (__cdecl **)(_DWORD))v5;
            if ( *(_DWORD *)v5 )
            {
              __guard_check_icall_fptr(v6);
              v6(0);
            }
          }
          v5 -= 8;
        }
        while ( (int (**)(void))(v5 + 4) != a1 );
      }
      result = 0;
    }
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (100345F1) --------------------------------------------------------
char __cdecl sub_100345F1(int a1, int a2)
{
  int v2; // esi@2
  void (__cdecl *v3)(_DWORD); // edi@3

  if ( a1 != a2 )
  {
    v2 = a2 - 4;
    do
    {
      v3 = *(void (__cdecl **)(_DWORD))v2;
      if ( *(_DWORD *)v2 )
      {
        __guard_check_icall_fptr(v3);
        v3(0);
      }
      v2 -= 8;
    }
    while ( v2 + 4 != a1 );
  }
  return 1;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (1003463E) --------------------------------------------------------
BOOL sub_1003463E()
{
  int v0; // eax@1

  v0 = __ROR4__(dword_1007CCCC ^ __security_cookie, __security_cookie & 0x1F);
  return v0 != 0;
}
// 1007CCCC: using guessed type int dword_1007CCCC;

//----- (10034657) --------------------------------------------------------
int __usercall sub_10034657@<eax>(int a1@<edx>, int a2)
{
  return sub_100333F3((unsigned int)&dword_1007CCCC, a1, a2);
}
// 1007CCCC: using guessed type int dword_1007CCCC;

//----- (1003466B) --------------------------------------------------------
int __cdecl sub_1003466B(int a1)
{
  int (__cdecl *v1)(_DWORD); // esi@1
  int result; // eax@2

  v1 = (int (__cdecl *)(_DWORD))__ROR4__(dword_1007CCCC ^ __security_cookie, __security_cookie & 0x1F);
  if ( v1 )
  {
    __guard_check_icall_fptr(v1);
    result = v1(a1);
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);
// 1007CCCC: using guessed type int dword_1007CCCC;

//----- (100346B4) --------------------------------------------------------
LPVOID __cdecl sub_100346B4(LPVOID lpMem, SIZE_T dwBytes)
{
  LPVOID result; // eax@2

  if ( !lpMem )
    return sub_1002ED94(dwBytes);
  if ( !dwBytes )
  {
    sub_1002D7BC(lpMem);
    return 0;
  }
  if ( dwBytes > 0xFFFFFFE0 )
  {
LABEL_6:
    *(_DWORD *)sub_1002E9D5() = 12;
    return 0;
  }
  while ( 1 )
  {
    result = HeapReAlloc(hHeap, 0, lpMem, dwBytes);
    if ( result )
      return result;
    if ( !sub_100336AF() || !sub_1002D9F6(dwBytes) )
      goto LABEL_6;
  }
}

//----- (1003471D) --------------------------------------------------------
int __userpurge sub_1003471D@<eax>(int a1@<ebx>, int a2@<ebp>, int a3, int a4, int a5)
{
  signed int v5; // esi@1
  signed int v6; // eax@2
  int v7; // esi@3
  int v8; // edx@5
  int v9; // ecx@5

  sub_1000FFB0((int)&unk_10077128, 12);
  v5 = 0;
  *(_DWORD *)(a2 - 28) = 0;
  sub_10036072(**(_DWORD **)(a2 + 8));
  *(_DWORD *)(a2 - 4) = 0;
  if ( !((unsigned int)(*(&lpCriticalSection + (***(_DWORD ***)(a2 + 12) >> 6)))[2 * (***(_DWORD ***)(a2 + 12) & 0x3F)
                                                                               + 1].LockSemaphore & 1) )
    goto LABEL_4;
  v6 = sub_100362EF(a1, ***(_DWORD ***)(a2 + 12), ***(_DWORD ***)(a2 + 12));
  if ( !FlushFileBuffers((HANDLE)v6) )
  {
    v7 = sub_1002E9C2();
    *(_DWORD *)v7 = GetLastError();
LABEL_4:
    *(_DWORD *)sub_1002E9D5() = 9;
    v5 = -1;
  }
  *(_DWORD *)(a2 - 28) = v5;
  *(_DWORD *)(a2 - 4) = -2;
  sub_100347A9(a2);
  return sub_1000FFF6(v9, v8);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (100347A9) --------------------------------------------------------
void __usercall sub_100347A9(int a1@<ebp>)
{
  sub_10036129(**(_DWORD **)(a1 + 16));
}

//----- (100347B5) --------------------------------------------------------
int __usercall sub_100347B5@<eax>(int a1@<ebx>, int a2, int a3)
{
  int v3; // ebp@0
  int v5; // [sp+0h] [bp-Ch]@1
  int v6; // [sp+4h] [bp-8h]@1

  v6 = a2;
  v5 = a2;
  return sub_1003471D(a1, v3, (int)&v5, a3, (int)&v6);
}

//----- (100347DD) --------------------------------------------------------
int __usercall sub_100347DD@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  int *v4; // [sp+4h] [bp-4h]@6

  if ( a3 == -2 )
  {
    *(_DWORD *)sub_1002E9D5() = 9;
  }
  else
  {
    if ( a3 >= 0
      && a3 < (unsigned int)dword_1007CBA0
      && (unsigned int)(*(&lpCriticalSection + (a3 >> 6)))[2 * (a3 & 0x3F) + 1].LockSemaphore & 1 )
    {
      v4 = &a3;
      return sub_100347B5(a1, a3, (int)&v4);
    }
    *(_DWORD *)sub_1002E9D5() = 9;
    sub_1002B787(a1, a2);
  }
  return -1;
}
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (1003484C) --------------------------------------------------------
int sub_1003484C()
{
  dword_1023992C = IsProcessorFeaturePresent(0xAu);
  return 0;
}
// 1023992C: using guessed type int dword_1023992C;

//----- (10034860) --------------------------------------------------------
void __usercall sub_10034860(__int64 a1@<st0>)
{
  __int64 v1; // [sp+0h] [bp-8h]@1

  v1 = a1;
  sub_1003487E((__m128d)_mm_loadl_epi64((const __m128i *)&v1), a1);
}

//----- (1003487E) --------------------------------------------------------
double __usercall sub_1003487E@<st0>(__m128d a1@<xmm0>, __int64 a2)
{
  __m128d v2; // xmm0@1
  int v3; // eax@1
  __m128d v4; // xmm1@2
  __m128i v5; // xmm7@2
  __m128d v6; // xmm1@2
  signed int v7; // eax@2
  int v8; // ecx@2
  signed int v9; // eax@2
  __m128d v10; // xmm0@2
  __m128d v11; // xmm2@2
  __m128d v12; // xmm4@2
  __m128d v13; // xmm0@2
  __m128d v14; // xmm0@2
  __m128i v15; // xmm2@2
  __m128d v16; // xmm0@2
  double result; // st7@3
  signed int v18; // edx@4
  signed int v19; // eax@4
  __m128d v20; // xmm6@4
  double v21; // st7@4
  double v22; // st7@4
  int v23; // ecx@4
  signed int v24; // edx@7
  int v25; // eax@21
  __m128d v26; // xmm0@22
  double v27; // [sp+Ah] [bp-12h]@3
  double v28; // [sp+12h] [bp-Ah]@4
  __int16 v29; // [sp+1Ah] [bp-2h]@4

  v2 = _mm_unpckl_pd(a1, a1);
  v3 = _mm_extract_epi16((__m128i)v2, 3) & 0x7FFF;
  if ( ((v3 - 15504) | (unsigned int)(16527 - v3)) < 0x80000000 )
  {
    v4 = _mm_add_pd(_mm_mul_pd((__m128d)xmmword_10069010, v2), (__m128d)xmmword_10068FF0);
    v5 = (__m128i)v4;
    v6 = _mm_sub_pd(v4, (__m128d)xmmword_10068FF0);
    v7 = _mm_cvtsi128_si32(v5);
    v8 = v7 & 0x3F;
    v9 = v7 >> 6;
    v10 = _mm_sub_pd(
            _mm_sub_pd(v2, _mm_mul_pd((__m128d)xmmword_10069020, v6)),
            _mm_mul_pd((__m128d)xmmword_10069030, v6));
    v11 = (__m128d)xmmword_1006BC50[v8];
    v12 = _mm_mul_pd((__m128d)xmmword_10069040, v10);
    *(_QWORD *)&v6.m128d_f64[0] = (_QWORD)v10.m128d_f64[0];
    v13 = _mm_mul_pd(v10, v10);
    v13.m128d_f64[0] = v13.m128d_f64[0] * v13.m128d_f64[0];
    v14 = _mm_mul_pd(v13, _mm_add_pd((__m128d)xmmword_10069050, v12));
    v6.m128d_f64[0] = v6.m128d_f64[0] + v11.m128d_f64[0] + v14.m128d_f64[0];
    v15 = (__m128i)_mm_or_pd(
                     _mm_unpckh_pd(v11, v11),
                     (__m128d)_mm_sll_epi64(
                                _mm_add_epi64(
                                  _mm_and_si128(v5, _mm_load_si128((const __m128i *)&xmmword_10068FD0)),
                                  _mm_load_si128((const __m128i *)&xmmword_10068FE0)),
                                0x2Eu));
    v16 = _mm_unpckh_pd(v14, v14);
    v16.m128d_f64[0] = v16.m128d_f64[0] + v6.m128d_f64[0];
    if ( (unsigned int)(v9 + 894) <= 0x77C )
    {
      v16.m128d_f64[0] = v16.m128d_f64[0] * *(double *)&v15.m128i_i64[0] + *(double *)&v15.m128i_i64[0];
      _mm_storel_pd((double *)((char *)&v27 + 6), v16);
      return *(double *)((char *)&v27 + 6);
    }
    LOWORD(v27) = v29 | 0x300;
    v18 = v9;
    v19 = v9 >> 1;
    v20 = _mm_or_pd(
            (__m128d)_mm_andnot_si128(_mm_load_si128((const __m128i *)&xmmword_10068FC0), v15),
            (__m128d)_mm_sll_epi64(_mm_cvtsi32_si128(v19 + 1023), 0x34u));
    _mm_storel_pd(&v27, v16);
    v21 = v27;
    _mm_storel_pd(&v28, v20);
    v22 = v21 * v28 + v28;
    _mm_storel_pd(&v27, (__m128d)_mm_sll_epi64(_mm_cvtsi32_si128(v18 - v19 + 1023), 0x34u));
    v27 = v22 * v27;
    v2 = _mm_loadl_pd(&v27);
    v23 = _mm_extract_epi16((__m128i)v2, 3) & 0x7FF0;
    if ( (unsigned int)v23 >= 0x7FF0 )
    {
      v24 = 14;
    }
    else
    {
      if ( v23 )
        goto LABEL_10;
      v24 = 15;
    }
LABEL_9:
    _mm_storel_pd((double *)((char *)&v27 + 6), v2);
    sub_10038C73((int)&a2, (int)&a2, (int)((char *)&v27 + 6), v24);
    v2 = _mm_loadl_pd((double *)((char *)&v27 + 6));
LABEL_10:
    _mm_storel_pd((double *)((char *)&v27 + 6), v2);
    return *(double *)((char *)&v27 + 6);
  }
  v25 = HIDWORD(a2) & 0x7FFFFFFF;
  if ( (HIDWORD(a2) & 0x7FFFFFFFu) >= 0x40900000 )
  {
    if ( (unsigned int)v25 < 0x7FF00000 )
    {
      if ( HIDWORD(a2) >= 0x80000000 )
      {
        v2 = _mm_loadl_pd((const double *)&qword_10069098);
        v2.m128d_f64[0] = v2.m128d_f64[0] * v2.m128d_f64[0];
        v24 = 15;
      }
      else
      {
        v2 = _mm_loadl_pd((const double *)&qword_10069090);
        v2.m128d_f64[0] = v2.m128d_f64[0] * v2.m128d_f64[0];
        v24 = 14;
      }
      goto LABEL_9;
    }
    if ( (unsigned int)v25 > 0x7FF00000 || (_DWORD)a2 )
    {
      v24 = 1002;
      goto LABEL_9;
    }
    if ( HIDWORD(a2) == 2146435072 )
      result = 1.797693134862316e308/*+Inf*/;
    else
      result = 0.0;
  }
  else
  {
    v26 = _mm_loadl_pd((const double *)&a2);
    v26.m128d_f64[0] = v26.m128d_f64[0] + 1.0;
    _mm_storel_pd((double *)((char *)&v27 + 6), v26);
    result = *(double *)((char *)&v27 + 6);
  }
  return result;
}
// 10068FC0: using guessed type __int128 xmmword_10068FC0;
// 10068FD0: using guessed type __int128 xmmword_10068FD0;
// 10068FE0: using guessed type __int128 xmmword_10068FE0;
// 10068FF0: using guessed type __int128 xmmword_10068FF0;
// 10069010: using guessed type __int128 xmmword_10069010;
// 10069020: using guessed type __int128 xmmword_10069020;
// 10069030: using guessed type __int128 xmmword_10069030;
// 10069040: using guessed type __int128 xmmword_10069040;
// 10069050: using guessed type __int128 xmmword_10069050;
// 10069090: using guessed type __int64 qword_10069090;
// 10069098: using guessed type __int64 qword_10069098;
// 1006BC50: using guessed type __int128 xmmword_1006BC50[];

//----- (10034B31) --------------------------------------------------------
double __usercall sub_10034B31@<st0>(int a1@<ebp>)
{
  char v1; // ch@1
  double v2; // st6@1

  *(_BYTE *)(a1 - 144) = -2;
  sub_10034C6E();
  v2 = 1.442695040888963387 + 1.0;
  if ( *(_BYTE *)(a1 - 159) & 1 )
    v2 = 1.0 / v2;
  if ( v1 )
    v2 = -v2;
  return v2;
}
// 10034C6E: using guessed type int sub_10034C6E(void);

//----- (10034C61) --------------------------------------------------------
double __fastcall sub_10034C61(char a1)
{
  if ( a1 )
    JUMPOUT(&loc_100350B6);
  return 1.1897314953572317651e4932/*+Inf*/;
}

//----- (10034C6E) --------------------------------------------------------
#error "10034C21: positive sp value has been found (funcsize=59)"

//----- (10034CB1) --------------------------------------------------------
double __usercall sub_10034CB1@<st0>(double result@<st0>)
{
  _ST6 = result;
  __asm { frndint }
  if ( _ST6 == result )
  {
    _ST5 = result * 0.5;
    __asm { frndint }
  }
  return result;
}

//----- (10034D64) --------------------------------------------------------
void __fastcall sub_10034D64(__int16 a1, int a2)
{
  int v2; // ebp@0
  __int16 v3; // fps@1
  double v4; // st7@1
  char v8; // al@1
  int v9; // [sp-Ch] [bp-2E0h]@1
  __int16 v10; // [sp-8h] [bp-2DCh]@1

  v10 = a1;
  v9 = a2;
  v4 = sub_1003463E();
  v8;
  sub_10034FB0(v9, v10, v2, v3, v4);
  sub_10034DEF(v2, v4);
}
// 10034D97: inconsistent fpu stack
// 1003463E: using guessed type double sub_1003463E();

//----- (10034DEF) --------------------------------------------------------
double __usercall sub_10034DEF@<st0>(int a1@<ebp>, double result@<st0>)
{
  __int16 v2; // fps@2
  char v6; // al@2
  __int16 v7; // ax@11
  int v8; // ebx@20

  if ( dword_1007CCD0 )
    return result;
  *(double *)(a1 - 720) = result;
  v6 = *(_BYTE *)(a1 - 144);
  if ( !v6 )
    goto LABEL_7;
  if ( v6 == -1 )
  {
    if ( (*(_WORD *)(a1 - 714) & 0x7FF0) != 32752 )
    {
LABEL_7:
      if ( *(_WORD *)(a1 - 164) & 0x20 || !(v2 & 0x20) )
        return result;
      *(_DWORD *)(a1 - 142) = 8;
      goto LABEL_20;
    }
  }
  else
  {
    if ( v6 != -2 )
    {
      if ( !v6 )
        return result;
      *(_DWORD *)(a1 - 142) = v6;
      goto LABEL_20;
    }
    v7 = *(_WORD *)(a1 - 714) & 0x7FF0;
    if ( !v7 )
    {
      *(_DWORD *)(a1 - 142) = 4;
      if ( fabs(result) < 2.225073858507201e-308 )
        result = result * 0.0;
      goto LABEL_20;
    }
    if ( v7 != 32752 )
      goto LABEL_7;
  }
  *(_DWORD *)(a1 - 142) = 3;
  if ( fabs(result) > 1.797693134862316e308 )
    result = result * 1.797693134862316e308/*+Inf*/;
LABEL_20:
  v8 = *(_DWORD *)(a1 - 148) + 1;
  *(_DWORD *)(a1 - 138) = v8;
  if ( !(*(_BYTE *)(a1 - 712) & 1) )
  {
    *(_DWORD *)(a1 - 134) = *(_DWORD *)(a1 + 8);
    *(_DWORD *)(a1 - 134 + 4) = *(_DWORD *)(a1 + 12);
    if ( *(_BYTE *)(v8 + 12) != 1 )
    {
      *(_DWORD *)(a1 - 126) = *(_DWORD *)(a1 + 16);
      *(_DWORD *)(a1 - 126 + 4) = *(_DWORD *)(a1 + 20);
    }
  }
  *(double *)(a1 - 118) = result;
  sub_10039020(a1, *(_BYTE *)(*(_DWORD *)(a1 - 148) + 14), a1 - 142, (__int16 *)(a1 - 164));
  return *(double *)(a1 - 118);
}
// 1007CCD0: using guessed type int dword_1007CCD0;

//----- (10034F36) --------------------------------------------------------
int __cdecl sub_10034F36(double a1)
{
  int v1; // ebp@0
  double v2; // st7@1
  int v3; // edx@1
  __int16 v4; // cx@1
  __int16 v5; // fps@1

  v2 = sub_10034F69(a1);
  sub_10034FB0(v3, v4, v1, v5, v2);
  return sub_10034DE8();
}
// 10034DE8: using guessed type int sub_10034DE8(void);

//----- (10034F69) --------------------------------------------------------
double __cdecl sub_10034F69(double a1)
{
  double v1; // ST06_8@2
  double result; // st7@2

  if ( (WORD3(a1) & 0x7FF0) == 32752 )
  {
    HIDWORD(v1) = *(_QWORD *)&a1 >> 21;
    LODWORD(v1) = LODWORD(a1);
    result = v1;
  }
  else
  {
    result = a1;
  }
  return result;
}

//----- (10034FB0) --------------------------------------------------------
int __usercall sub_10034FB0@<eax>(int a1@<edx>, __int16 a2@<cx>, int a3@<ebp>, __int16 a4@<fpstat>, double _ST7@<st0>)
{
  signed __int16 v5; // bx@2

  if ( *(_BYTE *)(a1 + 14) == 5 )
  {
    HIBYTE(v5) = ((*(_WORD *)(a3 - 164) >> 8) | 2) & 0xFE;
    LOBYTE(v5) = 63;
  }
  else
  {
    v5 = 4927;
  }
  *(_WORD *)(a3 - 162) = v5;
  _EBX = &unk_1006916E;
  __asm { fxam }
  *(_DWORD *)(a3 - 148) = a1;
  *(_WORD *)(a3 - 160) = a4;
  *(_BYTE *)(a3 - 144) = 0;
  LOBYTE(a2) = __ROL1__((char)(2 * *(_BYTE *)(a3 - 159)) >> 1, 1);
  _AL = a2 & 0xF;
  __asm { xlat }
  return (*(int (__thiscall **)(int))(_AL + a1 + 16))(a2 & 0x404);
}

//----- (10035017) --------------------------------------------------------
int __usercall sub_10035017@<eax>(int a1@<edx>, int a2@<ebp>, __int16 a3@<fpstat>, double _ST6@<st1>, double a5@<st0>)
{
  signed __int16 v5; // bx@2
  __int16 v7; // fps@4
  char v9; // cl@4
  __int16 v10; // cx@4
  char v13; // ah@4

  if ( *(_BYTE *)(a1 + 14) == 5 )
  {
    HIBYTE(v5) = ((*(_WORD *)(a2 - 164) >> 8) | 2) & 0xFE;
    LOBYTE(v5) = 63;
  }
  else
  {
    v5 = 4927;
  }
  *(_WORD *)(a2 - 162) = v5;
  _EBX = &unk_1006916E;
  __asm { fxam }
  *(_DWORD *)(a2 - 148) = a1;
  *(_WORD *)(a2 - 160) = a3;
  *(_BYTE *)(a2 - 144) = 0;
  _ST6 = a5;
  v9 = *(_BYTE *)(a2 - 159);
  __asm { fxam }
  *(_WORD *)(a2 - 160) = v7;
  HIBYTE(v10) = __ROL1__((char)(2 * *(_BYTE *)(a2 - 159)) >> 1, 1);
  _AL = HIBYTE(v10) & 0xF;
  __asm { xlat }
  v13 = _AL;
  LOBYTE(v10) = __ROL1__((char)(2 * v9) >> 1, 1);
  _AL = v10 & 0xF;
  __asm { xlat }
  return (*(int (__thiscall **)(int))((char)(4 * v13 | _AL) + a1 + 16))(v10 & 0x404);
}

//----- (100350CA) --------------------------------------------------------
double sub_100350CA()
{
  return 1.0;
}

//----- (100350CF) --------------------------------------------------------
double __usercall sub_100350CF@<st0>(int a1@<ebp>, double a2@<st0>)
{
  double result; // st7@1

  *(double *)(a1 - 158) = a2;
  result = *(double *)(a1 - 158);
  if ( *(_BYTE *)(a1 - 151) & 0x40 )
  {
    *(_BYTE *)(a1 - 144) = 0;
  }
  else
  {
    *(_BYTE *)(a1 - 144) = 0;
    result = result + 1.0;
  }
  return result;
}

//----- (10035176) --------------------------------------------------------
void __usercall sub_10035176(int a1@<ebp>)
{
  *(_BYTE *)(a1 - 144) = 1;
}

//----- (100351B0) --------------------------------------------------------
void sub_100351B0()
{
  JUMPOUT(&loc_100351D0);
}

//----- (100351C7) --------------------------------------------------------
double __usercall sub_100351C7@<st0>(int a1@<eax>, int a2@<edx>, int a3@<ecx>, double a4@<st0>, __int16 a5, int a6, int a7, int a8)
{
  int v8; // ebp@0
  int v10; // [sp+0h] [bp-20h]@1
  int v11; // [sp+4h] [bp-1Ch]@1
  int v12; // [sp+8h] [bp-18h]@1
  int v13; // [sp+Ch] [bp-14h]@1
  double v14; // [sp+18h] [bp-8h]@1

  v10 = a1;
  v14 = a4;
  v11 = a3;
  v12 = a7;
  v13 = a8;
  sub_10039020(v8, a2, (int)&v10, &a5);
  return v14;
}

//----- (10035225) --------------------------------------------------------
void sub_10035225()
{
  ;
}

//----- (1003523C) --------------------------------------------------------
double __usercall sub_1003523C@<st0>(int a1@<eax>, double result@<st0>)
{
  if ( !(a1 & 0x80000) )
    result = result + 1.0;
  return result;
}

//----- (10035255) --------------------------------------------------------
double __fastcall sub_10035255(int a1, int a2)
{
  double result; // st7@2
  int v3; // ST08_4@3
  int v4; // eax@3

  if ( (*(_DWORD *)(a2 + 4) & 0x7FF00000) == 2146435072 )
  {
    v3 = *(_DWORD *)(a2 + 4) | 0x7FFF0000;
    result = COERCE_DOUBLE(*(_QWORD *)a2 << 11);
    v4 = *(_DWORD *)(a2 + 4);
  }
  else
  {
    result = *(double *)a2;
  }
  return result;
}

//----- (10035298) --------------------------------------------------------
int __cdecl sub_10035298(int a1, int a2)
{
  int result; // eax@1

  result = a2 & 0x7FF00000;
  if ( (a2 & 0x7FF00000) == 2146435072 )
    result = a2;
  return result;
}

//----- (1003539C) --------------------------------------------------------
int __cdecl sub_1003539C(int a1, int a2, int a3)
{
  int result; // eax@1
  int v4; // ecx@2
  int v5; // edx@2

  result = a3;
  if ( a3 )
  {
    v4 = a2;
    v5 = a1;
    while ( 1 )
    {
      --result;
      if ( !result || !*(_WORD *)v5 || *(_WORD *)v5 != *(_WORD *)v4 )
        break;
      v5 += 2;
      v4 += 2;
    }
    result = *(_WORD *)v5 - *(_WORD *)v4;
  }
  return result;
}

//----- (100353D6) --------------------------------------------------------
signed int __usercall sub_100353D6@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5)
{
  signed int result; // eax@1
  int v6; // edi@2
  int v7; // ecx@5
  int v8; // edx@6
  unsigned __int16 v9; // ax@7
  unsigned __int16 v10; // si@9
  unsigned __int16 v11; // ax@11

  result = dword_1007C994;
  if ( dword_1007C994 )
  {
    result = sub_1003548E(a2, a3, a4, a5, 0);
  }
  else
  {
    v6 = a5;
    if ( a5 )
    {
      if ( a3 && (v7 = a4) != 0 )
      {
        v8 = a3 - a4;
        do
        {
          v9 = *(_WORD *)(v8 + v7);
          if ( v9 < 0x41u || v9 > 0x5Au )
            v10 = *(_WORD *)(v8 + v7);
          else
            v10 = v9 + 32;
          v11 = *(_WORD *)v7;
          if ( *(_WORD *)v7 >= 0x41u && v11 <= 0x5Au )
            v11 += 32;
          v7 += 2;
          --v6;
        }
        while ( v6 && v10 && v10 == v11 );
        result = v10 - v11;
      }
      else
      {
        *(_DWORD *)sub_1002E9D5() = 22;
        sub_1002B787(a1, a5);
        result = 0x7FFFFFFF;
      }
    }
  }
  return result;
}
// 1007C994: using guessed type int dword_1007C994;

//----- (1003548E) --------------------------------------------------------
signed int __usercall sub_1003548E@<eax>(int a1@<edi>, int a2, int a3, int a4, int a5)
{
  int v5; // esi@1
  int v6; // ebx@2
  int v8; // ecx@6
  int v9; // ebx@6
  unsigned __int16 v10; // ax@7
  WCHAR v11; // si@9
  unsigned __int16 v12; // ax@11
  bool v13; // zf@18
  int v14; // [sp+Ch] [bp-14h]@5
  int v15; // [sp+10h] [bp-10h]@5
  char v16; // [sp+18h] [bp-8h]@21
  int v17; // [sp+1Ch] [bp-4h]@6

  v5 = 0;
  if ( a4 )
  {
    v6 = a2;
    if ( !a2 || (a1 = a3) == 0 )
    {
      *(_DWORD *)sub_1002E9D5() = 22;
      sub_1002B787(a2, a1);
      return 0x7FFFFFFF;
    }
    sub_10029BD2((int)&v14, a2, a5);
    if ( *(_DWORD *)(v15 + 168) )
    {
      do
      {
        v11 = sub_10032D8A(v6, *(_WORD *)v6, (int)&v15);
        v12 = sub_10032D8A(v6, *(_WORD *)a1, (int)&v15);
        v13 = a4-- == 1;
        v6 += 2;
        a1 += 2;
      }
      while ( !v13 && v11 && v11 == v12 );
    }
    else
    {
      v8 = a4;
      v9 = a2 - a3;
      v17 = 90;
      do
      {
        v10 = *(_WORD *)(v9 + a1);
        if ( v10 < 0x41u || v10 > 0x5Au )
          v11 = *(_WORD *)(v9 + a1);
        else
          v11 = v10 + 32;
        v12 = *(_WORD *)a1;
        if ( *(_WORD *)a1 >= 0x41u && v12 <= (unsigned __int16)v17 )
          v12 += 32;
        a1 += 2;
        --v8;
      }
      while ( v8 && v11 && v11 == v12 );
    }
    v5 = v11 - v12;
    if ( v16 )
      *(_DWORD *)(v14 + 848) &= 0xFFFFFFFD;
  }
  return v5;
}

//----- (10035608) --------------------------------------------------------
int __usercall sub_10035608@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@1
  int v4; // edx@2
  int v5; // ecx@2
  int v6; // ST18_4@6
  int v7; // edi@6

  sub_1000FFB0((int)&unk_10077148, 16);
  v3 = *(_DWORD *)(a2 + 24);
  if ( v3
    && (*(_DWORD *)v3 = -1, *(_DWORD *)(a2 + 8))
    && (!*(_DWORD *)(a2 + 28) || (*(_DWORD *)(a2 + 20) & 0xFFFFFE7F) == 0) )
  {
    *(_DWORD *)(a2 - 32) = 0;
    *(_DWORD *)(a2 - 28) = 0;
    *(_DWORD *)(a2 - 4) = 0;
    v6 = *(_DWORD *)(a2 + 28);
    v7 = sub_10035BE2(
           a2 - 32,
           v3,
           *(LPCWSTR *)(a2 + 8),
           *(_DWORD *)(a2 + 12),
           *(_DWORD *)(a2 + 16),
           *(_DWORD *)(a2 + 20));
    *(_DWORD *)(a2 - 28) = v7;
    *(_DWORD *)(a2 - 4) = -2;
    sub_100356A8(a2, v7, (signed int *)v3);
    if ( v7 )
      *(_DWORD *)v3 = -1;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a3);
  }
  return sub_1000FFF6(v5, v4);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);

//----- (100356A2) --------------------------------------------------------
void __usercall sub_100356A2(int a1@<ebp>)
{
  sub_100356A8(a1, *(_DWORD *)(a1 - 28), *(signed int **)(a1 + 24));
}

//----- (100356A8) --------------------------------------------------------
void __usercall sub_100356A8(int a1@<ebp>, int a2@<edi>, signed int *a3@<esi>)
{
  int v3; // eax@3

  if ( *(_DWORD *)(a1 - 32) )
  {
    if ( a2 )
    {
      v3 = (int)*(&lpCriticalSection + (*a3 >> 6));
      *(_BYTE *)(v3 + 48 * (*a3 & 0x3F) + 40) &= 0xFEu;
    }
    sub_10036129(*a3);
  }
}

//----- (100356D4) --------------------------------------------------------
int __cdecl sub_100356D4(signed int a1, char a2, unsigned int a3, unsigned int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // ebp@0
  int v10; // ebx@1
  int v12; // esi@3
  int v13; // eax@7
  unsigned int v14; // eax@21
  unsigned int v15; // ecx@21
  signed int v16; // esi@21
  __int64 v17; // rax@30
  DWORD v18; // eax@31
  int v19; // edx@31
  int v20; // eax@35
  DWORD v21; // eax@46
  int v22; // edx@46
  DWORD v23; // eax@48
  int v24; // edx@48
  int v25; // eax@50
  signed int v26; // esi@50
  int v27; // eax@50
  int v28; // eax@55
  WCHAR WideCharStr[2]; // [sp+8h] [bp-4h]@4

  v10 = 0;
  *(_BYTE *)a9 = 0;
  if ( !((unsigned int)(*(&lpCriticalSection + (a1 >> 6)))[2 * (a1 & 0x3F) + 1].LockSemaphore & 0x80) )
    return 0;
  v12 = a8;
  if ( !(a8 & 0x74000) )
  {
    *(_DWORD *)WideCharStr = 0;
    if ( sub_10039191(0, a9, (int)WideCharStr) )
    {
      sub_1002B7B4(0, a9);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_10035921);
    }
    if ( *(_DWORD *)WideCharStr & 0x74000 )
      v12 = *(_DWORD *)WideCharStr & 0x74000 | a8;
    else
      v12 = a8 | 0x4000;
  }
  v13 = v12 & 0x74000;
  if ( (v12 & 0x74000) == 0x4000 )
  {
    *(_BYTE *)a9 = 0;
    goto LABEL_19;
  }
  if ( v13 == 0x10000 || v13 == 81920 )
  {
    if ( (v12 & 0x301) != 769 )
      goto LABEL_19;
LABEL_17:
    *(_BYTE *)a9 = 2;
    goto LABEL_19;
  }
  if ( v13 == 0x20000 || v13 == 147456 )
    goto LABEL_17;
  if ( v13 == 0x40000 || v13 == 278528 )
    *(_BYTE *)a9 = 1;
LABEL_19:
  if ( !(v12 & 0x70000) || a2 & 0x40 )
    return 0;
  v14 = a3 & 0xC0000000;
  v15 = 0;
  v16 = 0;
  if ( (a3 & 0xC0000000) != 0x40000000 )
  {
    if ( v14 == 0x80000000 )
      goto LABEL_35;
    if ( v14 != -1073741824 )
      return 0;
  }
  if ( !a4 )
    return 0;
  if ( a4 <= 2 )
    goto LABEL_33;
  if ( a4 > 4 )
  {
    if ( a4 != 5 )
      return 0;
LABEL_33:
    v16 = 1;
    goto LABEL_34;
  }
  LODWORD(v17) = sub_10031CFD(0, a9, a1, 0i64, 2u);
  if ( v17 )
  {
    v18 = sub_10031CFD(0, a9, a1, 0i64, 0);
    if ( (v19 & v18) == -1 )
      return *(_DWORD *)sub_1002E9D5();
    v15 = a3 >> 31;
LABEL_34:
    if ( !v15 )
      goto LABEL_49;
LABEL_35:
    *(_DWORD *)WideCharStr = 0;
    v20 = sub_10032313(a9, a1, WideCharStr, 3);
    if ( v20 > 0 )
      v16 = v16 != 1 ? v16 : 0;
    if ( v20 == -1 )
      return *(_DWORD *)sub_1002E9D5();
    if ( v20 != 2 )
    {
      if ( v20 != 3 )
      {
LABEL_48:
        v23 = sub_10031CFD(0, a9, a1, 0i64, 0);
        if ( (v24 & v23) == -1 )
          return *(_DWORD *)sub_1002E9D5();
        goto LABEL_49;
      }
      if ( *(_DWORD *)WideCharStr == 12565487 )
      {
        *(_BYTE *)a9 = 1;
LABEL_49:
        if ( !v16 )
          return 0;
        goto LABEL_50;
      }
    }
    if ( WideCharStr[0] == 65534 )
    {
      *(_DWORD *)sub_1002E9D5() = 22;
      return *(_DWORD *)sub_1002E9D5();
    }
    if ( WideCharStr[0] == 65279 )
    {
      v21 = sub_10031CFD(0, a9, a1, (LARGE_INTEGER)2i64, 0);
      if ( (v22 & v21) == -1 )
        return *(_DWORD *)sub_1002E9D5();
      *(_BYTE *)a9 = 2;
      goto LABEL_49;
    }
    goto LABEL_48;
  }
LABEL_50:
  v25 = *(_BYTE *)a9;
  v26 = 0;
  *(_DWORD *)WideCharStr = 0;
  v27 = v25 - 1;
  if ( v27 )
  {
    if ( v27 == 1 )
    {
      *(_DWORD *)WideCharStr = 65279;
      v26 = 2;
      goto LABEL_55;
    }
  }
  else
  {
    *(_DWORD *)WideCharStr = 12565487;
    v26 = 3;
  }
  if ( v26 <= 0 )
    return 0;
LABEL_55:
  while ( 1 )
  {
    v28 = sub_1002FABF(v10, v9, a9);
    if ( v28 == -1 )
      break;
    v10 += v28;
    if ( v26 <= v10 )
      return 0;
  }
  return *(_DWORD *)sub_1002E9D5();
}

//----- (10035921) --------------------------------------------------------
HANDLE __cdecl sub_10035921(LPCWSTR lpFileName, LPSECURITY_ATTRIBUTES lpSecurityAttributes, int a3, DWORD dwDesiredAccess, DWORD dwCreationDisposition, DWORD dwShareMode, int a7, int a8)
{
  return CreateFileW(lpFileName, dwDesiredAccess, dwShareMode, lpSecurityAttributes, dwCreationDisposition, a8 | a7, 0);
}

//----- (10035946) --------------------------------------------------------
signed int __usercall sub_10035946@<eax>(int a1@<ebx>, int a2@<edi>, __int16 a3)
{
  int v3; // eax@1

  v3 = a3 & 0x700;
  if ( (a3 & 0x700) <= 1024 )
  {
    if ( (a3 & 0x700) == 1024 || !v3 )
      return 3;
    if ( v3 == 256 )
      return 4;
    if ( v3 != 512 )
    {
      if ( v3 == 768 )
        return 2;
      goto LABEL_14;
    }
    return 5;
  }
  if ( v3 != 1280 )
  {
    if ( v3 == 1536 )
      return 5;
    if ( v3 != 1792 )
    {
LABEL_14:
      *(_DWORD *)sub_1002E9D5() = 22;
      sub_1002B787(a1, a2);
      return -1;
    }
  }
  return 1;
}

//----- (100359B6) --------------------------------------------------------
int __cdecl sub_100359B6(int a1, int a2, int a3, char a4)
{
  signed int v4; // eax@4
  signed int v5; // eax@13
  signed int v7; // [sp-4h] [bp-14h]@15
  int v8; // [sp+Ch] [bp-4h]@24

  *(_BYTE *)a1 = 0;
  if ( a2 & 3 )
  {
    if ( (a2 & 3) == 1 )
    {
      v4 = ((a2 & 8) != 0 && (a2 & 0x70000) != 0) != 0 ? -1073741824 : 0x40000000;
    }
    else if ( (a2 & 3) == 2 )
    {
      v4 = -1073741824;
    }
    else
    {
      *(_DWORD *)sub_1002E9D5() = 22;
      sub_1002B787(a2, 2147483648);
      v4 = -1;
    }
  }
  else
  {
    v4 = 2147483648;
  }
  *(_DWORD *)(a1 + 4) = v4;
  *(_DWORD *)(a1 + 8) = sub_10035946(a2, 2147483648, a2);
  if ( a3 == 16 )
  {
    v5 = 0;
    goto LABEL_20;
  }
  if ( a3 == 32 )
  {
    v5 = 1;
    goto LABEL_20;
  }
  if ( a3 == 48 )
  {
    v7 = 2;
    goto LABEL_17;
  }
  if ( a3 == 64 )
  {
    v7 = 3;
LABEL_17:
    v5 = v7;
    goto LABEL_20;
  }
  if ( a3 == 128 )
  {
    v5 = *(_DWORD *)(a1 + 4) == 2147483648;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a2, 2147483648);
    v5 = -1;
  }
LABEL_20:
  *(_DWORD *)(a1 + 20) = 0;
  *(_DWORD *)(a1 + 12) = v5;
  *(_DWORD *)(a1 + 16) = 128;
  if ( (char)a2 < 0 )
    *(_BYTE *)a1 |= 0x10u;
  if ( !(a2 & 0x8000) )
  {
    if ( a2 & 0x74000 )
      goto LABEL_45;
    if ( sub_10039191(a2, 0x8000, (int)&v8) )
    {
      sub_1002B7B4(a2, 0x8000);
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_10035B32);
    }
    if ( v8 != 0x8000 )
LABEL_45:
      *(_BYTE *)a1 |= 0x80u;
  }
  if ( a2 & 0x100 && (char)(a4 & ~(_BYTE)dword_1007CCE4) >= 0 )
    *(_DWORD *)(a1 + 16) = 1;
  if ( a2 & 0x40 )
  {
    *(_DWORD *)(a1 + 20) |= 0x4000000u;
    *(_DWORD *)(a1 + 4) |= 0x10000u;
    *(_DWORD *)(a1 + 12) |= 4u;
  }
  if ( a2 & 0x1000 )
    *(_DWORD *)(a1 + 16) |= 0x100u;
  if ( a2 & 0x2000 )
    *(_DWORD *)(a1 + 20) |= 0x2000000u;
  if ( a2 & 0x20 )
  {
    *(_DWORD *)(a1 + 20) |= 0x8000000u;
  }
  else if ( a2 & 0x10 )
  {
    *(_DWORD *)(a1 + 20) |= 0x10000000u;
  }
  return a1;
}
// 1007CCE4: using guessed type int dword_1007CCE4;

//----- (10035B32) --------------------------------------------------------
int __usercall sub_10035B32@<eax>(int a1@<ebx>, int a2@<edi>, signed int a3)
{
  char v3; // al@1
  int v5; // edi@4
  int v6; // edx@4
  int v7; // ebx@4
  DWORD v8; // eax@11
  int v9; // edx@11
  WCHAR WideCharStr; // [sp+4h] [bp-4h]@8

  v3 = LOBYTE((*(&lpCriticalSection + (a3 >> 6)))[2 * (a3 & 0x3F) + 1].LockSemaphore);
  if ( v3 & 0x48 || v3 >= 0 )
    return 0;
  v5 = sub_10031CFD(a1, a2, a3, (LARGE_INTEGER)-1i64, 2u);
  v7 = v6;
  if ( (v6 & v5) == -1 )
  {
    if ( *(_DWORD *)sub_1002E9C2() == 131 )
      return 0;
  }
  else
  {
    WideCharStr = 0;
    if ( sub_10032313(v5, a3, &WideCharStr, 1)
      || WideCharStr != 26
      || sub_1003928E(v7, a3, (LARGE_INTEGER)__PAIR__(v7, v5)) != -1 )
    {
      v8 = sub_10031CFD(v7, v5, a3, 0i64, 0);
      if ( (v9 & v8) != -1 )
        return 0;
    }
  }
  return *(_DWORD *)sub_1002E9D5();
}

//----- (10035BE2) --------------------------------------------------------
int __cdecl sub_10035BE2(int a1, int a2, LPCWSTR lpFileName, DWORD dwShareMode, int a5, int a6)
{
  int v6; // ebp@0
  int v8; // eax@4
  HANDLE v9; // edi@6
  int v10; // eax@10
  int v11; // eax@10
  DWORD v12; // eax@12
  int v13; // esi@13
  signed int v14; // eax@13
  int v15; // ecx@13
  char v16; // al@16
  bool v17; // zf@17
  signed int v18; // ecx@19
  int v19; // esi@20
  signed int v20; // ST00_4@21
  int v21; // eax@21
  int v22; // ecx@24
  int v23; // eax@26
  int v24; // esi@27
  struct _RTL_CRITICAL_SECTION_DEBUG *v25; // edx@29
  int v26; // eax@30
  int v27; // eax@30
  char v28; // [sp-20h] [bp-70h]@21
  unsigned int v29; // [sp-1Ch] [bp-6Ch]@21
  char v30; // [sp-18h] [bp-68h]@6
  DWORD v31; // [sp-14h] [bp-64h]@6
  DWORD v32; // [sp-10h] [bp-60h]@6
  DWORD v33; // [sp-Ch] [bp-5Ch]@6
  int v34; // [sp-8h] [bp-58h]@6
  char *v35; // [sp-4h] [bp-54h]@6
  DWORD dwCreationDisposition; // [sp+Ch] [bp-44h]@1
  char v37; // [sp+24h] [bp-2Ch]@1
  int v38; // [sp+28h] [bp-28h]@7
  int v39; // [sp+30h] [bp-20h]@1
  struct _SECURITY_ATTRIBUTES SecurityAttributes; // [sp+3Ch] [bp-14h]@6
  HANDLE hObject; // [sp+48h] [bp-8h]@6
  char v42; // [sp+4Eh] [bp-2h]@21
  char v43; // [sp+4Fh] [bp-1h]@19

  qmemcpy(&v37, (const void *)sub_100359B6((int)&dwCreationDisposition, dwShareMode, a5, a6), 0x18u);
  if ( v39 == -1 )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)a2 = -1;
    return *(_DWORD *)sub_1002E9D5();
  }
  v8 = sub_1003614C(v6);
  *(_DWORD *)a2 = v8;
  if ( v8 == -1 )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)a2 = -1;
    *(_DWORD *)sub_1002E9D5() = 24;
    return *(_DWORD *)sub_1002E9D5();
  }
  SecurityAttributes.lpSecurityDescriptor = 0;
  SecurityAttributes.nLength = 12;
  *(_DWORD *)a1 = 1;
  SecurityAttributes.bInheritHandle = ~(dwShareMode >> 7) & 1;
  qmemcpy(&v30, &v37, 0x18u);
  v9 = sub_10035921(lpFileName, &SecurityAttributes, *(int *)&v30, v31, v32, v33, v34, (int)v35);
  hObject = v9;
  if ( v9 == (HANDLE)-1 )
  {
    if ( (v38 & 0xC0000000) != -1073741824
      || !(dwShareMode & 1)
      || (v38 &= 0x7FFFFFFFu,
          qmemcpy(&v30, &v37, 0x18u),
          v9 = sub_10035921(lpFileName, &SecurityAttributes, *(int *)&v30, v31, v32, v33, v34, (int)v35),
          hObject = v9,
          v9 == (HANDLE)-1) )
    {
      v10 = (int)*(&lpCriticalSection + (*(_DWORD *)a2 >> 6));
      *(_BYTE *)(v10 + 48 * (*(_DWORD *)a2 & 0x3F) + 40) &= 0xFEu;
      v11 = GetLastError();
      sub_1002E99F(v11);
      return *(_DWORD *)sub_1002E9D5();
    }
  }
  v12 = GetFileType(v9);
  if ( !v12 )
  {
    v13 = GetLastError();
    sub_1002E99F(v13);
    v14 = *(_DWORD *)a2;
    v15 = 2 * (*(_DWORD *)a2 & 0x3F);
    v35 = (char *)v9;
    LOBYTE((*(&lpCriticalSection + (v14 >> 6)))[v15 + 1].LockSemaphore) &= 0xFEu;
    CloseHandle(v35);
    if ( !v13 )
      *(_DWORD *)sub_1002E9D5() = 13;
    return *(_DWORD *)sub_1002E9D5();
  }
  if ( v12 == 2 )
  {
    v16 = v37 | 0x40;
  }
  else
  {
    v17 = v12 == 3;
    v16 = v37;
    if ( v17 )
      v16 = v37 | 8;
  }
  v35 = (char *)v9;
  v34 = *(_DWORD *)a2;
  v43 = v16;
  sub_10036095(v34, v9);
  v18 = *(_DWORD *)a2;
  v43 |= 1u;
  v37 = v43;
  LOBYTE((*(&lpCriticalSection + (v18 >> 6)))[2 * (v18 & 0x3F) + 1].LockSemaphore) = v43;
  BYTE1((*(&lpCriticalSection + (*(_DWORD *)a2 >> 6)))[2 * (*(_DWORD *)a2 & 0x3F) + 1].LockSemaphore) = 0;
  if ( dwShareMode & 2 )
  {
    v19 = sub_10035B32(a2, (int)v9, *(_DWORD *)a2);
    if ( v19 )
      goto LABEL_23;
  }
  v42 = 0;
  v35 = &v42;
  v34 = dwShareMode;
  v20 = *(_DWORD *)a2;
  qmemcpy(&v28, &v37, 0x18u);
  v21 = sub_100356D4(v20, v28, v29, *(unsigned int *)&v30, v31, v32, v33, dwShareMode, (int)&v42);
  if ( v21 )
  {
    v19 = v21;
LABEL_23:
    sub_1002F42F(a2, *(_DWORD *)a2);
    return v19;
  }
  BYTE1((*(&lpCriticalSection + (*(_DWORD *)a2 >> 6)))[2 * (*(_DWORD *)a2 & 0x3F) + 1].LockSemaphore) = v42;
  v22 = (int)*(&lpCriticalSection + (*(_DWORD *)a2 >> 6));
  *(_BYTE *)(v22 + 48 * (*(_DWORD *)a2 & 0x3F) + 45) ^= (*(_BYTE *)(v22 + 48 * (*(_DWORD *)a2 & 0x3F) + 45) ^ (dwShareMode >> 16)) & 1;
  if ( !(v43 & 0x48) && dwShareMode & 8 )
  {
    v23 = (int)*(&lpCriticalSection + (*(_DWORD *)a2 >> 6));
    *(_BYTE *)(v23 + 48 * (*(_DWORD *)a2 & 0x3F) + 40) |= 0x20u;
  }
  v24 = v38;
  if ( (v38 & 0xC0000000) == -1073741824 && dwShareMode & 1 )
  {
    CloseHandle(hObject);
    v38 = v24 & 0x7FFFFFFF;
    qmemcpy(&v30, &v37, 0x18u);
    v25 = (struct _RTL_CRITICAL_SECTION_DEBUG *)sub_10035921(
                                                  lpFileName,
                                                  &SecurityAttributes,
                                                  *(int *)&v30,
                                                  v31,
                                                  v32,
                                                  v33,
                                                  v34,
                                                  (int)v35);
    if ( v25 == (struct _RTL_CRITICAL_SECTION_DEBUG *)-1 )
    {
      v26 = GetLastError();
      sub_1002E99F(v26);
      v27 = (int)*(&lpCriticalSection + (*(_DWORD *)a2 >> 6));
      *(_BYTE *)(v27 + 48 * (*(_DWORD *)a2 & 0x3F) + 40) &= 0xFEu;
      sub_1003625E(*(_DWORD *)a2);
      return *(_DWORD *)sub_1002E9D5();
    }
    (*(&lpCriticalSection + (*(_DWORD *)a2 >> 6)))[2 * (*(_DWORD *)a2 & 0x3F) + 1].DebugInfo = v25;
  }
  return 0;
}

//----- (10035F0B) --------------------------------------------------------
int __usercall sub_10035F0B@<eax>(int a1@<ebx>, int a2@<edi>)
{
  int v2; // ebp@0

  return sub_10035608(a1, v2, a2);
}

//----- (10035F2B) --------------------------------------------------------
LPVOID sub_10035F2B()
{
  LPVOID v0; // edi@1
  int v1; // esi@4
  int v2; // edi@4
  LPVOID v4; // [sp+8h] [bp-8h]@1

  v0 = sub_1002D75F(0x40u, 0x30u);
  v4 = v0;
  if ( v0 )
  {
    if ( v0 != (char *)v0 + 3072 )
    {
      v1 = (int)((char *)v0 + 32);
      v2 = (int)((char *)v0 + 3072);
      do
      {
        sub_10032AC6((LPCRITICAL_SECTION)(v1 - 32), 0xFA0u, 0);
        *(_DWORD *)(v1 - 8) = -1;
        *(_DWORD *)v1 = 0;
        v1 += 48;
        *(_DWORD *)(v1 - 44) = 0;
        *(_DWORD *)(v1 - 40) = 168427520;
        *(_BYTE *)(v1 - 36) = 10;
        *(_BYTE *)(v1 - 35) &= 0xF8u;
        *(_BYTE *)(v1 - 34) = 0;
      }
      while ( v1 - 32 != v2 );
      v0 = v4;
    }
  }
  else
  {
    v0 = 0;
  }
  sub_1002D7BC(0);
  return v0;
}

//----- (10035FA5) --------------------------------------------------------
void __cdecl sub_10035FA5(LPCRITICAL_SECTION lpCriticalSection)
{
  struct _RTL_CRITICAL_SECTION *i; // edi@2

  if ( lpCriticalSection )
  {
    for ( i = lpCriticalSection; i != &lpCriticalSection[128]; i += 2 )
      DeleteCriticalSection(i);
    sub_1002D7BC(lpCriticalSection);
  }
}

//----- (10035FDA) --------------------------------------------------------
int __usercall sub_10035FDA@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // edx@2
  int v4; // ecx@2
  int v6; // edi@4
  int v7; // eax@4
  struct _RTL_CRITICAL_SECTION *v8; // eax@7

  sub_1000FFB0((int)&unk_10077188, 20);
  if ( *(_DWORD *)(a2 + 8) < 0x2000u )
  {
    *(_DWORD *)(a2 - 28) = 0;
    sub_1002D983(7);
    *(_DWORD *)(a2 - 4) = 0;
    v6 = 0;
    v7 = dword_1007CBA0;
    while ( 1 )
    {
      *(_DWORD *)(a2 - 32) = v6;
      if ( *(_DWORD *)(a2 + 8) < v7 )
        break;
      if ( !*(&lpCriticalSection + v6) )
      {
        v8 = (struct _RTL_CRITICAL_SECTION *)sub_10035F2B();
        *(&lpCriticalSection + v6) = v8;
        if ( !v8 )
        {
          *(_DWORD *)(a2 - 28) = 12;
          break;
        }
        v7 = dword_1007CBA0 + 64;
        dword_1007CBA0 += 64;
      }
      ++v6;
    }
    *(_DWORD *)(a2 - 4) = -2;
    sub_10036069();
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 9;
    sub_1002B787(a1, a3);
  }
  return sub_1000FFF6(v4, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (10036069) --------------------------------------------------------
void sub_10036069()
{
  sub_1002D9CB(7);
}

//----- (10036072) --------------------------------------------------------
void __cdecl sub_10036072(signed int a1)
{
  EnterCriticalSection(&(*(&lpCriticalSection + (a1 >> 6)))[2 * (a1 & 0x3F)]);
}

//----- (10036095) --------------------------------------------------------
int __cdecl sub_10036095(int a1, HANDLE hHandle)
{
  int result; // eax@11
  int v3; // [sp+8h] [bp-4h]@3

  if ( a1 < 0
    || a1 >= (unsigned int)dword_1007CBA0
    || (v3 = 2 * (a1 & 0x3F), (*(&lpCriticalSection + (a1 >> 6)))[v3 + 1].DebugInfo != (PRTL_CRITICAL_SECTION_DEBUG)-1) )
  {
    *(_DWORD *)sub_1002E9D5() = 9;
    *(_DWORD *)sub_1002E9C2() = 0;
    result = -1;
  }
  else
  {
    if ( sub_1003941F() == 1 )
    {
      if ( a1 )
      {
        if ( a1 == 1 )
        {
          SetStdHandle(0xFFFFFFF5, hHandle);
        }
        else if ( a1 == 2 )
        {
          SetStdHandle(0xFFFFFFF4, hHandle);
        }
      }
      else
      {
        SetStdHandle(0xFFFFFFF6, hHandle);
      }
    }
    (*(&lpCriticalSection + (a1 >> 6)))[v3 + 1].DebugInfo = (PRTL_CRITICAL_SECTION_DEBUG)hHandle;
    result = 0;
  }
  return result;
}
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (10036129) --------------------------------------------------------
void __cdecl sub_10036129(signed int a1)
{
  LeaveCriticalSection(&(*(&lpCriticalSection + (a1 >> 6)))[2 * (a1 & 0x3F)]);
}

//----- (1003614C) --------------------------------------------------------
int __usercall sub_1003614C@<eax>(int a1@<ebp>)
{
  signed int v1; // ebx@1
  int v2; // eax@3
  struct _RTL_CRITICAL_SECTION *v3; // eax@4
  signed int v4; // edi@5
  int v5; // edx@7
  int v6; // ecx@7
  int v8; // ecx@8
  int i; // esi@8
  signed int v10; // esi@14
  int v11; // ecx@14

  sub_1000FFB0((int)&unk_10077168, 28);
  sub_1002D983(7);
  *(_DWORD *)(a1 - 28) = -1;
  v1 = 0;
  *(_DWORD *)(a1 - 4) = 0;
  while ( 1 )
  {
    *(_DWORD *)(a1 - 44) = v1;
    if ( v1 >= 128 )
      break;
    v2 = (int)*(&lpCriticalSection + v1);
    *(_DWORD *)(a1 - 40) = v2;
    if ( !v2 )
    {
      v3 = (struct _RTL_CRITICAL_SECTION *)sub_10035F2B();
      *(&lpCriticalSection + v1) = v3;
      if ( v3 )
      {
        dword_1007CBA0 += 64;
        v4 = v1 << 6;
        sub_10036072(v1 << 6);
        LOBYTE((*(&lpCriticalSection + (v1 << 6 >> 6)))[1].LockSemaphore) = 1;
LABEL_6:
        *(_DWORD *)(a1 - 28) = v4;
      }
      break;
    }
    v8 = v2 + 3072;
    *(_DWORD *)(a1 - 32) = v2 + 3072;
    for ( i = v2; ; i += 48 )
    {
      *(_DWORD *)(a1 - 36) = i;
      if ( i == v8 )
        break;
      if ( !(*(_BYTE *)(i + 40) & 1) )
      {
        EnterCriticalSection((LPCRITICAL_SECTION)i);
        if ( !(*(_BYTE *)(i + 40) & 1) )
        {
          v10 = (v1 << 6) + (i - *(_DWORD *)(a1 - 40)) / 48;
          v11 = 2 * (v10 & 0x3F);
          LOBYTE((*(&lpCriticalSection + (v10 >> 6)))[v11 + 1].LockSemaphore) = 1;
          (*(&lpCriticalSection + (v10 >> 6)))[v11 + 1].DebugInfo = (PRTL_CRITICAL_SECTION_DEBUG)-1;
          v4 = v10;
          goto LABEL_6;
        }
        LeaveCriticalSection((LPCRITICAL_SECTION)i);
        v8 = *(_DWORD *)(a1 - 32);
      }
    }
    ++v1;
  }
  *(_DWORD *)(a1 - 4) = -2;
  sub_10036255();
  return sub_1000FFF6(v6, v5);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (10036255) --------------------------------------------------------
void sub_10036255()
{
  sub_1002D9CB(7);
}

//----- (1003625E) --------------------------------------------------------
signed int __cdecl sub_1003625E(signed int a1)
{
  unsigned int v1; // ebx@3
  int v2; // eax@3
  DWORD v4; // [sp-8h] [bp-14h]@9

  if ( a1 >= 0 && a1 < (unsigned int)dword_1007CBA0 )
  {
    v1 = 48 * (a1 & 0x3F);
    v2 = (int)*(&lpCriticalSection + (a1 >> 6));
    if ( *(_BYTE *)(v1 + v2 + 40) & 1 )
    {
      if ( *(_DWORD *)(v1 + v2 + 24) != -1 )
      {
        if ( sub_1003941F() == 1 )
        {
          if ( !a1 )
          {
            v4 = -10;
            goto LABEL_12;
          }
          if ( a1 == 1 )
          {
            v4 = -11;
            goto LABEL_12;
          }
          if ( a1 == 2 )
          {
            v4 = -12;
LABEL_12:
            SetStdHandle(v4, 0);
            goto LABEL_13;
          }
        }
LABEL_13:
        (*(&lpCriticalSection + (a1 >> 6)))[v1 / 0x18 + 1].DebugInfo = (PRTL_CRITICAL_SECTION_DEBUG)-1;
        return 0;
      }
    }
  }
  *(_DWORD *)sub_1002E9D5() = 9;
  *(_DWORD *)sub_1002E9C2() = 0;
  return -1;
}
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (100362EF) --------------------------------------------------------
signed int __usercall sub_100362EF@<eax>(int a1@<ebx>, int a2@<edi>, signed int a3)
{
  int v3; // ecx@5
  int v4; // eax@5

  if ( a3 == -2 )
  {
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
  }
  else
  {
    if ( a3 >= 0 && a3 < (unsigned int)dword_1007CBA0 )
    {
      v3 = 48 * (a3 & 0x3F);
      v4 = (int)*(&lpCriticalSection + (a3 >> 6));
      if ( *(_BYTE *)(v4 + v3 + 40) & 1 )
        return *(_DWORD *)(v4 + v3 + 24);
    }
    *(_DWORD *)sub_1002E9C2() = 0;
    *(_DWORD *)sub_1002E9D5() = 9;
    sub_1002B787(a1, a2);
  }
  return -1;
}
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (10036359) --------------------------------------------------------
int __usercall sub_10036359@<eax>(int a1@<ebx>, int a2@<edi>, signed int a3)
{
  if ( a3 == -2 )
  {
    *(_DWORD *)sub_1002E9D5() = 9;
  }
  else
  {
    if ( a3 >= 0 && a3 < (unsigned int)dword_1007CBA0 )
      return (unsigned int)(*(&lpCriticalSection + (a3 >> 6)))[2 * (a3 & 0x3F) + 1].LockSemaphore & 0x40;
    *(_DWORD *)sub_1002E9D5() = 9;
    sub_1002B787(a1, a2);
  }
  return 0;
}
// 1007CBA0: using guessed type int dword_1007CBA0;

//----- (100363AF) --------------------------------------------------------
__int16 __cdecl sub_100363AF(__int16 Buffer)
{
  DWORD v1; // ecx@0
  HANDLE v2; // eax@1
  __int16 result; // ax@4
  DWORD NumberOfCharsWritten; // [sp+0h] [bp-4h]@1

  NumberOfCharsWritten = v1;
  v2 = hConsoleOutput;
  if ( hConsoleOutput == (HANDLE)-2 )
  {
    sub_10039425();
    v2 = hConsoleOutput;
  }
  if ( v2 != (HANDLE)-1 && WriteConsoleW(v2, &Buffer, 1u, &NumberOfCharsWritten, 0) )
    result = Buffer;
  else
    result = -1;
  return result;
}

//----- (100363F4) --------------------------------------------------------
int __cdecl sub_100363F4(int a1)
{
  volatile signed __int32 *v1; // eax@1
  int result; // eax@4

  ++dword_1007C700;
  *(_DWORD *)(a1 + 4) = sub_1002ED94(0x1000u);
  sub_1002D7BC(0);
  v1 = (volatile signed __int32 *)(a1 + 12);
  if ( *(_DWORD *)(a1 + 4) )
  {
    _InterlockedOr(v1, 0x40u);
    *(_DWORD *)(a1 + 24) = 4096;
  }
  else
  {
    _InterlockedOr(v1, 0x400u);
    *(_DWORD *)(a1 + 24) = 2;
    *(_DWORD *)(a1 + 4) = a1 + 20;
  }
  result = *(_DWORD *)(a1 + 4);
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)a1 = result;
  return result;
}
// 1007C700: using guessed type int dword_1007C700;

//----- (10036451) --------------------------------------------------------
int __usercall sub_10036451@<eax>(int a1@<ebx>, unsigned __int8 a2, int a3)
{
  int result; // eax@1
  int v4; // [sp+0h] [bp-10h]@1
  int v5; // [sp+4h] [bp-Ch]@1
  char v6; // [sp+Ch] [bp-4h]@1

  sub_10029BD2((int)&v4, a1, a3);
  result = *(_WORD *)(*(_DWORD *)v5 + 2 * a2) & 0x8000;
  if ( v6 )
    *(_DWORD *)(v4 + 848) &= 0xFFFFFFFD;
  return result;
}

//----- (1003648A) --------------------------------------------------------
signed __int32 __cdecl sub_1003648A(int a1)
{
  volatile signed __int32 *v1; // ecx@1
  volatile signed __int32 *v2; // ecx@3
  volatile signed __int32 *v3; // ecx@5
  volatile signed __int32 *v4; // ecx@7
  volatile signed __int32 **v5; // ecx@9
  signed int v6; // esi@9
  volatile signed __int32 *v7; // edx@14

  _InterlockedIncrement((volatile signed __int32 *)(a1 + 12));
  v1 = *(volatile signed __int32 **)(a1 + 124);
  if ( v1 )
    _InterlockedIncrement(v1);
  v2 = *(volatile signed __int32 **)(a1 + 132);
  if ( v2 )
    _InterlockedIncrement(v2);
  v3 = *(volatile signed __int32 **)(a1 + 128);
  if ( v3 )
    _InterlockedIncrement(v3);
  v4 = *(volatile signed __int32 **)(a1 + 140);
  if ( v4 )
    _InterlockedIncrement(v4);
  v5 = (volatile signed __int32 **)(a1 + 40);
  v6 = 6;
  do
  {
    if ( (_UNKNOWN *)*(v5 - 2) != &unk_1007A288 && *v5 )
      _InterlockedIncrement(*v5);
    if ( *(v5 - 3) )
    {
      v7 = *(v5 - 1);
      if ( v7 )
        _InterlockedIncrement(v7);
    }
    v5 += 4;
    --v6;
  }
  while ( v6 );
  return sub_10036651(*(_DWORD *)(a1 + 156));
}

//----- (10036507) --------------------------------------------------------
void __cdecl sub_10036507(LPVOID lpMem)
{
  void **v1; // eax@1
  int v2; // eax@3
  int v3; // eax@5
  int v4; // eax@8
  int v5; // eax@12
  signed int v6; // eax@15
  LPVOID *v7; // ebx@15
  LPVOID *v8; // edi@15
  int v9; // eax@22
  signed int v10; // [sp+Ch] [bp-4h]@15

  v1 = (void **)*((_DWORD *)lpMem + 34);
  if ( v1 )
  {
    if ( v1 != &off_1007A900 )
    {
      v2 = *((_DWORD *)lpMem + 31);
      if ( v2 )
      {
        if ( !*(_DWORD *)v2 )
        {
          v3 = *((_DWORD *)lpMem + 33);
          if ( v3 && !*(_DWORD *)v3 )
          {
            sub_1002D7BC(*((LPVOID *)lpMem + 33));
            sub_1003815A(*((_DWORD *)lpMem + 34));
          }
          v4 = *((_DWORD *)lpMem + 32);
          if ( v4 && !*(_DWORD *)v4 )
          {
            sub_1002D7BC(*((LPVOID *)lpMem + 32));
            sub_10038258(*((_DWORD *)lpMem + 34));
          }
          sub_1002D7BC(*((LPVOID *)lpMem + 31));
          sub_1002D7BC(*((LPVOID *)lpMem + 34));
        }
      }
    }
  }
  v5 = *((_DWORD *)lpMem + 35);
  if ( v5 && !*(_DWORD *)v5 )
  {
    sub_1002D7BC((LPVOID)(*((_DWORD *)lpMem + 36) - 254));
    sub_1002D7BC((LPVOID)(*((_DWORD *)lpMem + 37) - 128));
    sub_1002D7BC((LPVOID)(*((_DWORD *)lpMem + 38) - 128));
    sub_1002D7BC(*((LPVOID *)lpMem + 35));
  }
  sub_1003667A(*((LPVOID *)lpMem + 39));
  v6 = 6;
  v7 = (LPVOID *)((char *)lpMem + 160);
  v10 = 6;
  v8 = (LPVOID *)((char *)lpMem + 40);
  do
  {
    if ( *(v8 - 2) != &unk_1007A288 )
    {
      if ( *v8 && !*(_DWORD *)*v8 )
      {
        sub_1002D7BC(*v8);
        sub_1002D7BC(*v7);
      }
      v6 = v10;
    }
    if ( *(v8 - 3) )
    {
      v9 = (int)*(v8 - 1);
      if ( v9 && !*(_DWORD *)v9 )
        sub_1002D7BC(*(v8 - 1));
      v6 = v10;
    }
    ++v7;
    v8 += 4;
    --v6;
    v10 = v6;
  }
  while ( v6 );
  sub_1002D7BC(lpMem);
}
// 1007A900: using guessed type void *off_1007A900;

//----- (10036651) --------------------------------------------------------
signed __int32 __cdecl sub_10036651(int a1)
{
  signed __int32 result; // eax@3

  if ( a1 && (char **)a1 != off_10068100 )
    result = _InterlockedIncrement((volatile signed __int32 *)(a1 + 176));
  else
    result = 0x7FFFFFFF;
  return result;
}
// 10068100: using guessed type char *off_10068100[43];

//----- (1003667A) --------------------------------------------------------
void __cdecl sub_1003667A(LPVOID lpMem)
{
  if ( lpMem && lpMem != off_10068100 && !*((_DWORD *)lpMem + 44) )
  {
    sub_100382FD((int)lpMem);
    sub_1002D7BC(lpMem);
  }
}
// 10068100: using guessed type char *off_10068100[43];

//----- (100366AA) --------------------------------------------------------
signed __int32 __cdecl sub_100366AA(int a1)
{
  signed __int32 result; // eax@3

  if ( a1 && (char **)a1 != off_10068100 )
    result = _InterlockedDecrement((volatile signed __int32 *)(a1 + 176));
  else
    result = 0x7FFFFFFF;
  return result;
}
// 10068100: using guessed type char *off_10068100[43];

//----- (100366D3) --------------------------------------------------------
signed __int32 __cdecl sub_100366D3(signed __int32 a1)
{
  signed __int32 result; // eax@1
  volatile signed __int32 *v2; // ecx@2
  volatile signed __int32 *v3; // ecx@4
  volatile signed __int32 *v4; // ecx@6
  volatile signed __int32 *v5; // ecx@8
  volatile signed __int32 **v6; // ecx@10
  signed int v7; // esi@10
  volatile signed __int32 *v8; // edx@15

  result = a1;
  if ( a1 )
  {
    _InterlockedDecrement((volatile signed __int32 *)(a1 + 12));
    v2 = *(volatile signed __int32 **)(a1 + 124);
    if ( v2 )
      _InterlockedDecrement(v2);
    v3 = *(volatile signed __int32 **)(a1 + 132);
    if ( v3 )
      _InterlockedDecrement(v3);
    v4 = *(volatile signed __int32 **)(a1 + 128);
    if ( v4 )
      _InterlockedDecrement(v4);
    v5 = *(volatile signed __int32 **)(a1 + 140);
    if ( v5 )
      _InterlockedDecrement(v5);
    v6 = (volatile signed __int32 **)(a1 + 40);
    v7 = 6;
    do
    {
      if ( (_UNKNOWN *)*(v6 - 2) != &unk_1007A288 && *v6 )
        _InterlockedDecrement(*v6);
      if ( *(v6 - 3) )
      {
        v8 = *(v6 - 1);
        if ( v8 )
          _InterlockedDecrement(v8);
      }
      v6 += 4;
      --v7;
    }
    while ( v7 );
    result = sub_100366AA(*(_DWORD *)(a1 + 156));
  }
  return result;
}

//----- (10036754) --------------------------------------------------------
int __usercall sub_10036754@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  int v2; // eax@1
  int v3; // edx@1
  int v4; // edi@1
  void *v5; // ecx@1
  int v6; // esi@3

  sub_1000FFB0((int)&unk_100771A8, 12);
  *(_DWORD *)(a2 - 28) = 0;
  v2 = sub_10030B70(a1, a2);
  v4 = v2;
  v5 = (void *)dword_1007A8F0;
  if ( !(dword_1007A8F0 & *(_DWORD *)(v2 + 848)) || !*(_DWORD *)(v2 + 76) )
  {
    sub_1002D983(4);
    *(_DWORD *)(a2 - 4) = 0;
    v6 = sub_100367CB((signed __int32 *)(v4 + 76), dword_1007C998);
    *(_DWORD *)(a2 - 28) = v6;
    *(_DWORD *)(a2 - 4) = -2;
    sub_100367BA();
    if ( !v6 )
      sub_1002D71C(v5, a1, a2, v4, 0);
  }
  return sub_1000FFF6(v5, v3);
}
// 1000FFF6: using guessed type int __fastcall sub_1000FFF6(_DWORD, _DWORD);
// 1007A8F0: using guessed type int dword_1007A8F0;
// 1007C998: using guessed type int dword_1007C998;

//----- (100367BA) --------------------------------------------------------
void sub_100367BA()
{
  sub_1002D9CB(4);
}

//----- (100367CB) --------------------------------------------------------
int __cdecl sub_100367CB(signed __int32 *a1, int a2)
{
  signed __int32 v2; // edi@3
  int result; // eax@4

  if ( a2 && a1 )
  {
    v2 = *a1;
    if ( *a1 != a2 )
    {
      *a1 = a2;
      sub_1003648A(a2);
      if ( v2 )
      {
        sub_100366D3(v2);
        if ( !*(_DWORD *)(v2 + 12) && (wchar_t **)v2 != &off_1007A1C8 )
          sub_10036507((LPVOID)v2);
      }
    }
    result = a2;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1007A1C8: using guessed type wchar_t *off_1007A1C8;

//----- (1003681B) --------------------------------------------------------
signed int __usercall sub_1003681B@<eax>(int a1@<ebx>, int a2@<edi>, void *a3, unsigned int a4, int a5, int a6)
{
  int v6; // eax@2
  int v8; // ecx@5
  int v9; // eax@6
  const void *v10; // ebx@11
  int v11; // eax@11
  char *v12; // edi@11
  char v13; // bl@12
  signed int v14; // [sp-4h] [bp-8h]@2

  if ( !a3 || !a4 )
    goto LABEL_29;
  v8 = a5;
  *(_BYTE *)a3 = 0;
  if ( a5 <= 0 )
    v9 = 0;
  else
    v9 = a5;
  if ( a4 <= v9 + 1 )
  {
    v6 = sub_1002E9D5();
    v14 = 34;
    goto LABEL_3;
  }
  if ( !a6 )
  {
LABEL_29:
    v6 = sub_1002E9D5();
    v14 = 22;
LABEL_3:
    *(_DWORD *)v6 = v14;
    sub_1002B787(a1, a2);
    return v14;
  }
  v10 = (char *)a3 + 1;
  v11 = (int)((char *)a3 + 1);
  v12 = *(char **)(a6 + 8);
  *(_BYTE *)a3 = 48;
  if ( a5 > 0 )
  {
    do
    {
      v13 = *v12;
      if ( *v12 )
        ++v12;
      else
        v13 = 48;
      *(_BYTE *)v11++ = v13;
      --v8;
    }
    while ( v8 > 0 );
    v10 = (char *)a3 + 1;
  }
  *(_BYTE *)v11 = 0;
  if ( v8 >= 0 && *v12 >= 53 )
  {
    while ( 1 )
    {
      --v11;
      if ( *(_BYTE *)v11 != 57 )
        break;
      *(_BYTE *)v11 = 48;
    }
    ++*(_BYTE *)v11;
  }
  if ( *(_BYTE *)a3 == 49 )
    ++*(_DWORD *)(a6 + 4);
  else
    sub_100260E0(a3, v10, strlen((const char *)v10) + 1);
  return 0;
}

//----- (100368D7) --------------------------------------------------------
int __thiscall sub_100368D7(int this)
{
  int v1; // esi@1

  v1 = this;
  sub_1003945B(this);
  if ( (*(_BYTE *)v1 & 0x1F) == 31 )
  {
    *(_BYTE *)(v1 + 8) = 0;
  }
  else
  {
    sub_100394C1(v1);
    *(_BYTE *)(v1 + 8) = 1;
  }
  return v1;
}

//----- (10036910) --------------------------------------------------------
unsigned int __cdecl sub_10036910(int a1, int a2)
{
  int v2; // ebx@1
  unsigned int result; // eax@1
  unsigned int v4; // ecx@2
  int v5; // esi@4
  unsigned int v6; // eax@4
  unsigned int v7; // ecx@5
  unsigned int v8; // esi@6
  unsigned int v9; // esi@8
  int v11; // edi@9
  int v12; // esi@10
  unsigned __int64 v13; // ST00_8@11
  unsigned int v14; // eax@11
  int v15; // edx@11
  int v16; // ecx@11
  unsigned int v17; // ecx@11
  int v19; // eax@13
  int v20; // edx@15
  int v21; // ecx@15
  int v22; // esi@16
  int v23; // edi@16
  int v28; // ecx@25
  unsigned int v29; // eax@28
  int v30; // edx@30
  int v31; // eax@31
  int v32; // ecx@31
  unsigned int v33; // eax@33
  int v34; // edx@35
  unsigned int v35; // ecx@35
  unsigned int v36; // edi@36
  int v37; // edi@36
  unsigned int v38; // edx@36
  int v39; // esi@36
  unsigned int v40; // edx@38
  unsigned __int64 v41; // rcx@38
  int v42; // eax@38
  unsigned __int64 v43; // rdi@38
  unsigned int v44; // kr10_4@43
  unsigned __int64 v45; // rdi@50
  int v46; // ebx@51
  int v47; // eax@51
  unsigned int v48; // ecx@52
  int v49; // edi@58
  int v50; // edx@58
  int v51; // esi@58
  unsigned int v52; // eax@59
  unsigned int v53; // et0@61
  int v54; // edi@63
  int v55; // edx@66
  int v56; // eax@66
  int v57; // ecx@67
  int v58; // ecx@70
  char v59; // [sp+8h] [bp-218h]@6
  unsigned int v60; // [sp+1D4h] [bp-4Ch]@31
  int v61; // [sp+1D8h] [bp-48h]@30
  unsigned __int64 v62; // [sp+1DCh] [bp-44h]@11
  int v63; // [sp+1E4h] [bp-3Ch]@27
  unsigned int v64; // [sp+1E8h] [bp-38h]@15
  unsigned int v65; // [sp+1ECh] [bp-34h]@24
  unsigned int v66; // [sp+1F0h] [bp-30h]@35
  unsigned int v67; // [sp+1F8h] [bp-28h]@5
  int v68; // [sp+1FCh] [bp-24h]@27
  unsigned int v69; // [sp+200h] [bp-20h]@24
  int v70; // [sp+204h] [bp-1Ch]@10
  unsigned int v71; // [sp+208h] [bp-18h]@38
  int v72; // [sp+20Ch] [bp-14h]@35
  int v73; // [sp+210h] [bp-10h]@9
  unsigned int v74; // [sp+214h] [bp-Ch]@4
  unsigned int v75; // [sp+218h] [bp-8h]@9
  unsigned int v76; // [sp+21Ch] [bp-4h]@9

  v2 = a1;
  result = *(_DWORD *)a1;
  if ( *(_DWORD *)a1 )
  {
    v4 = *(_DWORD *)a2;
    if ( *(_DWORD *)a2 )
    {
      v5 = result - 1;
      v6 = v4 - 1;
      v74 = v5;
      if ( v4 == 1 )
      {
        v7 = *(_DWORD *)(a2 + 4);
        v67 = v7;
        if ( v7 == 1 )
        {
          v8 = *(_DWORD *)(a1 + 4);
          *(_DWORD *)a1 = v6;
          sub_100343A9(a1, a2, (void *)(a1 + 4), 0x1CCu, (int)&v59, v6);
          result = v8;
        }
        else if ( v5 )
        {
          v11 = 0;
          v75 = 0;
          v76 = 0;
          v73 = 0;
          if ( v5 != -1 )
          {
            v70 = v74 + 1;
            v12 = a1 + 4 * (v5 + 1);
            do
            {
              HIDWORD(v13) = v11;
              LODWORD(v13) = *(_DWORD *)v12;
              v14 = sub_1000FBF0(v13, v7);
              HIDWORD(v62) = v15;
              v12 -= 4;
              v73 = a1;
              v11 = v16;
              v17 = v75;
              v75 = v14;
              _ZF = v70-- == 1;
              v76 = v17;
              v7 = v67;
            }
            while ( !_ZF );
            v2 = a1;
          }
          *(_DWORD *)v2 = 0;
          sub_100343A9(v2, v11, (void *)(v2 + 4), 0x1CCu, (int)&v59, 0);
          v19 = v73;
          _CF = (unsigned int)v73 > 0;
          *(_DWORD *)(v2 + 4) = v11;
          *(_DWORD *)(v2 + 8) = v19;
          result = v75;
          *(_DWORD *)v2 = _CF + 1;
        }
        else
        {
          v9 = *(_DWORD *)(a1 + 4);
          *(_DWORD *)a1 = 0;
          sub_100343A9(a1, a1 + 4, (void *)(a1 + 4), 0x1CCu, (int)&v59, 0);
          result = v9 / v67;
          _CF = v9 % v67 > 0;
          *(_DWORD *)(a1 + 4) = v9 % v67;
          *(_DWORD *)a1 = _CF;
        }
      }
      else
      {
        if ( v6 > v5 )
          goto LABEL_75;
        v20 = v5 - v6;
        v64 = v4;
        v21 = v5;
        if ( v5 < (signed int)(v5 - v6) )
          goto LABEL_21;
        v22 = a1 + 4 * (v5 + 1);
        v23 = a2 + 4 * (v21 - v20) + 4;
        while ( *(_DWORD *)v23 == *(_DWORD *)v22 )
        {
          --v21;
          v23 -= 4;
          v22 -= 4;
          if ( v21 < v20 )
            goto LABEL_21;
        }
        if ( *(_DWORD *)(a2 + 4 * (v21 - v20) + 4) < *(_DWORD *)(a1 + 4 * v21 + 4) )
LABEL_21:
          ++v20;
        if ( v20 )
        {
          _ESI = *(_DWORD *)(a2 + 4 * v64);
          v69 = *(_DWORD *)(a2 + 4 * v64 - 4);
          __asm { bsr     eax, esi }
          v65 = _ESI;
          if ( _ZF )
            v28 = 32;
          else
            v28 = 31 - _EAX;
          v68 = v28;
          v63 = 32 - v28;
          if ( v28 )
          {
            v29 = v69 >> v63;
            v69 <<= v68;
            v65 = v29 | (_ESI << v68);
            if ( v64 > 2 )
              v69 |= *(_DWORD *)(a2 + 4 * v64 - 8) >> v63;
          }
          v61 = 0;
          _SF = v20 - 1 < 0;
          v30 = v20 - 1;
          v70 = v30;
          if ( _SF )
          {
            v54 = 0;
          }
          else
          {
            v73 = a1 + 4 + 4 * v30;
            v31 = v30 + v64;
            v75 = v30 + v64;
            v32 = a1 - 4 + 4 * (v30 + v64);
            v60 = a1 - 4 + 4 * (v30 + v64);
            do
            {
              if ( v31 > v74 )
                v33 = 0;
              else
                v33 = *(_DWORD *)(v32 + 8);
              v34 = *(_DWORD *)(v32 + 4);
              v35 = *(_DWORD *)v32;
              v66 = v33;
              v67 = 0;
              v76 = v33;
              v72 = v35;
              if ( v68 )
              {
                v36 = v35 >> v63;
                v37 = sub_1003B7E0(__PAIR__(v76, v34), v68) | v36;
                v33 = v38;
                v34 = v37;
                v39 = v72 << v68;
                v76 = v33;
                v72 <<= v68;
                if ( v75 >= 3 )
                {
                  v33 = v76;
                  v72 = (*(_DWORD *)(v2 + 4 * (v70 + v64) - 8) >> v63) | v39;
                }
              }
              HIDWORD(v41) = sub_1000FBF0(__PAIR__(v33, v34), v65);
              v67 = 0;
              v42 = v40;
              v76 = HIDWORD(v41);
              v71 = v40;
              v43 = (unsigned int)v41;
              v62 = __PAIR__(v40, HIDWORD(v41));
              if ( v40 || HIDWORD(v41) > 0xFFFFFFFF )
              {
                v43 = sub_1003B2D0(__PAIR__(v40, HIDWORD(v41)) - 0xFFFFFFFF, v65) + (unsigned int)v41;
                HIDWORD(v41) = -1;
                v42 = 0;
                v67 = HIDWORD(v43);
                v76 = -1;
                v62 = 0xFFFFFFFFi64;
                v71 = 0;
              }
              if ( v43 <= 0xFFFFFFFF )
              {
                while ( sub_1003B2D0(v69, __PAIR__(v42, HIDWORD(v41))) > __PAIR__(v43, v72) )
                {
                  _CF = __CFADD__(HIDWORD(v41)--, -1);
                  LODWORD(v62) = HIDWORD(v41);
                  v42 = _CF + v71 - 1;
                  v71 = v42;
                  _ZF = __CFADD__(v65, (_DWORD)v43) + v67 == 0;
                  v44 = v65 + v43;
                  v67 = (__PAIR__(v67, v65) + (unsigned int)v43) >> 32;
                  LODWORD(v43) = v65 + v43;
                  HIDWORD(v62) = v42;
                  if ( !_ZF || v44 > 0xFFFFFFFF )
                    goto LABEL_47;
                }
                v42 = v71;
LABEL_47:
                v76 = HIDWORD(v41);
              }
              if ( v42 || HIDWORD(v41) )
              {
                LODWORD(v41) = v64;
                v45 = 0i64;
                if ( v64 )
                {
                  v46 = v73;
                  v47 = a2 + 4;
                  v72 = a2 + 4;
                  v74 = v64;
                  do
                  {
                    v67 = *(_DWORD *)v47;
                    v48 = v67 * v62 + v45;
                    LODWORD(v45) = (v67 * v62 + v45) >> 32;
                    HIDWORD(v45) = 0;
                    if ( *(_DWORD *)v46 < v48 )
                      ++v45;
                    *(_DWORD *)v46 -= v48;
                    v46 += 4;
                    v47 = v72 + 4;
                    _ZF = v74-- == 1;
                    v72 += 4;
                  }
                  while ( !_ZF );
                  v41 = __PAIR__(v76, v64);
                }
                if ( v66 < v45 )
                {
                  if ( (_DWORD)v41 )
                  {
                    v49 = v41;
                    v50 = v73;
                    v51 = a2 + 4;
                    HIDWORD(v41) = 0;
                    do
                    {
                      LODWORD(v41) = *(_DWORD *)v50;
                      v51 += 4;
                      v50 += 4;
                      v52 = (*(_DWORD *)(v51 - 4) + (unsigned __int64)(unsigned int)v41) >> 32;
                      LODWORD(v41) = *(_DWORD *)(v51 - 4) + v41;
                      *(_DWORD *)(v50 - 4) = HIDWORD(v41) + v41;
                      v41 = __PAIR__(v52, HIDWORD(v41)) + (unsigned int)v41;
                      --v49;
                    }
                    while ( v49 );
                    HIDWORD(v41) = v76;
                  }
                  v53 = (__PAIR__(v71, HIDWORD(v41)) - 1) >> 32;
                  --HIDWORD(v41);
                  v71 = v53;
                }
                v74 = v75 - 1;
              }
              v54 = HIDWORD(v41);
              v73 -= 4;
              v2 = a1;
              v32 = v60 - 4;
              v31 = v75 - 1;
              v61 = v54;
              --v70;
              v60 -= 4;
              --v75;
            }
            while ( v70 >= 0 );
          }
          v55 = v74 + 1;
          v56 = v74 + 1;
          if ( v74 + 1 < *(_DWORD *)v2 )
          {
            v57 = v2 + 4 * (v74 + 2);
            do
            {
              *(_DWORD *)v57 = 0;
              v57 += 4;
              ++v56;
            }
            while ( (unsigned int)v56 < *(_DWORD *)v2 );
          }
          *(_DWORD *)v2 = v55;
          if ( v55 )
          {
            do
            {
              v58 = *(_DWORD *)v2;
              if ( *(_DWORD *)(v2 + 4 * *(_DWORD *)v2) )
                break;
              *(_DWORD *)v2 = v58 - 1;
            }
            while ( v58 != 1 );
          }
          result = v54;
        }
        else
        {
LABEL_75:
          result = 0;
        }
      }
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (10036DBE) --------------------------------------------------------
unsigned int __cdecl sub_10036DBE(double a1, int a2, int a3, int a4, int a5)
{
  int v5; // ebx@1
  double v6; // rdi@1
  char v7; // al@1
  signed int v8; // eax@6
  int v9; // eax@8
  int v10; // eax@9
  int v11; // eax@10
  double v12; // st7@12
  int v13; // eax@12
  char v14; // dl@13
  signed int v15; // esi@13
  int v16; // ebx@15
  int v18; // ecx@15
  int v19; // eax@15
  int v20; // esi@15
  double v21; // st7@15
  signed int v22; // eax@15
  int v23; // ebx@18
  int v24; // ecx@20
  unsigned int v25; // esi@23
  int v26; // eax@23
  int v32; // ecx@24
  int v33; // edx@26
  bool v34; // al@28
  int v35; // ecx@34
  int v36; // esi@35
  int v37; // edx@35
  int v38; // esi@35
  int *v39; // eax@35
  signed int v40; // edi@38
  signed int v41; // eax@41
  int v42; // ecx@43
  signed int v43; // ebx@48
  int v44; // ecx@54
  int v45; // eax@54
  int v48; // ecx@55
  int v49; // edx@57
  bool v50; // al@59
  int v51; // eax@65
  int v52; // esi@66
  unsigned int v53; // edx@66
  int v54; // esi@66
  int *v55; // ecx@66
  signed int v56; // edi@69
  signed int v57; // eax@72
  unsigned int v58; // edi@74
  int v59; // eax@74
  int v60; // edx@86
  int v62; // edx@90
  signed int v63; // esi@92
  char *v64; // edi@92
  unsigned int v65; // edx@97
  int v66; // eax@99
  int v67; // eax@101
  int v70; // ecx@103
  bool v71; // al@107
  int v72; // ecx@111
  int v73; // esi@114
  int *v74; // edi@114
  unsigned int v75; // edx@119
  int v76; // eax@121
  unsigned int v77; // ebx@128
  unsigned int v78; // eax@131
  unsigned int v79; // ecx@131
  int v80; // ecx@134
  int v81; // esi@134
  unsigned int v82; // edi@134
  unsigned int v83; // ecx@134
  int v84; // eax@136
  int v85; // ecx@139
  int v86; // esi@139
  unsigned __int64 v87; // rax@140
  int v88; // kr00_4@140
  int v89; // eax@145
  int v90; // esi@148
  unsigned __int64 v91; // rax@149
  int v92; // kr04_4@149
  int v93; // eax@152
  bool v94; // al@153
  int *v95; // edx@154
  int v96; // edx@159
  int v97; // esi@159
  int v98; // eax@165
  int v99; // ecx@165
  unsigned __int64 v100; // rax@169
  char v101; // al@181
  int *v102; // eax@191
  unsigned int v103; // esi@194
  int v104; // ecx@194
  unsigned __int64 v105; // rax@195
  int v106; // kr08_4@195
  unsigned __int64 v107; // rax@195
  unsigned int v108; // eax@199
  __int64 v109; // rtt@199
  unsigned int v110; // ecx@199
  int v111; // ecx@202
  int v112; // esi@202
  unsigned int v113; // edi@202
  int v114; // ecx@202
  int v115; // eax@204
  int v116; // ecx@207
  int v117; // esi@207
  unsigned __int64 v118; // rax@208
  int v119; // kr0C_4@208
  int v120; // esi@216
  unsigned __int64 v121; // rax@217
  int v122; // kr10_4@217
  bool v123; // al@219
  int *v124; // edx@220
  int v125; // edx@225
  int v126; // esi@225
  int v127; // eax@231
  int v128; // ecx@231
  unsigned __int64 v129; // rax@235
  char v130; // al@246
  int v131; // eax@251
  int v132; // ecx@253
  int v133; // esi@254
  unsigned __int64 v134; // rax@255
  int v135; // edx@255
  int v136; // edi@264
  int v137; // esi@264
  int v138; // ecx@264
  unsigned int v139; // esi@265
  int v140; // edi@265
  signed __int64 v141; // rax@266
  int v142; // kr14_4@266
  unsigned __int64 v143; // rax@266
  unsigned int v144; // eax@272
  unsigned int v145; // eax@273
  int v146; // edi@274
  unsigned int v147; // esi@274
  int v148; // ecx@274
  signed __int64 v149; // rax@275
  int v150; // eax@281
  int v151; // ecx@284
  int v152; // eax@287
  unsigned int v153; // edi@291
  int v154; // esi@291
  int v155; // ecx@291
  signed __int64 v156; // rax@292
  int v157; // kr1C_4@292
  unsigned __int64 v158; // rax@292
  unsigned int v159; // esi@293
  signed int v160; // edi@297
  int v161; // ecx@297
  unsigned __int64 v162; // rtt@298
  char v163; // dl@298
  unsigned int result; // eax@5
  int v165; // [sp+0h] [bp-978h]@191
  unsigned int v166; // [sp+4h] [bp-974h]@145
  unsigned int v167[5]; // [sp+4h] [bp-974h]@204
  char v168; // [sp+18h] [bp-960h]@188
  char v169; // [sp+1E4h] [bp-794h]@1
  char v170; // [sp+1ECh] [bp-78Ch]@310
  int v171; // [sp+1F4h] [bp-784h]@12
  int v172; // [sp+1F8h] [bp-780h]@1
  int v173; // [sp+1FCh] [bp-77Ch]@1
  int i; // [sp+200h] [bp-778h]@12
  int v175; // [sp+204h] [bp-774h]@23
  unsigned int v176; // [sp+208h] [bp-770h]@23
  unsigned int v177; // [sp+20Ch] [bp-76Ch]@15
  double v178; // [sp+210h] [bp-768h]@12
  int v179; // [sp+218h] [bp-760h]@34
  int v180; // [sp+21Ch] [bp-75Ch]@23
  unsigned int v181; // [sp+220h] [bp-758h]@23
  unsigned int v182; // [sp+224h] [bp-754h]@26
  int v183; // [sp+228h] [bp-750h]@23
  unsigned int v184; // [sp+22Ch] [bp-74Ch]@15
  bool v185; // [sp+233h] [bp-745h]@26
  int v186; // [sp+234h] [bp-744h]@136
  int v187[115]; // [sp+238h] [bp-740h]@160
  int v188; // [sp+404h] [bp-574h]@19
  int v189; // [sp+408h] [bp-570h]@19
  int v190; // [sp+40Ch] [bp-56Ch]@19
  unsigned int v191; // [sp+5D4h] [bp-3A4h]@52
  int v192[115]; // [sp+5D8h] [bp-3A0h]@53
  int v193; // [sp+7A4h] [bp-1D4h]@18
  int v194; // [sp+7A8h] [bp-1D0h]@18
  int v195; // [sp+7ACh] [bp-1CCh]@18
  char v196; // [sp+7B0h] [bp-1C8h]@92

  v5 = a4;
  LODWORD(v6) = a3;
  v172 = a3;
  v173 = a4;
  sub_100368D7((int)&v169);
  HIDWORD(v6) = HIDWORD(a1);
  v7 = 45;
  if ( !(HIDWORD(a1) & 0x80000000) )
    v7 = 32;
  *LODWORD(v6) = v7;
  *(_DWORD *)(LODWORD(v6) + 8) = v5;
  LODWORD(v6) = LODWORD(a1);
  if ( !(HIDWORD(v6) & 0x7FF00000) && !(HIDWORD(v6) & 0xFFFFF | LODWORD(a1)) )
  {
    *(_DWORD *)(v172 + 4) = 0;
    result = sub_1002ED3A(v5, SLODWORD(v6), v5, a5, (int)&unk_10069B8C);
    goto LABEL_309;
  }
  v8 = sub_10030D19((int)&a1);
  if ( v8 )
    *(_DWORD *)(v172 + 4) = 1;
  v9 = v8 - 1;
  if ( !v9 )
  {
    result = sub_1002ED3A(v5, SLODWORD(v6), v5, a5, (int)"1#INF");
LABEL_309:
    if ( result )
    {
      sub_1002B7B4(v5, SLODWORD(v6));
      __debugbreak();
      JUMPOUT(*(_DWORD *)sub_1003815A);
    }
    goto LABEL_310;
  }
  v10 = v9 - 1;
  if ( !v10 )
  {
    result = sub_1002ED3A(v5, SLODWORD(v6), v5, a5, (int)"1#QNAN");
    goto LABEL_309;
  }
  v11 = v10 - 1;
  if ( !v11 )
  {
    result = sub_1002ED3A(v5, SLODWORD(v6), v5, a5, (int)"1#SNAN");
    goto LABEL_309;
  }
  if ( v11 == 1 )
  {
    result = sub_1002ED3A(v5, SLODWORD(v6), v5, a5, (int)"1#IND");
    goto LABEL_309;
  }
  HIDWORD(v6) &= 0x7FFFFFFFu;
  v171 = 0;
  a1 = v6;
  v12 = v6;
  v178 = v6;
  i = a2 + 1;
  v13 = (HIDWORD(v178) >> 20) & 0x7FF;
  if ( v13 )
  {
    v14 = 0;
    v15 = 0x100000;
    v13 = 0;
  }
  else
  {
    v14 = 1;
    v15 = 0;
  }
  _EDI = (__PAIR__(v15, v13) + __PAIR__(HIDWORD(v178) & 0xFFFFF, LODWORD(v178))) >> 32;
  v16 = v13 + LODWORD(v178);
  v18 = (HIDWORD(v178) >> 20) & 0x7FF;
  v19 = (v14 != 0) + 1;
  v20 = v19 + v18 - 1076;
  v184 = v19 + v18 - 1076;
  sub_10039550();
  v21 = sub_10039660(v12);
  v22 = sub_1003B390(v21);
  v177 = v22;
  if ( v22 == 0x7FFFFFFF || v22 == 0x80000000 )
    v177 = 0;
  v194 = v16;
  v195 = _EDI;
  v23 = (_EDI != 0) + 1;
  v193 = (_EDI != 0) + 1;
  if ( v20 < 0 )
  {
    if ( v20 != -1022 )
    {
      v189 = 0;
      v190 = 0x100000;
      v188 = 2;
      if ( v23 == 2 )
      {
        v60 = 0;
        while ( *(int *)((char *)&v189 + v60 * 4) == *(int *)((char *)&v194 + v60 * 4) )
        {
          ++v60;
          if ( v60 == 2 )
          {
            HIDWORD(v178) = 0;
            __asm { bsr     eax, edi }
            if ( _ZF )
              v62 = 0;
            else
              v62 = _EAX + 1;
            v63 = 2;
            v182 = (unsigned int)&v196;
            v64 = &v196;
            v185 = (unsigned int)(32 - v62) < 2;
            while ( 1 )
            {
              v183 = v63 >= (unsigned int)v23 ? 0 : *(_DWORD *)v64;
              v65 = v63 - 1 >= (unsigned int)v23 ? 0 : *((_DWORD *)v64 - 1);
              v64 -= 4;
              v66 = v182;
              --v63;
              *(_DWORD *)v182 = 4 * v183 ^ (v65 >> 30);
              v182 = v66 - 4;
              if ( v63 == -1 )
                break;
              v23 = v193;
            }
            v193 = (v185 != 0) + 2;
            _EDI = (2 - v184) >> 5;
            v181 = 2 - v184;
            sub_10028330(&v189, 0, 4 * _EDI);
            *(&v189 + _EDI) = 1 << (v181 & 0x1F);
            v67 = _EDI + 1;
            goto LABEL_129;
          }
        }
      }
    }
    _EAX = *(&v193 + v23);
    HIDWORD(v178) = 0;
    __asm { bsr     eax, eax }
    if ( _ZF )
      v70 = 0;
    else
      v70 = _EAX + 1;
    v185 = (unsigned int)(32 - v70) < 1;
    v71 = v23 == 115 && (unsigned int)(32 - v70) < 1;
    if ( (unsigned int)v23 > 0x73 || v71 )
    {
      v188 = 0;
      v193 = 0;
      sub_100343A9(v23, _EDI, &v194, 0x1CCu, (int)&v189, 0);
    }
    else
    {
      v72 = 114;
      if ( (unsigned int)v23 < 0x72 )
        v72 = (_EDI != 0) + 1;
      if ( v72 != -1 )
      {
        v73 = v72;
        v74 = &v194 + v72;
        v182 = (unsigned int)(&v194 + v72);
        while ( 1 )
        {
          v183 = v73 >= (unsigned int)v23 ? 0 : *v74;
          v75 = v73 - 1 >= (unsigned int)v23 ? 0 : *(v74 - 1);
          --v74;
          v76 = v182;
          --v73;
          *(_DWORD *)v182 = 2 * v183 ^ (v75 >> 31);
          v182 = v76 - 4;
          if ( v73 == -1 )
            break;
          v23 = v193;
        }
        v20 = v184;
      }
      if ( v185 )
        v193 = v72 + 1;
      else
        v193 = v72;
    }
    v77 = (unsigned int)(1 - v20) >> 5;
    sub_10028330(&v189, 0, 4 * v77);
    _EDI = (1 - (_BYTE)v20) & 0x1F;
    *(&v189 + v77) = 1 << _EDI;
    v67 = v77 + 1;
LABEL_129:
    v188 = v67;
    v43 = 460;
    v191 = v67;
    sub_100343A9(460, _EDI, v192, 0x1CCu, (int)&v189, 4 * v67);
  }
  else
  {
    v189 = 0;
    v190 = 0x100000;
    v188 = 2;
    if ( v23 == 2 )
    {
      v24 = 0;
      while ( *(int *)((char *)&v189 + v24 * 4) == *(int *)((char *)&v194 + v24 * 4) )
      {
        ++v24;
        if ( v24 == 2 )
        {
          v180 = (v184 + 2) & 0x1F;
          v25 = (v184 + 2) >> 5;
          v183 = (v184 + 2) >> 5;
          v176 = 32 - v180;
          v26 = sub_1003B7E0(1i64, 32 - ((v184 + 2) & 0x1F));
          HIDWORD(v178) = 0;
          __asm { bsr     ecx, edi }
          v181 = v26 - 1;
          v175 = ~(v26 - 1);
          if ( _ZF )
            v32 = 0;
          else
            v32 = _ECX + 1;
          v33 = v25 + 2;
          v182 = v25 + 2;
          v185 = v180 > (unsigned int)(32 - v32);
          v34 = v25 == 113 && v180 > (unsigned int)(32 - v32);
          if ( v25 + 2 > 0x73 || v34 )
          {
            v43 = 460;
            v188 = 0;
            v193 = 0;
            sub_100343A9(460, _EDI, &v194, 0x1CCu, (int)&v189, 0);
          }
          else
          {
            if ( (unsigned int)v33 >= 0x72 )
            {
              v33 = 114;
              v182 = 114;
            }
            v35 = v33;
            v179 = v33;
            if ( v33 != -1 )
            {
              v36 = v33;
              v37 = v183;
              v38 = v36 - v183;
              v39 = &v194 + v38;
              v184 = (unsigned int)(&v194 + v38);
              while ( v35 >= (unsigned int)v37 )
              {
                v40 = v38 >= (unsigned int)v23 ? 0 : *v39;
                v41 = v38 - 1 >= (unsigned int)v23 ? 0 : *(_DWORD *)(v184 - 4);
                _EDI = (v181 & v40) << v180;
                v42 = v179;
                *(&v194 + v179) = _EDI | ((v175 & (unsigned int)v41) >> v176);
                v35 = v42 - 1;
                --v38;
                v39 = (int *)(v184 - 4);
                v179 = v35;
                v184 -= 4;
                if ( v35 == -1 )
                  break;
                v23 = v193;
              }
              v33 = v182;
              v25 = v183;
            }
            if ( v25 )
            {
              memset(&v194, 0, 4 * v25);
              _EDI = (int)(&v194 + v25);
            }
            v43 = 460;
            if ( v185 )
              v193 = v33 + 1;
            else
              v193 = v33;
          }
          v190 = 0;
          v189 = 4;
          v188 = 1;
          v191 = 1;
          goto LABEL_53;
        }
      }
    }
    v44 = 32 - ((v184 + 1) & 0x1F);
    v183 = (v184 + 1) & 0x1F;
    _EDI = (v184 + 1) >> 5;
    v184 = (v184 + 1) >> 5;
    v176 = v44;
    v45 = sub_1003B7E0(1i64, v44);
    _ECX = *(&v193 + v23);
    HIDWORD(v178) = 0;
    __asm { bsr     ecx, ecx }
    v181 = v45 - 1;
    v175 = ~(v45 - 1);
    if ( _ZF )
      v48 = 0;
    else
      v48 = _ECX + 1;
    v49 = v23 + _EDI;
    v179 = v23 + _EDI;
    v185 = v183 > (unsigned int)(32 - v48);
    v50 = v23 + _EDI == 115 && v183 > (unsigned int)(32 - v48);
    if ( (unsigned int)(v23 + _EDI) > 0x73 || v50 )
    {
      v43 = 460;
      v188 = 0;
      v193 = 0;
      sub_100343A9(460, _EDI, &v194, 0x1CCu, (int)&v189, 0);
    }
    else
    {
      if ( (unsigned int)v49 >= 0x72 )
      {
        v49 = 114;
        v179 = 114;
      }
      v51 = v49;
      v182 = v49;
      if ( v49 != -1 )
      {
        v52 = v49;
        v53 = v184;
        v54 = v52 - v184;
        v55 = &v194 + v54;
        v180 = (int)(&v194 + v54);
        while ( v51 >= v53 )
        {
          v56 = v54 >= (unsigned int)v23 ? 0 : *v55;
          v57 = v54 - 1 >= (unsigned int)v23 ? 0 : *(v55 - 1);
          v58 = ((v175 & (unsigned int)v57) >> v176) | ((v181 & v56) << v183);
          v59 = v182;
          v55 = (int *)(v180 - 4);
          v180 -= 4;
          *(&v194 + v182) = v58;
          v51 = v59 - 1;
          --v54;
          v182 = v51;
          if ( v51 == -1 )
            break;
          v23 = v193;
        }
        v49 = v179;
        _EDI = v184;
      }
      if ( _EDI )
      {
        memset(&v194, 0, 4 * _EDI);
        _EDI += (int)&v194;
      }
      v43 = 460;
      if ( v185 )
        v193 = v49 + 1;
      else
        v193 = v49;
    }
    v190 = 0;
    v189 = 2;
    v188 = 1;
    v191 = 1;
LABEL_53:
    sub_100343A9(v43, _EDI, v192, v43, (int)&v189, 4u);
  }
  v175 = 10;
  if ( (v177 & 0x80000000) != 0 )
  {
    v109 = -v177;
    v108 = -v177 / 0xA;
    v182 = v108;
    v110 = (unsigned int)v109 % 0xA;
    v181 = (unsigned int)v109 % 0xA;
    if ( !v108 )
      goto LABEL_250;
    while ( 1 )
    {
      if ( v108 > 0x26 )
        v108 = 38;
      v111 = (unsigned __int8)byte_10069ACE[4 * v108];
      v112 = (unsigned __int8)byte_10069ACF[4 * v108];
      v113 = (unsigned __int8)byte_10069ACE[4 * v108];
      v184 = v108;
      v113 *= 4;
      v188 = v111 + v112;
      sub_10028330(&v189, 0, v113);
      sub_100278E0(
        (char *)&v189 + v113,
        (char *)&unk_100691C8 + 4 * (unsigned __int16)word_10069ACC[2 * v184],
        4 * v112);
      v114 = v188;
      v179 = v188;
      if ( (unsigned int)v188 > 1 )
      {
        if ( (unsigned int)v193 > 1 )
        {
          _EDI = (int)&v189;
          v123 = v188 < (unsigned int)v193;
          if ( v188 < (unsigned int)v193 )
          {
            v124 = &v194;
          }
          else
          {
            _EDI = (int)&v194;
            v124 = &v189;
          }
          v176 = (unsigned int)v124;
          if ( !v123 )
            v114 = v193;
          v183 = v114;
          if ( v123 )
            v179 = v193;
          v125 = 0;
          v126 = 0;
          v186 = 0;
          if ( v114 )
          {
            _EDI -= (signed int)v187;
            v171 = _EDI;
            do
            {
              HIDWORD(v178) = *(int *)((char *)&v187[v126] + _EDI);
              if ( HIDWORD(v178) )
              {
                v127 = 0;
                _EDI = 0;
                v128 = v126;
                v180 = 0;
                if ( v179 )
                {
                  do
                  {
                    if ( v128 == 115 )
                      break;
                    if ( v128 == v125 )
                    {
                      v187[v128] = 0;
                      v186 = v126 + v127 + 1;
                      v127 = v180;
                    }
                    v129 = (unsigned int)_EDI + HIDWORD(v178) * (unsigned __int64)*(_DWORD *)(v176 + 4 * v127);
                    _CF = __CFADD__((_DWORD)v129, v187[v128]);
                    v187[v128] += v129;
                    v127 = v180 + 1;
                    ++v128;
                    v180 = v127;
                    _EDI = _CF + HIDWORD(v129);
                    v125 = v186;
                  }
                  while ( v127 != v179 );
                  while ( _EDI )
                  {
                    if ( v128 == 115 )
                      goto LABEL_259;
                    if ( v128 == v125 )
                    {
                      v187[v128] = 0;
                      v186 = v128 + 1;
                    }
                    _CF = __CFADD__(_EDI, v187[v128]);
                    v187[v128] += _EDI;
                    v125 = v186;
                    _EDI = _CF;
                    ++v128;
                  }
                }
                if ( v128 == 115 )
                  goto LABEL_259;
                _EDI = v171;
                v114 = v183;
              }
              else if ( v126 == v125 )
              {
                v187[v126] = 0;
                v125 = v126 + 1;
                v186 = v126 + 1;
              }
              ++v126;
            }
            while ( v126 != v114 );
          }
          v193 = v125;
          v167[0] = 4 * v125;
          v115 = (int)v187;
          goto LABEL_245;
        }
        _EDI = v194;
        v193 = v188;
        sub_100343A9(v43, v194, &v194, v43, (int)&v189, 4 * v188);
        if ( !_EDI )
        {
LABEL_204:
          v193 = 0;
          v167[0] = 0;
          v115 = (int)&v168;
LABEL_245:
          sub_100343A9(v43, _EDI, &v194, v43, v115, v167[0]);
          goto LABEL_246;
        }
        if ( _EDI == 1 || !v193 )
          goto LABEL_246;
        v116 = 0;
        HIDWORD(v178) = v193;
        v120 = 0;
        do
        {
          v121 = (unsigned int)*(&v194 + v120) * (unsigned __int64)(unsigned int)_EDI;
          v122 = *(&v194 + v120) * _EDI;
          *(&v194 + v120++) = v116 + v122;
          v116 = (__PAIR__(HIDWORD(v121), v116) + (unsigned int)v122) >> 32;
        }
        while ( v120 != HIDWORD(v178) );
      }
      else
      {
        _EDI = v189;
        if ( !v189 )
          goto LABEL_204;
        if ( v189 == 1 || !v193 )
          goto LABEL_246;
        v116 = 0;
        HIDWORD(v178) = v193;
        v117 = 0;
        do
        {
          v118 = (unsigned int)*(&v194 + v117) * (unsigned __int64)(unsigned int)_EDI;
          v119 = *(&v194 + v117) * _EDI;
          *(&v194 + v117++) = v116 + v119;
          v116 = (__PAIR__(HIDWORD(v118), v116) + (unsigned int)v119) >> 32;
        }
        while ( v117 != HIDWORD(v178) );
      }
      if ( !v116 )
        goto LABEL_246;
      if ( (unsigned int)v193 < 0x73 )
      {
        *(&v194 + v193++) = v116;
LABEL_246:
        v130 = 1;
        goto LABEL_247;
      }
LABEL_259:
      v193 = 0;
      sub_100343A9(v43, _EDI, &v194, v43, (int)&v168, 0);
      v130 = 0;
LABEL_247:
      if ( !v130 )
      {
        v193 = 0;
        goto LABEL_262;
      }
      v108 = v182 - v184;
      v182 -= v184;
      if ( !v182 )
      {
        v110 = v181;
LABEL_250:
        if ( !v110 )
          goto LABEL_264;
        v131 = dword_10069B64[v110];
        HIDWORD(v178) = v131;
        if ( v131 )
        {
          if ( v131 == 1 )
            goto LABEL_264;
          v132 = v193;
          if ( !v193 )
            goto LABEL_264;
          _EDI = 0;
          v133 = 0;
          do
          {
            v134 = (unsigned int)*(&v194 + v133) * (unsigned __int64)(unsigned int)v131;
            _CF = __CFADD__(_EDI, (_DWORD)v134);
            *(&v194 + v133) = _EDI + v134;
            v131 = HIDWORD(v178);
            v135 = _CF + HIDWORD(v134);
            ++v133;
            _EDI = v135;
          }
          while ( v133 != v132 );
          if ( !v135 )
            goto LABEL_264;
          if ( (unsigned int)v193 < 0x73 )
          {
            *(&v194 + v193++) = v135;
            goto LABEL_264;
          }
        }
        v193 = 0;
LABEL_262:
        v165 = (int)&v168;
        v102 = &v194;
        goto LABEL_263;
      }
    }
  }
  v78 = v177 / 0xA;
  v176 = v177 / 0xA;
  v79 = v177 % 0xA;
  HIDWORD(v178) = v177 % 0xA;
  if ( !(v177 / 0xA) )
    goto LABEL_185;
  do
  {
    if ( v78 > 0x26 )
      v78 = 38;
    v80 = (unsigned __int8)byte_10069ACE[4 * v78];
    v81 = (unsigned __int8)byte_10069ACF[4 * v78];
    v82 = (unsigned __int8)byte_10069ACE[4 * v78];
    v180 = v78;
    v82 *= 4;
    v188 = v80 + v81;
    sub_10028330(&v189, 0, v82);
    sub_100278E0((char *)&v189 + v82, (char *)&unk_100691C8 + 4 * (unsigned __int16)word_10069ACC[2 * v180], 4 * v81);
    v83 = v188;
    v179 = v188;
    if ( (unsigned int)v188 <= 1 )
    {
      _EDI = v189;
      if ( !v189 )
      {
        v84 = 0;
        v186 = 0;
        v191 = 0;
LABEL_179:
        v166 = v84;
        v89 = (int)v187;
        goto LABEL_180;
      }
      if ( v189 == 1 || !v191 )
        goto LABEL_181;
      v85 = 0;
      v181 = v191;
      v86 = 0;
      do
      {
        v87 = (unsigned int)v192[v86] * (unsigned __int64)(unsigned int)_EDI;
        v88 = v192[v86] * _EDI;
        v192[v86++] = v85 + v88;
        v85 = (__PAIR__(HIDWORD(v87), v85) + (unsigned int)v88) >> 32;
      }
      while ( v86 != v181 );
LABEL_150:
      if ( v85 )
      {
        if ( v191 >= 0x73 )
        {
          v188 = 0;
          v191 = 0;
          v93 = (int)&v189;
          goto LABEL_189;
        }
        v192[v191++] = v85;
      }
      goto LABEL_181;
    }
    if ( v191 <= 1 )
    {
      _EDI = v192[0];
      v191 = v188;
      sub_100343A9(v43, v192[0], v192, v43, (int)&v189, 4 * v188);
      if ( !_EDI )
      {
        v188 = 0;
        v191 = 0;
        v166 = 0;
        v89 = (int)&v189;
LABEL_180:
        sub_100343A9(v43, _EDI, v192, v43, v89, v166);
LABEL_181:
        v101 = 1;
        goto LABEL_182;
      }
      if ( _EDI == 1 || !v191 )
        goto LABEL_181;
      v85 = 0;
      v181 = v191;
      v90 = 0;
      do
      {
        v91 = (unsigned int)v192[v90] * (unsigned __int64)(unsigned int)_EDI;
        v92 = v192[v90] * _EDI;
        v192[v90++] = v85 + v92;
        v85 = (__PAIR__(HIDWORD(v91), v85) + (unsigned int)v92) >> 32;
      }
      while ( v90 != v181 );
      goto LABEL_150;
    }
    _EDI = (int)&v189;
    v94 = v188 < v191;
    if ( v188 < v191 )
    {
      v95 = v192;
    }
    else
    {
      _EDI = (int)v192;
      v95 = &v189;
    }
    v183 = (int)v95;
    if ( !v94 )
      v83 = v191;
    v182 = v83;
    if ( v94 )
      v179 = v191;
    v96 = 0;
    v97 = 0;
    v186 = 0;
    if ( !v83 )
    {
LABEL_178:
      v191 = v96;
      v84 = 4 * v96;
      goto LABEL_179;
    }
    _EDI -= (signed int)v187;
    v171 = _EDI;
    while ( 1 )
    {
      v181 = *(int *)((char *)&v187[v97] + _EDI);
      if ( !v181 )
      {
        if ( v97 == v96 )
        {
          v187[v97] = 0;
          v96 = v97 + 1;
          v186 = v97 + 1;
        }
        goto LABEL_177;
      }
      v98 = 0;
      _EDI = 0;
      v99 = v97;
      v184 = 0;
      if ( v179 )
      {
        do
        {
          if ( v99 == 115 )
            break;
          if ( v99 == v96 )
          {
            v187[v99] = 0;
            v186 = v97 + v98 + 1;
            v98 = v184;
          }
          v100 = (unsigned int)_EDI + v181 * (unsigned __int64)*(_DWORD *)(v183 + 4 * v98);
          _CF = __CFADD__((_DWORD)v100, v187[v99]);
          v187[v99] += v100;
          v98 = v184 + 1;
          ++v99;
          v184 = v98;
          _EDI = _CF + HIDWORD(v100);
          v96 = v186;
        }
        while ( v98 != v179 );
        while ( _EDI )
        {
          if ( v99 == 115 )
            goto LABEL_188;
          if ( v99 == v96 )
          {
            v187[v99] = 0;
            v186 = v99 + 1;
          }
          _CF = __CFADD__(_EDI, v187[v99]);
          v187[v99] += _EDI;
          v96 = v186;
          _EDI = _CF;
          ++v99;
        }
      }
      if ( v99 == 115 )
        break;
      _EDI = v171;
      v83 = v182;
LABEL_177:
      ++v97;
      if ( v97 == v83 )
        goto LABEL_178;
    }
LABEL_188:
    v191 = 0;
    v93 = (int)&v168;
LABEL_189:
    sub_100343A9(v43, _EDI, v192, v43, v93, 0);
    v101 = 0;
LABEL_182:
    if ( !v101 )
    {
      v191 = 0;
      goto LABEL_191;
    }
    v78 = v176 - v180;
    v176 -= v180;
  }
  while ( v176 );
  v79 = HIDWORD(v178);
LABEL_185:
  if ( v79 )
  {
    _EDI = dword_10069B64[v79];
    if ( !_EDI )
      goto LABEL_187;
    if ( _EDI != 1 )
    {
      HIDWORD(v178) = v191;
      if ( v191 )
      {
        v103 = 0;
        v104 = 0;
        do
        {
          v105 = (unsigned int)v192[v104] * (unsigned __int64)(unsigned int)_EDI;
          v106 = v192[v104] * _EDI;
          v192[v104] = v103 + v106;
          v107 = __PAIR__(HIDWORD(v105), v103) + (unsigned int)v106;
          ++v104;
          v103 = HIDWORD(v107);
        }
        while ( v104 != HIDWORD(v178) );
        if ( HIDWORD(v107) )
        {
          if ( v191 < 0x73 )
          {
            v192[v191++] = HIDWORD(v107);
            goto LABEL_264;
          }
LABEL_187:
          v191 = 0;
LABEL_191:
          v165 = (int)&v168;
          v102 = v192;
LABEL_263:
          sub_100343A9(v43, _EDI, v102, v43, v165, 0);
        }
      }
    }
  }
LABEL_264:
  v136 = v173;
  v137 = v173;
  v138 = v193;
  v184 = v173;
  if ( v193 )
  {
    v139 = 0;
    v140 = 0;
    do
    {
      v141 = 10i64 * (unsigned int)*(&v194 + v140);
      v142 = 10 * *(&v194 + v140);
      *(&v194 + v140) = v139 + 10 * *(&v194 + v140);
      v143 = __PAIR__(HIDWORD(v141), v139) + (unsigned int)v142;
      ++v140;
      v139 = HIDWORD(v143);
    }
    while ( v140 != v138 );
    HIDWORD(v178) = HIDWORD(v143);
    v137 = v184;
    if ( HIDWORD(v143) )
    {
      if ( (unsigned int)v193 >= 0x73 )
      {
        v193 = 0;
        sub_100343A9(v43, v140, &v194, v43, (int)&v168, 0);
      }
      else
      {
        *(&v194 + v193++) = HIDWORD(v143);
      }
    }
    v136 = v137;
  }
  v144 = sub_10036910((int)&v193, (int)&v191);
  if ( v144 == 10 )
  {
    ++v177;
    v137 = v136 + 1;
    v145 = v191;
    *(_BYTE *)v136 = 49;
    v184 = v136 + 1;
    if ( v145 )
    {
      v146 = 0;
      v147 = v145;
      v148 = 0;
      do
      {
        v149 = 10i64 * (unsigned int)v192[v148];
        v192[v148++] = v146 + v149;
        v146 = (v149 + (unsigned __int64)(unsigned int)v146) >> 32;
      }
      while ( v148 != v147 );
      v137 = v184;
      if ( v146 )
      {
        if ( v191 >= 0x73 )
        {
          v191 = 0;
          sub_100343A9(v43, v146, v192, v43, (int)&v168, 0);
        }
        else
        {
          v192[v191++] = v146;
        }
      }
    }
LABEL_283:
    v150 = v177;
  }
  else
  {
    if ( v144 )
    {
      v137 = v136 + 1;
      *(_BYTE *)v136 = v144 + 48;
      v184 = v136 + 1;
      goto LABEL_283;
    }
    v150 = v177 - 1;
  }
  *(_DWORD *)(v172 + 4) = v150;
  v151 = i;
  if ( v150 >= 0 && (unsigned int)i <= 0x7FFFFFFF )
    v151 = v150 + i;
  v152 = a5 - 1;
  if ( a5 - 1 >= (unsigned int)v151 )
    v152 = v151;
  result = v173 + v152;
  for ( i = result; v137 != i; v184 = v137 )
  {
    result = v193;
    if ( !v193 )
      break;
    v153 = 0;
    v154 = v193;
    v155 = 0;
    do
    {
      v156 = 1000000000i64 * (unsigned int)*(&v194 + v155);
      v157 = 1000000000 * *(&v194 + v155);
      *(&v194 + v155) = v153 + 1000000000 * *(&v194 + v155);
      v158 = __PAIR__(HIDWORD(v156), v153) + (unsigned int)v157;
      ++v155;
      v153 = HIDWORD(v158);
    }
    while ( v155 != v154 );
    v159 = v184;
    if ( HIDWORD(v158) )
    {
      if ( (unsigned int)v193 >= 0x73 )
      {
        v193 = 0;
        sub_100343A9(v43, SHIDWORD(v158), &v194, v43, (int)&v168, 0);
      }
      else
      {
        *(&v194 + v193++) = HIDWORD(v158);
      }
    }
    result = sub_10036910((int)&v193, (int)&v191);
    v160 = 8;
    v161 = i - v159;
    do
    {
      v162 = result;
      result /= (unsigned int)v175;
      v163 = v162 % (unsigned int)v175 + 48;
      if ( v161 >= (unsigned int)v160 )
        *(_BYTE *)(v160 + v159) = v163;
      --v160;
    }
    while ( v160 != -1 );
    if ( (unsigned int)v161 > 9 )
      v161 = 9;
    v137 = v161 + v159;
  }
  *(_BYTE *)v137 = 0;
LABEL_310:
  if ( v170 )
    result = sub_10039478((int)&v169);
  return result;
}
// 10039550: using guessed type double sub_10039550();
// 10069ACC: using guessed type __int16 word_10069ACC[];
// 10069B64: using guessed type int dword_10069B64[];
// 10036DBE: using guessed type int var_3A0[115];
// 10036DBE: using guessed type int var_740[115];

//----- (1003815A) --------------------------------------------------------
void __cdecl sub_1003815A(int a1)
{
  if ( a1 )
  {
    if ( *(void **)(a1 + 12) != off_1007A90C )
      sub_1002D7BC(*(LPVOID *)(a1 + 12));
    if ( *(void **)(a1 + 16) != off_1007A910 )
      sub_1002D7BC(*(LPVOID *)(a1 + 16));
    if ( *(void **)(a1 + 20) != off_1007A914 )
      sub_1002D7BC(*(LPVOID *)(a1 + 20));
    if ( *(void **)(a1 + 24) != off_1007A918 )
      sub_1002D7BC(*(LPVOID *)(a1 + 24));
    if ( *(void **)(a1 + 28) != off_1007A91C )
      sub_1002D7BC(*(LPVOID *)(a1 + 28));
    if ( *(void **)(a1 + 32) != off_1007A920 )
      sub_1002D7BC(*(LPVOID *)(a1 + 32));
    if ( *(void **)(a1 + 36) != off_1007A924 )
      sub_1002D7BC(*(LPVOID *)(a1 + 36));
    if ( *(void **)(a1 + 56) != off_1007A938 )
      sub_1002D7BC(*(LPVOID *)(a1 + 56));
    if ( *(void **)(a1 + 60) != off_1007A93C )
      sub_1002D7BC(*(LPVOID *)(a1 + 60));
    if ( *(void **)(a1 + 64) != off_1007A940 )
      sub_1002D7BC(*(LPVOID *)(a1 + 64));
    if ( *(void **)(a1 + 68) != off_1007A944 )
      sub_1002D7BC(*(LPVOID *)(a1 + 68));
    if ( *(void **)(a1 + 72) != off_1007A948 )
      sub_1002D7BC(*(LPVOID *)(a1 + 72));
    if ( *(void **)(a1 + 76) != off_1007A94C )
      sub_1002D7BC(*(LPVOID *)(a1 + 76));
  }
}
// 1007A90C: using guessed type void *off_1007A90C;
// 1007A910: using guessed type void *off_1007A910;
// 1007A914: using guessed type void *off_1007A914;
// 1007A918: using guessed type void *off_1007A918;
// 1007A91C: using guessed type void *off_1007A91C;
// 1007A920: using guessed type void *off_1007A920;
// 1007A924: using guessed type void *off_1007A924;
// 1007A938: using guessed type void *off_1007A938;
// 1007A93C: using guessed type void *off_1007A93C;
// 1007A940: using guessed type void *off_1007A940;
// 1007A944: using guessed type void *off_1007A944;
// 1007A948: using guessed type void *off_1007A948;
// 1007A94C: using guessed type void *off_1007A94C;

//----- (10038258) --------------------------------------------------------
void __cdecl sub_10038258(int a1)
{
  if ( a1 )
  {
    if ( *(void **)a1 != off_1007A900 )
      sub_1002D7BC(*(LPVOID *)a1);
    if ( *(void **)(a1 + 4) != off_1007A904 )
      sub_1002D7BC(*(LPVOID *)(a1 + 4));
    if ( *(void **)(a1 + 8) != off_1007A908 )
      sub_1002D7BC(*(LPVOID *)(a1 + 8));
    if ( *(void **)(a1 + 48) != off_1007A930 )
      sub_1002D7BC(*(LPVOID *)(a1 + 48));
    if ( *(void **)(a1 + 52) != off_1007A934 )
      sub_1002D7BC(*(LPVOID *)(a1 + 52));
  }
}
// 1007A900: using guessed type void *off_1007A900;
// 1007A904: using guessed type void *off_1007A904;
// 1007A908: using guessed type void *off_1007A908;
// 1007A930: using guessed type void *off_1007A930;
// 1007A934: using guessed type void *off_1007A934;

//----- (100382C1) --------------------------------------------------------
void __cdecl sub_100382C1(LPVOID *a1, int a2)
{
  LPVOID *v2; // esi@1
  int v3; // edi@1
  unsigned int v4; // ebx@1

  v2 = a1;
  v3 = 0;
  v4 = &a1[a2] >= a1 ? (unsigned int)(4 * a2 + 3) >> 2 : 0;
  if ( v4 )
  {
    do
    {
      sub_1002D7BC(*v2);
      ++v3;
      ++v2;
    }
    while ( v3 != v4 );
  }
}

//----- (100382FD) --------------------------------------------------------
void __cdecl sub_100382FD(int a1)
{
  if ( a1 )
  {
    sub_100382C1((LPVOID *)a1, 7);
    sub_100382C1((LPVOID *)(a1 + 28), 7);
    sub_100382C1((LPVOID *)(a1 + 56), 12);
    sub_100382C1((LPVOID *)(a1 + 104), 12);
    sub_100382C1((LPVOID *)(a1 + 152), 2);
    sub_1002D7BC(*(LPVOID *)(a1 + 160));
    sub_1002D7BC(*(LPVOID *)(a1 + 164));
    sub_1002D7BC(*(LPVOID *)(a1 + 168));
    sub_100382C1((LPVOID *)(a1 + 180), 7);
    sub_100382C1((LPVOID *)(a1 + 208), 7);
    sub_100382C1((LPVOID *)(a1 + 236), 12);
    sub_100382C1((LPVOID *)(a1 + 284), 12);
    sub_100382C1((LPVOID *)(a1 + 332), 2);
    sub_1002D7BC(*(LPVOID *)(a1 + 340));
    sub_1002D7BC(*(LPVOID *)(a1 + 344));
    sub_1002D7BC(*(LPVOID *)(a1 + 348));
    sub_1002D7BC(*(LPVOID *)(a1 + 352));
  }
}

//----- (100383E1) --------------------------------------------------------
BOOL __usercall sub_100383E1@<eax>(int a1@<ebx>, int a2, DWORD dwInfoType, LPCSTR lpMultiByteStr, int cbMultiByte, LPWORD lpCharType, UINT CodePage, int a8)
{
  UINT v8; // ecx@1
  BOOL v9; // edi@3
  int v10; // eax@3
  unsigned int v11; // ebx@4
  void *v12; // ecx@5
  int v13; // esi@6
  LPVOID v14; // eax@8
  int v15; // eax@13
  signed int v17; // [sp+0h] [bp-24h]@6
  int v18; // [sp+Ch] [bp-18h]@1
  int v19; // [sp+10h] [bp-14h]@2
  char v20; // [sp+18h] [bp-Ch]@16
  int cchWideChar; // [sp+1Ch] [bp-8h]@3

  sub_10029BD2((int)&v18, a1, a2);
  v8 = CodePage;
  if ( !CodePage )
  {
    v8 = *(_DWORD *)(v19 + 8);
    CodePage = *(_DWORD *)(v19 + 8);
  }
  v9 = 0;
  v10 = MultiByteToWideChar(v8, 8 * (a8 != 0) + 1, lpMultiByteStr, cbMultiByte, 0, 0);
  cchWideChar = v10;
  if ( v10 )
  {
    v11 = 2 * v10;
    if ( !(2 * v10 < (unsigned int)(2 * v10 + 8) ? 2 * v10 + 8 : 0) )
    {
      v13 = 0;
      goto LABEL_12;
    }
    v12 = (void *)(v11 + 8);
    if ( (v11 < v11 + 8 ? v11 + 8 : 0) > 0x400 )
    {
      v14 = sub_1002ED94(v11 < (unsigned int)v12 ? (unsigned int)v12 : 0);
      v13 = (int)v14;
      if ( v14 )
      {
        *(_DWORD *)v14 = 56797;
        goto LABEL_10;
      }
    }
    else
    {
      sub_1003B2A0(v12);
      v13 = (int)&v17;
      if ( &v17 )
      {
        v17 = 52428;
LABEL_10:
        v13 += 8;
LABEL_12:
        if ( v13 )
        {
          sub_10028330((void *)v13, 0, v11);
          v15 = MultiByteToWideChar(CodePage, 1u, lpMultiByteStr, cbMultiByte, (LPWSTR)v13, cchWideChar);
          if ( v15 )
            v9 = GetStringTypeW(dwInfoType, (LPCWSTR)v13, v15, lpCharType);
        }
        goto LABEL_15;
      }
    }
LABEL_15:
    sub_10033212(v13);
  }
  if ( v20 )
    *(_DWORD *)(v18 + 848) &= 0xFFFFFFFD;
  return v9;
}

//----- (100384FE) --------------------------------------------------------
int __cdecl sub_100384FE(int a1)
{
  int v1; // edi@1
  int v2; // ebx@1
  unsigned __int16 *v3; // esi@2
  int v4; // ecx@2
  unsigned __int16 v5; // ax@3
  unsigned __int16 v6; // dx@5
  unsigned __int16 v7; // ax@7
  int v8; // edx@13
  int v10; // [sp+Ch] [bp-10h]@2
  int v11; // [sp+10h] [bp-Ch]@1
  int v12; // [sp+14h] [bp-8h]@1
  signed int v13; // [sp+18h] [bp-4h]@2

  v1 = 0;
  v2 = 227;
  v11 = 0;
  v12 = 227;
  while ( 1 )
  {
    v13 = 85;
    v10 = (v2 + v1) / 2;
    v3 = (unsigned __int16 *)*(&off_1006ACD0 + 2 * v10);
    v4 = a1 - (_DWORD)*(&off_1006ACD0 + 2 * v10);
    do
    {
      v5 = *(unsigned __int16 *)((char *)v3 + v4);
      if ( v5 < 0x41u || v5 > 0x5Au )
        v6 = *(unsigned __int16 *)((char *)v3 + v4);
      else
        v6 = v5 + 32;
      v7 = *v3;
      if ( *v3 >= 0x41u && v7 <= 0x5Au )
        v7 += 32;
      ++v3;
      --v13;
    }
    while ( v13 && v6 && v6 == v7 );
    v1 = v11;
    v2 = v12;
    v8 = v6 - v7;
    if ( !v8 )
      break;
    if ( v8 >= 0 )
    {
      v1 = v10 + 1;
      v11 = v10 + 1;
    }
    else
    {
      v2 = v10 - 1;
      v12 = v10 - 1;
    }
    if ( v1 > v2 )
      return -1;
  }
  return dword_1006ACD4[2 * v10];
}
// 1006ACD0: using guessed type void *off_1006ACD0;
// 1006ACD4: using guessed type int dword_1006ACD4[];

//----- (100385BA) --------------------------------------------------------
int __cdecl sub_100385BA(int a1)
{
  int v1; // eax@2
  int result; // eax@4

  if ( a1 && (v1 = sub_100384FE(a1), v1 >= 0) && (unsigned int)v1 < 0xE4 )
    result = dword_10069BB8[2 * v1];
  else
    result = 0;
  return result;
}
// 10069BB8: using guessed type int dword_10069BB8[];

//----- (100385E6) --------------------------------------------------------
int __cdecl sub_100385E6(int a1, DWORD dwMapFlags, LPCWSTR lpSrcStr, int cchSrc, LPWSTR lpDestStr, int cchDest)
{
  int v6; // esi@1
  int v7; // eax@2

  v6 = cchSrc;
  if ( cchSrc > 0 )
  {
    v7 = sub_1003061B((int)lpSrcStr, cchSrc);
    v6 = v7 + 1;
    if ( v7 >= cchSrc )
      v6 = v7;
  }
  return sub_10032B28(a1, dwMapFlags, lpSrcStr, v6, lpDestStr, cchDest, 0, 0, 0);
}

//----- (10038624) --------------------------------------------------------
int __cdecl sub_10038624(int a1, int a2)
{
  int result; // eax@1

  result = 0;
  if ( *(_BYTE *)a1 )
  {
    do
    {
      if ( result == a2 )
        break;
      ++result;
    }
    while ( *(_BYTE *)(result + a1) );
  }
  return result;
}

//----- (10038640) --------------------------------------------------------
void __cdecl sub_10038640(unsigned int a1, unsigned int a2, int a3, int (__cdecl *a4)(_DWORD, _DWORD))
{
  unsigned int v4; // ecx@1
  unsigned int v5; // ebx@1
  int v6; // eax@2
  int v7; // edx@2
  int v8; // esi@3
  int v9; // edi@3
  int v10; // esi@8
  unsigned int v11; // edx@8
  int v12; // edi@10
  char v13; // al@11
  char v14; // cl@11

  v4 = a1;
  v5 = a2;
  if ( a2 > a1 )
  {
    v6 = a3;
    v7 = a1 + a3;
    do
    {
      v8 = v7;
      v9 = v4;
      if ( v7 <= v5 )
      {
        do
        {
          __guard_check_icall_fptr(a4);
          if ( a4(v8, v9) > 0 )
            v9 = v8;
          v6 = a3;
          v8 += a3;
        }
        while ( v8 <= v5 );
        v4 = a1;
      }
      v10 = v6;
      v11 = v5;
      if ( v9 != v5 && v6 )
      {
        v12 = v9 - v5;
        do
        {
          v13 = *(_BYTE *)v11++;
          v14 = *(_BYTE *)(v12 + v11 - 1);
          *(_BYTE *)(v12 + v11 - 1) = v13;
          *(_BYTE *)(v11 - 1) = v14;
          --v10;
        }
        while ( v10 );
        v6 = a3;
        v4 = a1;
      }
      v5 -= v6;
      v7 = v4 + v6;
    }
    while ( v5 > v4 );
  }
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);

//----- (100386E0) --------------------------------------------------------
int __cdecl sub_100386E0(int a1, int a2, int a3)
{
  int result; // eax@1
  int v4; // esi@2
  int v5; // edi@3
  char v6; // cl@4
  char v7; // dl@4

  result = a2;
  if ( a1 != a2 )
  {
    v4 = a3;
    if ( a3 )
    {
      v5 = a1 - a2;
      do
      {
        v6 = *(_BYTE *)result++;
        v7 = *(_BYTE *)(v5 + result - 1);
        *(_BYTE *)(v5 + result - 1) = v6;
        *(_BYTE *)(result - 1) = v7;
        --v4;
      }
      while ( v4 );
    }
  }
  return result;
}

//----- (10038720) --------------------------------------------------------
void __usercall sub_10038720(int a1@<ebx>, unsigned int a2, unsigned int a3, int a4, int (__cdecl *a5)(_DWORD, _DWORD))
{
  unsigned int v5; // ecx@1
  int (__cdecl *v6)(_DWORD, _DWORD); // esi@1
  int v7; // edi@1
  int v8; // edx@7
  unsigned int v9; // ebx@9
  int v10; // ebx@11
  unsigned int v11; // ST08_4@11
  int v12; // eax@17
  int v13; // edi@17
  int v14; // esi@17
  int v15; // edx@17
  int v16; // eax@20
  int v17; // eax@24
  bool v18; // zf@24
  bool v19; // sf@24
  int v20; // edx@31
  int v21; // esi@31
  int v22; // ebx@31
  char v23; // al@32
  char v24; // cl@32
  int v25; // edi@36
  int v26; // eax@38
  int v27; // eax@41
  int v28; // eax@54
  int v29; // [sp+Ch] [bp-118h]@30
  int v30; // [sp+10h] [bp-114h]@17
  int v31; // [sp+14h] [bp-110h]@11
  int v32; // [sp+18h] [bp-10Ch]@19
  int v33; // [sp+1Ch] [bp-108h]@6
  int v34; // [sp+20h] [bp-104h]@1
  int v35; // [sp+2Ch] [bp-F8h]@8
  int v36[30]; // [sp+30h] [bp-F4h]@45
  int v37[30]; // [sp+A8h] [bp-7Ch]@45

  v5 = a2;
  v34 = a2;
  v6 = a5;
  v7 = a4;
  if ( (a2 || !a3) && a4 && a5 )
  {
    v33 = 0;
    if ( a3 >= 2 )
    {
      v8 = a2 + a4 * (a3 - 1);
      while ( 1 )
      {
        v35 = v8;
        while ( 1 )
        {
          v9 = (v8 - v5) / v7 + 1;
          if ( v9 <= 8 )
          {
            sub_10038640(v5, v35, v7, v6);
            goto LABEL_54;
          }
          v10 = v5 + v7 * (v9 >> 1);
          v11 = v5;
          v31 = v10;
          __guard_check_icall_fptr(v6);
          if ( v6(v11, v10) > 0 )
            sub_100386E0(v34, v10, v7);
          __guard_check_icall_fptr(v6);
          if ( v6(v34, v35) > 0 )
            sub_100386E0(v34, v35, v7);
          __guard_check_icall_fptr(v6);
          if ( v6(v10, v35) > 0 )
            sub_100386E0(v10, v35, v7);
          v12 = v35;
          v13 = v35;
          v14 = v34;
          v15 = a4;
          v30 = v35;
          while ( 1 )
          {
            if ( v10 > (unsigned int)v14 )
            {
              while ( 1 )
              {
                v14 += v15;
                v32 = v14;
                if ( v14 >= (unsigned int)v10 )
                  break;
                __guard_check_icall_fptr(a5);
                v16 = a5(v14, v10);
                v15 = a4;
                if ( v16 > 0 )
                {
                  if ( v10 > (unsigned int)v14 )
                    goto LABEL_26;
                  break;
                }
              }
              v12 = v35;
            }
            do
            {
              v14 += v15;
              if ( v14 > (unsigned int)v12 )
                break;
              __guard_check_icall_fptr(a5);
              v17 = a5(v14, v10);
              v15 = a4;
              v18 = v17 == 0;
              v19 = v17 < 0;
              v12 = v35;
            }
            while ( v19 || v18 );
            v13 = v30;
            v32 = v14;
LABEL_26:
            while ( 1 )
            {
              v15 = a4;
              v13 -= a4;
              if ( v13 <= (unsigned int)v10 )
                break;
              __guard_check_icall_fptr(a5);
              if ( a5(v13, v10) <= 0 )
              {
                v15 = a4;
                break;
              }
            }
            v14 = v32;
            v30 = v13;
            if ( v13 < (unsigned int)v32 )
              break;
            v29 = v15;
            if ( v32 != v13 )
            {
              v20 = v13;
              v21 = v29;
              v22 = v32 - v13;
              do
              {
                v23 = *(_BYTE *)v20++;
                v24 = *(_BYTE *)(v22 + v20 - 1);
                *(_BYTE *)(v22 + v20 - 1) = v23;
                *(_BYTE *)(v20 - 1) = v24;
                --v21;
              }
              while ( v21 );
              v14 = v32;
              v10 = v31;
              v15 = a4;
            }
            v12 = v35;
            if ( v10 == v13 )
            {
              v10 = v14;
              v31 = v14;
            }
          }
          v25 = v15 + v13;
          if ( v10 < (unsigned int)v25 )
          {
            while ( 1 )
            {
              v25 -= v15;
              if ( v25 <= (unsigned int)v10 )
                break;
              __guard_check_icall_fptr(a5);
              v26 = a5(v25, v10);
              v15 = a4;
              if ( v26 )
              {
                if ( v10 < (unsigned int)v25 )
                  goto LABEL_43;
                goto LABEL_40;
              }
            }
          }
          do
          {
LABEL_40:
            v25 -= v15;
            if ( v25 <= (unsigned int)v34 )
              break;
            __guard_check_icall_fptr(a5);
            v27 = a5(v25, v10);
            v15 = a4;
          }
          while ( !v27 );
          v14 = v32;
LABEL_43:
          v8 = v35;
          if ( v25 - v34 < v35 - v14 )
            break;
          if ( v34 < (unsigned int)v25 )
          {
            v36[v33] = v34;
            v37[v33++] = v25;
          }
          v7 = a4;
          if ( v14 >= (unsigned int)v35 )
          {
            v6 = a5;
            goto LABEL_54;
          }
          v5 = v14;
          v6 = a5;
          v34 = v5;
        }
        if ( v14 < (unsigned int)v35 )
        {
          v36[v33] = v14;
          v37[v33++] = v35;
        }
        v5 = v34;
        v6 = a5;
        if ( v34 < (unsigned int)v25 )
        {
          v8 = v25;
          v7 = a4;
          continue;
        }
        v7 = a4;
LABEL_54:
        v28 = v33-- - 1;
        if ( v33 < 0 )
          break;
        v5 = v36[v28];
        v8 = v37[v28];
        v34 = v36[v28];
      }
    }
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a4);
  }
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);
// 10038720: using guessed type int var_F4[30];
// 10038720: using guessed type int var_7C[30];

//----- (10038ABA) --------------------------------------------------------
signed int __usercall sub_10038ABA@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5, int a6)
{
  int v6; // edx@1
  int v8; // eax@11
  int v9; // esi@14
  int v10; // ebx@14
  int v11; // edi@14
  char v12; // al@15
  char v13; // al@18
  bool v14; // zf@21
  int v15; // [sp-8h] [bp-10h]@14
  signed int v16; // [sp-4h] [bp-Ch]@11
  int v17; // [sp-4h] [bp-Ch]@14

  v6 = a6;
  if ( a6 )
  {
    if ( !a3 )
    {
LABEL_11:
      v8 = sub_1002E9D5();
      v16 = 22;
LABEL_12:
      *(_DWORD *)v8 = v16;
      sub_1002B787(a1, a2);
      return v16;
    }
  }
  else if ( !a3 )
  {
    if ( !a4 )
      return 0;
    goto LABEL_11;
  }
  if ( !a4 )
    goto LABEL_11;
  if ( !a6 )
  {
    *(_BYTE *)a3 = 0;
    return 0;
  }
  if ( !a5 )
  {
    *(_BYTE *)a3 = 0;
    goto LABEL_11;
  }
  v17 = a1;
  v9 = a5 - a3;
  v10 = a4;
  v15 = a2;
  v11 = a3;
  if ( a6 == -1 )
  {
    do
    {
      v12 = *(_BYTE *)(v9 + v11);
      *(_BYTE *)v11++ = v12;
      if ( !v12 )
        break;
      --v10;
    }
    while ( v10 );
  }
  else
  {
    do
    {
      v13 = *(_BYTE *)(v9 + v11);
      *(_BYTE *)v11++ = v13;
      if ( !v13 )
        break;
      --v10;
      if ( !v10 )
        break;
      --v6;
    }
    while ( v6 );
    v14 = v6 == 0;
    v6 = a6;
    if ( v14 )
      *(_BYTE *)v11 = 0;
  }
  a2 = v15;
  v14 = v10 == 0;
  a1 = v17;
  if ( !v14 )
    return 0;
  if ( v6 != -1 )
  {
    *(_BYTE *)a3 = 0;
    v8 = sub_1002E9D5();
    v16 = 34;
    goto LABEL_12;
  }
  *(_BYTE *)(a3 + a4 - 1) = 0;
  return 80;
}

//----- (10038B6B) --------------------------------------------------------
signed int __usercall sub_10038B6B@<eax>(int a1@<ebx>, int a2@<edi>, int a3, int a4, int a5, int a6)
{
  return sub_10038ABA(a1, a2, a3, a4, a5, a6);
}

//----- (10038B80) --------------------------------------------------------
char __cdecl sub_10038B80(int a1, int a2)
{
  unsigned int v2; // eax@1
  int v3; // edx@1
  int v4; // esi@4
  int v6; // [sp+0h] [bp-24h]@1
  int v7; // [sp+4h] [bp-20h]@1
  int v8; // [sp+8h] [bp-1Ch]@1
  int v9; // [sp+Ch] [bp-18h]@1
  int v10; // [sp+10h] [bp-14h]@1
  int v11; // [sp+14h] [bp-10h]@1
  int v12; // [sp+18h] [bp-Ch]@1
  int v13; // [sp+1Ch] [bp-8h]@1

  v2 = 0;
  v13 = 0;
  v12 = 0;
  v11 = 0;
  v10 = 0;
  v9 = 0;
  v8 = 0;
  v7 = 0;
  v6 = 0;
  v3 = a2;
  while ( 1 )
  {
    LOBYTE(v2) = *(_BYTE *)v3;
    if ( !*(_BYTE *)v3 )
      break;
    ++v3;
    _bittestandset((signed __int32 *)&v6, v2);
  }
  v4 = a1;
  while ( 1 )
  {
    LOBYTE(v2) = *(_BYTE *)v4;
    if ( !*(_BYTE *)v4 )
      break;
    ++v4;
    if ( _bittest((const signed __int32 *)&v6, v2) )
    {
      LOBYTE(v2) = v4 - 1;
      return v2;
    }
  }
  return v2;
}

//----- (10038BC0) --------------------------------------------------------
int __usercall sub_10038BC0@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3, int a4)
{
  return sub_10038BD7(a1, a2, a3, a4, 0);
}

//----- (10038BD7) --------------------------------------------------------
int __usercall sub_10038BD7@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3, int a4, int a5)
{
  int v6; // esi@3
  int v7; // ecx@8
  int v8; // esi@12
  int v9; // [sp+0h] [bp-10h]@7
  int v10; // [sp+8h] [bp-8h]@7
  char v11; // [sp+Ch] [bp-4h]@12

  if ( !a3 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return 0;
  }
  v6 = a4;
  if ( !a4 )
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    return 0;
  }
  if ( a3 >= a4 )
    return 0;
  sub_10029BD2((int)&v9, a1, a5);
  if ( *(_DWORD *)(v10 + 8) )
  {
    v7 = a4 - 1;
    do
      --v7;
    while ( a3 <= v7 && *(_BYTE *)(*(_BYTE *)v7 + v10 + 25) & 4 );
    v6 = a4 - (((_BYTE)a4 - (_BYTE)v7) & 1);
  }
  v8 = v6 - 1;
  if ( v11 )
    *(_DWORD *)(v9 + 848) &= 0xFFFFFFFD;
  return v8;
}

//----- (10038C64) --------------------------------------------------------
BOOL __usercall sub_10038C64@<eax>(int a1@<ebx>)
{
  return sub_100340F8(a1) == 0;
}

//----- (10038C73) --------------------------------------------------------
int __cdecl sub_10038C73(int a1, int a2, int a3, signed int a4)
{
  void *v4; // edi@2
  int result; // eax@11
  int v6; // esi@13
  double v7; // st7@26
  int v8; // [sp+8h] [bp-24h]@13
  char v9[4]; // [sp+Ch] [bp-20h]@12
  double v10; // [sp+10h] [bp-1Ch]@13
  double v11; // [sp+18h] [bp-14h]@13
  double v12; // [sp+20h] [bp-Ch]@13

  if ( dword_1007CCE0 )
    v4 = DecodePointer(Ptr);
  else
    v4 = sub_1003466B;
  if ( a4 <= 26 )
  {
    if ( a4 != 26 )
    {
      if ( a4 <= 14 )
      {
        if ( a4 == 14 )
        {
          v8 = 3;
          *(_DWORD *)v9 = "exp";
          goto LABEL_42;
        }
        if ( a4 == 2 )
        {
          v8 = 2;
          *(_DWORD *)v9 = "log";
          goto LABEL_42;
        }
        if ( a4 != 3 )
        {
          if ( a4 != 8 )
          {
            result = a4 - 9;
            if ( a4 != 9 )
              return result;
            *(_DWORD *)v9 = "log10";
            goto LABEL_13;
          }
          v8 = 2;
          *(_DWORD *)v9 = "log10";
LABEL_42:
          v6 = a3;
          v10 = *(double *)a1;
          v11 = *(double *)a2;
          v12 = *(double *)a3;
          __guard_check_icall_fptr(v4);
          result = ((int (__cdecl *)(int *))v4)(&v8);
          if ( !result )
          {
            result = sub_1002E9D5();
            *(_DWORD *)result = 34;
          }
          goto LABEL_44;
        }
        *(_DWORD *)v9 = "log";
LABEL_13:
        v6 = a3;
        v8 = 1;
        v10 = *(double *)a1;
        v11 = *(double *)a2;
        v12 = *(double *)a3;
        __guard_check_icall_fptr(v4);
        result = ((int (__cdecl *)(int *))v4)(&v8);
        if ( !result )
        {
          result = sub_1002E9D5();
          *(_DWORD *)result = 33;
        }
        goto LABEL_44;
      }
      if ( a4 == 15 )
      {
        *(_DWORD *)v9 = "exp";
LABEL_23:
        v6 = a3;
        v8 = 4;
        v10 = *(double *)a1;
        v11 = *(double *)a2;
        v12 = *(double *)a3;
        __guard_check_icall_fptr(v4);
        result = ((int (__cdecl *)(_DWORD))v4)(&v8);
LABEL_44:
        *(double *)v6 = v12;
        return result;
      }
      if ( a4 != 24 )
      {
        result = a4 - 25;
        if ( a4 != 25 )
          return result;
        *(_DWORD *)v9 = "pow";
        goto LABEL_23;
      }
      v8 = 3;
LABEL_41:
      *(_DWORD *)v9 = "pow";
      goto LABEL_42;
    }
    v7 = 1.0;
LABEL_27:
    result = a3;
    *(double *)a3 = v7;
    return result;
  }
  if ( a4 == 27 )
  {
    v8 = 2;
    goto LABEL_41;
  }
  if ( a4 == 28 )
  {
    *(_DWORD *)v9 = "pow";
    goto LABEL_13;
  }
  if ( a4 == 49 )
  {
    *(_DWORD *)v9 = "sqrt";
    goto LABEL_13;
  }
  if ( a4 == 58 )
  {
    *(_DWORD *)v9 = "acos";
    goto LABEL_13;
  }
  if ( a4 == 61 )
  {
    *(_DWORD *)v9 = "asin";
    goto LABEL_13;
  }
  if ( a4 == 1000 || (result = a4 - 1001, a4 == 1001) )
  {
    v7 = *(double *)a1;
    goto LABEL_27;
  }
  return result;
}
// 1006524C: using guessed type int (__thiscall *__guard_check_icall_fptr)(_DWORD);
// 1007CCE0: using guessed type int dword_1007CCE0;

//----- (10038E8B) --------------------------------------------------------
int __cdecl sub_10038E8B(double a1)
{
  int result; // eax@4

  if ( sub_10039793(a1) & 0x90 || a1 != sub_1003977D(a1) )
  {
    result = 0;
  }
  else if ( a1 * 0.5 == sub_1003977D(a1 * 0.5) )
  {
    result = 2;
  }
  else
  {
    result = 1;
  }
  return result;
}

//----- (10038EF5) --------------------------------------------------------
int __cdecl sub_10038EF5(double a1, double a2, int a3)
{
  long double v3; // st7@1
  double v4; // st7@4
  bool v5; // c0@5
  bool v6; // c3@5
  int v7; // eax@5
  bool v8; // c0@10
  bool v9; // c3@10
  int v10; // eax@18

  v3 = fabs(a1);
  if ( HIDWORD(a2) == 2146435072 )
  {
    if ( !LODWORD(a2) )
    {
      if ( v3 <= 1.0 )
      {
        v5 = 1.0 < v3;
        v6 = 1.0 == v3;
        v4 = 1.0;
        v7 = a3;
        if ( !v5 && !v6 )
          v4 = 0.0;
        goto LABEL_26;
      }
      goto LABEL_4;
    }
  }
  else if ( a2 == -1.797693134862316e308/*-Inf*/ )
  {
    if ( v3 <= 1.0 )
    {
      v8 = 1.0 < v3;
      v9 = 1.0 == v3;
      v4 = 1.0;
      v7 = a3;
      if ( !v8 && !v9 )
        v4 = 1.797693134862316e308/*+Inf*/;
      goto LABEL_26;
    }
    v4 = 0.0;
    goto LABEL_25;
  }
  if ( HIDWORD(a1) == 2146435072 )
  {
    if ( !LODWORD(a1) )
    {
      v4 = 0.0;
      if ( a2 <= 0.0 )
      {
        v7 = a3;
        if ( a2 >= 0.0 )
          v4 = 1.0;
        goto LABEL_26;
      }
LABEL_4:
      v4 = 1.797693134862316e308/*+Inf*/;
LABEL_25:
      v7 = a3;
LABEL_26:
      *(double *)v7 = v4;
      return 0;
    }
  }
  else if ( a1 == -1.797693134862316e308/*-Inf*/ )
  {
    v10 = sub_10038E8B(a2);
    v4 = 0.0;
    if ( a2 <= 0.0 )
    {
      if ( a2 >= 0.0 )
      {
        v4 = 1.0;
      }
      else if ( v10 == 1 )
      {
        v4 = dbl_1006C0D8;
      }
    }
    else
    {
      v4 = 1.797693134862316e308/*+Inf*/;
      if ( v10 == 1 )
        v4 = -1.797693134862316e308/*+Inf*/;
    }
    goto LABEL_25;
  }
  return 0;
}
// 1006C0D8: using guessed type double dbl_1006C0D8;

//----- (10039020) --------------------------------------------------------
int __usercall sub_10039020@<eax>(int a1@<ebp>, int a2, int a3, __int16 *a4)
{
  __int16 v4; // cx@1
  int v5; // edi@12
  __int16 v6; // fps@12
  signed int v11; // [sp-98h] [bp-A0h]@7
  int v12; // [sp-88h] [bp-90h]@1
  int v13; // [sp-84h] [bp-8Ch]@18
  double v14; // [sp-54h] [bp-5Ch]@17
  unsigned int v15; // [sp-44h] [bp-4Ch]@16
  unsigned int v16; // [sp-8h] [bp-10h]@1
  int v17; // [sp-4h] [bp-Ch]@1
  int v18; // [sp+0h] [bp-8h]@1
  int retaddr; // [sp+8h] [bp+0h]@1

  v17 = a1;
  v18 = retaddr;
  v16 = (unsigned int)&v17 ^ __security_cookie;
  v4 = *a4;
  v12 = (unsigned __int16)*a4;
  if ( *(_DWORD *)a3 == 1 )
    goto LABEL_26;
  if ( *(_DWORD *)a3 == 2 )
  {
    v11 = 4;
    goto LABEL_12;
  }
  if ( *(_DWORD *)a3 == 3 )
  {
    v11 = 17;
    goto LABEL_12;
  }
  if ( *(_DWORD *)a3 == 4 )
  {
    v11 = 18;
    goto LABEL_12;
  }
  if ( *(_DWORD *)a3 == 5 )
  {
LABEL_26:
    v11 = 8;
  }
  else
  {
    if ( *(_DWORD *)a3 != 8 )
      goto LABEL_19;
    v11 = 16;
  }
LABEL_12:
  v5 = v11;
  if ( !sub_10039A9A(v11, (double *)(a3 + 24), v4) )
  {
    if ( a2 == 16 || a2 == 22 || a2 == 29 )
    {
      v14 = *(double *)(a3 + 16);
      v15 = v15 & 0xFFFFFFE3 | 3;
    }
    else
    {
      v15 &= 0xFFFFFFFE;
    }
    sub_10039C7A(v6, (ULONG_PTR)&v13, (int)&v12, v5, a2, a3 + 8, a3 + 24);
  }
LABEL_19:
  sub_1003A072();
  if ( *(_DWORD *)a3 == 8 || !(unsigned __int8)sub_1003463E() || !sub_1003466B(a3) )
    sub_10039F8E(*(_DWORD *)a3);
  return sub_1000FB0D((unsigned int)&v17 ^ v16);
}
// 10039020: could not find valid save-restore pair for ebp
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10039191) --------------------------------------------------------
signed int __usercall sub_10039191@<eax>(int a1@<ebx>, int a2@<edi>, int a3)
{
  signed int result; // eax@2

  if ( a3 )
  {
    *(_DWORD *)a3 = dword_1007CCEC;
    result = 0;
  }
  else
  {
    *(_DWORD *)sub_1002E9D5() = 22;
    sub_1002B787(a1, a2);
    result = 22;
  }
  return result;
}
// 1007CCEC: using guessed type int dword_1007CCEC;

//----- (100391BD) --------------------------------------------------------
signed int __cdecl sub_100391BD(signed int a1, int a2)
{
  signed int v2; // edi@1
  unsigned int v3; // edx@1
  int v4; // esi@1
  char v5; // al@1
  char v6; // bl@1
  signed int result; // eax@11
  int v8; // [sp+Ch] [bp-4h]@1

  v2 = a1 >> 6;
  v3 = 48 * (a1 & 0x3F);
  v4 = (int)*(&lpCriticalSection + (a1 >> 6));
  v5 = *(_BYTE *)(v4 + v3 + 40);
  v6 = *(_BYTE *)(v4 + v3 + 41);
  v8 = *(_BYTE *)(v4 + v3 + 40) & 0x80;
  switch ( a2 )
  {
    case 0x4000:
      *(_BYTE *)(v4 + v3 + 40) = v5 | 0x80;
      BYTE1((*(&lpCriticalSection + v2))[v3 / 0x18 + 1].LockSemaphore) = 0;
      break;
    case 0x8000:
      *(_BYTE *)(v4 + v3 + 40) = v5 & 0x7F;
      break;
    case 0x10000:
    case 0x20000:
      *(_BYTE *)(v4 + v3 + 40) = v5 | 0x80;
      BYTE1((*(&lpCriticalSection + v2))[v3 / 0x18 + 1].LockSemaphore) = 2;
      break;
    case 0x40000:
      *(_BYTE *)(v4 + v3 + 40) = v5 | 0x80;
      BYTE1((*(&lpCriticalSection + v2))[v3 / 0x18 + 1].LockSemaphore) = 1;
      break;
  }
  if ( v8 )
  {
    if ( v6 )
      result = v6 != 1 ? 0x10000 : 0x40000;
    else
      result = 0x4000;
  }
  else
  {
    result = 0x8000;
  }
  return result;
}

//----- (1003928E) --------------------------------------------------------
int __usercall sub_1003928E@<eax>(int a1@<ebx>, int a2, LARGE_INTEGER a3)
{
  LARGE_INTEGER v3; // rax@1
  __int64 v5; // rax@3
  unsigned int v6; // eax@4
  int v7; // ebx@4
  int v8; // kr00_4@4
  unsigned __int8 v9; // of@4
  LPVOID v10; // esi@7
  unsigned int v11; // eax@9
  int v12; // eax@13
  int v13; // eax@15
  int v14; // kr08_4@16
  DWORD v15; // eax@20
  int v16; // edx@20
  int v17; // edi@24
  DWORD v18; // eax@26
  int v19; // edx@26
  signed int v20; // eax@27
  int v21; // esi@28
  LARGE_INTEGER liDistanceToMove; // [sp+8h] [bp-10h]@1
  int v23; // [sp+10h] [bp-8h]@9
  unsigned int v24; // [sp+14h] [bp-4h]@4

  v3.LowPart = sub_10031CFD(a1, a2, a2, 0i64, 1u);
  liDistanceToMove = v3;
  if ( (v3.HighPart & v3.LowPart) == -1 )
    return *(_DWORD *)sub_1002E9D5();
  LODWORD(v5) = sub_10031CFD(a1, a2, a2, 0i64, 2u);
  if ( (HIDWORD(v5) & (unsigned int)v5) == -1 )
    return *(_DWORD *)sub_1002E9D5();
  v9 = __OFSUB__(a3.HighPart, (a3.LowPart < (unsigned int)v5) + HIDWORD(v5));
  v8 = a3.LowPart - v5;
  v6 = (unsigned __int64)(*(_QWORD *)&a3 - v5) >> 32;
  v7 = v8;
  v24 = v6;
  if ( (v6 & 0x80000000) != 0 || (unsigned __int8)(((v6 & 0x80000000) != 0) ^ v9) | (v6 == 0) && (unsigned int)v8 <= 0 )
  {
    if ( (v6 & 0x80000000) != 0 )
    {
      v18 = sub_10031CFD(v8, a2, a2, a3, 0);
      if ( (v19 & v18) == -1 )
        return *(_DWORD *)sub_1002E9D5();
      v20 = sub_100362EF(v8, a2, a2);
      if ( !SetEndOfFile((HANDLE)v20) )
      {
        *(_DWORD *)sub_1002E9D5() = 13;
        v21 = sub_1002E9C2();
        *(_DWORD *)v21 = GetLastError();
        return *(_DWORD *)sub_1002E9D5();
      }
    }
LABEL_20:
    v15 = sub_10031CFD(v7, a2, a2, liDistanceToMove, 0);
    if ( (v16 & v15) != -1 )
      return 0;
    return *(_DWORD *)sub_1002E9D5();
  }
  v10 = sub_1002D75F(0x1000u, 1u);
  if ( !v10 )
  {
    *(_DWORD *)sub_1002E9D5() = 12;
    goto LABEL_24;
  }
  v23 = sub_100391BD(a2, 0x8000);
  v11 = v24;
  while ( 1 )
  {
    if ( (v11 & 0x80000000) == 0 && ((signed int)v11 > 0 || (unsigned int)v7 >= 0x1000) )
    {
LABEL_13:
      v12 = 4096;
      goto LABEL_15;
    }
    v12 = v7;
LABEL_15:
    v13 = sub_1002FBAA(v7, a2, v10, v12);
    if ( v13 == -1 )
      break;
    v14 = v7 - v13;
    v11 = (__PAIR__(v24, v7) - v13) >> 32;
    v7 = v14;
    v24 = v11;
    if ( (signed int)v11 > 0 )
      goto LABEL_13;
    if ( (v11 & 0x80000000) != 0 || !v14 )
    {
      sub_100391BD(a2, v23);
      sub_1002D7BC(v10);
      goto LABEL_20;
    }
  }
  if ( *(_DWORD *)sub_1002E9C2() == 5 )
    *(_DWORD *)sub_1002E9D5() = 13;
LABEL_24:
  v17 = *(_DWORD *)sub_1002E9D5();
  sub_1002D7BC(v10);
  return v17;
}

//----- (1003941F) --------------------------------------------------------
int sub_1003941F()
{
  return dword_1007CCE8;
}
// 1007CCE8: using guessed type int dword_1007CCE8;

//----- (10039425) --------------------------------------------------------
HANDLE sub_10039425()
{
  HANDLE result; // eax@1

  result = CreateFileW(L"CONOUT$", 0x40000000u, 3u, 0, 3u, 0, 0);
  hConsoleOutput = result;
  return result;
}

//----- (10039444) --------------------------------------------------------
HANDLE sub_10039444()
{
  HANDLE result; // eax@1

  result = hConsoleOutput;
  if ( hConsoleOutput != (HANDLE)-1 && hConsoleOutput != (HANDLE)-2 )
    result = (HANDLE)CloseHandle(hConsoleOutput);
  return result;
}

//----- (1003945B) --------------------------------------------------------
int __cdecl sub_1003945B(int a1)
{
  char v1; // fps@1

  *(_DWORD *)a1 = sub_1003A3AE();
  *(_DWORD *)(a1 + 4) = sub_1003A3F1(v1);
  return 0;
}

//----- (10039478) --------------------------------------------------------
BOOL __cdecl sub_10039478(int a1)
{
  int v2; // [sp+4h] [bp-8h]@1
  int v3; // [sp+8h] [bp-4h]@1

  v2 = 0;
  v3 = 0;
  sub_1003A499(*(_DWORD *)a1);
  sub_1003A519(*(_DWORD *)(a1 + 4));
  sub_1003945B((int)&v2);
  return *(_DWORD *)a1 != v2 || *(_DWORD *)(a1 + 4) != v3;
}

//----- (100394C1) --------------------------------------------------------
signed int __cdecl sub_100394C1(int a1)
{
  signed int result; // eax@2
  int v2; // edx@3
  char v3; // fps@3
  int v4; // [sp+0h] [bp-8h]@1
  int v5; // [sp+4h] [bp-4h]@1

  v4 = 0;
  v5 = 0;
  if ( sub_1003945B((int)&v4)
    || (v2 = v4, *(_DWORD *)(a1 + 4) = v5, *(_DWORD *)a1 = v2, v4 = v2 | 0x1F, sub_10039478((int)&v4)) )
  {
    result = 1;
  }
  else
  {
    sub_1003A599(v3);
    result = 0;
  }
  return result;
}

//----- (10039550) --------------------------------------------------------
void __usercall sub_10039550(unsigned __int64 a1@<st0>)
{
  int v1; // eax@2
  bool v2; // zf@2
  int v3; // ST00_4@6
  int v4; // ST04_4@6
  char v5; // [sp+4h] [bp-8h]@0

  if ( !dword_1023992C )
    goto LABEL_9;
  v1 = _mm_getcsr() & 0x7F80;
  v2 = v1 == 8064;
  if ( v1 == 8064 )
    v2 = (v5 & 0x7F) == 127;
  if ( v2 )
  {
    sub_1003A680(a1);
  }
  else
  {
LABEL_9:
    sub_10035298(a1, a1 >> 32);
    sub_100395A8(v3, v4);
  }
}
// 100395A8: using guessed type _DWORD __cdecl sub_100395A8(_DWORD, _DWORD);
// 1023992C: using guessed type int dword_1023992C;

//----- (100395A8) --------------------------------------------------------
#error "10039659: call analysis failed (funcsize=48)"

//----- (10039660) --------------------------------------------------------
double __cdecl sub_10039660(double a1)
{
  int v1; // eax@1
  bool v2; // zf@1
  __m128i v3; // xmm0@3
  __m128i v4; // xmm1@3
  __m128d v5; // xmm0@3
  int v6; // eax@3
  __m128i v7; // xmm2@3
  __m128i v8; // xmm1@3
  __m128i v9; // xmm1@5
  double result; // st7@6
  __m128d v11; // xmm1@8
  __m128d v12; // xmm3@8
  __m128d v13; // xmm0@8
  char v14; // [sp+8h] [bp-8h]@0

  JUMPOUT(dword_1023992C, 0, sub_1003A910);
  v1 = _mm_getcsr() & 0x7F80;
  v2 = v1 == 8064;
  if ( v1 == 8064 )
    v2 = (v14 & 0x7F) == 127;
  JUMPOUT(!v2, sub_1003A910);
  v3 = _mm_loadl_epi64((const __m128i *)&a1);
  v4 = v3;
  v5 = (__m128d)_mm_srl_epi64(v3, 0x34u);
  v6 = _mm_cvtsi128_si32((__m128i)v5);
  v7 = _mm_sub_epi32((__m128i)xmmword_1006C090, (__m128i)_mm_and_pd(v5, (__m128d)xmmword_1006C0B0));
  v8 = _mm_srl_epi64(v4, v7);
  if ( v6 & 0x800 )
  {
    if ( v6 >= 3071 )
    {
      v9 = _mm_sll_epi64(v8, v7);
      if ( v6 <= 3122 )
      {
        _mm_storel_epi64((__m128i *)&a1, v9);
        return a1;
      }
      return a1;
    }
    result = dbl_1006C0C0;
  }
  else
  {
    v11 = (__m128d)_mm_sll_epi64(v8, v7);
    v12 = (__m128d)_mm_loadl_epi64((const __m128i *)&a1);
    v13 = _mm_cmpnle_pd(v12, v11);
    if ( v6 < 1023 )
    {
      _mm_storel_epi64(
        (__m128i *)&a1,
        (__m128i)_mm_and_pd(_mm_cmpnle_pd(v12, (__m128d)xmmword_1006C0A0), (__m128d)xmmword_1006C080));
      result = a1;
    }
    else
    {
      if ( v6 > 1074 )
        return a1;
      v11.m128d_f64[0] = v11.m128d_f64[0] + COERCE_DOUBLE(_mm_and_pd(v13, (__m128d)xmmword_1006C080));
      _mm_storel_epi64((__m128i *)&a1, (__m128i)v11);
      result = a1;
    }
  }
  return result;
}
// 1006C080: using guessed type __int128 xmmword_1006C080;
// 1006C090: using guessed type __int128 xmmword_1006C090;
// 1006C0A0: using guessed type __int128 xmmword_1006C0A0;
// 1006C0B0: using guessed type __int128 xmmword_1006C0B0;
// 1006C0C0: using guessed type double dbl_1006C0C0;
// 1023992C: using guessed type int dword_1023992C;

//----- (1003977D) --------------------------------------------------------
double __cdecl sub_1003977D(double a1)
{
  double result; // st7@1

  _ST7 = a1;
  __asm { frndint }
  return result;
}

//----- (10039793) --------------------------------------------------------
int __cdecl sub_10039793(double a1)
{
  int v1; // eax@2
  int v2; // eax@3
  int result; // eax@5
  int v4; // ecx@10
  signed int v5; // [sp+4h] [bp-4h]@6

  if ( (WORD3(a1) & 0x7FF0) == 32752 )
  {
    v1 = sub_1003993A(SLODWORD(a1), SHIDWORD(a1)) - 1;
    if ( v1 )
    {
      v2 = v1 - 1;
      if ( v2 )
      {
        if ( v2 != 1 )
          return 1;
        v5 = 2;
      }
      else
      {
        v5 = 4;
      }
      result = v5;
    }
    else
    {
      result = 512;
    }
  }
  else
  {
    v4 = WORD3(a1) & 0x8000;
    if ( !(WORD3(a1) & 0x7FF0) && (HIDWORD(a1) & 0xFFFFF || LODWORD(a1)) )
    {
      result = v4 != 0 ? 16 : 128;
    }
    else if ( 0.0 == a1 )
    {
      result = v4 != 0 ? 32 : 64;
    }
    else
    {
      result = v4 != 0 ? 8 : 256;
    }
  }
  return result;
}

//----- (10039837) --------------------------------------------------------
double __cdecl sub_10039837(double a1, int a2)
{
  double result; // st7@2
  unsigned int v3; // edi@2
  __int16 v4; // si@3
  int v5; // edx@4
  int v6; // ecx@4
  double v7; // kr08_8@4
  int v8; // eax@6
  __int16 v9; // si@11

  if ( 0.0 == a1 )
  {
    result = 0.0;
    v3 = 0;
  }
  else
  {
    v4 = WORD3(a1);
    if ( !(WORD3(a1) & 0x7FF0)
      && ((v7 = a1, v6 = *(unsigned __int64 *)&v7 >> 32, v5 = *(unsigned __int64 *)&v7, HIDWORD(a1) & 0xFFFFF)
       || LODWORD(a1)) )
    {
      v3 = -1021;
      v8 = a1 < 0.0;
      if ( !(BYTE6(a1) & 0x10) )
      {
        do
        {
          v6 *= 2;
          HIDWORD(a1) = v6;
          if ( v5 < 0 )
          {
            v6 |= 1u;
            HIDWORD(a1) = v6;
          }
          v5 *= 2;
          --v3;
        }
        while ( !(BYTE6(a1) & 0x10) );
        v4 = WORD3(a1);
        LODWORD(a1) = v5;
      }
      v9 = v4 & 0xFFEF;
      WORD3(a1) = v9;
      if ( v8 )
        WORD3(a1) = v9 | 0x8000;
      result = sub_1003990B(a1, 0);
    }
    else
    {
      result = sub_1003990B(a1, 0);
      v3 = (((unsigned int)WORD3(a1) >> 4) & 0x7FF) - 1022;
    }
  }
  *(_DWORD *)a2 = v3;
  return result;
}

//----- (1003990B) --------------------------------------------------------
double __cdecl sub_1003990B(double a1, __int16 a2)
{
  double v2; // ST00_8@1

  v2 = a1;
  WORD3(v2) = WORD3(a1) & 0x800F | 16 * (a2 + 1022);
  return v2;
}

//----- (1003993A) --------------------------------------------------------
signed int __cdecl sub_1003993A(int a1, int a2)
{
  if ( a2 == 2146435072 )
  {
    if ( !a1 )
      return 1;
  }
  else if ( a2 == -1048576 && !a1 )
  {
    return 2;
  }
  if ( (HIWORD(a2) & 0x7FF8) == 32760 )
    return 3;
  if ( (HIWORD(a2) & 0x7FF8) == 32752 && (a2 & 0x7FFFF || a1) )
    return 4;
  return 0;
}

//----- (10039998) --------------------------------------------------------
int __cdecl sub_10039998(char a1)
{
  if ( a1 & 0x20 )
    return 5;
  if ( a1 & 8 )
    return 1;
  if ( a1 & 4 )
    return 2;
  if ( a1 & 1 )
    return 3;
  return 2 * (a1 & 2);
}

//----- (100399CC) --------------------------------------------------------
int __usercall sub_100399CC@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5, double a6, int a7, __int16 a8)
{
  __int16 v8; // fps@1
  int v12; // edi@3
  int v14; // [sp+2Ch] [bp-8Ch]@2
  int v15; // [sp+6Ch] [bp-4Ch]@2
  unsigned int v16; // [sp+A8h] [bp-10h]@1
  int v17; // [sp+ACh] [bp-Ch]@1
  int v18; // [sp+B0h] [bp-8h]@1
  int retaddr; // [sp+B8h] [bp+0h]@1

  v17 = a1;
  v18 = retaddr;
  v16 = (unsigned int)&v17 ^ __security_cookie;
  if ( !sub_10039A9A(a2, &a6, a8) )
  {
    v15 &= 0xFFFFFFFE;
    sub_10039C9D(v8, (ULONG_PTR)&v14, (int)&a8, a2, a3, (int)&a4, (int)&a6, 0);
  }
  v12 = sub_10039998(a2);
  if ( (unsigned __int8)sub_1003463E() && v12 )
  {
    sub_10039FBD(v12, a3, a4, a5, COERCE_UNSIGNED_INT64(0.0), COERCE_UNSIGNED_INT64(0.0) >> 32, a6);
  }
  else
  {
    sub_10039F8E(v12);
    sub_1003A072();
  }
  return sub_1000FB0D((unsigned int)&v17 ^ v16);
}
// 100399CC: could not find valid save-restore pair for ebp
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10039A9A) --------------------------------------------------------
BOOL __cdecl sub_10039A9A(unsigned __int8 a1, double *a2, __int16 a3)
{
  int v3; // esi@1
  int v4; // eax@8
  double *v5; // ecx@12
  double v6; // st7@12
  signed int v7; // edi@26
  double v8; // st7@29
  double v9; // st7@30
  signed int v10; // edx@31
  int v11; // ecx@34
  unsigned int v12; // eax@34
  double v14; // [sp+18h] [bp-10h]@29
  int v15; // [sp+24h] [bp-4h]@29

  v3 = a1 & 0x1F;
  if ( a1 & 8 && a3 & 1 )
  {
    sub_1003A09E();
    v3 &= 0xFFFFFFF7;
    goto LABEL_48;
  }
  if ( (unsigned __int8)a3 & a1 & 4 )
  {
    sub_1003A09E();
    v3 &= 0xFFFFFFFB;
    goto LABEL_48;
  }
  if ( a1 & 1 && a3 & 8 )
  {
    sub_1003A09E();
    v4 = a3 & 0xC00;
    if ( a3 & 0xC00 )
    {
      if ( v4 != 1024 )
      {
        if ( v4 != 2048 )
        {
          if ( v4 != 3072 )
          {
LABEL_23:
            v3 &= 0xFFFFFFFE;
            goto LABEL_48;
          }
          v5 = a2;
          v6 = 1.797693134862316e308;
          if ( *a2 <= 0.0 )
            goto LABEL_21;
LABEL_22:
          *v5 = v6;
          goto LABEL_23;
        }
        v5 = a2;
        if ( *a2 <= 0.0 )
        {
          v6 = 1.797693134862316e308;
LABEL_21:
          v6 = -v6;
          goto LABEL_22;
        }
LABEL_19:
        v6 = 1.797693134862316e308/*+Inf*/;
        goto LABEL_22;
      }
      v5 = a2;
      if ( *a2 > 0.0 )
      {
        v6 = 1.797693134862316e308;
        goto LABEL_22;
      }
    }
    else
    {
      v5 = a2;
      if ( *a2 > 0.0 )
        goto LABEL_19;
    }
    v6 = 1.797693134862316e308/*+Inf*/;
    goto LABEL_21;
  }
  if ( a1 & 2 && a3 & 0x10 )
  {
    v7 = 0;
    if ( a1 & 0x10 )
      v7 = 1;
    if ( 0.0 == *a2 )
    {
      v7 = 1;
    }
    else
    {
      v8 = sub_10039837(*a2, (int)&v15);
      v15 -= 1536;
      v14 = v8;
      if ( v15 >= -1074 )
      {
        v10 = 0;
        if ( v8 < 0.0 )
          v10 = 1;
        WORD3(v14) = BYTE6(v14) & 0xF | 0x10;
        if ( v15 < -1021 )
        {
          v11 = -1021 - v15;
          v12 = LODWORD(v14);
          do
          {
            if ( LOBYTE(v14) & 1 && !v7 )
              v7 = 1;
            v12 >>= 1;
            LODWORD(v14) = v12;
            if ( BYTE4(v14) & 1 )
            {
              v12 |= 0x80000000;
              LODWORD(v14) = v12;
            }
            HIDWORD(v14) >>= 1;
            --v11;
          }
          while ( v11 );
        }
        v9 = v14;
        if ( v10 )
          v9 = -v14;
      }
      else
      {
        v9 = v8 * 0.0;
        v7 = 1;
      }
      *a2 = v9;
    }
    if ( v7 )
      sub_1003A09E();
    v3 &= 0xFFFFFFFD;
  }
LABEL_48:
  if ( a1 & 0x10 && a3 & 0x20 )
  {
    sub_1003A09E();
    v3 &= 0xFFFFFFEF;
  }
  return v3 == 0;
}

//----- (10039C7A) --------------------------------------------------------
unsigned int __usercall sub_10039C7A@<eax>(__int16 a1@<fpstat>, ULONG_PTR Arguments, int a3, int a4, int a5, int a6, int a7)
{
  return sub_10039C9D(a1, Arguments, a3, a4, a5, a6, a7, 0);
}

//----- (10039C9D) --------------------------------------------------------
unsigned int __usercall sub_10039C9D@<eax>(__int16 a1@<fpstat>, ULONG_PTR Arguments, int a3, int a4, int a5, int a6, int a7, int a8)
{
  DWORD v8; // edi@1
  char v9; // cl@1
  int v10; // esi@11
  char v11; // al@11
  int v12; // eax@21
  ULONG_PTR v13; // ecx@26
  unsigned int v14; // eax@26
  int v15; // eax@30
  ULONG_PTR v16; // ecx@34
  unsigned int v17; // eax@34
  int v18; // ebx@38
  __int16 v19; // fps@38
  ULONG_PTR v23; // ecx@40
  int v24; // eax@50
  int v25; // eax@51
  int v26; // eax@52
  unsigned int v27; // eax@55
  int v28; // eax@59
  int v29; // eax@60
  unsigned int result; // eax@61

  *(_DWORD *)(Arguments + 4) = 0;
  v8 = -1073741811;
  *(_DWORD *)(Arguments + 8) = 0;
  *(_DWORD *)(Arguments + 12) = 0;
  v9 = a4;
  if ( a4 & 0x10 )
  {
    v8 = -1073741681;
    *(_DWORD *)(Arguments + 4) |= 1u;
  }
  if ( v9 & 2 )
  {
    v8 = -1073741677;
    *(_DWORD *)(Arguments + 4) |= 2u;
  }
  if ( v9 & 1 )
  {
    v8 = -1073741679;
    *(_DWORD *)(Arguments + 4) |= 4u;
  }
  if ( v9 & 4 )
  {
    v8 = -1073741682;
    *(_DWORD *)(Arguments + 4) |= 8u;
  }
  if ( v9 & 8 )
  {
    v8 = -1073741680;
    *(_DWORD *)(Arguments + 4) |= 0x10u;
  }
  v10 = a3;
  *(_DWORD *)(Arguments + 8) ^= (*(_DWORD *)(Arguments + 8) ^ ~(16 * *(_DWORD *)a3)) & 0x10;
  *(_DWORD *)(Arguments + 8) ^= (*(_DWORD *)(Arguments + 8) ^ ~(2 * *(_DWORD *)v10)) & 8;
  *(_DWORD *)(Arguments + 8) ^= (*(_DWORD *)(Arguments + 8) ^ ~(*(_DWORD *)v10 >> 1)) & 4;
  *(_DWORD *)(Arguments + 8) ^= (*(_DWORD *)(Arguments + 8) ^ ~(*(_DWORD *)v10 >> 3)) & 2;
  *(_DWORD *)(Arguments + 8) ^= (*(_DWORD *)(Arguments + 8) ^ ~(*(_DWORD *)v10 >> 5)) & 1;
  v11 = sub_1003A0F9(a1);
  if ( v11 & 1 )
    *(_DWORD *)(Arguments + 12) |= 0x10u;
  if ( v11 & 4 )
    *(_DWORD *)(Arguments + 12) |= 8u;
  if ( v11 & 8 )
    *(_DWORD *)(Arguments + 12) |= 4u;
  if ( v11 & 0x10 )
    *(_DWORD *)(Arguments + 12) |= 2u;
  if ( v11 & 0x20 )
    *(_DWORD *)(Arguments + 12) |= 1u;
  v12 = *(_DWORD *)v10 & 0xC00;
  if ( !v12 )
  {
    *(_DWORD *)Arguments &= 0xFFFFFFFC;
    goto LABEL_30;
  }
  if ( v12 == 1024 )
  {
    v13 = Arguments;
    v14 = *(_DWORD *)Arguments & 0xFFFFFFFD | 1;
    goto LABEL_27;
  }
  if ( v12 == 2048 )
  {
    v13 = Arguments;
    v14 = *(_DWORD *)Arguments & 0xFFFFFFFE | 2;
LABEL_27:
    *(_DWORD *)v13 = v14;
    goto LABEL_30;
  }
  if ( v12 == 3072 )
    *(_DWORD *)Arguments |= 3u;
LABEL_30:
  v15 = *(_DWORD *)v10 & 0x300;
  if ( !v15 )
  {
    v16 = Arguments;
    v17 = *(_DWORD *)Arguments & 0xFFFFFFEB | 8;
    goto LABEL_36;
  }
  if ( v15 == 512 )
  {
    v16 = Arguments;
    v17 = *(_DWORD *)Arguments & 0xFFFFFFE7 | 4;
LABEL_36:
    *(_DWORD *)v16 = v17;
    goto LABEL_37;
  }
  if ( v15 == 768 )
    *(_DWORD *)Arguments &= 0xFFFFFFE3;
LABEL_37:
  *(_DWORD *)Arguments ^= (*(_DWORD *)Arguments ^ 32 * a5) & 0x1FFE0;
  *(_DWORD *)(Arguments + 32) |= 1u;
  if ( a8 )
  {
    *(_DWORD *)(Arguments + 32) &= 0xFFFFFFE1;
    *(float *)(Arguments + 16) = *(float *)a6;
    *(_DWORD *)(Arguments + 96) |= 1u;
    v18 = a7;
    *(_DWORD *)(Arguments + 96) &= 0xFFFFFFE1;
    *(float *)(Arguments + 80) = *(float *)v18;
  }
  else
  {
    *(_DWORD *)(Arguments + 32) = *(_DWORD *)(Arguments + 32) & 0xFFFFFFE3 | 2;
    *(double *)(Arguments + 16) = *(double *)a6;
    *(_DWORD *)(Arguments + 96) |= 1u;
    v18 = a7;
    *(_DWORD *)(Arguments + 96) = *(_DWORD *)(Arguments + 96) & 0xFFFFFFE3 | 2;
    *(double *)(Arguments + 80) = *(double *)v18;
  }
  sub_1003A05F(v19);
  RaiseException(v8, 0, 1u, &Arguments);
  v23 = Arguments;
  if ( *(_BYTE *)(Arguments + 8) & 0x10 )
    *(_DWORD *)v10 &= 0xFFFFFFFE;
  if ( *(_BYTE *)(v23 + 8) & 8 )
    *(_DWORD *)v10 &= 0xFFFFFFFB;
  if ( *(_BYTE *)(v23 + 8) & 4 )
    *(_DWORD *)v10 &= 0xFFFFFFF7;
  if ( *(_BYTE *)(v23 + 8) & 2 )
    *(_DWORD *)v10 &= 0xFFFFFFEF;
  if ( *(_BYTE *)(v23 + 8) & 1 )
    *(_DWORD *)v10 &= 0xFFFFFFDF;
  v24 = *(_DWORD *)v23 & 3;
  if ( !v24 )
  {
    *(_DWORD *)v10 &= 0xFFFFF3FF;
    goto LABEL_59;
  }
  v25 = v24 - 1;
  if ( !v25 )
  {
    v27 = *(_DWORD *)v10 & 0xFFFFF7FF | 0x400;
    goto LABEL_56;
  }
  v26 = v25 - 1;
  if ( !v26 )
  {
    v27 = *(_DWORD *)v10 & 0xFFFFFBFF | 0x800;
LABEL_56:
    *(_DWORD *)v10 = v27;
    goto LABEL_59;
  }
  if ( v26 == 1 )
    *(_DWORD *)v10 |= 0xC00u;
LABEL_59:
  v28 = (*(_DWORD *)v23 >> 2) & 7;
  if ( !v28 )
  {
    result = *(_DWORD *)v10 & 0xFFFFF3FF | 0x300;
    goto LABEL_65;
  }
  v29 = v28 - 1;
  if ( !v29 )
  {
    result = *(_DWORD *)v10 & 0xFFFFF3FF | 0x200;
LABEL_65:
    *(_DWORD *)v10 = result;
    goto LABEL_66;
  }
  result = v29 - 1;
  if ( !result )
    *(_DWORD *)v10 &= 0xFFFFF3FF;
LABEL_66:
  if ( a8 )
    *(float *)v18 = *(float *)(v23 + 80);
  else
    *(double *)v18 = *(double *)(v23 + 80);
  return result;
}

//----- (10039F8E) --------------------------------------------------------
int __cdecl sub_10039F8E(int a1)
{
  int result; // eax@2

  if ( a1 == 1 )
  {
    result = sub_1002E9D5();
    *(_DWORD *)result = 33;
  }
  else
  {
    result = a1 - 2;
    if ( (unsigned int)(a1 - 2) <= 1 )
    {
      result = sub_1002E9D5();
      *(_DWORD *)result = 34;
    }
  }
  return result;
}

//----- (10039FBD) --------------------------------------------------------
double __cdecl sub_10039FBD(int a1, int a2, int a3, int a4, int a5, int a6, double a7)
{
  char *v7; // ecx@1
  signed int v8; // eax@1
  double result; // st7@9
  int v10; // [sp+0h] [bp-20h]@7
  char *v11; // [sp+4h] [bp-1Ch]@6
  int v12; // [sp+8h] [bp-18h]@7
  int v13; // [sp+Ch] [bp-14h]@7
  int v14; // [sp+10h] [bp-10h]@7
  int v15; // [sp+14h] [bp-Ch]@7
  double v16; // [sp+18h] [bp-8h]@7

  v7 = 0;
  v8 = 0;
  while ( dword_1006C170[2 * v8] != a2 )
  {
    ++v8;
    if ( v8 >= 29 )
      goto LABEL_6;
  }
  v7 = (char *)off_1006C174[2 * v8];
LABEL_6:
  v11 = v7;
  if ( v7 )
  {
    v12 = a3;
    v13 = a4;
    v14 = a5;
    v15 = a6;
    v16 = a7;
    v10 = a1;
    sub_1003A072();
    if ( !sub_1003466B((int)&v10) )
      sub_10039F8E(a1);
    result = v16;
  }
  else
  {
    sub_1003A072();
    sub_10039F8E(a1);
    result = a7;
  }
  return result;
}
// 1006C170: using guessed type int dword_1006C170[];

//----- (1003A05F) --------------------------------------------------------
int __usercall sub_1003A05F@<eax>(__int16 a1@<fpstat>)
{
  __asm { fnclex }
  return a1;
}

//----- (1003A072) --------------------------------------------------------
int sub_1003A072()
{
  __int16 v1; // [sp+4h] [bp-4h]@0

  return v1;
}

//----- (1003A09E) --------------------------------------------------------
void sub_1003A09E()
{
  ;
}

//----- (1003A0F9) --------------------------------------------------------
int __usercall sub_1003A0F9@<eax>(__int16 a1@<fpstat>)
{
  return a1;
}

//----- (1003A10B) --------------------------------------------------------
signed int __cdecl sub_1003A10B(__int16 a1)
{
  signed int v1; // ecx@1

  v1 = 0;
  if ( a1 & 0x7E80 )
  {
    if ( (char)a1 < 0 )
      v1 = 16;
    if ( a1 & 0x200 )
      v1 |= 8u;
    if ( a1 & 0x400 )
      v1 |= 4u;
    if ( a1 & 0x800 )
      v1 |= 2u;
    if ( a1 & 0x1000 )
      v1 |= 1u;
    if ( (a1 & 0x6000) == 24576 )
    {
      v1 |= 0x300u;
    }
    else if ( a1 & 0x4000 )
    {
      v1 |= 0x100u;
    }
    else if ( a1 & 0x2000 )
    {
      v1 |= 0x200u;
    }
  }
  return v1;
}

//----- (1003A188) --------------------------------------------------------
signed int __cdecl sub_1003A188(__int16 a1)
{
  signed int v1; // ecx@1

  v1 = 0;
  if ( a1 & 0xC3D )
  {
    if ( a1 & 1 )
      v1 = 16;
    if ( a1 & 4 )
      v1 |= 8u;
    if ( a1 & 8 )
      v1 |= 4u;
    if ( a1 & 0x10 )
      v1 |= 2u;
    if ( a1 & 0x20 )
      v1 |= 1u;
    if ( (a1 & 0xC00) == 3072 )
    {
      v1 |= 0x300u;
    }
    else if ( a1 & 0x800 )
    {
      v1 |= 0x100u;
    }
    else if ( a1 & 0x400 )
    {
      v1 |= 0x200u;
    }
  }
  return v1;
}

//----- (1003A1FB) --------------------------------------------------------
signed int __cdecl sub_1003A1FB(__int16 a1)
{
  signed int v1; // ecx@1

  v1 = 0;
  if ( a1 & 0x31F )
  {
    if ( a1 & 0x10 )
      v1 = 1;
    if ( a1 & 8 )
      v1 |= 4u;
    if ( a1 & 4 )
      v1 |= 8u;
    if ( a1 & 2 )
      v1 |= 0x10u;
    if ( a1 & 1 )
      v1 |= 0x20u;
    if ( (a1 & 0x300) == 768 )
    {
      v1 |= 0xC00u;
    }
    else if ( a1 & 0x200 )
    {
      v1 |= 0x400u;
    }
    else if ( a1 & 0x100 )
    {
      v1 |= 0x800u;
    }
  }
  return v1;
}

//----- (1003A26C) --------------------------------------------------------
signed int __cdecl sub_1003A26C(__int16 a1)
{
  signed int v1; // ecx@1

  v1 = 0;
  if ( a1 & 0x31F )
  {
    if ( a1 & 0x10 )
      v1 = 128;
    if ( a1 & 8 )
      v1 |= 0x200u;
    if ( a1 & 4 )
      v1 |= 0x400u;
    if ( a1 & 2 )
      v1 |= 0x800u;
    if ( a1 & 1 )
      v1 |= 0x1000u;
    if ( (a1 & 0x300) == 768 )
    {
      v1 |= 0x6000u;
    }
    else if ( a1 & 0x200 )
    {
      v1 |= 0x2000u;
    }
    else if ( a1 & 0x100 )
    {
      v1 |= 0x4000u;
    }
  }
  return v1;
}

//----- (1003A2EC) --------------------------------------------------------
signed int __cdecl sub_1003A2EC(int a1)
{
  signed int v1; // ecx@1

  v1 = 0;
  if ( a1 & 0x1F )
  {
    if ( (a1 & 0x10000010) == 268435472 )
      v1 = 1;
    if ( (a1 & 0x8000008) == 134217736 )
      v1 |= 4u;
    if ( (a1 & 0x4000004) == 67108868 )
      v1 |= 8u;
    if ( (a1 & 0x2000002) == 33554434 )
      v1 |= 0x10u;
    if ( (a1 & 0x1000001) == 16777217 )
      v1 |= 0x20u;
  }
  return v1;
}

//----- (1003A34D) --------------------------------------------------------
signed int __cdecl sub_1003A34D(int a1)
{
  signed int v1; // ecx@1

  v1 = 0;
  if ( a1 & 0x1F )
  {
    if ( (a1 & 0x100010) == 1048592 )
      v1 = 1;
    if ( (a1 & 0x80008) == 524296 )
      v1 |= 4u;
    if ( (a1 & 0x40004) == 262148 )
      v1 |= 8u;
    if ( (a1 & 0x20002) == 131074 )
      v1 |= 0x10u;
    if ( (a1 & 0x10001) == 65537 )
      v1 |= 0x20u;
  }
  return v1;
}

//----- (1003A3AE) --------------------------------------------------------
int sub_1003A3AE()
{
  unsigned __int16 v0; // si@3
  __int16 v2; // [sp+0h] [bp-8h]@1

  v2 = 0;
  if ( dword_1007C190 >= 1 )
    v2 = _mm_getcsr();
  v0 = sub_1003A188(0);
  return (v0 | (unsigned __int16)sub_1003A10B(v2)) & 0x31F;
}
// 1007C190: using guessed type int dword_1007C190;

//----- (1003A3F1) --------------------------------------------------------
int __usercall sub_1003A3F1@<eax>(char a1@<fpstat>)
{
  signed int v1; // ecx@1
  signed int v2; // eax@3
  char v4; // [sp+0h] [bp-8h]@1

  v1 = 0;
  v4 = 0;
  if ( dword_1007C190 >= 1 )
    v4 = _mm_getcsr();
  v2 = 0;
  if ( a1 & 0x3D )
  {
    if ( a1 & 1 )
      v2 = 1048592;
    if ( a1 & 4 )
      v2 |= 0x80008u;
    if ( a1 & 8 )
      v2 |= 0x40004u;
    if ( a1 & 0x10 )
      v2 |= 0x20002u;
    if ( a1 & 0x20 )
      v2 |= 0x10001u;
  }
  if ( v4 & 0x3D )
  {
    if ( v4 & 1 )
      v1 = 268435472;
    if ( v4 & 4 )
      v1 |= 0x8000008u;
    if ( v4 & 8 )
      v1 |= 0x4000004u;
    if ( v4 & 0x10 )
      v1 |= 0x2000002u;
    if ( v4 & 0x20 )
      v1 |= 0x1000001u;
  }
  return (v1 | v2) & 0x1F1F001F;
}
// 1007C190: using guessed type int dword_1007C190;

//----- (1003A499) --------------------------------------------------------
signed int __cdecl sub_1003A499(__int16 a1)
{
  unsigned __int8 v1; // ST14_1@1
  int v2; // esi@1
  signed int result; // eax@1
  char v4; // ST14_1@1
  int v5; // esi@2

  __asm { fnstenv byte ptr [ebp+var_20] }
  v2 = v1 & ~sub_1003A1FB(799);
  result = sub_1003A1FB(a1);
  v4 = result | v2;
  __asm { fldenv  byte ptr [ebp+var_20] }
  if ( dword_1007C190 >= 1 )
  {
    v5 = _mm_getcsr() & ~sub_1003A26C(799);
    result = sub_1003A26C(a1);
    _mm_setcsr(result | v5);
  }
  return result;
}
// 1007C190: using guessed type int dword_1007C190;

//----- (1003A519) --------------------------------------------------------
signed int __cdecl sub_1003A519(int a1)
{
  signed int result; // eax@1
  int v3; // esi@2

  __asm { fnstenv byte ptr [ebp+var_20] }
  sub_1003A34D(522125343);
  result = sub_1003A34D(a1);
  __asm { fldenv  byte ptr [ebp+var_20] }
  if ( dword_1007C190 >= 1 )
  {
    v3 = _mm_getcsr() & ~sub_1003A2EC(522125343);
    result = sub_1003A2EC(a1);
    _mm_setcsr(result | v3);
  }
  return result;
}
// 1007C190: using guessed type int dword_1007C190;

//----- (1003A599) --------------------------------------------------------
int __usercall sub_1003A599@<eax>(char a1@<fpstat>)
{
  signed int v1; // ecx@2
  signed int v2; // edx@2
  int result; // eax@28
  int v4; // [sp+4h] [bp-8h]@15

  __asm { fnclex }
  if ( dword_1007C190 < 1 )
  {
    result = 0;
    if ( a1 & 0x3F )
    {
      if ( a1 & 1 )
        result = 16;
      if ( a1 & 4 )
        result |= 8u;
      if ( a1 & 8 )
        result |= 4u;
      if ( a1 & 0x10 )
        result |= 2u;
      if ( a1 & 0x20 )
        result |= 1u;
      if ( a1 & 2 )
        result |= 0x80000u;
    }
  }
  else
  {
    v1 = 0;
    v2 = 0;
    if ( a1 & 0x3F )
    {
      if ( a1 & 1 )
        v2 = 16;
      if ( a1 & 4 )
        v2 |= 8u;
      if ( a1 & 8 )
        v2 |= 4u;
      if ( a1 & 0x10 )
        v2 |= 2u;
      if ( a1 & 0x20 )
        v2 |= 1u;
      if ( a1 & 2 )
        v2 |= 0x80000u;
    }
    v4 = _mm_getcsr();
    _mm_setcsr(v4 & 0xFFFFFFC0);
    if ( v4 & 0x3F )
    {
      if ( v4 & 1 )
        v1 = 16;
      if ( v4 & 4 )
        v1 |= 8u;
      if ( v4 & 8 )
        v1 |= 4u;
      if ( v4 & 0x10 )
        v1 |= 2u;
      if ( v4 & 0x20 )
        v1 |= 1u;
      if ( v4 & 2 )
        v1 |= 0x80000u;
    }
    result = v2 | v1;
  }
  return result;
}
// 1007C190: using guessed type int dword_1007C190;

//----- (1003A680) --------------------------------------------------------
void __usercall sub_1003A680(__int64 a1@<st0>)
{
  __int64 v1; // [sp+0h] [bp-8h]@1

  v1 = a1;
  sub_1003A69E((__m128d)_mm_loadl_epi64((const __m128i *)&v1), a1);
}

//----- (1003A69E) --------------------------------------------------------
double __usercall sub_1003A69E@<st0>(__m128d a1@<xmm0>, __int64 a2)
{
  signed int i; // edx@1
  __m128i v3; // xmm5@2
  __m128d v4; // xmm0@2
  int v5; // eax@2
  __m128d v6; // xmm4@2
  __m128d v7; // xmm6@2
  __m128d v8; // xmm0@2
  __m128d v9; // xmm6@2
  __m128d v10; // xmm7@2
  __m128d v11; // xmm4@2
  __m128d v12; // xmm0@2
  int v13; // ecx@2
  int v14; // ecx@3
  __m128d v15; // xmm6@3
  signed int v16; // edx@3
  __m128d v17; // xmm3@5
  __m128d v18; // xmm7@5
  __m128d v19; // xmm2@5
  __m128d v20; // xmm1@5
  __m128d v21; // xmm0@5
  __m128d v23; // xmm1@6
  __m128d v24; // xmm1@6
  signed int v25; // edx@11
  __m128i v26; // xmm2@17
  double v27; // [sp+10h] [bp-Ch]@5

  for ( i = 0; ; i = -52 )
  {
    v3 = (__m128i)a1;
    v4 = _mm_or_pd(_mm_and_pd(_mm_unpckl_pd(a1, a1), (__m128d)xmmword_1006C280), (__m128d)xmmword_1006C2F0);
    v5 = _mm_extract_epi16((__m128i)_mm_add_pd((__m128d)xmmword_1006C2A0, v4), 0) & 0x7F0;
    v6 = *(__m128d *)((char *)&xmmword_1006C790 + v5);
    v10 = *(__m128d *)((char *)&xmmword_1006C380 + v5);
    v7 = _mm_and_pd((__m128d)xmmword_1006C2B0, v4);
    v8 = _mm_sub_pd(v4, v7);
    v9 = _mm_sub_pd(_mm_mul_pd(v7, v6), (__m128d)xmmword_1006C290);
    v10.m128d_f64[0] = v10.m128d_f64[0] + v9.m128d_f64[0];
    v11 = _mm_mul_pd(v8, v6);
    v12 = _mm_add_pd(v11, v9);
    v13 = (_mm_extract_epi16(_mm_srl_epi64(v3, 0x34u), 0) & 0xFFF) - 1;
    if ( (unsigned int)v13 <= 0x7FD )
      break;
    a1 = _mm_loadl_pd((const double *)&a2);
    *(_QWORD *)&v23.m128d_f64[0] = xmmword_1006C300;
    v24 = _mm_cmpeq_sd(v23, a1);
    if ( _mm_extract_epi16((__m128i)v24, 0) )
    {
      v24 = _mm_loadl_pd((const double *)&qword_1006C320);
      v25 = 8;
LABEL_16:
      _mm_storel_pd(&v27, v24);
      sub_10038C73((int)&a2, (int)&a2, (int)&v27, v25);
      return v27;
    }
    if ( v13 != -1 )
    {
      if ( (unsigned int)v13 > 0x7FE )
      {
        if ( (((_WORD)v13 + 1) & 0x7FFu) >= 0x7FF
          && (v26 = (__m128i)_mm_loadl_pd((const double *)&a2),
              _mm_cvtsi128_si32(_mm_srl_epi64(v26, 0x20u)) & 0xFFFFF | _mm_cvtsi128_si32(v26)) )
        {
          v25 = 1001;
        }
        else
        {
          *(_QWORD *)&v24.m128d_f64[1] = 0i64;
          v24.m128d_f64[0] = 0.0 / 0.0;
          v25 = 9;
        }
      }
      else
      {
        v24 = (__m128d)xmmword_1006C280;
        if ( _mm_extract_epi16(
               (__m128i)_mm_cmpeq_sd(
                          (__m128d)xmmword_1006C2F0,
                          _mm_or_pd(
                            _mm_and_pd(_mm_loadl_pd((const double *)&a2), (__m128d)xmmword_1006C280),
                            (__m128d)xmmword_1006C2F0)),
               0) )
          return 1.797693134862316e308/*+Inf*/;
        v25 = 1001;
      }
      goto LABEL_16;
    }
    a1.m128d_f64[0] = a1.m128d_f64[0] * COERCE_DOUBLE(_mm_loadl_pd((const double *)&qword_1006C310));
  }
  v14 = i + v13 - 1022;
  v9.m128d_f64[0] = (double)v14;
  v15 = _mm_unpckl_pd(v9, v9);
  v16 = 0;
  if ( !((v14 << 10) + v5) )
    v16 = 1;
  v17 = _mm_mul_pd(v12, v12);
  v18 = _mm_add_pd(
          _mm_add_pd(v10, _mm_mul_pd(v15, (__m128d)xmmword_1006C2C0)),
          _mm_and_pd(v11, (__m128d)xmmword_1006C2D0[v16]));
  v17.m128d_f64[0] = v17.m128d_f64[0] * v17.m128d_f64[0] * v12.m128d_f64[0];
  v19 = _mm_mul_pd((__m128d)xmmword_1006C370, v12);
  v20 = _mm_mul_pd(
          _mm_add_pd(
            _mm_mul_pd(_mm_add_pd(_mm_mul_pd((__m128d)xmmword_1006C340, v12), (__m128d)xmmword_1006C350), v12),
            (__m128d)xmmword_1006C360),
          v17);
  v21 = _mm_unpckh_pd(v20, v20);
  v21.m128d_f64[0] = v21.m128d_f64[0]
                   + COERCE_DOUBLE(_mm_add_pd(v20, v19))
                   + COERCE_DOUBLE(_mm_unpckh_pd(v18, v18))
                   + v18.m128d_f64[0];
  _mm_storel_pd(&v27, v21);
  return v27;
}
// 1006C280: using guessed type __int128 xmmword_1006C280;
// 1006C290: using guessed type __int128 xmmword_1006C290;
// 1006C2A0: using guessed type __int128 xmmword_1006C2A0;
// 1006C2B0: using guessed type __int128 xmmword_1006C2B0;
// 1006C2C0: using guessed type __int128 xmmword_1006C2C0;
// 1006C2D0: using guessed type __int128 xmmword_1006C2D0[];
// 1006C2F0: using guessed type __int128 xmmword_1006C2F0;
// 1006C300: using guessed type __int128 xmmword_1006C300;
// 1006C310: using guessed type __int64 qword_1006C310;
// 1006C320: using guessed type __int64 qword_1006C320;
// 1006C340: using guessed type __int128 xmmword_1006C340;
// 1006C350: using guessed type __int128 xmmword_1006C350;
// 1006C360: using guessed type __int128 xmmword_1006C360;
// 1006C370: using guessed type __int128 xmmword_1006C370;
// 1006C380: using guessed type __int128 xmmword_1006C380;
// 1006C790: using guessed type __int128 xmmword_1006C790;

//----- (1003A910) --------------------------------------------------------
double __cdecl sub_1003A910(double a1)
{
  char v1; // bl@1
  double result; // st7@3
  char v3; // [sp-8h] [bp-2Ch]@4
  double v4; // [sp+0h] [bp-24h]@4
  double v5; // [sp+8h] [bp-1Ch]@4

  v1 = sub_1003A072();
  if ( (WORD3(a1) & 0x7FF0) == 32752 )
  {
    if ( (unsigned int)(sub_1003993A(SLODWORD(a1), SHIDWORD(a1)) - 1) <= 2 )
    {
      sub_1003A072();
      return a1;
    }
    v5 = a1 + 1.0;
    v4 = a1;
    v3 = 8;
  }
  else
  {
    result = sub_1003977D(a1);
    if ( a1 == result || v1 & 0x20 )
    {
      sub_1003A072();
      return result;
    }
    v5 = result;
    v4 = a1;
    v3 = 16;
  }
  return sub_100399CC(v3, 12, LODWORD(v4), HIDWORD(v4), LODWORD(v5), HIDWORD(v5));
}

//----- (1003A9DC) --------------------------------------------------------
int __userpurge sub_1003A9DC@<eax>(int a1@<ebp>, int a2, int a3)
{
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // ecx@1

  sub_1000FB4A();
  v4 = v3;
  *(_DWORD *)(a1 - 16) = v3;
  *(_DWORD *)(v3 + 4) = 1;
  *(_DWORD *)(v3 + 8) = 1;
  *(_DWORD *)(a1 - 4) = 0;
  v5 = v3 + 12;
  *(_DWORD *)v4 = off_1006CBCC;
  *(_DWORD *)(a1 - 20) = v5;
  *(_BYTE *)(a1 - 4) = 1;
  if ( v5 )
    sub_1003AB56(v5, **(_DWORD **)(a1 + 8), **(_BYTE **)(a1 + 12));
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1006CBCC: using guessed type int (*off_1006CBCC[2])();

//----- (1003AA28) --------------------------------------------------------
int __userpurge sub_1003AA28@<eax>(int a1@<ebp>, int a2, int a3, int a4)
{
  int v4; // ecx@1
  int v5; // edi@1

  sub_1000FB4A();
  *(_DWORD *)(a1 - 16) = v4;
  *(_DWORD *)(v4 + 4) = 1;
  *(_DWORD *)(v4 + 8) = 1;
  *(_DWORD *)(a1 - 4) = 0;
  v5 = v4 + 12;
  *(_DWORD *)v4 = off_1006CBB8;
  sub_10028330((void *)(v4 + 12), 0, 0x54u);
  *(_DWORD *)(a1 - 20) = v5;
  *(_DWORD *)(a1 - 24) = v5;
  *(_BYTE *)(a1 - 4) = 1;
  if ( v5 )
    sub_1003AB56(v5, **(_DWORD **)(a1 + 12), **(_BYTE **)(a1 + 16));
  return sub_1000FB24(12);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 1006CBB8: using guessed type int (*off_1006CBB8[2])();

//----- (1003AA86) --------------------------------------------------------
int __thiscall sub_1003AA86(int this, int a2)
{
  int v2; // edx@1
  int v3; // eax@1

  v2 = *(_DWORD *)(a2 + 4);
  v3 = *(_DWORD *)a2;
  if ( v2 )
    _InterlockedIncrement((volatile signed __int32 *)(v2 + 4));
  return sub_1003B092(this, v3, v2);
}

//----- (1003AAA4) --------------------------------------------------------
int __usercall sub_1003AAA4@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  int v2; // ebx@1
  int v3; // esi@3
  int v5; // [sp-4h] [bp-4h]@1

  sub_1000FBB5((int)sub_1006351E, 16);
  *(_DWORD *)(a2 - 20) = 0;
  v2 = sub_1003B1A1(a1, 0, 0x60u);
  *(_DWORD *)(a2 - 4) = 0;
  *(_DWORD *)(a2 - 24) = v2;
  *(_DWORD *)(a2 - 28) = v2;
  *(_BYTE *)(a2 - 4) = 1;
  if ( v2 )
    sub_1003AA28(a2, *(_DWORD *)(a2 + 12), *(_DWORD *)(a2 + 16), *(_DWORD *)(a2 + 20));
  v3 = *(_DWORD *)(a2 + 8);
  *(_DWORD *)v3 = 0;
  *(_DWORD *)(v3 + 4) = 0;
  sub_1003B092(v3, v2 + 12, v2);
  return sub_1000FB24(v5);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1003AAFC) --------------------------------------------------------
void __noreturn sub_1003AAFC()
{
  sub_10027494(0, 0);
  __debugbreak();
  JUMPOUT(*(_DWORD *)sub_1003AB06);
}

//----- (1003AB06) --------------------------------------------------------
int __usercall sub_1003AB06@<eax>(int a1@<ebp>)
{
  LPVOID v1; // eax@1
  int v2; // eax@2
  int v3; // esi@4

  sub_1000FB4A();
  *(_DWORD *)(a1 - 16) = 0;
  v1 = sub_1000F0A6(0x60u);
  *(_DWORD *)(a1 - 20) = v1;
  *(_DWORD *)(a1 - 4) = 0;
  if ( v1 )
    v2 = sub_1003A9DC(a1, *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 16));
  else
    v2 = 0;
  v3 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)v3 = 0;
  *(_DWORD *)(v3 + 4) = 0;
  sub_1003B092(v3, v2 + 12, v2);
  return sub_1000FB24(8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1003AB56) --------------------------------------------------------
int __thiscall sub_1003AB56(int this, int a2, char a3)
{
  int v3; // ebp@0
  int v4; // ebx@1
  int v5; // esi@1
  unsigned int v6; // edi@1
  int v7; // eax@1
  int v8; // edx@2
  unsigned int v9; // eax@6
  int v10; // eax@10
  int v11; // edi@14
  int v12; // eax@16
  LPVOID v13; // eax@19
  SIZE_T v15; // [sp-4h] [bp-20h]@18
  char v16; // [sp+Ch] [bp-10h]@24
  int v17; // [sp+18h] [bp-4h]@18

  v4 = a2;
  v5 = this;
  v6 = 0;
  *(_BYTE *)(this + 80) = a3;
  *(_DWORD *)this = *(_DWORD *)a2;
  *(_DWORD *)(this + 4) = *(_DWORD *)(a2 + 4);
  *(_DWORD *)(this + 8) = 0;
  *(_DWORD *)(this + 12) = 0;
  v7 = *(_DWORD *)(a2 + 16);
  *(_DWORD *)(this + 16) = v7;
  if ( v7 )
  {
    v8 = this + 20;
    do
    {
      if ( v6 >= 0xF )
        break;
      ++v6;
      *(_DWORD *)v8 = *(_DWORD *)(a2 - this + v8);
      v8 += 4;
    }
    while ( v6 < *(_DWORD *)(this + 16) );
    v4 = a2;
  }
  v9 = *(_DWORD *)(this + 16);
  if ( v9 < 0xF )
    memset((void *)(this + 20 + 4 * v9), 0, 4 * (15 - v9));
  if ( *(_DWORD *)v4 == -529697949 && *(_DWORD *)(v4 + 16) == 3 )
  {
    v10 = *(_DWORD *)(v4 + 20);
    if ( v10 == 429065504 || v10 == 429065505 || v10 == 429065506 || v10 == 26820608 )
    {
      *(_DWORD *)(this + 24) = 0;
      v11 = *(_DWORD *)(v4 + 28);
      if ( *(_DWORD *)(v4 + 24) )
      {
        if ( v11 )
        {
          v12 = *(_DWORD *)(v11 + 12);
          if ( v12 )
          {
            if ( *(_DWORD *)v12 > 0 )
            {
              *(_DWORD *)(this + 28) = EncodePointer(*(PVOID *)(v4 + 28));
              v17 = *(_DWORD *)(*(_DWORD *)(v11 + 12) + 4);
              v15 = *(_DWORD *)(v17 + 20);
              if ( a3 )
                v13 = sub_1002C36D(v15);
              else
                v13 = (LPVOID)sub_1003B1A1(v4, v11, v15);
              v11 = (int)v13;
              if ( v13 )
              {
                sub_1003ADAC(v3, (int)v13, *(_DWORD *)(v4 + 24), *(_DWORD *)(v17 + 20), v17);
                *(_DWORD *)(v5 + 24) = v11;
                return v5;
              }
              sub_1000D8F2((int)&v16);
              sub_10027494((int)&v16, (int)&unk_10075430);
            }
          }
        }
      }
      sub_1002C84B(v4, v3, v11);
    }
  }
  return v5;
}

//----- (1003AC77) --------------------------------------------------------
void __usercall sub_1003AC77(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // ebp@0
  int v3; // edi@1
  int v4; // eax@4
  PVOID v5; // eax@8
  PVOID v6; // edx@8
  int v7; // ecx@10
  int v8; // eax@11
  int v9; // ecx@14
  int v10; // ST04_4@15
  void (__stdcall *v11)(_DWORD); // esi@15

  v3 = a1;
  if ( *(_BYTE *)(a1 + 80) )
  {
    if ( *(_DWORD *)a1 == -529697949 && *(_DWORD *)(a1 + 16) == 3 )
    {
      v4 = *(_DWORD *)(a1 + 20);
      if ( v4 == 429065504 || v4 == 429065505 || v4 == 429065506 || v4 == 26820608 )
      {
        v5 = DecodePointer(*(PVOID *)(a1 + 28));
        v6 = v5;
        if ( !v5 )
          sub_1002C84B(a2, v2, v3);
        v7 = *(_DWORD *)(v3 + 24);
        if ( v7 )
        {
          v8 = *(_DWORD *)(*((_DWORD *)v5 + 3) + 4);
          if ( *((_DWORD *)v6 + 1) )
          {
            sub_10026F34(v7, *((_DWORD *)v6 + 1));
          }
          else if ( *(_BYTE *)v8 & 8 )
          {
            v9 = *(_DWORD *)v7;
            if ( v9 )
            {
              v10 = v9;
              v11 = *(void (__stdcall **)(_DWORD))(*(_DWORD *)v9 + 8);
              j_nullsub_1(*(_DWORD *)(*(_DWORD *)v9 + 8));
              v11(v10);
            }
          }
        }
        sub_1002C0EC(*(LPVOID *)(v3 + 24));
      }
    }
  }
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 10026F34: using guessed type _DWORD __cdecl sub_10026F34(_DWORD, _DWORD);

//----- (1003AD3A) --------------------------------------------------------
int __thiscall sub_1003AD3A(void *this)
{
  return *(_DWORD *)this;
}

//----- (1003AD3D) --------------------------------------------------------
LPVOID __thiscall sub_1003AD3D(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_1006CBA4;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 1006CBA4: using guessed type int (*off_1006CBA4[2])();

//----- (1003AD60) --------------------------------------------------------
LPVOID __thiscall sub_1003AD60(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1
  void *v3; // ecx@1

  v2 = lpMem;
  v3 = (void *)*((_DWORD *)lpMem + 1);
  if ( v3 )
    sub_1003AFB3(v3);
  if ( a2 & 1 )
    sub_1000F417(v2);
  return v2;
}

//----- (1003AD89) --------------------------------------------------------
LPVOID __thiscall sub_1003AD89(LPVOID lpMem, char a2)
{
  LPVOID v2; // esi@1

  v2 = lpMem;
  *(_DWORD *)lpMem = off_1006CBA4;
  if ( a2 & 1 )
    sub_1000F417(lpMem);
  return v2;
}
// 1006CBA4: using guessed type int (*off_1006CBA4[2])();

//----- (1003ADAC) --------------------------------------------------------
int __userpurge sub_1003ADAC@<eax>(int a1@<ebp>, int a2, int a3, int a4, int a5)
{
  int v5; // esi@1
  int v6; // edi@6
  int v7; // ecx@7
  int v8; // ST0C_4@8
  void (__cdecl *v9)(_DWORD); // esi@8
  int v11; // [sp-8h] [bp-8h]@4

  sub_1000FBB5((int)sub_1006357C, 4);
  v5 = *(_DWORD *)(a1 + 20);
  if ( *(_BYTE *)v5 & 1 || !*(_DWORD *)(v5 + 24) )
  {
    v6 = *(_DWORD *)(a1 + 12);
    sub_100278E0(*(void **)(a1 + 8), *(const void **)(a1 + 12), *(_DWORD *)(a1 + 16));
    if ( *(_BYTE *)v5 & 8 )
    {
      v7 = *(_DWORD *)v6;
      if ( *(_DWORD *)v6 )
      {
        v8 = *(_DWORD *)v6;
        v9 = *(void (__cdecl **)(_DWORD))(*(_DWORD *)v7 + 4);
        j_nullsub_1(*(_DWORD *)(*(_DWORD *)v7 + 4));
        v9(v8);
      }
    }
  }
  else
  {
    *(_DWORD *)(a1 - 4) = 0;
    if ( *(_BYTE *)v5 & 4 )
    {
      v11 = 1;
      sub_10026F3B(*(_DWORD *)(a1 + 12), v5 + 8);
      sub_10026F34(*(_DWORD *)(a1 + 8), *(_DWORD *)(v5 + 24));
    }
    else
    {
      v11 = sub_10026F3B(*(_DWORD *)(a1 + 12), v5 + 8);
      sub_10026F34(*(_DWORD *)(a1 + 8), *(_DWORD *)(v5 + 24));
    }
  }
  return sub_1000FB24(v11);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 10026F34: using guessed type _DWORD __cdecl sub_10026F34(_DWORD, _DWORD);

//----- (1003AE3F) --------------------------------------------------------
int __usercall sub_1003AE3F@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  int v2; // edx@1
  int v3; // eax@1
  int v4; // ST04_4@8
  int v5; // eax@9
  int v7; // ST00_4@10
  int v8; // [sp-4h] [bp-4h]@1

  sub_1000FBB5((int)sub_10063597, 48);
  v2 = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(a2 - 24) = a2 - 60;
  v3 = *(_DWORD *)(a2 + 16);
  *(_DWORD *)(a2 - 28) = 0;
  *(_DWORD *)(a2 - 4) = 0;
  *(_DWORD *)(a2 - 60) = -529697949;
  *(_DWORD *)(a2 - 56) = 1;
  *(_DWORD *)(a2 - 52) = 0;
  *(_DWORD *)(a2 - 48) = 0;
  *(_DWORD *)(a2 - 44) = 3;
  *(_DWORD *)(a2 - 40) = 429065504;
  *(_DWORD *)(a2 - 36) = v2;
  if ( v3 && *(_BYTE *)v3 & 0x10 )
    v3 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)v2 - 4) + 24);
  *(_DWORD *)(a2 - 32) = v3;
  if ( v3 && *(_BYTE *)v3 & 8 )
    *(_DWORD *)(a2 - 40) = 26820608;
  if ( *(_BYTE *)(a2 + 20) )
  {
    v4 = *(_DWORD *)(a2 + 8);
    *(_BYTE *)(a2 - 17) = 1;
    sub_1003AB06(a2);
  }
  else
  {
    *(_BYTE *)(a2 - 17) = 0;
    v7 = *(_DWORD *)(a2 + 8);
    sub_1003AAA4(a1, a2);
  }
  v5 = *(_DWORD *)(a2 + 8);
  return sub_1000FB24(v8);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1003AEE2) --------------------------------------------------------
_UNKNOWN *__usercall sub_1003AEE2@<eax>(int a1@<ebp>)
{
  int v1; // edx@1
  int v2; // eax@1
  int v3; // ecx@1

  v1 = *(_DWORD *)(a1 + 8);
  *(_DWORD *)v1 = 0;
  *(_DWORD *)(v1 + 4) = 0;
  v2 = dword_1007CCFC;
  v3 = dword_1007CCF8;
  if ( dword_1007CCFC )
    _InterlockedIncrement((volatile signed __int32 *)(dword_1007CCFC + 4));
  sub_1003B092(v1, v3, v2);
  return &loc_1003AEC5;
}
// 1007CCF8: using guessed type int dword_1007CCF8;
// 1007CCFC: using guessed type int dword_1007CCFC;

//----- (1003AF14) --------------------------------------------------------
int __usercall sub_1003AF14@<eax>(int a1@<ebp>)
{
  int v1; // ST00_4@5
  int v2; // eax@5
  int v3; // eax@6
  int v5; // [sp-4h] [bp-4h]@1

  sub_1000FBB5((int)sub_100635B2, 12);
  *(_DWORD *)(a1 - 24) = 0;
  *(_DWORD *)(a1 - 4) = 0;
  if ( !*(_DWORD *)sub_100273B4()
    || *(_DWORD *)sub_100273BD()
    || **(_DWORD **)sub_100273B4() == -532459699
    || **(_DWORD **)sub_100273B4() == -532462766 )
  {
    v3 = *(_DWORD *)(a1 + 8);
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 0;
  }
  else
  {
    *(_BYTE *)(a1 - 17) = 1;
    sub_100273B4();
    v1 = *(_DWORD *)(a1 + 8);
    sub_1003AB06(a1);
    v2 = *(_DWORD *)(a1 + 8);
  }
  return sub_1000FB24(v5);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);

//----- (1003AFB3) --------------------------------------------------------
int __thiscall sub_1003AFB3(void *this)
{
  void *v1; // edi@1
  int result; // eax@1
  void (__thiscall *v3)(_DWORD); // esi@2
  int (__thiscall *v4)(_DWORD); // esi@5

  v1 = this;
  result = _InterlockedExchangeAdd((volatile signed __int32 *)this + 1, 0xFFFFFFFF);
  if ( !result )
  {
    v3 = (void (__thiscall *)(_DWORD))**(_DWORD **)this;
    j_nullsub_1(**(_DWORD **)this);
    v3(v1);
    result = _InterlockedExchangeAdd((volatile signed __int32 *)v1 + 2, 0xFFFFFFFF);
    if ( !result )
    {
      v4 = *(int (__thiscall **)(_DWORD))(*(_DWORD *)v1 + 4);
      j_nullsub_1(*(_DWORD *)(*(_DWORD *)v1 + 4));
      result = v4(v1);
    }
  }
  return result;
}
// 1003AFB3: could not find valid save-restore pair for esi
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1003AFFC) --------------------------------------------------------
int __thiscall sub_1003AFFC(void *this)
{
  void *v1; // edi@1
  int (__thiscall *v2)(_DWORD, _DWORD); // esi@2
  int result; // eax@2

  v1 = this;
  if ( this )
  {
    v2 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)this + 8);
    j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 8));
    result = v2(v1, 1);
  }
  return result;
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1003B019) --------------------------------------------------------
int __thiscall sub_1003B019(void *this)
{
  void *v1; // edi@1
  int (__thiscall *v2)(_DWORD, _DWORD); // esi@1

  v1 = this;
  v2 = *(int (__thiscall **)(_DWORD, _DWORD))(*(_DWORD *)this + 8);
  j_nullsub_1(*(_DWORD *)(*(_DWORD *)this + 8));
  return v2(v1, 0);
}
// 1000FB1E: using guessed type int __thiscall j_nullsub_1(_DWORD);

//----- (1003B032) --------------------------------------------------------
void __usercall sub_1003B032(int a1@<ecx>, int a2@<ebx>)
{
  sub_1003AC77(a1 + 12, a2);
}

//----- (1003B03A) --------------------------------------------------------
int __stdcall sub_1003B03A(int a1)
{
  return 0;
}

//----- (1003B03F) --------------------------------------------------------
int __usercall sub_1003B03F@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // eax@1

  sub_1000FB4A();
  *(_DWORD *)(a2 - 24) = "bad allocation";
  *(_DWORD *)(a2 - 16) = 0;
  *(_DWORD *)(a2 - 20) = 0;
  *(_DWORD *)(a2 - 28) = &off_100652F4;
  *(_DWORD *)(a2 - 4) = 0;
  v2 = *(_DWORD *)(a2 + 8);
  sub_1003AE3F(a1, a2);
  *(_DWORD *)(a2 - 28) = &off_100652D4;
  sub_10027475(a2 - 24);
  v3 = *(_DWORD *)(a2 + 8);
  return sub_1000FB24(16);
}
// 1000FB24: using guessed type int __cdecl sub_1000FB24(_DWORD);
// 100652D4: using guessed type int (__thiscall *off_100652D4)(LPVOID lpMem, char);
// 100652F4: using guessed type int (__thiscall *off_100652F4)(LPVOID lpMem, char);

//----- (1003B092) --------------------------------------------------------
int __thiscall sub_1003B092(int this, int a2, int a3)
{
  int v3; // esi@1
  void *v4; // ecx@1
  int result; // eax@3

  v3 = this;
  v4 = *(void **)(this + 4);
  if ( v4 )
    sub_1003AFB3(v4);
  *(_DWORD *)(v3 + 4) = a3;
  result = a2;
  *(_DWORD *)v3 = a2;
  return result;
}

//----- (1003B0B4) --------------------------------------------------------
void __thiscall sub_1003B0B4(void *this)
{
  int v1; // ebp@0
  int v2; // ebx@1
  DWORD v3; // edx@3
  signed int v4; // eax@3
  PVOID v5; // eax@9
  void *v6; // ecx@11
  int v7; // esi@13
  int v8; // eax@13
  int v9; // [sp+0h] [bp-6Ch]@13
  char v10; // [sp+Ch] [bp-60h]@2
  DWORD dwExceptionCode; // [sp+18h] [bp-54h]@3
  DWORD dwExceptionFlags; // [sp+1Ch] [bp-50h]@16
  DWORD nNumberOfArguments; // [sp+28h] [bp-44h]@3
  ULONG_PTR Arguments; // [sp+2Ch] [bp-40h]@5
  int v15; // [sp+30h] [bp-3Ch]@9
  PVOID Ptr; // [sp+34h] [bp-38h]@9
  int v17; // [sp+68h] [bp-4h]@17

  v2 = (int)this;
  if ( !this )
  {
    sub_10026703((int)&v10);
    sub_10027494((int)&v10, (int)&unk_10076C0C);
  }
  qmemcpy(&dwExceptionCode, (const void *)v2, 0x50u);
  v3 = dwExceptionCode;
  v4 = nNumberOfArguments;
  if ( dwExceptionCode == -529697949 && nNumberOfArguments == 3 )
  {
    if ( Arguments != 429065504 && Arguments != 429065505 && Arguments != 429065506 && Arguments != 26820608 )
      goto LABEL_16;
    v5 = DecodePointer(Ptr);
    if ( !v15 || !v5 || (v6 = (void *)*((_DWORD *)v5 + 3)) == 0 || *(_DWORD *)v6 <= 0 )
      sub_1002C84B(v2, v1, (int)&v17);
    Ptr = v5;
    v7 = *(_DWORD *)(*((_DWORD *)v5 + 3) + 4);
    v8 = *(_DWORD *)(v7 + 20);
    sub_1003B2A0(v6);
    sub_1003ADAC(v1, (int)&v9, v15, *(_DWORD *)(v7 + 20), v7);
    v4 = nNumberOfArguments;
    v3 = dwExceptionCode;
    v15 = (int)&v9;
  }
  if ( (unsigned int)v4 > 0xF )
  {
    v4 = 15;
    nNumberOfArguments = 15;
  }
LABEL_16:
  RaiseException(v3, dwExceptionFlags, v4, &Arguments);
}

//----- (1003B1A1) --------------------------------------------------------
int __usercall sub_1003B1A1@<eax>(int a1@<ebx>, int a2@<edi>, unsigned int a3)
{
  int v3; // ebp@0
  int result; // eax@1
  int v5; // [sp+4h] [bp-4h]@1

  v5 = (int)((char *)&unk_1007CD74 - dword_1007A960);
  result = sub_1003B25C(8, a3, (int)&v5, (int)&dword_1007A960);
  if ( !result )
    sub_1002C84B(a1, v3, a2);
  dword_1007A960 -= a3;
  return result;
}
// 1007A960: using guessed type int dword_1007A960;

//----- (1003B1E0) --------------------------------------------------------
int __cdecl sub_1003B1E0(int a1, int a2)
{
  int result; // eax@2

  if ( a1 )
  {
    *(_DWORD *)a1 = 0;
    *(_DWORD *)(a1 + 4) = 0;
    result = sub_1003AA86(a1, a2);
  }
  return result;
}

//----- (1003B1FB) --------------------------------------------------------
int __cdecl sub_1003B1FB(int a1)
{
  int result; // eax@1

  result = a1;
  if ( a1 )
  {
    *(_DWORD *)a1 = 0;
    *(_DWORD *)(a1 + 4) = 0;
  }
  return result;
}

//----- (1003B20E) --------------------------------------------------------
int __cdecl sub_1003B20E(int a1)
{
  int v1; // ebp@0
  int result; // eax@1
  char v3; // [sp+0h] [bp-8h]@1
  void *v4; // [sp+4h] [bp-4h]@1

  sub_1003AF14(v1);
  result = sub_1003B1E0(a1, (int)&v3);
  if ( v4 )
    result = sub_1003AFB3(v4);
  return result;
}

//----- (1003B23B) --------------------------------------------------------
LPVOID __cdecl sub_1003B23B(LPVOID lpMem)
{
  return sub_1003AD60(lpMem, 0);
}

//----- (1003B24A) --------------------------------------------------------
void __cdecl sub_1003B24A(void *a1)
{
  int v1; // eax@1

  v1 = sub_1003AD3A(a1);
  sub_1003B0B4((void *)v1);
}

//----- (1003B25C) --------------------------------------------------------
int __cdecl sub_1003B25C(int a1, unsigned int a2, int a3, int a4)
{
  int v4; // edx@1
  int result; // eax@5

  v4 = *(_DWORD *)a3 & (a1 - 1);
  if ( v4 )
    v4 = a1 - v4;
  if ( *(_DWORD *)a4 < (unsigned int)v4 || *(_DWORD *)a4 - v4 < a2 )
  {
    result = 0;
  }
  else
  {
    *(_DWORD *)a3 += v4;
    *(_DWORD *)a4 -= v4;
    result = *(_DWORD *)a3;
  }
  return result;
}

//----- (1003B2A0) --------------------------------------------------------
int __thiscall sub_1003B2A0(void *this)
{
  return sub_1003B650(this);
}
// 1003B650: using guessed type int __thiscall sub_1003B650(_DWORD);

//----- (1003B2D0) --------------------------------------------------------
unsigned __int64 __stdcall sub_1003B2D0(__int64 a1, __int64 a2)
{
  unsigned __int64 result; // rax@2

  if ( HIDWORD(a1) | HIDWORD(a2) )
    result = a2 * a1;
  else
    result = (unsigned int)a2 * (unsigned __int64)(unsigned int)a1;
  return result;
}

//----- (1003B390) --------------------------------------------------------
signed int __usercall sub_1003B390@<eax>(double a1@<st0>)
{
  JUMPOUT(dword_1007C190, 0, sub_1003B3D0);
  return (signed int)floor(a1);
}
// 1003B390: could not find valid save-restore pair for ebp
// 1003B3D0: using guessed type double __usercall sub_1003B3D0@<st0>(double@<st0>);
// 1007C190: using guessed type int dword_1007C190;

//----- (1003B3D0) --------------------------------------------------------
unsigned int __usercall sub_1003B3D0@<eax>(double a1@<st0>)
{
  float v1; // ST18_4@1
  float v2; // edx@1
  unsigned int result; // eax@1
  double v4; // st7@2
  float v5; // ST00_4@3
  float v6; // ST00_4@4

  v1 = a1;
  v2 = v1;
  result = (signed __int64)a1;
  if ( result || (LODWORD(v2) = (unsigned __int64)(signed __int64)a1 >> 32, LODWORD(v2) & 0x7FFFFFFF) )
  {
    v4 = a1 - (double)(signed __int64)a1;
    if ( SLODWORD(v2) >= 0 )
    {
      v6 = v4;
      result -= __CFADD__(LODWORD(v6), 0x7FFFFFFF);
    }
    else
    {
      v5 = v4;
      result = (__PAIR__(result, LODWORD(v5) ^ 0x80000000) + 0x7FFFFFFF) >> 32;
    }
  }
  return result;
}

//----- (1003B450) --------------------------------------------------------
int __cdecl sub_1003B450(int a1, unsigned int a2)
{
  unsigned int v2; // edx@1
  int v3; // ecx@1
  int result; // eax@1
  unsigned int v5; // esi@2

  v2 = 0;
  v3 = a1 + *(_DWORD *)(a1 + 60);
  result = v3 + *(_WORD *)(v3 + 20) + 24;
  if ( *(_WORD *)(v3 + 6) )
  {
    while ( 1 )
    {
      v5 = *(_DWORD *)(result + 12);
      if ( a2 >= v5 && a2 < v5 + *(_DWORD *)(result + 8) )
        break;
      ++v2;
      result += 40;
      if ( v2 >= *(_WORD *)(v3 + 6) )
        goto LABEL_5;
    }
  }
  else
  {
LABEL_5:
    result = 0;
  }
  return result;
}

//----- (1003B4A0) --------------------------------------------------------
int __cdecl sub_1003B4A0(int a1)
{
  int v1; // eax@1
  int v2; // eax@2
  int result; // eax@3

  LOBYTE(v1) = sub_1003B560(0x10000000);
  if ( v1 && (v2 = sub_1003B450(0x10000000, a1 - 0x10000000)) != 0 )
    result = ~(unsigned __int8)(*(_DWORD *)(v2 + 36) >> 31) & 1;
  else
    result = 0;
  return result;
}

//----- (1003B560) --------------------------------------------------------
bool __cdecl sub_1003B560(int a1)
{
  bool result; // al@2
  int v2; // ecx@3

  if ( *(_WORD *)a1 == 23117 )
  {
    v2 = a1 + *(_DWORD *)(a1 + 60);
    result = 0;
    if ( *(_DWORD *)v2 == 17744 )
      result = *(_WORD *)(v2 + 24) == 267;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (1003B5A0) --------------------------------------------------------
int __stdcall sub_1003B5A0(unsigned __int64 a1, unsigned int a2, int a3)
{
  signed int v3; // edi@1
  int v4; // eax@3
  int result; // eax@6
  unsigned __int64 v6; // rtt@6
  unsigned int v7; // ebx@7
  unsigned int v8; // ecx@7
  unsigned __int64 v9; // rax@7
  unsigned __int8 v10; // cf@8
  int v11; // eax@9
  int v12; // esi@9
  int v13; // ecx@9
  unsigned __int64 v14; // rax@9

  v3 = 0;
  if ( SHIDWORD(a1) < 0 )
  {
    v3 = 1;
    HIDWORD(a1) = -HIDWORD(a1) - ((_DWORD)a1 != 0);
    LODWORD(a1) = -(signed int)a1;
  }
  v4 = a3;
  if ( a3 < 0 )
  {
    ++v3;
    v4 = -a3 - (a2 != 0);
    a3 = -a3 - (a2 != 0);
    a2 = -a2;
  }
  if ( v4 )
  {
    v7 = v4;
    v8 = a2;
    v9 = a1;
    do
    {
      v10 = v7 & 1;
      v7 >>= 1;
      v8 = __RCR__(v8, v10);
      v10 = BYTE4(v9) & 1;
      HIDWORD(v9) >>= 1;
      LODWORD(v9) = __RCR__(v9, v10);
    }
    while ( v7 );
    v11 = v9 / v8;
    v12 = v11;
    v13 = a3 * v11;
    v14 = (unsigned int)v11 * (unsigned __int64)a2;
    v10 = __CFADD__(v13, HIDWORD(v14));
    HIDWORD(v14) += v13;
    if ( v10 || HIDWORD(v14) > HIDWORD(a1) || HIDWORD(v14) >= HIDWORD(a1) && (unsigned int)v14 > (unsigned int)a1 )
      --v12;
    result = v12;
  }
  else
  {
    LODWORD(v6) = a1;
    HIDWORD(v6) = HIDWORD(a1) % a2;
    result = v6 / a2;
  }
  if ( v3 == 1 )
    result = -result;
  return result;
}

//----- (1003B650) --------------------------------------------------------
#error "1003B666: can not convert to microcode (funcsize=10)"

//----- (1003B680) --------------------------------------------------------
void __cdecl sub_1003B680(int a1, int a2)
{
  void *v2; // esp@1
  unsigned int v3; // [sp-18h] [bp-18h]@1
  unsigned int v4; // [sp-14h] [bp-14h]@1
  unsigned int *v5; // [sp-10h] [bp-10h]@1
  int (__cdecl *v6)(PEXCEPTION_RECORD, PVOID, int); // [sp-4h] [bp-4h]@1

  v6 = sub_10027F00;
  v2 = alloca(a2);
  v4 = (unsigned int)&a2 ^ __security_cookie;
  v3 = (unsigned int)&a2 ^ __security_cookie;
  v5 = &v3;
  JUMPOUT(__CS__, __security_cookie ^ a1);
}

//----- (1003B6C9) --------------------------------------------------------
#error "1003B6CE: can not convert to microcode (funcsize=3)"

//----- (1003B6E0) --------------------------------------------------------
int __stdcall sub_1003B6E0(unsigned __int64 a1, __int64 a2)
{
  signed int v2; // edi@1
  int v3; // eax@3
  unsigned __int64 v4; // rtt@6
  int v5; // esi@6
  unsigned int v6; // ebx@7
  unsigned int v7; // ecx@7
  unsigned __int64 v8; // rax@7
  unsigned __int8 v9; // cf@8
  int v10; // eax@9
  int v11; // ecx@9
  unsigned __int64 v12; // rax@9
  int result; // eax@14

  v2 = 0;
  if ( SHIDWORD(a1) < 0 )
  {
    v2 = 1;
    HIDWORD(a1) = -HIDWORD(a1) - ((_DWORD)a1 != 0);
    LODWORD(a1) = -(signed int)a1;
  }
  v3 = HIDWORD(a2);
  if ( SHIDWORD(a2) < 0 )
  {
    ++v2;
    v3 = -HIDWORD(a2) - ((_DWORD)a2 != 0);
    HIDWORD(a2) = -HIDWORD(a2) - ((_DWORD)a2 != 0);
    LODWORD(a2) = -(signed int)a2;
  }
  if ( v3 )
  {
    v6 = v3;
    v7 = a2;
    v8 = a1;
    do
    {
      v9 = v6 & 1;
      v6 >>= 1;
      v7 = __RCR__(v7, v9);
      v9 = BYTE4(v8) & 1;
      HIDWORD(v8) >>= 1;
      LODWORD(v8) = __RCR__(v8, v9);
    }
    while ( v6 );
    v10 = v8 / v7;
    v5 = v10;
    v11 = HIDWORD(a2) * v10;
    v12 = (unsigned int)v10 * (unsigned __int64)(unsigned int)a2;
    v9 = __CFADD__(v11, HIDWORD(v12));
    HIDWORD(v12) += v11;
    if ( v9 || HIDWORD(v12) > HIDWORD(a1) || HIDWORD(v12) >= HIDWORD(a1) && (unsigned int)v12 > (unsigned int)a1 )
      --v5;
  }
  else
  {
    LODWORD(v4) = a1;
    HIDWORD(v4) = HIDWORD(a1) % (unsigned int)a2;
    v5 = v4 / (unsigned int)a2;
  }
  result = v5;
  if ( v2 == 1 )
    result = -v5;
  return result;
}

//----- (1003B7C0) --------------------------------------------------------
unsigned __int64 __usercall sub_1003B7C0@<edx:eax>(unsigned __int64 a1@<edx:eax>, unsigned __int8 a2@<cl>)
{
  unsigned __int64 result; // rax@2

  if ( a2 >= 0x40u )
    result = 0i64;
  else
    result = a1 >> a2;
  return result;
}

//----- (1003B7E0) --------------------------------------------------------
int __usercall sub_1003B7E0@<eax>(__int64 a1@<edx:eax>, unsigned __int8 a2@<cl>)
{
  __int64 v2; // rax@3

  if ( a2 >= 0x40u )
  {
    LODWORD(v2) = 0;
  }
  else if ( a2 >= 0x20u )
  {
    LODWORD(v2) = 0;
  }
  else
  {
    v2 = a1 << (a2 & 0x1F);
  }
  return v2;
}

//----- (1003B800) --------------------------------------------------------
int __cdecl sub_1003B800(int a1, unsigned __int8 a2)
{
  int v2; // edi@2
  __m128 v3; // xmm3@3
  __m128i v4; // xmm3@3
  signed int v5; // eax@3
  const __m128i *v6; // edi@3
  int v7; // edx@3
  __m128i v8; // xmm1@4
  __m128i v9; // xmm2@4
  __m128i v10; // xmm1@4
  int v11; // ecx@4
  int v17; // eax@5
  int result; // eax@8
  __m128i v21; // xmm0@17
  int v23; // ecx@18
  unsigned int v24; // eax@22
  __m128i v26; // xmm0@23
  int v28; // edi@25
  signed int v29; // ecx@25
  int v30; // ecx@28
  int v31; // edi@28
  int v32; // edi@31

  if ( (unsigned int)dword_1007C190 < 1 )
  {
    v28 = a1;
    v29 = -1;
    do
    {
      if ( !v29 )
        break;
      _ZF = *(_BYTE *)v28++ == 0;
      --v29;
    }
    while ( !_ZF );
    v30 = -(v29 + 1);
    v31 = v28 - 1;
    do
    {
      if ( !v30 )
        break;
      _ZF = *(_BYTE *)v31++ == a2;
      --v30;
    }
    while ( !_ZF );
    v32 = v31 + 1;
    if ( *(_BYTE *)v32 == a2 )
      result = v32;
    else
      result = 0;
  }
  else
  {
    v2 = a1;
    if ( (unsigned int)dword_1007C190 > 1 )
    {
      if ( a2 )
      {
        result = 0;
        if ( a1 & 0xF )
        {
          while ( 1 )
          {
            if ( *(_BYTE *)v2 == a2 )
              result = v2;
            if ( !*(_BYTE *)v2 )
              break;
            ++v2;
            if ( !(v2 & 0xF) )
              goto LABEL_17;
          }
        }
        else
        {
LABEL_17:
          v21 = _mm_cvtsi32_si128(a2);
          do
          {
            v2 += 16;
            _ZF = _mm_cmpistrz(v21, *(__m128i *)(v2 - 16), 64);
            v23 = v2 + _mm_cmpistri(v21, *(__m128i *)(v2 - 16), 64) - 16;
            if ( _mm_cmpistrc(v21, *(__m128i *)(v2 - 16), 64) )
              result = v23;
          }
          while ( !_ZF );
        }
      }
      else
      {
        v24 = a1 & 0xFFFFFFF0;
        for ( _EDI = (-1 << (a1 & 0xF)) & _mm_movemask_epi8(_mm_cmpeq_epi8(0i64, *(__m128i *)(a1 & 0xFFFFFFF0)));
              !_EDI;
              _EDI = _mm_movemask_epi8(v26) )
        {
          v26 = _mm_cmpeq_epi8(0i64, *(__m128i *)(v24 + 16));
          v24 += 16;
        }
        __asm { bsf     edx, edi }
        result = _EDX + v24;
      }
    }
    else
    {
      v3 = (__m128)_mm_shufflelo_epi16(_mm_cvtsi32_si128(a2 | ((unsigned int)a2 << 8)), 0);
      v4 = (__m128i)_mm_movelh_ps(v3, v3);
      v5 = -1 << (a1 & 0xF);
      v6 = (const __m128i *)(a1 - (a1 & 0xF));
      v7 = 0;
      while ( 1 )
      {
        v8 = _mm_loadu_si128(v6);
        v9 = _mm_cmpeq_epi8(0i64, v8);
        v10 = _mm_cmpeq_epi8(v8, v4);
        v11 = v5 & _mm_movemask_epi8(v9);
        if ( v11 )
          break;
        _ECX = v5 & _mm_movemask_epi8(v10);
        __asm { bsr     eax, ecx }
        v17 = (int)((char *)v6 + _EAX);
        if ( _ECX )
          v7 = v17;
        v5 = -1;
        ++v6;
      }
      _ECX = v5 & _mm_movemask_epi8(v10) & ((-2 * v11 & 2 * v11) - 1);
      __asm { bsr     eax, ecx }
      result = (int)((char *)v6 + _EAX);
      if ( !_ECX )
        result = v7;
    }
  }
  return result;
}
// 1007C190: using guessed type int dword_1007C190;

//----- (1003BA70) --------------------------------------------------------
int sub_1003BA70()
{
  int result; // eax@1

  result = dword_1007CD9C;
  if ( dword_1007CD9C && *(_BYTE *)(dword_1007CD9C + 33) && *(_BYTE *)(dword_1007CD9C + 276) )
  {
    if ( byte_1007CDB0 )
    {
      ShowCursor(1);
      result = (int)dword_1007CD80;
      byte_1007CDB0 = 0;
      if ( *(_DWORD *)dword_1007CD80 )
        result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)dword_1007CD80 + 40))(
                   *(_DWORD *)dword_1007CD80,
                   0,
                   0);
    }
    else
    {
      ShowCursor(0);
      result = (int)dword_1007CD80;
      byte_1007CDB0 = 1;
      if ( *(_DWORD *)dword_1007CD80 )
        result = (*(int (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)dword_1007CD80 + 40))(
                   *(_DWORD *)dword_1007CD80,
                   1,
                   0);
    }
  }
  return result;
}
// 1003BA70: using guessed type int sub_1003BA70();
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDB0: using guessed type char byte_1007CDB0;

//----- (1003BB00) --------------------------------------------------------
void __usercall sub_1003BB00(int a1@<ebx>)
{
  int v1; // esi@1
  int v2; // ecx@2
  int v3; // ecx@4
  LPVOID v4; // esi@6

  v1 = (int)dword_1007CD80;
  if ( dword_1007CD80 )
  {
    v2 = *((_DWORD *)dword_1007CD80 + 128);
    if ( v2 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v2 + 8))(*((_DWORD *)dword_1007CD80 + 128));
      *(_DWORD *)(v1 + 512) = 0;
    }
    v3 = *(_DWORD *)(v1 + 516);
    if ( v3 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v3 + 8))(*(_DWORD *)(v1 + 516));
      *(_DWORD *)(v1 + 516) = 0;
    }
    sub_10041F90(v1);
    v4 = dword_1007CD80;
    if ( dword_1007CD80 )
    {
      sub_100026E0((int)dword_1007CD80, a1);
      sub_1000F417(v4);
    }
    dword_1007CD80 = 0;
  }
}

//----- (1003BB80) --------------------------------------------------------
char __usercall sub_1003BB80@<al>(int a1@<ebx>)
{
  LPVOID v1; // ST04_4@1
  int v2; // edx@1
  LPVOID v3; // ecx@1

  v1 = sub_1000F0A6(0x80248u);
  dword_1007CD80 = sub_1003C5D0(v1);
  sub_1003C480((int)dword_1007CD80, a1);
  v2 = dword_1007CD9C;
  v3 = dword_1007CD80;
  *((_DWORD *)dword_1007CD80 + 131) = *(_DWORD *)(dword_1007CD9C + 320);
  *((_DWORD *)v3 + 65675) = *(_DWORD *)(v2 + 344);
  return 1;
}
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1003BC00) --------------------------------------------------------
__int16 __fastcall sub_1003BC00(int a1, unsigned int a2)
{
  __int16 result; // ax@1
  bool v3; // zf@2
  char *v4; // ecx@2
  int v5; // [sp-8h] [bp-8h]@2

  result = (signed __int16)dword_1007CD80;
  if ( dword_1007CD80 )
  {
    v5 = a1;
    v3 = (a1 & 0x2000000) == 0;
    v4 = (char *)dword_1007CD80 + 262696;
    if ( v3 )
      v4 = (char *)dword_1007CD80 + 520;
    result = sub_1003C910(v4, v5, a2);
  }
  return result;
}

//----- (1003BC30) --------------------------------------------------------
signed int __fastcall sub_1003BC30(int a1)
{
  int v1; // ecx@3
  signed int result; // eax@6
  int v3; // ecx@9

  if ( dword_1007CD80 )
  {
    if ( a1 & 0x2000000 )
    {
      v1 = a1 & 0x3FFFF;
      if ( v1 != 16 )
      {
        if ( v1 != 197632 && v1 != 229376 )
          return *(_DWORD *)((char *)dword_1007CD80 + v1 + 262704);
        return 1052672;
      }
      return 0;
    }
    v3 = a1 & 0x3FFFF;
    if ( v3 == 16 )
      return 0;
    if ( v3 == 197632 || v3 == 229376 )
      return 1052672;
    result = *(_DWORD *)((char *)dword_1007CD80 + v3 + 528);
  }
  else
  {
    result = -1;
  }
  return result;
}

//----- (1003BCA0) --------------------------------------------------------
unsigned int __usercall sub_1003BCA0@<eax>(int a1@<ebx>, int a2@<edi>)
{
  unsigned int result; // eax@2

  if ( dword_1007CD80 )
  {
    sub_1003C7B0();
    result = sub_10040330(a1, a2);
  }
  return result;
}

//----- (1003BCC0) --------------------------------------------------------
int __usercall sub_1003BCC0@<eax>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // ebp@0
  int v3; // ebx@1
  int v4; // ecx@1
  int v5; // esi@1
  const void *v6; // edx@4
  int v7; // ecx@5
  const void *v8; // ecx@6
  __int16 v9; // ax@7
  int v10; // eax@9
  int v11; // ecx@12
  void *v12; // eax@12
  int v13; // ST28_4@17
  int v14; // ST24_4@17
  int v15; // ST20_4@17
  char v16; // al@17
  int v17; // edi@18
  int v18; // eax@18
  int v19; // ebx@20
  int v20; // ecx@21
  int v21; // eax@21
  int v22; // ecx@25
  char v23; // al@25
  int v24; // ecx@27
  int v25; // edx@30
  int result; // eax@30
  int v27; // eax@31
  int v28; // [sp-10h] [bp-88h]@0
  int v29; // [sp-Ch] [bp-84h]@11
  LPVOID lpMem; // [sp+Ch] [bp-6Ch]@9
  int v31; // [sp+1Ch] [bp-5Ch]@12
  unsigned int v32; // [sp+20h] [bp-58h]@9
  LPVOID v33; // [sp+24h] [bp-54h]@4
  int v34; // [sp+34h] [bp-44h]@4
  unsigned int v35; // [sp+38h] [bp-40h]@4
  LPVOID v36; // [sp+3Ch] [bp-3Ch]@12
  int v37; // [sp+40h] [bp-38h]@12
  int v38; // [sp+44h] [bp-34h]@12
  int v39[2]; // [sp+48h] [bp-30h]@2
  __int64 v40; // [sp+50h] [bp-28h]@1
  __int64 *v41; // [sp+58h] [bp-20h]@1
  int *v42; // [sp+5Ch] [bp-1Ch]@1
  int v43; // [sp+60h] [bp-18h]@22
  int v44; // [sp+64h] [bp-14h]@14
  int v45; // [sp+68h] [bp-10h]@11
  int v46; // [sp+74h] [bp-4h]@9

  v3 = a1;
  v42 = (int *)a1;
  _mm_storel_pd((double *)&v40, 0i64);
  sub_10002CB0((void *)(a1 + 412), (int)&v41, (int)&v40);
  v5 = (int)v41;
  if ( v41 == *(__int64 **)(v3 + 416) )
  {
    v41 = &v40;
    sub_10002E30(v3 + 412, (int)v39, v4, (int)&v41, v4);
    v5 = v39[0];
  }
  if ( !*(_DWORD *)(v5 + 16) )
  {
    v35 = 7;
    v34 = 0;
    v6 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v33) = 0;
    if ( *(_WORD *)v6 )
    {
      v8 = v6;
      a2 = (int)((char *)v6 + 2);
      do
      {
        v9 = *(_WORD *)v8;
        v8 = (char *)v8 + 2;
      }
      while ( v9 );
      v7 = (signed int)((char *)v8 - a2) >> 1;
    }
    else
    {
      v7 = 0;
    }
    sub_10001460((int)&v33, v6, v7);
    v46 = 0;
    v10 = sub_100026C0((int)&lpMem, 0);
    LOBYTE(v46) = 1;
    sub_100017B0((int)&v33, v10, 0, 0xFFFFFFFF);
    LOBYTE(v46) = 0;
    if ( v32 >= 8 )
      sub_10001E40(v3, a2, lpMem, v32 + 1);
    sub_10001680((int)&v33, L"_ALIEN_DX11", 0xBu);
    sub_10001680((int)&v33, L".psh", 4u);
    if ( sub_10028FF8(v3, a2, (int)&v45) )
    {
      v36 = 0;
      v37 = 0;
      v38 = 0;
      LOBYTE(v46) = 2;
      v39[0] = 0;
      v39[1] = 0;
      sub_100027D0((int)&v36, (unsigned int)v39);
      v32 = 15;
      v31 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "ps_main", 7u);
      LOBYTE(v46) = 3;
      v12 = &lpMem;
      if ( v32 >= 0x10 )
        v12 = lpMem;
      sub_10040760(
        (void *)v3,
        (int)&v44,
        L"ALIEN_PSH",
        (int)&v44,
        (int)v36,
        (int)&v44,
        (int)v12,
        (int)"ps_5_0",
        v28,
        v29,
        (int)&v44,
        v11);
      LOBYTE(v46) = 2;
      if ( v32 >= 0x10 )
        sub_10001EA0(v3, a2, lpMem, v32 + 1);
      if ( !sub_10028FF8(v3, a2, (int)&v45) )
      {
        v13 = v45;
        v14 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v44 + 16))(v44, 1);
        v15 = v44;
        v16 = (*(int (**)(void))(*(_DWORD *)v44 + 12))();
        sub_1002936D(v3, a2, v16, v15, v14, v13);
        sub_100290B5(v3, v2, a2);
      }
      v17 = (*(int (__stdcall **)(int))(*(_DWORD *)v44 + 16))(v44);
      v18 = (*(int (__stdcall **)(int))(*(_DWORD *)v44 + 12))(v44);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v3 + 4) + 60))(
        *(_DWORD *)(v3 + 4),
        v18,
        v17,
        0,
        &v41);
      LOBYTE(v46) = 0;
      v3 = (int)v42;
      if ( v36 )
        sub_100029D0((int)v42, v17, v36, (v38 - (signed int)v36) >> 3);
    }
    else
    {
      sub_1002C003(v3, a2);
      v19 = sub_1002BD3E(v3, a2, v45);
      sub_1002C01E(v19, v2, a2);
      v17 = (int)sub_1002C36D(v19);
      sub_1002C2BD(v19, v17);
      sub_100290B5(v19, v2, v17);
      (*(void (__stdcall **)(int, int, int, _DWORD, int *))(*(_DWORD *)v42[1] + 60))(v42[1], v17, v19, 0, &v41);
      sub_1002C0EC((LPVOID)v17);
      v3 = (int)v42;
    }
    _mm_storel_pd((double *)v39, 0i64);
    sub_10002CB0((void *)(v3 + 412), (int)&v42, (int)v39);
    v21 = (int)v42;
    if ( v42 == *(int **)(v3 + 416) )
    {
      v42 = v39;
      sub_10002E30(v3 + 412, (int)&v43, v20, (int)&v42, v20);
      v21 = v43;
    }
    *(_DWORD *)(v21 + 16) = v41;
    v46 = -1;
    if ( v35 >= 8 )
      sub_10001E40(v3, v17, v33, v35 + 1);
  }
  v22 = *(_DWORD *)(v3 + 516);
  v23 = 0;
  if ( *(_DWORD *)(v3 + 276) != v22 )
  {
    v23 = 1;
    *(_DWORD *)(v3 + 276) = v22;
  }
  v24 = *(_DWORD *)(v3 + 8);
  if ( v24 && v23 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v24 + 32))(v24, 0, 1, v3 + 516);
  v25 = *(_DWORD *)(v5 + 16);
  result = 0;
  v42 = 0;
  if ( *(_DWORD *)(v3 + 152) != v25 )
  {
    v27 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 152) = v25;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v27 + 36))(v27, v25, 0, 0);
    result = (int)v42;
  }
  if ( *(_DWORD *)(v3 + 156) != result )
  {
    *(_DWORD *)(v3 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v3 + 8) + 64))(
               *(_DWORD *)(v3 + 8),
               0,
               1,
               &v42);
  }
  return result;
}
// 1006CC04: using guessed type wchar_t a_alien_dx11[12];
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1003C080) --------------------------------------------------------
int __usercall sub_1003C080@<eax>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // ebp@0
  int v3; // ebx@1
  int v4; // ecx@1
  int v5; // esi@1
  const void *v6; // edx@4
  int v7; // ecx@5
  const void *v8; // ecx@6
  __int16 v9; // ax@7
  int v10; // eax@9
  int v11; // ecx@12
  void *v12; // eax@12
  int v13; // ST28_4@17
  int v14; // ST24_4@17
  int v15; // ST20_4@17
  char v16; // al@17
  int v17; // edi@18
  int v18; // eax@18
  int v19; // ebx@20
  int v20; // ecx@21
  int v21; // eax@21
  int v22; // edx@25
  int result; // eax@25
  int v24; // eax@26
  int v25; // eax@30
  int v26; // [sp-10h] [bp-88h]@0
  int v27; // [sp-Ch] [bp-84h]@11
  LPVOID lpMem; // [sp+10h] [bp-68h]@9
  int v29; // [sp+20h] [bp-58h]@12
  unsigned int v30; // [sp+24h] [bp-54h]@9
  LPVOID v31; // [sp+28h] [bp-50h]@4
  int v32; // [sp+38h] [bp-40h]@4
  unsigned int v33; // [sp+3Ch] [bp-3Ch]@4
  LPVOID v34; // [sp+40h] [bp-38h]@12
  int v35; // [sp+44h] [bp-34h]@12
  int v36; // [sp+48h] [bp-30h]@12
  int v37; // [sp+4Ch] [bp-2Ch]@2
  int v38; // [sp+50h] [bp-28h]@12
  int v39; // [sp+54h] [bp-24h]@18
  int v40; // [sp+58h] [bp-20h]@21
  int v41; // [sp+5Ch] [bp-1Ch]@1
  int v42; // [sp+60h] [bp-18h]@1
  int v43; // [sp+64h] [bp-14h]@1
  int v44; // [sp+68h] [bp-10h]@11
  int v45; // [sp+74h] [bp-4h]@9

  v3 = a1;
  v41 = 0;
  v42 = a1;
  sub_10002D30(a1 + 376, (int)&v43, (int)&v41);
  v5 = v43;
  if ( v43 == *(_DWORD *)(v3 + 380) )
  {
    v43 = (int)&v41;
    sub_10002E90(v3 + 376, (int)&v37, v4, (int)&v43, v4);
    v5 = v37;
  }
  if ( !*(_DWORD *)(v5 + 12) )
  {
    v33 = 7;
    v32 = 0;
    v6 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v31) = 0;
    if ( *(_WORD *)v6 )
    {
      v8 = v6;
      a2 = (int)((char *)v6 + 2);
      do
      {
        v9 = *(_WORD *)v8;
        v8 = (char *)v8 + 2;
      }
      while ( v9 );
      v7 = (signed int)((char *)v8 - a2) >> 1;
    }
    else
    {
      v7 = 0;
    }
    sub_10001460((int)&v31, v6, v7);
    v45 = 0;
    v10 = sub_100026A0((int)&lpMem);
    LOBYTE(v45) = 1;
    sub_100017B0((int)&v31, v10, 0, 0xFFFFFFFF);
    LOBYTE(v45) = 0;
    if ( v30 >= 8 )
      sub_10001E40(v3, a2, lpMem, v30 + 1);
    sub_10001680((int)&v31, L"_ALIEN_DX11", 0xBu);
    sub_10001680((int)&v31, L".vsh", 4u);
    if ( sub_10028FF8(v3, a2, (int)&v44) )
    {
      v34 = 0;
      v35 = 0;
      v36 = 0;
      LOBYTE(v45) = 2;
      v37 = 0;
      v38 = 0;
      sub_100027D0((int)&v34, (unsigned int)&v37);
      v30 = 15;
      v29 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "vs_main", 7u);
      LOBYTE(v45) = 3;
      v12 = &lpMem;
      if ( v30 >= 0x10 )
        v12 = lpMem;
      sub_10040760(
        (void *)v3,
        (int)&v43,
        L"ALIEN_VSH",
        (int)&v43,
        (int)v34,
        (int)&v43,
        (int)v12,
        (int)"vs_5_0",
        v26,
        v27,
        (int)&v43,
        v11);
      LOBYTE(v45) = 2;
      if ( v30 >= 0x10 )
        sub_10001EA0(v3, a2, lpMem, v30 + 1);
      if ( !sub_10028FF8(v3, a2, (int)&v44) )
      {
        v13 = v44;
        v14 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v43 + 16))(v43, 1);
        v15 = v43;
        v16 = (*(int (**)(void))(*(_DWORD *)v43 + 12))();
        sub_1002936D(v3, a2, v16, v15, v14, v13);
        sub_100290B5(v3, v2, a2);
      }
      v17 = (*(int (__stdcall **)(int))(*(_DWORD *)v43 + 16))(v43);
      v18 = (*(int (__stdcall **)(int))(*(_DWORD *)v43 + 12))(v43);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v3 + 4) + 48))(
        *(_DWORD *)(v3 + 4),
        v18,
        v17,
        0,
        &v39);
      LOBYTE(v45) = 0;
      v3 = v42;
      if ( v34 )
        sub_100029D0(v42, v17, v34, (v36 - (signed int)v34) >> 3);
    }
    else
    {
      sub_1002C003(v3, a2);
      v19 = sub_1002BD3E(v3, a2, v44);
      sub_1002C01E(v19, v2, a2);
      v17 = (int)sub_1002C36D(v19);
      sub_1002C2BD(v19, v17);
      sub_100290B5(v19, v2, v17);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v42 + 4) + 48))(
        *(_DWORD *)(v42 + 4),
        v17,
        v19,
        0,
        &v39);
      sub_1002C0EC((LPVOID)v17);
      v3 = v42;
    }
    v40 = 0;
    v42 = 0;
    sub_10002D30(v3 + 376, (int)&v43, (int)&v42);
    v21 = v43;
    if ( v43 == *(_DWORD *)(v3 + 380) )
    {
      v43 = (int)&v42;
      sub_10002E90(v3 + 376, (int)&v37, v20, (int)&v43, v20);
      v21 = v37;
    }
    *(_DWORD *)(v21 + 12) = v39;
    *(_DWORD *)(v21 + 16) = v40;
    v45 = -1;
    if ( v33 >= 8 )
      sub_10001E40(v3, v17, v31, v33 + 1);
  }
  v22 = *(_DWORD *)(v5 + 12);
  result = 0;
  v42 = 0;
  if ( *(_DWORD *)(v3 + 140) != v22 )
  {
    v24 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 140) = v22;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v24 + 44))(v24, v22, 0, 0);
    result = v42;
  }
  if ( *(_DWORD *)(v3 + 144) != result )
  {
    *(_DWORD *)(v3 + 144) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v3 + 8) + 28))(
               *(_DWORD *)(v3 + 8),
               0,
               1,
               &v42);
  }
  if ( *(_DWORD *)(v3 + 148) )
  {
    v25 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 148) = 0;
    result = (*(int (__stdcall **)(int, _DWORD))(*(_DWORD *)v25 + 68))(v25, 0);
  }
  return result;
}
// 1006CC04: using guessed type wchar_t a_alien_dx11[12];
// 1006CC1C: using guessed type wchar_t a_vsh[5];
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1003C480) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
char __usercall sub_1003C480@<al>(int a1@<eax>, int a2@<ebx>)
{
  int v2; // ebp@0
  int v3; // edi@1
  char result; // al@1
  int v5; // ecx@2
  signed __int64 v6; // ST24_8@2 OVERLAPPED
  signed __int64 v7; // ST2C_8@2
  __m128i v8; // xmm0@2
  int v9; // eax@2
  int v10; // eax@3
  int v11; // [sp-8h] [bp-98h]@0
  int v12; // [sp-4h] [bp-94h]@0
  const unsigned __int16 *v13; // [sp+0h] [bp-90h]@0
  __int64 v14; // [sp+20h] [bp-70h]@2
  __int128 v15; // [sp+30h] [bp-60h]@2
  __int128 v16; // [sp+40h] [bp-50h]@2
  const __m128i v17; // [sp+50h] [bp-40h]@2
  __int128 v18; // [sp+60h] [bp-30h]@2
  __int128 v19; // [sp+70h] [bp-20h]@2
  __int64 v20; // [sp+80h] [bp-10h]@2
  int v21; // [sp+88h] [bp-8h]@2

  v3 = (int)dword_1007CD80;
  result = sub_10042610(a1, (int)dword_1007CD80, v2, v11, v12);
  if ( result )
  {
    v5 = *(_DWORD *)(v3 + 4);
    *(_QWORD *)&v15 = 2061584302720i64;
    *((_QWORD *)&v15 + 1) = 4294967297i64;
    v18 = v15;
    *(_QWORD *)&v16 = 4294967383i64;
    *((_QWORD *)&v16 + 1) = 0x200000000i64;
    v19 = v16;
    v17.m128i_i64[0] = 281474976710664i64;
    _mm_storel_epi64((__m128i *)&v20, _mm_loadl_epi64(&v17));
    v6 = 17179869271i64;
    v7 = -4294967296i64;
    v15 = *(_OWORD *)&v6;
    v8 = _mm_loadl_epi64((const __m128i *)&v14);
    v21 = 0;
    _mm_storel_epi64((__m128i *)&v16, v8);
    v9 = (*(int (__stdcall **)(int, __int128 *, _DWORD, int, _DWORD))(*(_DWORD *)v5 + 20))(
           v5,
           &v18,
           0,
           v3 + 512,
           L"Failed create texture");
    sub_100410C0(v3, a2, v9, v13);
    result = (*(int (__stdcall **)(_DWORD, _DWORD, char *))(**(_DWORD **)(v3 + 4) + 28))(
               *(_DWORD *)(v3 + 4),
               *(_DWORD *)(v3 + 512),
               (char *)&v15 + 4);
    if ( *(_DWORD *)(v3 + 312) != 5 )
    {
      v10 = *(_DWORD *)(v3 + 8);
      *(_DWORD *)(v3 + 312) = 5;
      result = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v10 + 96))(v10, 5);
    }
  }
  return result;
}
// 1003C480: failed to expand linear variable var80
// 1006DD2C: using guessed type wchar_t aFailedCreateTe[22];

//----- (1003C5D0) --------------------------------------------------------
void *__thiscall sub_1003C5D0(void *this)
{
  void *v1; // esi@1
  void *result; // eax@1

  v1 = this;
  sub_10042AF0(this);
  *((_DWORD *)v1 + 130) = 0;
  sub_10028330((char *)v1 + 528, 0, 0x40000u);
  *((_DWORD *)v1 + 65668) = 1;
  *((_DWORD *)v1 + 65669) = 255;
  *((_DWORD *)v1 + 65674) = 1;
  sub_10028330((char *)v1 + 262704, 0, 0x40000u);
  *((_DWORD *)v1 + 131212) = 1;
  *((_DWORD *)v1 + 131213) = 255;
  result = v1;
  *((_DWORD *)v1 + 128) = 0;
  *((_DWORD *)v1 + 129) = 0;
  return result;
}

//----- (1003C660) --------------------------------------------------------
int __thiscall sub_1003C660(int this)
{
  int v1; // edi@1
  int v2; // ecx@1
  int v3; // eax@1
  int v4; // ST44_4@1
  int v5; // eax@1
  int v6; // ST38_4@1
  int v7; // ST3C_4@1
  int v8; // ST40_4@1
  int v9; // ST44_4@1
  int result; // eax@1
  char v11; // [sp+54h] [bp-34h]@1
  __int128 v12; // [sp+60h] [bp-28h]@1
  int v13; // [sp+70h] [bp-18h]@1
  int v14; // [sp+74h] [bp-14h]@1
  int v15; // [sp+78h] [bp-10h]@1
  int v16; // [sp+7Ch] [bp-Ch]@1
  int v17; // [sp+80h] [bp-8h]@1
  int v18; // [sp+84h] [bp-4h]@1

  v1 = this;
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, char *))(**(_DWORD **)(this + 8) + 56))(
    *(_DWORD *)(this + 8),
    *(_DWORD *)(this + 512),
    0,
    4,
    0,
    &v11);
  sub_1003C830(v1 + 520, *(int *)&v11, v2);
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v1 + 8) + 60))(
    *(_DWORD *)(v1 + 8),
    *(_DWORD *)(v1 + 512),
    0);
  v3 = *(_DWORD *)(v1 + 8);
  v4 = *(_DWORD *)(v1 + 364);
  v12 = 0i64;
  (*(void (__stdcall **)(int, signed int, int, int))(*(_DWORD *)v3 + 132))(v3, 1, v1 + 352, v4);
  (*(void (__stdcall **)(_DWORD, _DWORD, __int128 *))(**(_DWORD **)(v1 + 8) + 200))(
    *(_DWORD *)(v1 + 8),
    *(_DWORD *)(v1 + 352),
    &v12);
  (*(void (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD, _DWORD))(**(_DWORD **)(v1 + 8) + 212))(
    *(_DWORD *)(v1 + 8),
    *(_DWORD *)(v1 + 364),
    1,
    0,
    0);
  v5 = *(_DWORD *)(v1 + 8);
  v15 = 1142947840;
  v16 = 1139802112;
  v13 = 0;
  v14 = 0;
  v17 = 0;
  v18 = 1065353216;
  (*(void (__stdcall **)(int, signed int, int *))(*(_DWORD *)v5 + 176))(v5, 1, &v13);
  sub_10041BF0((void *)v1, 0, 8, 0, 0, (__int64 *)0xFF, 255, 0, 0, 1);
  sub_10041820(v1, 0, 2, 1, v6, v7, v8, v9);
  sub_1003C080(v1, v1);
  sub_1003BCC0(v1, v1);
  (*(void (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)(v1 + 8) + 52))(*(_DWORD *)(v1 + 8), 3, 0);
  result = (*(int (__stdcall **)(_DWORD, int, _DWORD))(**(_DWORD **)v1 + 32))(*(_DWORD *)v1, dword_10239454, 0);
  ++dword_1007CDAC;
  return result;
}
// 1007CDAC: using guessed type int dword_1007CDAC;
// 10239454: using guessed type int dword_10239454;

//----- (1003C7B0) --------------------------------------------------------
int sub_1003C7B0()
{
  int v0; // esi@1
  int v1; // ecx@1
  int v2; // ecx@3

  v0 = (int)dword_1007CD80;
  *(_BYTE *)(v0 + 262736) |= 0xCu;
  v1 = *(_DWORD *)(v0 + 262696);
  if ( !(*(_DWORD *)(v0 + 262740) & *(_DWORD *)(v0 + 262736)) )
    v1 |= 0x80000000;
  (*(void (__fastcall **)(int, _DWORD))(dword_1007CD9C + 384))(v1, 0);
  *(_BYTE *)(v0 + 560) |= 0xCu;
  v2 = *(_DWORD *)(v0 + 520);
  if ( !(*(_DWORD *)(v0 + 564) & *(_DWORD *)(v0 + 560)) )
    v2 |= 0x80000000;
  (*(void (__fastcall **)(int, _DWORD))(dword_1007CD9C + 384))(v2, 0);
  return sub_1003C660(v0);
}
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1003C830) --------------------------------------------------------
int __thiscall sub_1003C830(int this, int a2, int a3)
{
  int result; // eax@1
  unsigned int *v4; // esi@1
  signed int v5; // ebp@1
  signed int v6; // edi@2
  unsigned int v7; // ecx@3

  result = a2;
  v4 = *(unsigned int **)(this + 4);
  v5 = 480;
  do
  {
    v6 = 640;
    do
    {
      v7 = *(_WORD *)v4;
      v4 = (unsigned int *)((char *)v4 + 2);
      *(_DWORD *)result = (unsigned __int8)(((v7 >> 7) & 0xF8) + ((unsigned __int8)((v7 >> 7) & 0xF8) >> 5)) | (((unsigned __int8)(((v7 >> 2) & 0xF8) + ((unsigned __int8)((v7 >> 2) & 0xF8) >> 5)) | (((unsigned __int8)(8 * v7 + ((unsigned __int8)(8 * v7) >> 5)) | (((unsigned __int16)(v7 & 0x8000) != 0 ? 0xFF : 0) << 8)) << 8)) << 8);
      result += 4;
      --v6;
    }
    while ( v6 );
    --v5;
  }
  while ( v5 );
  return result;
}

//----- (1003C910) --------------------------------------------------------
__int16 __thiscall sub_1003C910(void *this, int a2, unsigned int a3)
{
  int v3; // esi@1
  int v4; // ecx@1
  int v5; // eax@5
  int v6; // ecx@6
  int v7; // ebx@9
  unsigned int *v8; // edi@9
  int i; // ebx@9

  v3 = (int)this;
  v4 = a2 & 0x3FFFF;
  if ( (a2 & 0x3FFFFu) > 0x48 )
  {
    if ( v4 == 230400 )
    {
      LOWORD(v5) = sub_1003CA00(v3, a3);
      return v5;
    }
    goto LABEL_13;
  }
  if ( (a2 & 0x3FFFF) == 72 )
  {
    v7 = *(_DWORD *)(v3 + 76);
    v5 = a3 & 1;
    v8 = (unsigned int *)(*(_DWORD *)(v3 + 72) + *(_DWORD *)(v3 + 4));
    *(_DWORD *)(v3 + 80) = v5;
    for ( i = v7 & 0xFFFFFF; i; --i )
    {
      LOWORD(v5) = sub_1003CA00(v3, *v8);
      ++v8;
    }
  }
  else
  {
    if ( v4 != 32 )
    {
      if ( v4 == 36 )
      {
        *(_DWORD *)(v3 + 44) = a3;
        LOWORD(v5) = sub_1003D600(v3);
        return v5;
      }
LABEL_13:
      LOWORD(v5) = a3;
      *(_DWORD *)(v4 + v3 + 8) = a3;
      return v5;
    }
    *(_DWORD *)(v3 + 40) &= a3;
    v6 = *(_DWORD *)v3;
    if ( !(*(_DWORD *)(v3 + 44) & *(_DWORD *)(v3 + 40)) )
      v6 |= 0x80000000;
    LOWORD(v5) = (*(int (__fastcall **)(int, _DWORD))(dword_1007CD9C + 384))(v6, 0);
  }
  return v5;
}
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1003CA00) --------------------------------------------------------
__int16 __thiscall sub_1003CA00(int this, unsigned int a2)
{
  int v2; // eax@2
  bool v3; // zf@22
  unsigned int v4; // edi@34
  int v5; // ebx@34
  int v6; // ebp@34
  int v7; // ebx@34
  int v8; // ebp@34
  unsigned int v9; // esi@35
  int v10; // edx@36
  unsigned int v11; // esi@50
  unsigned int v12; // ebx@50
  int v13; // ebp@50
  int v14; // edi@50
  unsigned int v15; // edx@50
  unsigned int v16; // edi@51
  unsigned int v17; // ebx@52
  unsigned int v18; // eax@53
  int v19; // edx@53
  __int16 v20; // si@53
  unsigned int v21; // eax@53
  int v22; // edx@56
  int v23; // esi@56
  int v24; // eax@56
  unsigned int v25; // edx@56
  int v26; // eax@57
  unsigned int v27; // edi@57
  unsigned int v28; // ebx@58
  unsigned int v29; // eax@59
  int v30; // edx@59
  __int16 v31; // si@59
  unsigned int v32; // eax@59
  int v33; // eax@64
  unsigned int v34; // edi@66
  int v35; // ebx@66
  unsigned int v36; // esi@67
  int v37; // edx@68
  int v38; // eax@72
  unsigned int v39; // esi@74
  unsigned int v40; // ebx@74
  int v41; // ebp@74
  int v42; // edi@74
  int v43; // edx@74
  int v44; // ebx@74
  int v46; // [sp+0h] [bp-24h]@50
  int v47; // [sp+4h] [bp-20h]@50
  unsigned int v48; // [sp+8h] [bp-1Ch]@50
  int v49; // [sp+8h] [bp-1Ch]@56
  unsigned int v50; // [sp+Ch] [bp-18h]@50
  int v51; // [sp+Ch] [bp-18h]@56
  int v52; // [sp+10h] [bp-14h]@50
  int v53; // [sp+14h] [bp-10h]@50
  int v54; // [sp+18h] [bp-Ch]@50
  int v55; // [sp+1Ch] [bp-8h]@51
  unsigned int v56; // [sp+1Ch] [bp-8h]@58
  unsigned int v57; // [sp+20h] [bp-4h]@52
  int v58; // [sp+20h] [bp-4h]@57
  unsigned int v59; // [sp+28h] [bp+4h]@50

  if ( *(_DWORD *)(this + 262152) == 1 )
  {
    v2 = a2 >> 24;
    *(_DWORD *)(this + 262156) = a2 >> 24;
    switch ( a2 >> 24 )
    {
      default:
        return v2;
      case 0x41u:
      case 0x42u:
      case 0x43u:
      case 0x44u:
      case 0x45u:
      case 0x46u:
      case 0x72u:
      case 0x73u:
        *(_DWORD *)(this + 262152) = 2;
        *(_DWORD *)(this + 262172) = 0;
        break;
      case 5u:
      case 9u:
      case 0xBu:
      case 0xFu:
      case 0x70u:
      case 0x71u:
        v2 = (unsigned __int8)(a2 >> 16);
        *(_DWORD *)(this + 262160) = v2;
        *(_DWORD *)(this + 262152) = 2;
        *(_DWORD *)(this + 262172) = 0;
        break;
      case 0xF0u:
        v2 = (unsigned __int8)(a2 >> 16);
        *(_DWORD *)(this + 262160) = v2;
        break;
      case 0xF1u:
        *(_DWORD *)(this + 262152) = 2;
        *(_DWORD *)(this + 262164) = (unsigned __int8)(a2 >> 16);
        LOWORD(v2) = a2;
        *(_DWORD *)(this + 262168) = (unsigned __int16)a2;
        *(_DWORD *)(this + 262172) = 0;
        break;
      case 0xFDu:
        *(_BYTE *)(this + 40) |= 2u;
        LOWORD(v2) = sub_1003D600(this);
        break;
    }
  }
  else
  {
    v2 = *(_DWORD *)(this + 262152) - 2;
    if ( *(_DWORD *)(this + 262152) == 2 )
    {
      v2 = *(_DWORD *)(this + 262156);
      switch ( v2 )
      {
        case 65:
          v2 = *(_DWORD *)(this + 262172);
          switch ( v2 )
          {
            case 0:
              goto LABEL_19;
            case 1:
              goto LABEL_20;
            case 2:
              goto LABEL_21;
            case 3:
              goto LABEL_79;
            default:
              return v2;
          }
          return v2;
        case 67:
          v2 = *(_DWORD *)(this + 262172);
          switch ( v2 )
          {
            case 3:
              *(_DWORD *)(this + 262172) = 4;
              return v2;
            case 4:
              *(_DWORD *)(this + 262172) = 5;
              return v2;
            case 5:
              *(_DWORD *)(this + 262172) = 6;
              return v2;
            case 6:
              *(_DWORD *)(this + 262172) = 7;
              return v2;
            case 7:
              *(_DWORD *)(this + 262172) = 8;
              return v2;
            case 8:
              *(_DWORD *)(this + 262172) = 9;
              return v2;
            case 9:
              *(_DWORD *)(this + 262172) = 10;
              return v2;
            case 10:
              *(_DWORD *)(this + 262172) = 11;
              return v2;
            case 11:
              *(_DWORD *)(this + 262172) = 12;
              return v2;
            case 12:
              *(_DWORD *)(this + 262172) = 13;
              return v2;
            case 13:
              *(_DWORD *)(this + 262172) = 14;
              return v2;
            case 14:
              *(_DWORD *)(this + 262172) = 15;
              return v2;
            case 0:
              goto LABEL_19;
            case 1:
              goto LABEL_20;
            case 2:
              goto LABEL_21;
            case 15:
              goto LABEL_79;
            default:
              return v2;
          }
          return v2;
        case 68:
          v2 = *(_DWORD *)(this + 262172);
          switch ( v2 )
          {
            case 0:
              goto LABEL_19;
            case 1:
LABEL_20:
              *(_DWORD *)(this + 262172) = 2;
              return v2;
            case 2:
LABEL_21:
              *(_DWORD *)(this + 262172) = 3;
              return v2;
            case 3:
              goto LABEL_79;
            default:
              return v2;
          }
          return v2;
        case 70:
        case 113:
        case 115:
          v3 = *(_DWORD *)(this + 262172) == 0;
          goto LABEL_78;
        case 66:
        case 69:
        case 112:
        case 114:
          v2 = *(_DWORD *)(this + 262172);
          if ( !v2 )
          {
LABEL_19:
            *(_DWORD *)(this + 262172) = 1;
            return v2;
          }
          --v2;
          v3 = v2 == 0;
          goto LABEL_78;
        case 15:
          if ( *(_DWORD *)(this + 262160) == 68 )
          {
            v2 = *(_DWORD *)(this + 262172);
            switch ( v2 )
            {
              case 0:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 197192) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 1:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 197196) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 2:
                *(_DWORD *)(this + 197204) = a2 >> 16;
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 197200) = (unsigned __int16)a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 3:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 197208) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 4:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 197212) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 5:
                *(_DWORD *)(this + 197220) = a2 >> 16;
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 197216) = (unsigned __int16)a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 6:
                v4 = 0;
                v5 = *(_DWORD *)(this + 197192);
                v6 = *(_DWORD *)(this + 197208);
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 197228) = a2 >> 16;
                *(_DWORD *)(this + 197224) = (unsigned __int16)a2;
                v7 = *(_DWORD *)(this + 4) + v5;
                v8 = *(_DWORD *)(this + 4) + v6;
                if ( !(a2 >> 16) )
                  goto LABEL_79;
                do
                {
                  v9 = 0;
                  if ( *(_DWORD *)(this + 197224) )
                  {
                    do
                    {
                      v2 = v9
                         + *(_DWORD *)(this + 197200)
                         + *(_DWORD *)(this + 197196) * (v4 + *(_DWORD *)(this + 197204));
                      v10 = v9++
                          + *(_DWORD *)(this + 197216)
                          + *(_DWORD *)(this + 197212) * (v4 + *(_DWORD *)(this + 197220));
                      LOWORD(v2) = *(_WORD *)(v7 + 2 * v2);
                      *(_WORD *)(v8 + 2 * v10) = v2;
                    }
                    while ( v9 < *(_DWORD *)(this + 197224) );
                  }
                  ++v4;
                }
                while ( v4 < *(_DWORD *)(this + 197228) );
                *(_DWORD *)(this + 262152) = 1;
                break;
              default:
                return v2;
            }
          }
          return v2;
        case 5:
          v2 = *(_DWORD *)(this + 262160) - 96;
          if ( (unsigned int)v2 <= 1 )
          {
            v2 = *(_DWORD *)(this + 262172);
            switch ( v2 )
            {
              case 0:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 196616) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 1:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 196620) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 2:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 196624) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 3:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 196628) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 4:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 196632) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 5:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 196636) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 6:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 196640) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 7:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 196644) = a2;
                ++*(_DWORD *)(this + 262172);
                break;
              case 8:
                LOWORD(v2) = a2;
                *(_DWORD *)(this + 196648) = a2;
                if ( *(_DWORD *)(this + 262160) != 96 )
                  goto LABEL_79;
                v11 = *(_DWORD *)(this + 196616);
                v12 = *(_DWORD *)(this + 196620);
                v13 = *(_DWORD *)(this + 196808);
                v14 = *(_DWORD *)(this + 196820);
                v54 = *(_DWORD *)(this + 4) + *(_DWORD *)(this + 197704);
                v52 = *(_WORD *)(this + 197740);
                v53 = *(_DWORD *)(this + 4) + *(_DWORD *)(this + 197716);
                v15 = *(_DWORD *)(this + 196628);
                v59 = *(_DWORD *)(this + 196620);
                v50 = *(_DWORD *)(this + 196628);
                v46 = *(_DWORD *)(this + 196808);
                v47 = *(_DWORD *)(this + 196820);
                v48 = *(_DWORD *)(this + 196616);
                if ( v11 < v11 + *(_DWORD *)(this + 196644) )
                {
                  do
                  {
                    v55 = v14;
                    v16 = v12;
                    if ( v12 < v15 )
                    {
                      v17 = v55;
                      v57 = v11 >> 16;
                      do
                      {
                        v18 = v13;
                        v19 = v52 * (v17 >> 16);
                        v13 += *(_DWORD *)(this + 196812);
                        v17 += *(_DWORD *)(this + 196824);
                        v20 = *(_WORD *)(v53 + 2 * ((v18 >> 16) + v19));
                        v21 = v16;
                        v16 += 0x10000;
                        *(_WORD *)(v54 + 2 * ((v21 >> 16) + v57 * *(_DWORD *)(this + 197708))) = v20;
                        v15 = v50;
                      }
                      while ( v16 < v50 );
                      v12 = v59;
                      v11 = v48;
                    }
                    v11 += 0x10000;
                    v12 += *(_DWORD *)(this + 196624);
                    v15 += *(_DWORD *)(this + 196632);
                    v13 = *(_DWORD *)(this + 196816) + v46;
                    v14 = *(_DWORD *)(this + 196828) + v47;
                    v59 = v12;
                    v50 = v15;
                    v46 += *(_DWORD *)(this + 196816);
                    v47 += *(_DWORD *)(this + 196828);
                    v48 = v11;
                  }
                  while ( v11 < *(_DWORD *)(this + 196644) + *(_DWORD *)(this + 196616) );
                }
                v22 = *(_DWORD *)(this + 196644);
                v23 = *(_DWORD *)(this + 196616);
                v49 = *(_DWORD *)(this + 196636);
                v51 = v22 + v23;
                v24 = v22 + *(_DWORD *)(this + 196648);
                v25 = v22 + v23;
                v2 = v23 + v24;
                if ( v25 >= v2 )
                  goto LABEL_79;
                do
                {
                  v26 = v49;
                  v58 = v14;
                  v27 = v12;
                  if ( v12 < v49 )
                  {
                    v28 = v58;
                    v56 = v25 >> 16;
                    do
                    {
                      v29 = v13;
                      v30 = v52 * (v28 >> 16);
                      v13 += *(_DWORD *)(this + 196812);
                      v28 += *(_DWORD *)(this + 196824);
                      v31 = *(_WORD *)(v53 + 2 * ((v29 >> 16) + v30));
                      v32 = v27;
                      v27 += 0x10000;
                      *(_WORD *)(v54 + 2 * ((v32 >> 16) + v56 * *(_DWORD *)(this + 197708))) = v31;
                      v26 = v49;
                    }
                    while ( v27 < v49 );
                    v12 = v59;
                    v25 = v51;
                  }
                  v25 += 0x10000;
                  v12 += *(_DWORD *)(this + 196624);
                  v13 = *(_DWORD *)(this + 196816) + v46;
                  v14 = *(_DWORD *)(this + 196828) + v47;
                  v49 = *(_DWORD *)(this + 196640) + v26;
                  v2 = *(_DWORD *)(this + 196644) + *(_DWORD *)(this + 196616) + *(_DWORD *)(this + 196648);
                  v59 = v12;
                  v46 += *(_DWORD *)(this + 196816);
                  v47 += *(_DWORD *)(this + 196828);
                  v51 = v25;
                }
                while ( v25 < v2 );
                *(_DWORD *)(this + 262152) = 1;
                break;
              default:
                return v2;
            }
          }
          return v2;
        case 9:
          if ( *(_DWORD *)(this + 262160) != 65 )
            return v2;
          v33 = *(_DWORD *)(this + 262172);
          if ( !v33 )
            goto LABEL_76;
          v2 = v33 - 1;
          if ( v2 )
            return v2;
          v34 = 0;
          v35 = *(_DWORD *)(this + 4) + *(_DWORD *)(this + 197704);
          LOWORD(v2) = a2;
          *(_DWORD *)(this + 197140) = a2 >> 16;
          *(_DWORD *)(this + 197136) = (unsigned __int16)a2;
          if ( !(a2 >> 16) )
            goto LABEL_79;
          do
          {
            v36 = 0;
            if ( *(_DWORD *)(this + 197136) )
            {
              do
              {
                LOWORD(v2) = *(_WORD *)(this + 197768);
                v37 = v36++
                    + *(_DWORD *)(this + 197128)
                    + *(_DWORD *)(this + 197708) * (v34 + *(_DWORD *)(this + 197132));
                *(_WORD *)(v35 + 2 * v37) = v2;
              }
              while ( v36 < *(_DWORD *)(this + 197136) );
            }
            ++v34;
          }
          while ( v34 < *(_DWORD *)(this + 197140) );
          *(_DWORD *)(this + 262152) = 1;
          return v2;
        case 11:
          if ( *(_DWORD *)(this + 262160) != 66 )
            return v2;
          v38 = *(_DWORD *)(this + 262172);
          if ( v38 )
          {
            if ( v38 == 1 )
            {
              *(_DWORD *)(this + 197140) = a2 >> 16;
              LOWORD(v2) = a2;
              *(_DWORD *)(this + 197136) = (unsigned __int16)a2;
              ++*(_DWORD *)(this + 262172);
            }
            else
            {
              v39 = *(_DWORD *)(this + 197136);
              v40 = 2 * *(_DWORD *)(this + 262172) - 4;
              v41 = *(_DWORD *)(this + 4) + *(_DWORD *)(this + 197704);
              v42 = v40 / v39;
              v43 = v40 / v39 + *(_DWORD *)(this + 197132);
              v44 = v40 - v40 / v39 * v39;
              *(_WORD *)(v41 + 2 * (v44 + *(_DWORD *)(this + 197128) + *(_DWORD *)(this + 197708) * v43)) = a2;
              *(_WORD *)(v41
                       + 2
                       * (v44
                        + *(_DWORD *)(this + 197128)
                        + *(_DWORD *)(this + 197708) * (v42 + *(_DWORD *)(this + 197132)))
                       + 2) = HIWORD(a2);
              ++*(_DWORD *)(this + 262172);
              v2 = *(_DWORD *)(this + 262172) - 2;
              v3 = v2 == *(_DWORD *)(this + 197140) * (*(_DWORD *)(this + 197136) >> 1);
LABEL_78:
              if ( v3 )
LABEL_79:
                *(_DWORD *)(this + 262152) = 1;
            }
          }
          else
          {
LABEL_76:
            *(_DWORD *)(this + 197132) = a2 >> 16;
            LOWORD(v2) = a2;
            *(_DWORD *)(this + 197128) = (unsigned __int16)a2;
            ++*(_DWORD *)(this + 262172);
          }
          break;
        case 241:
          *(_DWORD *)(this + 4 * ((*(_DWORD *)(this + 262172))++ + *(_DWORD *)(this + 262168)) + 196616) = a2;
          v2 = *(_DWORD *)(this + 262172);
          v3 = v2 == *(_DWORD *)(this + 262164);
          goto LABEL_78;
        case 6:
        case 7:
        case 8:
        case 10:
        case 12:
        case 13:
        case 14:
        case 16:
        case 17:
        case 18:
        case 19:
        case 20:
        case 21:
        case 22:
        case 23:
        case 24:
        case 25:
        case 26:
        case 27:
        case 28:
        case 29:
        case 30:
        case 31:
        case 32:
        case 33:
        case 34:
        case 35:
        case 36:
        case 37:
        case 38:
        case 39:
        case 40:
        case 41:
        case 42:
        case 43:
        case 44:
        case 45:
        case 46:
        case 47:
        case 48:
        case 49:
        case 50:
        case 51:
        case 52:
        case 53:
        case 54:
        case 55:
        case 56:
        case 57:
        case 58:
        case 59:
        case 60:
        case 61:
        case 62:
        case 63:
        case 64:
        case 71:
        case 72:
        case 73:
        case 74:
        case 75:
        case 76:
        case 77:
        case 78:
        case 79:
        case 80:
        case 81:
        case 82:
        case 83:
        case 84:
        case 85:
        case 86:
        case 87:
        case 88:
        case 89:
        case 90:
        case 91:
        case 92:
        case 93:
        case 94:
        case 95:
        case 96:
        case 97:
        case 98:
        case 99:
        case 100:
        case 101:
        case 102:
        case 103:
        case 104:
        case 105:
        case 106:
        case 107:
        case 108:
        case 109:
        case 110:
        case 111:
        case 116:
        case 117:
        case 118:
        case 119:
        case 120:
        case 121:
        case 122:
        case 123:
        case 124:
        case 125:
        case 126:
        case 127:
        case 128:
        case 129:
        case 130:
        case 131:
        case 132:
        case 133:
        case 134:
        case 135:
        case 136:
        case 137:
        case 138:
        case 139:
        case 140:
        case 141:
        case 142:
        case 143:
        case 144:
        case 145:
        case 146:
        case 147:
        case 148:
        case 149:
        case 150:
        case 151:
        case 152:
        case 153:
        case 154:
        case 155:
        case 156:
        case 157:
        case 158:
        case 159:
        case 160:
        case 161:
        case 162:
        case 163:
        case 164:
        case 165:
        case 166:
        case 167:
        case 168:
        case 169:
        case 170:
        case 171:
        case 172:
        case 173:
        case 174:
        case 175:
        case 176:
        case 177:
        case 178:
        case 179:
        case 180:
        case 181:
        case 182:
        case 183:
        case 184:
        case 185:
        case 186:
        case 187:
        case 188:
        case 189:
        case 190:
        case 191:
        case 192:
        case 193:
        case 194:
        case 195:
        case 196:
        case 197:
        case 198:
        case 199:
        case 200:
        case 201:
        case 202:
        case 203:
        case 204:
        case 205:
        case 206:
        case 207:
        case 208:
        case 209:
        case 210:
        case 211:
        case 212:
        case 213:
        case 214:
        case 215:
        case 216:
        case 217:
        case 218:
        case 219:
        case 220:
        case 221:
        case 222:
        case 223:
        case 224:
        case 225:
        case 226:
        case 227:
        case 228:
        case 229:
        case 230:
        case 231:
        case 232:
        case 233:
        case 234:
        case 235:
        case 236:
        case 237:
        case 238:
        case 239:
        case 240:
          return v2;
      }
    }
  }
  return v2;
}

//----- (1003D600) --------------------------------------------------------
int __thiscall sub_1003D600(int this)
{
  bool v1; // zf@1
  int v2; // ecx@1
  int (__fastcall *v3)(_DWORD, _DWORD); // eax@1
  int result; // eax@2

  v1 = (*(_DWORD *)(this + 44) & *(_DWORD *)(this + 40)) == 0;
  v2 = *(_DWORD *)this;
  v3 = *(int (__fastcall **)(_DWORD, _DWORD))(dword_1007CD9C + 384);
  if ( v1 )
    result = v3(v2 | 0x80000000, 0);
  else
    result = v3(v2, 0);
  return result;
}
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1003D690) --------------------------------------------------------
void sub_1003D690()
{
  int v0; // ecx@1
  unsigned int v1; // ecx@8

  v0 = dword_1007CD9C;
  if ( dword_1007CD9C )
  {
    if ( *(_BYTE *)(dword_1007CD9C + 33) && *(_BYTE *)(dword_1007CD9C + 276) )
    {
      sub_1003D710();
      v0 = dword_1007CD9C;
    }
    if ( *(_BYTE *)(v0 + 136) )
      dword_1023946C = (dword_1023946C + 1) % 4;
    if ( *(_BYTE *)(v0 + 137) )
    {
      v1 = ((signed int)(((unsigned __int64)(1431655765i64 * (dword_10239474 + 1)) >> 32) - (dword_10239474 + 1)) >> 1)
         + ((unsigned int)(((unsigned __int64)(1431655765i64 * (dword_10239474 + 1)) >> 32) - (dword_10239474 + 1)) >> 31);
      dword_10239474 += v1 + 1 + 2 * v1;
    }
  }
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1023946C: using guessed type int dword_1023946C;
// 10239474: using guessed type int dword_10239474;

//----- (1003D710) --------------------------------------------------------
int sub_1003D710()
{
  int result; // eax@2

  if ( byte_1007CDB0 )
  {
    ShowCursor(1);
    result = (int)dword_1007CD84;
    byte_1007CDB0 = 0;
    if ( *(_DWORD *)dword_1007CD84 )
      result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)dword_1007CD84 + 40))(
                 *(_DWORD *)dword_1007CD84,
                 0,
                 0);
  }
  else
  {
    ShowCursor(0);
    result = (int)dword_1007CD84;
    byte_1007CDB0 = 1;
    if ( *(_DWORD *)dword_1007CD84 )
      result = (*(int (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)dword_1007CD84 + 40))(
                 *(_DWORD *)dword_1007CD84,
                 1,
                 0);
  }
  return result;
}
// 1007CDB0: using guessed type char byte_1007CDB0;

//----- (1003D780) --------------------------------------------------------
int __usercall sub_1003D780@<eax>(int a1@<ebx>)
{
  LPVOID v1; // esi@1
  int result; // eax@2

  v1 = dword_1007CD84;
  if ( dword_1007CD84 )
  {
    sub_1003E5A0((int)dword_1007CD84, a1);
    result = sub_1000F417(v1);
    dword_1007CD84 = 0;
  }
  return result;
}

//----- (1003D7B0) --------------------------------------------------------
char __usercall sub_1003D7B0@<al>(int a1@<ebx>, int a2@<edi>)
{
  char result; // al@1
  int v3; // ST04_4@2

  result = sub_1003F980(1, a2);
  if ( result )
  {
    v3 = (int)sub_1000F0A6(0x338u);
    dword_1007CD84 = (LPVOID)sub_1003E600(v3, a1, a2);
    result = 1;
  }
  return result;
}

//----- (1003D820) --------------------------------------------------------
LPVOID __fastcall sub_1003D820(unsigned __int8 a1, int a2)
{
  LPVOID result; // eax@1

  result = dword_1007CD84;
  *(_DWORD *)((char *)dword_1007CD84 + a1 + 512) = a2;
  return result;
}

//----- (1003D830) --------------------------------------------------------
int __fastcall sub_1003D830(unsigned __int8 a1)
{
  return *(_DWORD *)((char *)dword_1007CD84 + a1 + 512);
}

//----- (1003D850) --------------------------------------------------------
LPVOID sub_1003D850()
{
  LPVOID result; // eax@1

  result = dword_1007CD84;
  if ( dword_1007CD84 )
    result = (LPVOID)SetEvent(*((HANDLE *)dword_1007CD84 + 193));
  return result;
}

//----- (1003DB50) --------------------------------------------------------
int __thiscall sub_1003DB50(int this)
{
  int v1; // ebp@0
  int v2; // edi@1
  int v3; // ebx@1
  int v4; // esi@1
  const void *v5; // edx@4
  int v6; // ecx@5
  const void *v7; // ecx@6
  __int16 v8; // ax@7
  int v9; // eax@9
  int v10; // ecx@14
  void *v11; // eax@14
  int v12; // ST28_4@19
  int v13; // ST24_4@19
  int v14; // ST20_4@19
  char v15; // al@19
  int v16; // edi@20
  int v17; // eax@20
  int v18; // edi@22
  int v19; // ebx@23
  int v20; // ecx@23
  int v21; // eax@23
  int v22; // ecx@28
  char v23; // al@28
  int v24; // ecx@30
  int v25; // edx@33
  int result; // eax@33
  int v27; // eax@34
  int v28; // [sp-10h] [bp-90h]@0
  int v29; // [sp-Ch] [bp-8Ch]@11
  LPVOID lpMem; // [sp+Ch] [bp-74h]@9
  int v31; // [sp+1Ch] [bp-64h]@14
  unsigned int v32; // [sp+20h] [bp-60h]@9
  LPVOID v33; // [sp+24h] [bp-5Ch]@4
  int v34; // [sp+34h] [bp-4Ch]@4
  unsigned int v35; // [sp+38h] [bp-48h]@4
  LPVOID v36; // [sp+3Ch] [bp-44h]@12
  int v37; // [sp+40h] [bp-40h]@12
  int v38; // [sp+44h] [bp-3Ch]@12
  int v39; // [sp+48h] [bp-38h]@2
  int v40; // [sp+4Ch] [bp-34h]@13
  int v41; // [sp+50h] [bp-30h]@1
  int v42; // [sp+54h] [bp-2Ch]@1
  int *v43; // [sp+58h] [bp-28h]@1
  int v44; // [sp+5Ch] [bp-24h]@1
  int v45; // [sp+60h] [bp-20h]@1
  int v46; // [sp+64h] [bp-1Ch]@1
  int v47; // [sp+68h] [bp-18h]@23
  int v48; // [sp+6Ch] [bp-14h]@16
  int v49; // [sp+70h] [bp-10h]@11
  int v50; // [sp+7Ch] [bp-4h]@9

  v2 = this;
  v42 = 0;
  v46 = this;
  v3 = byte_102394CA != 0;
  v44 = byte_102394CA != 0;
  v41 = byte_102394CA != 0;
  v43 = (int *)(this + 412);
  sub_10002CB0((void *)(this + 412), (int)&v45, (int)&v41);
  v4 = v45;
  if ( v45 == *(_DWORD *)(v2 + 416) )
  {
    v45 = (int)&v41;
    sub_10002E30(v2 + 412, (int)&v39, v2 + 412, (int)&v45, v2 + 412);
    v4 = v39;
  }
  if ( !*(_DWORD *)(v4 + 16) )
  {
    v35 = 7;
    v34 = 0;
    v5 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v33) = 0;
    if ( *(_WORD *)v5 )
    {
      v7 = v5;
      v45 = (int)((char *)v5 + 2);
      do
      {
        v8 = *(_WORD *)v7;
        v7 = (char *)v7 + 2;
      }
      while ( v8 );
      v6 = (signed int)((char *)v7 - v45) >> 1;
    }
    else
    {
      v6 = 0;
    }
    sub_10001460((int)&v33, v5, v6);
    v50 = 0;
    v9 = sub_100026C0((int)&lpMem, v3);
    LOBYTE(v50) = 1;
    sub_100017B0((int)&v33, v9, 0, 0xFFFFFFFF);
    LOBYTE(v50) = 0;
    if ( v32 >= 8 )
      sub_10001E40(v3, v2, lpMem, v32 + 1);
    sub_10001680((int)&v33, L"_CAVEV00", 8u);
    sub_10001680((int)&v33, L".psh", 4u);
    if ( sub_10028FF8(v3, v2, (int)&v49) )
    {
      v36 = 0;
      v37 = 0;
      v38 = 0;
      LOBYTE(v50) = 2;
      if ( v3 )
      {
        v39 = (int)"BILINEAR";
        v40 = (int)"1";
        sub_100027D0((int)&v36, (unsigned int)&v39);
      }
      v39 = 0;
      v40 = 0;
      sub_100027D0((int)&v36, (unsigned int)&v39);
      v32 = 15;
      v31 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "ps_main", 7u);
      LOBYTE(v50) = 3;
      v11 = &lpMem;
      if ( v32 >= 0x10 )
        v11 = lpMem;
      sub_10040760(
        (void *)v2,
        (int)&v48,
        L"CAVE3RD_PSH",
        (int)&v48,
        (int)v36,
        (int)&v48,
        (int)v11,
        (int)"ps_5_0",
        v28,
        v29,
        (int)&v48,
        v10);
      LOBYTE(v50) = 2;
      if ( v32 >= 0x10 )
        sub_10001EA0(v3, v2, lpMem, v32 + 1);
      if ( !sub_10028FF8(v3, v2, (int)&v49) )
      {
        v12 = v49;
        v13 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v48 + 16))(v48, 1);
        v14 = v48;
        v15 = (*(int (**)(void))(*(_DWORD *)v48 + 12))();
        sub_1002936D(v3, v2, v15, v14, v13, v12);
        sub_100290B5(v3, v1, v2);
      }
      v16 = (*(int (__stdcall **)(int))(*(_DWORD *)v48 + 16))(v48);
      v17 = (*(int (__stdcall **)(int))(*(_DWORD *)v48 + 12))(v48);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v46 + 4) + 60))(
        *(_DWORD *)(v46 + 4),
        v17,
        v16,
        0,
        &v45);
      LOBYTE(v50) = 0;
      v3 = v44;
      if ( v36 )
        sub_100029D0(v44, v16, v36, (v38 - (signed int)v36) >> 3);
    }
    else
    {
      sub_1002C003(v3, v2);
      v18 = sub_1002BD3E(v3, v2, v49);
      v48 = v18;
      sub_1002C01E(v3, v1, v18);
      v16 = (int)sub_1002C36D(v18);
      sub_1002C2BD(v3, v16);
      sub_100290B5(v3, v1, v16);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v46 + 4) + 60))(
        *(_DWORD *)(v46 + 4),
        v16,
        v48,
        0,
        &v45);
      sub_1002C0EC((LPVOID)v16);
    }
    v47 = v3;
    v19 = (int)v43;
    v48 = 0;
    sub_10002CB0(v43, (int)&v44, (int)&v47);
    v21 = v44;
    if ( v44 == *(_DWORD *)(v19 + 4) )
    {
      v43 = &v47;
      sub_10002E30(v19, (int)&v39, v20, (int)&v43, v20);
      v21 = v39;
    }
    *(_DWORD *)(v21 + 16) = v45;
    v50 = -1;
    if ( v35 >= 8 )
      sub_10001E40(v19, v16, v33, v35 + 1);
    v2 = v46;
  }
  v22 = *(_DWORD *)(v2 + 788);
  v23 = 0;
  if ( *(_DWORD *)(v2 + 276) != v22 )
  {
    v23 = 1;
    *(_DWORD *)(v2 + 276) = v22;
  }
  v24 = *(_DWORD *)(v2 + 8);
  if ( v24 && v23 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v24 + 32))(v24, 0, 1, v2 + 788);
  v25 = *(_DWORD *)(v4 + 16);
  result = 0;
  v46 = 0;
  if ( *(_DWORD *)(v2 + 152) != v25 )
  {
    v27 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 152) = v25;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v27 + 36))(v27, v25, 0, 0);
    result = v46;
  }
  if ( *(_DWORD *)(v2 + 156) != result )
  {
    *(_DWORD *)(v2 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 64))(
               *(_DWORD *)(v2 + 8),
               0,
               1,
               &v46);
  }
  return result;
}
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006D5F0: using guessed type wchar_t a_cavev00[9];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 102394CA: using guessed type char byte_102394CA;

//----- (1003DF50) --------------------------------------------------------
int __thiscall sub_1003DF50(void *this)
{
  int v1; // ebp@0
  int v2; // ebx@1
  int v3; // esi@1
  int v4; // edi@1
  const void *v5; // edx@4
  int v6; // ecx@5
  const void *v7; // ecx@6
  __int16 v8; // ax@7
  int v9; // eax@9
  int v10; // ecx@17
  void *v11; // eax@17
  int v12; // ST28_4@22
  int v13; // ST24_4@22
  int v14; // ST20_4@22
  char v15; // al@22
  int v16; // ebx@23
  int v17; // eax@23
  int v18; // ebx@25
  LPVOID v19; // ebx@25
  int v20; // ebx@26
  int v21; // ecx@26
  int v22; // eax@26
  int v23; // edx@31
  int result; // eax@31
  int v25; // eax@32
  int v26; // eax@36
  int v27; // [sp-10h] [bp-90h]@0
  int v28; // [sp-Ch] [bp-8Ch]@11
  LPVOID lpMem; // [sp+10h] [bp-70h]@9
  int v30; // [sp+20h] [bp-60h]@17
  unsigned int v31; // [sp+24h] [bp-5Ch]@9
  LPVOID v32; // [sp+28h] [bp-58h]@4
  int v33; // [sp+38h] [bp-48h]@4
  unsigned int v34; // [sp+3Ch] [bp-44h]@4
  LPVOID v35; // [sp+40h] [bp-40h]@12
  int v36; // [sp+44h] [bp-3Ch]@12
  int v37; // [sp+48h] [bp-38h]@12
  int v38; // [sp+4Ch] [bp-34h]@2
  int v39; // [sp+50h] [bp-30h]@17
  int v40; // [sp+54h] [bp-2Ch]@23
  int v41; // [sp+58h] [bp-28h]@26
  int v42; // [sp+5Ch] [bp-24h]@1
  int v43; // [sp+60h] [bp-20h]@1
  int v44; // [sp+64h] [bp-1Ch]@1
  int v45; // [sp+68h] [bp-18h]@1
  int v46; // [sp+6Ch] [bp-14h]@1
  int v47; // [sp+70h] [bp-10h]@11
  int v48; // [sp+7Ch] [bp-4h]@9

  v2 = (int)this;
  v45 = (int)this;
  v3 = dword_1023946C & 3;
  v43 = dword_1023946C & 3;
  v44 = dword_1023946C & 3;
  v42 = (int)((char *)this + 376);
  sub_10002D30((int)((char *)this + 376), (int)&v46, (int)&v44);
  v4 = v46;
  if ( v46 == *(_DWORD *)(v2 + 380) )
  {
    v46 = (int)&v44;
    sub_10002E90(v2 + 376, (int)&v38, v2 + 376, (int)&v46, v2 + 376);
    v4 = v38;
  }
  if ( !*(_DWORD *)(v4 + 12) )
  {
    v34 = 7;
    v33 = 0;
    v5 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v32) = 0;
    if ( *(_WORD *)v5 )
    {
      v7 = v5;
      v46 = (int)((char *)v5 + 2);
      do
      {
        v8 = *(_WORD *)v7;
        v7 = (char *)v7 + 2;
      }
      while ( v8 );
      v6 = (signed int)((char *)v7 - v46) >> 1;
    }
    else
    {
      v6 = 0;
    }
    sub_10001460((int)&v32, v5, v6);
    v48 = 0;
    v9 = sub_100026C0((int)&lpMem, v3);
    LOBYTE(v48) = 1;
    sub_100017B0((int)&v32, v9, 0, 0xFFFFFFFF);
    LOBYTE(v48) = 0;
    if ( v31 >= 8 )
      sub_10001E40(v2, v4, lpMem, v31 + 1);
    sub_10001680((int)&v32, L"_CAVEV00", 8u);
    sub_10001680((int)&v32, L".vsh", 4u);
    if ( sub_10028FF8(v2, v4, (int)&v47) )
    {
      v35 = 0;
      v36 = 0;
      v37 = 0;
      LOBYTE(v48) = 2;
      switch ( v3 )
      {
        case 0:
          v38 = (int)"ROTATE_0";
          break;
        case 1:
          v38 = (int)"ROTATE_90";
          break;
        case 2:
          v38 = (int)"ROTATE_180";
          break;
        case 3:
          v38 = (int)"ROTATE_270";
          break;
      }
      v39 = (int)"1";
      sub_100027D0((int)&v35, (unsigned int)&v38);
      v38 = 0;
      v39 = 0;
      sub_100027D0((int)&v35, (unsigned int)&v38);
      v31 = 15;
      v30 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "vs_main", 7u);
      LOBYTE(v48) = 3;
      v11 = &lpMem;
      if ( v31 >= 0x10 )
        v11 = lpMem;
      sub_10040760(
        (void *)v2,
        (int)&v46,
        L"CAVE3RD_VSH",
        (int)&v46,
        (int)v35,
        (int)&v46,
        (int)v11,
        (int)"vs_5_0",
        v27,
        v28,
        (int)&v46,
        v10);
      LOBYTE(v48) = 2;
      if ( v31 >= 0x10 )
        sub_10001EA0(v2, v4, lpMem, v31 + 1);
      if ( !sub_10028FF8(v2, v4, (int)&v47) )
      {
        v12 = v47;
        v13 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v46 + 16))(v46, 1);
        v14 = v46;
        v15 = (*(int (**)(void))(*(_DWORD *)v46 + 12))();
        sub_1002936D(v2, v4, v15, v14, v13, v12);
        sub_100290B5(v2, v1, v4);
      }
      v16 = (*(int (__stdcall **)(int))(*(_DWORD *)v46 + 16))(v46);
      v17 = (*(int (__stdcall **)(int))(*(_DWORD *)v46 + 12))(v46);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v45 + 4) + 48))(
        *(_DWORD *)(v45 + 4),
        v17,
        v16,
        0,
        &v40);
      LOBYTE(v48) = 0;
      v3 = v43;
      if ( v35 )
        sub_100029D0(v16, v4, v35, (v37 - (signed int)v35) >> 3);
    }
    else
    {
      sub_1002C003(v2, v4);
      v18 = sub_1002BD3E(v2, v4, v47);
      v46 = v18;
      sub_1002C01E(v18, v1, v4);
      v19 = sub_1002C36D(v18);
      sub_1002C2BD((int)v19, v4);
      sub_100290B5((int)v19, v1, v4);
      (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v45 + 4) + 48))(
        *(_DWORD *)(v45 + 4),
        v19,
        v46,
        0,
        &v40);
      sub_1002C0EC(v19);
    }
    v20 = v42;
    v41 = 0;
    v46 = v3;
    sub_10002D30(v42, (int)&v43, (int)&v46);
    v22 = v43;
    if ( v43 == *(_DWORD *)(v20 + 4) )
    {
      v42 = (int)&v46;
      sub_10002E90(v20, (int)&v38, v21, (int)&v42, v21);
      v22 = v38;
    }
    *(_DWORD *)(v22 + 12) = v40;
    *(_DWORD *)(v22 + 16) = v41;
    v48 = -1;
    if ( v34 >= 8 )
      sub_10001E40(v20, v4, v32, v34 + 1);
    v2 = v45;
  }
  v23 = *(_DWORD *)(v4 + 12);
  result = 0;
  v45 = 0;
  if ( *(_DWORD *)(v2 + 140) != v23 )
  {
    v25 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 140) = v23;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v25 + 44))(v25, v23, 0, 0);
    result = v45;
  }
  if ( *(_DWORD *)(v2 + 144) != result )
  {
    *(_DWORD *)(v2 + 144) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 28))(
               *(_DWORD *)(v2 + 8),
               0,
               1,
               &v45);
  }
  if ( *(_DWORD *)(v2 + 148) )
  {
    v26 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 148) = 0;
    result = (*(int (__stdcall **)(int, _DWORD))(*(_DWORD *)v26 + 68))(v26, 0);
  }
  return result;
}
// 1006CC1C: using guessed type wchar_t a_vsh[5];
// 1006D5F0: using guessed type wchar_t a_cavev00[9];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1023946C: using guessed type int dword_1023946C;

//----- (1003E370) --------------------------------------------------------
int __thiscall sub_1003E370(int this, float a2, int a3, int a4, int a5)
{
  unsigned int v5; // eax@1
  __m128d v6; // xmm0@1
  unsigned int v7; // eax@1
  float v8; // xmm5_4@1
  __m128d v9; // xmm0@1
  int result; // eax@1
  float v11; // xmm4_4@1
  int v12; // eax@2
  int v13; // eax@3
  float v14; // xmm1_4@5
  float v15; // xmm3_4@11

  v5 = *(_DWORD *)(this + 792);
  v6 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(this + 792));
  *LODWORD(a2) = 0;
  *(_DWORD *)a3 = 0;
  v6.m128d_f64[0] = v6.m128d_f64[0] + *(double *)&qword_1006EEC0[v5 >> 31];
  v7 = *(_DWORD *)(this + 796);
  LODWORD(v8) = (unsigned __int128)_mm_cvtpd_ps(v6);
  v9 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v7);
  *(float *)a4 = v8;
  v9.m128d_f64[0] = v9.m128d_f64[0] + *(double *)&qword_1006EEC0[v7 >> 31];
  result = dword_10239474;
  LODWORD(v11) = (unsigned __int128)_mm_cvtpd_ps(v9);
  *(float *)a5 = v11;
  if ( !result )
    return result;
  v12 = result - 1;
  if ( v12 )
  {
    v13 = v12 - 1;
    if ( !v13 )
    {
      v14 = 1.7777778;
      goto LABEL_8;
    }
    if ( v13 != 1 )
    {
      v14 = a2;
      goto LABEL_8;
    }
  }
  v14 = 1.3333334;
LABEL_8:
  result = dword_1023946C;
  if ( dword_1023946C == 1 || dword_1023946C == 3 )
    v14 = 1.0 / v14;
  v15 = (float)(v8 / v11) / v14;
  if ( v15 >= 1.0 )
  {
    *(float *)a4 = v8 * (float)(1.0 / v15);
    *LODWORD(a2) = (float)((float)(1.0 - (float)(1.0 / v15)) * v8) * 0.5;
  }
  else
  {
    *(float *)a5 = v11 * v15;
    *(float *)a3 = (float)((float)(1.0 - v15) * v11) * 0.5;
  }
  return result;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];
// 1023946C: using guessed type int dword_1023946C;
// 10239474: using guessed type int dword_10239474;

//----- (1003E490) --------------------------------------------------------
char __thiscall sub_1003E490(void *this)
{
  int v1; // edi@1
  char v2; // cl@1
  char result; // al@6
  int v4; // eax@9

  v1 = (int)this;
  v2 = byte_1007CDB0;
  if ( *(_DWORD *)(v1 + 804) != dword_1023946C
    || *(_BYTE *)(v1 + 800) != byte_1007CDB0
    || dword_10239480 != *(_DWORD *)(v1 + 808)
    || dword_10239484 != *(_DWORD *)(v1 + 812)
    || *(_DWORD *)(v1 + 816) != dword_10239474 )
  {
    *(_DWORD *)(v1 + 804) = dword_1023946C;
    *(_BYTE *)(v1 + 800) = v2;
    *(_DWORD *)(v1 + 808) = dword_10239480;
    *(_DWORD *)(v1 + 812) = dword_10239484;
    *(_DWORD *)(v1 + 816) = dword_10239474;
    if ( v2 )
    {
      *(_DWORD *)(v1 + 792) = GetSystemMetrics(0);
      *(_DWORD *)(v1 + 796) = GetSystemMetrics(1);
    }
    else
    {
      switch ( dword_1023946C )
      {
        case 0:
        case 2:
          *(_DWORD *)(v1 + 792) = dword_10239480;
          v4 = dword_10239484;
          goto LABEL_11;
        case 1:
        case 3:
          *(_DWORD *)(v1 + 792) = dword_10239484;
          v4 = dword_10239480;
LABEL_11:
          *(_DWORD *)(v1 + 796) = v4;
          break;
        default:
          break;
      }
      sub_100402B0(*(_DWORD *)(v1 + 792), *(_DWORD *)(v1 + 796));
    }
    sub_100411F0(v1, *(_QWORD *)(v1 + 792));
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1007CDB0: using guessed type char byte_1007CDB0;
// 1023946C: using guessed type int dword_1023946C;
// 10239474: using guessed type int dword_10239474;
// 10239480: using guessed type int dword_10239480;
// 10239484: using guessed type int dword_10239484;

//----- (1003E5A0) --------------------------------------------------------
int __usercall sub_1003E5A0@<eax>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // esi@1
  void *v3; // ST04_4@2

  v2 = a1;
  if ( *(_DWORD *)(a1 + 776) )
  {
    v3 = *(void **)(a1 + 772);
    *(_BYTE *)(a1 + 780) = 1;
    SetEvent(v3);
    while ( *(_DWORD *)(v2 + 776) )
      Sleep(0);
  }
  CloseHandle(*(HANDLE *)(v2 + 772));
  return sub_100026E0(v2, a2);
}

//----- (1003E600) --------------------------------------------------------
int __usercall sub_1003E600@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  int result; // eax@1

  v3 = a1;
  sub_10042AF0((void *)a1);
  *(_DWORD *)(v3 + 816) = 0;
  *(_DWORD *)(v3 + 812) = 0;
  *(_DWORD *)(v3 + 808) = 0;
  *(_DWORD *)(v3 + 804) = 0;
  *(_BYTE *)(v3 + 800) = 0;
  *(_DWORD *)(v3 + 772) = CreateEventW(0, 0, 0, 0);
  *(_BYTE *)(v3 + 780) = 0;
  *(_DWORD *)(v3 + 776) = sub_1002C54B(a2, a3, &loc_10003910, 0, v3);
  *(_DWORD *)(v3 + 768) = 1;
  result = v3;
  *(_DWORD *)(v3 + 820) = 0;
  *(_DWORD *)(v3 + 784) = 0;
  *(_DWORD *)(v3 + 788) = 0;
  return result;
}

//----- (1003E6B0) --------------------------------------------------------
int __usercall sub_1003E6B0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // ebp@0
  int v4; // ST14_4@1
  int v5; // ST0C_4@1
  int v6; // ST10_4@1
  int v7; // ST14_4@1
  int v8; // ST0C_4@1
  int v9; // ST10_4@1
  int v10; // ST14_4@1
  int v11; // ST0C_4@1
  int v12; // ST10_4@1
  int v13; // ST14_4@1
  int v14; // ST0C_4@1
  int v15; // ST10_4@1
  int v16; // ST14_4@1
  int v17; // ST0C_4@1
  int v18; // ST10_4@1
  int v19; // ST14_4@1
  int v20; // ST0C_4@1
  int v21; // ST10_4@1
  int v22; // ST14_4@1
  int v23; // ST0C_4@5
  int v24; // ST10_4@5
  int v25; // ST14_4@5
  int v26; // ST0C_4@5
  int v27; // ST10_4@5
  int v28; // ST14_4@5
  int v29; // ST0C_4@5
  int v30; // ST10_4@5
  int v31; // ST14_4@5
  int v32; // ST0C_4@5
  int v33; // ST10_4@5
  int v34; // ST14_4@5
  int v35; // ST0C_4@5
  int v36; // ST10_4@5
  int v37; // ST14_4@5
  int v38; // ST0C_4@5
  int v39; // ST10_4@5
  int v40; // ST14_4@5
  int v41; // ST0C_4@5
  int v42; // ST10_4@5
  int v43; // ST14_4@5
  int v44; // ecx@5
  int v45; // eax@5
  int v46; // ecx@7
  int v47; // eax@7
  int v48; // ecx@9
  int v49; // ST10_4@9
  int v50; // ST14_4@9
  int v51; // ST0C_4@9
  int v52; // ST10_4@9
  int v53; // ST14_4@9
  int v54; // ecx@9
  int v55; // ST10_4@9
  int v56; // ST14_4@9
  int v57; // ecx@9
  int v58; // ST10_4@9
  int v59; // ST14_4@9
  int v60; // ecx@9
  int v61; // ST10_4@9
  int v62; // ST14_4@9
  int v63; // ecx@9
  int v64; // ST10_4@9
  int v65; // ST14_4@9
  int v66; // ecx@9
  int v68; // [sp-Ch] [bp-64h]@0
  int v69; // [sp-Ch] [bp-64h]@1
  int v70; // [sp-8h] [bp-60h]@0
  int v71; // [sp-8h] [bp-60h]@1
  int v72; // [sp-4h] [bp-5Ch]@1
  char v73; // [sp+0h] [bp-58h]@1
  LPVOID lpMem; // [sp+24h] [bp-34h]@12
  int v75; // [sp+34h] [bp-24h]@13
  unsigned int v76; // [sp+38h] [bp-20h]@11
  int (__thiscall **v77)(LPVOID, char); // [sp+40h] [bp-18h]@10
  int v78; // [sp+44h] [bp-14h]@10
  int v79; // [sp+48h] [bp-10h]@9
  int v80; // [sp+54h] [bp-4h]@1

  sub_10004570((int)&v73, a2, a1);
  v80 = 0;
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"Vsync", dword_10239454, v68, v70, v4);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"AutoSort", dword_10239458, v5, v6, v7);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"NetworkSort", dword_1023945C, v8, v9, v10);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"OModifier", dword_10239464, v11, v12, v13);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"TModifier", dword_10239460, v14, v15, v16);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"JoinTrans", dword_10239468, v17, v18, v19);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"UseFullscreen", dword_10239450, v20, v21, v22);
  if ( dword_1007CD9C && (!*(_DWORD *)(dword_1007CD9C + 284) || dword_10239470) )
    sub_100049A0((int)&v73, a3, (int)L"main", (int)L"rotate", dword_1023946C, v69, v71, v72);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"aspect", dword_10239474, v69, v71, v72);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"scaling", dword_10239478, v23, v24, v25);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"MaxLayers", dword_1023947C, v26, v27, v28);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"NotAutoRotate", dword_10239470, v29, v30, v31);
  sub_100049A0((int)&v73, a3, (int)L"resolution", (int)L"Width", dword_10239480, v32, v33, v34);
  sub_100049A0((int)&v73, a3, (int)L"resolution", (int)L"Height", dword_10239484, v35, v36, v37);
  sub_100049A0((int)&v73, a3, (int)L"shaders", (int)L"usePass1", dword_10239488, v38, v39, v40);
  sub_100049A0((int)&v73, a3, (int)L"shaders", (int)L"usePass2", dword_1023948C, v41, v42, v43);
  v45 = (int)&dword_10239490;
  if ( (unsigned int)dword_102394A4 >= 8 )
    v45 = dword_10239490;
  sub_10004AE0(&v73, (int)L"shaders", (int)L"shaderPass1", v45, 0, v44, 1);
  v47 = (int)&dword_102394A8;
  if ( (unsigned int)dword_102394BC >= 8 )
    v47 = dword_102394A8;
  sub_10004AE0(&v73, (int)L"shaders", (int)L"shaderPass2", v47, 0, v46, 1);
  sub_10004A50(&v73, v48, (int)L"slowpoke", byte_102394C0, v49, v50);
  sub_100049A0((int)&v73, a3, (int)L"main", (int)L"blitperf", uValue, v51, v52, v53);
  sub_10004A50(&v73, v54, (int)L"tlthread", byte_102394C8, v55, v56);
  sub_10004A50(&v73, v57, (int)L"tlcache", byte_102394C9, v58, v59);
  sub_10004A50(&v73, v60, (int)L"bilinearfb", byte_102394CA, v61, v62);
  sub_10004A50(&v73, v63, (int)L"atifix", byte_102394CB, v64, v65);
  v79 = 0;
  sub_10028FF8(a2, a3, (int)&v79);
  if ( v79 )
  {
    v77 = &off_1006DA14;
    v78 = v79;
    LOBYTE(v80) = 1;
    sub_10005D40((int)&v73, a3, (int)&v77, v66);
    sub_100290B5(a2, v3, a3);
  }
  if ( v76 >= 8 )
    sub_10001E40(a2, a3, lpMem, v76 + 1);
  v76 = 7;
  v75 = 0;
  LOWORD(lpMem) = 0;
  return sub_10004700((int)&v73);
}
// 1006D77C: using guessed type wchar_t aVsync[6];
// 1006D788: using guessed type wchar_t aMain[5];
// 1006D794: using guessed type wchar_t aAutosort[9];
// 1006D7A8: using guessed type wchar_t aNetworksort[12];
// 1006D7C0: using guessed type wchar_t aOmodifier[10];
// 1006D7D4: using guessed type wchar_t aTmodifier[10];
// 1006D7E8: using guessed type wchar_t aJointrans[10];
// 1006D7FC: using guessed type wchar_t aUsefullscreen[14];
// 1006D818: using guessed type wchar_t aAspect[7];
// 1006D828: using guessed type wchar_t aMaxlayers[10];
// 1006D83C: using guessed type wchar_t aSlowpoke[9];
// 1006D850: using guessed type wchar_t aBlitperf[9];
// 1006D864: using guessed type wchar_t aTlthread[9];
// 1006D878: using guessed type wchar_t aTlcache[8];
// 1006D888: using guessed type wchar_t aBilinearfb[11];
// 1006D8A0: using guessed type wchar_t aAtifix[7];
// 1006D8B0: using guessed type wchar_t aNotautorotate[14];
// 1006D8CC: using guessed type wchar_t aRotate[7];
// 1006D8DC: using guessed type wchar_t aWidth[6];
// 1006D8E8: using guessed type wchar_t aResolution[11];
// 1006D900: using guessed type wchar_t aHeight[7];
// 1006D910: using guessed type wchar_t aUsepass1[9];
// 1006D924: using guessed type wchar_t aShaders[8];
// 1006D934: using guessed type wchar_t aUsepass2[9];
// 1006D948: using guessed type wchar_t aShaderpass1[12];
// 1006D960: using guessed type wchar_t aShaderpass2[12];
// 1006D978: using guessed type wchar_t aScaling[8];
// 1006DA14: using guessed type int (__thiscall *off_1006DA14)(LPVOID lpMem, char);
// 1007CD9C: using guessed type int dword_1007CD9C;
// 10239450: using guessed type int dword_10239450;
// 10239454: using guessed type int dword_10239454;
// 10239458: using guessed type int dword_10239458;
// 1023945C: using guessed type int dword_1023945C;
// 10239460: using guessed type int dword_10239460;
// 10239464: using guessed type int dword_10239464;
// 10239468: using guessed type int dword_10239468;
// 1023946C: using guessed type int dword_1023946C;
// 10239470: using guessed type int dword_10239470;
// 10239474: using guessed type int dword_10239474;
// 10239478: using guessed type int dword_10239478;
// 1023947C: using guessed type int dword_1023947C;
// 10239480: using guessed type int dword_10239480;
// 10239484: using guessed type int dword_10239484;
// 10239488: using guessed type int dword_10239488;
// 1023948C: using guessed type int dword_1023948C;
// 10239490: using guessed type int dword_10239490;
// 102394A4: using guessed type int dword_102394A4;
// 102394A8: using guessed type int dword_102394A8;
// 102394BC: using guessed type int dword_102394BC;
// 102394C0: using guessed type char byte_102394C0;
// 102394C8: using guessed type char byte_102394C8;
// 102394C9: using guessed type char byte_102394C9;
// 102394CA: using guessed type char byte_102394CA;
// 102394CB: using guessed type char byte_102394CB;

//----- (1003EA30) --------------------------------------------------------
char __usercall sub_1003EA30@<al>(char a1@<bl>, int a2@<edi>)
{
  HWND v2; // eax@1
  int v3; // ecx@1
  char v4; // bl@2
  char v6; // [sp+4h] [bp-88h]@1
  __int16 v7; // [sp+44h] [bp-48h]@1
  int v8; // [sp+54h] [bp-38h]@1
  int v9; // [sp+58h] [bp-34h]@1
  __int16 v10; // [sp+5Ch] [bp-30h]@1
  int v11; // [sp+6Ch] [bp-20h]@1
  int v12; // [sp+70h] [bp-1Ch]@1
  int v13; // [sp+88h] [bp-4h]@1

  v9 = 7;
  v8 = 0;
  v7 = 0;
  v12 = 7;
  v11 = 0;
  v10 = 0;
  v13 = 0;
  sub_10004470(&v6, (int)&dword_10239450);
  v2 = GetActiveWindow();
  if ( DialogBoxParamW(hInstance, (LPCWSTR)0x2715, v2, (DLGPROC)DialogFunc, 0) == 1 )
  {
    sub_1003E6B0(v3, a1, a2);
    v4 = 1;
  }
  else
  {
    sub_10004470(&dword_10239450, (int)&v6);
    v4 = 0;
  }
  sub_100043F0((int)&v6, v4);
  return v4;
}
// 10239450: using guessed type int dword_10239450;

//----- (1003EAE0) --------------------------------------------------------
BOOL __userpurge DialogFunc@<eax>(int a1@<ebx>, int a2@<edi>, HWND hDlg, UINT a4, WPARAM a5, LPARAM a6)
{
  LPVOID j; // ecx@9
  LPVOID i; // ecx@12
  WPARAM v9; // esi@20
  int v10; // edi@21
  int v11; // eax@25
  int v12; // eax@28
  bool v13; // zf@29
  LPVOID v14; // eax@30
  int v15; // eax@31
  LPVOID v16; // eax@39
  int v17; // edi@39
  unsigned int v18; // ebx@39
  char *v19; // esi@40
  int v20; // ecx@40
  WPARAM v21; // ecx@43
  LPVOID v22; // eax@48
  int v23; // esi@48
  unsigned int v24; // edi@48
  int v25; // ecx@49
  WPARAM v26; // eax@52
  WPARAM v27; // esi@58
  int v28; // ebx@58
  unsigned int v29; // edi@58
  LRESULT v30; // eax@59
  LPVOID v31; // edx@59
  signed int v32; // edi@64
  int v33; // ebx@64
  unsigned int v34; // esi@64
  LRESULT v35; // eax@65
  LPVOID v36; // edx@65
  HWND v37; // eax@68
  HWND v38; // eax@68
  BOOL v39; // ST10_4@70
  HWND v40; // eax@70
  BOOL v41; // ST10_4@70
  HWND v42; // eax@70
  BOOL v43; // ST10_4@70
  HWND v44; // eax@70
  int v45; // eax@71
  int v46; // eax@76
  DWORD v47; // [sp+4h] [bp-504h]@20
  signed int v48; // [sp+4h] [bp-504h]@39
  signed int v49; // [sp+4h] [bp-504h]@48
  signed int v50; // [sp+8h] [bp-500h]@20
  int v51; // [sp+Ch] [bp-4FCh]@0
  LRESULT v52; // [sp+Ch] [bp-4FCh]@31
  LPARAM v53; // [sp+10h] [bp-4F8h]@65
  LPARAM lParam; // [sp+18h] [bp-4F0h]@59
  DEVMODEW DevMode; // [sp+2Ch] [bp-4DCh]@20
  int v56[128]; // [sp+108h] [bp-400h]@25
  int v57[128]; // [sp+308h] [bp-200h]@20

  if ( a4 != 272 )
  {
    if ( a4 != 273 )
      return 0;
    if ( (unsigned __int16)a5 > 0x7E6u )
    {
      switch ( (unsigned __int16)a5 )
      {
        case 0x803u:
        case 0x804u:
        case 0x805u:
        case 0x807u:
        case 0x808u:
        case 0x815u:
        case 0x816u:
        case 0x817u:
        case 0x818u:
          goto LABEL_17;
        default:
          return 0;
      }
      return 0;
    }
    if ( (unsigned __int16)a5 < 0x7E5u )
    {
      if ( (unsigned __int16)a5 > 0x7D9u )
      {
        if ( (unsigned __int16)a5 < 0x7DDu || (unsigned __int16)a5 > 0x7E3u )
          return 0;
      }
      else if ( (unsigned __int16)a5 < 0x7D2u )
      {
        if ( (unsigned __int16)a5 == 1 )
        {
          sub_1003F480(hDlg);
          for ( i = dword_1007CD8C; dword_1007CD8C; i = dword_1007CD8C )
          {
            dword_1007CD8C = (LPVOID)*((_DWORD *)i + 131);
            sub_1000F417(i);
          }
          dword_1007CD8C = 0;
          sub_1000F0A1(lpMem);
          lpMem = 0;
          sub_1000F0A1(dword_1007CD94);
          dword_1007CD94 = 0;
          sub_1000F0A1(dword_1007CD88);
          dword_1007CD88 = 0;
          sub_1000F0A1(dword_1007CD90);
          dword_1007CD90 = 0;
          EndDialog(hDlg, 1);
          return 1;
        }
        if ( (unsigned __int16)a5 == 2 )
        {
          for ( j = dword_1007CD8C; dword_1007CD8C; j = dword_1007CD8C )
          {
            dword_1007CD8C = (LPVOID)*((_DWORD *)j + 131);
            sub_1002C0EC(j);
          }
          dword_1007CD8C = 0;
          sub_1000F0A1(lpMem);
          lpMem = 0;
          sub_1000F0A1(dword_1007CD94);
          dword_1007CD94 = 0;
          sub_1000F0A1(dword_1007CD88);
          dword_1007CD88 = 0;
          sub_1000F0A1(dword_1007CD90);
          dword_1007CD90 = 0;
          EndDialog(hDlg, 0);
          return 1;
        }
        return 0;
      }
    }
LABEL_17:
    sub_1003F480(hDlg);
    return 0;
  }
  dword_1007CD8C = 0;
  sub_10004390(a1, a2, v57, 256, (int)L"%ldx%ld", dword_10239480);
  v47 = 0;
  v9 = -1;
  v50 = -1;
  if ( !EnumDisplaySettingsW(0, 0, &DevMode) )
    goto LABEL_39;
  v10 = v51;
  do
  {
    if ( DevMode.dmBitsPerPel != 32 )
      goto LABEL_36;
    if ( !dword_1007CD8C )
    {
      v10 = (int)sub_1000F0A6(0x210u);
      dword_1007CD8C = (LPVOID)v10;
LABEL_31:
      *(_DWORD *)(v10 + 524) = 0;
      *(_DWORD *)(v10 + 4) = DevMode.dmPelsWidth;
      *(_DWORD *)(v10 + 8) = DevMode.dmPelsHeight;
      sub_10004390((int)SendDlgItemMessageW, v10, (int *)(v10 + 12), 256, (int)L"%lux%lu", SLOBYTE(DevMode.dmPelsWidth));
      v52 = SendDlgItemMessageW(hDlg, 2012, 0x143u, 0, v10 + 12);
      *(_DWORD *)v10 = v52;
      v15 = wcscmp((const unsigned __int16 *)v57, (const unsigned __int16 *)(v10 + 12));
      if ( v15 )
        v15 = -(v15 < 0) | 1;
      v9 = v50;
      if ( !v15 )
        v9 = v52;
      v50 = v9;
      goto LABEL_36;
    }
    sub_10004390((int)SendDlgItemMessageW, v10, v56, 256, (int)L"%lux%lu", SLOBYTE(DevMode.dmPelsWidth));
    v11 = wcscmp((const unsigned __int16 *)(v10 + 12), (const unsigned __int16 *)v56);
    if ( v11 )
      v11 = -(v11 < 0) | 1;
    if ( v11 )
    {
      v12 = v10 + 524;
      if ( *(_DWORD *)(v10 + 524) )
      {
        do
        {
          v10 = *(_DWORD *)v12;
          v13 = *(_DWORD *)(*(_DWORD *)v12 + 524) == 0;
          v12 = *(_DWORD *)v12 + 524;
        }
        while ( !v13 );
      }
      v14 = sub_1000F0A6(0x210u);
      *(_DWORD *)(v10 + 524) = v14;
      v10 = (int)v14;
      goto LABEL_31;
    }
LABEL_36:
    ++v47;
  }
  while ( EnumDisplaySettingsW(0, v47, &DevMode) );
  if ( v9 != -1 )
    SendDlgItemMessageW(hDlg, 2012, 0x14Eu, v9, 0);
LABEL_39:
  v48 = -1;
  v16 = sub_1000F40E(0xE1Cu);
  lpMem = v16;
  v17 = 0;
  v18 = 0;
  do
  {
    sub_1002C7E7(v18 * 4, v17, (int)((char *)v16 + v17 + 4), 256, (int)off_1006CCC0[v18]);
    v19 = (char *)lpMem + v17;
    *(_DWORD *)v19 = SendDlgItemMessageW(hDlg, 2014, 0x143u, 0, (LPARAM)((char *)lpMem + v17 + 4));
    v20 = (int)&dword_10239490;
    if ( (unsigned int)dword_102394A4 >= 8 )
      v20 = dword_10239490;
    v13 = sub_1002C672(v18 * 4, v17, v20, (WCHAR *)v19 + 2) == 0;
    v16 = lpMem;
    if ( v13 )
    {
      v21 = *(_DWORD *)((char *)lpMem + v17);
      v48 = *(_DWORD *)((char *)lpMem + v17);
    }
    else
    {
      v21 = v48;
    }
    ++v18;
    v17 += 516;
  }
  while ( v18 < 7 );
  if ( v21 != -1 )
    SendDlgItemMessageW(hDlg, 2014, 0x14Eu, v21, 0);
  v49 = -1;
  v22 = sub_1000F40E(0xE1Cu);
  dword_1007CD94 = v22;
  v23 = 0;
  v24 = 0;
  while ( 1 )
  {
    sub_1002C7E7((int)SendDlgItemMessageW, v24 * 4, (int)((char *)v22 + v23 + 4), 256, (int)off_1006CCC0[v24]);
    *(_DWORD *)((char *)dword_1007CD94 + v23) = SendDlgItemMessageW(
                                                  hDlg,
                                                  2013,
                                                  0x143u,
                                                  0,
                                                  (LPARAM)((char *)dword_1007CD94 + v23 + 4));
    v25 = (int)&dword_102394A8;
    if ( (unsigned int)dword_102394BC >= 8 )
      v25 = dword_102394A8;
    if ( sub_1002C672((int)SendDlgItemMessageW, v24 * 4, v25, (WCHAR *)((char *)lpMem + v23 + 4)) )
    {
      v26 = v49;
    }
    else
    {
      v26 = *(_DWORD *)((char *)lpMem + v23);
      v49 = *(_DWORD *)((char *)lpMem + v23);
    }
    ++v24;
    v23 += 516;
    if ( v24 >= 7 )
      break;
    v22 = dword_1007CD94;
  }
  if ( v26 != -1 )
    SendDlgItemMessageW(hDlg, 2013, 0x14Eu, v26, 0);
  v27 = -1;
  dword_1007CD88 = sub_1000F40E(0x30u);
  v28 = 0;
  v29 = 0;
  do
  {
    sub_10004390(v28, v29 * 4, (int *)&lParam, 10, (int)L"%dx", dword_1006CCE0[v29]);
    *(_DWORD *)((char *)dword_1007CD88 + v28 + 4) = dword_1006CCE0[v29];
    v30 = SendDlgItemMessageW(hDlg, 2019, 0x143u, 0, (LPARAM)&lParam);
    v31 = dword_1007CD88;
    v28 += 8;
    *(_DWORD *)((char *)dword_1007CD88 + v28 - 8) = v30;
    if ( dword_10239478 == *(_DWORD *)((char *)v31 + v28 - 4) )
      v27 = v30;
    ++v29;
  }
  while ( v29 < 6 );
  if ( v27 != -1 )
    SendDlgItemMessageW(hDlg, 2019, 0x14Eu, v27, 0);
  v32 = -1;
  dword_1007CD90 = sub_1000F40E(0x20u);
  v33 = 0;
  v34 = 0;
  do
  {
    sub_10004390(v33, v32, (int *)&v53, 4, (int)L"%d", dword_1006CD10[v34]);
    *(_DWORD *)((char *)dword_1007CD90 + v33 + 4) = dword_1006CD10[v34];
    v35 = SendDlgItemMessageW(hDlg, 2055, 0x143u, 0, (LPARAM)&v53);
    v36 = dword_1007CD90;
    v33 += 8;
    *(_DWORD *)((char *)dword_1007CD90 + v33 - 8) = v35;
    if ( dword_1023947C == *(_DWORD *)((char *)v36 + v33 - 4) )
      v32 = v35;
    ++v34;
  }
  while ( v34 < 4 );
  v37 = GetDlgItem(hDlg, 2019);
  EnableWindow(v37, 0);
  v38 = GetDlgItem(hDlg, 2004);
  EnableWindow(v38, 0);
  if ( v32 != -1 )
    SendDlgItemMessageW(hDlg, 2055, 0x14Eu, v32, 0);
  SendDlgItemMessageW(hDlg, 2004, 0xF1u, dword_10239488 != 0, 0);
  SendDlgItemMessageW(hDlg, 2007, 0xF1u, dword_1023948C != 0, 0);
  SendDlgItemMessageW(hDlg, 2005, 0xF1u, dword_10239454 != 0, 0);
  SendDlgItemMessageW(hDlg, 2003, 0xF1u, dword_10239458 != 0, 0);
  SendDlgItemMessageW(hDlg, 2021, 0xF1u, dword_1023945C != 0, 0);
  SendDlgItemMessageW(hDlg, 2002, 0xF1u, dword_10239464 != 0, 0);
  SendDlgItemMessageW(hDlg, 2008, 0xF1u, dword_10239460 != 0, 0);
  SendDlgItemMessageW(hDlg, 2022, 0xF1u, dword_10239468 != 0, 0);
  SendDlgItemMessageW(hDlg, 2006, 0xF1u, dword_10239450 != 0, 0);
  SendDlgItemMessageW(hDlg, 2009, 0xF1u, dword_10239470 != 0, 0);
  SendDlgItemMessageW(hDlg, 2056, 0xF1u, byte_102394C0 != 0, 0);
  SetDlgItemInt(hDlg, 2058, uValue, 0);
  SendDlgItemMessageW(hDlg, 2069, 0xF1u, byte_102394C8 != 0, 0);
  SendDlgItemMessageW(hDlg, 2070, 0xF1u, byte_102394C9 != 0, 0);
  SendDlgItemMessageW(hDlg, 2071, 0xF1u, byte_102394CA != 0, 0);
  SendDlgItemMessageW(hDlg, 2072, 0xF1u, byte_102394CB != 0, 0);
  v39 = dword_10239488 != 0;
  v40 = GetDlgItem(hDlg, 2014);
  EnableWindow(v40, v39);
  v41 = dword_1023948C != 0;
  v42 = GetDlgItem(hDlg, 2013);
  EnableWindow(v42, v41);
  v43 = dword_10239488 != 0;
  v44 = GetDlgItem(hDlg, 2007);
  EnableWindow(v44, v43);
  if ( dword_1023946C )
  {
    if ( dword_1023946C == 1 )
      v45 = 2016;
    else
      v45 = (dword_1023946C != 2) + 2017;
  }
  else
  {
    v45 = 2015;
  }
  CheckRadioButton(hDlg, 2015, 2018, v45);
  if ( dword_10239474 )
    v46 = (dword_10239474 != 1) + 2052;
  else
    v46 = 2051;
  CheckRadioButton(hDlg, 2051, 2053, v46);
  return 1;
}
// 1006CCC0: using guessed type wchar_t *off_1006CCC0[7];
// 1006CCE0: using guessed type int dword_1006CCE0[];
// 1006CD10: using guessed type int dword_1006CD10[];
// 1006D70C: using guessed type wchar_t aLdxLd[8];
// 1006D71C: using guessed type wchar_t aLuxLu[8];
// 1006D72C: using guessed type wchar_t aDx[4];
// 1006D734: using guessed type wchar_t aD_0[3];
// 10239450: using guessed type int dword_10239450;
// 10239454: using guessed type int dword_10239454;
// 10239458: using guessed type int dword_10239458;
// 1023945C: using guessed type int dword_1023945C;
// 10239460: using guessed type int dword_10239460;
// 10239464: using guessed type int dword_10239464;
// 10239468: using guessed type int dword_10239468;
// 1023946C: using guessed type int dword_1023946C;
// 10239470: using guessed type int dword_10239470;
// 10239474: using guessed type int dword_10239474;
// 10239478: using guessed type int dword_10239478;
// 1023947C: using guessed type int dword_1023947C;
// 10239480: using guessed type int dword_10239480;
// 10239484: using guessed type int dword_10239484;
// 10239488: using guessed type int dword_10239488;
// 1023948C: using guessed type int dword_1023948C;
// 10239490: using guessed type int dword_10239490;
// 102394A4: using guessed type int dword_102394A4;
// 102394A8: using guessed type int dword_102394A8;
// 102394BC: using guessed type int dword_102394BC;
// 102394C0: using guessed type char byte_102394C0;
// 102394C8: using guessed type char byte_102394C8;
// 102394C9: using guessed type char byte_102394C9;
// 102394CA: using guessed type char byte_102394CA;
// 102394CB: using guessed type char byte_102394CB;

//----- (1003F480) --------------------------------------------------------
LRESULT __thiscall sub_1003F480(HWND hDlg)
{
  HWND v1; // ebx@1
  LRESULT v2; // eax@1
  BOOL v3; // ST10_4@4
  HWND v4; // eax@4
  BOOL v5; // ST10_4@4
  HWND v6; // eax@4
  BOOL v7; // ST10_4@4
  HWND v8; // eax@4
  LRESULT v9; // eax@10
  signed int v10; // ecx@10
  LRESULT v11; // eax@17
  signed int v12; // ecx@17
  LRESULT v13; // eax@20
  LPVOID v14; // ecx@20
  LRESULT v15; // eax@26
  unsigned int v16; // esi@26
  char *v17; // edx@28
  int v18; // ecx@29
  char *v19; // ecx@30
  __int16 v20; // ax@31
  LRESULT v21; // eax@36
  unsigned int v22; // esi@36
  char *v23; // edx@38
  int v24; // eax@39
  char *v25; // eax@40
  __int16 v26; // cx@41
  LRESULT v27; // eax@45
  LRESULT result; // eax@57
  LRESULT v29; // esi@57
  LRESULT v30; // [sp+Ch] [bp-4h]@26
  LRESULT v31; // [sp+Ch] [bp-4h]@36

  v1 = hDlg;
  v2 = SendDlgItemMessageW(hDlg, 2004, 0xF0u, 0, 0);
  dword_10239488 = v2 != 0;
  if ( v2 != 0 )
  {
    dword_1023948C = SendDlgItemMessageW(v1, 2007, 0xF0u, 0, 0) != 0;
  }
  else
  {
    dword_1023948C = 0;
    SendDlgItemMessageW(v1, 2007, 0xF1u, 0, 0);
  }
  dword_10239454 = SendDlgItemMessageW(v1, 2005, 0xF0u, 0, 0) != 0;
  dword_10239458 = SendDlgItemMessageW(v1, 2003, 0xF0u, 0, 0) != 0;
  dword_1023945C = SendDlgItemMessageW(v1, 2021, 0xF0u, 0, 0) != 0;
  dword_10239464 = SendDlgItemMessageW(v1, 2002, 0xF0u, 0, 0) != 0;
  dword_10239460 = SendDlgItemMessageW(v1, 2008, 0xF0u, 0, 0) != 0;
  dword_10239468 = SendDlgItemMessageW(v1, 2022, 0xF0u, 0, 0) != 0;
  dword_10239450 = SendDlgItemMessageW(v1, 2006, 0xF0u, 0, 0) != 0;
  dword_10239470 = SendDlgItemMessageW(v1, 2009, 0xF0u, 0, 0) != 0;
  byte_102394C0 = SendDlgItemMessageW(v1, 2056, 0xF0u, 0, 0) != 0;
  uValue = GetDlgItemInt(v1, 2058, 0, 0);
  byte_102394C8 = SendDlgItemMessageW(v1, 2069, 0xF0u, 0, 0) != 0;
  byte_102394C9 = SendDlgItemMessageW(v1, 2070, 0xF0u, 0, 0) != 0;
  byte_102394CA = SendDlgItemMessageW(v1, 2071, 0xF0u, 0, 0) != 0;
  byte_102394CB = SendDlgItemMessageW(v1, 2072, 0xF0u, 0, 0) != 0;
  v3 = dword_10239488 != 0;
  v4 = GetDlgItem(v1, 2014);
  EnableWindow(v4, v3);
  v5 = dword_1023948C != 0;
  v6 = GetDlgItem(v1, 2013);
  EnableWindow(v6, v5);
  v7 = dword_10239488 != 0;
  v8 = GetDlgItem(v1, 2007);
  EnableWindow(v8, v7);
  if ( SendDlgItemMessageW(v1, 2015, 0xF0u, 0, 0) )
  {
    dword_1023946C = 0;
  }
  else if ( SendDlgItemMessageW(v1, 2016, 0xF0u, 0, 0) )
  {
    dword_1023946C = 1;
  }
  else if ( SendDlgItemMessageW(v1, 2017, 0xF0u, 0, 0) )
  {
    dword_1023946C = 2;
  }
  else
  {
    v9 = SendDlgItemMessageW(v1, 2018, 0xF0u, 0, 0);
    v10 = dword_1023946C;
    if ( v9 )
      v10 = 3;
    dword_1023946C = v10;
  }
  if ( SendDlgItemMessageW(v1, 2051, 0xF0u, 0, 0) )
  {
    dword_10239474 = 0;
  }
  else if ( SendDlgItemMessageW(v1, 2052, 0xF0u, 0, 0) )
  {
    dword_10239474 = 1;
  }
  else
  {
    v11 = SendDlgItemMessageW(v1, 2053, 0xF0u, 0, 0);
    v12 = dword_10239474;
    if ( v11 )
      v12 = 2;
    dword_10239474 = v12;
  }
  v13 = SendDlgItemMessageW(v1, 2012, 0x147u, 0, 0);
  v14 = dword_1007CD8C;
  if ( dword_1007CD8C )
  {
    while ( *(_DWORD *)v14 != v13 )
    {
      v14 = (LPVOID)*((_DWORD *)v14 + 131);
      if ( !v14 )
        goto LABEL_25;
    }
    dword_10239480 = *((_DWORD *)v14 + 1);
    dword_10239484 = *((_DWORD *)v14 + 2);
  }
LABEL_25:
  if ( dword_10239488 )
  {
    v15 = SendDlgItemMessageW(v1, 2014, 0x147u, 0, 0);
    v30 = v15;
    v16 = 0;
    do
    {
      if ( *(_DWORD *)((char *)lpMem + v16) == v15 )
      {
        v17 = (char *)lpMem + v16 + 4;
        if ( *(_WORD *)v17 )
        {
          v19 = (char *)lpMem + v16 + 4;
          do
          {
            v20 = *(_WORD *)v19;
            v19 += 2;
          }
          while ( v20 );
          v18 = (v19 - (v17 + 2)) >> 1;
        }
        else
        {
          v18 = 0;
        }
        sub_10001460((int)&dword_10239490, v17, v18);
        v15 = v30;
      }
      v16 += 516;
    }
    while ( v16 < 0xE1C );
  }
  if ( dword_1023948C )
  {
    v21 = SendDlgItemMessageW(v1, 2013, 0x147u, 0, 0);
    v31 = v21;
    v22 = 0;
    do
    {
      if ( *(_DWORD *)((char *)dword_1007CD94 + v22) == v21 )
      {
        v23 = (char *)dword_1007CD94 + v22 + 4;
        if ( *(_WORD *)v23 )
        {
          v25 = (char *)dword_1007CD94 + v22 + 4;
          do
          {
            v26 = *(_WORD *)v25;
            v25 += 2;
          }
          while ( v26 );
          v24 = (v25 - (v23 + 2)) >> 1;
        }
        else
        {
          v24 = 0;
        }
        sub_10001460((int)&dword_102394A8, v23, v24);
        v21 = v31;
      }
      v22 += 516;
    }
    while ( v22 < 0xE1C );
  }
  v27 = SendDlgItemMessageW(v1, 2019, 0x147u, 0, 0);
  if ( *(_DWORD *)dword_1007CD88 == v27 )
    dword_10239478 = *((_DWORD *)dword_1007CD88 + 1);
  if ( *((_DWORD *)dword_1007CD88 + 2) == v27 )
    dword_10239478 = *((_DWORD *)dword_1007CD88 + 3);
  if ( *((_DWORD *)dword_1007CD88 + 4) == v27 )
    dword_10239478 = *((_DWORD *)dword_1007CD88 + 5);
  if ( *((_DWORD *)dword_1007CD88 + 6) == v27 )
    dword_10239478 = *((_DWORD *)dword_1007CD88 + 7);
  if ( *((_DWORD *)dword_1007CD88 + 8) == v27 )
    dword_10239478 = *((_DWORD *)dword_1007CD88 + 9);
  if ( *((_DWORD *)dword_1007CD88 + 10) == v27 )
    dword_10239478 = *((_DWORD *)dword_1007CD88 + 11);
  result = SendDlgItemMessageW(v1, 2055, 0x147u, 0, 0);
  v29 = result;
  if ( *(_DWORD *)dword_1007CD90 == result )
    dword_1023947C = *((_DWORD *)dword_1007CD90 + 1);
  if ( *((_DWORD *)dword_1007CD90 + 2) == result )
  {
    result = *((_DWORD *)dword_1007CD90 + 3);
    dword_1023947C = *((_DWORD *)dword_1007CD90 + 3);
  }
  if ( *((_DWORD *)dword_1007CD90 + 4) == v29 )
  {
    result = *((_DWORD *)dword_1007CD90 + 5);
    dword_1023947C = *((_DWORD *)dword_1007CD90 + 5);
  }
  if ( *((_DWORD *)dword_1007CD90 + 6) == v29 )
  {
    result = *((_DWORD *)dword_1007CD90 + 7);
    dword_1023947C = *((_DWORD *)dword_1007CD90 + 7);
  }
  return result;
}
// 10239450: using guessed type int dword_10239450;
// 10239454: using guessed type int dword_10239454;
// 10239458: using guessed type int dword_10239458;
// 1023945C: using guessed type int dword_1023945C;
// 10239460: using guessed type int dword_10239460;
// 10239464: using guessed type int dword_10239464;
// 10239468: using guessed type int dword_10239468;
// 1023946C: using guessed type int dword_1023946C;
// 10239470: using guessed type int dword_10239470;
// 10239474: using guessed type int dword_10239474;
// 10239478: using guessed type int dword_10239478;
// 1023947C: using guessed type int dword_1023947C;
// 10239480: using guessed type int dword_10239480;
// 10239484: using guessed type int dword_10239484;
// 10239488: using guessed type int dword_10239488;
// 1023948C: using guessed type int dword_1023948C;
// 10239490: using guessed type int dword_10239490;
// 102394A8: using guessed type int dword_102394A8;
// 102394C0: using guessed type char byte_102394C0;
// 102394C8: using guessed type char byte_102394C8;
// 102394C9: using guessed type char byte_102394C9;
// 102394CA: using guessed type char byte_102394CA;
// 102394CB: using guessed type char byte_102394CB;

//----- (1003F980) --------------------------------------------------------
char __usercall sub_1003F980@<al>(char a1@<cl>, int a2@<edi>)
{
  char v2; // bl@1
  int v3; // ST10_4@1
  int v4; // ecx@1
  HWND v5; // eax@3
  char v6; // bl@3
  int v7; // ecx@4
  int v8; // ecx@4
  int v9; // ecx@4
  int v10; // ecx@4
  int v11; // ecx@4
  int v12; // ecx@4
  int v13; // ecx@4
  int v14; // ecx@4
  int v15; // ecx@4
  int v16; // ecx@4
  signed int v17; // eax@4
  int v18; // ecx@6
  int v19; // ecx@6
  int v20; // ecx@6
  int v21; // ecx@6
  int v22; // ecx@6
  int v23; // eax@7
  signed int v24; // eax@9
  int v25; // ecx@11
  signed int v26; // eax@11
  int v27; // ecx@11
  int v28; // ecx@14
  int v29; // ecx@14
  int v30; // eax@14
  int v31; // eax@16
  const void *v32; // edx@16
  int v33; // ecx@17
  int v34; // ecx@18
  int v35; // esi@18
  __int16 v36; // ax@19
  int v37; // ecx@21
  int v38; // eax@21
  int v39; // eax@23
  const void *v40; // edx@23
  int v41; // eax@24
  int v42; // esi@25
  __int16 v43; // cx@26
  char v45; // [sp+4h] [bp-4Ch]@1
  LPVOID lpMem; // [sp+28h] [bp-28h]@31
  int v47; // [sp+38h] [bp-18h]@32
  unsigned int v48; // [sp+3Ch] [bp-14h]@30
  char v49; // [sp+40h] [bp-10h]@1
  int v50; // [sp+4Ch] [bp-4h]@1

  v2 = a1;
  sub_10028330(&dword_10239450, 0, 0x7Cu);
  dword_10239480 = 640;
  dword_10239484 = 480;
  dword_1023946C = 0;
  dword_10239458 = 0;
  dword_1023945C = 0;
  dword_10239464 = 0;
  dword_10239460 = 0;
  dword_10239468 = 1;
  dword_10239454 = 0;
  dword_10239474 = 1;
  dword_10239450 = 0;
  dword_10239470 = 0;
  byte_102394C0 = 1;
  *(_DWORD *)&byte_102394C8 = 65537;
  uValue = 70000000;
  dword_10239488 = 0;
  dword_1023948C = 0;
  dword_10239478 = 1;
  dword_1023947C = 32;
  sub_10004570((int)&v45, v2, v3);
  v50 = 0;
  if ( v49 )
  {
    dword_10239454 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"Vsync", 0, v4);
    dword_10239458 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"AutoSort", 0, v7);
    dword_1023945C = sub_10004810((int)&v45, v2, (int)L"main", (int)L"NetworkSort", 0, v8);
    dword_10239464 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"OModifier", dword_10239464, v9);
    dword_10239460 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"TModifier", dword_10239460, v10);
    dword_10239468 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"JoinTrans", dword_10239468, v11);
    dword_10239450 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"UseFullscreen", 0, v12);
    dword_10239474 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"aspect", dword_10239474, v13);
    dword_1023947C = sub_10004810((int)&v45, v2, (int)L"main", (int)L"MaxLayers", dword_1023947C, v14);
    byte_102394C0 = sub_100048E0((int)&v45, v15, (int)L"slowpoke", byte_102394C0, v15);
    v17 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"blitperf", uValue, v16);
    if ( v17 < 1000000 )
      v17 = 70000000;
    uValue = v17;
    byte_102394C8 = sub_100048E0((int)&v45, 70000000, (int)L"tlthread", byte_102394C8, 70000000);
    byte_102394C9 = sub_100048E0((int)&v45, v18, (int)L"tlcache", byte_102394C9, v18);
    byte_102394CA = sub_100048E0((int)&v45, v19, (int)L"bilinearfb", byte_102394CA, v19);
    byte_102394CB = sub_100048E0((int)&v45, v20, (int)L"atifix", byte_102394CB, v20);
    v22 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"NotAutoRotate", 0, v21);
    dword_10239470 = v22;
    if ( dword_1007CD9C && (v23 = *(_DWORD *)(dword_1007CD9C + 284)) != 0 && !v22 )
      v24 = dword_1006CCF4[v23];
    else
      v24 = sub_10004810((int)&v45, v2, (int)L"main", (int)L"rotate", dword_1023946C, v22);
    dword_1023946C = v24;
    dword_10239480 = sub_10004810((int)&v45, v2, (int)L"resolution", (int)L"Width", dword_10239480, v22);
    v26 = sub_10004810((int)&v45, v2, (int)L"resolution", (int)L"Height", dword_10239484, v25);
    dword_10239484 = v26;
    if ( !dword_10239480 || !v26 )
    {
      dword_10239480 = 640;
      dword_10239484 = 480;
    }
    dword_10239488 = sub_10004810((int)&v45, v2, (int)L"shaders", (int)L"usePass1", 0, v27);
    dword_1023948C = sub_10004810((int)&v45, v2, (int)L"shaders", (int)L"usePass2", 0, v28);
    v30 = (int)&dword_10239490;
    if ( (unsigned int)dword_102394A4 >= 8 )
      v30 = dword_10239490;
    v31 = sub_10004770((int)&v45, (int)L"shaders", (int)L"shaderPass1", v30, v29);
    v32 = (const void *)v31;
    if ( *(_WORD *)v31 )
    {
      v34 = v31;
      v35 = v31 + 2;
      do
      {
        v36 = *(_WORD *)v34;
        v34 += 2;
      }
      while ( v36 );
      v33 = (v34 - v35) >> 1;
    }
    else
    {
      v33 = 0;
    }
    sub_10001460((int)&dword_10239490, v32, v33);
    v38 = (int)&dword_102394A8;
    if ( (unsigned int)dword_102394BC >= 8 )
      v38 = dword_102394A8;
    v39 = sub_10004770((int)&v45, (int)L"shaders", (int)L"shaderPass2", v38, v37);
    v40 = (const void *)v39;
    if ( *(_WORD *)v39 )
    {
      v42 = v39 + 2;
      do
      {
        v43 = *(_WORD *)v39;
        v39 += 2;
      }
      while ( v43 );
      v41 = (v39 - v42) >> 1;
    }
    else
    {
      v41 = 0;
    }
    sub_10001460((int)&dword_102394A8, v40, v41);
  }
  else if ( v2 )
  {
    v5 = GetActiveWindow();
    MessageBoxW(v5, L"gpuDX11 not configured", L"gpuDX11", 0x40u);
    v6 = sub_1003EA30(v2, a2);
    goto LABEL_30;
  }
  v6 = 1;
LABEL_30:
  if ( v48 >= 8 )
    sub_10001E40(v6, a2, lpMem, v48 + 1);
  v48 = 7;
  v47 = 0;
  LOWORD(lpMem) = 0;
  sub_10004700((int)&v45);
  return v6;
}
// 1006CCF4: using guessed type int dword_1006CCF4[];
// 1006D77C: using guessed type wchar_t aVsync[6];
// 1006D788: using guessed type wchar_t aMain[5];
// 1006D794: using guessed type wchar_t aAutosort[9];
// 1006D7A8: using guessed type wchar_t aNetworksort[12];
// 1006D7C0: using guessed type wchar_t aOmodifier[10];
// 1006D7D4: using guessed type wchar_t aTmodifier[10];
// 1006D7E8: using guessed type wchar_t aJointrans[10];
// 1006D7FC: using guessed type wchar_t aUsefullscreen[14];
// 1006D818: using guessed type wchar_t aAspect[7];
// 1006D828: using guessed type wchar_t aMaxlayers[10];
// 1006D83C: using guessed type wchar_t aSlowpoke[9];
// 1006D850: using guessed type wchar_t aBlitperf[9];
// 1006D864: using guessed type wchar_t aTlthread[9];
// 1006D878: using guessed type wchar_t aTlcache[8];
// 1006D888: using guessed type wchar_t aBilinearfb[11];
// 1006D8A0: using guessed type wchar_t aAtifix[7];
// 1006D8B0: using guessed type wchar_t aNotautorotate[14];
// 1006D8CC: using guessed type wchar_t aRotate[7];
// 1006D8DC: using guessed type wchar_t aWidth[6];
// 1006D8E8: using guessed type wchar_t aResolution[11];
// 1006D900: using guessed type wchar_t aHeight[7];
// 1006D910: using guessed type wchar_t aUsepass1[9];
// 1006D924: using guessed type wchar_t aShaders[8];
// 1006D934: using guessed type wchar_t aUsepass2[9];
// 1006D948: using guessed type wchar_t aShaderpass1[12];
// 1006D960: using guessed type wchar_t aShaderpass2[12];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 10239450: using guessed type int dword_10239450;
// 10239454: using guessed type int dword_10239454;
// 10239458: using guessed type int dword_10239458;
// 1023945C: using guessed type int dword_1023945C;
// 10239460: using guessed type int dword_10239460;
// 10239464: using guessed type int dword_10239464;
// 10239468: using guessed type int dword_10239468;
// 1023946C: using guessed type int dword_1023946C;
// 10239470: using guessed type int dword_10239470;
// 10239474: using guessed type int dword_10239474;
// 10239478: using guessed type int dword_10239478;
// 1023947C: using guessed type int dword_1023947C;
// 10239480: using guessed type int dword_10239480;
// 10239484: using guessed type int dword_10239484;
// 10239488: using guessed type int dword_10239488;
// 1023948C: using guessed type int dword_1023948C;
// 10239490: using guessed type int dword_10239490;
// 102394A4: using guessed type int dword_102394A4;
// 102394A8: using guessed type int dword_102394A8;
// 102394BC: using guessed type int dword_102394BC;
// 102394C0: using guessed type char byte_102394C0;
// 102394C8: using guessed type char byte_102394C8;
// 102394C9: using guessed type char byte_102394C9;
// 102394CA: using guessed type char byte_102394CA;
// 102394CB: using guessed type char byte_102394CB;

//----- (1003FE40) --------------------------------------------------------
char __cdecl getInterface(int a1)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 + 16);
  if ( !v1 || v1 == 1 || v1 == 2 )
  {
    *(_DWORD *)(a1 + 416) = sub_1005BF20;
    *(_DWORD *)(a1 + 420) = sub_1005BFE0;
    *(_DWORD *)(a1 + 424) = sub_1005BFD0;
    *(_DWORD *)(a1 + 432) = sub_1005C030;
    *(_DWORD *)(a1 + 484) = sub_1005BED0;
    *(_DWORD *)(a1 + 476) = sub_1005BDC0;
    *(_DWORD *)(a1 + 444) = sub_1005BFB0;
    *(_DWORD *)(a1 + 448) = sub_1005BFA0;
    *(_DWORD *)(a1 + 452) = sub_1005BD80;
    *(_DWORD *)(a1 + 456) = sub_1005BEC0;
    *(_DWORD *)(a1 + 480) = sub_1005BEB0;
    *(_DWORD *)(a1 + 460) = sub_1005C020;
    goto LABEL_23;
  }
  if ( v1 != 3 )
  {
    if ( v1 != 10 && v1 != 13 )
    {
      if ( v1 == 11 )
      {
        *(_DWORD *)(a1 + 416) = sub_1003BB80;
        *(_DWORD *)(a1 + 420) = sub_1003BB00;
        *(_DWORD *)(a1 + 424) = nullsub_2;
        *(_DWORD *)(a1 + 452) = sub_1003BCA0;
        *(_DWORD *)(a1 + 432) = sub_1003BCA0;
        *(_DWORD *)(a1 + 444) = sub_1003BC30;
        *(_DWORD *)(a1 + 448) = sub_1003BC00;
        *(_DWORD *)(a1 + 476) = sub_1003BA70;
        *(_DWORD *)(a1 + 428) = sub_10040260;
        dword_1007CD9C = a1;
        return 1;
      }
      if ( v1 == 9 )
      {
        *(_DWORD *)(a1 + 416) = sub_1003D7B0;
        *(_DWORD *)(a1 + 420) = sub_1003D780;
        *(_DWORD *)(a1 + 424) = nullsub_3;
        *(_DWORD *)(a1 + 452) = sub_1003D850;
        *(_DWORD *)(a1 + 432) = sub_1003D840;
        *(_DWORD *)(a1 + 444) = sub_1003D830;
        *(_DWORD *)(a1 + 448) = sub_1003D820;
        *(_DWORD *)(a1 + 476) = sub_1003D690;
        goto LABEL_23;
      }
      if ( v1 == 8 )
      {
        *(_DWORD *)(a1 + 416) = sub_10061240;
        *(_DWORD *)(a1 + 420) = sub_100612A0;
        *(_DWORD *)(a1 + 424) = sub_100610E0;
        *(_DWORD *)(a1 + 432) = sub_10061220;
        *(_DWORD *)(a1 + 444) = sub_100610C0;
        *(_DWORD *)(a1 + 448) = sub_100610A0;
        *(_DWORD *)(a1 + 452) = sub_100610D0;
        *(_DWORD *)(a1 + 456) = sub_100610B0;
        *(_DWORD *)(a1 + 428) = sub_10040260;
        dword_1007CD9C = a1;
        return 1;
      }
      if ( v1 == 12 )
      {
        *(_DWORD *)(a1 + 416) = sub_10061240;
        *(_DWORD *)(a1 + 420) = sub_100612A0;
        *(_DWORD *)(a1 + 424) = sub_100610E0;
        dword_1007CD9C = a1;
        return 1;
      }
      if ( v1 == 4 || v1 == 5 || v1 == 6 || v1 == 7 )
      {
        *(_DWORD *)(a1 + 416) = sub_1005E450;
        *(_DWORD *)(a1 + 420) = sub_1005E520;
        *(_DWORD *)(a1 + 432) = sub_1005E260;
        *(_DWORD *)(a1 + 444) = sub_1005E590;
        *(_DWORD *)(a1 + 448) = sub_1005E410;
        *(_DWORD *)(a1 + 460) = sub_1005E580;
        *(_DWORD *)(a1 + 456) = sub_1005E570;
        *(_DWORD *)(a1 + 472) = sub_1005E5E0;
        *(_DWORD *)(a1 + 468) = sub_1005E500;
        *(_DWORD *)(a1 + 464) = sub_1005E4F0;
        *(_DWORD *)(a1 + 428) = sub_10040260;
        dword_1007CD9C = a1;
        return 1;
      }
    }
    return 0;
  }
  *(_DWORD *)(a1 + 416) = sub_10048DD0;
  *(_DWORD *)(a1 + 420) = sub_10048D60;
  *(_DWORD *)(a1 + 424) = nullsub_4;
  *(_DWORD *)(a1 + 432) = sub_10048D00;
  *(_DWORD *)(a1 + 476) = sub_10048E50;
  *(_DWORD *)(a1 + 444) = sub_10048EC0;
  *(_DWORD *)(a1 + 448) = sub_10048EB0;
  *(_DWORD *)(a1 + 452) = sub_10048D40;
  *(_DWORD *)(a1 + 480) = sub_10048EA0;
LABEL_23:
  *(_DWORD *)(a1 + 488) = sub_10040150;
  *(_DWORD *)(a1 + 428) = sub_10040260;
  dword_1007CD9C = a1;
  return 1;
}
// 1003BA70: using guessed type int sub_1003BA70();
// 1003BAF0: using guessed type int nullsub_2();
// 1003D770: using guessed type int nullsub_3();
// 1003D840: using guessed type int sub_1003D840();
// 10040150: using guessed type int sub_10040150();
// 10048D40: using guessed type int sub_10048D40();
// 10048D50: using guessed type int nullsub_4();
// 1005BEB0: using guessed type int sub_1005BEB0();
// 100610D0: using guessed type int sub_100610D0();
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (10040150) --------------------------------------------------------
int sub_10040150()
{
  int result; // eax@2
  LONG v1; // esi@3
  LONG v2; // eax@8
  struct tagWINDOWINFO pwi; // [sp+4h] [bp-78h]@3
  struct tagWINDOWINFO v4; // [sp+40h] [bp-3Ch]@8

  if ( dword_1007CD9C )
  {
    GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &pwi);
    v1 = pwi.rcClient.right - pwi.rcClient.left;
    if ( dword_1023946C && dword_1023946C != 2 )
      v1 = pwi.rcClient.bottom - pwi.rcClient.top;
    if ( dword_1007CD9C )
    {
      GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &v4);
      v2 = v4.rcClient.bottom - v4.rcClient.top;
      if ( dword_1023946C )
      {
        if ( dword_1023946C != 2 )
          v2 = v4.rcClient.right - v4.rcClient.left;
      }
      result = v1 | (v2 << 16);
    }
    else
    {
      result = v1 | (dword_1007CD9C << 16);
    }
  }
  else
  {
    result = dword_1007CD9C << 16;
  }
  return result;
}
// 10040150: using guessed type int sub_10040150();
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1023946C: using guessed type int dword_1023946C;

//----- (10040260) --------------------------------------------------------
char __usercall sub_10040260@<al>(char a1@<bl>, int a2@<edi>)
{
  sub_1003F980(0, a2);
  return sub_1003EA30(a1, a2);
}

//----- (10040270) --------------------------------------------------------
int getName()
{
  return (int)L"gpuDX11";
}

//----- (10040280) --------------------------------------------------------
int getType()
{
  return 0;
}

//----- (10040290) --------------------------------------------------------
signed int __stdcall sub_10040290(HINSTANCE a1, int a2, int a3)
{
  hInstance = a1;
  return 1;
}

//----- (100402B0) --------------------------------------------------------
void __fastcall sub_100402B0(int a1, int a2)
{
  int v2; // ebx@1
  int v3; // edi@1
  HWND v4; // esi@2
  DWORD v5; // eax@2
  struct tagRECT Rect; // [sp+10h] [bp-14h]@2

  v2 = a1;
  v3 = a2;
  if ( dword_1007CD9C )
  {
    v4 = *(HWND *)(dword_1007CD9C + 4);
    GetWindowRect(*(HWND *)(dword_1007CD9C + 4), &Rect);
    Rect.right = v2 + Rect.left - 1;
    Rect.bottom = v3 + Rect.top - 1;
    v5 = GetWindowLongW(v4, -16);
    AdjustWindowRect(&Rect, v5, v4 != 0);
    SetWindowPos(v4, 0, 0, 0, Rect.right - Rect.left + 1, Rect.bottom - Rect.top + 1, 0x16u);
  }
}
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (10040330) --------------------------------------------------------
unsigned int __usercall sub_10040330@<eax>(int a1@<ebx>, int a2@<edi>)
{
  unsigned int result; // eax@4
  unsigned int v3; // ecx@6
  int v4; // ecx@7
  char v5; // al@8
  int v6; // esi@10
  WCHAR String; // [sp+8h] [bp-458h]@18
  LPVOID v8; // [sp+40Ch] [bp-54h]@15
  int v9; // [sp+41Ch] [bp-44h]@16
  unsigned int v10; // [sp+420h] [bp-40h]@14
  LPVOID MultiByteStr[4]; // [sp+424h] [bp-3Ch]@5
  int v12; // [sp+434h] [bp-2Ch]@5
  unsigned int v13; // [sp+438h] [bp-28h]@5
  LPVOID lpMem; // [sp+43Ch] [bp-24h]@5
  int v15; // [sp+44Ch] [bp-14h]@5
  unsigned int v16; // [sp+450h] [bp-10h]@5
  int v17; // [sp+45Ch] [bp-4h]@5

  if ( dword_10239908 > *(_DWORD *)(*(_DWORD *)(__readfsdword(44) + 4 * TlsIndex) + 4) )
  {
    sub_1000F55D((int)&dword_10239908);
    if ( dword_10239908 == -1 )
    {
      dword_10239904 = timeGetTime();
      sub_1000F51E((int)timeGetTime, (int)&dword_10239908);
    }
  }
  ++dword_1007CDA8;
  result = timeGetTime();
  if ( result > dword_10239904 )
  {
    v16 = 7;
    dword_10239904 += 1000;
    v15 = 0;
    LOWORD(lpMem) = 0;
    v17 = 0;
    v13 = 15;
    v12 = 0;
    LOBYTE(MultiByteStr[0]) = 0;
    if ( *(_BYTE *)(dword_1007CD9C + 1092) )
    {
      v4 = dword_1007CD9C + 1092;
      do
        v5 = *(_BYTE *)v4++;
      while ( v5 );
      v3 = v4 - (dword_1007CD9C + 1093);
    }
    else
    {
      v3 = 0;
    }
    sub_10001990((int)MultiByteStr, (const void *)(dword_1007CD9C + 1092), v3);
    LOBYTE(v17) = 1;
    v6 = sub_10001250((int)&lpMem, (LPCSTR)MultiByteStr);
    if ( &lpMem != (LPVOID *)v6 )
    {
      if ( v16 >= 8 )
        sub_10001E40(a1, a2, lpMem, v16 + 1);
      v16 = 7;
      v15 = 0;
      LOWORD(lpMem) = 0;
      sub_100018C0(&lpMem, v6);
    }
    if ( v10 >= 8 )
      sub_10001E40(a1, a2, v8, v10 + 1);
    v10 = 7;
    LOWORD(v8) = 0;
    v9 = 0;
    if ( v13 >= 0x10 )
      sub_10001EA0(a1, a2, MultiByteStr[0], v13 + 1);
    sub_10004390(a1, a2, (int *)&String, 512, (int)L"%s%s | spg: %0lu gpu: %0lu | %s", (unsigned int)L"gpuDX11");
    SetWindowTextW(*(HWND *)(dword_1007CD9C + 4), &String);
    result = v16;
    dword_1007CDA8 = 0;
    dword_1007CDAC = 0;
    if ( v16 >= 8 )
      result = sub_10001E40(a1, a2, lpMem, v16 + 1);
  }
  return result;
}
// 1006DA30: using guessed type wchar_t aSSSpg0luGpu0lu[32];
// 1007C19C: using guessed type int TlsIndex;
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDA4: using guessed type int dword_1007CDA4;
// 1007CDA8: using guessed type int dword_1007CDA8;
// 1007CDAC: using guessed type int dword_1007CDAC;
// 10239904: using guessed type int dword_10239904;
// 10239908: using guessed type int dword_10239908;

//----- (10040760) --------------------------------------------------------
int __thiscall sub_10040760(void *this, int a2, LPCWSTR lpName, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, int a12)
{
  const WCHAR *v12; // edi@1
  int v13; // ebx@1
  unsigned int v14; // ecx@2
  LPCWSTR v15; // esi@6
  HMODULE v16; // ebx@7
  HRSRC v17; // esi@7
  DWORD v18; // esi@7
  unsigned int v19; // ecx@8
  int v20; // ebx@10
  int v21; // ecx@10
  LPCWSTR v22; // eax@10
  unsigned int v23; // ecx@15
  LPVOID lpMem; // [sp+Ch] [bp-50h]@1
  int v26; // [sp+1Ch] [bp-40h]@1
  unsigned int v27; // [sp+20h] [bp-3Ch]@1
  LPVOID v28; // [sp+24h] [bp-38h]@14
  __int64 v29; // [sp+30h] [bp-2Ch]@7
  unsigned int v30; // [sp+38h] [bp-24h]@14
  int v31; // [sp+3Ch] [bp-20h]@19
  const WCHAR *v32; // [sp+40h] [bp-1Ch]@11
  void *v33; // [sp+44h] [bp-18h]@4
  HMODULE hModule; // [sp+48h] [bp-14h]@1
  int v35; // [sp+58h] [bp-4h]@10

  v12 = lpName;
  v13 = (int)this;
  hModule = hInstance;
  v27 = 7;
  v26 = 0;
  LOWORD(lpMem) = 0;
  if ( *lpName )
    v14 = wcslen(lpName);
  else
    v14 = 0;
  sub_10001460((int)&lpMem, lpName, v14);
  v33 = (void *)(v13 + 108);
  sub_10007A10((void *)(v13 + 108), (int)&lpName, (int)&lpMem);
  if ( v27 >= 8 )
    sub_10001E40(v13, (int)v12, lpMem, v27 + 1);
  v15 = lpName;
  if ( lpName == *(LPCWSTR *)(v13 + 112) )
  {
    v16 = hModule;
    v17 = FindResourceW(hModule, v12, (LPCWSTR)0xA);
    LODWORD(v29) = LoadResource(v16, v17);
    HIDWORD(v29) = LockResource((HGLOBAL)v29);
    v18 = SizeofResource(v16, v17);
    v27 = 7;
    v26 = 0;
    LOWORD(lpMem) = 0;
    if ( *v12 )
      v19 = wcslen(v12);
    else
      v19 = 0;
    sub_10001460((int)&lpMem, v12, v19);
    v35 = 0;
    v20 = (int)v33;
    sub_10007A10(v33, (int)&lpName, (int)&lpMem);
    v22 = lpName;
    if ( lpName == *(LPCWSTR *)(v20 + 4) )
    {
      lpName = (LPCWSTR)&lpMem;
      sub_10007E50(v20, (int)&v32, v21, (int *)&lpName, v21);
      v22 = v32;
    }
    _mm_storel_epi64((__m128i *)v22 + 2, _mm_loadl_epi64((const __m128i *)&v29));
    *((_DWORD *)v22 + 10) = v18;
    v35 = -1;
    if ( v27 >= 8 )
      sub_10001E40(v20, (int)v12, lpMem, v27 + 1);
    v30 = 7;
    HIDWORD(v29) = 0;
    LOWORD(v28) = 0;
    if ( *v12 )
      v23 = wcslen(v12);
    else
      v23 = 0;
    sub_10001460((int)&v28, v12, v23);
    sub_10007A10((void *)v20, (int)&lpName, (int)&v28);
    v15 = lpName;
    if ( v30 >= 8 )
      sub_10001E40(v20, (int)v12, v28, v30 + 1);
  }
  v31 = 0;
  return D3DCompile(*((_DWORD *)v15 + 9), *((_DWORD *)v15 + 10), 0, a5, 0, a7, a8, 32770, 0, a11, &v31);
}
// 10065000: using guessed type int __stdcall D3DCompile(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (10040B20) --------------------------------------------------------
int __thiscall sub_10040B20(void *this, int a2)
{
  void *v2; // esi@1
  int v3; // ecx@1
  unsigned int v4; // eax@2
  int v5; // eax@2
  int result; // eax@2
  __int128 v7; // [sp+8h] [bp-28h]@2
  __int128 v8; // [sp+18h] [bp-18h]@2
  __int64 v9; // [sp+28h] [bp-8h]@2

  v2 = this;
  v3 = a2;
  if ( *((_DWORD *)v2 + 49) != a2 )
  {
    v4 = *((_DWORD *)v2 + 47);
    *((_DWORD *)v2 + 49) = a2;
    v7 = 0i64;
    *(_QWORD *)((char *)&v7 + 4) = v4;
    v5 = *((_DWORD *)v2 + 1);
    v8 = 0i64;
    _mm_storel_epi64((__m128i *)&v9, 0i64);
    LODWORD(v7) = 3;
    DWORD3(v7) = v3;
    *(_QWORD *)&v8 = 0i64;
    *(__int128 *)((char *)&v8 + 8) = xmmword_1006EE30;
    a2 = 0;
    (*(void (__stdcall **)(int, __int128 *, int *))(*(_DWORD *)v5 + 88))(v5, &v7, &a2);
    result = (*(int (__stdcall **)(_DWORD, int))(**((_DWORD **)v2 + 2) + 172))(*((_DWORD *)v2 + 2), a2);
  }
  return result;
}
// 1006EE30: using guessed type __int128 xmmword_1006EE30;

//----- (10040BC0) --------------------------------------------------------
void __thiscall sub_10040BC0(int this, int a2)
{
  int v2; // esi@1
  int *v3; // eax@2
  int v4; // eax@3
  int v5; // ecx@3
  int v6; // eax@3
  int v7; // [sp+Ch] [bp-44h]@2
  int *v8; // [sp+10h] [bp-40h]@2
  int *v9; // [sp+14h] [bp-3Ch]@3
  int v10; // [sp+18h] [bp-38h]@4
  __int128 v11; // [sp+20h] [bp-30h]@3
  __int128 v12; // [sp+30h] [bp-20h]@3
  __int64 v13; // [sp+40h] [bp-10h]@3

  v2 = this;
  if ( *(_DWORD *)(this + 188) != a2 )
  {
    *(_DWORD *)(this + 188) = a2;
    v7 = a2;
    sub_10002D30(this + 76, (int)&v8, (int)&v7);
    v3 = v8;
    if ( v8 == *(int **)(v2 + 80) )
    {
      v4 = *(_DWORD *)(v2 + 4);
      v8 = 0;
      v11 = 0i64;
      v12 = 0i64;
      _mm_storel_epi64((__m128i *)&v13, 0i64);
      *(_QWORD *)((char *)&v11 + 4) = (unsigned int)a2;
      LODWORD(v11) = 3;
      DWORD3(v11) = 0;
      *(_QWORD *)&v12 = 0i64;
      *(__int128 *)((char *)&v12 + 8) = xmmword_1006EE30;
      (*(void (__stdcall **)(int, __int128 *, int *))(*(_DWORD *)v4 + 88))(v4, &v11, &v8);
      sub_10002D30(v2 + 76, (int)&v9, (int)&v7);
      v6 = (int)v9;
      if ( v9 == *(int **)(v2 + 80) )
      {
        v9 = &v7;
        sub_10007EB0(v2 + 76, (int)&v10, v5, (int)&v9, v5);
        v6 = v10;
      }
      *(_DWORD *)(v6 + 12) = v8;
      sub_10002D30(v2 + 76, (int)&v9, (int)&v7);
      v3 = v9;
    }
    (*(void (__stdcall **)(_DWORD, int))(**(_DWORD **)(v2 + 8) + 172))(*(_DWORD *)(v2 + 8), v3[3]);
  }
}
// 1006EE30: using guessed type __int128 xmmword_1006EE30;

//----- (10040D50) --------------------------------------------------------
int __thiscall sub_10040D50(int this, int a2, int a3)
{
  int v3; // esi@1
  int result; // eax@1
  int v5; // ecx@3
  int v6; // eax@7
  int v7; // eax@7
  int v8; // [sp+2Ch] [bp-28h]@10
  char v9[20]; // [sp+34h] [bp-20h]@7
  int v10; // [sp+48h] [bp-Ch]@7

  v3 = this;
  result = 4 * a3;
  if ( 4 * a3 )
  {
    if ( (unsigned int)result > *(_DWORD *)(this + 336) )
    {
      v5 = *(_DWORD *)(this + 328);
      if ( v5 )
      {
        (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v5 + 8))(*(_DWORD *)(v3 + 328));
        *(_DWORD *)(v3 + 328) = 0;
      }
      *(_DWORD *)(v3 + 336) = 8 * a3;
    }
    if ( !*(_DWORD *)(v3 + 328) )
    {
      v6 = *(_DWORD *)(v3 + 336);
      *(_OWORD *)&v9[4] = 0i64;
      *(_DWORD *)&v9[4] = v6;
      v7 = *(_DWORD *)(v3 + 4);
      _mm_storel_epi64((__m128i *)&v10, 0i64);
      *(_QWORD *)&v9[8] = 8589934594i64;
      *(_DWORD *)&v9[16] = 0x10000;
      (*(void (__stdcall **)(int, char *, _DWORD, int))(*(_DWORD *)v7 + 12))(v7, &v9[4], 0, v3 + 328);
      *(_BYTE *)(v3 + 341) = 1;
    }
    if ( *(_DWORD *)(v3 + 332) != 4 )
    {
      *(_DWORD *)(v3 + 332) = 4;
      *(_BYTE *)(v3 + 341) = 1;
    }
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, int *))(**(_DWORD **)(v3 + 8) + 56))(
      *(_DWORD *)(v3 + 8),
      *(_DWORD *)(v3 + 328),
      0,
      4,
      0,
      &v8);
    result = v8;
    *(_BYTE *)(v3 + 340) = 1;
  }
  return result;
}

//----- (10040E40) --------------------------------------------------------
int __thiscall sub_10040E40(int this)
{
  int v1; // esi@1
  int result; // eax@2
  int v3; // ecx@4
  int v4; // [sp+Ch] [bp-4h]@1

  v4 = this;
  v1 = this;
  if ( *(_BYTE *)(this + 324) )
  {
    result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(this + 8) + 60))(
               *(_DWORD *)(this + 8),
               *(_DWORD *)(this + 308),
               0);
    *(_BYTE *)(v1 + 324) = 0;
  }
  if ( *(_BYTE *)(v1 + 325) )
  {
    v3 = *(_DWORD *)(v1 + 8);
    v4 = 0;
    result = (*(int (__stdcall **)(int, _DWORD, signed int, int, int, int *))(*(_DWORD *)v3 + 72))(
               v3,
               0,
               1,
               v1 + 308,
               v1 + 316,
               &v4);
    *(_BYTE *)(v1 + 325) = 0;
  }
  return result;
}

//----- (10040EA0) --------------------------------------------------------
int __thiscall sub_10040EA0(int this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // edi@1
  int result; // eax@2
  int v6; // ecx@4
  int v7; // eax@8
  int v8; // eax@8
  int v9; // [sp+2Ch] [bp-28h]@11
  char v10[20]; // [sp+34h] [bp-20h]@8
  int v11; // [sp+48h] [bp-Ch]@8

  v3 = this;
  v4 = a3 * a2;
  if ( a3 * a2 )
  {
    if ( (unsigned int)v4 > *(_DWORD *)(this + 320) )
    {
      v6 = *(_DWORD *)(this + 308);
      if ( v6 )
      {
        (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v6 + 8))(*(_DWORD *)(v3 + 308));
        *(_DWORD *)(v3 + 308) = 0;
      }
      *(_DWORD *)(v3 + 320) = 2 * v4;
    }
    if ( !*(_DWORD *)(v3 + 308) )
    {
      v7 = *(_DWORD *)(v3 + 320);
      *(_OWORD *)&v10[4] = 0i64;
      *(_DWORD *)&v10[4] = v7;
      v8 = *(_DWORD *)(v3 + 4);
      _mm_storel_epi64((__m128i *)&v11, 0i64);
      *(_QWORD *)&v10[8] = 4294967298i64;
      *(_DWORD *)&v10[16] = 0x10000;
      (*(void (__stdcall **)(int, char *, _DWORD, int))(*(_DWORD *)v8 + 12))(v8, &v10[4], 0, v3 + 308);
      *(_BYTE *)(v3 + 325) = 1;
    }
    if ( *(_DWORD *)(v3 + 316) != a2 )
    {
      *(_DWORD *)(v3 + 316) = a2;
      *(_BYTE *)(v3 + 325) = 1;
    }
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, int *))(**(_DWORD **)(v3 + 8) + 56))(
      *(_DWORD *)(v3 + 8),
      *(_DWORD *)(v3 + 308),
      0,
      4,
      0,
      &v9);
    result = v9;
    *(_BYTE *)(v3 + 324) = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (100410C0) --------------------------------------------------------
char __userpurge sub_100410C0@<al>(int a1@<ecx>, int a2@<ebx>, int a3, const unsigned __int16 *a4)
{
  int v4; // edi@1
  unsigned int v5; // ecx@3
  unsigned int v6; // ecx@6
  void *v7; // eax@8
  const WCHAR *v8; // ST04_4@10
  HWND v9; // eax@10
  char result; // al@12
  LPCWSTR lpText; // [sp+8h] [bp-38h]@2
  int v12; // [sp+18h] [bp-28h]@2
  unsigned int v13; // [sp+1Ch] [bp-24h]@2
  int v14[5]; // [sp+20h] [bp-20h]@2
  int v15; // [sp+3Ch] [bp-4h]@2

  v4 = a1;
  if ( a3 )
  {
    v13 = 7;
    v12 = 0;
    LOWORD(lpText) = 0;
    v15 = 0;
    sub_10001680((int)&lpText, L"Error! (HRESULT = ", 0x12u);
    sub_10004390(a2, v4, v14, 9, (int)L"%x", a3);
    if ( LOWORD(v14[0]) )
      v5 = wcslen((const unsigned __int16 *)v14);
    else
      v5 = 0;
    sub_10001680((int)&lpText, v14, v5);
    sub_10001680((int)&lpText, L")\n", 2u);
    if ( *a4 )
      v6 = wcslen(a4);
    else
      v6 = 0;
    sub_10001680((int)&lpText, a4, v6);
    v7 = &lpText;
    if ( v13 >= 8 )
      v7 = (void *)lpText;
    v8 = (const WCHAR *)v7;
    v9 = GetActiveWindow();
    MessageBoxW(v9, v8, L"gpuDX11", 0x10u);
    sub_10041F90(v4);
    if ( v13 >= 8 )
      sub_10001E40(a2, v4, (LPVOID)lpText, v13 + 1);
    result = 0;
  }
  else
  {
    result = 1;
  }
  return result;
}
// 1006DB50: using guessed type wchar_t aErrorHresult[19];
// 1006DB78: using guessed type wchar_t asc_1006DB78[3];
// 1006DB80: using guessed type wchar_t asc_1006DB80[3];

//----- (100411F0) --------------------------------------------------------
void __thiscall sub_100411F0(int this, __int64 a2)
{
  int v2; // ebx@1
  int v3; // ecx@2
  int v4; // ecx@4
  int v5; // ecx@6
  int v6; // ebp@6
  int v7; // ecx@8
  int v8; // ecx@10
  int v9; // ecx@12
  int v10; // eax@14
  int v11; // ST4C_4@14
  int v12; // eax@14
  int v13; // eax@14
  int v14; // eax@14
  __int128 v15; // [sp+60h] [bp-FCh]@14
  __int128 v16; // [sp+70h] [bp-ECh]@14
  __int64 v17; // [sp+80h] [bp-DCh]@14
  char v18[28]; // [sp+88h] [bp-D4h]@14
  int v19; // [sp+A4h] [bp-B8h]@14
  __int128 v20; // [sp+A8h] [bp-B4h]@14
  __int64 v21; // [sp+B8h] [bp-A4h]@14
  __int128 v22; // [sp+C0h] [bp-9Ch]@14
  __int64 v23; // [sp+D0h] [bp-8Ch]@14
  __int128 v24; // [sp+D8h] [bp-84h]@14
  __int64 v25; // [sp+E8h] [bp-74h]@14
  __int128 v26; // [sp+F0h] [bp-6Ch]@14
  __int128 v27; // [sp+100h] [bp-5Ch]@14
  __int64 v28; // [sp+110h] [bp-4Ch]@14
  int v29; // [sp+118h] [bp-44h]@14
  char v30; // [sp+11Ch] [bp-40h]@14
  int v31; // [sp+12Ch] [bp-30h]@14
  int v32; // [sp+144h] [bp-18h]@14

  v2 = this;
  if ( *(_DWORD *)this )
  {
    v3 = *(_DWORD *)(this + 352);
    if ( v3 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v3 + 8))(*(_DWORD *)(v2 + 352));
      *(_DWORD *)(v2 + 352) = 0;
    }
    v4 = *(_DWORD *)(v2 + 356);
    if ( v4 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v4 + 8))(*(_DWORD *)(v2 + 356));
      *(_DWORD *)(v2 + 356) = 0;
    }
    v5 = *(_DWORD *)(v2 + 348);
    v6 = v2 + 348;
    if ( v5 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v5 + 8))(*(_DWORD *)(v2 + 348));
      *(_DWORD *)v6 = 0;
    }
    v7 = *(_DWORD *)(v2 + 364);
    if ( v7 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v7 + 8))(*(_DWORD *)(v2 + 364));
      *(_DWORD *)(v2 + 364) = 0;
    }
    v8 = *(_DWORD *)(v2 + 368);
    if ( v8 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v8 + 8))(*(_DWORD *)(v2 + 368));
      *(_DWORD *)(v2 + 368) = 0;
    }
    v9 = *(_DWORD *)(v2 + 360);
    if ( v9 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v9 + 8))(*(_DWORD *)(v2 + 360));
      *(_DWORD *)(v2 + 360) = 0;
    }
    sub_10028330(&v30, 0, 0x3Cu);
    (*(void (__stdcall **)(_DWORD, char *))(**(_DWORD **)v2 + 48))(*(_DWORD *)v2, &v30);
    (*(void (__stdcall **)(_DWORD, int, _DWORD, _DWORD, int, _DWORD))(**(_DWORD **)v2 + 52))(
      *(_DWORD *)v2,
      v32,
      a2,
      HIDWORD(a2),
      v31,
      0);
    (*(void (__stdcall **)(_DWORD, _DWORD, _UNKNOWN *, int))(**(_DWORD **)v2 + 36))(
      *(_DWORD *)v2,
      0,
      &unk_1006DDD0,
      v2 + 348);
    *((_QWORD *)&v15 + 1) = 0x400000000i64;
    v10 = sub_10007870((int)((char *)&v15 + 8), 3);
    v11 = *(_DWORD *)v6;
    *(_OWORD *)&v18[12] = *(_OWORD *)v10;
    v12 = *(_DWORD *)(v10 + 16);
    *((_QWORD *)&v15 + 1) = 17179869212i64;
    *(_QWORD *)&v16 = -4294967296i64;
    v19 = v12;
    v13 = *(_DWORD *)(v2 + 4);
    v20 = *(__int128 *)((char *)&v15 + 8);
    _mm_storel_epi64((__m128i *)&v21, _mm_loadl_epi64((const __m128i *)((char *)&v16 + 8)));
    (*(void (__stdcall **)(int, int, char *, int))(*(_DWORD *)v13 + 36))(v13, v11, &v18[12], v2 + 352);
    (*(void (__stdcall **)(_DWORD, int, __int128 *, int))(**(_DWORD **)(v2 + 4) + 28))(
      *(_DWORD *)(v2 + 4),
      *(_DWORD *)v6,
      &v20,
      v2 + 356);
    *((_QWORD *)&v15 + 1) = a2;
    *(_QWORD *)&v16 = 4294967297i64;
    *((_QWORD *)&v16 + 1) = 4294967335i64;
    v26 = *(__int128 *)((char *)&v15 + 8);
    v17 = 0i64;
    *(_QWORD *)v18 = 72i64;
    v27 = 4294967335i64;
    _mm_storel_epi64((__m128i *)&v28, _mm_loadl_epi64((const __m128i *)v18));
    v14 = *(_DWORD *)(v2 + 4);
    *((_QWORD *)&v15 + 1) = 17179869225i64;
    v22 = 12884901928i64;
    *(_QWORD *)&v16 = -4294967296i64;
    _mm_storel_epi64((__m128i *)&v23, _mm_loadl_epi64((const __m128i *)((char *)&v16 + 8)));
    v24 = *(__int128 *)((char *)&v15 + 8);
    v29 = 0;
    _mm_storel_epi64((__m128i *)&v25, _mm_loadl_epi64((const __m128i *)((char *)&v16 + 8)));
    (*(void (__stdcall **)(int, __int128 *, _DWORD, int))(*(_DWORD *)v14 + 20))(v14, &v26, 0, v2 + 360);
    (*(void (__stdcall **)(_DWORD, _DWORD, __int128 *, int))(**(_DWORD **)(v2 + 4) + 40))(
      *(_DWORD *)(v2 + 4),
      *(_DWORD *)(v2 + 360),
      &v22,
      v2 + 364);
    (*(void (__stdcall **)(_DWORD, _DWORD, __int128 *, int))(**(_DWORD **)(v2 + 4) + 28))(
      *(_DWORD *)(v2 + 4),
      *(_DWORD *)(v2 + 360),
      &v24,
      v2 + 368);
  }
}

//----- (10041500) --------------------------------------------------------
bool __thiscall sub_10041500(int this, LPCWSTR lpName, int a3, int a4, int a5)
{
  int v5; // edx@1
  int v7; // [sp-14h] [bp-14h]@0
  int v8; // [sp-10h] [bp-10h]@0

  v5 = a3;
  if ( *(_DWORD *)(a3 + 20) >= 0x10u )
    v5 = *(_DWORD *)a3;
  return sub_10040760((void *)this, this, lpName, this, *(_DWORD *)a4, this, v5, (int)"ps_5_0", v7, v8, a5, this) >= 0;
}

//----- (10041820) --------------------------------------------------------
void __thiscall sub_10041820(int this, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int v8; // edi@1
  int v9; // eax@10
  int v10; // eax@27
  int v11; // ecx@27
  int v12; // eax@27
  int v13; // esi@28
  LPVOID v14; // edx@28
  int v15; // eax@28
  int v16; // [sp+10h] [bp-118h]@8
  int v17; // [sp+14h] [bp-114h]@10
  int v18; // [sp+1Ch] [bp-10Ch]@27
  char v19; // [sp+20h] [bp-108h]@11
  int v20; // [sp+28h] [bp-100h]@11
  int v21; // [sp+2Ch] [bp-FCh]@12
  int v22; // [sp+30h] [bp-F8h]@12
  int v23; // [sp+34h] [bp-F4h]@12
  int v24; // [sp+38h] [bp-F0h]@12
  int v25; // [sp+3Ch] [bp-ECh]@12
  int v26; // [sp+40h] [bp-E8h]@12
  char v27; // [sp+44h] [bp-E4h]@13
  int v28; // [sp+48h] [bp-E0h]@13
  int v29; // [sp+4Ch] [bp-DCh]@14
  int v30; // [sp+50h] [bp-D8h]@14
  int v31; // [sp+54h] [bp-D4h]@14
  int v32; // [sp+58h] [bp-D0h]@14
  int v33; // [sp+5Ch] [bp-CCh]@14
  int v34; // [sp+60h] [bp-C8h]@14
  char v35; // [sp+64h] [bp-C4h]@15
  int v36; // [sp+68h] [bp-C0h]@15
  int v37; // [sp+6Ch] [bp-BCh]@16
  int v38; // [sp+70h] [bp-B8h]@16
  int v39; // [sp+74h] [bp-B4h]@16
  int v40; // [sp+78h] [bp-B0h]@16
  int v41; // [sp+7Ch] [bp-ACh]@16
  int v42; // [sp+80h] [bp-A8h]@16
  char v43; // [sp+84h] [bp-A4h]@17
  int v44; // [sp+88h] [bp-A0h]@17
  int v45; // [sp+8Ch] [bp-9Ch]@18
  int v46; // [sp+90h] [bp-98h]@18
  int v47; // [sp+94h] [bp-94h]@18
  int v48; // [sp+98h] [bp-90h]@18
  int v49; // [sp+9Ch] [bp-8Ch]@18
  int v50; // [sp+A0h] [bp-88h]@18
  char v51; // [sp+A4h] [bp-84h]@19
  int v52; // [sp+A8h] [bp-80h]@19
  int v53; // [sp+ACh] [bp-7Ch]@20
  int v54; // [sp+B0h] [bp-78h]@20
  int v55; // [sp+B4h] [bp-74h]@20
  int v56; // [sp+B8h] [bp-70h]@20
  int v57; // [sp+BCh] [bp-6Ch]@20
  int v58; // [sp+C0h] [bp-68h]@20
  char v59; // [sp+C4h] [bp-64h]@21
  int v60; // [sp+C8h] [bp-60h]@21
  int v61; // [sp+CCh] [bp-5Ch]@22
  int v62; // [sp+D0h] [bp-58h]@22
  int v63; // [sp+D4h] [bp-54h]@22
  int v64; // [sp+D8h] [bp-50h]@22
  int v65; // [sp+DCh] [bp-4Ch]@22
  int v66; // [sp+E0h] [bp-48h]@22
  char v67; // [sp+E4h] [bp-44h]@23
  int v68; // [sp+E8h] [bp-40h]@23
  int v69; // [sp+ECh] [bp-3Ch]@24
  int v70; // [sp+F0h] [bp-38h]@24
  int v71; // [sp+F4h] [bp-34h]@24
  int v72; // [sp+F8h] [bp-30h]@24
  int v73; // [sp+FCh] [bp-2Ch]@24
  int v74; // [sp+100h] [bp-28h]@24
  char v75; // [sp+104h] [bp-24h]@25
  int v76; // [sp+108h] [bp-20h]@25
  int v77; // [sp+10Ch] [bp-1Ch]@26
  int v78; // [sp+110h] [bp-18h]@26
  int v79; // [sp+114h] [bp-14h]@26
  int v80; // [sp+118h] [bp-10h]@26
  int v81; // [sp+11Ch] [bp-Ch]@26
  int v82; // [sp+120h] [bp-8h]@26
  char v83; // [sp+124h] [bp-4h]@27

  v8 = this;
  if ( *(_DWORD *)(this + 252) != a2
    || *(_DWORD *)(this + 176) != a3
    || *(_DWORD *)(this + 180) != a4
    || *(_DWORD *)(this + 172) != 1
    || *(_DWORD *)(this + 184) != 15
    || *(_DWORD *)(this + 272) != -1 )
  {
    *(_DWORD *)(this + 252) = a2;
    *(_DWORD *)(this + 176) = a3;
    *(_DWORD *)(this + 180) = a4;
    *(_DWORD *)(this + 172) = 1;
    *(_DWORD *)(this + 184) = 15;
    *(_DWORD *)(this + 272) = -1;
    if ( a2 )
      v16 = ((a4 | 32 * a3) << 8) | 0x3E;
    else
      v16 = 0;
    sub_10002D30(this + 44, (int)&v17, (int)&v16);
    v9 = v17;
    if ( v17 == *(_DWORD *)(v8 + 48) )
    {
      sub_10028330(&v19, 0, 0x108u);
      v20 = a2;
      if ( a2 )
      {
        v23 = 1;
        v21 = a3;
        v22 = a4;
        v26 = 1;
        v24 = 2;
        v25 = 1;
      }
      v27 = 15;
      v28 = a2;
      if ( a2 )
      {
        v31 = 1;
        v29 = a3;
        v30 = a4;
        v34 = 1;
        v32 = 2;
        v33 = 1;
      }
      v35 = 15;
      v36 = a2;
      if ( a2 )
      {
        v39 = 1;
        v37 = a3;
        v38 = a4;
        v42 = 1;
        v40 = 2;
        v41 = 1;
      }
      v43 = 15;
      v44 = a2;
      if ( a2 )
      {
        v47 = 1;
        v45 = a3;
        v46 = a4;
        v50 = 1;
        v48 = 2;
        v49 = 1;
      }
      v51 = 15;
      v52 = a2;
      if ( a2 )
      {
        v55 = 1;
        v53 = a3;
        v54 = a4;
        v58 = 1;
        v56 = 2;
        v57 = 1;
      }
      v59 = 15;
      v60 = a2;
      if ( a2 )
      {
        v63 = 1;
        v61 = a3;
        v62 = a4;
        v66 = 1;
        v64 = 2;
        v65 = 1;
      }
      v67 = 15;
      v68 = a2;
      if ( a2 )
      {
        v71 = 1;
        v69 = a3;
        v70 = a4;
        v74 = 1;
        v72 = 2;
        v73 = 1;
      }
      v75 = 15;
      v76 = a2;
      if ( a2 )
      {
        v79 = 1;
        v77 = a3;
        v78 = a4;
        v82 = 1;
        v80 = 2;
        v81 = 1;
      }
      v10 = *(_DWORD *)(v8 + 4);
      v83 = 15;
      (*(void (__stdcall **)(int, char *, int *))(*(_DWORD *)v10 + 80))(v10, &v19, &v18);
      sub_10002D30(v8 + 44, (int)&v17, (int)&v16);
      v12 = v17;
      if ( v17 == *(_DWORD *)(v8 + 48) )
      {
        v17 = (int)&v16;
        v13 = **(_DWORD **)(v8 + 48);
        v14 = sub_10008330(**(void ***)(v8 + 48), *(void **)(v13 + 4), v11, (int)&v17, v11);
        v15 = *(_DWORD *)(v8 + 52);
        if ( (unsigned int)(268435454 - v15) < 1 )
          sub_1000DA74((int)"list<T> too long");
        *(_DWORD *)(v8 + 52) = v15 + 1;
        *(_DWORD *)(v13 + 4) = v14;
        **((_DWORD **)v14 + 1) = v14;
        sub_10003050(v8 + 44, (int)&v17, **(_DWORD **)(v8 + 48) + 8, **(LPVOID **)(v8 + 48));
        v12 = v17;
      }
      *(_DWORD *)(v12 + 12) = v18;
      sub_10002D30(v8 + 44, (int)&v17, (int)&v16);
      v9 = v17;
    }
    (*(void (__stdcall **)(_DWORD, _DWORD, __int128 *, signed int))(**(_DWORD **)(v8 + 8) + 140))(
      *(_DWORD *)(v8 + 8),
      *(_DWORD *)(v9 + 12),
      &xmmword_1006DDB0,
      -1);
  }
}
// 1006DDB0: using guessed type __int128 xmmword_1006DDB0;

//----- (10041BF0) --------------------------------------------------------
void __thiscall sub_10041BF0(void *this, int a2, int a3, int a4, int a5, __int64 *a6, int a7, int a8, __int64 *a9, int a10)
{
  __int64 *v10; // ebp@1
  void *v11; // edi@1
  int v12; // ecx@1
  int v13; // ecx@8
  int v14; // edx@8
  signed int v15; // esi@8
  bool v16; // cf@10
  int v17; // ecx@12
  __int64 *v18; // edx@12
  signed int v19; // esi@12
  unsigned __int8 v20; // al@18
  unsigned int v21; // esi@18
  int v22; // ecx@18
  int v23; // eax@18
  unsigned __int64 v24; // rax@19
  int v25; // ecx@19
  int v26; // esi@19
  __int64 v27; // rax@19
  unsigned __int64 v28; // rt0@19
  __int64 v29; // rax@19
  __int64 v30; // rax@19
  __int64 *v31; // eax@22
  int v32; // ecx@28
  int v33; // eax@28
  __int64 v34; // [sp+10h] [bp-48h]@17
  int v35; // [sp+1Ch] [bp-3Ch]@29
  int v36; // [sp+24h] [bp-34h]@23
  int v37; // [sp+28h] [bp-30h]@23
  int v38; // [sp+2Ch] [bp-2Ch]@23
  int v39; // [sp+30h] [bp-28h]@23
  char v40; // [sp+34h] [bp-24h]@24
  char v41; // [sp+35h] [bp-23h]@24
  __int128 v42; // [sp+38h] [bp-20h]@25
  __int128 v43; // [sp+48h] [bp-10h]@27

  v10 = a9;
  v11 = this;
  v12 = a4;
  if ( *((_DWORD *)v11 + 50) == a3 && *((_DWORD *)v11 + 51) == a4 && *((_DWORD *)v11 + 52) == a5 )
  {
    if ( !a5 )
      return;
    if ( *((_BYTE *)v11 + 212) == (_BYTE)a6 && *((_BYTE *)v11 + 213) == (_BYTE)a7 )
    {
      if ( a8 )
      {
        v13 = (int)((char *)v11 + 216);
        v14 = a8;
        v15 = 12;
        while ( *(_DWORD *)v13 == *(_DWORD *)v14 )
        {
          v13 += 4;
          v14 += 4;
          v16 = (unsigned int)v15 < 4;
          v15 -= 4;
          if ( v16 )
            goto LABEL_11;
        }
      }
      else
      {
LABEL_11:
        if ( a9 )
        {
          v17 = (int)((char *)v11 + 232);
          v18 = a9;
          v19 = 12;
          while ( *(_DWORD *)v17 == *(_DWORD *)v18 )
          {
            v17 += 4;
            v18 = (__int64 *)((char *)v18 + 4);
            v16 = (unsigned int)v19 < 4;
            v19 -= 4;
            if ( v16 )
              goto LABEL_15;
          }
        }
        else
        {
LABEL_15:
          if ( *((_DWORD *)v11 + 62) == a10 )
            return;
        }
      }
      v12 = a4;
    }
  }
  *((_DWORD *)v11 + 62) = a10;
  *((_DWORD *)v11 + 50) = a3;
  *((_DWORD *)v11 + 51) = v12;
  *((_DWORD *)v11 + 52) = a5;
  v34 = a2 | 2 * (v12 | 2 * (a3 | 16 * a5));
  if ( a5 )
  {
    *((_BYTE *)v11 + 212) = (_BYTE)a6;
    v20 = a7;
    *((_BYTE *)v11 + 213) = a7;
    v21 = (unsigned __int64)v20 >> 24;
    v22 = (unsigned __int8)a6 | (v20 << 8);
    v23 = a8;
    HIDWORD(v34) |= __PAIR__(v21, v22) >> 25;
    LODWORD(v34) = (v22 << 7) | v34;
    if ( a8 )
    {
      *(_OWORD *)((char *)v11 + 216) = *(_OWORD *)a8;
      v24 = *(_DWORD *)(v23 + 12);
      v25 = v24;
      v26 = v24 >> 28;
      v27 = *(_DWORD *)(a8 + 8);
      HIDWORD(v28) = HIDWORD(v27) | v26;
      LODWORD(v28) = v27 | 16 * v25;
      v29 = *(_DWORD *)(a8 + 4);
      HIDWORD(v28) = HIDWORD(v29) | (v28 >> 28);
      LODWORD(v28) = v29 | 16 * v28;
      v30 = *(_DWORD *)a8;
      HIDWORD(v28) = HIDWORD(v30) | (v28 >> 28);
      LODWORD(v28) = v30 | 16 * v28;
      v34 |= v28 << 23;
    }
    if ( v10 )
    {
      *(_OWORD *)((char *)v11 + 232) = *(_OWORD *)v10;
      HIDWORD(v34) |= (*(_DWORD *)v10 | 16
                                      * (*((_DWORD *)v10 + 1) | 16 * (*((_DWORD *)v10 + 2) | 16 * *((_DWORD *)v10 + 3)))) << 7;
    }
  }
  sub_10002CB0((char *)v11 + 12, (int)&a9, (int)&v34);
  v31 = a9;
  if ( a9 == *((__int64 **)v11 + 4) )
  {
    sub_10028330(&v36, 0, 0x34u);
    v36 = a2;
    v39 = a5;
    v37 = a4 != 0;
    v38 = a3;
    if ( a5 )
    {
      v40 = (char)a6;
      v41 = a7;
      if ( a8 )
        v42 = *(_OWORD *)a8;
      if ( v10 )
        v43 = *(_OWORD *)v10;
    }
    (*(void (__stdcall **)(_DWORD, int *, int *))(**((_DWORD **)v11 + 1) + 84))(*((_DWORD *)v11 + 1), &v36, &a7);
    sub_10002CB0((char *)v11 + 12, (int)&a6, (int)&v34);
    v33 = (int)a6;
    if ( a6 == *((__int64 **)v11 + 4) )
    {
      a6 = &v34;
      sub_10002E30((int)((char *)v11 + 12), (int)&v35, v32, (int)&a6, v32);
      v33 = v35;
    }
    *(_DWORD *)(v33 + 16) = a7;
    sub_10002CB0((char *)v11 + 12, (int)&a6, (int)&v34);
    v31 = a6;
  }
  (*(void (__stdcall **)(_DWORD, _DWORD, int))(**((_DWORD **)v11 + 2) + 144))(
    *((_DWORD *)v11 + 2),
    *((_DWORD *)v31 + 4),
    a10);
}

//----- (10041F90) --------------------------------------------------------
void __thiscall sub_10041F90(int this)
{
  int v1; // ebx@1
  int v2; // ecx@1
  int v3; // ecx@3
  int v4; // ecx@5
  int v5; // ecx@7
  int v6; // ecx@9
  int v7; // ecx@11
  int v8; // edi@13
  int i; // esi@13
  int v10; // ecx@14
  void **v11; // eax@17
  void *v12; // ecx@17
  void *v13; // esi@18
  int v14; // edi@21
  int j; // esi@21
  void **v16; // eax@23
  void *v17; // ecx@23
  void *v18; // esi@24
  int v19; // edi@27
  int k; // esi@27
  void **v21; // eax@29
  void *v22; // ecx@29
  void *v23; // esi@30
  int v24; // edi@33
  int l; // esi@33
  void **v26; // eax@35
  void *v27; // ecx@35
  void *v28; // esi@36
  int v29; // edi@39
  int m; // esi@39
  void **v31; // eax@41
  void *v32; // ecx@41
  void *v33; // esi@42
  int v34; // edi@43
  int n; // esi@43
  void **v36; // eax@45
  void *v37; // ecx@45
  void *v38; // esi@46
  int v39; // edi@47
  int ii; // esi@47
  void **v41; // eax@49
  void *v42; // ecx@49
  void *v43; // esi@50
  int v44; // esi@51
  int v45; // eax@51
  int v46; // edi@51
  int v47; // esi@51
  int v48; // ecx@54
  int v49; // ecx@56
  int v50; // ecx@58
  int v51; // ecx@60
  int v52; // ecx@62
  int v53; // ecx@64
  int v54; // ecx@68
  char v55; // [sp+Ch] [bp-14h]@21
  int v56; // [sp+10h] [bp-10h]@21
  int v57; // [sp+1Ch] [bp-4h]@17

  v1 = this;
  v2 = *(_DWORD *)(this + 8);
  if ( v2 )
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)v2 + 440))(v2);
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(v1 + 8) + 444))(*(_DWORD *)(v1 + 8));
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(v1 + 8) + 8))(*(_DWORD *)(v1 + 8));
    *(_DWORD *)(v1 + 8) = 0;
  }
  v3 = *(_DWORD *)(v1 + 308);
  if ( v3 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v3 + 8))(*(_DWORD *)(v1 + 308));
    *(_DWORD *)(v1 + 308) = 0;
    *(_DWORD *)(v1 + 316) = 0;
    *(_DWORD *)(v1 + 320) = 0;
    *(_WORD *)(v1 + 324) = 0;
  }
  v4 = *(_DWORD *)(v1 + 328);
  if ( v4 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v4 + 8))(*(_DWORD *)(v1 + 328));
    *(_DWORD *)(v1 + 328) = 0;
    *(_DWORD *)(v1 + 332) = 0;
    *(_DWORD *)(v1 + 336) = 0;
    *(_WORD *)(v1 + 340) = 0;
  }
  v5 = *(_DWORD *)(v1 + 372);
  if ( v5 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v5 + 8))(*(_DWORD *)(v1 + 372));
    *(_DWORD *)(v1 + 372) = 0;
  }
  v6 = *(_DWORD *)(v1 + 408);
  if ( v6 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v6 + 8))(*(_DWORD *)(v1 + 408));
    *(_DWORD *)(v1 + 408) = 0;
  }
  v7 = *(_DWORD *)(v1 + 444);
  if ( v7 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v7 + 8))(*(_DWORD *)(v1 + 444));
    *(_DWORD *)(v1 + 444) = 0;
  }
  v8 = *(_DWORD *)(v1 + 380);
  for ( i = **(_DWORD **)(v1 + 380); i != v8; i = *(_DWORD *)i )
  {
    v10 = *(_DWORD *)(i + 16);
    if ( v10 )
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v10 + 8))(*(_DWORD *)(i + 16));
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(i + 12) + 8))(*(_DWORD *)(i + 12));
  }
  v57 = 0;
  v11 = *(void ***)(v1 + 380);
  v12 = *v11;
  *v11 = v11;
  *(_DWORD *)(*(_DWORD *)(v1 + 380) + 4) = *(_DWORD *)(v1 + 380);
  *(_DWORD *)(v1 + 384) = 0;
  if ( v12 != *(void **)(v1 + 380) )
  {
    do
    {
      v13 = *(void **)v12;
      sub_1000F409(v12);
      v12 = v13;
    }
    while ( v13 != *(void **)(v1 + 380) );
  }
  if ( (unsigned int)((*(_DWORD *)(v1 + 396) - *(_DWORD *)(v1 + 388)) >> 2) < 0x10 )
    sub_100034C0((void *)(v1 + 388), 16);
  v56 = *(_DWORD *)(v1 + 380);
  *(_DWORD *)(v1 + 392) = *(_DWORD *)(v1 + 388);
  sub_100035C0(v1 + 388, (int)&v55, *(_DWORD *)(v1 + 388), 0x10u, (int)&v56);
  *(_DWORD *)(v1 + 400) = 7;
  *(_DWORD *)(v1 + 404) = 8;
  v57 = -1;
  v14 = *(_DWORD *)(v1 + 416);
  for ( j = **(_DWORD **)(v1 + 416); j != v14; j = *(_DWORD *)j )
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(j + 16) + 8))(*(_DWORD *)(j + 16));
  v57 = 1;
  v16 = *(void ***)(v1 + 416);
  v17 = *v16;
  *v16 = v16;
  *(_DWORD *)(*(_DWORD *)(v1 + 416) + 4) = *(_DWORD *)(v1 + 416);
  *(_DWORD *)(v1 + 420) = 0;
  if ( v17 != *(void **)(v1 + 416) )
  {
    do
    {
      v18 = *(void **)v17;
      sub_1000F409(v17);
      v17 = v18;
    }
    while ( v18 != *(void **)(v1 + 416) );
  }
  if ( (unsigned int)((*(_DWORD *)(v1 + 432) - *(_DWORD *)(v1 + 424)) >> 2) < 0x10 )
    sub_100034C0((void *)(v1 + 424), 16);
  v56 = *(_DWORD *)(v1 + 416);
  *(_DWORD *)(v1 + 428) = *(_DWORD *)(v1 + 424);
  sub_100035C0(v1 + 424, (int)&v55, *(_DWORD *)(v1 + 424), 0x10u, (int)&v56);
  *(_DWORD *)(v1 + 436) = 7;
  *(_DWORD *)(v1 + 440) = 8;
  v57 = -1;
  v19 = *(_DWORD *)(v1 + 452);
  for ( k = **(_DWORD **)(v1 + 452); k != v19; k = *(_DWORD *)k )
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(k + 16) + 8))(*(_DWORD *)(k + 16));
  v57 = 2;
  v21 = *(void ***)(v1 + 452);
  v22 = *v21;
  *v21 = v21;
  *(_DWORD *)(*(_DWORD *)(v1 + 452) + 4) = *(_DWORD *)(v1 + 452);
  *(_DWORD *)(v1 + 456) = 0;
  if ( v22 != *(void **)(v1 + 452) )
  {
    do
    {
      v23 = *(void **)v22;
      sub_1000F409(v22);
      v22 = v23;
    }
    while ( v23 != *(void **)(v1 + 452) );
  }
  if ( (unsigned int)((*(_DWORD *)(v1 + 468) - *(_DWORD *)(v1 + 460)) >> 2) < 0x10 )
    sub_10007B80((void *)(v1 + 460), (int)v22);
  v56 = *(_DWORD *)(v1 + 452);
  *(_DWORD *)(v1 + 464) = *(_DWORD *)(v1 + 460);
  sub_10007BE0(v1 + 460, (int)&v55, *(_DWORD *)(v1 + 460), (int)v22, (int)&v56);
  *(_DWORD *)(v1 + 472) = 7;
  *(_DWORD *)(v1 + 476) = 8;
  v57 = -1;
  v24 = *(_DWORD *)(v1 + 484);
  for ( l = **(_DWORD **)(v1 + 484); l != v24; l = *(_DWORD *)l )
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(l + 12) + 8))(*(_DWORD *)(l + 12));
  v57 = 3;
  v26 = *(void ***)(v1 + 484);
  v27 = *v26;
  *v26 = v26;
  *(_DWORD *)(*(_DWORD *)(v1 + 484) + 4) = *(_DWORD *)(v1 + 484);
  *(_DWORD *)(v1 + 488) = 0;
  if ( v27 != *(void **)(v1 + 484) )
  {
    do
    {
      v28 = *(void **)v27;
      sub_1000F409(v27);
      v27 = v28;
    }
    while ( v28 != *(void **)(v1 + 484) );
  }
  if ( (unsigned int)((*(_DWORD *)(v1 + 500) - *(_DWORD *)(v1 + 492)) >> 2) < 0x10 )
    sub_100034C0((void *)(v1 + 492), 16);
  v56 = *(_DWORD *)(v1 + 484);
  *(_DWORD *)(v1 + 496) = *(_DWORD *)(v1 + 492);
  sub_100035C0(v1 + 492, (int)&v55, *(_DWORD *)(v1 + 492), 0x10u, (int)&v56);
  *(_DWORD *)(v1 + 504) = 7;
  *(_DWORD *)(v1 + 508) = 8;
  v57 = -1;
  v29 = *(_DWORD *)(v1 + 16);
  for ( m = **(_DWORD **)(v1 + 16); m != v29; m = *(_DWORD *)m )
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(m + 16) + 8))(*(_DWORD *)(m + 16));
  v57 = 4;
  v31 = *(void ***)(v1 + 16);
  v32 = *v31;
  *v31 = v31;
  *(_DWORD *)(*(_DWORD *)(v1 + 16) + 4) = *(_DWORD *)(v1 + 16);
  *(_DWORD *)(v1 + 20) = 0;
  if ( v32 != *(void **)(v1 + 16) )
  {
    do
    {
      v33 = *(void **)v32;
      sub_1000F409(v32);
      v32 = v33;
    }
    while ( v33 != *(void **)(v1 + 16) );
  }
  sub_10003450(v1 + 12, 8);
  v57 = -1;
  v34 = *(_DWORD *)(v1 + 48);
  for ( n = **(_DWORD **)(v1 + 48); n != v34; n = *(_DWORD *)n )
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(n + 12) + 8))(*(_DWORD *)(n + 12));
  v57 = 5;
  v36 = *(void ***)(v1 + 48);
  v37 = *v36;
  *v36 = v36;
  *(_DWORD *)(*(_DWORD *)(v1 + 48) + 4) = *(_DWORD *)(v1 + 48);
  *(_DWORD *)(v1 + 52) = 0;
  if ( v37 != *(void **)(v1 + 48) )
  {
    do
    {
      v38 = *(void **)v37;
      sub_100011F0(v1, v34, v37, 1, 0x10u);
      v37 = v38;
    }
    while ( v38 != *(void **)(v1 + 48) );
  }
  sub_10003450(v1 + 44, 8);
  v57 = -1;
  v39 = *(_DWORD *)(v1 + 80);
  for ( ii = **(_DWORD **)(v1 + 80); ii != v39; ii = *(_DWORD *)ii )
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(ii + 12) + 8))(*(_DWORD *)(ii + 12));
  v57 = 6;
  v41 = *(void ***)(v1 + 80);
  v42 = *v41;
  *v41 = v41;
  *(_DWORD *)(*(_DWORD *)(v1 + 80) + 4) = *(_DWORD *)(v1 + 80);
  *(_DWORD *)(v1 + 84) = 0;
  if ( v42 != *(void **)(v1 + 80) )
  {
    do
    {
      v43 = *(void **)v42;
      sub_100011F0(v1, v39, v42, 1, 0x10u);
      v42 = v43;
    }
    while ( v43 != *(void **)(v1 + 80) );
  }
  sub_10003450(v1 + 76, 8);
  v44 = *(_DWORD *)(v1 + 112);
  v45 = v1 + 112;
  v46 = *(_DWORD *)(v1 + 112);
  v56 = v1 + 112;
  v47 = *(_DWORD *)v44;
  if ( v47 != v46 )
  {
    do
    {
      FreeResource(*(HGLOBAL *)(v47 + 32));
      v47 = *(_DWORD *)v47;
    }
    while ( v47 != v46 );
    v45 = v56;
  }
  v57 = 7;
  sub_10002B30((void *)v45);
  sub_10003450(v1 + 108, 8);
  v57 = -1;
  v48 = *(_DWORD *)(v1 + 356);
  if ( v48 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v48 + 8))(*(_DWORD *)(v1 + 356));
    *(_DWORD *)(v1 + 356) = 0;
  }
  v49 = *(_DWORD *)(v1 + 352);
  if ( v49 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v49 + 8))(*(_DWORD *)(v1 + 352));
    *(_DWORD *)(v1 + 352) = 0;
  }
  v50 = *(_DWORD *)(v1 + 348);
  if ( v50 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v50 + 8))(*(_DWORD *)(v1 + 348));
    *(_DWORD *)(v1 + 348) = 0;
  }
  v51 = *(_DWORD *)(v1 + 364);
  if ( v51 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v51 + 8))(*(_DWORD *)(v1 + 364));
    *(_DWORD *)(v1 + 364) = 0;
  }
  v52 = *(_DWORD *)(v1 + 368);
  if ( v52 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v52 + 8))(*(_DWORD *)(v1 + 368));
    *(_DWORD *)(v1 + 368) = 0;
  }
  v53 = *(_DWORD *)(v1 + 360);
  if ( v53 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v53 + 8))(*(_DWORD *)(v1 + 360));
    *(_DWORD *)(v1 + 360) = 0;
  }
  if ( *(_DWORD *)v1 )
  {
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)v1 + 40))(*(_DWORD *)v1, 0, 0);
    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)v1 + 8))(*(_DWORD *)v1);
    *(_DWORD *)v1 = 0;
  }
  v54 = *(_DWORD *)(v1 + 4);
  if ( v54 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v54 + 8))(*(_DWORD *)(v1 + 4));
    *(_DWORD *)(v1 + 4) = 0;
  }
  sub_100402B0(640, 480);
}

//----- (10042610) --------------------------------------------------------
char __userpurge sub_10042610@<al>(int a1@<eax>, int a2@<ecx>, int a3@<ebp>, int a4, int a5)
{
  int v5; // edi@1
  int v6; // edx@1
  int v7; // eax@1
  int v8; // ecx@2
  char result; // al@4
  signed int v10; // esi@5
  int v11; // eax@6
  int v12; // esi@18
  int v13; // eax@18
  int v14; // edx@19
  int v15; // ST20_4@19
  int v16; // eax@19
  int v17; // eax@20
  int v18; // ecx@21
  int v19; // esi@21
  __int128 v20; // xmm0@21
  __m128i v21; // xmm0@21
  int v22; // eax@21
  int v23; // eax@22
  int v24; // eax@23
  char v25; // al@23
  __int128 v26; // [sp-124h] [bp-130h]@21
  signed __int128 v27; // [sp-114h] [bp-120h]@21
  int v28; // [sp-104h] [bp-110h]@21
  int v29; // [sp-FCh] [bp-108h]@21
  __int128 v30; // [sp-F8h] [bp-104h]@21
  int v31; // [sp-E8h] [bp-F4h]@21
  __int128 v32; // [sp-E0h] [bp-ECh]@21
  int v33; // [sp-D0h] [bp-DCh]@21
  __int128 v34; // [sp-C8h] [bp-D4h]@19
  int v35; // [sp-B8h] [bp-C4h]@19
  __int128 v36; // [sp-B0h] [bp-BCh]@19
  int v37; // [sp-A0h] [bp-ACh]@19
  signed int v38; // [sp-9Ch] [bp-A8h]@1
  signed int v39; // [sp-98h] [bp-A4h]@1
  int v40; // [sp-94h] [bp-A0h]@1
  signed int v41; // [sp-90h] [bp-9Ch]@1
  signed int v42; // [sp-8Ch] [bp-98h]@1
  signed int v43; // [sp-80h] [bp-8Ch]@1
  int v44; // [sp-7Ch] [bp-88h]@1
  signed int v45; // [sp-78h] [bp-84h]@1
  signed int v46; // [sp-74h] [bp-80h]@1
  int v47; // [sp-70h] [bp-7Ch]@1
  signed int v48; // [sp-6Ch] [bp-78h]@1
  int v49; // [sp-60h] [bp-6Ch]@2
  signed int v50; // [sp-5Ch] [bp-68h]@1
  signed int v51; // [sp-58h] [bp-64h]@1
  int v52; // [sp-54h] [bp-60h]@1
  int v53; // [sp-50h] [bp-5Ch]@5
  int v54; // [sp-4Ch] [bp-58h]@5
  int v55; // [sp-48h] [bp-54h]@5
  int v56; // [sp-44h] [bp-50h]@1
  signed int v57; // [sp-40h] [bp-4Ch]@21
  signed int v58; // [sp-3Ch] [bp-48h]@21
  signed int v59; // [sp-38h] [bp-44h]@21
  signed int v60; // [sp-34h] [bp-40h]@21
  signed __int64 v61; // [sp-30h] [bp-3Ch]@21
  signed int v62; // [sp-2Ch] [bp-38h]@19
  signed int v63; // [sp-28h] [bp-34h]@19
  __int128 v64; // [sp-24h] [bp-30h]@6
  char v65; // [sp-11h] [bp-1Dh]@23
  int *v66; // [sp-10h] [bp-1Ch]@1
  int v67; // [sp-Ch] [bp-18h]@1
  int (__cdecl *v68)(int, int, int, int); // [sp-8h] [bp-14h]@1
  signed int v69; // [sp-4h] [bp-10h]@1
  int v70; // [sp+0h] [bp-Ch]@1
  int v71; // [sp+4h] [bp-8h]@1
  int v72; // [sp+8h] [bp-4h]@1
  int retaddr; // [sp+Ch] [bp+0h]@1

  v70 = a3;
  v71 = retaddr;
  v69 = -1;
  v68 = sub_100637B6;
  v67 = a1;
  v66 = &v72;
  v52 = 0;
  v5 = a2;
  v51 = 45056;
  v50 = 1;
  sub_10028330(&v38, 0, 0x3Cu);
  v6 = v5 + 8;
  v46 = 1;
  v38 = 640;
  v39 = 480;
  v47 = *(_DWORD *)(dword_1007CD9C + 4);
  v7 = 0;
  v42 = 28;
  v40 = 0;
  v41 = 1;
  v45 = 48;
  v43 = 1;
  v44 = 0;
  v48 = 1;
  v56 = 0;
  do
  {
    v8 = D3D11CreateDeviceAndSwapChain(0, *(&v70 + v7 - 23), 0, 0, &v51, 1, 7, &v38, v5, v5 + 4, &v52, v6);
    v49 = v8;
    if ( v8 >= 0 )
      break;
    v6 = v5 + 8;
    v7 = v56 + 1;
    v56 = v7;
  }
  while ( (unsigned int)v7 < 1 );
  result = sub_100410C0(v5, (int)&v72, v8, L"Create Device And Swap Chain failed");
  if ( result )
  {
    dword_1007CDA4 = v56;
    v53 = 0;
    v69 = 0;
    v54 = 0;
    v55 = 0;
    LOBYTE(v69) = 2;
    (*(void (__stdcall **)(_DWORD, _UNKNOWN *, int *))**(void (__stdcall ****)(_DWORD, _DWORD, _DWORD))(v5 + 4))(
      *(_DWORD *)(v5 + 4),
      &unk_1006DDE0,
      &v53);
    (*(void (__stdcall **)(int, _UNKNOWN *, int *))(*(_DWORD *)v53 + 24))(v53, &unk_1006DD9C, &v54);
    (*(void (__stdcall **)(int, _UNKNOWN *, int *))(*(_DWORD *)v54 + 24))(v54, &unk_1006DDC0, &v55);
    (*(void (__stdcall **)(int, _DWORD, signed int))(*(_DWORD *)v55 + 32))(v55, *(_DWORD *)(dword_1007CD9C + 4), 2);
    *(_DWORD *)(v5 + 344) = 2;
    v10 = 2;
    do
    {
      v11 = *(_DWORD *)(v5 + 4);
      v64 = 0i64;
      if ( (*(int (__stdcall **)(int, signed int, signed int, __int128 *))(*(_DWORD *)v11 + 120))(v11, 28, v10, &v64) >= 0
        && (_DWORD)v64
        && (*(int (__stdcall **)(_DWORD, signed int, signed int, char *))(**(_DWORD **)(v5 + 4) + 120))(
             *(_DWORD *)(v5 + 4),
             20,
             v10,
             (char *)&v64 + 4) >= 0
        && DWORD1(v64)
        && (*(int (__stdcall **)(_DWORD, signed int, signed int, char *))(**(_DWORD **)(v5 + 4) + 120))(
             *(_DWORD *)(v5 + 4),
             40,
             v10,
             (char *)&v64 + 8) >= 0
        && DWORD2(v64)
        && (*(int (__stdcall **)(_DWORD, signed int, signed int, char *))(**(_DWORD **)(v5 + 4) + 120))(
             *(_DWORD *)(v5 + 4),
             17,
             v10,
             (char *)&v64 + 12) >= 0
        && DWORD3(v64)
        && (unsigned int)v10 > *(_DWORD *)(v5 + 344) )
        *(_DWORD *)(v5 + 344) = v10;
      ++v10;
    }
    while ( (unsigned int)v10 < 0x20 );
    if ( !sub_100410C0(v5, (int)&v72, v49, L"Create Device failed")
      || (v12 = v5 + 348,
          v13 = (*(int (__stdcall **)(_DWORD, _DWORD, _UNKNOWN *, int))(**(_DWORD **)v5 + 36))(
                  *(_DWORD *)v5,
                  0,
                  &unk_1006DDD0,
                  v5 + 348),
          !sub_100410C0(v5, (int)&v72, v13, L"Create the render target view failed"))
      || (v14 = *(_DWORD *)(v5 + 4),
          v63 = 0,
          *(_QWORD *)&v64 = 4i64,
          v37 = DWORD3(v64),
          v36 = *(_OWORD *)&v63,
          v62 = 28,
          v63 = 4,
          *(_QWORD *)&v64 = -4294967296i64,
          v34 = *(_OWORD *)&v62,
          v15 = *(_DWORD *)v12,
          _mm_storel_epi64((__m128i *)&v35, _mm_loadl_epi64((const __m128i *)((char *)&v64 + 8))),
          v16 = (*(int (__stdcall **)(int, int, __int128 *, int))(*(_DWORD *)v14 + 36))(v14, v15, &v36, v5 + 352),
          !sub_100410C0(v5, (int)&v72, v16, L"Create the render target view failed"))
      || (v17 = (*(int (__stdcall **)(_DWORD, int, __int128 *, int))(**(_DWORD **)(v5 + 4) + 28))(
                  *(_DWORD *)(v5 + 4),
                  *(_DWORD *)v12,
                  &v34,
                  v5 + 356),
          !sub_100410C0(v5, (int)&v72, v17, L"Failed to Create Depth Texture"))
      || (v18 = *(_DWORD *)(v5 + 4),
          v19 = v5 + 360,
          v57 = 640,
          v58 = 480,
          v59 = 1,
          v60 = 1,
          v26 = *(_OWORD *)&v57,
          *(_QWORD *)&v64 = 309237645312i64,
          v61 = 4294967335i64,
          v27 = 4294967335i64,
          *(_QWORD *)&v62 = 12884901928i64,
          _mm_storel_epi64((__m128i *)&v28, _mm_loadl_epi64((const __m128i *)((char *)&v64 + 4))),
          *(_QWORD *)((char *)&v64 + 4) = 0i64,
          v20 = *(unsigned __int64 *)&v62,
          v62 = 41,
          v63 = 4,
          v32 = v20,
          *(_QWORD *)&v64 = -4294967296i64,
          _mm_storel_epi64((__m128i *)&v33, _mm_loadl_epi64((const __m128i *)((char *)&v64 + 8))),
          v30 = *(_OWORD *)&v62,
          v21 = _mm_loadl_epi64((const __m128i *)((char *)&v64 + 8)),
          v29 = 0,
          _mm_storel_epi64((__m128i *)&v31, v21),
          v22 = (*(int (__stdcall **)(int, __int128 *, _DWORD, int))(*(_DWORD *)v18 + 20))(v18, &v26, 0, v5 + 360),
          !sub_100410C0(v5, (int)&v72, v22, L"Failed to Create Depth Texture"))
      || (v23 = (*(int (__stdcall **)(_DWORD, _DWORD, __int128 *, int))(**(_DWORD **)(v5 + 4) + 40))(
                  *(_DWORD *)(v5 + 4),
                  *(_DWORD *)v19,
                  &v32,
                  v5 + 364),
          !sub_100410C0(v5, (int)&v72, v23, L"Failed to Create Depth View"))
      || (v24 = (*(int (__stdcall **)(_DWORD, _DWORD, __int128 *, int))(**(_DWORD **)(v5 + 4) + 28))(
                  *(_DWORD *)(v5 + 4),
                  *(_DWORD *)v19,
                  &v30,
                  v5 + 368),
          v25 = sub_100410C0(v5, (int)&v72, v24, L"Failed to Create Depth Texture"),
          v65 = 1,
          !v25) )
      v65 = 0;
    LOBYTE(v69) = 1;
    if ( v55 )
      (*(void (__stdcall **)(int))(*(_DWORD *)v55 + 8))(v55);
    LOBYTE(v69) = 0;
    if ( v54 )
      (*(void (__stdcall **)(int))(*(_DWORD *)v54 + 8))(v54);
    v69 = -1;
    if ( v53 )
      (*(void (__stdcall **)(int))(*(_DWORD *)v53 + 8))(v53);
    result = v65;
  }
  return result;
}
// 10042610: could not find valid save-restore pair for ebp
// 10065244: using guessed type int __stdcall D3D11CreateDeviceAndSwapChain(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 1006DB88: using guessed type wchar_t aCreateDeviceAn[36];
// 1006DBD0: using guessed type wchar_t aCreateDeviceFa[21];
// 1006DC00: using guessed type wchar_t aCreateTheRende[37];
// 1006DC4C: using guessed type wchar_t aFailedToCreate[31];
// 1006DC8C: using guessed type wchar_t aFailedToCrea_0[28];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDA4: using guessed type int dword_1007CDA4;

//----- (10042AF0) --------------------------------------------------------
void *__thiscall sub_10042AF0(void *this)
{
  void *v1; // ebx@1
  int v2; // edi@1
  int v3; // esi@1
  int v4; // edi@1
  int v5; // esi@1
  int v6; // edi@1
  int v7; // esi@1
  int v8; // edi@1
  int v9; // esi@1
  int v10; // edi@1
  int v11; // esi@1
  int v12; // edi@1
  int v13; // esi@1
  int v14; // ST14_4@1
  int v15; // esi@1
  void *result; // eax@1
  int v17; // [sp+14h] [bp-10h]@1
  int v18; // [sp+20h] [bp-4h]@1

  v1 = this;
  v2 = (int)((char *)this + 12);
  v3 = (int)((char *)this + 16);
  *(_DWORD *)v2 = 0;
  *(_DWORD *)v3 = 0;
  *(_DWORD *)(v3 + 4) = 0;
  *(_DWORD *)v3 = sub_10003870(0, 0);
  *(_DWORD *)(v2 + 12) = 0;
  *(_DWORD *)(v2 + 16) = 0;
  *(_DWORD *)(v2 + 20) = 0;
  *(_DWORD *)v2 = 1065353216;
  sub_10003450(v2, 8);
  v18 = 2;
  v4 = (int)((char *)v1 + 44);
  v5 = (int)((char *)v1 + 48);
  *(_DWORD *)v4 = 0;
  *(_DWORD *)v5 = 0;
  *(_DWORD *)(v5 + 4) = 0;
  *(_DWORD *)v5 = sub_10007DD0(0, 0);
  *((_DWORD *)v1 + 14) = 0;
  *((_DWORD *)v1 + 15) = 0;
  *((_DWORD *)v1 + 16) = 0;
  *(_DWORD *)v4 = 1065353216;
  sub_10003450((int)((char *)v1 + 44), 8);
  v6 = (int)((char *)v1 + 76);
  v7 = (int)((char *)v1 + 80);
  *(_DWORD *)v6 = 0;
  *(_DWORD *)v7 = 0;
  *(_DWORD *)(v7 + 4) = 0;
  *(_DWORD *)v7 = sub_10007DD0(0, 0);
  *((_DWORD *)v1 + 22) = 0;
  *((_DWORD *)v1 + 23) = 0;
  *((_DWORD *)v1 + 24) = 0;
  *(_DWORD *)v6 = 1065353216;
  sub_10003450((int)((char *)v1 + 76), 8);
  v8 = (int)((char *)v1 + 108);
  v9 = (int)((char *)v1 + 112);
  *(_DWORD *)v8 = 0;
  *(_DWORD *)v9 = 0;
  *(_DWORD *)(v9 + 4) = 0;
  *(_DWORD *)v9 = sub_10007E20(0, 0);
  *((_DWORD *)v1 + 30) = 0;
  *((_DWORD *)v1 + 31) = 0;
  *((_DWORD *)v1 + 32) = 0;
  *(_DWORD *)v8 = 1065353216;
  sub_10003450((int)((char *)v1 + 108), 8);
  v10 = (int)((char *)v1 + 376);
  v11 = (int)((char *)v1 + 380);
  *(_DWORD *)v10 = 0;
  *(_DWORD *)v11 = 0;
  *(_DWORD *)(v11 + 4) = 0;
  *(_DWORD *)v11 = sub_100038A0(0, 0);
  *((_DWORD *)v1 + 97) = 0;
  *((_DWORD *)v1 + 98) = 0;
  *((_DWORD *)v1 + 99) = 0;
  *(_DWORD *)v10 = 1065353216;
  sub_10003450((int)((char *)v1 + 376), 8);
  v12 = (int)((char *)v1 + 412);
  v13 = (int)((char *)v1 + 416);
  *(_DWORD *)v12 = 0;
  *(_DWORD *)v13 = 0;
  *(_DWORD *)(v13 + 4) = 0;
  *(_DWORD *)v13 = sub_10003870(0, 0);
  *((_DWORD *)v1 + 106) = 0;
  *((_DWORD *)v1 + 107) = 0;
  *((_DWORD *)v1 + 108) = 0;
  *(_DWORD *)v12 = 1065353216;
  sub_10003450((int)((char *)v1 + 412), 8);
  LOBYTE(v18) = 17;
  v17 = 0;
  sub_10007940((char *)v1 + 448, (int)&v17, (int)((char *)v1 + 448));
  LOBYTE(v18) = 18;
  v14 = (int)((char *)v1 + 480);
  v15 = (int)((char *)v1 + 484);
  *(_DWORD *)v14 = 0;
  v17 = v15;
  *(_DWORD *)v15 = 0;
  *(_DWORD *)(v15 + 4) = 0;
  *(_DWORD *)v15 = sub_10007DD0(0, 0);
  *((_DWORD *)v1 + 123) = 0;
  *((_DWORD *)v1 + 124) = 0;
  *((_DWORD *)v1 + 125) = 0;
  LOBYTE(v18) = 20;
  *(_DWORD *)v14 = 1065353216;
  sub_10003450((int)((char *)v1 + 480), 8);
  result = v1;
  *(_DWORD *)v1 = 0;
  *((_DWORD *)v1 + 1) = 0;
  *((_DWORD *)v1 + 2) = 0;
  *((_DWORD *)v1 + 87) = 0;
  *((_DWORD *)v1 + 88) = 0;
  *((_DWORD *)v1 + 89) = 0;
  *((_DWORD *)v1 + 90) = 0;
  *((_DWORD *)v1 + 91) = 0;
  *((_DWORD *)v1 + 92) = 0;
  *((_DWORD *)v1 + 77) = 0;
  *((_DWORD *)v1 + 79) = 0;
  *((_DWORD *)v1 + 80) = 0;
  *((_WORD *)v1 + 162) = 0;
  *((_DWORD *)v1 + 82) = 0;
  *((_DWORD *)v1 + 83) = 0;
  *((_DWORD *)v1 + 84) = 0;
  *((_WORD *)v1 + 170) = 0;
  *((_DWORD *)v1 + 93) = 0;
  *((_DWORD *)v1 + 102) = 0;
  *((_DWORD *)v1 + 111) = 0;
  *((_DWORD *)v1 + 69) = 0;
  *((_DWORD *)v1 + 70) = 0;
  *((_DWORD *)v1 + 71) = 0;
  *((_DWORD *)v1 + 72) = 0;
  *((_DWORD *)v1 + 73) = 0;
  *((_DWORD *)v1 + 74) = 0;
  *((_DWORD *)v1 + 75) = 0;
  *((_DWORD *)v1 + 76) = 0;
  return result;
}

//----- (10042EC0) --------------------------------------------------------
int sub_10042EC0()
{
  int result; // eax@2

  if ( byte_1007CDB0 )
  {
    ShowCursor(1);
    result = dword_1007CDB4;
    byte_1007CDB0 = 0;
    if ( *(_DWORD *)dword_1007CDB4 )
      result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)dword_1007CDB4 + 40))(
                 *(_DWORD *)dword_1007CDB4,
                 0,
                 0);
  }
  else
  {
    ShowCursor(0);
    result = dword_1007CDB4;
    byte_1007CDB0 = 1;
    if ( *(_DWORD *)dword_1007CDB4 )
      result = (*(int (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)dword_1007CDB4 + 40))(
                 *(_DWORD *)dword_1007CDB4,
                 1,
                 0);
  }
  return result;
}
// 1007CDB0: using guessed type char byte_1007CDB0;
// 1007CDB4: using guessed type int dword_1007CDB4;

//----- (10042F70) --------------------------------------------------------
#error "1004334E: positive sp value has been found (funcsize=239)"

//----- (10043380) --------------------------------------------------------
int __userpurge sub_10043380@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4)
{
  int v4; // edi@1
  int v5; // eax@1
  unsigned int v6; // ecx@1
  unsigned int v7; // eax@4
  int v8; // eax@8
  int v9; // ecx@8
  int v10; // edx@8
  int v11; // eax@8
  unsigned int v12; // ecx@8
  unsigned int v13; // eax@11
  int v14; // eax@15
  int v15; // ecx@15
  int v16; // edx@15
  int v17; // eax@15
  unsigned int v18; // ecx@15
  unsigned int v19; // eax@18
  int v20; // eax@22
  int v21; // ecx@22
  int v22; // edx@22
  int v23; // eax@22
  unsigned int v24; // ecx@22
  unsigned int v25; // eax@25
  int v26; // eax@29
  int v27; // ecx@29
  int v28; // edx@29
  int v29; // eax@29
  unsigned int v30; // ecx@29
  unsigned int v31; // eax@32
  int v32; // eax@36
  int v33; // ecx@36
  int v34; // edx@36
  int v35; // eax@36
  unsigned int v36; // ecx@36
  unsigned int v37; // eax@39
  int v38; // eax@43
  int v39; // ecx@43
  int v40; // edx@43
  int v41; // ST14_4@43
  int v42; // ST18_4@43
  int v43; // ST1C_4@43
  int v44; // ST20_4@43
  __m128 v45; // xmm0@43
  __m128 v46; // xmm0@43
  __m128 v47; // xmm3@43
  __m128 v48; // xmm2@43
  __m128 v49; // xmm4@43
  __m128 v50; // xmm0@43
  __m128 v51; // xmm3@43
  __m128 v52; // xmm0@43
  __m128 v53; // xmm7@43
  __m128 v54; // xmm6@43
  __m128 v55; // xmm5@43
  __m128 v56; // xmm4@43
  int v57; // eax@43
  int v58; // eax@43
  int v59; // esi@43
  int v60; // edx@44
  float v61; // xmm1_4@44
  unsigned int v62; // esi@46
  unsigned int v63; // ecx@47
  float v64; // xmm0_4@48
  signed int v65; // eax@50
  unsigned int v66; // eax@57
  float v67; // xmm0_4@58
  float v68; // xmm0_4@60
  int v69; // ecx@60
  int v70; // eax@66
  unsigned int v72; // [sp+30h] [bp-3Ch]@45
  int v73; // [sp+30h] [bp-3Ch]@56
  int v74; // [sp+34h] [bp-38h]@44
  unsigned int v75; // [sp+38h] [bp-34h]@55
  void *v76; // [sp+44h] [bp-28h]@43
  int v77; // [sp+48h] [bp-24h]@43
  int v78; // [sp+4Ch] [bp-20h]@43
  __int128 v79; // [sp+50h] [bp-1Ch]@43

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 1992);
  v6 = *(_DWORD *)(a1 + 1988);
  if ( v6 == v5 )
  {
    if ( !v5 )
      *(_DWORD *)(v4 + 1992) = 1;
    v7 = *(_DWORD *)(v4 + 1992);
    if ( v6 >= v7 )
    {
      do
        v7 *= 2;
      while ( v6 >= v7 );
      *(_DWORD *)(v4 + 1992) = v7;
    }
    *(_DWORD *)(v4 + 1984) = sub_1002D6F7(a2, v4, *(_DWORD *)(v4 + 1984), 40 * *(_DWORD *)(v4 + 1992), 0x10u);
  }
  v8 = *(_DWORD *)(v4 + 1988);
  v9 = *(_DWORD *)(v4 + 1984);
  v10 = 5 * v8;
  *(_DWORD *)(v4 + 1988) = v8 + 1;
  *(_DWORD *)(v9 + 8 * v10) = 0;
  *(_DWORD *)(v9 + 8 * v10 + 4) = 0;
  *(_DWORD *)(v9 + 8 * v10 + 8) = 0;
  *(_DWORD *)(v9 + 8 * v10 + 24) = 0;
  *(_DWORD *)(v9 + 8 * v10 + 28) = 0;
  v11 = *(_DWORD *)(v4 + 1992);
  v12 = *(_DWORD *)(v4 + 1988);
  if ( v12 == v11 )
  {
    if ( !v11 )
      *(_DWORD *)(v4 + 1992) = 1;
    v13 = *(_DWORD *)(v4 + 1992);
    if ( v12 >= v13 )
    {
      do
        v13 *= 2;
      while ( v12 >= v13 );
      *(_DWORD *)(v4 + 1992) = v13;
    }
    *(_DWORD *)(v4 + 1984) = sub_1002D6F7(a2, v4, *(_DWORD *)(v4 + 1984), 40 * *(_DWORD *)(v4 + 1992), 0x10u);
  }
  v14 = *(_DWORD *)(v4 + 1988);
  v15 = *(_DWORD *)(v4 + 1984);
  v16 = 5 * v14;
  *(_DWORD *)(v4 + 1988) = v14 + 1;
  *(_DWORD *)(v15 + 8 * v16) = 1142947840;
  *(_DWORD *)(v15 + 8 * v16 + 4) = 0;
  *(_DWORD *)(v15 + 8 * v16 + 8) = 0;
  *(_DWORD *)(v15 + 8 * v16 + 24) = 1065353216;
  *(_DWORD *)(v15 + 8 * v16 + 28) = 0;
  v17 = *(_DWORD *)(v4 + 1992);
  v18 = *(_DWORD *)(v4 + 1988);
  if ( v18 == v17 )
  {
    if ( !v17 )
      *(_DWORD *)(v4 + 1992) = 1;
    v19 = *(_DWORD *)(v4 + 1992);
    if ( v18 >= v19 )
    {
      do
        v19 *= 2;
      while ( v18 >= v19 );
      *(_DWORD *)(v4 + 1992) = v19;
    }
    *(_DWORD *)(v4 + 1984) = sub_1002D6F7(a2, v4, *(_DWORD *)(v4 + 1984), 40 * *(_DWORD *)(v4 + 1992), 0x10u);
  }
  v20 = *(_DWORD *)(v4 + 1988);
  v21 = *(_DWORD *)(v4 + 1984);
  v22 = 5 * v20;
  *(_DWORD *)(v4 + 1988) = v20 + 1;
  *(_DWORD *)(v21 + 8 * v22) = 0;
  *(_DWORD *)(v21 + 8 * v22 + 4) = 1139802112;
  *(_DWORD *)(v21 + 8 * v22 + 8) = 0;
  *(_DWORD *)(v21 + 8 * v22 + 24) = 0;
  *(_DWORD *)(v21 + 8 * v22 + 28) = 1065353216;
  v23 = *(_DWORD *)(v4 + 1992);
  v24 = *(_DWORD *)(v4 + 1988);
  if ( v24 == v23 )
  {
    if ( !v23 )
      *(_DWORD *)(v4 + 1992) = 1;
    v25 = *(_DWORD *)(v4 + 1992);
    if ( v24 >= v25 )
    {
      do
        v25 *= 2;
      while ( v24 >= v25 );
      *(_DWORD *)(v4 + 1992) = v25;
    }
    *(_DWORD *)(v4 + 1984) = sub_1002D6F7(a2, v4, *(_DWORD *)(v4 + 1984), 40 * *(_DWORD *)(v4 + 1992), 0x10u);
  }
  v26 = *(_DWORD *)(v4 + 1988);
  v27 = *(_DWORD *)(v4 + 1984);
  v28 = 5 * v26;
  *(_DWORD *)(v4 + 1988) = v26 + 1;
  *(_DWORD *)(v27 + 8 * v28) = 1142947840;
  *(_DWORD *)(v27 + 8 * v28 + 4) = 0;
  *(_DWORD *)(v27 + 8 * v28 + 8) = 0;
  *(_DWORD *)(v27 + 8 * v28 + 24) = 1065353216;
  *(_DWORD *)(v27 + 8 * v28 + 28) = 0;
  v29 = *(_DWORD *)(v4 + 1992);
  v30 = *(_DWORD *)(v4 + 1988);
  if ( v30 == v29 )
  {
    if ( !v29 )
      *(_DWORD *)(v4 + 1992) = 1;
    v31 = *(_DWORD *)(v4 + 1992);
    if ( v30 >= v31 )
    {
      do
        v31 *= 2;
      while ( v30 >= v31 );
      *(_DWORD *)(v4 + 1992) = v31;
    }
    *(_DWORD *)(v4 + 1984) = sub_1002D6F7(a2, v4, *(_DWORD *)(v4 + 1984), 40 * *(_DWORD *)(v4 + 1992), 0x10u);
  }
  v32 = *(_DWORD *)(v4 + 1988);
  v33 = *(_DWORD *)(v4 + 1984);
  v34 = 5 * v32;
  *(_DWORD *)(v4 + 1988) = v32 + 1;
  *(_DWORD *)(v33 + 8 * v34) = 0;
  *(_DWORD *)(v33 + 8 * v34 + 4) = 1139802112;
  *(_DWORD *)(v33 + 8 * v34 + 8) = 0;
  *(_DWORD *)(v33 + 8 * v34 + 24) = 0;
  *(_DWORD *)(v33 + 8 * v34 + 28) = 1065353216;
  v35 = *(_DWORD *)(v4 + 1992);
  v36 = *(_DWORD *)(v4 + 1988);
  if ( v36 == v35 )
  {
    if ( !v35 )
      *(_DWORD *)(v4 + 1992) = 1;
    v37 = *(_DWORD *)(v4 + 1992);
    if ( v36 >= v37 )
    {
      do
        v37 *= 2;
      while ( v36 >= v37 );
      *(_DWORD *)(v4 + 1992) = v37;
    }
    *(_DWORD *)(v4 + 1984) = sub_1002D6F7(a2, v4, *(_DWORD *)(v4 + 1984), 40 * *(_DWORD *)(v4 + 1992), 0x10u);
  }
  v38 = *(_DWORD *)(v4 + 1988);
  v39 = *(_DWORD *)(v4 + 1984);
  v40 = 5 * v38;
  *(_DWORD *)(v4 + 1988) = v38 + 1;
  *(_DWORD *)(v39 + 8 * v40) = 1142947840;
  *(_DWORD *)(v39 + 8 * v40 + 4) = 1139802112;
  *(_DWORD *)(v39 + 8 * v40 + 8) = 0;
  *(_DWORD *)(v39 + 8 * v40 + 24) = 1065353216;
  *(_DWORD *)(v39 + 8 * v40 + 28) = 1065353216;
  sub_100462E0(v4);
  sub_10040BC0(v4, 1);
  sub_10041BF0((void *)v4, 0, 8, 0, 0, (__int64 *)0xFF, 255, 0, 0, 1);
  sub_10041820(v4, 1, 5, 6, v41, v42, v43, v44);
  v45 = _mm_and_ps((__m128)xmmword_1006EE90, (__m128)xmmword_1006DAE0);
  v46 = _mm_add_ps(v45, v45);
  v47 = _mm_and_ps((__m128)xmmword_1006EE90, (__m128)xmmword_1006DB30);
  v48 = _mm_shuffle_ps((__m128)COERCE_UNSIGNED_INT(0.0015625 + 0.0015625), v46, 68);
  v49 = _mm_shuffle_ps((__m128)COERCE_UNSIGNED_INT(0.0015625 + 0.0015625), v46, -18);
  v50 = v47;
  v51 = _mm_shuffle_ps(v47, (__m128)xmmword_1006EEA0, -18);
  v52 = _mm_shuffle_ps(v50, (__m128)xmmword_1006EEA0, 68);
  *(_OWORD *)(v4 + 18314304) = _mm_shuffle_ps(v48, v52, -120);
  *(_OWORD *)(v4 + 18314320) = _mm_shuffle_ps(v48, v52, -35);
  *(_OWORD *)(v4 + 18314336) = _mm_shuffle_ps(v49, v51, -120);
  *(_OWORD *)(v4 + 18314352) = _mm_shuffle_ps(v49, v51, -35);
  v53 = _mm_shuffle_ps((__m128)xmmword_1006DAA0, (__m128)xmmword_1006DA80, -18);
  v54 = _mm_shuffle_ps((__m128)xmmword_1006DAA0, (__m128)xmmword_1006DA80, 68);
  v55 = _mm_shuffle_ps((__m128)xmmword_1006DAC0, (__m128)xmmword_1006EE70, -18);
  v56 = _mm_shuffle_ps((__m128)xmmword_1006DAC0, (__m128)xmmword_1006EE70, 68);
  *(_OWORD *)(v4 + 18314400) = _mm_shuffle_ps(v53, v55, -120);
  *(_OWORD *)(v4 + 18314416) = _mm_shuffle_ps(v53, v55, -35);
  *(_OWORD *)(v4 + 18314368) = _mm_shuffle_ps(v54, v56, -120);
  *(_OWORD *)(v4 + 18314384) = _mm_shuffle_ps(v54, v56, -35);
  *(_OWORD *)(v4 + 18314432) = _mm_shuffle_ps(v54, v56, -120);
  *(_OWORD *)(v4 + 18314448) = _mm_shuffle_ps(v54, v56, -35);
  *(_OWORD *)(v4 + 18314464) = _mm_shuffle_ps(v53, v55, -120);
  *(_OWORD *)(v4 + 18314480) = _mm_shuffle_ps(v53, v55, -35);
  v57 = *(_DWORD *)(v4 + 8);
  v78 = 1142947840;
  *(_QWORD *)&v79 = 1139802112i64;
  v76 = 0;
  v77 = 0;
  DWORD2(v79) = 1065353216;
  (*(void (__stdcall **)(int, signed int, int *))(*(_DWORD *)v57 + 176))(v57, 1, &v76);
  v58 = *(_DWORD *)(v4 + 8);
  *(__int128 *)((char *)&v79 + 12) = xmmword_1006EE50;
  (*(void (__stdcall **)(int, signed int, char *))(*(_DWORD *)v58 + 180))(v58, 1, (char *)&v79 + 12);
  v59 = a3;
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, int *))(**(_DWORD **)(v4 + 8) + 56))(
    *(_DWORD *)(v4 + 8),
    **(_DWORD **)(v4 + 4 * a3 + 1660),
    0,
    4,
    0,
    &v76);
  sub_10028330(v76, 0, 0x12C000u);
  if ( *(_DWORD *)(v4 + 1592) >> (a3 - 2) )
  {
    v60 = 8 * *(_DWORD *)(v4 + 8 * a3 + 1540);
    v74 = 8 * *(_DWORD *)(v4 + 8 * a3 + 1540);
    v61 = (float)*(_BYTE *)(a3 + v4 + 1923) * 0.0039215689;
    if ( (*(_DWORD *)(v4 + 1588) >> (a3 - 1)) & 1 )
    {
      v72 = 0;
      do
      {
        v62 = 0;
        do
        {
          v63 = *(_DWORD *)(v60 + *(_DWORD *)(v4 + 512));
          if ( v63 & 0xC0000000 )
            v64 = 1.0;
          else
            v64 = 0.0;
          v60 += 4;
          v65 = (signed int)ffloor((float)(v64 * v61) * 255.0);
          if ( (_BYTE)v65 )
            *(_DWORD *)((char *)v76 + v62 + v72 * v77) = (unsigned __int8)(v63 >> 20) | (((unsigned __int8)(v63 >> 10) | (((unsigned __int8)v63 | ((unsigned __int8)v65 << 8)) << 8)) << 8);
          v62 += 4;
        }
        while ( v62 < 0xA00 );
        v60 = v74 + 4096;
        ++v72;
        v74 += 4096;
      }
      while ( v72 < 0x1E0 );
    }
    else
    {
      v75 = 0;
      do
      {
        v73 = 0;
        do
        {
          v66 = *(_WORD *)(*(_DWORD *)(v4 + 512) + v60);
          if ( v66 & 0x8000 )
            v67 = 1.0;
          else
            v67 = 0.0;
          v60 += 2;
          v68 = (float)(v67 * v61) * 255.0;
          v69 = v73;
          if ( (unsigned __int8)(signed int)ffloor(v68) )
          {
            *(_DWORD *)((char *)v76 + 4 * (v73 ^ 1) + v75 * v77) = (unsigned __int8)(((v66 >> 7) & 0xF8)
                                                                                   + ((unsigned __int8)((v66 >> 7) & 0xF8) >> 5)) | (((unsigned __int8)(((v66 >> 2) & 0xF8) + ((unsigned __int8)((v66 >> 2) & 0xF8) >> 5)) | ((((unsigned __int8)(signed int)ffloor(v68) << 8) | (unsigned __int8)(8 * v66 + ((unsigned __int8)(8 * v66) >> 5))) << 8)) << 8);
            v69 = v73;
          }
          v73 = v69 + 1;
        }
        while ( (unsigned int)(v69 + 1) < 0x280 );
        v60 = v74 + 4096;
        ++v75;
        v74 += 4096;
      }
      while ( v75 < 0x1E0 );
    }
    v59 = a3;
  }
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v4 + 8) + 60))(
    *(_DWORD *)(v4 + 8),
    **(_DWORD **)(v4 + 4 * v59 + 1660),
    0);
  if ( *(_DWORD *)(v4 + 168) )
  {
    v70 = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v4 + 168) = 0;
    (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v70 + 92))(v70, 0, 0, 0);
  }
  sub_10047460(v4, v4);
  sub_10047060(v4, v4, v59 - 2);
  return (*(int (__stdcall **)(_DWORD, signed int, int))(**(_DWORD **)(v4 + 8) + 52))(
           *(_DWORD *)(v4 + 8),
           6,
           *(_DWORD *)(v4 + 1988) - 6);
}
// 1006DA80: using guessed type __int128 xmmword_1006DA80;
// 1006DAA0: using guessed type __int128 xmmword_1006DAA0;
// 1006DAC0: using guessed type __int128 xmmword_1006DAC0;
// 1006DAE0: using guessed type __int128 xmmword_1006DAE0;
// 1006DB30: using guessed type __int128 xmmword_1006DB30;
// 1006EE50: using guessed type __int128 xmmword_1006EE50;
// 1006EE70: using guessed type __int128 xmmword_1006EE70;
// 1006EE90: using guessed type __int128 xmmword_1006EE90;
// 1006EEA0: using guessed type __int128 xmmword_1006EEA0;

//----- (10043B60) --------------------------------------------------------
int sub_10043B60()
{
  int v0; // esi@1
  int v1; // edi@1
  int v2; // ebx@1
  bool v3; // zf@2
  int v4; // eax@4
  int v5; // ST1C_4@4
  unsigned int v6; // edx@5
  int v7; // ecx@7
  int result; // eax@11
  int v9; // ecx@14
  int v10; // eax@14
  __int128 v11; // [sp+34h] [bp-10h]@4

  v0 = dword_1007CDB4;
  v1 = dword_1007CDB4 + 352;
  v2 = dword_1007CDB4 + 1928;
  do
  {
    v3 = byte_1007CDB2 == 0;
    *(_BYTE *)(v0 + 1708) = 1;
    *(_DWORD *)(v0 + 1712) = *(_DWORD *)(v0 + 628);
    *(_DWORD *)(v0 + 1716) = *(_DWORD *)(v0 + 632);
    *(_DWORD *)(v0 + 1720) = *(_DWORD *)(v0 + 636);
    if ( !v3 )
    {
      *(_BYTE *)(v0 + 1709) = 1;
      byte_1007CDB2 = 0;
    }
    (*(void (__stdcall **)(_DWORD, signed int, int, _DWORD))(**(_DWORD **)(v0 + 8) + 132))(
      *(_DWORD *)(v0 + 8),
      1,
      v1,
      *(_DWORD *)(v0 + 364));
    v4 = *(_DWORD *)(v0 + 8);
    v5 = *(_DWORD *)v1;
    v11 = *(_OWORD *)(v0 + 10619568);
    (*(void (__stdcall **)(int, int, __int128 *))(*(_DWORD *)v4 + 200))(v4, v5, &v11);
    (*(void (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD, _DWORD))(**(_DWORD **)(v0 + 8) + 212))(
      *(_DWORD *)(v0 + 8),
      *(_DWORD *)(v0 + 364),
      1,
      0,
      0);
    *(_DWORD *)(v0 + 10619584) = 0;
    *(_DWORD *)(v0 + 10619588) = 0;
    *(_DWORD *)(v0 + 10619592) = 0;
    *(_DWORD *)(v0 + 133636) = 1065353216;
    *(_DWORD *)(v0 + 133640) = 1065353216;
    *(_DWORD *)(v0 + 1964) = v2;
    *(_DWORD *)(v0 + 1932) = 0;
    *(_DWORD *)(v0 + 1944) = 0;
    *(_DWORD *)(v0 + 1956) = 0;
    *(_DWORD *)(v0 + 1988) = 0;
    *(_DWORD *)(v0 + 2000) = 0;
    *(_OWORD *)(v0 + 18221984) = xmmword_1006DAA0;
    *(_OWORD *)(v0 + 18222000) = xmmword_1006DA80;
    *(_OWORD *)(v0 + 18222016) = xmmword_1006DAC0;
    *(_OWORD *)(v0 + 18222032) = xmmword_1006EE70;
    *(_OWORD *)(v0 + 18221920) = xmmword_1006DAA0;
    *(_OWORD *)(v0 + 18221936) = xmmword_1006DA80;
    *(_OWORD *)(v0 + 18221952) = xmmword_1006DAC0;
    *(_OWORD *)(v0 + 18221968) = xmmword_1006EE70;
    *(_DWORD *)(v0 + 2012) = 0;
    *(_DWORD *)(v0 + 2024) = 0;
    v3 = *(_BYTE *)(v0 + 1708) == 0;
    *(_DWORD *)(v0 + 133632) = 0;
    *(_DWORD *)(v0 + 10619600) = 0;
    *(_DWORD *)(v0 + 10619604) = 0;
    *(_DWORD *)(v0 + 16124716) = 0;
    *(_DWORD *)(v0 + 16124720) = 0;
    *(_DWORD *)(v0 + 18222048) = 0;
    *(_DWORD *)(v0 + 18222052) = 0;
    *(_DWORD *)(v0 + 1980) = 0;
    *(_DWORD *)(v0 + 1728) = 0;
    *(_DWORD *)(v0 + 1724) = 1065353216;
    *(_WORD *)(v0 + 1912) = 0;
    if ( !v3 )
    {
      do
      {
        v6 = *(_DWORD *)(v0 + 1712);
        if ( !v6 )
          break;
        switch ( v6 >> 24 )
        {
          case 0x40u:
          case 0x41u:
            v7 = *(_DWORD *)(dword_1007CD9C + 360) + (v6 & 0x1FFFFFF);
            break;
          case 0x48u:
          case 0x4Cu:
            v7 = *(_DWORD *)(dword_1007CD9C + 344) + (v6 & 0x3FFFFF);
            break;
          default:
            v7 = 0;
            break;
        }
        *(_DWORD *)(v0 + 1712) = (*(int (__thiscall **)(int, int))(v0 + 4 * (*(_DWORD *)v7 & 0x1FF) + 18315024))(v0, v7);
      }
      while ( *(_BYTE *)(v0 + 1708) );
    }
    sub_100462E0(v0);
    result = sub_10045B70(v0);
    if ( *(_BYTE *)(v0 + 1709) )
      *(_BYTE *)(v0 + 1709) = 0;
    if ( !byte_1007CDB3 )
      break;
    v9 = dword_1007CDB8 + 1;
    v10 = *(_DWORD *)v0;
    if ( dword_1007CDB8 == 30 )
      v9 = 0;
    dword_1007CDB8 = v9;
    result = (*(int (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v10 + 32))(v10, dword_10239454, 0);
  }
  while ( byte_1007CDB3 );
  return result;
}
// 1006DA80: using guessed type __int128 xmmword_1006DA80;
// 1006DAA0: using guessed type __int128 xmmword_1006DAA0;
// 1006DAC0: using guessed type __int128 xmmword_1006DAC0;
// 1006EE70: using guessed type __int128 xmmword_1006EE70;
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDB2: using guessed type char byte_1007CDB2;
// 1007CDB3: using guessed type char byte_1007CDB3;
// 1007CDB4: using guessed type int dword_1007CDB4;
// 1007CDB8: using guessed type int dword_1007CDB8;
// 10239454: using guessed type int dword_10239454;

//----- (10043E80) --------------------------------------------------------
int __thiscall sub_10043E80(int this, int a2)
{
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (10043E90) --------------------------------------------------------
int __userpurge sub_10043E90@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4)
{
  int v4; // esi@1
  unsigned int v5; // eax@1
  int v6; // eax@2
  int v7; // ecx@3
  int v8; // eax@3
  int v9; // eax@8
  int v10; // eax@9
  int v11; // eax@12
  unsigned int v12; // ecx@13
  unsigned int v13; // eax@13
  unsigned int v14; // eax@16
  int v15; // edx@20
  int v16; // ecx@20

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 1980);
  if ( v5 == 3 )
  {
    v6 = *(_DWORD *)(a1 + 1964);
    if ( *(_DWORD *)(v6 + 8) )
    {
      v7 = *(_DWORD *)(v6 + 4);
      v8 = *(_DWORD *)v6;
      if ( v7 )
      {
        *(_DWORD *)(v8 + 72 * v7 - 72 + 48) += 3;
        goto LABEL_13;
      }
    }
    else
    {
      v8 = 0;
    }
    *(_DWORD *)(v8 + 48) += 3;
    goto LABEL_13;
  }
  if ( v5 <= 3 )
    return *(_DWORD *)(v4 + 1712) + 16;
  v9 = *(_DWORD *)(a1 + 1964);
  if ( *(_DWORD *)(v9 + 8) )
  {
    a1 = *(_DWORD *)(v9 + 4);
    v10 = *(_DWORD *)v9;
    if ( a1 )
    {
      a1 *= 9;
      v10 = v10 + 8 * a1 - 72;
    }
  }
  else
  {
    v10 = 0;
  }
  *(_DWORD *)(v10 + 48) += 3;
  v11 = sub_10008B00(v4 + 1984, a2, a3, a1);
  *(_OWORD *)(v11 + 40) = *(_OWORD *)(v11 - 40);
  *(_OWORD *)(v11 + 56) = *(_OWORD *)(v11 - 24);
  _mm_storel_epi64((__m128i *)(v11 + 72), _mm_loadl_epi64((const __m128i *)(v11 - 8)));
  *(_OWORD *)(v11 - 40) = *(_OWORD *)(v11 - 120);
  *(_OWORD *)(v11 - 24) = *(_OWORD *)(v11 - 104);
  _mm_storel_epi64((__m128i *)(v11 - 8), _mm_loadl_epi64((const __m128i *)(v11 - 88)));
  *(_OWORD *)v11 = *(_OWORD *)(v11 - 80);
  *(_OWORD *)(v11 + 16) = *(_OWORD *)(v11 - 64);
  _mm_storel_epi64((__m128i *)(v11 + 32), _mm_loadl_epi64((const __m128i *)(v11 - 48)));
LABEL_13:
  *(_DWORD *)(v4 + 2000) += 3;
  v12 = *(_DWORD *)(v4 + 2000);
  v13 = *(_DWORD *)(v4 + 2004);
  if ( v12 >= v13 )
  {
    if ( !v13 )
      *(_DWORD *)(v4 + 2004) = 1;
    v14 = *(_DWORD *)(v4 + 2004);
    if ( v12 >= v14 )
    {
      do
        v14 *= 2;
      while ( v12 >= v14 );
      *(_DWORD *)(v4 + 2004) = v14;
    }
    *(_DWORD *)(v4 + 1996) = sub_1002D6F7(a2, a3, *(_DWORD *)(v4 + 1996), 4 * *(_DWORD *)(v4 + 2004), 0x10u);
  }
  v15 = *(_DWORD *)(v4 + 2000);
  v16 = *(_DWORD *)(v4 + 1996);
  *(_DWORD *)(v16 + 4 * v15 - 12) = *(_DWORD *)(v4 + 1988) - 3;
  *(_DWORD *)(v16 + 4 * v15 - 8) = *(_DWORD *)(v4 + 1988) - 2;
  *(_DWORD *)(v16 + 4 * v15 - 4) = *(_DWORD *)(v4 + 1988) - 1;
  *(float *)(*(_DWORD *)(v4 + 1984) + 40 * *(_DWORD *)(v4 + 1988) - 16) = (float)*(_WORD *)(a4 + 4);
  *(float *)(*(_DWORD *)(v4 + 1984) + 40 * *(_DWORD *)(v4 + 1988) - 12) = (float)*(_WORD *)(a4 + 6);
  *(float *)(*(_DWORD *)(v4 + 1984) + 40 * *(_DWORD *)(v4 + 1988) - 56) = (float)*(_WORD *)(a4 + 8);
  *(float *)(*(_DWORD *)(v4 + 1984) + 40 * *(_DWORD *)(v4 + 1988) - 52) = (float)*(_WORD *)(a4 + 10);
  *(float *)(*(_DWORD *)(v4 + 1984) + 40 * *(_DWORD *)(v4 + 1988) - 96) = (float)*(_WORD *)(a4 + 12);
  *(float *)(*(_DWORD *)(v4 + 1984) + 40 * *(_DWORD *)(v4 + 1988) - 92) = (float)*(_WORD *)(a4 + 14);
  return *(_DWORD *)(v4 + 1712) + 16;
}

//----- (100440C0) --------------------------------------------------------
int __userpurge sub_100440C0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3)
{
  int v3; // esi@1
  int v4; // eax@1
  unsigned int v5; // ecx@4
  int v6; // eax@4
  unsigned int v7; // eax@7
  int v8; // eax@11
  int v9; // ecx@11
  int v10; // edx@11
  float v11; // xmm1_4@11
  int v12; // eax@11

  v3 = a1;
  v4 = *(_DWORD *)(a3 - 16) & 0x1FC;
  if ( v4 != 428 && v4 != 232 )
    sub_10048770(a1, a3);
  v5 = *(_DWORD *)(v3 + 1988);
  v6 = *(_DWORD *)(v3 + 1992);
  if ( v5 == v6 )
  {
    if ( !v6 )
      *(_DWORD *)(v3 + 1992) = 1;
    v7 = *(_DWORD *)(v3 + 1992);
    if ( v5 >= v7 )
    {
      do
        v7 *= 2;
      while ( v5 >= v7 );
      *(_DWORD *)(v3 + 1992) = v7;
    }
    *(_DWORD *)(v3 + 1984) = sub_1002D6F7(a2, a3, *(_DWORD *)(v3 + 1984), 40 * *(_DWORD *)(v3 + 1992), 0x10u);
  }
  v8 = *(_DWORD *)(v3 + 1988);
  v9 = *(_DWORD *)(v3 + 1984);
  v10 = 5 * v8;
  *(_DWORD *)(v3 + 1988) = v8 + 1;
  *(_DWORD *)(v9 + 8 * v10) = *(_DWORD *)(a3 + 4);
  *(_DWORD *)(v9 + 8 * v10 + 4) = *(_DWORD *)(a3 + 8);
  *(_DWORD *)(v9 + 8 * v10 + 8) = *(_DWORD *)(a3 + 12);
  LODWORD(v11) = (unsigned __int128)_mm_and_ps((__m128)*(_DWORD *)(v9 + 40 * v8 + 4), (__m128)xmmword_1006EED0);
  *(float *)(v9 + 8 * v10 + 32) = (float)*(_BYTE *)(a3 + 3) * 0.0039215689;
  *(float *)(v9 + 8 * v10 + 4) = *(float *)(160 * *(_DWORD *)(v3 + 133632) + v3 + 133672) - v11;
  sub_100486A0(v3, a2, a3);
  v12 = *(_DWORD *)(v3 + 1712);
  ++*(_DWORD *)(v3 + 1980);
  return v12 + 16;
}
// 1006EED0: using guessed type __int128 xmmword_1006EED0;

//----- (100441D0) --------------------------------------------------------
int __thiscall sub_100441D0(int this, int a2)
{
  return *(_DWORD *)(this + 1712) + 8;
}

//----- (100441E0) --------------------------------------------------------
int __userpurge sub_100441E0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4)
{
  int v4; // esi@1
  unsigned int v5; // ecx@1
  int v6; // eax@1
  unsigned int v7; // eax@4
  int v8; // eax@8
  int v9; // edx@8
  int v10; // ecx@8
  int v11; // ebx@11
  int v12; // eax@13
  int v13; // ecx@14
  int v14; // eax@20
  int v15; // ecx@21
  int v16; // ecx@22

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 1988);
  v6 = *(_DWORD *)(v4 + 1992);
  if ( v5 == v6 )
  {
    if ( !v6 )
      *(_DWORD *)(v4 + 1992) = 1;
    v7 = *(_DWORD *)(v4 + 1992);
    if ( v5 >= v7 )
    {
      do
        v7 *= 2;
      while ( v5 >= v7 );
      *(_DWORD *)(v4 + 1992) = v7;
    }
    *(_DWORD *)(v4 + 1984) = sub_1002D6F7(a2, a3, *(_DWORD *)(v4 + 1984), 40 * *(_DWORD *)(v4 + 1992), 0x10u);
  }
  v8 = *(_DWORD *)(v4 + 1988);
  v9 = *(_DWORD *)(v4 + 1984);
  v10 = 5 * v8;
  *(_DWORD *)(v4 + 1988) = v8 + 1;
  *(float *)(v9 + 8 * v10) = (float)*(_WORD *)(a4 + 6) * *(float *)(v4 + 1724);
  *(float *)(v9 + 8 * v10 + 4) = (float)*(_WORD *)(a4 + 10) * *(float *)(v4 + 1724);
  *(float *)(v9 + 8 * v10 + 8) = (float)*(_WORD *)(a4 + 14) * *(float *)(v4 + 1724);
  *(float *)(v9 + 8 * v10 + 12) = (float)(signed __int16)(*(_WORD *)(a4 + 4) << 6);
  *(float *)(v9 + 8 * v10 + 16) = (float)(signed __int16)(*(_WORD *)(a4 + 8) << 6);
  *(float *)(v9 + 8 * v10 + 20) = (float)(signed __int16)(*(_WORD *)(a4 + 12) << 6);
  *(float *)(v9 + 8 * v10 + 32) = (float)*(_BYTE *)(a4 + 3) * 0.0039215689;
  if ( *(_DWORD *)a4 & 0x1000 )
    *(_DWORD *)(v9 + 40 * v8 + 36) = 1065353216;
  else
    *(_DWORD *)(v9 + 40 * v8 + 36) = 0;
  v11 = a4 + 16;
  if ( (*(_DWORD *)(a4 + 16) & 0x1F8) == 344 )
  {
    *(float *)(v9 + 40 * v8 + 24) = (float)*(_WORD *)(a4 + 20);
    *(float *)(v9 + 40 * v8 + 28) = (float)*(_WORD *)(a4 + 22);
    if ( (*(_DWORD *)(a4 - 24) & 0x1FC) != 300 )
    {
      sub_10048770(v4, a4);
      v12 = *(_DWORD *)(v4 + 1964);
      if ( *(_DWORD *)(v12 + 8) )
      {
        v13 = *(_DWORD *)(v12 + 4);
        if ( v13 )
        {
          *(_BYTE *)(*(_DWORD *)v12 + 8 * (9 * v13 - 9) + 65) = (*(_DWORD *)a4 >> 23) & 1;
          sub_100486A0(v4, v11, a4 + 16);
        }
        else
        {
          *(_BYTE *)(*(_DWORD *)v12 + 65) = (*(_DWORD *)a4 >> 23) & 1;
          sub_100486A0(v4, v11, a4 + 16);
        }
        return *(_DWORD *)(v4 + 1712) + 16;
      }
      v41 = (*(_DWORD *)a4 >> 23) & 1;
    }
    sub_100486A0(v4, v11, a4 + 16);
    return *(_DWORD *)(v4 + 1712) + 16;
  }
  *(_DWORD *)(v9 + 40 * v8 + 24) = 0;
  *(_DWORD *)(v9 + 40 * v8 + 28) = 0;
  if ( (*(_DWORD *)(a4 - 16) & 0x1FC) != 300 )
  {
    sub_10048770(v4, a4);
    v14 = *(_DWORD *)(v4 + 1964);
    if ( *(_DWORD *)(v14 + 8) )
    {
      v15 = *(_DWORD *)(v14 + 4);
      if ( v15 )
        v16 = *(_DWORD *)v14 + 8 * (9 * v15 - 9);
      else
        v16 = *(_DWORD *)v14;
    }
    else
    {
      v16 = 0;
    }
    *(_BYTE *)(v16 + 65) = (*(_DWORD *)a4 >> 23) & 1;
  }
  sub_100486A0(v4, v11, a4);
  return *(_DWORD *)(v4 + 1712) + 16;
}

//----- (10044420) --------------------------------------------------------
int __userpurge sub_10044420@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4)
{
  int v4; // esi@1
  unsigned int v5; // ecx@1
  int v6; // eax@1
  unsigned int v7; // eax@4
  int v8; // eax@8
  int v9; // edx@8
  int v10; // ecx@8
  int v11; // eax@12
  int v12; // ecx@13
  int v13; // ecx@14

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 1988);
  v6 = *(_DWORD *)(v4 + 1992);
  if ( v5 == v6 )
  {
    if ( !v6 )
      *(_DWORD *)(v4 + 1992) = 1;
    v7 = *(_DWORD *)(v4 + 1992);
    if ( v5 >= v7 )
    {
      do
        v7 *= 2;
      while ( v5 >= v7 );
      *(_DWORD *)(v4 + 1992) = v7;
    }
    *(_DWORD *)(v4 + 1984) = sub_1002D6F7(a2, a3, *(_DWORD *)(v4 + 1984), 40 * *(_DWORD *)(v4 + 1992), 0x10u);
  }
  v8 = *(_DWORD *)(v4 + 1988);
  v9 = *(_DWORD *)(v4 + 1984);
  v10 = 5 * v8;
  *(_DWORD *)(v4 + 1988) = v8 + 1;
  *(_DWORD *)(v9 + 8 * v10) = *(_DWORD *)(a4 + 4);
  *(_DWORD *)(v9 + 8 * v10 + 4) = *(_DWORD *)(a4 + 8);
  *(_DWORD *)(v9 + 8 * v10 + 8) = *(_DWORD *)(a4 + 12);
  *(float *)(v9 + 8 * v10 + 24) = (float)*(_WORD *)(a4 + 16);
  *(float *)(v9 + 8 * v10 + 28) = (float)*(_WORD *)(a4 + 18);
  *(_DWORD *)(v9 + 8 * v10 + 12) = *(_DWORD *)(a4 + 20);
  *(_DWORD *)(v9 + 8 * v10 + 16) = *(_DWORD *)(a4 + 24);
  *(_DWORD *)(v9 + 8 * v10 + 20) = *(_DWORD *)(a4 + 28);
  *(float *)(v9 + 8 * v10 + 32) = (float)*(_BYTE *)(a4 + 3) * 0.0039215689;
  if ( *(_DWORD *)a4 & 0x1000 )
    *(_DWORD *)(v9 + 40 * v8 + 36) = 1065353216;
  else
    *(_DWORD *)(v9 + 40 * v8 + 36) = 0;
  if ( (*(_DWORD *)(a4 - 32) & 0x1FC) != 444 )
  {
    sub_10048770(v4, a4);
    v11 = *(_DWORD *)(v4 + 1964);
    if ( *(_DWORD *)(v11 + 8) )
    {
      v12 = *(_DWORD *)(v11 + 4);
      if ( v12 )
        v13 = *(_DWORD *)v11 + 8 * (9 * v12 - 9);
      else
        v13 = *(_DWORD *)v11;
    }
    else
    {
      v13 = 0;
    }
    *(_BYTE *)(v13 + 65) = (*(_DWORD *)a4 >> 23) & 1;
  }
  sub_100486A0(v4, a2, a4);
  return *(_DWORD *)(v4 + 1712) + 32;
}

//----- (10044580) --------------------------------------------------------
int __thiscall sub_10044580(int this, int a2)
{
  return *(_DWORD *)(this + 1712) + 16;
}

//----- (10044590) --------------------------------------------------------
int __thiscall sub_10044590(int this, int a2)
{
  return *(_DWORD *)(this + 1712) + 8;
}

//----- (100445A0) --------------------------------------------------------
int __thiscall sub_100445A0(int this, int a2)
{
  return *(_DWORD *)(this + 1712) + 8;
}

//----- (100445B0) --------------------------------------------------------
int __thiscall sub_100445B0(int this, int a2)
{
  int v2; // esi@1
  int v3; // eax@2
  int v5; // eax@3

  v2 = *(_BYTE *)(a2 + 2);
  if ( !(*(_DWORD *)a2 & 0x1000) )
  {
    v3 = *(_DWORD *)(this + 1712);
    *(_DWORD *)(this + 18222052) = v2;
    return v3 + 4;
  }
  v5 = 3 * (v2 + *(_DWORD *)(this + 18222052));
  if ( *(_DWORD *)(this + 24 * (v2 + *(_DWORD *)(this + 18222052)) + 18222076) == 305419896 )
  {
    *(_DWORD *)(this + 18222048) = v2;
    *(_BYTE *)(this + 8 * v5 + 18222056) = ~(*(_DWORD *)a2 >> 24) & 1;
    if ( *(_DWORD *)a2 & 0x2000000 )
      *(_BYTE *)(this + 24 * (*(_DWORD *)(this + 18222052) + *(_DWORD *)(this + 18222048)) + 18222057) = 0;
    else
      *(_BYTE *)(this + 24 * (*(_DWORD *)(this + 18222052) + *(_DWORD *)(this + 18222048)) + 18222057) = 1;
    if ( *(_DWORD *)a2 & 0x4000000 )
      *(_BYTE *)(this + 24 * (*(_DWORD *)(this + 18222052) + *(_DWORD *)(this + 18222048)) + 18222058) = 0;
    else
      *(_BYTE *)(this + 24 * (*(_DWORD *)(this + 18222052) + *(_DWORD *)(this + 18222048)) + 18222058) = 1;
    if ( *(_DWORD *)a2 & 0x8000000 )
    {
      *(_BYTE *)(this + 24 * (*(_DWORD *)(this + 18222052) + *(_DWORD *)(this + 18222048)) + 18222059) = 0;
      return *(_DWORD *)(this + 1712) + 4;
    }
    *(_BYTE *)(this + 24 * (*(_DWORD *)(this + 18222052) + *(_DWORD *)(this + 18222048)) + 18222059) = 1;
  }
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (100446A0) --------------------------------------------------------
int __thiscall sub_100446A0(int this, int a2)
{
  int v2; // ebp@1
  int v3; // edx@1
  int v4; // esi@1
  int v5; // edi@1
  int v6; // ebx@1
  int v7; // eax@1
  int v8; // edx@1

  v2 = *(_BYTE *)(a2 + 2);
  v3 = (unsigned __int16)*(_DWORD *)(a2 + 4);
  v4 = *(_DWORD *)(a2 + 4) >> 16;
  v5 = (unsigned __int16)*(_DWORD *)(a2 + 8);
  v6 = *(_DWORD *)(a2 + 8) >> 16;
  *(_DWORD *)(this + 24 * (v2 + *(_DWORD *)(this + 18222052)) + 18222076) = 305419896;
  v7 = 84 * v3;
  v8 = this;
  *(_DWORD *)(v8 + 24 * (v2 + *(_DWORD *)(v8 + 18222052)) + 18222060) = v7 + this + 18228200;
  *(_DWORD *)(v8 + 24 * (v2 + *(_DWORD *)(v8 + 18222052)) + 18222064) = 84 * v4 + this + 18228200;
  *(_DWORD *)(this + 24 * (v2 + *(_DWORD *)(this + 18222052)) + 18222068) = 84 * v5 + this + 18228200;
  *(_DWORD *)(v8 + 24 * (v2 + 759253 + *(_DWORD *)(v8 + 18222052))) = 84 * v6 + this + 18228200;
  return *(_DWORD *)(this + 1712) + 16;
}

//----- (10044760) --------------------------------------------------------
int __thiscall sub_10044760(int this, int a2)
{
  int v2; // edx@1

  v2 = 84 * *(_WORD *)(a2 + 2) + this + 18228200;
  *(_OWORD *)v2 = *(_OWORD *)(this + 18314216);
  *(_OWORD *)(v2 + 16) = *(_OWORD *)(this + 18314232);
  *(_OWORD *)(v2 + 32) = *(_OWORD *)(this + 18314248);
  *(_OWORD *)(v2 + 48) = *(_OWORD *)(this + 18314264);
  *(_OWORD *)(v2 + 64) = *(_OWORD *)(this + 18314280);
  *(_DWORD *)(v2 + 80) = *(_DWORD *)(this + 18314296);
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (100447C0) --------------------------------------------------------
int __thiscall sub_100447C0(int this, int a2)
{
  __int128 v3; // xmm0@3
  int v4; // et1@3
  signed int v7; // eax@4

  if ( ((*(_DWORD *)a2 >> 9) & 7) == 1 )
  {
    *(_DWORD *)(this + 18314284) = *(_DWORD *)(a2 + 4);
    *(_DWORD *)(this + 18314288) = *(_DWORD *)(a2 + 8);
    *(float *)(this + 18314296) = (float)(*(_WORD *)(a2 + 2) & 3);
    __asm { lahf }
    if ( __SETP__(_AH & 0x44, 0) )
      goto LABEL_10;
    v3 = *(_DWORD *)(this + 18314284);
    v4 = *(_DWORD *)(this + 18314288);
    __asm
    {
      lahf
      lahf
    }
    if ( __SETP__(_AH & 0x44, 0) )
LABEL_10:
      v7 = 0;
    else
      v7 = 1;
    *(float *)(this + 18314292) = (float)v7;
  }
  return *(_DWORD *)(this + 1712) + 16;
}

//----- (10044870) --------------------------------------------------------
int __thiscall sub_10044870(int this, int a2)
{
  unsigned __int8 v2; // dl@1
  __m128d v3; // xmm0@2
  __m128d v4; // xmm0@2
  __m128d v5; // xmm0@2
  float v6; // xmm2_4@2

  v2 = (*(_DWORD *)a2 >> 16) & 0xF;
  if ( !(*(_DWORD *)a2 & 0x1000E00) )
  {
    *(_DWORD *)(this + 18314264) = 0;
    *(_DWORD *)(this + 18314280) = 0;
    v3 = (__m128d)COERCE_UNSIGNED_INT64((double)(*(_DWORD *)(a2 + 4) & 0x3FF));
    v3.m128d_f64[0] = v3.m128d_f64[0] + *(double *)&qword_1006EEC0[(*(_DWORD *)(a2 + 4) & 0x3FFu) >> 31];
    *(float *)(this + 18314236) = COERCE_FLOAT(_mm_cvtpd_ps(v3)) * 0.00097751711;
    v4 = (__m128d)COERCE_UNSIGNED_INT64((double)((*(_DWORD *)(a2 + 4) >> 10) & 0x3FF));
    v4.m128d_f64[0] = v4.m128d_f64[0] + *(double *)&qword_1006EEC0[((*(_DWORD *)(a2 + 4) >> 10) & 0x3FFu) >> 31];
    *(float *)(this + 18314240) = COERCE_FLOAT(_mm_cvtpd_ps(v4)) * 0.00097751711;
    v5 = (__m128d)COERCE_UNSIGNED_INT64((double)((*(_DWORD *)(a2 + 4) >> 20) & 0x3FF));
    v5.m128d_f64[0] = v5.m128d_f64[0] + *(double *)&qword_1006EEC0[((*(_DWORD *)(a2 + 4) >> 20) & 0x3FFu) >> 31];
    v6 = (float)v2;
    *(float *)(this + 18314244) = COERCE_FLOAT(_mm_cvtpd_ps(v5)) * 0.00097751711;
    *(float *)(this + 18314220) = (float)(*(float *)(this + 18314236) * 0.06666667) * v6;
    *(float *)(this + 18314224) = (float)(*(float *)(this + 18314240) * 0.06666667) * v6;
    *(float *)(this + 18314228) = (float)(*(float *)(this + 18314244) * 0.06666667) * v6;
  }
  return *(_DWORD *)(this + 1712) + 8;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];

//----- (100449A0) --------------------------------------------------------
int __thiscall sub_100449A0(int this, int a2)
{
  int v2; // edx@1
  int v3; // eax@2
  int result; // eax@2

  v2 = *(_DWORD *)a2 >> 16;
  if ( *(_DWORD *)a2 & 0x1000 )
  {
    if ( *(_DWORD *)(32 * (v2 + *(_DWORD *)(this + 16124720)) + this + 16124752) == 305419896 )
      *(_DWORD *)(this + 16124716) = v2;
    result = *(_DWORD *)(this + 1712) + 4;
  }
  else
  {
    v3 = *(_DWORD *)(this + 1712);
    *(_DWORD *)(this + 16124720) = v2;
    result = v3 + 4;
  }
  return result;
}

//----- (100449F0) --------------------------------------------------------
int __thiscall sub_100449F0(int this, int a2)
{
  int v2; // eax@1

  v2 = *(_WORD *)(a2 + 2) + *(_DWORD *)(this + 16124720);
  *(_DWORD *)(this + 18221904) = 305419896;
  v2 *= 32;
  *(_OWORD *)(v2 + this + 16124724) = *(_OWORD *)(this + 18221876);
  *(_OWORD *)(v2 + this + 16124740) = *(_OWORD *)(this + 18221892);
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (10044A40) --------------------------------------------------------
int __thiscall sub_10044A40(int this, int a2)
{
  unsigned int v2; // edx@1
  int v3; // eax@1
  int v4; // eax@2
  __int16 v6; // ax@5

  v2 = *(_DWORD *)a2;
  v3 = (*(_DWORD *)a2 >> 9) & 7;
  if ( v3 )
  {
    v4 = v3 - 1;
    if ( !v4 )
    {
      *(_BYTE *)(this + 18221900) = (v2 >> 14) & 1;
      v6 = *(_WORD *)(a2 + 2);
      *(_DWORD *)(this + 18221876) = v6 & 0x3F;
      *(_BYTE *)(this + 18221885) = (*(_DWORD *)a2 >> 22) & 1;
      *(_BYTE *)(this + 18221884) = (*(_DWORD *)a2 >> 23) & 1;
      *(_BYTE *)(this + 18221887) = *(_BYTE *)(a2 + 3) & 1;
      *(_BYTE *)(this + 18221886) = (*(_DWORD *)a2 >> 25) & 1;
      *(_BYTE *)(this + 18221882) = (*(_DWORD *)a2 >> 26) & 7;
      *(_DWORD *)(this + 18221892) = (*(_DWORD *)a2 >> 29) & 3;
      return *(_DWORD *)(this + 1712) + 4;
    }
    if ( v4 == 1 )
    {
      *(_BYTE *)(this + 18221883) = (v2 >> 12) & 1;
      *(_BYTE *)(this + 18221880) = *(_BYTE *)(a2 + 2) & 0x7F;
      *(_BYTE *)(this + 18221881) = *(_BYTE *)(a2 + 3) & 0x3F;
      *(_DWORD *)(this + 18221896) = *(_DWORD *)a2;
      return *(_DWORD *)(this + 1712) + 4;
    }
  }
  else
  {
    *(_DWORD *)(this + 18221888) = v2;
  }
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (10044B30) --------------------------------------------------------
int __thiscall sub_10044B30(int this, int a2)
{
  int v2; // edx@1
  int v3; // eax@2
  int result; // eax@2

  v2 = *(_DWORD *)a2 >> 16;
  if ( *(_DWORD *)a2 & 0x1000 )
  {
    if ( *(_DWORD *)(84 * (v2 + *(_DWORD *)(this + 10619604)) + this + 10619688) == 305419896 )
      *(_DWORD *)(this + 10619600) = v2;
    result = *(_DWORD *)(this + 1712) + 4;
  }
  else
  {
    v3 = *(_DWORD *)(this + 1712);
    *(_DWORD *)(this + 10619604) = v2;
    result = v3 + 4;
  }
  return result;
}

//----- (10044B80) --------------------------------------------------------
int __thiscall sub_10044B80(int this, int a2)
{
  int v2; // esi@1
  int v3; // edx@1
  int v4; // eax@1
  int v5; // ecx@1

  v2 = this;
  v3 = *(_WORD *)(a2 + 2);
  v4 = *(_DWORD *)(this + 10619604);
  *(_DWORD *)(this + 16124712) = 305419896;
  v5 = 84 * (v3 + v4) + this + 10619608;
  *(_OWORD *)v5 = *(_OWORD *)(v2 + 16124632);
  *(_OWORD *)(v5 + 16) = *(_OWORD *)(v2 + 16124648);
  *(_OWORD *)(v5 + 32) = *(_OWORD *)(v2 + 16124664);
  *(_OWORD *)(v5 + 48) = *(_OWORD *)(v2 + 16124680);
  *(_OWORD *)(v5 + 64) = *(_OWORD *)(v2 + 16124696);
  *(_DWORD *)(v5 + 80) = *(_DWORD *)(v2 + 16124712);
  return *(_DWORD *)(v2 + 1712) + 4;
}

//----- (10044C00) --------------------------------------------------------
int __thiscall sub_10044C00(int this, unsigned int *a2)
{
  unsigned int v2; // eax@1

  v2 = *a2;
  if ( ((*a2 >> 9) & 7) == 4 )
  {
    *(_DWORD *)(this + 16124700) = (v2 >> 16) & 3;
    *(_BYTE *)(this + 16124704) = (*a2 >> 18) & 1;
    *(_BYTE *)(this + 16124705) = (*a2 >> 19) & 1;
    *(_BYTE *)(this + 16124706) = (*a2 >> 20) & 1;
    *(_BYTE *)(this + 16124707) = (*a2 >> 21) & 1;
  }
  else if ( ((*a2 >> 9) & 7) == 5 )
  {
    *(_DWORD *)(this + 16124696) = (v2 >> 16) & 3;
    return *(_DWORD *)(this + 1712) + 4;
  }
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (10044C80) --------------------------------------------------------
int __thiscall sub_10044C80(int this, int a2)
{
  int result; // eax@2
  unsigned __int16 v3; // ax@5

  switch ( (*(_DWORD *)a2 >> 9) & 7 )
  {
    case 0:
      *(_DWORD *)(this + 16124632) = dword_1006D0F0[*(_BYTE *)(a2 + 4)];
      *(_DWORD *)(this + 16124636) = dword_1006D0F0[*(_BYTE *)(a2 + 5)];
      *(_DWORD *)(this + 16124640) = dword_1006D0F0[*(_BYTE *)(a2 + 6)];
      *(_DWORD *)(this + 16124644) = dword_1006D0F0[*(_BYTE *)(a2 + 7)];
      result = *(_DWORD *)(this + 1712) + 8;
      break;
    case 1:
      *(_DWORD *)(this + 16124648) = dword_1006D0F0[*(_BYTE *)(a2 + 4)];
      *(_DWORD *)(this + 16124652) = dword_1006D0F0[*(_BYTE *)(a2 + 5)];
      *(_DWORD *)(this + 16124656) = dword_1006D0F0[*(_BYTE *)(a2 + 6)];
      *(_DWORD *)(this + 16124660) = dword_1006D0F0[*(_BYTE *)(a2 + 7)];
      result = *(_DWORD *)(this + 1712) + 8;
      break;
    case 2:
      *(_DWORD *)(this + 16124664) = dword_1006D0F0[*(_BYTE *)(a2 + 4)];
      *(_DWORD *)(this + 16124668) = dword_1006D0F0[*(_BYTE *)(a2 + 5)];
      *(_DWORD *)(this + 16124672) = dword_1006D0F0[*(_BYTE *)(a2 + 6)];
      *(_DWORD *)(this + 16124676) = dword_1006D0F0[*(_BYTE *)(a2 + 7)];
      result = *(_DWORD *)(this + 1712) + 8;
      break;
    case 3:
      *(float *)(this + 16124688) = (float)((*(_DWORD *)a2 >> 16) & 0x3FF) * 0.0039215689;
      *(float *)(this + 16124684) = (float)(*(_WORD *)(a2 + 4) & 0x3FF) * 0.0039215689;
      v3 = *(_WORD *)(a2 + 6) & 0x3FF;
      *(_DWORD *)(this + 16124692) = 1065353216;
      *(float *)(this + 16124680) = (float)v3 * 0.0039215689;
      goto LABEL_6;
    default:
LABEL_6:
      result = *(_DWORD *)(this + 1712) + 8;
      break;
  }
  return result;
}
// 1006D0F0: using guessed type int dword_1006D0F0[];

//----- (10044E20) --------------------------------------------------------
int __userpurge sub_10044E20@<eax>(int a1@<ecx>, int a2@<ebx>, int a3)
{
  int v3; // esi@1
  unsigned int v4; // eax@1
  int v5; // ecx@1
  int v6; // edx@2
  bool v7; // zf@2
  int v8; // eax@2
  signed int v9; // eax@2
  int v10; // ecx@4
  __int128 v11; // xmm3@4
  __int128 v12; // xmm2@4
  __int128 v13; // xmm1@4
  __int128 v14; // xmm0@4
  int v15; // eax@4
  __int128 v16; // xmm1@4
  __int128 v17; // xmm2@4
  __int128 v18; // xmm3@4
  int v19; // eax@5
  int result; // eax@5
  __m128 v21; // xmm4@7
  __m128 v22; // xmm5@7
  __m128 v23; // xmm5@7
  __m128 v24; // xmm5@7
  __m128 v25; // xmm1@7
  int v26; // eax@9
  int v27; // [sp+8h] [bp-48h]@4
  int v28; // [sp+Ch] [bp-44h]@2
  __int128 v29; // [sp+10h] [bp-40h]@4
  __int128 v30; // [sp+20h] [bp-30h]@4
  __int128 v31; // [sp+30h] [bp-20h]@4
  __int128 v32; // [sp+40h] [bp-10h]@4

  v3 = a1;
  v4 = *(_DWORD *)a3;
  v5 = (*(_DWORD *)a3 >> 9) & 7;
  if ( v5 )
  {
    if ( v5 == 2 )
    {
      result = *(_DWORD *)(v3 + 1712) + 16;
      v21 = _mm_unpacklo_ps(
              _mm_unpacklo_ps((__m128)*(_DWORD *)(a3 + 4), (__m128)*(_DWORD *)(a3 + 12)),
              _mm_unpacklo_ps((__m128)*(_DWORD *)(a3 + 8), 0i64));
      v22 = _mm_add_ps(
              _mm_add_ps(
                _mm_add_ps(
                  _mm_mul_ps(_mm_shuffle_ps(v21, v21, -86), *(__m128 *)(v3 + 18221952)),
                  *(__m128 *)(v3 + 18221968)),
                _mm_mul_ps(_mm_shuffle_ps(v21, v21, 85), *(__m128 *)(v3 + 18221936))),
              _mm_mul_ps(_mm_shuffle_ps(v21, v21, 0), *(__m128 *)(v3 + 18221920)));
      v23 = _mm_div_ps(v22, _mm_shuffle_ps(v22, v22, -1));
      v24 = _mm_mul_ps(v23, v23);
      v25 = _mm_shuffle_ps(v24, v24, 102);
      v24.m128_f32[0] = (float)(v24.m128_f32[0] + v25.m128_f32[0]) + COERCE_FLOAT(_mm_shuffle_ps(v25, v25, 85));
      *(_DWORD *)(v3 + 1916) = (unsigned __int128)_mm_sqrt_ps(_mm_shuffle_ps(v24, v24, 0));
      return result;
    }
    if ( v5 == 4 )
    {
      v26 = v4 & 0xFF000;
      if ( v26 == 0x8000 )
      {
        *(_DWORD *)(v3 + 18314252) = *(_DWORD *)(a3 + 4);
        *(_DWORD *)(v3 + 18314256) = *(_DWORD *)(a3 + 8);
        *(_DWORD *)(v3 + 18314260) = *(_DWORD *)(a3 + 12);
        *(_DWORD *)(v3 + 18314264) = 1065353216;
        return *(_DWORD *)(v3 + 1712) + 16;
      }
      if ( v26 == 0x10000 )
      {
        *(_DWORD *)(v3 + 18314268) = *(_DWORD *)(a3 + 4);
        *(_DWORD *)(v3 + 18314272) = *(_DWORD *)(a3 + 8);
        *(_DWORD *)(v3 + 18314276) = *(_DWORD *)(a3 + 12);
        *(_DWORD *)(v3 + 18314280) = 1065353216;
      }
    }
  }
  else
  {
    v6 = (v4 >> 16) & 3;
    v8 = (v4 >> 18) & 1;
    v7 = v8 == 0;
    v28 = v8;
    v9 = 18221920;
    if ( !v7 )
      v9 = 18221984;
    v10 = v6;
    v27 = v9;
    v11 = *(_OWORD *)(v9 + v3);
    v12 = *(_OWORD *)(v9 + v3 + 16);
    v13 = *(_OWORD *)(v9 + v3 + 32);
    v14 = *(_OWORD *)(v9 + v3 + 48);
    v15 = *(_DWORD *)(a3 + 4);
    v29 = v11;
    v30 = v12;
    v31 = v13;
    v32 = v14;
    *((_DWORD *)&v29 + 1 * v10) = v15;
    *((_DWORD *)&v29 + 1 * v10 + 1) = *(_DWORD *)(a3 + 8);
    *((_DWORD *)&v29 + 1 * v10 + 2) = *(_DWORD *)(a3 + 12);
    *((_DWORD *)&v29 + 1 * v10 + 3) = (unsigned int)v6 < 3 ? 0 : 1065353216;
    v16 = v30;
    v17 = v31;
    v18 = v32;
    *(_OWORD *)(v27 + v3) = v29;
    *(_OWORD *)(v27 + v3 + 16) = v16;
    *(_OWORD *)(v27 + v3 + 32) = v17;
    *(_OWORD *)(v27 + v3 + 48) = v18;
    if ( !v6 )
    {
      v19 = sub_10008BC0(v3 + 4 * (3 * v28 + 502), a2, v27);
      *(_OWORD *)v19 = *(_OWORD *)(v27 + v3);
      *(_OWORD *)(v19 + 16) = *(_OWORD *)(v27 + v3 + 16);
      *(_OWORD *)(v19 + 32) = *(_OWORD *)(v27 + v3 + 32);
      *(_OWORD *)(v19 + 48) = *(_OWORD *)(v27 + v3 + 48);
      return *(_DWORD *)(v3 + 1712) + 16;
    }
  }
  return *(_DWORD *)(v3 + 1712) + 16;
}

//----- (10045060) --------------------------------------------------------
// local variable allocation has failed, the output may be wrong!
int __userpurge sub_10045060@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4)
{
  int v4; // edx@1
  int v5; // esi@1
  int v6; // ecx@4
  __int128 v7; // xmm3@7
  __int128 v8; // ST10_16@7
  int v9; // ST2C_4@7 OVERLAPPED
  int v10; // ST3C_4@7 OVERLAPPED
  signed __int64 v11; // ST20_8@7
  int v12; // ST28_4@7
  __int64 v13; // ST30_8@7
  signed int v14; // ST38_4@7
  int v15; // eax@7

  v4 = *(_DWORD *)a4 >> 16;
  v5 = a1;
  if ( ((*(_DWORD *)a4 >> 13) & 3) == 1 )
  {
    v6 = dword_1007CDBC;
    dword_1007CDC0[dword_1007CDBC] = *(_DWORD *)(v5 + 133632);
    dword_1007CDBC = v6 + 1;
  }
  else if ( ((*(_DWORD *)a4 >> 13) & 3) == 2 )
  {
    --dword_1007CDBC;
    *(_DWORD *)(a1 + 133632) = dword_1007CDC0[dword_1007CDBC];
    goto LABEL_6;
  }
  *(_DWORD *)(v5 + 133632) = v4;
LABEL_6:
  if ( *(_DWORD *)(v5 + 133632) == 7 )
  {
    v7 = *(_OWORD *)(v5 + 18221968);
    v8 = *(_OWORD *)(v5 + 18221920);
    v9 = *(_OWORD *)(v5 + 18221936) >> 96;
    v10 = *(_OWORD *)(v5 + 18221952) >> 96;
    *(_QWORD *)&v8 = 1065353216i64;
    DWORD2(v8) = 0;
    v11 = 4575657221408423936i64;
    v12 = 0;
    v13 = 0i64;
    v14 = 1065353216;
    *(_OWORD *)(v5 + 18221920) = v8;
    *(_OWORD *)(v5 + 18221936) = *(_OWORD *)(&v9 - 3);
    *(_OWORD *)(v5 + 18221952) = *(_OWORD *)(&v10 - 3);
    *(_OWORD *)(v5 + 18221968) = v7;
    v15 = sub_10008BC0(v5 + 2008, a2, a3);
    *(_OWORD *)v15 = *(_OWORD *)(v5 + 18221920);
    *(_OWORD *)(v15 + 16) = *(_OWORD *)(v5 + 18221936);
    *(_OWORD *)(v15 + 32) = *(_OWORD *)(v5 + 18221952);
    *(_OWORD *)(v15 + 48) = *(_OWORD *)(v5 + 18221968);
  }
  return *(_DWORD *)(v5 + 1712) + 4;
}
// 10045060: failed to expand linear variable var30_12
// 10045060: failed to expand linear variable var20_12
// 1007CDBC: using guessed type int dword_1007CDBC;
// 1007CDC0: using guessed type int dword_1007CDC0[];

//----- (100451C0) --------------------------------------------------------
int __thiscall sub_100451C0(void *this, int a2)
{
  void *v2; // ST18_4@1
  int v3; // esi@1
  int v4; // edi@1
  void *v5; // esi@1
  __m128 v6; // xmm1@1
  __m128 v7; // xmm0@1
  __m128 v8; // xmm3@1
  __m128 v9; // xmm1@1
  unsigned int v10; // ST18_4@1
  __int128 v11; // xmm1@1
  __int128 v12; // xmm3@1
  __m128 v13; // xmm0@1
  __int128 v14; // xmm2@1
  __m128 v15; // xmm0@1
  __int128 v17; // [sp+10h] [bp-80h]@1
  int v18; // [sp+24h] [bp-6Ch]@1
  int v19; // [sp+38h] [bp-58h]@1
  int v20; // [sp+3Ch] [bp-54h]@1
  int v21; // [sp+48h] [bp-48h]@1
  __m128 v22; // [sp+50h] [bp-40h]@1
  __int128 v23; // [sp+60h] [bp-30h]@1
  __int128 v24; // [sp+70h] [bp-20h]@1
  __int128 v25; // [sp+80h] [bp-10h]@1

  v2 = this;
  v3 = *(_WORD *)(a2 + 2);
  v4 = (int)((char *)this + 160 * v3 + 133648);
  sub_10008930(v4, (int)((char *)this + 10619408));
  *(_DWORD *)v4 = v3;
  v5 = v2;
  v6 = (__m128)*((_DWORD *)v2 + 2654898);
  v6.m128_f32[0] = v6.m128_f32[0] - 1.0;
  v7 = _mm_unpacklo_ps(
         _mm_unpacklo_ps((__m128)*((_DWORD *)v2 + 2654896), (__m128)*((_DWORD *)v2 + 2654898)),
         _mm_unpacklo_ps((__m128)*((_DWORD *)v2 + 2654897), 0i64));
  v8 = _mm_unpacklo_ps((__m128)*((_DWORD *)v2 + 2654897), 0i64);
  v9 = _mm_sub_ps(v7, _mm_unpacklo_ps(_mm_unpacklo_ps((__m128)*((_DWORD *)v2 + 2654896), v6), v8));
  sub_10008490();
  v23 = (__int128)v9;
  v9.m128_i32[0] = *(_DWORD *)(v4 + 52);
  v22 = v7;
  v7.m128_f32[0] = v9.m128_f32[0] - *(float *)(v4 + 56);
  v25 = (__int128)v8;
  v24 = xmmword_1006DA80;
  *(float *)&v10 = v9.m128_f32[0] / v7.m128_f32[0];
  sub_10028330(&v17, 0, 0x40u);
  v11 = v23;
  v12 = v25;
  LODWORD(v17) = *(_DWORD *)(v4 + 44);
  v18 = *(_DWORD *)(v4 + 48);
  v19 = (unsigned __int128)_mm_xor_ps((__m128)v10, (__m128)xmmword_1006EEE0);
  v13 = (__m128)*(_DWORD *)(v4 + 56);
  v13.m128_f32[0] = v13.m128_f32[0] * *(float *)&v10;
  v20 = -1082130432;
  v14 = v24;
  v21 = (unsigned __int128)_mm_xor_ps(v13, (__m128)xmmword_1006EEE0);
  v15 = v22;
  sub_10008390((int)&v17, v22);
  *(_OWORD *)(v4 + 96) = v15;
  *(_OWORD *)(v4 + 112) = v11;
  *(_OWORD *)(v4 + 128) = v14;
  *(_OWORD *)(v4 + 144) = v12;
  return *((_DWORD *)v5 + 428) + 4;
}
// 1006DA80: using guessed type __int128 xmmword_1006DA80;
// 1006EEE0: using guessed type __int128 xmmword_1006EEE0;

//----- (10045350) --------------------------------------------------------
int __thiscall sub_10045350(int this, int a2)
{
  *(_DWORD *)(this + 10619568) = dword_1006D0F0[*(_BYTE *)(a2 + 4)];
  *(_DWORD *)(this + 10619572) = dword_1006D0F0[*(_BYTE *)(a2 + 5)];
  *(_DWORD *)(this + 10619576) = dword_1006D0F0[*(_BYTE *)(a2 + 6)];
  *(_DWORD *)(this + 10619580) = dword_1006D0F0[*(_BYTE *)(a2 + 7)];
  return *(_DWORD *)(this + 1712) + 8;
}
// 1006D0F0: using guessed type int dword_1006D0F0[];

//----- (100453B0) --------------------------------------------------------
int __thiscall sub_100453B0(int this, int a2)
{
  *(float *)(this + 10619436) = (float)*(_WORD *)(a2 + 2) * 0.0039215689;
  *(float *)(this + 10619440) = (float)*(_WORD *)(a2 + 4) * 0.0039215689;
  *(float *)(this + 10619444) = (float)*(_WORD *)(a2 + 6) * 0.0039215689;
  return *(_DWORD *)(this + 1712) + 8;
}

//----- (10045410) --------------------------------------------------------
int __thiscall sub_10045410(int this, int a2)
{
  int result; // eax@2
  float v3; // xmm1_4@2
  __m128d v4; // xmm0@5

  switch ( (*(_DWORD *)a2 >> 9) & 7 )
  {
    case 0:
      result = *(_DWORD *)(this + 1712) + 16;
      v3 = *(float *)(this + 10619416) - *(float *)(this + 10619428);
      *(float *)(this + 10619452) = *(float *)(a2 + 4)
                                  / (float)(*(float *)(this + 10619412) - *(float *)(this + 10619420));
      *(float *)(this + 10619456) = *(float *)(a2 + 8) / v3;
      break;
    case 1:
      *(float *)(this + 10619412) = (float)*(_WORD *)(a2 + 4);
      *(float *)(this + 10619416) = (float)*(_WORD *)(a2 + 6);
      *(float *)(this + 10619420) = (float)*(_WORD *)(a2 + 8);
      *(float *)(this + 10619428) = (float)*(_WORD *)(a2 + 10);
      *(float *)(this + 10619424) = (float)*(_WORD *)(a2 + 12);
      result = *(_DWORD *)(this + 1712) + 16;
      *(float *)(this + 10619432) = (float)*(_WORD *)(a2 + 14);
      break;
    case 2:
      *(_DWORD *)(this + 10619460) = *(_DWORD *)(a2 + 4);
      *(_DWORD *)(this + 10619464) = *(_DWORD *)(a2 + 8);
      *(_DWORD *)(this + 10619472) = *(_DWORD *)(a2 + 12) >> 29;
      result = *(_DWORD *)(this + 1712) + 16;
      break;
    case 3:
      *(_BYTE *)(this + 10619468) = (*(_DWORD *)a2 >> 16) & 1;
      *(_DWORD *)(this + 10619476) = dword_1006D0F0[*(_BYTE *)(a2 + 4)];
      *(_DWORD *)(this + 10619480) = dword_1006D0F0[*(_BYTE *)(a2 + 5)];
      *(_DWORD *)(this + 10619484) = dword_1006D0F0[*(_BYTE *)(a2 + 6)];
      v4 = (__m128d)COERCE_UNSIGNED_INT64((double)(~(unsigned __int8)(*(_DWORD *)a2 >> 17) & 1));
      v4.m128d_f64[0] = v4.m128d_f64[0]
                      + *(double *)&qword_1006EEC0[(~(unsigned __int8)(*(_DWORD *)a2 >> 17) & 1u) >> 31];
      *(_DWORD *)(this + 10619488) = (unsigned __int128)_mm_cvtpd_ps(v4);
      *(_DWORD *)(this + 10619492) = *(_DWORD *)(a2 + 8);
      *(_DWORD *)(this + 10619496) = *(_DWORD *)(a2 + 12);
      goto LABEL_6;
    default:
LABEL_6:
      result = *(_DWORD *)(this + 1712) + 16;
      break;
  }
  return result;
}
// 1006D0F0: using guessed type int dword_1006D0F0[];
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];

//----- (100455C0) --------------------------------------------------------
int __thiscall sub_100455C0(int this, int a2)
{
  int v2; // edx@1

  v2 = *(_DWORD *)a2;
  if ( (*(_DWORD *)a2 >> 9) & 7 )
  {
    if ( ((*(_DWORD *)a2 >> 9) & 7) == 3 )
    {
      if ( v2 & 0x2000000 )
        *(_BYTE *)(((unsigned __int16)v2 >> 16) + this + 1925) = *(_BYTE *)(this + 1924);
      byte_1007CDB1 = ~(unsigned __int8)(*(_DWORD *)a2 >> 18) & 1;
      if ( byte_1007CDB1 )
      {
        *(_OWORD *)(this + 18221920) = xmmword_1006DAA0;
        *(_OWORD *)(this + 18221936) = xmmword_1006DA80;
        *(_OWORD *)(this + 18221952) = xmmword_1006DAC0;
        *(_OWORD *)(this + 18221968) = xmmword_1006EE70;
        *(_OWORD *)(this + 18221984) = xmmword_1006DAA0;
        *(_OWORD *)(this + 18222000) = xmmword_1006DA80;
        *(_OWORD *)(this + 18222016) = xmmword_1006DAC0;
        *(_OWORD *)(this + 18222032) = xmmword_1006EE70;
        return *(_DWORD *)(this + 1712) + 4;
      }
    }
  }
  else if ( v2 & 0x1000000 )
  {
    *(_BYTE *)(this + 1924) = *(_BYTE *)(a2 + 2);
  }
  return *(_DWORD *)(this + 1712) + 4;
}
// 1006DA80: using guessed type __int128 xmmword_1006DA80;
// 1006DAA0: using guessed type __int128 xmmword_1006DAA0;
// 1006DAC0: using guessed type __int128 xmmword_1006DAC0;
// 1006EE70: using guessed type __int128 xmmword_1006EE70;
// 1007CDB1: using guessed type char byte_1007CDB1;

//----- (100456C0) --------------------------------------------------------
int __thiscall sub_100456C0(int this, int a2)
{
  *(_BYTE *)(this + 1708) = 0;
  return 0;
}

//----- (100456D0) --------------------------------------------------------
int __thiscall sub_100456D0(int this, int a2)
{
  int result; // eax@3

  if ( *(_DWORD *)a2 & 0x4000 && *(_BYTE *)(this + 1920) )
  {
    result = *(_DWORD *)(this + 1712) + 4;
  }
  else
  {
    *(_DWORD *)(this + 1716) -= 4;
    result = *(_DWORD *)sub_10045B00(*(_DWORD *)(this + 1716));
  }
  return result;
}

//----- (10045710) --------------------------------------------------------
int __thiscall sub_10045710(int this, int a2)
{
  int result; // eax@2

  *(_DWORD *)sub_10045B00(*(_DWORD *)(this + 1716)) = *(_DWORD *)(this + 1712) + 8;
  *(_DWORD *)(this + 1716) += 4;
  if ( *(_DWORD *)a2 & 0x800 )
    result = 4 * *(_DWORD *)(a2 + 4) + *(_DWORD *)(this + 1712);
  else
    result = 4 * *(_DWORD *)(a2 + 4);
  return result;
}

//----- (10045760) --------------------------------------------------------
int __thiscall sub_10045760(int this, int a2)
{
  int v2; // edx@1
  int v3; // esi@1
  int result; // eax@4
  int v5; // eax@10

  v2 = *(_DWORD *)a2;
  v3 = 4 * *(_DWORD *)(a2 + 4);
  if ( *(_DWORD *)a2 & 0x800 )
  {
LABEL_10:
    v5 = *(_DWORD *)(this + 1712);
    if ( v3 == v5 )
      *(_BYTE *)(this + 1708) = 0;
    if ( *(_DWORD *)a2 & 0x800 )
      result = v3 + v5;
    else
      result = v3;
  }
  else
  {
    switch ( (unsigned __int16)v2 >> 12 )
    {
      case 1:
        if ( HIWORD(v2) != *(_WORD *)(this + 1922) )
          goto LABEL_10;
        goto LABEL_4;
      case 6:
        if ( !*(_BYTE *)(this + 1920) )
          goto LABEL_10;
        result = *(_DWORD *)(this + 1712) + 8;
        break;
      case 7:
        if ( *(_BYTE *)(this + 1920) )
          goto LABEL_10;
        result = *(_DWORD *)(this + 1712) + 8;
        break;
      case 0xD:
        if ( HIWORD(v2) == *(_WORD *)(this + 1922) )
          goto LABEL_10;
LABEL_4:
        result = *(_DWORD *)(this + 1712) + 8;
        break;
      default:
        goto LABEL_10;
    }
  }
  return result;
}

//----- (10045840) --------------------------------------------------------
int __thiscall sub_10045840(int this, int a2)
{
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (10045850) --------------------------------------------------------
int __thiscall sub_10045850(int this, int a2)
{
  unsigned int v2; // edx@4
  int v3; // eax@4
  __m128d v4; // xmm0@4
  int result; // eax@4

  if ( ((*(_DWORD *)a2 >> 9) & 7) == 1 || ((*(_DWORD *)a2 >> 9) & 7) == 4 )
  {
    *(_BYTE *)(this + 1913) = 0;
    *(_DWORD *)(this + 133640) = 1065353216;
    *(_DWORD *)(this + 1964) = this + 1928;
  }
  else if ( ((*(_DWORD *)a2 >> 9) & 7) == 6 )
  {
    v2 = *(_DWORD *)a2 >> 24;
    *(_DWORD *)(this + 1964) = this + 1952;
    v3 = *(_DWORD *)(this + 1712);
    *(_BYTE *)(this + 1913) = 1;
    v4 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v2);
    result = v3 + 4;
    v4.m128d_f64[0] = v4.m128d_f64[0] + *(double *)&qword_1006EEC0[v2 >> 31];
    *(float *)(this + 133640) = COERCE_FLOAT(_mm_cvtpd_ps(v4)) * 0.0039215689;
    return result;
  }
  return *(_DWORD *)(this + 1712) + 4;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];

//----- (100458E0) --------------------------------------------------------
int __thiscall sub_100458E0(int this, int a2)
{
  unsigned int v2; // edx@4
  int v3; // eax@4
  __m128d v4; // xmm0@4
  int result; // eax@4

  if ( ((*(_DWORD *)a2 >> 9) & 7) == 1 || ((*(_DWORD *)a2 >> 9) & 7) == 5 )
  {
    *(_BYTE *)(this + 1914) = 0;
    *(_BYTE *)(this + 1912) = 0;
    *(_DWORD *)(this + 133636) = 1065353216;
    *(_DWORD *)(this + 1964) = this + 1928;
  }
  else if ( ((*(_DWORD *)a2 >> 9) & 7) == 6 )
  {
    v2 = *(_DWORD *)a2 >> 24;
    *(_DWORD *)(this + 1964) = this + 1952;
    v3 = *(_DWORD *)(this + 1712);
    *(_BYTE *)(this + 1912) = 1;
    v4 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v2);
    result = v3 + 8;
    *(_BYTE *)(this + 1914) = 1;
    v4.m128d_f64[0] = v4.m128d_f64[0] + *(double *)&qword_1006EEC0[v2 >> 31];
    *(float *)(this + 133636) = COERCE_FLOAT(_mm_cvtpd_ps(v4)) * 0.0039215689;
    return result;
  }
  return *(_DWORD *)(this + 1712) + 8;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];

//----- (10045980) --------------------------------------------------------
int __thiscall sub_10045980(int this, unsigned int *a2)
{
  unsigned int v2; // eax@1
  float v3; // xmm0_4@3
  int result; // eax@3

  v2 = *a2;
  if ( (*a2 >> 9) & 7 )
  {
    if ( ((*a2 >> 9) & 7) == 4 )
    {
      v3 = (float)(1 << (-115 - (v2 >> 16)));
      result = *(_DWORD *)(this + 1712) + 4;
      *(float *)(this + 1724) = 1.0 / v3;
      return result;
    }
  }
  else
  {
    *(_DWORD *)(this + 1728) = 2000 * ((v2 >> 16) & 0x1FF);
  }
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (10045A00) --------------------------------------------------------
int __thiscall sub_10045A00(int this, int a2)
{
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (10045A10) --------------------------------------------------------
int __thiscall sub_10045A10(int this, int a2)
{
  *(_BYTE *)(this + 1920) = (float)(COERCE_FLOAT(*(_DWORD *)a2 & 0xFFFFF000) * 8.0) > *(float *)(this + 1916);
  return *(_DWORD *)(this + 1712) + 4;
}

//----- (10045A50) --------------------------------------------------------
int __thiscall sub_10045A50(int this, int a2)
{
  int v2; // edx@1

  v2 = *(_DWORD *)a2 >> 12;
  if ( v2 == 8 )
  {
    if ( *(_BYTE *)(this + 1920) )
    {
LABEL_3:
      *(_WORD *)(this + 1922) = *(_WORD *)(a2 + 6);
      return *(_DWORD *)(this + 1712) + 8;
    }
    goto LABEL_6;
  }
  if ( v2 == 4 )
  {
    if ( !*(_BYTE *)(this + 1920) )
      goto LABEL_3;
LABEL_6:
    *(_WORD *)(this + 1922) = *(_WORD *)(a2 + 4);
  }
  return *(_DWORD *)(this + 1712) + 8;
}

//----- (10045AB0) --------------------------------------------------------
int __thiscall sub_10045AB0(int this, int a2)
{
  *(_BYTE *)(this + 1920) = (float)(*(float *)(a2 + 4) * 8.0) > *(float *)(this + 1916);
  return *(_DWORD *)(this + 1712) + 8;
}

//----- (10045AE0) --------------------------------------------------------
int __thiscall sub_10045AE0(int this, int a2)
{
  return *(_DWORD *)(this + 1712) + 8;
}

//----- (10045B00) --------------------------------------------------------
int __stdcall sub_10045B00(unsigned int a1)
{
  unsigned int v1; // edx@1
  int result; // eax@2

  v1 = a1;
  switch ( a1 >> 24 )
  {
    case 0x40u:
    case 0x41u:
      result = *(_DWORD *)(dword_1007CD9C + 360) + (a1 & 0x1FFFFFF);
      break;
    case 0x48u:
    case 0x4Cu:
      result = *(_DWORD *)(dword_1007CD9C + 344) + (v1 & 0x3FFFFF);
      break;
    default:
      result = 0;
      break;
  }
  return result;
}
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (10045B70) --------------------------------------------------------
int __thiscall sub_10045B70(int this)
{
  int v1; // esi@1
  int v2; // ecx@1
  signed int v3; // ebx@3
  int v4; // edi@3
  int v5; // ecx@4
  signed int v6; // ebp@10
  int result; // eax@10
  int v8; // ST14_4@12
  int v9; // ST18_4@12
  int v10; // ST1C_4@12
  int v11; // ST20_4@12
  unsigned int v12; // edi@12
  int v13; // ebx@13
  int v14; // ST14_4@17
  int v15; // ST18_4@17
  int v16; // ST1C_4@17
  int v17; // ST20_4@17
  unsigned int v18; // edi@17
  int v19; // ebx@18
  int v20; // ST14_4@22
  int v21; // ST18_4@22
  int v22; // ST1C_4@22
  int v23; // ST20_4@22
  int v24; // edi@22
  int v25; // ebx@23
  int v26; // [sp+2Ch] [bp-8h]@10
  signed int v27; // [sp+30h] [bp-4h]@3

  v1 = this;
  v2 = *(_DWORD *)(this + 8);
  if ( v2 )
    (*(void (__stdcall **)(int, signed int, int, _DWORD))(*(_DWORD *)v2 + 132))(v2, 1, v1 + 352, *(_DWORD *)(v1 + 364));
  v3 = 0;
  v4 = v1 + 134832;
  v27 = 0;
  do
  {
    sub_10040B20((void *)v1, 0);
    if ( v3 == 3 )
    {
      if ( *(_BYTE *)(v1 + 1596) & 2 )
        sub_10043380(v1, 3, 3, v5);
    }
    else if ( v3 == 6 && *(_BYTE *)(v1 + 1596) & 1 )
    {
      sub_10043380(v1, 6, 2, v5);
    }
    (*(void (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD, _DWORD))(**(_DWORD **)(v1 + 8) + 212))(
      *(_DWORD *)(v1 + 8),
      *(_DWORD *)(v1 + 364),
      1,
      0,
      0);
    v6 = 7;
    v26 = v4;
    result = v4;
    do
    {
      if ( *(_DWORD *)result == v3 )
      {
        sub_10041BF0((void *)v1, 1, 7, 1, 0, (__int64 *)0xFF, 255, 0, 0, 1);
        sub_10041820(v1, 0, 5, 6, v8, v9, v10, v11);
        v12 = 0;
        if ( *(_DWORD *)(v1 + 1932) )
        {
          v13 = 0;
          do
          {
            if ( **(_DWORD **)(v13 + *(_DWORD *)(v1 + 1928) + 20) == v6 )
              sub_10045D60((void *)v1, v13 + *(_DWORD *)(v1 + 1928));
            ++v12;
            v13 += 72;
          }
          while ( v12 < *(_DWORD *)(v1 + 1932) );
        }
        sub_10041BF0((void *)v1, 1, 7, 1, 0, (__int64 *)0xFF, 255, 0, 0, 1);
        sub_10041820(v1, 0, 5, 6, v14, v15, v16, v17);
        v18 = 0;
        if ( *(_DWORD *)(v1 + 1944) )
        {
          v19 = 0;
          do
          {
            if ( **(_DWORD **)(v19 + *(_DWORD *)(v1 + 1940) + 20) == v6 )
              sub_10045D60((void *)v1, v19 + *(_DWORD *)(v1 + 1940));
            ++v18;
            v19 += 72;
          }
          while ( v18 < *(_DWORD *)(v1 + 1944) );
        }
        sub_10041BF0((void *)v1, 1, 7, 0, 0, (__int64 *)0xFF, 255, 0, 0, 1);
        sub_10041820(v1, 1, 5, 6, v20, v21, v22, v23);
        v24 = *(_DWORD *)(v1 + 1956) - 1;
        if ( v24 >= 0 )
        {
          v25 = 72 * v24;
          do
          {
            if ( **(_DWORD **)(v25 + *(_DWORD *)(v1 + 1952) + 20) == v6 )
              sub_10045D60((void *)v1, v25 + *(_DWORD *)(v1 + 1952));
            v25 -= 72;
            --v24;
          }
          while ( v24 >= 0 );
        }
        v3 = v27;
        result = v26;
      }
      result -= 160;
      --v6;
      v26 = result;
    }
    while ( v6 >= 0 );
    ++v3;
    v4 = v1 + 134832;
    v27 = v3;
  }
  while ( v3 < 8 );
  ++dword_1007CDAC;
  return result;
}
// 1007CDAC: using guessed type int dword_1007CDAC;

//----- (10045D60) --------------------------------------------------------
int __thiscall sub_10045D60(void *this, int a2)
{
  int v2; // esi@1
  __m128 v3; // xmm4@3
  __m128 v4; // xmm0@3
  __m128 v5; // xmm2@3
  __m128 v6; // xmm1@3
  __m128 v7; // xmm3@3
  __m128 v8; // xmm4@3
  __m128 v9; // xmm3@3
  __m128 v10; // xmm0@3
  __m128 v11; // xmm2@3
  int v12; // eax@3
  __m128 v13; // xmm0@3
  __m128 v14; // xmm1@3
  __m128 v15; // xmm4@3
  __m128 v16; // xmm3@3
  __m128 v17; // xmm0@3
  __m128 v18; // xmm2@3
  int v19; // eax@3
  __m128 v20; // xmm0@3
  __m128 v21; // xmm1@3
  __m128 v22; // xmm4@3
  __m128 v23; // xmm3@3
  __m128 v24; // xmm0@3
  __m128 v25; // xmm2@3
  int v26; // eax@3
  __int128 v27; // xmm5@6
  __int128 v28; // xmm4@6
  __m128 v29; // xmm3@6
  __m128 v30; // xmm2@6
  __m128 v31; // xmm1@6
  __m128 v32; // xmm0@6
  __m128 v33; // xmm5@6
  __m128 v34; // xmm6@6
  __m128 v35; // xmm1@6
  __m128 v36; // xmm4@6
  int v37; // eax@6
  __m128 v38; // xmm0@6
  __m128 v39; // xmm1@6
  __m128 v40; // xmm4@6
  __m128 v41; // xmm3@6
  __m128 v42; // xmm0@6
  __m128 v43; // xmm2@6
  int v44; // eax@6
  __m128 v45; // xmm0@6
  __m128 v46; // xmm1@6
  __m128 v47; // xmm4@6
  __m128 v48; // xmm3@6
  __m128 v49; // xmm0@6
  __m128 v50; // xmm2@6
  int v51; // ecx@6
  int v52; // eax@6
  int v53; // edx@9
  int v54; // ecx@9
  signed int v55; // edi@9
  int v56; // eax@10
  __int128 v58; // xmm2@10
  __int128 v59; // xmm0@11
  __int128 v62; // xmm0@14
  int v64; // eax@17
  bool v65; // zf@18
  int v66; // eax@19
  int result; // eax@20
  int v68; // [sp+Ch] [bp-2Ch]@2
  int v69; // [sp+10h] [bp-28h]@3
  int v70; // [sp+14h] [bp-24h]@3
  int v71; // [sp+18h] [bp-20h]@3
  int v72; // [sp+1Ch] [bp-1Ch]@3
  int v73; // [sp+20h] [bp-18h]@3
  __int32 v74; // [sp+24h] [bp-14h]@3
  float v75; // [sp+28h] [bp-10h]@3
  float v76; // [sp+2Ch] [bp-Ch]@3
  int v77; // [sp+30h] [bp-8h]@3
  int v78; // [sp+34h] [bp-4h]@3

  v2 = (int)this;
  if ( *(_DWORD *)(a2 + 48) >= 3u )
  {
    v68 = *(_DWORD *)(a2 + 20);
    sub_10040B20(this, *(_DWORD *)(a2 + 68));
    if ( *(_BYTE *)a2 )
    {
      v27 = *(_DWORD *)(v68 + 56);
      v28 = *(_DWORD *)(v68 + 52);
      v29 = (__m128)*(_DWORD *)(v68 + 24);
      v30 = (__m128)*(_DWORD *)(v68 + 20);
      v31 = (__m128)*(_DWORD *)(v68 + 16);
      v32 = (__m128)*(_DWORD *)(v68 + 12);
      sub_10008670();
      v77 = 0;
      v78 = 1065353216;
      v33 = _mm_shuffle_ps(v32, v31, 68);
      v34 = _mm_shuffle_ps(v32, v31, -18);
      v35 = _mm_shuffle_ps(v30, v29, 68);
      v36 = _mm_shuffle_ps(v30, v29, -18);
      *(_OWORD *)(v2 + 18314336) = _mm_shuffle_ps(v34, v36, -120);
      *(_OWORD *)(v2 + 18314304) = _mm_shuffle_ps(v33, v35, -120);
      *(_OWORD *)(v2 + 18314320) = _mm_shuffle_ps(v33, v35, -35);
      *(_OWORD *)(v2 + 18314352) = _mm_shuffle_ps(v34, v36, -35);
      v37 = *(_DWORD *)(a2 + 12);
      v38 = *(__m128 *)(v37 + 16);
      v39 = *(__m128 *)(v37 + 48);
      v40 = _mm_shuffle_ps(*(__m128 *)v37, v38, -18);
      v41 = _mm_shuffle_ps(*(__m128 *)v37, v38, 68);
      v42 = _mm_shuffle_ps(*(__m128 *)(v37 + 32), v39, 68);
      v43 = _mm_shuffle_ps(*(__m128 *)(v37 + 32), v39, -18);
      *(_OWORD *)(v2 + 18314384) = _mm_shuffle_ps(v41, v42, -35);
      *(_OWORD *)(v2 + 18314368) = _mm_shuffle_ps(v41, v42, -120);
      *(_OWORD *)(v2 + 18314400) = _mm_shuffle_ps(v40, v43, -120);
      *(_OWORD *)(v2 + 18314416) = _mm_shuffle_ps(v40, v43, -35);
      v44 = *(_DWORD *)(a2 + 16);
      v45 = *(__m128 *)(v44 + 16);
      v46 = *(__m128 *)(v44 + 48);
      v47 = _mm_shuffle_ps(*(__m128 *)v44, v45, -18);
      v48 = _mm_shuffle_ps(*(__m128 *)v44, v45, 68);
      v49 = _mm_shuffle_ps(*(__m128 *)(v44 + 32), v46, 68);
      v50 = _mm_shuffle_ps(*(__m128 *)(v44 + 32), v46, -18);
      *(_OWORD *)(v2 + 18314432) = _mm_shuffle_ps(v48, v49, -120);
      *(_OWORD *)(v2 + 18314448) = _mm_shuffle_ps(v48, v49, -35);
      *(_OWORD *)(v2 + 18314464) = _mm_shuffle_ps(v47, v50, -120);
      *(_OWORD *)(v2 + 18314480) = _mm_shuffle_ps(v47, v50, -35);
      v52 = *(_DWORD *)(v2 + 8);
      v75 = *(float *)(v51 + 16);
      v76 = *(float *)(v51 + 24);
      v73 = *(_DWORD *)(v51 + 12);
      v74 = *(_DWORD *)(v51 + 20);
      (*(void (__stdcall **)(int, signed int, int *))(*(_DWORD *)v52 + 176))(v52, 1, &v73);
      v69 = (signed int)ffloor(*(float *)(v68 + 12));
      v70 = (signed int)ffloor(*(float *)(v68 + 20));
      v71 = (signed int)ffloor(*(float *)(v68 + 16));
      v72 = (signed int)ffloor(*(float *)(v68 + 24));
      (*(void (__stdcall **)(_DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 180))(*(_DWORD *)(v2 + 8), 1, &v69);
      sub_10040BC0(v2, 1);
      sub_10041BF0((void *)v2, 0, 8, 0, 0, (__int64 *)0xFF, 255, 0, 0, 1);
    }
    else
    {
      v3 = *(__m128 *)(v68 + 96);
      v77 = 0;
      v4 = *(__m128 *)(v68 + 112);
      v5 = *(__m128 *)(v68 + 128);
      v78 = 1065353216;
      v6 = *(__m128 *)(v68 + 144);
      v7 = v3;
      v8 = _mm_shuffle_ps(v3, v4, -18);
      v9 = _mm_shuffle_ps(v7, v4, 68);
      v10 = _mm_shuffle_ps(v5, v6, 68);
      v11 = _mm_shuffle_ps(v5, v6, -18);
      *(_OWORD *)(v2 + 18314320) = _mm_shuffle_ps(v9, v10, -35);
      *(_OWORD *)(v2 + 18314304) = _mm_shuffle_ps(v9, v10, -120);
      *(_OWORD *)(v2 + 18314336) = _mm_shuffle_ps(v8, v11, -120);
      *(_OWORD *)(v2 + 18314352) = _mm_shuffle_ps(v8, v11, -35);
      v12 = *(_DWORD *)(a2 + 12);
      v13 = *(__m128 *)(v12 + 16);
      v14 = *(__m128 *)(v12 + 48);
      v15 = _mm_shuffle_ps(*(__m128 *)v12, v13, -18);
      v16 = _mm_shuffle_ps(*(__m128 *)v12, v13, 68);
      v17 = _mm_shuffle_ps(*(__m128 *)(v12 + 32), v14, 68);
      v18 = _mm_shuffle_ps(*(__m128 *)(v12 + 32), v14, -18);
      *(_OWORD *)(v2 + 18314384) = _mm_shuffle_ps(v16, v17, -35);
      *(_OWORD *)(v2 + 18314400) = _mm_shuffle_ps(v15, v18, -120);
      *(_OWORD *)(v2 + 18314368) = _mm_shuffle_ps(v16, v17, -120);
      *(_OWORD *)(v2 + 18314416) = _mm_shuffle_ps(v15, v18, -35);
      v19 = *(_DWORD *)(a2 + 16);
      v20 = *(__m128 *)(v19 + 16);
      v21 = *(__m128 *)(v19 + 48);
      v22 = _mm_shuffle_ps(*(__m128 *)v19, v20, -18);
      v23 = _mm_shuffle_ps(*(__m128 *)v19, v20, 68);
      v24 = _mm_shuffle_ps(*(__m128 *)(v19 + 32), v21, 68);
      v25 = _mm_shuffle_ps(*(__m128 *)(v19 + 32), v21, -18);
      *(_OWORD *)(v2 + 18314464) = _mm_shuffle_ps(v22, v25, -120);
      *(_OWORD *)(v2 + 18314432) = _mm_shuffle_ps(v23, v24, -120);
      *(_OWORD *)(v2 + 18314448) = _mm_shuffle_ps(v23, v24, -35);
      *(_OWORD *)(v2 + 18314480) = _mm_shuffle_ps(v22, v25, -35);
      v21.m128_i32[0] = *(_DWORD *)(v68 + 20);
      v24.m128_f32[0] = *(float *)(v68 + 4) - *(float *)(v68 + 12);
      v26 = *(_DWORD *)(v2 + 8);
      v73 = *(_DWORD *)(v68 + 12);
      v74 = v21.m128_i32[0];
      v75 = v24.m128_f32[0] + v24.m128_f32[0];
      v76 = (float)(*(float *)(v68 + 8) - v21.m128_f32[0]) + (float)(*(float *)(v68 + 8) - v21.m128_f32[0]);
      (*(void (__stdcall **)(int, signed int, int *))(*(_DWORD *)v26 + 176))(v26, 1, &v73);
      v69 = (signed int)ffloor(*(float *)(v68 + 12));
      v70 = (signed int)ffloor(*(float *)(v68 + 20));
      v71 = (signed int)ffloor(*(float *)(v68 + 16));
      v72 = (signed int)ffloor(*(float *)(v68 + 24));
      (*(void (__stdcall **)(_DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 180))(*(_DWORD *)(v2 + 8), 1, &v69);
      if ( *(_BYTE *)(a2 + 65) )
        sub_10040BC0(v2, 1);
      else
        sub_10040BC0(v2, 3);
    }
    *(_OWORD *)(v2 + 18314528) = *(_OWORD *)(*(_DWORD *)(a2 + 20) + 28);
    *(_OWORD *)(v2 + 18314928) = *(_OWORD *)(*(_DWORD *)(a2 + 20) + 68);
    if ( *(_DWORD *)(160 * **(_DWORD **)(a2 + 20) + v2 + 133712) > 1u )
      *(_DWORD *)(v2 + 18314940) = 0;
    v53 = a2 + 28;
    v54 = v2 + 18314620;
    *(_DWORD *)(v2 + 18314944) = *(_DWORD *)(*(_DWORD *)(a2 + 20) + 84);
    *(_DWORD *)(v2 + 18314948) = *(_DWORD *)(*(_DWORD *)(a2 + 20) + 88);
    v55 = 4;
    *(_DWORD *)(v2 + 18314512) = *(_DWORD *)(a2 + 60);
    do
    {
      v56 = *(_DWORD *)v53;
      _mm_storel_epi64((__m128i *)(v54 - 76), _mm_loadl_epi64((const __m128i *)(*(_DWORD *)v53 + 4)));
      *(_DWORD *)(v54 - 68) = *(_DWORD *)(v56 + 12);
      _EAX = *(_DWORD *)v53;
      _mm_storel_epi64((__m128i *)(v54 - 12), _mm_loadl_epi64((const __m128i *)(*(_DWORD *)v53 + 20)));
      *(_DWORD *)(v54 - 4) = *(_DWORD *)(_EAX + 28);
      v58 = *(_DWORD *)(*(_DWORD *)v53 + 48);
      __asm { lahf }
      if ( !__SETP__(BYTE1(_EAX) & 0x44, 0) )
        goto LABEL_23;
      v59 = *(_DWORD *)(*(_DWORD *)v53 + 64);
      __asm { lahf }
      if ( __SETP__(_AH & 0x44, 0) )
      {
        *(_DWORD *)v54 = 0x40000000;
      }
      else
      {
LABEL_23:
        __asm { lahf }
        if ( __SETP__(_AH & 0x44, 0) )
          goto LABEL_24;
        v62 = *(_DWORD *)(*(_DWORD *)v53 + 64);
        __asm { lahf }
        if ( !__SETP__(_AH & 0x44, 0) )
LABEL_24:
          *(_DWORD *)v54 = 0;
        else
          *(_DWORD *)v54 = 1065353216;
      }
      *(_OWORD *)(v54 + 52) = *(_OWORD *)(*(_DWORD *)v53 + 36);
      *(_OWORD *)(v54 + 116) = *(_OWORD *)(*(_DWORD *)v53 + 52);
      v64 = *(_DWORD *)v53;
      v53 += 4;
      *(_OWORD *)(v54 + 180) = *(_OWORD *)(v64 + 68);
      v54 += 16;
      --v55;
    }
    while ( v55 );
    v65 = *(_DWORD *)(v2 + 168) == 0;
    *(_OWORD *)(v2 + 18314864) = *(_OWORD *)*(_DWORD *)(a2 + 8);
    *(_OWORD *)(v2 + 18314880) = *(_OWORD *)(*(_DWORD *)(a2 + 8) + 16);
    *(_OWORD *)(v2 + 18314896) = *(_OWORD *)(*(_DWORD *)(a2 + 8) + 32);
    *(_OWORD *)(v2 + 18314912) = *(_OWORD *)(*(_DWORD *)(a2 + 8) + 48);
    if ( !v65 )
    {
      v66 = *(_DWORD *)(v2 + 8);
      *(_DWORD *)(v2 + 168) = 0;
      (*(void (__fastcall **)(_DWORD, int, int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v66 + 92))(
        *(_DWORD *)v66,
        v53,
        v66,
        0,
        0,
        0);
    }
    sub_10046AF0(v2, a2, a2);
    sub_100463B0((void *)v2, a2);
    result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(v2 + 8) + 48))(
               *(_DWORD *)(v2 + 8),
               *(_DWORD *)(a2 + 48),
               *(_DWORD *)(a2 + 44),
               0);
  }
  return result;
}

//----- (100462E0) --------------------------------------------------------
int __thiscall sub_100462E0(int this)
{
  int v1; // esi@1
  int v2; // ebx@1
  int v3; // ecx@1
  int v4; // edi@1
  const void *v5; // ecx@3
  int v6; // ebx@6
  int result; // eax@6
  const void *v8; // ecx@8

  v1 = this;
  v2 = *(_DWORD *)(this + 1988);
  v4 = sub_10040EA0(this, 40, *(_DWORD *)(this + 1988));
  if ( v4 )
  {
    if ( *(_DWORD *)(v1 + 1992) )
      v5 = *(const void **)(v1 + 1984);
    else
      v5 = 0;
    sub_100278E0((void *)v4, v5, 40 * v2);
    sub_10040E40(v1);
  }
  v6 = *(_DWORD *)(v1 + 2000);
  result = sub_10040D50(v1, v3, *(_DWORD *)(v1 + 2000));
  if ( v4 )
  {
    if ( *(_DWORD *)(v1 + 2004) )
      v8 = *(const void **)(v1 + 1996);
    else
      v8 = 0;
    result = (int)sub_100278E0((void *)result, v8, 4 * v6);
    if ( *(_BYTE *)(v1 + 340) )
    {
      result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v1 + 8) + 60))(
                 *(_DWORD *)(v1 + 8),
                 *(_DWORD *)(v1 + 328),
                 0);
      *(_BYTE *)(v1 + 340) = 0;
    }
    if ( *(_BYTE *)(v1 + 341) )
    {
      result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD))(**(_DWORD **)(v1 + 8) + 76))(
                 *(_DWORD *)(v1 + 8),
                 *(_DWORD *)(v1 + 328),
                 42,
                 0);
      *(_BYTE *)(v1 + 341) = 0;
    }
  }
  return result;
}

//----- (100463B0) --------------------------------------------------------
int __thiscall sub_100463B0(void *this, int a2)
{
  int v2; // ebp@0
  int v3; // edi@1
  int v4; // ecx@1
  int v5; // edx@3
  int v6; // esi@1
  signed int v7; // eax@1
  int v8; // ebx@3
  int v9; // esi@3
  const void *v10; // edx@9
  int v11; // ecx@10
  const void *v12; // ecx@11
  __int16 v13; // ax@12
  int v14; // eax@14
  int v15; // ecx@52
  void *v16; // eax@52
  int v17; // ST28_4@57
  int v18; // ST24_4@57
  int v19; // ST20_4@57
  char v20; // al@57
  int v21; // edi@58
  int v22; // eax@58
  int v23; // ebx@58
  int v24; // ebx@60
  int v25; // ebx@61
  int v26; // ecx@61
  int v27; // eax@61
  char v28; // al@67
  int v29; // ecx@67
  int v30; // edx@69
  int v31; // edx@72
  int result; // eax@72
  int v33; // eax@73
  int v34; // [sp-10h] [bp-A4h]@0
  int v35; // [sp-Ch] [bp-A0h]@16
  LPVOID lpMem; // [sp+Ch] [bp-88h]@15
  int v37; // [sp+1Ch] [bp-78h]@52
  unsigned int v38; // [sp+20h] [bp-74h]@14
  LPVOID v39; // [sp+24h] [bp-70h]@9
  int v40; // [sp+34h] [bp-60h]@9
  unsigned int v41; // [sp+38h] [bp-5Ch]@9
  LPVOID v42; // [sp+3Ch] [bp-58h]@17
  int v43; // [sp+40h] [bp-54h]@17
  int v44; // [sp+44h] [bp-50h]@17
  int v45; // [sp+48h] [bp-4Ch]@4
  int v46; // [sp+4Ch] [bp-48h]@18
  __int64 v47; // [sp+50h] [bp-44h]@1
  int v48; // [sp+58h] [bp-3Ch]@3
  int v49; // [sp+5Ch] [bp-38h]@3
  void *v50; // [sp+64h] [bp-30h]@3
  int v51; // [sp+68h] [bp-2Ch]@3
  char *v52; // [sp+6Ch] [bp-28h]@11
  int v53; // [sp+70h] [bp-24h]@61
  int v54; // [sp+74h] [bp-20h]@3
  int v55; // [sp+78h] [bp-1Ch]@1
  int v56; // [sp+7Ch] [bp-18h]@54
  int v57; // [sp+80h] [bp-14h]@16
  int v58; // [sp+90h] [bp-4h]@14

  v3 = (int)this;
  v4 = a2;
  _mm_storel_pd((double *)&v47, 0i64);
  v55 = v3;
  v6 = *(_DWORD *)(v4 + 8);
  v7 = 0;
  if ( *(_DWORD *)(v6 + 68) == 1 )
    v7 = 4;
  v5 = *(_DWORD *)(v4 + 4);
  v8 = 2
     * (*(_BYTE *)(v6 + 73) & 1 | 2
                                * (*(_BYTE *)(v6 + 74) & 1 | 2
                                                           * (*(_BYTE *)(v6 + 75) & 1 | 2
                                                                                      * (*(_BYTE *)(v6 + 72) & 1 | 2 * (*(_BYTE *)(v5 + 24) & 1 | 2 * (*(_DWORD *)(v5 + 16) & 3 | v7 | 16 * (*(_BYTE *)(v4 + 24) & 1 | 2 * (*(_BYTE *)(v4 + 25) & 1 | 2 * (*(_BYTE *)(v4 + 26) & 1 | 2 * (*(_BYTE *)(v4 + 27) & 1 | 2 * (*(_BYTE *)(v4 + 64) & 1 | 2 * (*(_BYTE *)(v5 + 8) & 1 | 2 * (*(_BYTE *)(v5 + 9) & 1 | 2 * (*(_BYTE *)(v5 + 10) & 1 | 2 * (*(_BYTE *)(v5 + 11) & 1)))))))))))))));
  v49 = HIDWORD(v47);
  v54 = v8;
  v48 = v8;
  v50 = (void *)(v3 + 412);
  sub_10002CB0((void *)(v3 + 412), (int)&v51, (int)&v48);
  v9 = v51;
  if ( v51 == *(_DWORD *)(v3 + 416) )
  {
    v51 = (int)&v48;
    sub_10002E30(v3 + 412, (int)&v45, v3 + 412, (int)&v51, v3 + 412);
    v9 = v45;
  }
  if ( *(_BYTE *)(*(_DWORD *)(a2 + 8) + 73) )
    v51 = sub_10047990((void *)v3, a2);
  else
    v51 = 0;
  if ( !*(_DWORD *)(v9 + 16) )
  {
    v41 = 7;
    v40 = 0;
    v10 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v39) = 0;
    if ( *(_WORD *)v10 )
    {
      v12 = v10;
      v52 = (char *)v10 + 2;
      do
      {
        v13 = *(_WORD *)v12;
        v12 = (char *)v12 + 2;
      }
      while ( v13 );
      v11 = ((_BYTE *)v12 - v52) >> 1;
    }
    else
    {
      v11 = 0;
    }
    sub_10001460((int)&v39, v10, v11);
    v58 = 0;
    v14 = sub_10008360(__PAIR__(HIDWORD(v47), v8));
    LOBYTE(v58) = 1;
    sub_100017B0((int)&v39, v14, 0, 0xFFFFFFFF);
    LOBYTE(v58) = 0;
    if ( v38 >= 8 )
      sub_10001E40(v8, v3, lpMem, v38 + 1);
    sub_10001680((int)&v39, L"_HIKARUV00", 0xAu);
    sub_10001680((int)&v39, L".psh", 4u);
    if ( sub_10028FF8(v8, v3, (int)&v57) )
    {
      v42 = 0;
      v43 = 0;
      v44 = 0;
      LOBYTE(v58) = 2;
      if ( v8 & 0x8000 )
      {
        v45 = (int)"TEX_WRAP_V";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x20000 )
      {
        v45 = (int)"TEX_MIRROR_V";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x10000 )
      {
        v45 = (int)"TEX_WRAP_U";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x40000 )
      {
        v45 = (int)"TEX_MIRROR_U";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x4000 )
      {
        v45 = (int)"DISABLE_DIFFUSE";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 4 )
      {
        v45 = (int)"ALT_DIFFUSE";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x10 )
      {
        v45 = (int)"FOG";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 8 )
      {
        v45 = (int)"HIGHLIGHT";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( *(_BYTE *)(*(_DWORD *)(a2 + 8) + 73) )
      {
        v45 = (int)"USE_TEXTURE";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
        if ( v8 & 0x20 )
        {
          v45 = (int)"TEX_LOD";
          v46 = (int)"1";
          sub_100027D0((int)&v42, (unsigned int)&v45);
        }
        switch ( (unsigned int)v8 >> 6 )
        {
          case 0u:
            v45 = (int)"MODE0";
            break;
          case 1u:
            v45 = (int)"MODE1";
            break;
          case 2u:
            v45 = (int)"MODE2";
            break;
          case 3u:
            v45 = (int)"MODE3";
            break;
        }
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x300 )
      {
        v45 = (int)"USE_LIGHT";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x400 )
      {
        v45 = (int)"LIGHT0";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x800 )
      {
        v45 = (int)"LIGHT1";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x1000 )
      {
        v45 = (int)"LIGHT2";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      if ( v8 & 0x2000 )
      {
        v45 = (int)"LIGHT3";
        v46 = (int)"1";
        sub_100027D0((int)&v42, (unsigned int)&v45);
      }
      v45 = 0;
      v46 = 0;
      sub_100027D0((int)&v42, (unsigned int)&v45);
      v38 = 15;
      v37 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "ps_main", 7u);
      LOBYTE(v58) = 3;
      v16 = &lpMem;
      if ( v38 >= 0x10 )
        v16 = lpMem;
      sub_10040760(
        (void *)v3,
        (int)&v56,
        L"HIKARU_PSH",
        (int)&v56,
        (int)v42,
        (int)&v56,
        (int)v16,
        (int)"ps_5_0",
        v34,
        v35,
        (int)&v56,
        v15);
      LOBYTE(v58) = 2;
      if ( v38 >= 0x10 )
        sub_10001EA0(v8, v3, lpMem, v38 + 1);
      if ( !sub_10028FF8(v8, v3, (int)&v57) )
      {
        v17 = v57;
        v18 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v56 + 16))(v56, 1);
        v19 = v56;
        v20 = (*(int (**)(void))(*(_DWORD *)v56 + 12))();
        sub_1002936D(v8, v3, v20, v19, v18, v17);
        sub_100290B5(v8, v2, v3);
      }
      v21 = (*(int (__stdcall **)(int))(*(_DWORD *)v56 + 16))(v56);
      v22 = (*(int (__stdcall **)(int))(*(_DWORD *)v56 + 12))(v56);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v55 + 4) + 60))(
        *(_DWORD *)(v55 + 4),
        v22,
        v21,
        0,
        &v52);
      LOBYTE(v58) = 0;
      v23 = v54;
      if ( v42 )
        sub_100029D0(v54, v21, v42, (v44 - (signed int)v42) >> 3);
    }
    else
    {
      sub_1002C003(v8, v3);
      v24 = sub_1002BD3E(v8, v3, v57);
      sub_1002C01E(v24, v2, v3);
      v21 = (int)sub_1002C36D(v24);
      sub_1002C2BD(v24, v21);
      sub_100290B5(v24, v2, v21);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v55 + 4) + 60))(
        *(_DWORD *)(v55 + 4),
        v21,
        v24,
        0,
        &v52);
      sub_1002C0EC((LPVOID)v21);
      v23 = v54;
    }
    v54 = HIDWORD(v47);
    v53 = v23;
    v25 = (int)v50;
    sub_10002CB0(v50, (int)&a2, (int)&v53);
    v27 = a2;
    if ( a2 == *(_DWORD *)(v25 + 4) )
    {
      a2 = (int)&v53;
      sub_10002E30(v25, (int)&v45, v26, (int)&a2, v26);
      v27 = v45;
    }
    *(_DWORD *)(v27 + 16) = v52;
    v58 = -1;
    if ( v41 >= 8 )
      sub_10001E40(v25, v21, v39, v41 + 1);
    v3 = v55;
  }
  if ( v51 )
  {
    v28 = 0;
    v29 = *(_DWORD *)v51 + 4;
    if ( *(_DWORD *)(v3 + 276) != *(_DWORD *)v29 )
    {
      v28 = 1;
      *(_DWORD *)(v3 + 276) = *(_DWORD *)v29;
    }
    v30 = *(_DWORD *)(v3 + 8);
    if ( v30 && v28 )
      (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v30 + 32))(v30, 0, 1, v29);
  }
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 192))(
    *(_DWORD *)(v3 + 8),
    *(_DWORD *)(v3 + 408),
    0,
    0,
    v3 + 18314512,
    0,
    0);
  v31 = *(_DWORD *)(v9 + 16);
  result = *(_DWORD *)(v3 + 408);
  a2 = *(_DWORD *)(v3 + 408);
  if ( *(_DWORD *)(v3 + 152) != v31 )
  {
    v33 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 152) = v31;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v33 + 36))(v33, v31, 0, 0);
    result = a2;
  }
  if ( *(_DWORD *)(v3 + 156) != result )
  {
    *(_DWORD *)(v3 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v3 + 8) + 64))(
               *(_DWORD *)(v3 + 8),
               0,
               1,
               &a2);
  }
  return result;
}
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006DE10: using guessed type wchar_t a_hikaruv00[11];
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (10046AF0) --------------------------------------------------------
int __userpurge sub_10046AF0@<eax>(int a1@<ecx>, int a2@<edi>, signed int a3)
{
  int v3; // ebp@0
  int v4; // ebx@1
  int v5; // ecx@1
  int v6; // esi@1
  const void *v7; // edx@4
  int v8; // ecx@5
  const void *v9; // ecx@6
  __int16 v10; // ax@7
  int v11; // eax@9
  int v12; // ecx@12
  void *v13; // eax@12
  int v14; // ST28_4@17
  int v15; // ST24_4@17
  int v16; // ST20_4@17
  char v17; // al@17
  int v18; // edi@18
  int v19; // eax@18
  int v20; // edi@18
  int v21; // eax@18
  LPVOID v22; // ebx@20
  int v23; // ecx@21
  int v24; // eax@21
  signed int v25; // eax@25
  int v26; // edx@25
  int v27; // eax@25
  char v28; // cl@25
  int v29; // eax@25
  signed int v30; // edi@25
  int v31; // edx@27
  int v32; // ST14_4@27
  int v33; // edx@27
  int result; // eax@27
  int v35; // eax@28
  int v36; // edx@31
  int v37; // eax@32
  int v38; // [sp-10h] [bp-E4h]@0
  int v39; // [sp-Ch] [bp-E0h]@11
  int v40; // [sp+10h] [bp-C4h]@4
  int v41; // [sp+14h] [bp-C0h]@4
  int v42; // [sp+18h] [bp-BCh]@4
  int v43; // [sp+1Ch] [bp-B8h]@4
  int v44; // [sp+20h] [bp-B4h]@4
  int v45; // [sp+24h] [bp-B0h]@4
  int v46; // [sp+28h] [bp-ACh]@4
  int v47; // [sp+2Ch] [bp-A8h]@4
  int v48; // [sp+30h] [bp-A4h]@4
  int v49; // [sp+34h] [bp-A0h]@4
  int v50; // [sp+38h] [bp-9Ch]@4
  int v51; // [sp+3Ch] [bp-98h]@4
  int v52; // [sp+40h] [bp-94h]@4
  int v53; // [sp+44h] [bp-90h]@4
  int v54; // [sp+48h] [bp-8Ch]@4
  int v55; // [sp+4Ch] [bp-88h]@4
  int v56; // [sp+50h] [bp-84h]@4
  int v57; // [sp+54h] [bp-80h]@4
  int v58; // [sp+58h] [bp-7Ch]@4
  int v59; // [sp+5Ch] [bp-78h]@4
  int v60; // [sp+60h] [bp-74h]@4
  LPVOID lpMem; // [sp+68h] [bp-6Ch]@9
  int v62; // [sp+78h] [bp-5Ch]@12
  unsigned int v63; // [sp+7Ch] [bp-58h]@9
  LPVOID v64; // [sp+80h] [bp-54h]@12
  int v65; // [sp+84h] [bp-50h]@12
  int v66; // [sp+88h] [bp-4Ch]@12
  LPVOID v67; // [sp+8Ch] [bp-48h]@4
  int v68; // [sp+9Ch] [bp-38h]@4
  unsigned int v69; // [sp+A0h] [bp-34h]@4
  int v70; // [sp+A4h] [bp-30h]@18
  int v71; // [sp+A8h] [bp-2Ch]@18
  int v72; // [sp+ACh] [bp-28h]@1
  int v73; // [sp+B0h] [bp-24h]@2
  int v74; // [sp+B4h] [bp-20h]@12
  int v75; // [sp+B8h] [bp-1Ch]@1
  int v76; // [sp+BCh] [bp-18h]@11
  int v77; // [sp+C0h] [bp-14h]@1
  int v78; // [sp+D0h] [bp-4h]@9

  v4 = a1;
  v72 = 0;
  v75 = a1;
  sub_10002D30(a1 + 376, (int)&v77, (int)&v72);
  v6 = v77;
  if ( v77 == *(_DWORD *)(v4 + 380) )
  {
    v77 = (int)&v72;
    sub_10002E90(v4 + 376, (int)&v73, v5, (int)&v77, v5);
    v6 = v73;
  }
  if ( !*(_DWORD *)(v6 + 12) )
  {
    v40 = (int)"POSITION";
    v41 = 0;
    v42 = 6;
    v7 = *(const void **)(dword_1007CD9C + 1236);
    v43 = 0;
    v44 = 0;
    v45 = 0;
    v46 = 0;
    v47 = (int)"NORMAL";
    v48 = 0;
    v49 = 6;
    v50 = 0;
    v51 = -1;
    v52 = 0;
    v53 = 0;
    v54 = (int)"TEXCOORD";
    v55 = 0;
    v56 = 2;
    v57 = 0;
    v58 = -1;
    v59 = 0;
    v60 = 0;
    v69 = 7;
    v68 = 0;
    LOWORD(v67) = 0;
    if ( *(_WORD *)v7 )
    {
      v9 = v7;
      a2 = (int)((char *)v7 + 2);
      do
      {
        v10 = *(_WORD *)v9;
        v9 = (char *)v9 + 2;
      }
      while ( v10 );
      v8 = (signed int)((char *)v9 - a2) >> 1;
    }
    else
    {
      v8 = 0;
    }
    sub_10001460((int)&v67, v7, v8);
    v78 = 0;
    v11 = sub_100026C0((int)&lpMem, 0);
    LOBYTE(v78) = 1;
    sub_100017B0((int)&v67, v11, 0, 0xFFFFFFFF);
    LOBYTE(v78) = 0;
    if ( v63 >= 8 )
      sub_10001E40(v4, a2, lpMem, v63 + 1);
    sub_10001680((int)&v67, L"_HIKARUV00", 0xAu);
    sub_10001680((int)&v67, L".vsh", 4u);
    if ( sub_10028FF8(v4, a2, (int)&v76) )
    {
      v64 = 0;
      v65 = 0;
      v66 = 0;
      LOBYTE(v78) = 2;
      v73 = 0;
      v74 = 0;
      sub_100027D0((int)&v64, (unsigned int)&v73);
      v63 = 15;
      v62 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "vs_main", 7u);
      LOBYTE(v78) = 3;
      v13 = &lpMem;
      if ( v63 >= 0x10 )
        v13 = lpMem;
      sub_10040760(
        (void *)v4,
        (int)&v77,
        L"HIKARU_VSH",
        (int)&v77,
        (int)v64,
        (int)&v77,
        (int)v13,
        (int)"vs_5_0",
        v38,
        v39,
        (int)&v77,
        v12);
      LOBYTE(v78) = 2;
      if ( v63 >= 0x10 )
        sub_10001EA0(v4, a2, lpMem, v63 + 1);
      if ( !sub_10028FF8(v4, a2, (int)&v76) )
      {
        v14 = v76;
        v15 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v77 + 16))(v77, 1);
        v16 = v77;
        v17 = (*(int (**)(void))(*(_DWORD *)v77 + 12))();
        sub_1002936D(v4, a2, v17, v16, v15, v14);
        sub_100290B5(v4, v3, a2);
      }
      v18 = (*(int (__stdcall **)(int))(*(_DWORD *)v77 + 16))(v77);
      v19 = (*(int (__stdcall **)(int))(*(_DWORD *)v77 + 12))(v77);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v4 + 4) + 48))(
        *(_DWORD *)(v4 + 4),
        v19,
        v18,
        0,
        &v70);
      v20 = (*(int (__stdcall **)(int))(*(_DWORD *)v77 + 16))(v77);
      v21 = (*(int (__stdcall **)(int))(*(_DWORD *)v77 + 12))(v77);
      (*(void (__stdcall **)(_DWORD, int *, signed int, int, int, int *))(**(_DWORD **)(v75 + 4) + 44))(
        *(_DWORD *)(v75 + 4),
        &v40,
        3,
        v21,
        v20,
        &v71);
      LOBYTE(v78) = 0;
      v4 = v75;
      if ( v64 )
        sub_100029D0(v75, v20, v64, (v66 - (signed int)v64) >> 3);
    }
    else
    {
      sub_1002C003(v4, a2);
      v20 = sub_1002BD3E(v4, a2, v76);
      sub_1002C01E(v4, v3, v20);
      v22 = sub_1002C36D(v20);
      sub_1002C2BD((int)v22, v20);
      sub_100290B5((int)v22, v3, v20);
      (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v75 + 4) + 48))(
        *(_DWORD *)(v75 + 4),
        v22,
        v20,
        0,
        &v70);
      (*(void (__stdcall **)(_DWORD, int *, signed int, LPVOID, int, int *))(**(_DWORD **)(v75 + 4) + 44))(
        *(_DWORD *)(v75 + 4),
        &v40,
        3,
        v22,
        v20,
        &v71);
      sub_1002C0EC(v22);
      v4 = v75;
    }
    v75 = 0;
    sub_10002D30(v4 + 376, (int)&v77, (int)&v75);
    v24 = v77;
    if ( v77 == *(_DWORD *)(v4 + 380) )
    {
      v77 = (int)&v75;
      sub_10002E90(v4 + 376, (int)&v73, v23, (int)&v77, v23);
      v24 = v73;
    }
    *(_DWORD *)(v24 + 12) = v70;
    *(_DWORD *)(v24 + 16) = v71;
    v78 = -1;
    if ( v69 >= 8 )
      sub_10001E40(v4, v20, v67, v69 + 1);
  }
  v25 = a3;
  a3 = 16;
  v26 = *(_DWORD *)(v25 + 4);
  v27 = *(_DWORD *)v26 >> 3;
  a3 = 16 << (*(_DWORD *)v26 & 7);
  v28 = v27 & 7;
  v29 = a3;
  v30 = 16 << v28;
  if ( *(_BYTE *)(v26 + 6) == 2 )
  {
    v29 = 2 * a3;
    v30 *= 2;
  }
  v31 = *(_DWORD *)(v4 + 8);
  v32 = *(_DWORD *)(v4 + 372);
  *(float *)(v4 + 18314496) = (float)v29;
  *(float *)(v4 + 18314500) = (float)v30;
  (*(void (__stdcall **)(int, int, _DWORD, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)v31 + 192))(
    v31,
    v32,
    0,
    0,
    v4 + 18314304,
    0,
    0);
  v33 = *(_DWORD *)(v6 + 12);
  result = *(_DWORD *)(v4 + 372);
  a3 = *(_DWORD *)(v4 + 372);
  if ( *(_DWORD *)(v4 + 140) != v33 )
  {
    v35 = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v4 + 140) = v33;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v35 + 44))(v35, v33, 0, 0);
    result = a3;
  }
  if ( *(_DWORD *)(v4 + 144) != result )
  {
    *(_DWORD *)(v4 + 144) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, signed int *))(**(_DWORD **)(v4 + 8) + 28))(
               *(_DWORD *)(v4 + 8),
               0,
               1,
               &a3);
  }
  v36 = *(_DWORD *)(v6 + 16);
  if ( *(_DWORD *)(v4 + 148) != v36 )
  {
    v37 = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v4 + 148) = v36;
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)v37 + 68))(v37, v36);
  }
  return result;
}
// 1006CC1C: using guessed type wchar_t a_vsh[5];
// 1006DE10: using guessed type wchar_t a_hikaruv00[11];
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (10047060) --------------------------------------------------------
int __userpurge sub_10047060@<eax>(int a1@<ecx>, int a2@<edi>, int a3)
{
  int v3; // ebp@0
  int v4; // ebx@1
  int v5; // ecx@1
  int v6; // esi@1
  const void *v7; // edx@4
  int v8; // ecx@5
  const void *v9; // ecx@6
  __int16 v10; // ax@7
  unsigned __int64 v11; // ST24_8@9
  int v12; // eax@9
  int v13; // ecx@12
  void *v14; // eax@12
  int v15; // ST28_4@17
  int v16; // ST24_4@17
  int v17; // ST20_4@17
  char v18; // al@17
  int v19; // edi@18
  int v20; // eax@18
  int v21; // ebx@20
  int v22; // ecx@21
  int v23; // eax@21
  char v24; // al@25
  int v25; // ecx@25
  int v26; // edx@27
  int v27; // edx@30
  int result; // eax@30
  int v29; // eax@31
  int v30; // [sp-18h] [bp-94h]@0
  int v31; // [sp-14h] [bp-90h]@11
  LPVOID lpMem; // [sp+4h] [bp-78h]@10
  int v33; // [sp+14h] [bp-68h]@12
  unsigned int v34; // [sp+18h] [bp-64h]@9
  LPVOID v35; // [sp+1Ch] [bp-60h]@4
  int v36; // [sp+2Ch] [bp-50h]@4
  unsigned int v37; // [sp+30h] [bp-4Ch]@4
  LPVOID v38; // [sp+34h] [bp-48h]@12
  int v39; // [sp+38h] [bp-44h]@12
  int v40; // [sp+3Ch] [bp-40h]@12
  int v41; // [sp+40h] [bp-3Ch]@2
  int v42; // [sp+44h] [bp-38h]@12
  __int64 v43; // [sp+48h] [bp-34h]@1
  int v44; // [sp+50h] [bp-2Ch]@1
  int v45; // [sp+54h] [bp-28h]@1
  int *v46; // [sp+58h] [bp-24h]@1
  int v47; // [sp+5Ch] [bp-20h]@1
  int v48; // [sp+60h] [bp-1Ch]@21
  int v49; // [sp+64h] [bp-18h]@14
  int v50; // [sp+68h] [bp-14h]@11
  int v51; // [sp+78h] [bp-4h]@9

  v44 = 1;
  _mm_storel_pd((double *)&v43, 0i64);
  v4 = a1;
  v45 = HIDWORD(v43);
  v47 = a1;
  sub_10002CB0((void *)(a1 + 412), (int)&v46, (int)&v44);
  v6 = (int)v46;
  if ( v46 == *(int **)(v4 + 416) )
  {
    v46 = &v44;
    sub_10002E30(v4 + 412, (int)&v41, v5, (int)&v46, v5);
    v6 = v41;
  }
  if ( !*(_DWORD *)(v6 + 16) )
  {
    v37 = 7;
    v36 = 0;
    v7 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v35) = 0;
    if ( *(_WORD *)v7 )
    {
      v9 = v7;
      a2 = (int)((char *)v7 + 2);
      do
      {
        v10 = *(_WORD *)v9;
        v9 = (char *)v9 + 2;
      }
      while ( v10 );
      v8 = (signed int)((char *)v9 - a2) >> 1;
    }
    else
    {
      v8 = 0;
    }
    sub_10001460((int)&v35, v7, v8);
    HIDWORD(v11) = HIDWORD(v43);
    v51 = 0;
    LODWORD(v11) = 1;
    v12 = sub_10008360(v11);
    LOBYTE(v51) = 1;
    sub_100017B0((int)&v35, v12, 0, 0xFFFFFFFF);
    LOBYTE(v51) = 0;
    if ( v34 >= 8 )
      sub_10001E40(v4, a2, lpMem, v34 + 1);
    sub_10001680((int)&v35, L"_HIKARUV00", 0xAu);
    sub_10001680((int)&v35, L".psh", 4u);
    if ( sub_10028FF8(v4, a2, (int)&v50) )
    {
      v38 = 0;
      v39 = 0;
      v40 = 0;
      LOBYTE(v51) = 2;
      v41 = (int)"DRAW2D";
      v42 = (int)"1";
      sub_100027D0((int)&v38, (unsigned int)&v41);
      v41 = 0;
      v42 = 0;
      sub_100027D0((int)&v38, (unsigned int)&v41);
      v34 = 15;
      v33 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "ps_main", 7u);
      LOBYTE(v51) = 3;
      v14 = &lpMem;
      if ( v34 >= 0x10 )
        v14 = lpMem;
      sub_10040760(
        (void *)v4,
        (int)&v49,
        L"HIKARU_PSH",
        (int)&v49,
        (int)v38,
        (int)&v49,
        (int)v14,
        (int)"ps_5_0",
        v30,
        v31,
        (int)&v49,
        v13);
      LOBYTE(v51) = 2;
      if ( v34 >= 0x10 )
        sub_10001EA0(v4, a2, lpMem, v34 + 1);
      if ( !sub_10028FF8(v4, a2, (int)&v50) )
      {
        v15 = v50;
        v16 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v49 + 16))(v49, 1);
        v17 = v49;
        v18 = (*(int (**)(void))(*(_DWORD *)v49 + 12))();
        sub_1002936D(v4, a2, v18, v17, v16, v15);
        sub_100290B5(v4, v3, a2);
      }
      v19 = (*(int (__stdcall **)(int))(*(_DWORD *)v49 + 16))(v49);
      v20 = (*(int (__stdcall **)(int))(*(_DWORD *)v49 + 12))(v49);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v4 + 4) + 60))(
        *(_DWORD *)(v4 + 4),
        v20,
        v19,
        0,
        &v46);
      LOBYTE(v51) = 0;
      v4 = v47;
      if ( v38 )
        sub_100029D0(v47, v19, v38, (v40 - (signed int)v38) >> 3);
    }
    else
    {
      sub_1002C003(v4, a2);
      v21 = sub_1002BD3E(v4, a2, v50);
      sub_1002C01E(v21, v3, a2);
      v19 = (int)sub_1002C36D(v21);
      sub_1002C2BD(v21, v19);
      sub_100290B5(v21, v3, v19);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v47 + 4) + 60))(
        *(_DWORD *)(v47 + 4),
        v19,
        v21,
        0,
        &v46);
      sub_1002C0EC((LPVOID)v19);
      v4 = v47;
    }
    v49 = HIDWORD(v43);
    v48 = 1;
    sub_10002CB0((void *)(v4 + 412), (int)&v47, (int)&v48);
    v23 = v47;
    if ( v47 == *(_DWORD *)(v4 + 416) )
    {
      v47 = (int)&v48;
      sub_10002E30(v4 + 412, (int)&v41, v22, (int)&v47, v22);
      v23 = v41;
    }
    *(_DWORD *)(v23 + 16) = v46;
    v51 = -1;
    if ( v37 >= 8 )
      sub_10001E40(v4, v19, v35, v37 + 1);
  }
  v24 = 0;
  v25 = *(_DWORD *)(v4 + 4 * a3 + 1668) + 4;
  if ( *(_DWORD *)(v4 + 276) != *(_DWORD *)v25 )
  {
    v24 = 1;
    *(_DWORD *)(v4 + 276) = *(_DWORD *)v25;
  }
  v26 = *(_DWORD *)(v4 + 8);
  if ( v26 && v24 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v26 + 32))(v26, 0, 1, v25);
  v27 = *(_DWORD *)(v6 + 16);
  result = 0;
  a3 = 0;
  if ( *(_DWORD *)(v4 + 152) != v27 )
  {
    v29 = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v4 + 152) = v27;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v29 + 36))(v29, v27, 0, 0);
    result = a3;
  }
  if ( *(_DWORD *)(v4 + 156) != result )
  {
    *(_DWORD *)(v4 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v4 + 8) + 64))(
               *(_DWORD *)(v4 + 8),
               0,
               1,
               &a3);
  }
  return result;
}
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006DE10: using guessed type wchar_t a_hikaruv00[11];
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (10047460) --------------------------------------------------------
int __usercall sub_10047460@<eax>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // ebp@0
  int v3; // ebx@1
  int v4; // ecx@1
  int v5; // esi@1
  const void *v6; // edx@4
  int v7; // ecx@5
  const void *v8; // ecx@6
  __int16 v9; // ax@7
  int v10; // eax@9
  int v11; // ecx@12
  void *v12; // eax@12
  int v13; // ST28_4@17
  int v14; // ST24_4@17
  int v15; // ST20_4@17
  char v16; // al@17
  int v17; // edi@18
  int v18; // eax@18
  int v19; // edi@18
  int v20; // eax@18
  LPVOID v21; // ebx@20
  int v22; // ecx@21
  int v23; // eax@21
  int v24; // edx@25
  int result; // eax@25
  int v26; // eax@26
  int v27; // edx@29
  int v28; // eax@30
  int v29; // [sp-10h] [bp-E0h]@0
  int v30; // [sp-Ch] [bp-DCh]@11
  int v31; // [sp+10h] [bp-C0h]@4
  int v32; // [sp+14h] [bp-BCh]@4
  int v33; // [sp+18h] [bp-B8h]@4
  int v34; // [sp+1Ch] [bp-B4h]@4
  int v35; // [sp+20h] [bp-B0h]@4
  int v36; // [sp+24h] [bp-ACh]@4
  int v37; // [sp+28h] [bp-A8h]@4
  int v38; // [sp+2Ch] [bp-A4h]@4
  int v39; // [sp+30h] [bp-A0h]@4
  int v40; // [sp+34h] [bp-9Ch]@4
  int v41; // [sp+38h] [bp-98h]@4
  int v42; // [sp+3Ch] [bp-94h]@4
  int v43; // [sp+40h] [bp-90h]@4
  int v44; // [sp+44h] [bp-8Ch]@4
  int v45; // [sp+48h] [bp-88h]@4
  int v46; // [sp+4Ch] [bp-84h]@4
  int v47; // [sp+50h] [bp-80h]@4
  int v48; // [sp+54h] [bp-7Ch]@4
  int v49; // [sp+58h] [bp-78h]@4
  int v50; // [sp+5Ch] [bp-74h]@4
  int v51; // [sp+60h] [bp-70h]@4
  LPVOID lpMem; // [sp+68h] [bp-68h]@9
  int v53; // [sp+78h] [bp-58h]@12
  unsigned int v54; // [sp+7Ch] [bp-54h]@9
  LPVOID v55; // [sp+80h] [bp-50h]@4
  int v56; // [sp+90h] [bp-40h]@4
  unsigned int v57; // [sp+94h] [bp-3Ch]@4
  LPVOID v58; // [sp+98h] [bp-38h]@12
  int v59; // [sp+9Ch] [bp-34h]@12
  int v60; // [sp+A0h] [bp-30h]@12
  int v61; // [sp+A4h] [bp-2Ch]@18
  int v62; // [sp+A8h] [bp-28h]@18
  int v63; // [sp+ACh] [bp-24h]@1
  int v64; // [sp+B0h] [bp-20h]@2
  int v65; // [sp+B4h] [bp-1Ch]@12
  int v66; // [sp+B8h] [bp-18h]@11
  int v67; // [sp+BCh] [bp-14h]@1
  int v68; // [sp+C0h] [bp-10h]@1
  int v69; // [sp+CCh] [bp-4h]@9

  v3 = a1;
  v63 = 1;
  v67 = a1;
  sub_10002D30(a1 + 376, (int)&v68, (int)&v63);
  v5 = v68;
  if ( v68 == *(_DWORD *)(v3 + 380) )
  {
    v68 = (int)&v63;
    sub_10002E90(v3 + 376, (int)&v64, v4, (int)&v68, v4);
    v5 = v64;
  }
  if ( !*(_DWORD *)(v5 + 12) )
  {
    v31 = (int)"POSITION";
    v32 = 0;
    v33 = 6;
    v6 = *(const void **)(dword_1007CD9C + 1236);
    v34 = 0;
    v35 = 0;
    v36 = 0;
    v37 = 0;
    v38 = (int)"NORMAL";
    v39 = 0;
    v40 = 6;
    v41 = 0;
    v42 = -1;
    v43 = 0;
    v44 = 0;
    v45 = (int)"TEXCOORD";
    v46 = 0;
    v47 = 6;
    v48 = 0;
    v49 = -1;
    v50 = 0;
    v51 = 0;
    v57 = 7;
    v56 = 0;
    LOWORD(v55) = 0;
    if ( *(_WORD *)v6 )
    {
      v8 = v6;
      a2 = (int)((char *)v6 + 2);
      do
      {
        v9 = *(_WORD *)v8;
        v8 = (char *)v8 + 2;
      }
      while ( v9 );
      v7 = (signed int)((char *)v8 - a2) >> 1;
    }
    else
    {
      v7 = 0;
    }
    sub_10001460((int)&v55, v6, v7);
    v69 = 0;
    v10 = sub_100026C0((int)&lpMem, 1u);
    LOBYTE(v69) = 1;
    sub_100017B0((int)&v55, v10, 0, 0xFFFFFFFF);
    LOBYTE(v69) = 0;
    if ( v54 >= 8 )
      sub_10001E40(v3, a2, lpMem, v54 + 1);
    sub_10001680((int)&v55, L"_HIKARUV00", 0xAu);
    sub_10001680((int)&v55, L".vsh", 4u);
    if ( sub_10028FF8(v3, a2, (int)&v66) )
    {
      v58 = 0;
      v59 = 0;
      v60 = 0;
      LOBYTE(v69) = 2;
      v64 = (int)"DRAW2D";
      v65 = (int)"1";
      sub_100027D0((int)&v58, (unsigned int)&v64);
      v64 = 0;
      v65 = 0;
      sub_100027D0((int)&v58, (unsigned int)&v64);
      v54 = 15;
      v53 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "vs_main", 7u);
      LOBYTE(v69) = 3;
      v12 = &lpMem;
      if ( v54 >= 0x10 )
        v12 = lpMem;
      sub_10040760(
        (void *)v3,
        (int)&v68,
        L"HIKARU_VSH",
        (int)&v68,
        (int)v58,
        (int)&v68,
        (int)v12,
        (int)"vs_5_0",
        v29,
        v30,
        (int)&v68,
        v11);
      LOBYTE(v69) = 2;
      if ( v54 >= 0x10 )
        sub_10001EA0(v3, a2, lpMem, v54 + 1);
      if ( !sub_10028FF8(v3, a2, (int)&v66) )
      {
        v13 = v66;
        v14 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v68 + 16))(v68, 1);
        v15 = v68;
        v16 = (*(int (**)(void))(*(_DWORD *)v68 + 12))();
        sub_1002936D(v3, a2, v16, v15, v14, v13);
        sub_100290B5(v3, v2, a2);
      }
      v17 = (*(int (__stdcall **)(int))(*(_DWORD *)v68 + 16))(v68);
      v18 = (*(int (__stdcall **)(int))(*(_DWORD *)v68 + 12))(v68);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v3 + 4) + 48))(
        *(_DWORD *)(v3 + 4),
        v18,
        v17,
        0,
        &v61);
      v19 = (*(int (__stdcall **)(int))(*(_DWORD *)v68 + 16))(v68);
      v20 = (*(int (__stdcall **)(int))(*(_DWORD *)v68 + 12))(v68);
      (*(void (__stdcall **)(_DWORD, int *, signed int, int, int, int *))(**(_DWORD **)(v67 + 4) + 44))(
        *(_DWORD *)(v67 + 4),
        &v31,
        3,
        v20,
        v19,
        &v62);
      LOBYTE(v69) = 0;
      v3 = v67;
      if ( v58 )
        sub_100029D0(v67, v19, v58, (v60 - (signed int)v58) >> 3);
    }
    else
    {
      sub_1002C003(v3, a2);
      v19 = sub_1002BD3E(v3, a2, v66);
      sub_1002C01E(v3, v2, v19);
      v21 = sub_1002C36D(v19);
      sub_1002C2BD((int)v21, v19);
      sub_100290B5((int)v21, v2, v19);
      (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v67 + 4) + 48))(
        *(_DWORD *)(v67 + 4),
        v21,
        v19,
        0,
        &v61);
      (*(void (__stdcall **)(_DWORD, int *, signed int, LPVOID, int, int *))(**(_DWORD **)(v67 + 4) + 44))(
        *(_DWORD *)(v67 + 4),
        &v31,
        3,
        v21,
        v19,
        &v62);
      sub_1002C0EC(v21);
      v3 = v67;
    }
    v67 = 1;
    sub_10002D30(v3 + 376, (int)&v68, (int)&v67);
    v23 = v68;
    if ( v68 == *(_DWORD *)(v3 + 380) )
    {
      v68 = (int)&v67;
      sub_10002E90(v3 + 376, (int)&v64, v22, (int)&v68, v22);
      v23 = v64;
    }
    *(_DWORD *)(v23 + 12) = v61;
    *(_DWORD *)(v23 + 16) = v62;
    v69 = -1;
    if ( v57 >= 8 )
      sub_10001E40(v3, v19, v55, v57 + 1);
  }
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 192))(
    *(_DWORD *)(v3 + 8),
    *(_DWORD *)(v3 + 372),
    0,
    0,
    v3 + 18314304,
    0,
    0);
  v24 = *(_DWORD *)(v5 + 12);
  result = *(_DWORD *)(v3 + 372);
  v67 = *(_DWORD *)(v3 + 372);
  if ( *(_DWORD *)(v3 + 140) != v24 )
  {
    v26 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 140) = v24;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v26 + 44))(v26, v24, 0, 0);
    result = v67;
  }
  if ( *(_DWORD *)(v3 + 144) != result )
  {
    *(_DWORD *)(v3 + 144) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v3 + 8) + 28))(
               *(_DWORD *)(v3 + 8),
               0,
               1,
               &v67);
  }
  v27 = *(_DWORD *)(v5 + 16);
  if ( *(_DWORD *)(v3 + 148) != v27 )
  {
    v28 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 148) = v27;
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)v28 + 68))(v28, v27);
  }
  return result;
}
// 1006CC1C: using guessed type wchar_t a_vsh[5];
// 1006DE10: using guessed type wchar_t a_hikaruv00[11];
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (10047990) --------------------------------------------------------
int __thiscall sub_10047990(void *this, int a2)
{
  int v2; // edi@1
  void *v3; // ebp@1
  int result; // eax@1
  unsigned int v5; // esi@2
  int v6; // ecx@2
  unsigned int v7; // ebx@2
  int v8; // ebp@3
  int v9; // ecx@3
  int v10; // edi@5
  int v11; // ebp@5
  int v12; // eax@5
  unsigned int v13; // edi@6
  unsigned int v14; // ebx@7
  unsigned int v15; // ecx@7
  bool v16; // zf@8
  int v17; // ecx@9
  int v18; // ecx@10
  int v19; // ebp@10
  int v20; // edi@10
  int v21; // eax@10
  int v22; // edx@12
  int v23; // ecx@16
  int v24; // eax@16
  unsigned int v25; // edx@16
  unsigned int v26; // edi@17
  int v27; // ebx@18
  __int16 v28; // ax@19
  int v29; // ecx@19
  int v30; // edx@19
  int v31; // eax@19
  int v32; // edx@19
  int v33; // ecx@24
  int v34; // eax@24
  unsigned int v35; // edx@24
  unsigned int v36; // ebx@25
  int v37; // ebp@26
  unsigned int v38; // edi@27
  int v39; // eax@27
  int v40; // ecx@32
  int v41; // eax@32
  unsigned int v42; // edx@32
  unsigned int v43; // ebp@33
  __int16 v44; // bx@35
  unsigned int v45; // edi@35
  int v46; // eax@35
  unsigned int v47; // edx@35
  signed int v48; // eax@35
  int v49; // edx@37
  int v50; // eax@37
  int v51; // ecx@42
  int v52; // [sp+1Ch] [bp-58h]@5
  unsigned int v53; // [sp+1Ch] [bp-58h]@10
  unsigned int v54; // [sp+20h] [bp-54h]@10
  int v55; // [sp+24h] [bp-50h]@5
  int v56; // [sp+24h] [bp-50h]@10
  int v57; // [sp+28h] [bp-4Ch]@6
  int v58; // [sp+28h] [bp-4Ch]@10
  unsigned int v59; // [sp+2Ch] [bp-48h]@5
  int v60; // [sp+2Ch] [bp-48h]@10
  int v61; // [sp+30h] [bp-44h]@6
  int v62; // [sp+30h] [bp-44h]@10
  int v63; // [sp+34h] [bp-40h]@5
  int v64; // [sp+34h] [bp-40h]@16
  int v65; // [sp+34h] [bp-40h]@24
  int v66; // [sp+34h] [bp-40h]@32
  void *v67; // [sp+38h] [bp-3Ch]@1
  int v68; // [sp+3Ch] [bp-38h]@5
  int v69; // [sp+3Ch] [bp-38h]@10
  int v70; // [sp+40h] [bp-34h]@2
  int v71; // [sp+44h] [bp-30h]@5
  int v72; // [sp+44h] [bp-30h]@16
  unsigned int v73; // [sp+44h] [bp-30h]@24
  int v74; // [sp+44h] [bp-30h]@32
  int v75; // [sp+48h] [bp-2Ch]@3
  unsigned int v76; // [sp+48h] [bp-2Ch]@16
  int v77; // [sp+48h] [bp-2Ch]@24
  int v78; // [sp+48h] [bp-2Ch]@34
  unsigned int v79; // [sp+4Ch] [bp-28h]@32
  int v80; // [sp+50h] [bp-24h]@1
  int v81; // [sp+54h] [bp-20h]@10
  int v82; // [sp+58h] [bp-1Ch]@10
  int v83; // [sp+5Ch] [bp-18h]@9
  int v84; // [sp+60h] [bp-14h]@9
  int v85; // [sp+64h] [bp-10h]@9
  unsigned int v86; // [sp+68h] [bp-Ch]@9
  unsigned int v87; // [sp+6Ch] [bp-8h]@9
  int v88; // [sp+70h] [bp-4h]@9
  signed int v89; // [sp+78h] [bp+4h]@2

  v2 = *(_DWORD *)(a2 + 4);
  v3 = this;
  v67 = this;
  v80 = *(_DWORD *)(a2 + 4);
  result = sub_10048480(this, v2);
  if ( result )
    return result;
  v70 = sub_100481B0(v3, v2);
  v5 = 16 << (*(_DWORD *)v2 & 7);
  v6 = (*(_DWORD *)v2 >> 3) & 7;
  v7 = 16 << v6;
  v89 = 16 << v6;
  if ( *(_BYTE *)(v2 + 6) != 2 )
  {
    v53 = 16 * *(_BYTE *)(v2 + 4);
    v54 = 16 * *(_BYTE *)(v2 + 5);
    v56 = 0;
    v58 = 0;
    v62 = 0;
    v18 = *(_DWORD *)(dword_1007CD9C + 320);
    v81 = v18 + 0x800000;
    v82 = v18 + 12582912;
    v69 = *(_BYTE *)(v2 + 7);
    sub_10008B60((int)((char *)v3 + 1968), 4 * v5 * v7);
    v19 = *((_DWORD *)v3 + 492);
    v20 = 0;
    v21 = v69;
    v60 = v19;
    while ( 1 )
    {
      if ( v5 <= 1 )
        return v70;
      v22 = *(&v81 + v21);
      if ( *(_BYTE *)(v80 + 6) )
      {
        if ( *(_BYTE *)(v80 + 6) != 1 )
        {
          if ( *(_BYTE *)(v80 + 6) != 4 || !v7 )
            goto LABEL_42;
          v23 = 0;
          v72 = 0;
          v76 = v7;
          v24 = v22 + 2 * (v56 + v53 + ((v58 + v54) << 11));
          v25 = v7;
          v64 = v24;
          do
          {
            v26 = 0;
            if ( v5 )
            {
              v27 = v24;
              do
              {
                v28 = *(_WORD *)v27;
                v27 += 2;
                v29 = (unsigned __int8)v28;
                v30 = HIBYTE(v28);
                v31 = v26++ ^ 1;
                v32 = v29 | ((v29 | ((v29 | (v30 << 8)) << 8)) << 8);
                v23 = v72;
                *(_DWORD *)(v19 + 4 * (v72 + v31)) = v32;
              }
              while ( v26 < v5 );
              v24 = v64;
              v25 = v76;
            }
            v24 += 4096;
            v23 += v5;
            --v25;
            v64 = v24;
            v72 = v23;
            v76 = v25;
          }
          while ( v25 );
          goto LABEL_41;
        }
        if ( v7 )
        {
          v33 = 0;
          v65 = 0;
          v73 = v7;
          v34 = v22 + 2 * (v56 + v53 + ((v58 + v54) << 11));
          v35 = v7;
          v77 = v34;
          do
          {
            v36 = 0;
            if ( v5 )
            {
              v37 = v34;
              do
              {
                v38 = *(_WORD *)v37;
                v37 += 2;
                v39 = v36++ ^ 1;
                *(_DWORD *)(v60 + 4 * (v65 + v39)) = 1114112 * (v38 & 0xF) | 285212672 * (v38 >> 12) | 17 * ((v38 >> 8) & 0xF) | 4352 * ((unsigned __int8)v38 >> 4);
              }
              while ( v36 < v5 );
              v33 = v65;
              v34 = v77;
              v35 = v73;
            }
            v34 += 4096;
            v33 += v5;
            --v35;
            v77 = v34;
            v65 = v33;
            v73 = v35;
          }
          while ( v35 );
          goto LABEL_40;
        }
      }
      else if ( v7 )
      {
        v40 = 0;
        v66 = 0;
        v79 = v7;
        v41 = v22 + 2 * (v56 + v53 + ((v58 + v54) << 11));
        v42 = v7;
        v74 = v41;
        do
        {
          v43 = 0;
          if ( v5 )
          {
            v78 = v41;
            do
            {
              v44 = *(_WORD *)v41;
              v45 = *(_WORD *)v41;
              v46 = 8 * (*(_WORD *)v41 & 0x1F);
              v47 = (((v45 >> 7) & 0xF8) + (((v45 >> 7) & 0xF8) >> 5)) | 8
                                                                       * (32 * ((v45 >> 2) & 0xF8) + ((v45 >> 2) & 0xE0)) | ((32 * v46 + (unsigned __int8)(v46 & 0xE0)) << 11);
              v48 = 0;
              if ( v44 < 0 )
                v48 = 255;
              v49 = (v48 << 24) | v47;
              v50 = v43++ ^ 1;
              *(_DWORD *)(v60 + 4 * (v66 + v50)) = v49;
              v41 = v78 + 2;
              v78 += 2;
            }
            while ( v43 < v5 );
            v40 = v66;
            v41 = v74;
            v42 = v79;
          }
          v41 += 4096;
          v40 += v5;
          --v42;
          v74 = v41;
          v66 = v40;
          v79 = v42;
        }
        while ( v42 );
LABEL_40:
        v19 = v60;
LABEL_41:
        v7 = v89;
        v20 = v62;
        goto LABEL_42;
      }
LABEL_42:
      v83 = 0;
      v86 = v5;
      v51 = *((_DWORD *)v67 + 2);
      v84 = 0;
      v87 = v7;
      v85 = 0;
      v88 = 1;
      (*(void (__stdcall **)(int, _DWORD, int, int *, int, int, _DWORD))(*(_DWORD *)v51 + 192))(
        v51,
        **(_DWORD **)v70,
        v20,
        &v83,
        v19,
        4 * v5,
        0);
      v53 >>= 1;
      ++v20;
      v54 >>= 1;
      v7 >>= 1;
      v56 += 2048 >> v20;
      v58 += 1024 >> v20;
      v21 = v69 ^ 1;
      v5 >>= 1;
      v62 = v20;
      v89 = v7;
      v69 ^= 1u;
      if ( v7 <= 1 )
        return v70;
    }
  }
  v75 = 16 * *(_BYTE *)(v2 + 4);
  v8 = 16 * *(_BYTE *)(v2 + 5);
  v9 = *(_DWORD *)(dword_1007CD9C + 320) + 12582912;
  if ( !*(_BYTE *)(v2 + 7) )
    v9 = *(_DWORD *)(dword_1007CD9C + 320) + 0x800000;
  v71 = v9;
  sub_10008B60((int)((char *)v67 + 1968), 16 * v5 * v7);
  v10 = *((_DWORD *)v67 + 492);
  v55 = 16 * v5;
  v11 = v8 << 11;
  v12 = v10 + 8 * v5;
  v52 = *((_DWORD *)v67 + 492);
  v63 = *((_DWORD *)v67 + 492);
  v68 = v10 + 8 * v5;
  v59 = v7;
  do
  {
    v57 = v10;
    v13 = 0;
    v61 = v12;
    do
    {
      v14 = *(_WORD *)(v71 + 2 * (v75 + v11 + (v13 ^ 1)));
      v15 = v14 >> 8;
      *(_DWORD *)v57 = (((*(_WORD *)(v71 + 2 * (v75 + v11 + (v13 ^ 1))) >> 12) & 8) != 0 ? 0xFF : 0) | (((((*(_WORD *)(v71 + 2 * (v75 + v11 + (v13 ^ 1))) >> 12) & 4) != 0 ? 0xFF : 0) | (((((*(_WORD *)(v71 + 2 * (v75 + v11 + (v13 ^ 1))) >> 12) & 2) != 0 ? 0xFF : 0) | ((((*(_WORD *)(v71 + 2 * (v75 + v11 + (v13 ^ 1))) >> 12) & 1) != 0 ? 0xFF : 0) << 8)) << 8)) << 8);
      *(_DWORD *)(v57 + 4) = ((v15 & 8) != 0 ? 0xFF : 0) | ((((v15 & 4) != 0 ? 0xFF : 0) | ((((v15 & 2) != 0 ? 0xFF : 0) | (((v15 & 1) != 0 ? 0xFF : 0) << 8)) << 8)) << 8);
      *(_DWORD *)v61 = (((v14 >> 4) & 8) != 0 ? 0xFF : 0) | (((((v14 >> 4) & 4) != 0 ? 0xFF : 0) | (((((v14 >> 4) & 2) != 0 ? 0xFF : 0) | ((((v14 >> 4) & 1) != 0 ? 0xFF : 0) << 8)) << 8)) << 8);
      v57 += 8;
      ++v13;
      *(_DWORD *)(v61 + 4) = ((v14 & 8) != 0 ? 0xFF : 0) | ((((v14 & 4) != 0 ? 0xFF : 0) | ((((v14 & 2) != 0 ? 0xFF : 0) | (((v14 & 1) != 0 ? 0xFF : 0) << 8)) << 8)) << 8);
      v61 += 8;
    }
    while ( v13 < v5 );
    v11 += 2048;
    v12 = v55 + v68;
    v10 = v55 + v63;
    v16 = v59-- == 1;
    v68 += v55;
    v63 += v55;
  }
  while ( !v16 );
  v83 = 0;
  v87 = 2 * v89;
  v86 = 2 * v5;
  v17 = *((_DWORD *)v67 + 2);
  v84 = 0;
  v85 = 0;
  v88 = 1;
  (*(void (__stdcall **)(int, _DWORD, _DWORD, int *, int, int, _DWORD))(*(_DWORD *)v17 + 192))(
    v17,
    **(_DWORD **)v70,
    0,
    &v83,
    v52,
    8 * v5,
    0);
  return v70;
}
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (100480B0) --------------------------------------------------------
int __thiscall sub_100480B0(void *this, int a2)
{
  int v2; // ebp@1
  int v3; // esi@1
  int result; // eax@1
  signed int v5; // esi@2
  int v6; // ebx@2
  void *v7; // edi@3
  void *v8; // eax@3
  bool v9; // zf@13
  void *v10; // esi@15
  signed int v11; // [sp+10h] [bp-10h]@1
  signed int v12; // [sp+14h] [bp-Ch]@1
  signed int v13; // [sp+18h] [bp-8h]@2
  int v14; // [sp+1Ch] [bp-4h]@1

  v2 = a2;
  v12 = 1 << (*(_DWORD *)(a2 + 8) & 7);
  v11 = 1 << ((*(_DWORD *)(a2 + 8) >> 3) & 7);
  v3 = *(_BYTE *)(a2 + 12) + ((*(_BYTE *)(a2 + 13) + (*(_BYTE *)(a2 + 15) << 6)) << 7);
  result = (int)((char *)this + 8 * v3 + 2548);
  v14 = (int)((char *)this + 8 * v3 + 2548);
  do
  {
    v5 = v12;
    v6 = result;
    v13 = v12;
    do
    {
      v7 = *(void **)v6;
      v8 = (void *)**(_DWORD **)v6;
      if ( v8 == *(void **)v6 )
        goto LABEL_10;
      do
      {
        if ( *((_DWORD *)v8 + 2) != v2 )
          goto LABEL_7;
        if ( (int *)((char *)v8 + 8) == &a2 )
        {
          v7 = v8;
LABEL_7:
          v8 = *(void **)v8;
          continue;
        }
        v10 = *(void **)v8;
        **((_DWORD **)v8 + 1) = *(_DWORD *)v8;
        *(_DWORD *)(*(_DWORD *)v8 + 4) = *((_DWORD *)v8 + 1);
        --*(_DWORD *)(v6 + 4);
        sub_1000F409(v8);
        v8 = v10;
      }
      while ( v8 != *(void **)v6 );
      v5 = v13;
LABEL_10:
      if ( v7 != *(void **)v6 )
      {
        **((_DWORD **)v7 + 1) = *(_DWORD *)v7;
        *(_DWORD *)(*(_DWORD *)v7 + 4) = *((_DWORD *)v7 + 1);
        --*(_DWORD *)(v6 + 4);
        sub_1000F409(v7);
      }
      v6 += 8;
      --v5;
      v13 = v5;
    }
    while ( v5 );
    result = v14 + 1024;
    v9 = v11-- == 1;
    v14 += 1024;
  }
  while ( !v9 );
  return result;
}

//----- (100481B0) --------------------------------------------------------
int __thiscall sub_100481B0(void *this, int a2)
{
  int v2; // edi@1
  bool v3; // zf@1
  int v4; // esi@1
  int v5; // ST10_4@2
  int v6; // ecx@2
  int v7; // ebx@2
  int v8; // eax@2
  int v9; // ecx@2
  int v10; // eax@2
  int v11; // eax@3
  int v12; // ebx@3
  int v13; // eax@3
  char v14; // cl@3
  __int64 v15; // rax@3
  __int128 v16; // xmm0@6
  LPVOID v17; // esi@6
  int v18; // eax@6
  int v19; // edi@9
  int v20; // edx@9
  char v21; // cl@9
  int v22; // esi@9
  signed int v23; // eax@9
  int v24; // ecx@9
  int v25; // eax@9
  int v26; // ecx@9
  unsigned int v27; // ebx@10
  int v28; // esi@10
  int v29; // edi@11
  LPVOID v30; // edx@11
  __int128 v32; // [sp+10h] [bp-94h]@6
  __int64 v33; // [sp+20h] [bp-84h]@6
  __int128 v34; // [sp+28h] [bp-7Ch]@6
  __int128 v35; // [sp+38h] [bp-6Ch]@6
  __int64 v36; // [sp+48h] [bp-5Ch]@6
  int v37; // [sp+50h] [bp-54h]@3
  void *v38; // [sp+54h] [bp-50h]@1
  __int128 v39; // [sp+58h] [bp-4Ch]@3
  __int128 v40; // [sp+68h] [bp-3Ch]@3
  __int64 v41; // [sp+78h] [bp-2Ch]@3
  unsigned int v42; // [sp+84h] [bp-20h]@3
  int v43; // [sp+88h] [bp-1Ch]@2
  int v44; // [sp+8Ch] [bp-18h]@2
  unsigned int v45; // [sp+90h] [bp-14h]@3
  int v46; // [sp+A0h] [bp-4h]@6
  unsigned int v47; // [sp+ACh] [bp+8h]@9

  v2 = (int)this;
  v3 = *((_DWORD *)this + 2 * *(_DWORD *)a2 + 510) == 0;
  v4 = (int)((char *)this + 8 * *(_DWORD *)a2);
  v38 = this;
  if ( v3 )
  {
    v11 = (int)sub_1000F0A6(0x2Cu);
    v12 = v11;
    v42 = v11;
    v45 = 16;
    v44 = v11;
    *(_DWORD *)(v11 + 40) = 0;
    *(_DWORD *)v11 = 0;
    *(_DWORD *)(v11 + 40) = *(_DWORD *)(v2 + 2032);
    *(_DWORD *)(v2 + 2032) = v11;
    v13 = *(_DWORD *)a2 >> 3;
    v45 <<= *(_DWORD *)a2 & 7;
    v14 = v13 & 7;
    v43 = v12;
    LODWORD(v15) = v45;
    HIDWORD(v15) = 16 << v14;
    v3 = *(_BYTE *)(a2 + 6) == 2;
    DWORD3(v39) = 1;
    *(_QWORD *)&v40 = 4294967383i64;
    *((_QWORD *)&v40 + 1) = 0i64;
    v41 = 8i64;
    v37 = 0;
    if ( v3 )
    {
      DWORD2(v39) = 1;
      LODWORD(v39) = 2 * v45;
      DWORD1(v39) = 2 * HIDWORD(v15);
    }
    else
    {
      *(_QWORD *)&v39 = v15;
      DWORD2(v39) = 0;
    }
    v34 = v39;
    v16 = v40;
    *(_QWORD *)((char *)&v40 + 4) = 17179869271i64;
    v35 = v16;
    DWORD3(v40) = 0;
    _mm_storel_epi64((__m128i *)&v36, _mm_loadl_epi64((const __m128i *)&v41));
    LODWORD(v41) = -1;
    v32 = *(__int128 *)((char *)&v40 + 4);
    _mm_storel_epi64((__m128i *)&v33, _mm_loadl_epi64((const __m128i *)((char *)&v41 + 4)));
    v17 = sub_1000F0A6(0x10u);
    v42 = (unsigned int)v17;
    v46 = 0;
    *(_DWORD *)v17 = 0;
    *((_DWORD *)v17 + 1) = 0;
    *((_DWORD *)v17 + 2) = 0;
    *((_DWORD *)v17 + 3) = 0;
    v18 = (*(int (__stdcall **)(_DWORD, __int128 *, _DWORD, LPVOID))(**(_DWORD **)(v2 + 4) + 20))(
            *(_DWORD *)(v2 + 4),
            &v34,
            0,
            v17);
    sub_100410C0(v2, v12, v18, L"Failed create texture");
    if ( *(_DWORD *)v17 )
      (*(void (__stdcall **)(_DWORD, _DWORD, __int128 *, int))(**(_DWORD **)(v2 + 4) + 28))(
        *(_DWORD *)(v2 + 4),
        *(_DWORD *)v17,
        &v32,
        (char *)v17 + 4);
    v46 = -1;
    *(_DWORD *)v12 = v17;
  }
  else
  {
    v5 = **(_DWORD **)(v4 + 2036);
    v6 = *(_DWORD *)(v5 + 4);
    v8 = *(_DWORD *)v5;
    v44 = *(_DWORD *)(v5 + 8);
    v7 = v44;
    *(_DWORD *)v6 = v8;
    v9 = *(_DWORD *)v5;
    v10 = *(_DWORD *)(v5 + 4);
    v43 = v7;
    *(_DWORD *)(v9 + 4) = v10;
    --*(_DWORD *)(v4 + 2040);
    sub_1000F409((LPVOID)v5);
    sub_100480B0((void *)v2, v7);
  }
  v19 = *(_BYTE *)(a2 + 4);
  v20 = *(_BYTE *)(a2 + 5);
  v21 = (*(_DWORD *)a2 >> 3) & 7;
  v22 = *(_BYTE *)(a2 + 7) << 6;
  v45 = 1 << (*(_DWORD *)a2 & 7);
  v23 = 1 << v21;
  v24 = a2;
  v42 = v23;
  v25 = v44;
  v47 = 0;
  *(_BYTE *)(v44 + 4) = 1;
  *(_OWORD *)(v25 + 8) = *(_OWORD *)v24;
  *(_OWORD *)(v25 + 24) = *(_OWORD *)(v24 + 16);
  v26 = (int)((char *)v38 + 8 * (v19 + ((v20 + v22) << 7)) + 2552);
  v44 = (int)((char *)v38 + 8 * (v19 + ((v20 + v22) << 7)) + 2552);
  do
  {
    v27 = 0;
    v28 = v26;
    do
    {
      v29 = *(_DWORD *)(v28 - 4);
      v30 = sub_10008EF0(*(void **)(v28 - 4), *(void **)(v29 + 4), (int)&v43);
      if ( (unsigned int)(357913940 - *(_DWORD *)v28) < 1 )
        sub_1000DA74((int)"list<T> too long");
      ++v27;
      ++*(_DWORD *)v28;
      v28 += 8;
      *(_DWORD *)(v29 + 4) = v30;
      **((_DWORD **)v30 + 1) = v30;
    }
    while ( v27 < v45 );
    v26 = v44 + 1024;
    ++v47;
    v44 += 1024;
  }
  while ( v47 < v42 );
  return v43;
}
// 1006DD2C: using guessed type wchar_t aFailedCreateTe[22];

//----- (10048480) --------------------------------------------------------
int __thiscall sub_10048480(void *this, int a2)
{
  int v2; // ecx@1
  int v3; // eax@1
  int v4; // edx@2
  int result; // eax@6

  v2 = *((_DWORD *)this + 2 * (*(_BYTE *)(a2 + 4) + ((*(_BYTE *)(a2 + 5) + (*(_BYTE *)(a2 + 7) << 6)) << 7)) + 637);
  v3 = *(_DWORD *)v2;
  if ( *(_DWORD *)v2 == v2 )
  {
LABEL_6:
    result = 0;
  }
  else
  {
    while ( 1 )
    {
      v4 = *(_DWORD *)(v3 + 8);
      if ( *(_BYTE *)(v4 + 4) )
      {
        if ( *(_DWORD *)(v4 + 8) == *(_DWORD *)a2 && *(_BYTE *)(v4 + 14) == *(_BYTE *)(a2 + 6) )
          break;
      }
      v3 = *(_DWORD *)v3;
      if ( v3 == v2 )
        goto LABEL_6;
    }
    result = *(_DWORD *)(v3 + 8);
  }
  return result;
}

//----- (100484E0) --------------------------------------------------------
int __stdcall sub_100484E0(unsigned int a1, int a2)
{
  int v2; // ebp@1
  int v3; // esi@1
  int result; // eax@1
  unsigned int v5; // ebx@2
  int v6; // edi@2
  int v7; // esi@3
  int v8; // eax@4
  int v9; // ebx@5
  int v10; // ebp@5
  LPVOID v11; // edx@5
  int v12; // eax@5
  void *v13; // ecx@9
  void *v14; // esi@10
  unsigned int v15; // [sp+10h] [bp-18h]@2
  unsigned int v16; // [sp+14h] [bp-14h]@1
  int v17; // [sp+18h] [bp-10h]@1
  int v18; // [sp+1Ch] [bp-Ch]@1
  signed int v19; // [sp+20h] [bp-8h]@1
  signed int v20; // [sp+24h] [bp-4h]@1

  v2 = dword_1007CDB4;
  v18 = dword_1007CDB4;
  v16 = 0;
  v19 = 1 << ((a1 >> 16) & 7);
  v3 = (a1 & 0x7F) + ((((a1 >> 8) & 0x3F) + (a1 >> 31 << 6)) << 7);
  v20 = 1 << ((a1 >> 19) & 7);
  result = dword_1007CDB4 + 2548 + 8 * v3;
  v17 = dword_1007CDB4 + 2548 + 8 * v3;
  do
  {
    v5 = 0;
    v6 = result;
    v15 = 0;
    do
    {
      v7 = **(_DWORD **)v6;
      if ( v7 != *(_DWORD *)v6 )
      {
        do
        {
          v8 = *(_DWORD *)(v7 + 8);
          if ( *(_BYTE *)(v8 + 4) )
          {
            a1 = *(_DWORD *)(v7 + 8);
            v9 = v2 + 8 * *(_DWORD *)(v8 + 8);
            v10 = *(_DWORD *)(v9 + 2036);
            v11 = sub_10008EF0(*(void **)(v9 + 2036), *(void **)(v10 + 4), (int)&a1);
            v12 = *(_DWORD *)(v9 + 2040);
            if ( (unsigned int)(357913940 - v12) < 1 )
              sub_1000DA74((int)"list<T> too long");
            *(_DWORD *)(v9 + 2040) = v12 + 1;
            *(_DWORD *)(v10 + 4) = v11;
            v2 = v18;
            **((_DWORD **)v11 + 1) = v11;
            *(_BYTE *)(a1 + 4) = 0;
          }
          v7 = *(_DWORD *)v7;
        }
        while ( v7 != *(_DWORD *)v6 );
        v5 = v15;
      }
      v13 = (void *)**(_DWORD **)v6;
      **(_DWORD **)v6 = *(_DWORD *)v6;
      *(_DWORD *)(*(_DWORD *)v6 + 4) = *(_DWORD *)v6;
      *(_DWORD *)(v6 + 4) = 0;
      if ( v13 != *(void **)v6 )
      {
        do
        {
          v14 = *(void **)v13;
          sub_1000F409(v13);
          v13 = v14;
        }
        while ( v14 != *(void **)v6 );
      }
      ++v5;
      v6 += 8;
      v15 = v5;
    }
    while ( v5 < v19 );
    result = v17 + 1024;
    ++v16;
    v17 += 1024;
  }
  while ( v16 < v20 );
  return result;
}
// 1007CDB4: using guessed type int dword_1007CDB4;

//----- (100486A0) --------------------------------------------------------
int __userpurge sub_100486A0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3)
{
  int v3; // esi@1
  int v4; // eax@1
  int v5; // eax@4
  int v6; // eax@5
  int v7; // eax@8
  int result; // eax@11

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 1988);
  ++*(_DWORD *)(v3 + 1908);
  *(_DWORD *)(a1 + 1904) = v4 - 1;
  if ( *(_BYTE *)a3 & 2 )
    *(_DWORD *)(a1 + 1896) = *(_DWORD *)(a1 + 1892);
  if ( *(_DWORD *)a3 & 0x200 )
  {
    v5 = *(_DWORD *)(a1 + 1964);
    if ( *(_DWORD *)(v5 + 8) )
    {
      a1 = *(_DWORD *)(v5 + 4);
      v6 = *(_DWORD *)v5;
      if ( a1 )
      {
        a1 *= 9;
        v6 = v6 + 8 * a1 - 72;
      }
    }
    else
    {
      v6 = 0;
    }
    *(_DWORD *)(v6 + 48) += 3;
    v7 = sub_10008A90(v3 + 1996, a2, a3, a1);
    *(_DWORD *)v7 = *(_DWORD *)(v3 + 1896);
    if ( *(_BYTE *)a3 & 1 )
    {
      *(_DWORD *)(v7 + 4) = *(_DWORD *)(v3 + 1900);
      *(_DWORD *)(v7 + 8) = *(_DWORD *)(v3 + 1904);
    }
    else
    {
      *(_DWORD *)(v7 + 4) = *(_DWORD *)(v3 + 1904);
      *(_DWORD *)(v7 + 8) = *(_DWORD *)(v3 + 1900);
    }
  }
  *(_DWORD *)(v3 + 1892) = *(_DWORD *)(v3 + 1896);
  *(_DWORD *)(v3 + 1896) = *(_DWORD *)(v3 + 1900);
  result = *(_DWORD *)(v3 + 1904);
  *(_DWORD *)(v3 + 1900) = result;
  return result;
}

//----- (10048770) --------------------------------------------------------
int __usercall sub_10048770@<eax>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // esi@1
  int v3; // ebx@1
  unsigned int v4; // ecx@1
  int v5; // eax@1
  unsigned int v6; // eax@4
  int v7; // eax@8
  int v8; // edi@8
  int v9; // edx@8
  int v10; // ecx@10
  int v11; // eax@10
  int v12; // ecx@16
  int v13; // eax@16
  int result; // eax@24

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 1964);
  v4 = *(_DWORD *)(v3 + 4);
  v5 = *(_DWORD *)(v3 + 8);
  if ( v4 == v5 )
  {
    if ( !v5 )
      *(_DWORD *)(v3 + 8) = 1;
    v6 = *(_DWORD *)(v3 + 8);
    if ( v4 >= v6 )
    {
      do
        v6 *= 2;
      while ( v4 >= v6 );
      *(_DWORD *)(v3 + 8) = v6;
    }
    *(_DWORD *)v3 = sub_1002D6F7(v3, a2, *(_DWORD *)v3, 72 * *(_DWORD *)(v3 + 8), 0x10u);
  }
  v7 = *(_DWORD *)(v3 + 4);
  v8 = *(_DWORD *)v3;
  v9 = 9 * v7;
  *(_DWORD *)(v3 + 4) = v7 + 1;
  *(_DWORD *)(v8 + 8 * v9 + 68) = *(_DWORD *)(v2 + 1728);
  *(_DWORD *)(v8 + 8 * v9 + 4) = v2 + 32 * (*(_DWORD *)(v2 + 16124720) + *(_DWORD *)(v2 + 16124716)) + 16124724;
  *(_DWORD *)(v8 + 8 * v9 + 8) = v2 + 84 * (*(_DWORD *)(v2 + 10619600) + *(_DWORD *)(v2 + 10619604)) + 10619608;
  *(_BYTE *)(v8 + 8 * v9) = byte_1007CDB1;
  if ( *(_DWORD *)(v2 + 2012) )
  {
    if ( *(_DWORD *)(v2 + 2016) )
    {
      v10 = *(_DWORD *)(v2 + 2012);
      v11 = *(_DWORD *)(v2 + 2008);
      if ( v10 )
        v11 = (v10 << 6) + v11 - 64;
    }
    else
    {
      v11 = 0;
    }
  }
  else
  {
    v11 = v2 + 18221920;
  }
  *(_DWORD *)(v8 + 8 * v9 + 12) = v11;
  if ( *(_DWORD *)(v2 + 2024) )
  {
    if ( *(_DWORD *)(v2 + 2028) )
    {
      v12 = *(_DWORD *)(v2 + 2024);
      v13 = *(_DWORD *)(v2 + 2020);
      if ( v12 )
        v13 = (v12 << 6) + v13 - 64;
    }
    else
    {
      v13 = 0;
    }
  }
  else
  {
    v13 = v2 + 18221984;
  }
  *(_DWORD *)(v8 + 8 * v9 + 16) = v13;
  *(_DWORD *)(v8 + 8 * v9 + 20) = v2 + 160 * *(_DWORD *)(v2 + 133632) + 133648;
  *(_DWORD *)(v8 + 8 * v9 + 28) = *(_DWORD *)(v2
                                            + 24 * (*(_DWORD *)(v2 + 18222048) + *(_DWORD *)(v2 + 18222052))
                                            + 18222060);
  *(_DWORD *)(v8 + 8 * v9 + 32) = *(_DWORD *)(v2
                                            + 24 * (*(_DWORD *)(v2 + 18222048) + *(_DWORD *)(v2 + 18222052))
                                            + 18222064);
  *(_DWORD *)(v8 + 8 * v9 + 36) = *(_DWORD *)(v2
                                            + 24 * (*(_DWORD *)(v2 + 18222048) + *(_DWORD *)(v2 + 18222052))
                                            + 18222068);
  *(_DWORD *)(v8 + 8 * v9 + 40) = *(_DWORD *)(v2
                                            + 24 * (*(_DWORD *)(v2 + 18222052) + *(_DWORD *)(v2 + 18222048) + 759253));
  *(_BYTE *)(v8 + 8 * v9 + 24) = *(_BYTE *)(v2
                                          + 24 * (*(_DWORD *)(v2 + 18222048) + *(_DWORD *)(v2 + 18222052))
                                          + 18222056);
  *(_BYTE *)(v8 + 8 * v9 + 25) = *(_BYTE *)(v2
                                          + 24 * (*(_DWORD *)(v2 + 18222048) + *(_DWORD *)(v2 + 18222052))
                                          + 18222057);
  *(_BYTE *)(v8 + 8 * v9 + 26) = *(_BYTE *)(v2
                                          + 24 * (*(_DWORD *)(v2 + 18222048) + *(_DWORD *)(v2 + 18222052))
                                          + 18222058);
  *(_BYTE *)(v8 + 8 * v9 + 27) = *(_BYTE *)(v2
                                          + 24 * (*(_DWORD *)(v2 + 18222048) + *(_DWORD *)(v2 + 18222052))
                                          + 18222059);
  *(_BYTE *)(v8 + 8 * v9 + 56) = *(_BYTE *)(v2 + 1912) || *(_BYTE *)(v2 + 1913);
  *(_BYTE *)(v8 + 8 * v9 + 64) = *(_BYTE *)(v2 + 1914);
  *(float *)(v8 + 8 * v9 + 60) = *(float *)(v2 + 133640) * *(float *)(v2 + 133636);
  result = *(_DWORD *)(v2 + 2000);
  *(_DWORD *)(v8 + 8 * v9 + 44) = result;
  *(_DWORD *)(v8 + 8 * v9 + 48) = 0;
  *(_DWORD *)(v8 + 8 * v9 + 52) = 0;
  *(_DWORD *)(v2 + 1980) = result;
  *(_DWORD *)(v2 + 1908) = 0;
  return result;
}
// 1007CDB1: using guessed type char byte_1007CDB1;

//----- (100489E0) --------------------------------------------------------
int __usercall sub_100489E0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // ebp@0
  int v4; // esi@1

  v4 = a1;
  sub_1000F684(v3, a1 + 2548, 8, 0x4000, (int)&loc_10002970);
  sub_1000F684(v3, v4 + 2036, 8, 64, (int)&loc_10002970);
  sub_1000F684(v3, v4 + 2008, 12, 2, (int)sub_10008AE0);
  sub_1002D4A8(*(_DWORD *)(v4 + 1996));
  *(_DWORD *)(v4 + 1996) = 0;
  sub_1002D4A8(*(_DWORD *)(v4 + 1984));
  *(_DWORD *)(v4 + 1984) = 0;
  sub_10008C30(v4 + 1968, a2, a3);
  sub_1002D4A8(*(_DWORD *)(v4 + 1952));
  *(_DWORD *)(v4 + 1952) = 0;
  sub_1002D4A8(*(_DWORD *)(v4 + 1940));
  *(_DWORD *)(v4 + 1940) = 0;
  sub_1002D4A8(*(_DWORD *)(v4 + 1928));
  *(_DWORD *)(v4 + 1928) = 0;
  return sub_100026E0(v4, a2);
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);

//----- (10048AD0) --------------------------------------------------------
void *__thiscall sub_10048AD0(void *this)
{
  int v1; // ebp@0
  void *v2; // esi@1
  unsigned int v3; // eax@1
  int v4; // edx@2
  int v5; // ecx@2

  v2 = this;
  sub_10042AF0(this);
  *((_DWORD *)v2 + 128) = *(_DWORD *)(dword_1007CD9C + 320);
  *((_DWORD *)v2 + 482) = 0;
  *((_DWORD *)v2 + 483) = 0;
  *((_DWORD *)v2 + 484) = 0;
  *((_DWORD *)v2 + 485) = 0;
  *((_DWORD *)v2 + 486) = 0;
  *((_DWORD *)v2 + 487) = 0;
  *((_DWORD *)v2 + 488) = 0;
  *((_DWORD *)v2 + 489) = 0;
  *((_DWORD *)v2 + 490) = 0;
  *((_DWORD *)v2 + 492) = 0;
  *((_DWORD *)v2 + 493) = 0;
  *((_DWORD *)v2 + 494) = 0;
  *((_DWORD *)v2 + 496) = 0;
  *((_DWORD *)v2 + 497) = 0;
  *((_DWORD *)v2 + 498) = 0;
  *((_DWORD *)v2 + 499) = 0;
  *((_DWORD *)v2 + 500) = 0;
  *((_DWORD *)v2 + 501) = 0;
  sub_1000F76B(v1, (int)((char *)v2 + 2008), 12, 2, (int)sub_10008C10, (int)sub_10008AE0);
  sub_1000F76B(v1, (int)((char *)v2 + 2036), 8, 64, (int)sub_10008900, (int)&loc_10002970);
  sub_1000F76B(v1, (int)((char *)v2 + 2548), 8, 0x4000, (int)sub_10008900, (int)&loc_10002970);
  *((_DWORD *)v2 + 508) = 0;
  *((_BYTE *)v2 + 1709) = 0;
  *((_DWORD *)v2 + 417) = 0;
  *((_DWORD *)v2 + 418) = 0;
  sub_10028330((char *)v2 + 516, 0, 0x480u);
  memset32((char *)v2 + 18315024, (int)sub_10045AF0, 0x1000u);
  v3 = 0;
  do
  {
    *((_DWORD *)v2 + dword_1006CD20[v3] + 4578756) = *(int (__stdcall **)(int))((char *)&off_1006CD24 + v3 * 4);
    *((_DWORD *)v2 + dword_1006CD28[v3] + 4578756) = *(int (__stdcall **)(int))((char *)&off_1006CD2C + v3 * 4);
    *((_DWORD *)v2 + dword_1006CD30[v3] + 4578756) = *(int (__stdcall **)(int))((char *)&off_1006CD34 + v3 * 4);
    *((_DWORD *)v2 + dword_1006CD38[v3] + 4578756) = *(int (__stdcall **)(int))((char *)&off_1006CD3C + v3 * 4);
    *((_DWORD *)v2 + dword_1006CD40[v3] + 4578756) = *(int (__stdcall **)(int))((char *)&off_1006CD44 + v3 * 4);
    v4 = dword_1006CD48[v3];
    v5 = *(int *)((char *)&off_1006CD4C + v3 * 4);
    v3 += 12;
    *((_DWORD *)v2 + v4 + 4578756) = v5;
  }
  while ( v3 < 156 );
  return v2;
}
// 10008900: using guessed type int sub_10008900();
// 10008C10: using guessed type int sub_10008C10();
// 10045AF0: using guessed type int __stdcall sub_10045AF0(int);
// 1006CD20: using guessed type int dword_1006CD20[];
// 1006CD24: using guessed type int (__stdcall *off_1006CD24)(int);
// 1006CD28: using guessed type int dword_1006CD28[];
// 1006CD2C: using guessed type int (__stdcall *off_1006CD2C)(int);
// 1006CD30: using guessed type int dword_1006CD30[];
// 1006CD34: using guessed type int (__stdcall *off_1006CD34)(int);
// 1006CD38: using guessed type int dword_1006CD38[];
// 1006CD3C: using guessed type int (__stdcall *off_1006CD3C)(int);
// 1006CD40: using guessed type int dword_1006CD40[];
// 1006CD44: using guessed type int (__stdcall *off_1006CD44)(int);
// 1006CD48: using guessed type int dword_1006CD48[];
// 1006CD4C: using guessed type int (__stdcall *off_1006CD4C)(int);
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (10048D00) --------------------------------------------------------
unsigned int __usercall sub_10048D00@<eax>(int a1@<ebx>, int a2@<edi>)
{
  int v2; // ecx@1
  int v3; // eax@1

  v2 = dword_1007CDB8 + 1;
  v3 = *(_DWORD *)dword_1007CDB4;
  if ( dword_1007CDB8 == 30 )
    v2 = 0;
  dword_1007CDB8 = v2;
  (*(void (__stdcall **)(int, int, _DWORD))(*(_DWORD *)v3 + 32))(v3, dword_10239454, 0);
  return sub_10040330(a1, a2);
}
// 1007CDB4: using guessed type int dword_1007CDB4;
// 1007CDB8: using guessed type int dword_1007CDB8;
// 10239454: using guessed type int dword_10239454;

//----- (10048D60) --------------------------------------------------------
void __usercall sub_10048D60(int a1@<ebx>, int a2@<edi>)
{
  int v2; // esi@1
  void *v3; // ecx@2
  int v4; // ecx@4
  int v5; // esi@6

  v2 = dword_1007CDB4;
  if ( dword_1007CDB4 )
  {
    v3 = *(void **)(dword_1007CDB4 + 1668);
    if ( v3 )
      sub_10008A00(v3, *(_DWORD *)(dword_1007CDB4 + 1668));
    v4 = *(_DWORD *)(v2 + 1672);
    *(_DWORD *)(v2 + 1668) = 0;
    if ( v4 )
      sub_10008A00((LPVOID)v4, v4);
    *(_DWORD *)(v2 + 1672) = 0;
    sub_10041F90(v2);
    v5 = dword_1007CDB4;
    if ( dword_1007CDB4 )
    {
      sub_100489E0(dword_1007CDB4, a1, a2);
      sub_1002D4A8(v5);
    }
    dword_1007CDB4 = 0;
  }
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);
// 1007CDB4: using guessed type int dword_1007CDB4;

//----- (10048DD0) --------------------------------------------------------
char __usercall sub_10048DD0@<al>(int a1@<ebx>, int a2@<edi>)
{
  char result; // al@1
  int v3; // eax@2
  void *v4; // eax@3
  int v5; // [sp+0h] [bp-10h]@2

  result = sub_1003F980(1, a2);
  if ( result )
  {
    v3 = sub_1002D4C7(a1, a2, 0x117B710u, 0x10u);
    v5 = v3;
    if ( v3 )
      v4 = sub_10048AD0((void *)v3);
    else
      v4 = 0;
    dword_1007CDB4 = (int)v4;
    result = sub_10042F70(v5);
  }
  return result;
}
// 10042F70: using guessed type int __cdecl sub_10042F70(_DWORD);
// 1007CDB4: using guessed type int dword_1007CDB4;

//----- (10048E50) --------------------------------------------------------
void sub_10048E50()
{
  int v0; // ecx@1
  char v1; // al@7

  v0 = dword_1007CD9C;
  if ( dword_1007CD9C )
  {
    if ( *(_BYTE *)(dword_1007CD9C + 33) && *(_BYTE *)(dword_1007CD9C + 276) )
    {
      sub_10042EC0();
      v0 = dword_1007CD9C;
    }
    if ( *(_BYTE *)(v0 + 139) )
      byte_1007CDB3 ^= 1u;
    v1 = byte_1007CDB2;
    if ( *(_BYTE *)(v0 + 141) )
      v1 = 1;
    byte_1007CDB2 = v1;
  }
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDB2: using guessed type char byte_1007CDB2;
// 1007CDB3: using guessed type char byte_1007CDB3;

//----- (10048EA0) --------------------------------------------------------
int __thiscall sub_10048EA0(unsigned int this)
{
  return sub_100484E0(this, this);
}

//----- (10048EB0) --------------------------------------------------------
int __fastcall sub_10048EB0(int a1, int a2)
{
  return sub_100087E0(a1, a2);
}

//----- (10048EC0) --------------------------------------------------------
signed int __thiscall sub_10048EC0(int this)
{
  return sub_10008870(this);
}

//----- (10048ED0) --------------------------------------------------------
int sub_10048ED0()
{
  int result; // eax@2

  if ( byte_1007CDB0 )
  {
    ShowCursor(1);
    result = dword_1007CE10;
    byte_1007CDB0 = 0;
    if ( *(_DWORD *)dword_1007CE10 )
      result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)dword_1007CE10 + 40))(
                 *(_DWORD *)dword_1007CE10,
                 0,
                 0);
  }
  else
  {
    ShowCursor(0);
    result = dword_1007CE10;
    byte_1007CDB0 = 1;
    if ( *(_DWORD *)dword_1007CE10 )
      result = (*(int (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)dword_1007CE10 + 40))(
                 *(_DWORD *)dword_1007CE10,
                 1,
                 0);
  }
  return result;
}
// 1007CDB0: using guessed type char byte_1007CDB0;
// 1007CE10: using guessed type int dword_1007CE10;

//----- (10048F80) --------------------------------------------------------
char __usercall sub_10048F80@<al>(int a1@<eax>, int *a2@<edi>)
{
  int v2; // ebp@0
  int v3; // esi@1
  const unsigned __int16 *v4; // eax@2
  int v5; // ecx@2
  int v6; // ecx@2
  int v7; // ecx@2
  int v8; // eax@3
  char result; // al@4
  int v10; // [sp+4h] [bp-78h]@0
  int v11; // [sp+8h] [bp-74h]@0
  char v12[28]; // [sp+10h] [bp-6Ch]@2
  __int64 v13; // [sp+2Ch] [bp-50h]@2
  __int128 v14; // [sp+48h] [bp-34h]@2
  int v15; // [sp+5Ch] [bp-20h]@2
  int v16; // [sp+60h] [bp-1Ch]@2
  int v17; // [sp+78h] [bp-4h]@2

  v3 = dword_1007CE10;
  if ( sub_10042610(a1, dword_1007CE10, v2, v10, v11) )
  {
    LOBYTE(v4) = sub_100490B0(v3);
    sub_1004E3C0(v4, v3, 0, a2, v3);
    sub_10028330(&v14, 0, 0x34u);
    v5 = *(_DWORD *)(v3 + 4);
    v14 = xmmword_1006EE40;
    v17 = 2139095039;
    v15 = 16;
    v16 = 1;
    (*(void (__stdcall **)(int, __int128 *, int))(*(_DWORD *)v5 + 92))(v5, &v14, v3 + 66176);
    v6 = *(_DWORD *)(v3 + 4);
    *(_OWORD *)&v12[12] = 0i64;
    _mm_storel_epi64((__m128i *)&v13, 0i64);
    *(_DWORD *)&v12[12] = 272;
    *(_QWORD *)&v12[16] = 0x400000000i64;
    (*(void (__stdcall **)(int, char *, _DWORD, int))(*(_DWORD *)v6 + 12))(v6, &v12[12], 0, v3 + 372);
    v7 = *(_DWORD *)(v3 + 4);
    *(_OWORD *)&v12[12] = 0i64;
    _mm_storel_epi64((__m128i *)&v13, 0i64);
    *(_DWORD *)&v12[12] = 1168;
    *(_QWORD *)&v12[16] = 0x400000000i64;
    (*(void (__stdcall **)(int, char *, _DWORD, int))(*(_DWORD *)v7 + 12))(v7, &v12[12], 0, v3 + 408);
    if ( *(_DWORD *)(v3 + 312) != 5 )
    {
      v8 = *(_DWORD *)(v3 + 8);
      *(_DWORD *)(v3 + 312) = 5;
      (*(void (__stdcall **)(int, signed int))(*(_DWORD *)v8 + 96))(v8, 5);
    }
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1006EE40: using guessed type __int128 xmmword_1006EE40;
// 1007CE10: using guessed type int dword_1007CE10;

//----- (100490B0) --------------------------------------------------------
char __thiscall sub_100490B0(int this)
{
  int v1; // esi@1
  int v2; // xmm1_4@1
  int v4; // xmm2_4@2
  signed int v8; // ecx@7
  __int64 v9; // ST00_8@7

  v1 = this;
  v2 = *(_DWORD *)(this + 66060);
  __asm { lahf }
  if ( __SETP__(_AH & 0x44, 0) )
  {
    v4 = *(_DWORD *)(this + 66064);
    __asm { lahf }
    if ( __SETP__(_AH & 0x44, 0) )
    {
      __asm { lahf }
      if ( __SETP__(_AH & 0x44, 0) )
        goto LABEL_11;
      __asm { lahf }
      if ( __SETP__(_AH & 0x44, 0) || dword_102398F0 != dword_10239478 || dword_102398EC != dword_1023947C )
      {
LABEL_11:
        dword_102398EC = dword_1023947C;
        dword_102398E4 = v2;
        dword_102398E8 = v4;
        dword_102398F0 = dword_10239478;
        sub_100491A0((void *)this);
        v8 = (signed int)ffloor((float)dword_102398F0 * *(float *)(v1 + 66060));
        HIDWORD(v9) = (signed int)ffloor((float)dword_102398F0 * *(float *)(v1 + 66064));
        *(_DWORD *)(v1 + 66072) = HIDWORD(v9);
        *(_DWORD *)(v1 + 66068) = v8;
        LODWORD(v9) = v8;
        sub_100411F0(v1, v9);
        sub_100493A0(*(_DWORD *)(v1 + 66068), *(_DWORD *)(v1 + 66072));
      }
    }
  }
  return 1;
}
// 100493A0: using guessed type _DWORD __stdcall sub_100493A0(_DWORD, _DWORD);
// 10239478: using guessed type int dword_10239478;
// 1023947C: using guessed type int dword_1023947C;
// 102398E4: using guessed type int dword_102398E4;
// 102398E8: using guessed type int dword_102398E8;
// 102398EC: using guessed type int dword_102398EC;
// 102398F0: using guessed type int dword_102398F0;

//----- (100491A0) --------------------------------------------------------
int __thiscall sub_100491A0(void *this)
{
  void *v1; // esi@1
  int result; // eax@1
  signed int v3; // ebx@1
  int v4; // edi@1
  char v5; // cl@2
  int v6; // edx@4
  int v7; // ecx@8
  int v8; // ecx@10
  int v9; // ecx@12
  int v10; // ecx@14
  void *v11; // ecx@16
  void *v12; // ecx@18
  void *v13; // ecx@20
  void *v14; // ecx@22
  int v15; // ecx@24
  int v16; // ecx@26
  int v17; // ecx@28
  int v18; // ecx@30
  int v19; // ecx@32
  int v20; // ecx@34
  int v21; // ecx@36
  int v22; // ecx@38
  int v23; // [sp+10h] [bp-24h]@1
  __int128 v24; // [sp+14h] [bp-20h]@8
  __int128 v25; // [sp+24h] [bp-10h]@8

  v1 = this;
  result = 0;
  v23 = 0;
  v3 = 0;
  v4 = (int)((char *)this + 276);
  do
  {
    v5 = 0;
    if ( *(_DWORD *)v4 != result )
    {
      v5 = 1;
      *(_DWORD *)v4 = result;
    }
    v6 = *((_DWORD *)v1 + 2);
    if ( v6 && v5 )
    {
      (*(void (__stdcall **)(int, signed int, signed int, int *))(*(_DWORD *)v6 + 32))(v6, v3, 1, &v23);
      result = v23;
    }
    ++v3;
    v4 += 4;
  }
  while ( v3 < 8 );
  v7 = *((_DWORD *)v1 + 2);
  v24 = 0i64;
  v25 = 0i64;
  if ( v7 )
    result = (*(int (__stdcall **)(int, signed int, __int128 *, _DWORD))(*(_DWORD *)v7 + 132))(v7, 8, &v24, 0);
  v8 = *((_DWORD *)v1 + 91);
  if ( v8 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v8 + 8))(*((_DWORD *)v1 + 91));
    *((_DWORD *)v1 + 91) = 0;
  }
  v9 = *((_DWORD *)v1 + 16677);
  if ( v9 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v9 + 8))(*((_DWORD *)v1 + 16677));
    *((_DWORD *)v1 + 16677) = 0;
  }
  v10 = *((_DWORD *)v1 + 16678);
  if ( v10 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v10 + 8))(*((_DWORD *)v1 + 16678));
    *((_DWORD *)v1 + 16678) = 0;
  }
  v11 = (void *)*((_DWORD *)v1 + 16675);
  if ( v11 )
  {
    result = (int)sub_10008A00(v11, *((_DWORD *)v1 + 16675));
    *((_DWORD *)v1 + 16675) = 0;
  }
  v12 = (void *)*((_DWORD *)v1 + 16676);
  if ( v12 )
  {
    result = (int)sub_10008A00(v12, *((_DWORD *)v1 + 16676));
    *((_DWORD *)v1 + 16676) = 0;
  }
  v13 = (void *)*((_DWORD *)v1 + 16685);
  if ( v13 )
  {
    result = (int)sub_10008A00(v13, *((_DWORD *)v1 + 16685));
    *((_DWORD *)v1 + 16685) = 0;
  }
  v14 = (void *)*((_DWORD *)v1 + 16687);
  if ( v14 )
  {
    result = (int)sub_10008A00(v14, *((_DWORD *)v1 + 16687));
    *((_DWORD *)v1 + 16687) = 0;
  }
  v15 = *((_DWORD *)v1 + 16682);
  if ( v15 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v15 + 8))(*((_DWORD *)v1 + 16682));
    *((_DWORD *)v1 + 16682) = 0;
  }
  v16 = *((_DWORD *)v1 + 16684);
  if ( v16 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v16 + 8))(*((_DWORD *)v1 + 16684));
    *((_DWORD *)v1 + 16684) = 0;
  }
  v17 = *((_DWORD *)v1 + 16683);
  if ( v17 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v17 + 8))(*((_DWORD *)v1 + 16683));
    *((_DWORD *)v1 + 16683) = 0;
  }
  v18 = *((_DWORD *)v1 + 16679);
  if ( v18 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v18 + 8))(*((_DWORD *)v1 + 16679));
    *((_DWORD *)v1 + 16679) = 0;
  }
  v19 = *((_DWORD *)v1 + 16681);
  if ( v19 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v19 + 8))(*((_DWORD *)v1 + 16681));
    *((_DWORD *)v1 + 16681) = 0;
  }
  v20 = *((_DWORD *)v1 + 16680);
  if ( v20 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v20 + 8))(*((_DWORD *)v1 + 16680));
    *((_DWORD *)v1 + 16680) = 0;
  }
  v21 = *((_DWORD *)v1 + 16686);
  if ( v21 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v21 + 8))(*((_DWORD *)v1 + 16686));
    *((_DWORD *)v1 + 16686) = 0;
  }
  v22 = *((_DWORD *)v1 + 16688);
  if ( v22 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v22 + 8))(*((_DWORD *)v1 + 16688));
    *((_DWORD *)v1 + 16688) = 0;
  }
  return result;
}

//----- (100493A0) --------------------------------------------------------
#error "10049517: call analysis failed (funcsize=469)"

//----- (10049DE0) --------------------------------------------------------
int __thiscall sub_10049DE0(int this, int a2, int a3, float a4, int a5)
{
  int v5; // esi@1
  unsigned int v6; // eax@1
  __m128d v7; // xmm0@1
  __m128d v8; // xmm0@1
  int result; // eax@1
  __m128 v10; // xmm2@5
  __m128 v11; // xmm1@5
  float v12; // xmm3_4@7
  float v13; // xmm0_4@7
  float v14; // xmm3_4@10
  unsigned int v15; // eax@13
  __m128d v16; // xmm0@15
  float v17; // xmm1_4@15
  __m128d v18; // xmm0@15
  float v19; // xmm2_4@15
  unsigned int v20; // eax@19
  __m128d v21; // xmm0@21
  float v22; // xmm1_4@21
  __m128d v23; // xmm0@21
  struct tagWINDOWINFO pwi; // [sp+8h] [bp-3Ch]@5

  *(_DWORD *)a3 = 0;
  v5 = this;
  v6 = *(_DWORD *)(this + 66068);
  *(_DWORD *)a2 = 0;
  v7 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v6);
  v7.m128d_f64[0] = v7.m128d_f64[0] + *(double *)&qword_1006EEC0[v6 >> 31];
  *LODWORD(a4) = (unsigned __int128)_mm_cvtpd_ps(v7);
  v8 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(this + 66072));
  v8.m128d_f64[0] = v8.m128d_f64[0] + *(double *)&qword_1006EEC0[*(_DWORD *)(this + 66072) >> 31];
  *(_DWORD *)a5 = (unsigned __int128)_mm_cvtpd_ps(v8);
  result = dword_10239474;
  if ( dword_10239474 )
  {
    if ( dword_10239474 == 1 || (result = dword_1023946C, dword_1023946C != 1) && dword_1023946C != 3 )
    {
      GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &pwi);
      v10 = (__m128)COERCE_UNSIGNED_INT((float)(pwi.rcClient.right - pwi.rcClient.left));
      v11 = (__m128)COERCE_UNSIGNED_INT((float)(pwi.rcClient.bottom - pwi.rcClient.top));
      result = dword_10239474 - 1;
      if ( dword_10239474 == 1 )
      {
        v12 = v10.m128_f32[0] * 0.25;
        v13 = v11.m128_f32[0] * 0.33333334;
      }
      else
      {
        result = dword_10239474 - 2;
        if ( dword_10239474 == 2 )
        {
          v12 = v10.m128_f32[0] * 0.0625;
          v13 = v11.m128_f32[0] * 0.11111111;
        }
        else
        {
          v12 = a4;
          v13 = a4;
        }
      }
      v14 = v12 / v13;
      if ( v14 <= 1.0 )
      {
        if ( v14 < 1.0 )
        {
          if ( dword_1023946C == 1 || dword_1023946C == 3 )
            v20 = *(_DWORD *)(v5 + 66072);
          else
            v20 = *(_DWORD *)(v5 + 66068);
          v21 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v20);
          v21.m128d_f64[0] = v21.m128d_f64[0] + *(double *)&qword_1006EEC0[v20 >> 31];
          v11.m128_f32[0] = v11.m128_f32[0] - (float)(v14 * v11.m128_f32[0]);
          LODWORD(v21.m128d_f64[0]) = (unsigned __int128)_mm_cvtpd_ps(v21);
          v22 = COERCE_FLOAT(_mm_and_ps(v11, (__m128)xmmword_1006EED0))
              / (float)((float)(v10.m128_f32[0] / *(float *)&v21.m128d_f64[0])
                      + (float)(v10.m128_f32[0] / *(float *)&v21.m128d_f64[0]));
          *(float *)a3 = v22;
          v23 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(v5 + 66072));
          v23.m128d_f64[0] = v23.m128d_f64[0] + *(double *)&qword_1006EEC0[*(_DWORD *)(v5 + 66072) >> 31];
          result = a5;
          *(float *)a5 = COERCE_FLOAT(_mm_cvtpd_ps(v23)) - (float)(v22 + v22);
        }
      }
      else
      {
        if ( dword_1023946C == 1 || dword_1023946C == 3 )
          v15 = *(_DWORD *)(v5 + 66068);
        else
          v15 = *(_DWORD *)(v5 + 66072);
        v16 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v15);
        v16.m128d_f64[0] = v16.m128d_f64[0] + *(double *)&qword_1006EEC0[v15 >> 31];
        v10.m128_f32[0] = v10.m128_f32[0] - (float)(v14 * v10.m128_f32[0]);
        v17 = v11.m128_f32[0] / COERCE_FLOAT(_mm_cvtpd_ps(v16));
        v18 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(v5 + 66068));
        v19 = COERCE_FLOAT(_mm_and_ps(v10, (__m128)xmmword_1006EED0)) / (float)(v17 + v17);
        v18.m128d_f64[0] = v18.m128d_f64[0] + *(double *)&qword_1006EEC0[*(_DWORD *)(v5 + 66068) >> 31];
        result = LODWORD(a4);
        *(float *)a2 = v19;
        *LODWORD(a4) = COERCE_FLOAT(_mm_cvtpd_ps(v18)) - (float)(v19 + v19);
      }
    }
  }
  return result;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];
// 1006EED0: using guessed type __int128 xmmword_1006EED0;
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1023946C: using guessed type int dword_1023946C;
// 10239474: using guessed type int dword_10239474;

//----- (1004A1D0) --------------------------------------------------------
unsigned int __fastcall sub_1004A1D0(int a1, unsigned int a2, int a3)
{
  unsigned int result; // eax@1
  int v4; // esi@1
  int v5; // ebx@2
  int v6; // edi@2
  int v7; // edx@4
  int v8; // ebp@4
  unsigned int v9; // ecx@5
  int v10; // eax@9
  unsigned int v11; // eax@12
  int v12; // eax@15
  int v13; // edx@16
  int v14; // eax@16
  unsigned int v15; // eax@19
  unsigned int v16; // ecx@20
  unsigned int v17; // eax@23
  int v18; // eax@26
  int v19; // ecx@27
  int v20; // eax@27
  int v21; // xmm0_4@27
  int v22; // xmm0_4@27
  int v23; // xmm0_4@27
  unsigned int v24; // ecx@28
  unsigned int v25; // eax@31
  int v26; // eax@34
  int v27; // ecx@35
  int v28; // eax@35
  int v29; // edx@35
  signed int v30; // edx@38
  int v31; // ecx@44
  int v32; // ecx@44
  int v33; // ebp@44
  unsigned int v34; // ecx@48
  int v35; // eax@48
  unsigned int v36; // eax@51
  int v37; // eax@54
  int v38; // eax@55
  int v39; // edx@55
  float v40; // xmm0_4@55
  unsigned int v41; // ecx@63
  int v42; // eax@63
  unsigned int v43; // eax@66
  int v44; // eax@69
  int v45; // eax@70
  int v46; // edx@70
  float v47; // xmm0_4@70
  unsigned int v48; // ecx@78
  int v49; // eax@78
  unsigned int v50; // eax@81
  int v51; // eax@84
  int v52; // eax@85
  int v53; // edx@85
  float v54; // xmm0_4@85
  int v55; // eax@97
  int v56; // ecx@98
  int v57; // edx@98
  signed int v58; // [sp+4h] [bp-1Ch]@44
  int v59; // [sp+8h] [bp-18h]@44
  int v60; // [sp+Ch] [bp-14h]@4
  int v61; // [sp+Ch] [bp-14h]@44
  int v62; // [sp+10h] [bp-10h]@4
  int v63; // [sp+14h] [bp-Ch]@4
  int v64; // [sp+18h] [bp-8h]@55
  int v65; // [sp+18h] [bp-8h]@70
  int v66; // [sp+18h] [bp-8h]@85
  int v67; // [sp+1Ch] [bp-4h]@1

  result = a2 + 4096;
  v67 = a2 + 4096;
  v4 = a1;
  if ( a2 >= a2 + 4096 )
    return result;
  v5 = dword_10239910;
  v6 = dword_10239918;
  do
  {
    result = *(_DWORD *)a2;
    if ( !*(_DWORD *)a2 )
      return result;
    v60 = *(_DWORD *)a2 & 0x3FF;
    v7 = a2 + 4;
    v62 = v7;
    v8 = (result >> 24) & 0x7F;
    v63 = (result >> 20) & 0xF;
    if ( result >= 0x80000000 )
    {
      v5 = *(_DWORD *)(v4 + 66048) + (*(_DWORD *)v7 & 0x1FFFFFF);
      v9 = *(_DWORD *)(a3 + 4);
      dword_10239910 = *(_DWORD *)(v4 + 66048) + (*(_DWORD *)v7 & 0x1FFFFFF);
      if ( !v9
        || *(_DWORD *)(v7 + 8) != *(_DWORD *)v6
        || *(_DWORD *)(v7 + 12) != *(_DWORD *)(v6 + 4)
        || *(_DWORD *)(v7 + 16) != *(_DWORD *)(v6 + 8) )
      {
        v10 = *(_DWORD *)(a3 + 8);
        if ( v9 == v10 )
        {
          if ( !v10 )
            *(_DWORD *)(a3 + 8) = 1;
          v11 = *(_DWORD *)(a3 + 8);
          if ( v9 >= v11 )
          {
            do
              v11 *= 2;
            while ( v9 >= v11 );
            *(_DWORD *)(a3 + 8) = v11;
          }
          v12 = sub_1002D6F7(v5, a3, *(_DWORD *)a3, 24 * *(_DWORD *)(a3 + 8), 0x10u);
          v5 = dword_10239910;
          *(_DWORD *)a3 = v12;
        }
        v13 = *(_DWORD *)(a3 + 4);
        v14 = v13 + 1;
        dword_10239918 = *(_DWORD *)a3 + 24 * v13;
        v6 = dword_10239918;
        v7 = v62;
        *(_DWORD *)(a3 + 4) = v14;
        *(_DWORD *)v6 = *(_DWORD *)(v62 + 8);
        *(_DWORD *)(v6 + 4) = *(_DWORD *)(v62 + 12);
        *(_DWORD *)(v6 + 8) = *(_DWORD *)(v62 + 16);
        *(_DWORD *)(v6 + 12) = *(_DWORD *)(v4 + 66164);
        *(_DWORD *)(v6 + 20) = 0;
      }
      v62 = v7 + 20;
    }
    if ( *(_DWORD *)(v6 + 20) )
    {
      v15 = *(_DWORD *)(v4 + 66168);
      if ( *(_BYTE *)(v6 + 16) & 1 )
      {
        *(_DWORD *)(v4 + 66164) += 3;
        v16 = *(_DWORD *)(v4 + 66164);
        if ( v16 >= v15 )
        {
          if ( !v15 )
            *(_DWORD *)(v4 + 66168) = 1;
          v17 = *(_DWORD *)(v4 + 66168);
          if ( v16 >= v17 )
          {
            do
              v17 *= 2;
            while ( v16 >= v17 );
            *(_DWORD *)(v4 + 66168) = v17;
          }
          v18 = sub_1002D6F7(v5, v6, *(_DWORD *)(v4 + 66160), 28 * *(_DWORD *)(v4 + 66168), 0x10u);
          v5 = dword_10239910;
          v6 = dword_10239918;
          *(_DWORD *)(v4 + 66160) = v18;
        }
        v19 = 7 * (*(_DWORD *)(v4 + 66164) - 3);
        v20 = *(_DWORD *)(v4 + 66160);
        v21 = *(_DWORD *)(v20 + 28 * (*(_DWORD *)(v4 + 66164) - 3) - 28);
        *(_DWORD *)(v20 + 4 * v19) = v21;
        *(_DWORD *)(v20 + 4 * v19 + 28) = v21;
        v22 = *(_DWORD *)(v20 + 4 * v19 - 24);
        *(_DWORD *)(v20 + 4 * v19 + 4) = v22;
        *(_DWORD *)(v20 + 4 * v19 + 32) = v22;
        v23 = *(_DWORD *)(v20 + 4 * v19 - 20);
        *(_DWORD *)(v20 + 4 * v19 + 8) = v23;
        *(_DWORD *)(v20 + 4 * v19 + 36) = v23;
      }
      else
      {
        *(_DWORD *)(v4 + 66164) += 2;
        v24 = *(_DWORD *)(v4 + 66164);
        if ( v24 >= v15 )
        {
          if ( !v15 )
            *(_DWORD *)(v4 + 66168) = 1;
          v25 = *(_DWORD *)(v4 + 66168);
          if ( v24 >= v25 )
          {
            do
              v25 *= 2;
            while ( v24 >= v25 );
            *(_DWORD *)(v4 + 66168) = v25;
          }
          v26 = sub_1002D6F7(v5, v6, *(_DWORD *)(v4 + 66160), 28 * *(_DWORD *)(v4 + 66168), 0x10u);
          v5 = dword_10239910;
          v6 = dword_10239918;
          *(_DWORD *)(v4 + 66160) = v26;
        }
        v27 = *(_DWORD *)(v4 + 66160);
        v28 = *(_DWORD *)(v4 + 66164) - 2;
        v29 = 7 * v28;
        *(_DWORD *)(v27 + 4 * v29) = *(_DWORD *)(v27 + 28 * v28 - 28);
        *(_DWORD *)(v27 + 4 * v29 + 4) = *(_DWORD *)(v27 + 28 * v28 - 24);
        *(_DWORD *)(v27 + 4 * v29 + 8) = *(_DWORD *)(v27 + 28 * v28 - 20);
      }
      *(_DWORD *)(v6 + 20) = *(_DWORD *)(v4 + 66164);
    }
    switch ( v8 )
    {
      case 64:
        v30 = 3;
        goto LABEL_44;
      case 96:
        v30 = 4;
        goto LABEL_44;
      case 112:
        v30 = 5;
        goto LABEL_44;
      case 120:
        v30 = 6;
        goto LABEL_44;
      case 124:
        v30 = 7;
        goto LABEL_44;
      case 126:
        v30 = 8;
LABEL_44:
        v58 = v30;
        v31 = 4 * v60;
        v61 = v31;
        v32 = v31 + 20;
        v59 = v32;
        v33 = v32;
        break;
      default:
        goto LABEL_97;
    }
    do
    {
      if ( v63 == 2 )
      {
        v48 = *(_DWORD *)(v4 + 66164);
        v49 = *(_DWORD *)(v4 + 66168);
        if ( v48 == v49 )
        {
          if ( !v49 )
            *(_DWORD *)(v4 + 66168) = 1;
          v50 = *(_DWORD *)(v4 + 66168);
          if ( v48 >= v50 )
          {
            do
              v50 *= 2;
            while ( v48 >= v50 );
            *(_DWORD *)(v4 + 66168) = v50;
          }
          v51 = sub_1002D6F7(v5, v6, *(_DWORD *)(v4 + 66160), 28 * *(_DWORD *)(v4 + 66168), 0x10u);
          v5 = dword_10239910;
          *(_DWORD *)(v4 + 66160) = v51;
        }
        v52 = *(_DWORD *)(v4 + 66164);
        v6 = *(_DWORD *)(v4 + 66160);
        v53 = 7 * v52;
        *(_DWORD *)(v4 + 66164) = v52 + 1;
        *(_DWORD *)(v6 + 4 * v53) = *(_DWORD *)(v61 + v5);
        *(_DWORD *)(v6 + 4 * v53 + 4) = *(_DWORD *)(v61 + v5 + 4);
        *(_DWORD *)(v6 + 4 * v53 + 8) = *(_DWORD *)(v61 + v5 + 8);
        v54 = *(float *)(v6 + 28 * v52 + 8);
        v66 = *(_DWORD *)(v6 + 28 * v52 + 8);
        if ( (v66 & 0x7F800000) == 2139095040 )
        {
          if ( v66 < 0 )
          {
            *(_DWORD *)(v6 + 28 * v52 + 8) = -971227136;
LABEL_92:
            *(float *)(v4 + 66092) = fminf(*(float *)(v6 + 28 * v52 + 8), *(float *)(v4 + 66092));
            *(float *)(v4 + 66096) = fmaxf(*(float *)(v6 + 28 * v52 + 8), *(float *)(v4 + 66096));
            *(_DWORD *)(v6 + 28 * v52 + 12) = 0;
            *(_DWORD *)(v6 + 28 * v52 + 16) = 0;
            *(_DWORD *)(v6 + 28 * v52 + 20) = *(_DWORD *)(v61 + v5 + 12);
            *(_DWORD *)(v6 + 28 * v52 + 24) = 0;
            goto LABEL_93;
          }
        }
        else
        {
          if ( v54 < -10000.0 )
          {
            *(_DWORD *)(v6 + 28 * v52 + 8) = -971227136;
            goto LABEL_92;
          }
          if ( v54 <= 10000.0 )
            goto LABEL_92;
        }
        *(_DWORD *)(v6 + 28 * v52 + 8) = 1176256512;
        goto LABEL_92;
      }
      if ( v63 != 6 )
      {
        if ( v63 != 8 )
          goto LABEL_95;
        v34 = *(_DWORD *)(v4 + 66164);
        v35 = *(_DWORD *)(v4 + 66168);
        if ( v34 == v35 )
        {
          if ( !v35 )
            *(_DWORD *)(v4 + 66168) = 1;
          v36 = *(_DWORD *)(v4 + 66168);
          if ( v34 >= v36 )
          {
            do
              v36 *= 2;
            while ( v34 >= v36 );
            *(_DWORD *)(v4 + 66168) = v36;
          }
          v37 = sub_1002D6F7(v5, v6, *(_DWORD *)(v4 + 66160), 28 * *(_DWORD *)(v4 + 66168), 0x10u);
          v5 = dword_10239910;
          *(_DWORD *)(v4 + 66160) = v37;
        }
        v38 = *(_DWORD *)(v4 + 66164);
        v6 = *(_DWORD *)(v4 + 66160);
        v39 = 7 * v38;
        *(_DWORD *)(v4 + 66164) = v38 + 1;
        *(_DWORD *)(v6 + 4 * v39) = *(_DWORD *)(v5 + v33 - 20);
        *(_DWORD *)(v6 + 4 * v39 + 4) = *(_DWORD *)(v5 + v33 - 16);
        *(_DWORD *)(v6 + 4 * v39 + 8) = *(_DWORD *)(v5 + v33 - 12);
        v40 = *(float *)(v6 + 28 * v38 + 8);
        v64 = *(_DWORD *)(v6 + 28 * v38 + 8);
        if ( (v64 & 0x7F800000) == 2139095040 )
        {
          if ( v64 < 0 )
          {
            *(_DWORD *)(v6 + 28 * v38 + 8) = -971227136;
LABEL_62:
            *(float *)(v4 + 66092) = fminf(*(float *)(v4 + 66092), *(float *)(v6 + 28 * v38 + 8));
            *(float *)(v4 + 66096) = fmaxf(*(float *)(v4 + 66096), *(float *)(v6 + 28 * v38 + 8));
            *(_DWORD *)(v6 + 28 * v38 + 12) = *(_DWORD *)(v5 + v33 - 8);
            *(_DWORD *)(v6 + 28 * v38 + 16) = *(_DWORD *)(v5 + v33 - 4);
            *(_DWORD *)(v6 + 28 * v38 + 20) = *(_DWORD *)(v5 + v33);
            *(_DWORD *)(v6 + 28 * v38 + 24) = *(_DWORD *)(v5 + v33 + 4);
LABEL_93:
            v32 = v59;
            goto LABEL_94;
          }
        }
        else
        {
          if ( v40 < -10000.0 )
          {
            *(_DWORD *)(v6 + 28 * v38 + 8) = -971227136;
            goto LABEL_62;
          }
          if ( v40 <= 10000.0 )
            goto LABEL_62;
        }
        *(_DWORD *)(v6 + 28 * v38 + 8) = 1176256512;
        goto LABEL_62;
      }
      v41 = *(_DWORD *)(v4 + 66164);
      v42 = *(_DWORD *)(v4 + 66168);
      if ( v41 == v42 )
      {
        if ( !v42 )
          *(_DWORD *)(v4 + 66168) = 1;
        v43 = *(_DWORD *)(v4 + 66168);
        if ( v41 >= v43 )
        {
          do
            v43 *= 2;
          while ( v41 >= v43 );
          *(_DWORD *)(v4 + 66168) = v43;
        }
        v44 = sub_1002D6F7(v5, v6, *(_DWORD *)(v4 + 66160), 28 * *(_DWORD *)(v4 + 66168), 0x10u);
        v5 = dword_10239910;
        *(_DWORD *)(v4 + 66160) = v44;
      }
      v45 = *(_DWORD *)(v4 + 66164);
      v6 = *(_DWORD *)(v4 + 66160);
      v46 = 7 * v45;
      *(_DWORD *)(v4 + 66164) = v45 + 1;
      *(_DWORD *)(v6 + 4 * v46) = *(_DWORD *)(v59 + v5 - 20);
      *(_DWORD *)(v6 + 4 * v46 + 4) = *(_DWORD *)(v59 + v5 - 16);
      *(_DWORD *)(v6 + 4 * v46 + 8) = *(_DWORD *)(v59 + v5 - 12);
      v47 = *(float *)(v6 + 28 * v45 + 8);
      v65 = *(_DWORD *)(v6 + 28 * v45 + 8);
      if ( (v65 & 0x7F800000) == 2139095040 )
      {
        if ( v65 >= 0 )
          goto LABEL_76;
        *(_DWORD *)(v6 + 28 * v45 + 8) = -971227136;
      }
      else if ( v47 >= -10000.0 )
      {
        if ( v47 > 10000.0 )
        {
LABEL_76:
          *(_DWORD *)(v6 + 28 * v45 + 8) = 1176256512;
          goto LABEL_77;
        }
      }
      else
      {
        *(_DWORD *)(v6 + 28 * v45 + 8) = -971227136;
      }
LABEL_77:
      v32 = v59;
      *(float *)(v4 + 66092) = fminf(*(float *)(v4 + 66092), *(float *)(v6 + 28 * v45 + 8));
      *(float *)(v4 + 66096) = fmaxf(*(float *)(v4 + 66096), *(float *)(v6 + 28 * v45 + 8));
      *(_DWORD *)(v6 + 28 * v45 + 12) = *(_DWORD *)(v59 + v5 - 8);
      *(_DWORD *)(v6 + 28 * v45 + 16) = *(_DWORD *)(v59 + v5 - 4);
      *(_DWORD *)(v6 + 28 * v45 + 20) = *(_DWORD *)(v59 + v5);
      *(_DWORD *)(v6 + 28 * v45 + 24) = 0;
LABEL_94:
      v30 = v58;
LABEL_95:
      v61 += 16;
      v32 += 24;
      v33 += 28;
      v59 = v32;
      --v30;
      v58 = v30;
    }
    while ( v30 );
    v6 = dword_10239918;
LABEL_97:
    v55 = *(_DWORD *)(v6 + 20);
    if ( v55 )
    {
      v56 = *(_DWORD *)(v4 + 66160);
      v57 = 7 * v55;
      *(_DWORD *)(v56 + 4 * v57 - 28) = *(_DWORD *)(v56 + 28 * v55);
      *(_DWORD *)(v56 + 4 * v57 - 24) = *(_DWORD *)(v56 + 28 * v55 + 4);
      *(_DWORD *)(v56 + 4 * v57 - 20) = *(_DWORD *)(v56 + 28 * v55 + 8);
    }
    a2 = v62;
    *(_DWORD *)(v6 + 20) = -1;
    result = *(_DWORD *)(v4 + 66164) - *(_DWORD *)(v6 + 12);
    *(_DWORD *)(v6 + 16) = result;
  }
  while ( v62 < (unsigned int)v67 );
  return result;
}
// 10239910: using guessed type int dword_10239910;
// 10239918: using guessed type int dword_10239918;

//----- (1004ADF0) --------------------------------------------------------
int __thiscall sub_1004ADF0(void *this)
{
  int v1; // ebp@0
  int v2; // ebx@1
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // edx@6
  int v6; // edi@10
  const void *v7; // edx@13
  int v8; // ecx@14
  const void *v9; // ecx@15
  __int16 v10; // ax@16
  int v11; // eax@18
  int v12; // ecx@26
  void *v13; // eax@26
  int v14; // ST28_4@31
  int v15; // ST24_4@31
  int v16; // ST20_4@31
  char v17; // al@31
  int v18; // ebx@32
  int v19; // eax@32
  int v20; // ebx@34
  LPVOID v21; // ebx@34
  int v22; // ebx@35
  int v23; // ecx@35
  int v24; // eax@35
  int v25; // edx@40
  int v26; // edx@40
  int result; // eax@40
  int v28; // eax@41
  int v29; // eax@45
  int v30; // [sp-10h] [bp-90h]@0
  int v31; // [sp-Ch] [bp-8Ch]@20
  LPVOID lpMem; // [sp+10h] [bp-70h]@18
  int v33; // [sp+20h] [bp-60h]@26
  unsigned int v34; // [sp+24h] [bp-5Ch]@18
  LPVOID v35; // [sp+28h] [bp-58h]@13
  int v36; // [sp+38h] [bp-48h]@13
  unsigned int v37; // [sp+3Ch] [bp-44h]@13
  LPVOID v38; // [sp+40h] [bp-40h]@21
  int v39; // [sp+44h] [bp-3Ch]@21
  int v40; // [sp+48h] [bp-38h]@21
  int v41; // [sp+4Ch] [bp-34h]@11
  int v42; // [sp+50h] [bp-30h]@26
  int v43; // [sp+54h] [bp-2Ch]@32
  int v44; // [sp+58h] [bp-28h]@35
  int v45; // [sp+5Ch] [bp-24h]@10
  int v46; // [sp+60h] [bp-20h]@1
  int v47; // [sp+64h] [bp-1Ch]@10
  int v48; // [sp+68h] [bp-18h]@1
  int v49; // [sp+6Ch] [bp-14h]@10
  int v50; // [sp+70h] [bp-10h]@20
  int v51; // [sp+7Ch] [bp-4h]@18

  v2 = (int)this;
  v3 = dword_10239484;
  v4 = 4 * (dword_1023946C & 3) | 2;
  v48 = v2;
  v46 = 4 * (dword_1023946C & 3) | 2;
  if ( dword_10239480 != dword_10239914 || dword_10239484 != dword_1023991C || dword_1023990C != dword_1023946C )
  {
    dword_10239914 = dword_10239480;
    dword_1023991C = dword_10239484;
    dword_1023990C = dword_1023946C;
    switch ( dword_1023946C )
    {
      case 0:
      case 2:
        if ( !byte_1007CDB0 )
        {
          v5 = dword_10239484;
          v3 = dword_10239480;
          goto LABEL_9;
        }
        break;
      case 1:
      case 3:
        if ( !byte_1007CDB0 )
        {
          v5 = dword_10239480;
LABEL_9:
          sub_100402B0(v3, v5);
        }
        break;
      default:
        break;
    }
  }
  v47 = v4;
  v45 = v2 + 376;
  sub_10002D30(v2 + 376, (int)&v49, (int)&v47);
  v6 = v49;
  if ( v49 == *(_DWORD *)(v2 + 380) )
  {
    v49 = (int)&v47;
    sub_10002E90(v2 + 376, (int)&v41, v2 + 376, (int)&v49, v2 + 376);
    v6 = v41;
  }
  if ( !*(_DWORD *)(v6 + 12) )
  {
    v37 = 7;
    v36 = 0;
    v7 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v35) = 0;
    if ( *(_WORD *)v7 )
    {
      v9 = v7;
      v49 = (int)((char *)v7 + 2);
      do
      {
        v10 = *(_WORD *)v9;
        v9 = (char *)v9 + 2;
      }
      while ( v10 );
      v8 = (signed int)((char *)v9 - v49) >> 1;
    }
    else
    {
      v8 = 0;
    }
    sub_10001460((int)&v35, v7, v8);
    v51 = 0;
    v11 = sub_100026C0((int)&lpMem, v4);
    LOBYTE(v51) = 1;
    sub_100017B0((int)&v35, v11, 0, 0xFFFFFFFF);
    LOBYTE(v51) = 0;
    if ( v34 >= 8 )
      sub_10001E40(v2, v6, lpMem, v34 + 1);
    sub_10001680((int)&v35, L"_PMX1_DX11", 0xAu);
    sub_10001680((int)&v35, L".vsh", 4u);
    if ( sub_10028FF8(v2, v6, (int)&v50) )
    {
      v38 = 0;
      v39 = 0;
      v40 = 0;
      LOBYTE(v51) = 2;
      switch ( (unsigned int)v4 >> 2 )
      {
        case 0u:
          v41 = (int)"ROTATE_0";
          break;
        case 1u:
          v41 = (int)"ROTATE_90";
          break;
        case 2u:
          v41 = (int)"ROTATE_180";
          break;
        case 3u:
          v41 = (int)"ROTATE_270";
          break;
      }
      v42 = (int)"1";
      sub_100027D0((int)&v38, (unsigned int)&v41);
      v41 = 0;
      v42 = 0;
      sub_100027D0((int)&v38, (unsigned int)&v41);
      v34 = 15;
      v33 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "vs_FillScreen", 0xDu);
      LOBYTE(v51) = 3;
      v13 = &lpMem;
      if ( v34 >= 0x10 )
        v13 = lpMem;
      sub_10040760(
        (void *)v2,
        (int)&v49,
        L"PVR2_VSH",
        (int)&v49,
        (int)v38,
        (int)&v49,
        (int)v13,
        (int)"vs_5_0",
        v30,
        v31,
        (int)&v49,
        v12);
      LOBYTE(v51) = 2;
      if ( v34 >= 0x10 )
        sub_10001EA0(v2, v6, lpMem, v34 + 1);
      if ( !sub_10028FF8(v2, v6, (int)&v50) )
      {
        v14 = v50;
        v15 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v49 + 16))(v49, 1);
        v16 = v49;
        v17 = (*(int (**)(void))(*(_DWORD *)v49 + 12))();
        sub_1002936D(v2, v6, v17, v16, v15, v14);
        sub_100290B5(v2, v1, v6);
      }
      v18 = (*(int (__stdcall **)(int))(*(_DWORD *)v49 + 16))(v49);
      v19 = (*(int (__stdcall **)(int))(*(_DWORD *)v49 + 12))(v49);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v48 + 4) + 48))(
        *(_DWORD *)(v48 + 4),
        v19,
        v18,
        0,
        &v43);
      LOBYTE(v51) = 0;
      v4 = v46;
      if ( v38 )
        sub_100029D0(v18, v6, v38, (v40 - (signed int)v38) >> 3);
    }
    else
    {
      sub_1002C003(v2, v6);
      v20 = sub_1002BD3E(v2, v6, v50);
      v49 = v20;
      sub_1002C01E(v20, v1, v6);
      v21 = sub_1002C36D(v20);
      sub_1002C2BD((int)v21, v6);
      sub_100290B5((int)v21, v1, v6);
      (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v48 + 4) + 48))(
        *(_DWORD *)(v48 + 4),
        v21,
        v49,
        0,
        &v43);
      sub_1002C0EC(v21);
    }
    v22 = v45;
    v44 = 0;
    v49 = v4;
    sub_10002D30(v45, (int)&v46, (int)&v49);
    v24 = v46;
    if ( v46 == *(_DWORD *)(v22 + 4) )
    {
      v45 = (int)&v49;
      sub_10002E90(v22, (int)&v41, v23, (int)&v45, v23);
      v24 = v41;
    }
    *(_DWORD *)(v24 + 12) = v43;
    *(_DWORD *)(v24 + 16) = v44;
    v51 = -1;
    if ( v37 >= 8 )
      sub_10001E40(v22, v6, v35, v37 + 1);
    v2 = v48;
  }
  v25 = *(_DWORD *)(v2 + 8);
  *(_DWORD *)(v2 + 136660) = *(_DWORD *)(v2 + 66060);
  *(_DWORD *)(v2 + 136664) = *(_DWORD *)(v2 + 66064);
  (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)v25 + 192))(
    v25,
    *(_DWORD *)(v2 + 372),
    0,
    0,
    v2 + 136400,
    0,
    0);
  v26 = *(_DWORD *)(v6 + 12);
  result = *(_DWORD *)(v2 + 372);
  v48 = *(_DWORD *)(v2 + 372);
  if ( *(_DWORD *)(v2 + 140) != v26 )
  {
    v28 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 140) = v26;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v28 + 44))(v28, v26, 0, 0);
    result = v48;
  }
  if ( *(_DWORD *)(v2 + 144) != result )
  {
    *(_DWORD *)(v2 + 144) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 28))(
               *(_DWORD *)(v2 + 8),
               0,
               1,
               &v48);
  }
  if ( *(_DWORD *)(v2 + 148) )
  {
    v29 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 148) = 0;
    result = (*(int (__stdcall **)(int, _DWORD))(*(_DWORD *)v29 + 68))(v29, 0);
  }
  return result;
}
// 1006CC1C: using guessed type wchar_t a_vsh[5];
// 1006DF2C: using guessed type wchar_t a_pmx1_dx11[11];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDB0: using guessed type char byte_1007CDB0;
// 1023946C: using guessed type int dword_1023946C;
// 10239480: using guessed type int dword_10239480;
// 10239484: using guessed type int dword_10239484;
// 1023990C: using guessed type int dword_1023990C;
// 10239914: using guessed type int dword_10239914;
// 1023991C: using guessed type int dword_1023991C;

//----- (1004B2C0) --------------------------------------------------------
int __userpurge sub_1004B2C0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, int a4@<esi>, int a5, int a6, int a7)
{
  int v7; // ebp@0
  bool v8; // zf@1
  int v9; // edi@1
  int v10; // esi@2
  int v11; // eax@4
  int v12; // ebx@7
  int v13; // eax@9
  int v14; // eax@14
  int v15; // eax@19
  int v16; // eax@24
  int v17; // eax@29
  int v18; // eax@37
  int v19; // esi@40
  const void *v20; // edx@43
  int v21; // ecx@44
  const void *v22; // ecx@45
  __int16 v23; // ax@46
  int v24; // eax@48
  int v25; // ecx@52
  void *v26; // eax@52
  int v27; // ecx@57
  void *v28; // eax@57
  int v29; // ST28_4@75
  int v30; // ST24_4@75
  int v31; // ST20_4@75
  char v32; // al@75
  int v33; // edi@76
  int v34; // eax@76
  int v35; // ebx@76
  int v36; // ebx@78
  int v37; // ebx@79
  int v38; // ecx@79
  int v39; // eax@79
  int v40; // ecx@84
  char v41; // al@84
  int v42; // ecx@86
  int v43; // edx@89
  int result; // eax@89
  int v45; // eax@90
  int v46; // [sp-1Ch] [bp-94h]@0
  int v47; // [sp-18h] [bp-90h]@50
  int v48; // [sp-Ch] [bp-84h]@1
  int v49; // [sp-8h] [bp-80h]@1
  int v50; // [sp-4h] [bp-7Ch]@1
  LPVOID lpMem; // [sp+0h] [bp-78h]@49
  unsigned int v52; // [sp+14h] [bp-64h]@48
  LPVOID v53; // [sp+18h] [bp-60h]@43
  int v54; // [sp+28h] [bp-50h]@43
  unsigned int v55; // [sp+2Ch] [bp-4Ch]@43
  LPVOID v56; // [sp+30h] [bp-48h]@51
  int v57; // [sp+34h] [bp-44h]@51
  int v58; // [sp+38h] [bp-40h]@51
  int v59; // [sp+3Ch] [bp-3Ch]@41
  int v60; // [sp+40h] [bp-38h]@51
  unsigned __int64 v61; // [sp+44h] [bp-34h]@1
  void *v62; // [sp+4Ch] [bp-2Ch]@40
  __int64 *v63; // [sp+50h] [bp-28h]@41
  int v64; // [sp+54h] [bp-24h]@1
  int v65; // [sp+58h] [bp-20h]@50
  int v66; // [sp+5Ch] [bp-1Ch]@79
  int v67; // [sp+60h] [bp-18h]@40
  int v68; // [sp+74h] [bp-4h]@48

  v8 = a6 == 0;
  v50 = a2;
  v49 = a4;
  v48 = a3;
  v9 = a1;
  _mm_storel_pd((double *)&v61, 0i64);
  v64 = a1;
  if ( v8 || (v10 = a7, !*(_DWORD *)(a7 + 16)) )
  {
    v12 = 32;
  }
  else
  {
    if ( *(_DWORD *)(a7 + 20) < 8u )
      v11 = a7;
    else
      v11 = *(_DWORD *)a7;
    if ( sub_1002C672(a2, a1, v11, L"FXAA") )
    {
      if ( *(_DWORD *)(v10 + 20) < 8u )
        v13 = v10;
      else
        v13 = *(_DWORD *)v10;
      if ( sub_1002C672(a2, v9, v13, L"HDR-TV") )
      {
        if ( *(_DWORD *)(v10 + 20) < 8u )
          v14 = v10;
        else
          v14 = *(_DWORD *)v10;
        if ( sub_1002C672(a2, v9, v14, L"SCANLINES") )
        {
          if ( *(_DWORD *)(v10 + 20) < 8u )
            v15 = v10;
          else
            v15 = *(_DWORD *)v10;
          if ( sub_1002C672(a2, v9, v15, L"CARTOON") )
          {
            if ( *(_DWORD *)(v10 + 20) < 8u )
              v16 = v10;
            else
              v16 = *(_DWORD *)v10;
            if ( sub_1002C672(a2, v9, v16, L"RGB DOT(MICRO)") )
            {
              if ( *(_DWORD *)(v10 + 20) < 8u )
                v17 = v10;
              else
                v17 = *(_DWORD *)v10;
              if ( sub_1002C672(a2, v9, v17, L"RGB DOT(TINY)") )
              {
                if ( *(_DWORD *)(v10 + 20) >= 8u )
                  v10 = *(_DWORD *)v10;
                if ( sub_1002C672(a2, v9, v10, L"BLUR") )
                {
                  v12 = HIDWORD(v61);
                  v18 = v61;
                  goto LABEL_40;
                }
                v12 = 4096;
              }
              else
              {
                v12 = 2048;
              }
            }
            else
            {
              v12 = 1024;
            }
          }
          else
          {
            v12 = 512;
          }
        }
        else
        {
          v12 = 256;
        }
      }
      else
      {
        v12 = 128;
      }
    }
    else
    {
      v12 = 64;
    }
  }
  v18 = 0;
LABEL_40:
  a7 = v18;
  v61 = __PAIR__(v12, v18);
  v67 = v12;
  v62 = (void *)(v9 + 412);
  sub_10002CB0((void *)(v9 + 412), (int)&a6, (int)&v61);
  v19 = a6;
  if ( a6 == *(_DWORD *)(v9 + 416) )
  {
    v63 = (__int64 *)&v61;
    sub_10002E30(v9 + 412, (int)&v59, v9 + 412, (int)&v63, v9 + 412);
    v19 = v59;
  }
  if ( !*(_DWORD *)(v19 + 16) )
  {
    v55 = 7;
    v54 = 0;
    v20 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v53) = 0;
    if ( *(_WORD *)v20 )
    {
      v22 = v20;
      a6 = (int)((char *)v20 + 2);
      do
      {
        v23 = *(_WORD *)v22;
        v22 = (char *)v22 + 2;
      }
      while ( v23 );
      v21 = (signed int)((char *)v22 - a6) >> 1;
    }
    else
    {
      v21 = 0;
    }
    sub_10001460((int)&v53, v20, v21);
    v68 = 0;
    v24 = sub_10008360(__PAIR__(v12, a7));
    LOBYTE(v68) = 1;
    sub_100017B0((int)&v53, v24, 0, 0xFFFFFFFF);
    LOBYTE(v68) = 0;
    if ( v52 >= 8 )
      sub_10001E40(v12, v9, lpMem, v52 + 1);
    sub_10001680((int)&v53, L"_PMX1_DX11", 0xAu);
    sub_10001680((int)&v53, L".psh", 4u);
    if ( !sub_10028FF8(v12, v9, (int)&v65) )
    {
      sub_1002C003(v12, v9);
      v36 = sub_1002BD3E(v12, v9, v65);
      sub_1002C01E(v36, v7, v9);
      v33 = (int)sub_1002C36D(v36);
      sub_1002C2BD(v36, v33);
      sub_100290B5(v36, v7, v33);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v64 + 4) + 60))(
        *(_DWORD *)(v64 + 4),
        v33,
        v36,
        0,
        &v63);
      sub_1002C0EC((LPVOID)v33);
      v35 = v67;
LABEL_79:
      v66 = a7;
      v67 = v35;
      v37 = (int)v62;
      sub_10002CB0(v62, (int)&a6, (int)&v66);
      v39 = a6;
      if ( a6 == *(_DWORD *)(v37 + 4) )
      {
        a6 = (int)&v66;
        sub_10002E30(v37, (int)&v59, v38, (int)&a6, v38);
        v39 = v59;
      }
      *(_DWORD *)(v39 + 16) = v63;
      v68 = -1;
      if ( v55 >= 8 )
        sub_10001E40(v37, v33, v53, v55 + 1);
      v9 = v64;
      goto LABEL_84;
    }
    v56 = 0;
    v57 = 0;
    v58 = 0;
    LOBYTE(v68) = 2;
    v59 = 0;
    v60 = 0;
    sub_100027D0((int)&v56, (unsigned int)&v59);
    if ( v12 & 0x20 )
    {
      sub_100013C0((int)&lpMem, "NotPostFilter");
      LOBYTE(v68) = 3;
      v26 = &lpMem;
      if ( v52 >= 0x10 )
        v26 = lpMem;
      sub_10040760(
        (void *)v9,
        (int)&a6,
        L"FILTERS_PSH",
        (int)&a6,
        (int)v56,
        (int)&a6,
        (int)v26,
        (int)"ps_5_0",
        v46,
        v47,
        (int)&a6,
        v25);
      LOBYTE(v68) = 2;
      if ( v52 >= 0x10 )
        sub_10001EA0(v12, v9, lpMem, v52 + 1);
      goto LABEL_74;
    }
    if ( v12 & 0x40 )
    {
      sub_100013C0((int)&lpMem, "ps_main");
      LOBYTE(v68) = 4;
      v28 = &lpMem;
      if ( v52 >= 0x10 )
        v28 = lpMem;
      sub_10040760(
        (void *)v9,
        (int)&a6,
        L"FXAA_PSH",
        (int)&a6,
        (int)v56,
        (int)&a6,
        (int)v28,
        (int)"ps_5_0",
        v46,
        v47,
        (int)&a6,
        v27);
    }
    else
    {
      if ( v12 & 0x80 )
      {
        sub_100013C0((int)&lpMem, "HDRTV");
        LOBYTE(v68) = 5;
      }
      else if ( v12 & 0x100 )
      {
        sub_100013C0((int)&lpMem, "SCANLINES");
        LOBYTE(v68) = 6;
      }
      else if ( v12 & 0x200 )
      {
        sub_100013C0((int)&lpMem, "CARTOON");
        LOBYTE(v68) = 7;
      }
      else if ( v12 & 0x400 )
      {
        sub_100013C0((int)&lpMem, "RGB_DOT_MICRO");
        LOBYTE(v68) = 8;
      }
      else if ( v12 & 0x800 )
      {
        sub_100013C0((int)&lpMem, "RGB_DOT_TINY");
        LOBYTE(v68) = 9;
      }
      else
      {
        if ( (unsigned int)v12 < 0x1000 )
        {
LABEL_74:
          if ( !sub_10028FF8(v12, v9, (int)&v65) )
          {
            v29 = v65;
            v30 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)a6 + 16))(a6, 1);
            v31 = a6;
            v32 = (*(int (**)(void))(*(_DWORD *)a6 + 12))();
            sub_1002936D(v12, v9, v32, v31, v30, v29);
            sub_100290B5(v12, v7, v9);
          }
          v33 = (*(int (__stdcall **)(int))(*(_DWORD *)a6 + 16))(a6);
          v34 = (*(int (__stdcall **)(int))(*(_DWORD *)a6 + 12))(a6);
          (*(void (__stdcall **)(_DWORD, int, int, _DWORD, __int64 **))(**(_DWORD **)(v64 + 4) + 60))(
            *(_DWORD *)(v64 + 4),
            v34,
            v33,
            0,
            &v63);
          LOBYTE(v68) = 0;
          v35 = v67;
          if ( v56 )
            sub_100029D0(v67, v33, v56, (v58 - (signed int)v56) >> 3);
          goto LABEL_79;
        }
        sub_100013C0((int)&lpMem, "BLUR");
        LOBYTE(v68) = 10;
      }
      sub_10041500(v9, L"FILTERS_PSH", (int)&lpMem, (int)&v56, (int)&a6);
    }
    LOBYTE(v68) = 2;
    sub_10001380((int)&lpMem, v12, v9);
    goto LABEL_74;
  }
LABEL_84:
  (*(void (__stdcall **)(_DWORD, _DWORD, signed int, int, int, int, int))(**(_DWORD **)(v9 + 8) + 40))(
    *(_DWORD *)(v9 + 8),
    0,
    1,
    v9 + 66176,
    v48,
    v49,
    v50);
  v40 = *(_DWORD *)(a5 + 4);
  v41 = 0;
  if ( *(_DWORD *)(v9 + 276) != v40 )
  {
    v41 = 1;
    *(_DWORD *)(v9 + 276) = v40;
  }
  v42 = *(_DWORD *)(v9 + 8);
  if ( v42 && v41 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v42 + 32))(v42, 0, 1, a5 + 4);
  v43 = *(_DWORD *)(v19 + 16);
  result = *(_DWORD *)(v9 + 408);
  a6 = *(_DWORD *)(v9 + 408);
  if ( *(_DWORD *)(v9 + 152) != v43 )
  {
    v45 = *(_DWORD *)(v9 + 8);
    *(_DWORD *)(v9 + 152) = v43;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v45 + 36))(v45, v43, 0, 0);
    result = a6;
  }
  if ( *(_DWORD *)(v9 + 156) != result )
  {
    *(_DWORD *)(v9 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v9 + 8) + 64))(
               *(_DWORD *)(v9 + 8),
               0,
               1,
               &a6);
  }
  return result;
}
// 1004B2C0: could not find valid save-restore pair for ebx
// 1004B2C0: could not find valid save-restore pair for edi
// 1004B2C0: could not find valid save-restore pair for esi
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006D684: using guessed type wchar_t aFxaa[5];
// 1006D690: using guessed type wchar_t aHdrTv[7];
// 1006D6A0: using guessed type wchar_t aScanlines[10];
// 1006D6B4: using guessed type wchar_t aCartoon[8];
// 1006D6C4: using guessed type wchar_t aRgbDotMicro[15];
// 1006D6E4: using guessed type wchar_t aRgbDotTiny[14];
// 1006D700: using guessed type wchar_t aBlur[5];
// 1006DF2C: using guessed type wchar_t a_pmx1_dx11[11];
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1004B920) --------------------------------------------------------
int __thiscall sub_1004B920(int this)
{
  int v1; // ebp@0
  int v2; // ebx@1
  int v3; // edi@1
  int v4; // esi@1
  const void *v5; // edx@4
  int v6; // ecx@5
  const void *v7; // ecx@6
  __int16 v8; // ax@7
  int v9; // eax@9
  int v10; // ecx@12
  void *v11; // eax@12
  int v12; // ST28_4@17
  int v13; // ST24_4@17
  int v14; // ST20_4@17
  char v15; // al@17
  int v16; // edi@18
  int v17; // eax@18
  int v18; // ebx@20
  int v19; // ecx@21
  int v20; // eax@21
  char v21; // al@25
  int v22; // ecx@25
  int v23; // edx@27
  int v24; // ecx@30
  char v25; // al@30
  int v26; // ecx@32
  int v27; // ecx@35
  char v28; // al@35
  int v29; // ecx@37
  int v30; // edx@40
  int result; // eax@40
  int v32; // eax@41
  int v33; // [sp-10h] [bp-98h]@0
  int v34; // [sp-Ch] [bp-94h]@12
  LPVOID lpMem; // [sp+Ch] [bp-7Ch]@10
  int v36; // [sp+1Ch] [bp-6Ch]@12
  unsigned int v37; // [sp+20h] [bp-68h]@9
  LPVOID v38; // [sp+24h] [bp-64h]@4
  int v39; // [sp+34h] [bp-54h]@4
  unsigned int v40; // [sp+38h] [bp-50h]@4
  LPVOID v41; // [sp+3Ch] [bp-4Ch]@12
  int v42; // [sp+40h] [bp-48h]@12
  int v43; // [sp+44h] [bp-44h]@12
  int v44; // [sp+48h] [bp-40h]@2
  int *v45; // [sp+4Ch] [bp-3Ch]@12
  __int64 v46; // [sp+50h] [bp-38h]@1
  int v47; // [sp+5Ch] [bp-2Ch]@1
  int v48; // [sp+60h] [bp-28h]@21
  int v49; // [sp+64h] [bp-24h]@12
  int v50; // [sp+68h] [bp-20h]@1
  unsigned int v51; // [sp+6Ch] [bp-1Ch]@1
  int v52; // [sp+70h] [bp-18h]@1
  int v53; // [sp+74h] [bp-14h]@14
  int v54; // [sp+78h] [bp-10h]@11
  int v55; // [sp+84h] [bp-4h]@9

  v2 = this;
  v52 = this;
  v51 = (dword_1023947C & 0x7F | 0x10000ui64) >> 3;
  v3 = (dword_1023947C & 0x7F | 0x10000) << 29;
  v47 = (dword_1023947C & 0x7F | 0x10000) << 29;
  v46 = (dword_1023947C & 0x7F | 0x10000i64) << 29;
  sub_10002CB0((void *)(this + 412), (int)&v50, (int)&v46);
  v4 = v50;
  if ( v50 == *(_DWORD *)(v2 + 416) )
  {
    v50 = (int)&v46;
    sub_10002E30(v2 + 412, (int)&v44, v2 + 412, (int)&v50, v2 + 412);
    v4 = v44;
  }
  if ( !*(_DWORD *)(v4 + 16) )
  {
    v40 = 7;
    v39 = 0;
    v5 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v38) = 0;
    if ( *(_WORD *)v5 )
    {
      v7 = v5;
      v50 = (int)((char *)v5 + 2);
      do
      {
        v8 = *(_WORD *)v7;
        v7 = (char *)v7 + 2;
      }
      while ( v8 );
      v6 = (signed int)((char *)v7 - v50) >> 1;
    }
    else
    {
      v6 = 0;
    }
    sub_10001460((int)&v38, v5, v6);
    v55 = 0;
    v9 = sub_10008360(__PAIR__(v51, v3));
    LOBYTE(v55) = 1;
    sub_100017B0((int)&v38, v9, 0, 0xFFFFFFFF);
    LOBYTE(v55) = 0;
    if ( v37 >= 8 )
      sub_10001E40(v2, v3, lpMem, v37 + 1);
    sub_10001680((int)&v38, L"_PMX1_DX11", 0xAu);
    sub_10001680((int)&v38, L".psh", 4u);
    if ( sub_10028FF8(v2, v3, (int)&v54) )
    {
      v41 = 0;
      v42 = 0;
      v43 = 0;
      LOBYTE(v55) = 2;
      sub_10009090(v2, v3, &v49, (int)"%d", dword_1023947C);
      v44 = (int)"BUFFER_MAX";
      v45 = &v49;
      sub_100027D0((int)&v41, (unsigned int)&v44);
      v44 = (int)"PS_SORT";
      v45 = (int *)"1";
      sub_100027D0((int)&v41, (unsigned int)&v44);
      v44 = 0;
      v45 = 0;
      sub_100027D0((int)&v41, (unsigned int)&v44);
      v37 = 15;
      v36 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "ps_main", 7u);
      LOBYTE(v55) = 3;
      v11 = &lpMem;
      if ( v37 >= 0x10 )
        v11 = lpMem;
      sub_10040760(
        (void *)v2,
        (int)&v53,
        L"PVR2_PSH",
        (int)&v53,
        (int)v41,
        (int)&v53,
        (int)v11,
        (int)"ps_5_0",
        v33,
        v34,
        (int)&v53,
        v10);
      LOBYTE(v55) = 2;
      if ( v37 >= 0x10 )
        sub_10001EA0(v2, v3, lpMem, v37 + 1);
      if ( !sub_10028FF8(v2, v3, (int)&v54) )
      {
        v12 = v54;
        v13 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v53 + 16))(v53, 1);
        v14 = v53;
        v15 = (*(int (**)(void))(*(_DWORD *)v53 + 12))();
        sub_1002936D(v2, v3, v15, v14, v13, v12);
        sub_100290B5(v2, v1, v3);
      }
      v16 = (*(int (__stdcall **)(int))(*(_DWORD *)v53 + 16))(v53);
      v17 = (*(int (__stdcall **)(int))(*(_DWORD *)v53 + 12))(v53);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v2 + 4) + 60))(
        *(_DWORD *)(v2 + 4),
        v17,
        v16,
        0,
        &v50);
      v2 = v52;
      LOBYTE(v55) = 0;
      if ( v41 )
        sub_100029D0(v52, v16, v41, (v43 - (signed int)v41) >> 3);
    }
    else
    {
      sub_1002C003(v2, v3);
      v18 = sub_1002BD3E(v2, v3, v54);
      sub_1002C01E(v18, v1, v3);
      v16 = (int)sub_1002C36D(v18);
      sub_1002C2BD(v18, v16);
      sub_100290B5(v18, v1, v16);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v52 + 4) + 60))(
        *(_DWORD *)(v52 + 4),
        v16,
        v18,
        0,
        &v50);
      sub_1002C0EC((LPVOID)v16);
      v2 = v52;
    }
    v48 = v47;
    v49 = v51;
    sub_10002CB0((void *)(v2 + 412), (int)&v47, (int)&v48);
    v20 = v47;
    if ( v47 == *(_DWORD *)(v2 + 416) )
    {
      v47 = (int)&v48;
      sub_10002E30(v2 + 412, (int)&v44, v19, (int)&v47, v19);
      v20 = v44;
    }
    *(_DWORD *)(v20 + 16) = v50;
    v55 = -1;
    if ( v40 >= 8 )
      sub_10001E40(v2, v16, v38, v40 + 1);
  }
  v21 = 0;
  v22 = *(_DWORD *)(v2 + 66700) + 4;
  if ( *(_DWORD *)(v2 + 276) != *(_DWORD *)v22 )
  {
    v21 = 1;
    *(_DWORD *)(v2 + 276) = *(_DWORD *)v22;
  }
  v23 = *(_DWORD *)(v2 + 8);
  if ( v23 && v21 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v23 + 32))(v23, 0, 1, v22);
  v24 = *(_DWORD *)(v2 + 66720);
  v25 = 0;
  if ( *(_DWORD *)(v2 + 284) != v24 )
  {
    v25 = 1;
    *(_DWORD *)(v2 + 284) = v24;
  }
  v26 = *(_DWORD *)(v2 + 8);
  if ( v26 && v25 )
    (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v26 + 32))(v26, 2, 1, v2 + 66720);
  v27 = *(_DWORD *)(v2 + 66732);
  v28 = 0;
  if ( *(_DWORD *)(v2 + 288) != v27 )
  {
    v28 = 1;
    *(_DWORD *)(v2 + 288) = v27;
  }
  v29 = *(_DWORD *)(v2 + 8);
  if ( v29 && v28 )
    (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v29 + 32))(v29, 3, 1, v2 + 66732);
  v30 = *(_DWORD *)(v4 + 16);
  result = *(_DWORD *)(v2 + 408);
  v51 = *(_DWORD *)(v2 + 408);
  if ( *(_DWORD *)(v2 + 152) != v30 )
  {
    v32 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 152) = v30;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v32 + 36))(v32, v30, 0, 0);
    result = v51;
  }
  if ( *(_DWORD *)(v2 + 156) != result )
  {
    *(_DWORD *)(v2 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 64))(
               *(_DWORD *)(v2 + 8),
               0,
               1,
               &v51);
  }
  return result;
}
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006DF2C: using guessed type wchar_t a_pmx1_dx11[11];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1023947C: using guessed type int dword_1023947C;

//----- (1004BDC0) --------------------------------------------------------
int __userpurge sub_1004BDC0@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4, unsigned int a5)
{
  int v5; // ebp@0
  int v6; // edi@1
  int v7; // ebx@1
  unsigned __int64 v8; // rt0@1
  int v9; // edx@1
  int v10; // ecx@3
  int v11; // eax@3
  int v12; // ebx@5
  unsigned int v13; // esi@5
  int v14; // esi@7
  int v15; // ebx@7
  signed int v16; // eax@9
  int v17; // ecx@9
  unsigned int v18; // ecx@13
  unsigned int v19; // eax@13
  unsigned int v20; // edx@13
  int v21; // ecx@13
  unsigned int v22; // edx@13
  int v23; // ecx@13
  unsigned int v24; // edx@13
  int v25; // ecx@13
  unsigned int v26; // edx@13
  int v27; // ecx@13
  signed int v28; // eax@13
  int v29; // edx@13
  int v30; // ecx@13
  int v31; // ecx@15
  signed int v32; // eax@16
  int v33; // esi@16
  int v34; // edx@18
  unsigned int v35; // ecx@18
  unsigned int v36; // eax@18
  int v37; // ebx@21
  unsigned int v38; // esi@21
  int v39; // ebx@21
  int v40; // esi@21
  int v41; // esi@23
  const void *v42; // edx@26
  int v43; // ecx@27
  const void *v44; // ecx@28
  __int16 v45; // ax@29
  int v46; // eax@31
  unsigned int v47; // ecx@35
  unsigned int v48; // ecx@42
  int v49; // ecx@79
  int v50; // ecx@89
  void *v51; // eax@89
  int v52; // ST28_4@94
  int v53; // ST24_4@94
  int v54; // ST20_4@94
  char v55; // al@94
  int v56; // edi@95
  int v57; // eax@95
  int v58; // ebx@97
  LPVOID v59; // edi@97
  int v60; // edi@98
  int v61; // ecx@98
  int v62; // eax@98
  int v63; // ecx@104
  signed int v64; // eax@110
  int v65; // edi@111
  int v66; // ecx@111
  __m128 v67; // xmm1@111
  float v68; // xmm0_4@111
  signed int v69; // eax@111
  signed int v70; // eax@111
  char v71; // al@111
  int v72; // edx@111
  int v73; // ecx@113
  int v74; // ecx@117
  int v75; // eax@117
  int v76; // edx@119
  char v77; // al@123
  int v78; // ecx@123
  int v79; // edx@125
  int v80; // ecx@128
  unsigned int v81; // eax@128
  int v82; // eax@129
  int v83; // edx@134
  int v84; // edx@134
  int result; // eax@134
  int v86; // eax@135
  int v87; // [sp-10h] [bp-A0h]@0
  int v88; // [sp-Ch] [bp-9Ch]@33
  LPVOID lpMem; // [sp+Ch] [bp-84h]@32
  int v90; // [sp+1Ch] [bp-74h]@89
  unsigned int v91; // [sp+20h] [bp-70h]@31
  LPVOID v92; // [sp+24h] [bp-6Ch]@26
  int v93; // [sp+34h] [bp-5Ch]@26
  unsigned int v94; // [sp+38h] [bp-58h]@26
  LPVOID v95; // [sp+3Ch] [bp-54h]@34
  int v96; // [sp+40h] [bp-50h]@34
  int v97; // [sp+44h] [bp-4Ch]@34
  int v98; // [sp+48h] [bp-48h]@24
  unsigned int v99; // [sp+4Ch] [bp-44h]@65
  unsigned __int64 v100; // [sp+50h] [bp-40h]@10
  int *v101; // [sp+5Ch] [bp-34h]@23
  int v102; // [sp+60h] [bp-30h]@35
  int v103; // [sp+64h] [bp-2Ch]@35
  int v104; // [sp+68h] [bp-28h]@95
  int v105; // [sp+6Ch] [bp-24h]@13
  int v106; // [sp+70h] [bp-20h]@98
  int v107; // [sp+74h] [bp-1Ch]@5
  int v108; // [sp+78h] [bp-18h]@19
  int v109; // [sp+7Ch] [bp-14h]@1
  unsigned int v110; // [sp+80h] [bp-10h]@5
  int v111; // [sp+8Ch] [bp-4h]@31

  v6 = a1;
  v109 = a1;
  HIDWORD(v8) = ((*(_DWORD *)(a4 + 4) >> 22) & 3ui64) >> 15;
  LODWORD(v8) = (*(_DWORD *)(a4 + 4) >> 20) & 1 | (((*(_DWORD *)(a4 + 4) >> 22) & 3) << 17);
  v7 = v8 >> 30;
  v9 = (*(_DWORD *)a4 >> 25) & 1 | 4 * v8;
  if ( (v9 & 0xFFF80000) != 0x100000 || v7 )
  {
    v10 = (*(_DWORD *)(a4 + 4) >> 21) & 1;
    v9 |= v10 << 18;
    v11 = v7 | ((unsigned __int64)(unsigned int)v10 >> 14);
  }
  else
  {
    v11 = 0;
  }
  v12 = v9 | ((a5 != 0) << 21);
  v13 = v11 | ((unsigned __int64)(a5 != 0) >> 11);
  v107 = v9 | ((a5 != 0) << 21);
  v110 = v11 | ((unsigned __int64)(a5 != 0) >> 11);
  if ( v11 | ((unsigned __int64)(a5 != 0) >> 11) || (unsigned int)v12 >= 0x200000 )
  {
    v14 = ((unsigned __int64)(a5 == 4) >> 10) | v13;
    v15 = ((a5 == 4) << 22) | v12;
    if ( *(_BYTE *)(v6 + 66696) && a5 == 2 )
    {
      v16 = 0x4000000;
      v17 = 0;
    }
    else
    {
      _mm_storel_pd((double *)&v100, 0i64);
      v17 = HIDWORD(v100);
      v16 = v100;
    }
    v12 = v16 | v15;
    v13 = v17 | v14;
    v107 = v12;
    v110 = v13;
  }
  if ( v12 & 1 )
  {
    v105 = sub_1004D1A0((void *)v6, a4);
    v18 = *(_DWORD *)(a4 + 8);
    v19 = *(_DWORD *)(a4 + 8);
    a5 = v18;
    v18 >>= 31;
    v20 = (unsigned __int64)v18 >> 25;
    v21 = (v19 >> 30) & 1 | (v18 << 7);
    v22 = __PAIR__(v20, v21) >> 28;
    v23 = (a5 >> 27) & 7 | 16 * v21;
    v24 = __PAIR__(v22, v23) >> 30;
    v25 = (*(_DWORD *)(a4 + 4) >> 6) & 3 | 4 * v23;
    v26 = __PAIR__(v24, v25) >> 31;
    v27 = (*(_DWORD *)(a4 + 4) >> 19) & 1 | 2 * v25;
    v28 = 514;
    v29 = v13 | (__PAIR__(v26, v27) >> 29);
    v30 = v12 | 8 * v27;
    if ( a5 & 0x4000000 )
      v28 = 2;
    v31 = v28 | v30;
    if ( a5 & 0x200000 )
    {
      v32 = 2048;
      v33 = 0;
    }
    else
    {
      _mm_storel_pd((double *)&v100, 0i64);
      v33 = HIDWORD(v100);
      v32 = v100;
    }
    v34 = v33 | v29;
    v35 = v32 | v31 & 0xFFFFF7FF;
    v36 = *(_DWORD *)(a4 + 4);
    if ( v36 & 0x7000 )
    {
      a5 = 4096;
      v108 = 0;
    }
    else
    {
      _mm_storel_pd((double *)&v100, 0i64);
      v108 = HIDWORD(v100);
      a5 = v100;
    }
    v37 = (v36 >> 17) & 3;
    v38 = (unsigned __int64)(unsigned int)v37 >> 30;
    v39 = (v36 >> 15) & 3 | 4 * v37;
    v40 = __PAIR__(v38, v39) >> 19;
    v12 = a5 | v35 & 0xFFFE0FFF | (v39 << 13);
    v13 = v108 | v34 | v40;
    v107 = v12;
    v110 = v13;
  }
  else
  {
    v105 = a4;
  }
  v100 = __PAIR__(v13, v12);
  v101 = (int *)(v6 + 412);
  sub_10002CB0((void *)(v6 + 412), (int)&a5, (int)&v100);
  v41 = a5;
  if ( a5 == *(_DWORD *)(v6 + 416) )
  {
    a5 = (unsigned int)&v100;
    sub_10002E30(v6 + 412, (int)&v98, v6 + 412, (int)&a5, v6 + 412);
    v41 = v98;
  }
  if ( !*(_DWORD *)(v41 + 16) )
  {
    v94 = 7;
    v93 = 0;
    v42 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v92) = 0;
    if ( *(_WORD *)v42 )
    {
      v44 = v42;
      a5 = (unsigned int)((char *)v42 + 2);
      do
      {
        v45 = *(_WORD *)v44;
        v44 = (char *)v44 + 2;
      }
      while ( v45 );
      v43 = (signed int)((char *)v44 - a5) >> 1;
    }
    else
    {
      v43 = 0;
    }
    sub_10001460((int)&v92, v42, v43);
    v111 = 0;
    v46 = sub_10008360(__PAIR__(v110, v12));
    LOBYTE(v111) = 1;
    sub_100017B0((int)&v92, v46, 0, 0xFFFFFFFF);
    LOBYTE(v111) = 0;
    if ( v91 >= 8 )
      sub_10001E40(v12, v6, lpMem, v91 + 1);
    sub_10001680((int)&v92, L"_PMX1_DX11", 0xAu);
    sub_10001680((int)&v92, L".psh", 4u);
    if ( !sub_10028FF8(v12, v6, (int)&a5) )
    {
      sub_1002C003(v12, v6);
      v58 = sub_1002BD3E(v12, v6, a5);
      sub_1002C01E(v58, v5, v6);
      v59 = sub_1002C36D(v58);
      sub_1002C2BD(v58, (int)v59);
      sub_100290B5(v58, v5, (int)v59);
      (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v109 + 4) + 60))(
        *(_DWORD *)(v109 + 4),
        v59,
        v58,
        0,
        &v104);
      sub_1002C0EC(v59);
      v12 = v107;
LABEL_98:
      v60 = (int)v101;
      v107 = v110;
      v106 = v12;
      sub_10002CB0(v101, (int)&v103, (int)&v106);
      v62 = v103;
      if ( v103 == *(_DWORD *)(v60 + 4) )
      {
        v101 = &v106;
        sub_10002E30(v60, (int)&v98, v61, (int)&v101, v61);
        v62 = v98;
      }
      *(_DWORD *)(v62 + 16) = v104;
      v111 = -1;
      if ( v94 >= 8 )
        sub_10001E40(v12, v60, v92, v94 + 1);
      v6 = v109;
      goto LABEL_103;
    }
    v95 = 0;
    v96 = 0;
    v97 = 0;
    LOBYTE(v111) = 2;
    if ( v12 & 1 )
    {
      v102 = (int)"USE_TEXTURE";
      v103 = (int)"1";
      sub_100027D0((int)&v95, (unsigned int)&v102);
      v47 = (__PAIR__(v110, v12) >> 4) & 3;
      if ( v47 <= 3 )
      {
        switch ( v47 )
        {
          case 0u:
            v102 = (int)"USE_REPLACE";
            goto LABEL_41;
          case 1u:
            v102 = (int)"USE_MODULATE";
            goto LABEL_41;
          case 2u:
            v102 = (int)"USE_DECAL";
            goto LABEL_41;
          case 3u:
            v102 = (int)"USE_MODULATE_ALPHA";
LABEL_41:
            v103 = (int)"1";
            sub_100027D0((int)&v95, (unsigned int)&v102);
            break;
          default:
            break;
        }
      }
      v48 = (__PAIR__(v110, v12) >> 6) & 7;
      if ( v48 <= 5 )
      {
        switch ( v48 )
        {
          case 5u:
            v102 = (int)"EncodeARGB8888";
            goto LABEL_50;
          case 0u:
            v102 = (int)"EncodeARGB1555";
            goto LABEL_50;
          case 1u:
            v102 = (int)"EncodeRGB565";
            goto LABEL_50;
          case 2u:
            v102 = (int)"EncodeARGB4444";
            goto LABEL_50;
          case 3u:
            v102 = (int)"EncodeYUV422";
            goto LABEL_50;
          case 4u:
            v102 = (int)"EncodeBUMPMAP";
LABEL_50:
            v103 = (int)"1";
            sub_100027D0((int)&v95, (unsigned int)&v102);
            break;
          default:
            break;
        }
      }
      if ( !(v12 & 0x200) )
      {
        v102 = (int)"TEX_UNTWIDDLED";
        v103 = (int)"1";
        sub_100027D0((int)&v95, (unsigned int)&v102);
      }
      if ( v12 & 0x400 )
      {
        v103 = (int)"1";
        v102 = (int)"TEX_VQPAL";
        if ( !(v12 & 0x800) )
          v102 = (int)"TEX_VQCOMP";
        sub_100027D0((int)&v95, (unsigned int)&v102);
      }
      if ( v12 & 8 )
      {
        v102 = (int)"USE_IGNORE_TEX_ALPHA";
        v103 = (int)"1";
        sub_100027D0((int)&v95, (unsigned int)&v102);
      }
      if ( v12 & 2 )
      {
        v102 = (int)"USE_OFFSET_COLOR";
        v103 = (int)"1";
        sub_100027D0((int)&v95, (unsigned int)&v102);
      }
      if ( v12 & 0x1000 )
      {
        v102 = (int)"BilinearFilter";
        v103 = (int)"1";
        sub_100027D0((int)&v95, (unsigned int)&v102);
      }
      if ( v12 & 0x20000 )
      {
        v102 = (int)"TEX_MIPMAP";
        v103 = (int)"1";
        sub_100027D0((int)&v95, (unsigned int)&v102);
      }
      v99 = v110 >> 13;
      v103 = __PAIR__(v110, v12) >> 13;
      if ( (__PAIR__(v110, v12) >> 13) & 1 )
      {
        v98 = (int)"TEX_CLAMP_V";
      }
      else
      {
        v98 = (int)"TEX_MIRROR_V";
        if ( !(v12 & 0x8000) )
          v98 = (int)"TEX_WRAP_V";
      }
      v99 = (unsigned int)"1";
      sub_100027D0((int)&v95, (unsigned int)&v98);
      if ( v103 & 2 )
      {
        v98 = (int)"TEX_CLAMP_U";
      }
      else
      {
        v98 = (int)"TEX_MIRROR_U";
        if ( !(v12 & 0x10000) )
          v98 = (int)"TEX_WRAP_U";
      }
      v99 = (unsigned int)"1";
      sub_100027D0((int)&v95, (unsigned int)&v98);
    }
    if ( v12 & 0x200000 )
    {
      v98 = (int)"USE_BLEND";
      v99 = (unsigned int)"1";
      sub_100027D0((int)&v95, (unsigned int)&v98);
      if ( v12 & 0x400000 )
      {
        v98 = (int)"USE_ALPHA_TEST";
        v99 = (unsigned int)"1";
        sub_100027D0((int)&v95, (unsigned int)&v98);
      }
      if ( v12 & 0x4000000 )
      {
        v98 = (int)"TRANSPARENCY";
        v99 = (unsigned int)"1";
        sub_100027D0((int)&v95, (unsigned int)&v98);
      }
    }
    v49 = (__PAIR__(v110, v12) >> 19) & 3;
    if ( (__PAIR__(v110, v12) >> 19) & 3 )
    {
      if ( v49 == 1 )
      {
        v98 = (int)"FOG_PERVERTEX";
      }
      else
      {
        if ( v49 != 3 )
        {
LABEL_87:
          if ( v12 & 4 )
          {
            v98 = (int)"USE_ALPHA";
            v99 = (unsigned int)"1";
            sub_100027D0((int)&v95, (unsigned int)&v98);
          }
          v98 = 0;
          v99 = 0;
          sub_100027D0((int)&v95, (unsigned int)&v98);
          v91 = 15;
          v90 = 0;
          LOBYTE(lpMem) = 0;
          sub_10001990((int)&lpMem, "ps_main", 7u);
          LOBYTE(v111) = 3;
          v51 = &lpMem;
          if ( v91 >= 0x10 )
            v51 = lpMem;
          sub_10040760(
            (void *)v6,
            (int)&v108,
            L"PVR2_PSH",
            (int)&v108,
            (int)v95,
            (int)&v108,
            (int)v51,
            (int)"ps_5_0",
            v87,
            v88,
            (int)&v108,
            v50);
          LOBYTE(v111) = 2;
          if ( v91 >= 0x10 )
            sub_10001EA0(v12, v6, lpMem, v91 + 1);
          if ( !sub_10028FF8(v12, v6, (int)&a5) )
          {
            v52 = a5;
            v53 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v108 + 16))(v108, 1);
            v54 = v108;
            v55 = (*(int (**)(void))(*(_DWORD *)v108 + 12))();
            sub_1002936D(v12, v6, v55, v54, v53, v52);
            sub_100290B5(v12, v5, v6);
          }
          v56 = (*(int (__stdcall **)(int))(*(_DWORD *)v108 + 16))(v108);
          v57 = (*(int (__stdcall **)(int))(*(_DWORD *)v108 + 12))(v108);
          (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v109 + 4) + 60))(
            *(_DWORD *)(v109 + 4),
            v57,
            v56,
            0,
            &v104);
          LOBYTE(v111) = 0;
          v12 = v107;
          if ( v95 )
            sub_100029D0(v107, v56, v95, (v97 - (signed int)v95) >> 3);
          goto LABEL_98;
        }
        v98 = (int)"USE_FOG_LOOKUP_TABLE2";
      }
    }
    else
    {
      v98 = (int)"USE_FOG_LOOKUP_TABLE";
    }
    v99 = (unsigned int)"1";
    sub_100027D0((int)&v95, (unsigned int)&v98);
    if ( v12 & 0x40000 )
    {
      v98 = (int)"FOG_COLOR_CLAMP";
      v99 = (unsigned int)"1";
      sub_100027D0((int)&v95, (unsigned int)&v98);
    }
    goto LABEL_87;
  }
LABEL_103:
  if ( v12 & 0x4000000 )
  {
    v63 = a4;
    *(_DWORD *)(v6 + 136676) = *(_DWORD *)(a4 + 4) >> 26;
    *(_DWORD *)(v6 + 136760) = ((*(_DWORD *)v63 >> 6) | *(_DWORD *)v63 & 0x4000000u) >> 23;
  }
  if ( v12 & 0x40000 )
  {
    *(float *)(v6 + 136736) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 190) * 0.0039215689;
    *(float *)(v6 + 136740) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 189) * 0.0039215689;
    *(float *)(v6 + 136744) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 188) * 0.0039215689;
    *(float *)(v6 + 136748) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 191) * 0.0039215689;
    *(float *)(v6 + 136720) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 194) * 0.0039215689;
    *(float *)(v6 + 136724) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 193) * 0.0039215689;
    *(float *)(v6 + 136728) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 192) * 0.0039215689;
    *(float *)(v6 + 136732) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 195) * 0.0039215689;
  }
  if ( (__PAIR__(v110, v12) >> 19) & 3 && ((__PAIR__(v110, v12) >> 19) & 3) != 3 )
  {
    if ( (v12 & 0x180000) == 0x80000 )
    {
      *(float *)(v6 + 136704) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 182) * 0.0039215689;
      *(float *)(v6 + 136708) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 181) * 0.0039215689;
      v64 = *(_BYTE *)(*(_DWORD *)(v6 + 66056) + 180);
      *(_DWORD *)(v6 + 136716) = 1065353216;
      *(float *)(v6 + 136712) = (float)v64 * 0.0039215689;
    }
  }
  else
  {
    v65 = *(_DWORD *)(v6 + 66056);
    sub_10061827(
      (__m128d)(unsigned __int64)qword_1006EDD8,
      (__m128d)COERCE_UNSIGNED_INT64((double)*(_BYTE *)(v65 + 184)),
      a2,
      a3);
    v66 = v109;
    v67 = (__m128)COERCE_UNSIGNED_INT((float)*(_BYTE *)(v65 + 185));
    v67.m128_f32[0] = v67.m128_f32[0] * 0.0078125;
    v68 = 2.0 * COERCE_DOUBLE(_mm_cvtps_pd(v67));
    *(float *)(v109 + 136684) = v68;
    v69 = *(_BYTE *)(v65 + 178);
    v6 = v66;
    *(float *)(v66 + 136688) = (float)v69 * 0.0039215689;
    *(float *)(v66 + 136692) = (float)*(_BYTE *)(*(_DWORD *)(v66 + 66056) + 177) * 0.0039215689;
    v70 = *(_BYTE *)(*(_DWORD *)(v66 + 66056) + 176);
    *(_DWORD *)(v66 + 136700) = 1065353216;
    *(float *)(v66 + 136696) = (float)v70 * 0.0039215689;
    sub_1004D0E0(v66);
    v71 = 0;
    v72 = *(_DWORD *)(v6 + 66692) + 4;
    if ( *(_DWORD *)(v6 + 292) != *(_DWORD *)v72 )
    {
      v71 = 1;
      *(_DWORD *)(v6 + 292) = *(_DWORD *)v72;
    }
    v73 = *(_DWORD *)(v6 + 8);
    if ( v73 && v71 )
      (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v73 + 32))(v73, 4, 1, v72);
  }
  if ( v12 & 1 )
  {
    BYTE3(a5) = 0;
    v74 = *(_DWORD *)v105 + 4;
    v75 = *(_DWORD *)v74;
    if ( *(_DWORD *)(v6 + 276) != *(_DWORD *)v74 )
    {
      BYTE3(a5) = 1;
      *(_DWORD *)(v6 + 276) = v75;
    }
    v76 = *(_DWORD *)(v6 + 8);
    if ( v76 && BYTE3(a5) )
      (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v76 + 32))(v76, 0, 1, v74);
    if ( v12 & 0x400 )
    {
      v77 = 0;
      v78 = *(_DWORD *)(v105 + 4) + 4;
      if ( *(_DWORD *)(v6 + 288) != *(_DWORD *)v78 )
      {
        v77 = 1;
        *(_DWORD *)(v6 + 288) = *(_DWORD *)v78;
      }
      v79 = *(_DWORD *)(v6 + 8);
      if ( v79 && v77 )
        (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v79 + 32))(v79, 3, 1, v78);
    }
    v80 = a4;
    v81 = *(_DWORD *)(a4 + 4);
    if ( *(_DWORD *)(v105 + 16) < 0x80000000 )
    {
      *(_DWORD *)(v6 + 136768) = ((v81 >> 3) & 7) + 3;
      v82 = *(_DWORD *)(v80 + 4);
    }
    else
    {
      *(_DWORD *)(v6 + 136768) = ((v81 >> 3) & 7) + 3;
      v82 = *(_DWORD *)(v80 + 4) >> 3;
    }
    *(_DWORD *)(v6 + 136772) = (v82 & 7) + 3;
  }
  if ( v12 & 0x400000 )
    *(float *)(v6 + 136680) = (float)*(_BYTE *)(*(_DWORD *)(v6 + 66056) + 284) * 0.0039215689;
  v83 = *(_DWORD *)(v6 + 8);
  *(_DWORD *)(v6 + 136752) = *(_DWORD *)(v6 + 66068);
  *(_DWORD *)(v6 + 136756) = *(_DWORD *)(v6 + 66072);
  (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)v83 + 192))(
    v83,
    *(_DWORD *)(v6 + 408),
    0,
    0,
    v6 + 136672,
    0,
    0);
  v84 = *(_DWORD *)(v41 + 16);
  result = *(_DWORD *)(v6 + 408);
  a4 = *(_DWORD *)(v6 + 408);
  if ( *(_DWORD *)(v6 + 152) != v84 )
  {
    v86 = *(_DWORD *)(v6 + 8);
    *(_DWORD *)(v6 + 152) = v84;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v86 + 36))(v86, v84, 0, 0);
    result = a4;
  }
  if ( *(_DWORD *)(v6 + 156) != result )
  {
    *(_DWORD *)(v6 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v6 + 8) + 64))(
               *(_DWORD *)(v6 + 8),
               0,
               1,
               &a4);
  }
  return result;
}
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006DF2C: using guessed type wchar_t a_pmx1_dx11[11];
// 1006EDD8: using guessed type __int64 qword_1006EDD8;
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1004CB40) --------------------------------------------------------
int __thiscall sub_1004CB40(void *this, int a2)
{
  int v2; // ebp@0
  int v3; // ebx@1
  int v4; // esi@1
  int v5; // edi@1
  const void *v6; // edx@4
  int v7; // ecx@5
  const void *v8; // ecx@6
  __int16 v9; // ax@7
  int v10; // eax@9
  int v11; // ecx@14
  void *v12; // eax@14
  int v13; // ST28_4@19
  int v14; // ST24_4@19
  int v15; // ST20_4@19
  char v16; // al@19
  int v17; // ebx@20
  int v18; // eax@20
  int v19; // ebx@20
  int v20; // eax@20
  int v21; // ebx@22
  int v22; // ST24_4@22
  LPVOID v23; // ebx@22
  int v24; // ebx@23
  int v25; // ecx@23
  int v26; // eax@23
  int v27; // edx@28
  int v28; // ST14_4@28
  int v29; // edx@28
  int result; // eax@28
  int v31; // eax@29
  int v32; // edx@32
  int v33; // eax@33
  int v34; // [sp-10h] [bp-104h]@0
  int v35; // [sp-Ch] [bp-100h]@11
  int v36; // [sp+10h] [bp-E4h]@4
  int v37; // [sp+14h] [bp-E0h]@4
  int v38; // [sp+18h] [bp-DCh]@4
  int v39; // [sp+1Ch] [bp-D8h]@4
  int v40; // [sp+20h] [bp-D4h]@4
  int v41; // [sp+24h] [bp-D0h]@4
  int v42; // [sp+28h] [bp-CCh]@4
  int v43; // [sp+2Ch] [bp-C8h]@4
  int v44; // [sp+30h] [bp-C4h]@4
  int v45; // [sp+34h] [bp-C0h]@4
  int v46; // [sp+38h] [bp-BCh]@4
  int v47; // [sp+3Ch] [bp-B8h]@4
  int v48; // [sp+40h] [bp-B4h]@4
  int v49; // [sp+44h] [bp-B0h]@4
  int v50; // [sp+48h] [bp-ACh]@4
  int v51; // [sp+4Ch] [bp-A8h]@4
  int v52; // [sp+50h] [bp-A4h]@4
  int v53; // [sp+54h] [bp-A0h]@4
  int v54; // [sp+58h] [bp-9Ch]@4
  int v55; // [sp+5Ch] [bp-98h]@4
  int v56; // [sp+60h] [bp-94h]@4
  int v57; // [sp+64h] [bp-90h]@4
  int v58; // [sp+68h] [bp-8Ch]@4
  int v59; // [sp+6Ch] [bp-88h]@4
  int v60; // [sp+70h] [bp-84h]@4
  int v61; // [sp+74h] [bp-80h]@4
  int v62; // [sp+78h] [bp-7Ch]@4
  int v63; // [sp+7Ch] [bp-78h]@4
  LPVOID v64; // [sp+84h] [bp-70h]@9
  int v65; // [sp+94h] [bp-60h]@14
  unsigned int v66; // [sp+98h] [bp-5Ch]@9
  LPVOID v67; // [sp+9Ch] [bp-58h]@4
  int v68; // [sp+ACh] [bp-48h]@4
  unsigned int v69; // [sp+B0h] [bp-44h]@4
  LPVOID v70; // [sp+B4h] [bp-40h]@12
  int v71; // [sp+B8h] [bp-3Ch]@12
  int v72; // [sp+BCh] [bp-38h]@12
  int v73; // [sp+C0h] [bp-34h]@20
  int v74; // [sp+C4h] [bp-30h]@20
  int v75; // [sp+C8h] [bp-2Ch]@1
  int v76; // [sp+CCh] [bp-28h]@1
  int v77; // [sp+D0h] [bp-24h]@1
  int v78; // [sp+D4h] [bp-20h]@2
  int v79; // [sp+D8h] [bp-1Ch]@12
  int v80; // [sp+DCh] [bp-18h]@1
  LPVOID lpMem; // [sp+E0h] [bp-14h]@16
  int v82; // [sp+F0h] [bp-4h]@9

  v3 = (int)this;
  v80 = (int)this;
  v4 = (*(_DWORD *)a2 >> 25) & 1;
  v76 = (int)((char *)this + 376);
  v77 = v4;
  v75 = v4;
  sub_10002D30((int)((char *)this + 376), (int)&a2, (int)&v75);
  v5 = a2;
  if ( a2 == *(_DWORD *)(v3 + 380) )
  {
    a2 = (int)&v75;
    sub_10002E90(v3 + 376, (int)&v78, v3 + 376, (int)&a2, v3 + 376);
    v5 = v78;
  }
  if ( !*(_DWORD *)(v5 + 12) )
  {
    v36 = (int)"POSITION";
    v37 = 0;
    v38 = 6;
    v6 = *(const void **)(dword_1007CD9C + 1236);
    v39 = 0;
    v40 = 0;
    v41 = 0;
    v42 = 0;
    v43 = (int)"TEXCOORD";
    v44 = 0;
    v45 = 16;
    v46 = 0;
    v47 = -1;
    v48 = 0;
    v49 = 0;
    v50 = (int)"COLOR";
    v51 = 0;
    v52 = 87;
    v53 = 0;
    v54 = -1;
    v55 = 0;
    v56 = 0;
    v57 = (int)"COLOR";
    v58 = 1;
    v59 = 87;
    v60 = 0;
    v61 = -1;
    v62 = 0;
    v63 = 0;
    v69 = 7;
    v68 = 0;
    LOWORD(v67) = 0;
    if ( *(_WORD *)v6 )
    {
      v8 = v6;
      a2 = (int)((char *)v6 + 2);
      do
      {
        v9 = *(_WORD *)v8;
        v8 = (char *)v8 + 2;
      }
      while ( v9 );
      v7 = (signed int)((char *)v8 - a2) >> 1;
    }
    else
    {
      v7 = 0;
    }
    sub_10001460((int)&v67, v6, v7);
    v82 = 0;
    v10 = sub_100026C0((int)&v64, v4);
    LOBYTE(v82) = 1;
    sub_100017B0((int)&v67, v10, 0, 0xFFFFFFFF);
    LOBYTE(v82) = 0;
    if ( v66 >= 8 )
      sub_10001E40(v3, v5, v64, v66 + 1);
    sub_10001680((int)&v67, L"_PMX1_DX11", 0xAu);
    sub_10001680((int)&v67, L".vsh", 4u);
    if ( sub_10028FF8(v3, v5, (int)&a2) )
    {
      v70 = 0;
      v71 = 0;
      v72 = 0;
      LOBYTE(v82) = 2;
      v78 = (int)"PMX1";
      v79 = (int)"1";
      sub_100027D0((int)&v70, (unsigned int)&v78);
      if ( v4 )
      {
        v78 = (int)"USE_TEXTURE";
        v79 = (int)"1";
        sub_100027D0((int)&v70, (unsigned int)&v78);
      }
      v78 = 0;
      v79 = 0;
      sub_100027D0((int)&v70, (unsigned int)&v78);
      v66 = 15;
      v65 = 0;
      LOBYTE(v64) = 0;
      sub_10001990((int)&v64, "vs_main", 7u);
      LOBYTE(v82) = 3;
      v12 = &v64;
      if ( v66 >= 0x10 )
        v12 = v64;
      sub_10040760(
        (void *)v3,
        (int)&lpMem,
        L"PVR2_VSH",
        (int)&lpMem,
        (int)v70,
        (int)&lpMem,
        (int)v12,
        (int)"vs_5_0",
        v34,
        v35,
        (int)&lpMem,
        v11);
      LOBYTE(v82) = 2;
      if ( v66 >= 0x10 )
        sub_10001EA0(v3, v5, v64, v66 + 1);
      if ( !sub_10028FF8(v3, v5, (int)&a2) )
      {
        v13 = a2;
        v14 = (*(int (__stdcall **)(LPVOID, signed int))(*(_DWORD *)lpMem + 16))(lpMem, 1);
        v15 = (int)lpMem;
        v16 = (*(int (**)(void))(*(_DWORD *)lpMem + 12))();
        sub_1002936D(v3, v5, v16, v15, v14, v13);
        sub_100290B5(v3, v2, v5);
      }
      v17 = (*(int (__stdcall **)(LPVOID))(*(_DWORD *)lpMem + 16))(lpMem);
      v18 = (*(int (__stdcall **)(LPVOID))(*(_DWORD *)lpMem + 12))(lpMem);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v80 + 4) + 48))(
        *(_DWORD *)(v80 + 4),
        v18,
        v17,
        0,
        &v73);
      v19 = (*(int (__stdcall **)(LPVOID))(*(_DWORD *)lpMem + 16))(lpMem);
      v20 = (*(int (__stdcall **)(LPVOID))(*(_DWORD *)lpMem + 12))(lpMem);
      (*(void (__stdcall **)(_DWORD, int *, signed int, int, int, int *))(**(_DWORD **)(v80 + 4) + 44))(
        *(_DWORD *)(v80 + 4),
        &v36,
        4,
        v20,
        v19,
        &v74);
      LOBYTE(v82) = 0;
      v4 = v77;
      if ( v70 )
        sub_100029D0(v19, v5, v70, (v72 - (signed int)v70) >> 3);
    }
    else
    {
      sub_1002C003(v3, v5);
      v21 = sub_1002BD3E(v3, v5, a2);
      sub_1002C01E(v21, v2, v5);
      lpMem = sub_1002C36D(v21);
      sub_1002C2BD(v21, v5);
      sub_100290B5(v21, v2, v5);
      (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v80 + 4) + 48))(
        *(_DWORD *)(v80 + 4),
        lpMem,
        v21,
        0,
        &v73);
      v22 = v21;
      v23 = lpMem;
      (*(void (__stdcall **)(_DWORD, int *, signed int, LPVOID, int, int *))(**(_DWORD **)(v80 + 4) + 44))(
        *(_DWORD *)(v80 + 4),
        &v36,
        4,
        lpMem,
        v22,
        &v74);
      sub_1002C0EC(v23);
    }
    v24 = v76;
    lpMem = (LPVOID)v4;
    sub_10002D30(v76, (int)&v77, (int)&lpMem);
    v26 = v77;
    if ( v77 == *(_DWORD *)(v24 + 4) )
    {
      v76 = (int)&lpMem;
      sub_10002E90(v24, (int)&v78, v25, (int)&v76, v25);
      v26 = v78;
    }
    *(_DWORD *)(v26 + 12) = v73;
    *(_DWORD *)(v26 + 16) = v74;
    v82 = -1;
    if ( v69 >= 8 )
      sub_10001E40(v24, v5, v67, v69 + 1);
    v3 = v80;
  }
  v27 = *(_DWORD *)(v3 + 8);
  v28 = *(_DWORD *)(v3 + 372);
  *(float *)(v3 + 136656) = (float)dword_10239478;
  (*(void (__stdcall **)(int, int, _DWORD, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)v27 + 192))(
    v27,
    v28,
    0,
    0,
    v3 + 136400,
    0,
    0);
  v29 = *(_DWORD *)(v5 + 12);
  result = *(_DWORD *)(v3 + 372);
  v80 = *(_DWORD *)(v3 + 372);
  if ( *(_DWORD *)(v3 + 140) != v29 )
  {
    v31 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 140) = v29;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v31 + 44))(v31, v29, 0, 0);
    result = v80;
  }
  if ( *(_DWORD *)(v3 + 144) != result )
  {
    *(_DWORD *)(v3 + 144) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v3 + 8) + 28))(
               *(_DWORD *)(v3 + 8),
               0,
               1,
               &v80);
  }
  v32 = *(_DWORD *)(v5 + 16);
  if ( *(_DWORD *)(v3 + 148) != v32 )
  {
    v33 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 148) = v32;
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)v33 + 68))(v33, v32);
  }
  return result;
}
// 1006CC1C: using guessed type wchar_t a_vsh[5];
// 1006DF2C: using guessed type wchar_t a_pmx1_dx11[11];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 10239478: using guessed type int dword_10239478;

//----- (1004D0E0) --------------------------------------------------------
int __thiscall sub_1004D0E0(int this)
{
  int v1; // esi@1
  int v2; // eax@2
  int v3; // ecx@2
  int v4; // ST10_4@2
  int v5; // eax@2
  int result; // eax@2
  int v7; // [sp+8h] [bp-1Ch]@2
  int v8; // [sp+Ch] [bp-18h]@2
  int v9; // [sp+10h] [bp-14h]@2
  int v10; // [sp+14h] [bp-10h]@2
  int v11; // [sp+18h] [bp-Ch]@2
  int v12; // [sp+1Ch] [bp-8h]@2

  v1 = this;
  if ( *(_BYTE *)(this + 136392) )
  {
    v2 = *(_DWORD *)(this + 66056);
    v3 = *(_DWORD *)(this + 8);
    v4 = v2 + 512;
    *(_BYTE *)(v1 + 136392) = 0;
    v5 = *(_DWORD *)(v1 + 66692);
    v7 = 0;
    v10 = 512;
    v8 = 0;
    v11 = 1;
    v9 = 0;
    v12 = 1;
    result = (*(int (__stdcall **)(int, _DWORD, _DWORD, int *, int, _DWORD, _DWORD))(*(_DWORD *)v3 + 192))(
               v3,
               *(_DWORD *)v5,
               0,
               &v7,
               v4,
               0,
               0);
  }
  return result;
}

//----- (1004D1A0) --------------------------------------------------------
int __thiscall sub_1004D1A0(void *this, int a2)
{
  int v2; // ebx@1
  void *v3; // ebp@1
  int v4; // edx@1
  int v5; // esi@1
  int v6; // esi@3
  int result; // eax@3
  unsigned int v8; // edi@4
  int v9; // eax@4
  unsigned int v10; // ebx@4
  int v11; // esi@4
  unsigned int v12; // ecx@7
  signed int v13; // edx@8
  int v14; // esi@8
  unsigned int v15; // ecx@10
  int v16; // eax@17
  unsigned int v17; // ecx@17
  int v18; // edx@17
  int v19; // eax@17
  signed int v20; // esi@19
  int v21; // eax@20
  int v22; // ebp@24
  int v23; // ST14_4@30
  int v24; // eax@30
  int v25; // eax@31
  int v26; // ST10_4@31
  int v27; // eax@39
  bool v28; // cf@39
  bool v29; // zf@39
  int v30; // [sp+1Ch] [bp-54h]@17
  unsigned int v31; // [sp+20h] [bp-50h]@1
  unsigned int v32; // [sp+20h] [bp-50h]@17
  int v33; // [sp+24h] [bp-4Ch]@1
  int v34; // [sp+24h] [bp-4Ch]@17
  unsigned int v35; // [sp+28h] [bp-48h]@7
  void *v36; // [sp+2Ch] [bp-44h]@1
  int v37; // [sp+30h] [bp-40h]@5
  int v38; // [sp+34h] [bp-3Ch]@4
  int v39; // [sp+38h] [bp-38h]@17
  int v40; // [sp+3Ch] [bp-34h]@17
  int v41; // [sp+40h] [bp-30h]@3
  int v42; // [sp+44h] [bp-2Ch]@3
  int v43; // [sp+48h] [bp-28h]@4
  unsigned int v44; // [sp+4Ch] [bp-24h]@17
  unsigned int v45; // [sp+50h] [bp-20h]@23
  int v46; // [sp+54h] [bp-1Ch]@23
  int v47; // [sp+58h] [bp-18h]@19
  int v48; // [sp+5Ch] [bp-14h]@19
  int v49; // [sp+60h] [bp-10h]@19
  unsigned int v50; // [sp+64h] [bp-Ch]@19
  unsigned int v51; // [sp+68h] [bp-8h]@19
  int v52; // [sp+6Ch] [bp-4h]@19
  int v53; // [sp+74h] [bp+4h]@4

  v2 = *(_DWORD *)(a2 + 8);
  v3 = this;
  v4 = *(_DWORD *)(a2 + 4) >> 3;
  v33 = *(_DWORD *)(a2 + 8) >> 31;
  v5 = v4 & 7;
  v36 = this;
  v31 = *(_DWORD *)(a2 + 8);
  if ( !v33 )
    LOBYTE(v4) = *(_DWORD *)(a2 + 4);
  v41 = *(_DWORD *)(a2 + 8);
  v6 = ((unsigned __int8)v5 ^ (unsigned __int8)(8 * v4)) & 0x38 ^ v5;
  v42 = v6;
  result = sub_1004DE90(this, (int)&v41);
  if ( !result )
  {
    v43 = 0;
    v8 = 8 << (v6 & 7);
    v9 = 32 * (v2 & 0x1FFFFF);
    v10 = 8 << (((unsigned int)v6 >> 3) & 7);
    v11 = (v31 >> 30) & 1;
    v53 = v9;
    v38 = (v31 >> 30) & 1;
    if ( v11 )
    {
      v37 = v9;
      v53 = v9 + 2048;
    }
    else
    {
      v37 = v9;
    }
    v12 = 0;
    v35 = 0;
    if ( v33 )
    {
      v13 = 1;
      v14 = 0;
      v10 = v8;
      do
      {
        ++v12;
        v13 = __ROL4__(v13, 1);
        v14 += (v8 >> v12) * (v8 >> v12);
      }
      while ( v13 < v8 );
      v35 = v12;
      v15 = v14 + 3;
      v11 = (v31 >> 30) & 1;
      if ( v38 )
      {
        if ( !(v31 & 0x200000) )
          v15 >>= 2;
      }
      else if ( (v31 & 0x38000000) == 671088640 )
      {
        v15 *= 4;
      }
      else
      {
        v15 *= 2;
      }
      v53 += v15;
      v12 = v35;
    }
    v44 = v12 + 1;
    v16 = sub_1004D5D0(v3, (int)&v41);
    v17 = v31 >> 21;
    v34 = v16;
    v18 = (v31 >> 27) & 7;
    v30 = 0;
    v19 = (v31 >> 21) & 0x10;
    v40 = (v31 >> 27) & 7;
    v32 = v31 >> 21;
    v39 = v19;
    while ( v18 != 5 )
    {
      if ( !v11 )
      {
        v47 = 0;
        v50 = v8;
        v48 = 0;
        v51 = v10;
        v20 = 2 * v8 * v10;
        v49 = 0;
        v52 = 1;
        if ( v19 )
          v21 = (*(_DWORD *)(*((_DWORD *)v3 + 16514) + 228) & 0x1F) << 6;
        else
          v21 = 2 * v8;
        goto LABEL_35;
      }
      v20 = v8 * v10;
      v41 = 0;
      v44 = v8;
      v42 = 0;
      v45 = v10;
      v43 = 0;
      v46 = 1;
      if ( v19 )
        v22 = 32 * (*(_DWORD *)(*((_DWORD *)v3 + 16514) + 228) & 0x1F);
      else
        v22 = v8;
      if ( !(v17 & 1) )
      {
        if ( v8 <= 2 )
        {
          v44 = 1;
          v20 = 1;
          v45 = 1;
        }
        else
        {
          v20 >>= 2;
          v45 = v10 >> 2;
        }
      }
      v23 = v22;
      v3 = v36;
      (*(void (__stdcall **)(_DWORD, _DWORD, int, int *, int, int, _DWORD))(**((_DWORD **)v36 + 2) + 192))(
        *((_DWORD *)v36 + 2),
        **(_DWORD **)v34,
        v30,
        &v41,
        *((_DWORD *)v36 + 16512) + (v53 & (*((_DWORD *)v36 + 16513) - 1)),
        v23,
        0);
      v24 = v30;
      if ( v30 )
        goto LABEL_37;
      v41 = v30;
      v42 = v30;
      v43 = v30;
      v25 = *((_DWORD *)v36 + 16513) - 1;
      v44 = 2048;
      v26 = *((_DWORD *)v36 + 16512) + (v37 & v25);
      v45 = 1;
      v46 = 1;
      (*(void (__stdcall **)(_DWORD, _DWORD, int, int *, int, int, int))(**((_DWORD **)v36 + 2) + 192))(
        *((_DWORD *)v36 + 2),
        **(_DWORD **)(v34 + 4),
        0,
        &v41,
        v26,
        v30,
        v30);
LABEL_36:
      v24 = v30;
LABEL_37:
      if ( v8 > 2 )
        v20 >>= 2;
      v53 -= v20;
      v27 = v24 + 1;
      LOBYTE(v17) = v32;
      v11 = v38;
      v18 = v40;
      v8 >>= 1;
      v10 >>= 1;
      v28 = v27 < v35;
      v29 = v27 == v35;
      v30 = v27;
      v19 = v39;
      if ( !v28 && !v29 )
        return v34;
    }
    v47 = 0;
    v50 = v8;
    v48 = 0;
    v51 = v10;
    v49 = 0;
    v20 = 4 * v8 * v10;
    v52 = 1;
    if ( v19 )
      v21 = (*(_DWORD *)(*((_DWORD *)v3 + 16514) + 228) & 0x1F) << 7;
    else
      v21 = 4 * v8;
LABEL_35:
    (*(void (__stdcall **)(_DWORD, _DWORD, int, int *, int, int, int))(**((_DWORD **)v3 + 2) + 192))(
      *((_DWORD *)v3 + 2),
      **(_DWORD **)v34,
      v30,
      &v47,
      *((_DWORD *)v3 + 16512) + (v53 & (*((_DWORD *)v3 + 16513) - 1)),
      v21,
      0);
    goto LABEL_36;
  }
  return result;
}

//----- (1004D520) --------------------------------------------------------
void *__thiscall sub_1004D520(void *this, int a2)
{
  int v2; // ebp@1
  unsigned int v3; // esi@1
  unsigned int v4; // edx@1
  int v5; // ebx@1
  void *v6; // edi@2
  void *result; // eax@2
  void *v8; // esi@13
  unsigned int v9; // [sp+10h] [bp-8h]@1
  unsigned int v10; // [sp+14h] [bp-4h]@1

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 8) >> 12;
  v4 = (unsigned int)(*(_DWORD *)(a2 + 8) + *(_DWORD *)(a2 + 12)) >> 12;
  v10 = v3;
  v9 = (unsigned int)(*(_DWORD *)(a2 + 8) + *(_DWORD *)(a2 + 12)) >> 12;
  v5 = (int)((char *)this + 8 * v3 + 70856);
  do
  {
    v6 = *(void **)v5;
    result = (void *)**(_DWORD **)v5;
    if ( result == *(void **)v5 )
      goto LABEL_9;
    do
    {
      if ( *((_DWORD *)result + 2) != v2 )
        goto LABEL_6;
      if ( (int *)((char *)result + 8) == &a2 )
      {
        v6 = result;
LABEL_6:
        result = *(void **)result;
        continue;
      }
      v8 = *(void **)result;
      **((_DWORD **)result + 1) = *(_DWORD *)result;
      *(_DWORD *)(*(_DWORD *)result + 4) = *((_DWORD *)result + 1);
      --*(_DWORD *)(v5 + 4);
      sub_1000F409(result);
      result = v8;
    }
    while ( result != *(void **)v5 );
    v3 = v10;
    v4 = v9;
LABEL_9:
    if ( v6 != *(void **)v5 )
    {
      **((_DWORD **)v6 + 1) = *(_DWORD *)v6;
      *(_DWORD *)(*(_DWORD *)v6 + 4) = *((_DWORD *)v6 + 1);
      --*(_DWORD *)(v5 + 4);
      result = (void *)sub_1000F409(v6);
      v4 = v9;
    }
    ++v3;
    v5 += 8;
    v10 = v3;
  }
  while ( v3 < v4 );
  return result;
}

//----- (1004D5D0) --------------------------------------------------------
int __thiscall sub_1004D5D0(void *this, int a2)
{
  int v2; // esi@1
  bool v3; // zf@1
  int v4; // ecx@2
  int v5; // edi@6
  void *v6; // ST10_4@7
  int v7; // ecx@7
  int v8; // ebx@7
  int v9; // eax@7
  int v10; // ebx@9
  signed int v11; // eax@11
  void *v12; // ST10_4@13
  int v13; // edi@13
  void *v14; // esi@13
  int v15; // ecx@14
  int v16; // ecx@16
  int v17; // ecx@18
  void *v18; // esi@23
  int v19; // ecx@24
  int v20; // eax@35
  unsigned int v21; // eax@35
  signed int v22; // edx@35
  signed int v23; // eax@35
  unsigned int v24; // eax@36
  unsigned int v25; // edx@36
  int v26; // ecx@36
  int v27; // eax@36
  int v28; // eax@36
  unsigned int v29; // eax@38
  int v30; // eax@39
  __int128 *v31; // ecx@39
  int v32; // eax@41
  int v33; // eax@41
  int v34; // eax@41
  int v35; // eax@41
  LPVOID v36; // edi@41
  int v37; // ebx@41
  int v38; // eax@41
  int v39; // eax@42
  int v40; // ecx@45
  unsigned int v41; // eax@46
  char v42; // cl@46
  int v43; // ecx@50
  int v44; // eax@50
  int v45; // edi@51
  int v46; // eax@52
  int v47; // edi@53
  signed int v48; // edx@56
  unsigned int v49; // eax@60
  unsigned int v50; // edi@60
  int v51; // esi@60
  int v52; // ebx@61
  LPVOID v53; // edx@61
  int v55; // [sp-8h] [bp-18Ch]@39
  const unsigned __int16 *v56; // [sp+0h] [bp-184h]@0
  __int128 v57; // [sp+Ch] [bp-178h]@42
  __int128 v58; // [sp+1Ch] [bp-168h]@42
  __int64 v59; // [sp+2Ch] [bp-158h]@42
  int v60; // [sp+34h] [bp-150h]@42
  __int128 v61; // [sp+38h] [bp-14Ch]@41
  __int128 v62; // [sp+48h] [bp-13Ch]@41
  __int64 v63; // [sp+58h] [bp-12Ch]@41
  int v64; // [sp+60h] [bp-124h]@41
  int v65; // [sp+64h] [bp-120h]@42
  int v66; // [sp+68h] [bp-11Ch]@42
  __int128 v67; // [sp+7Ch] [bp-108h]@41
  __int64 v68; // [sp+8Ch] [bp-F8h]@41
  __int128 v69; // [sp+94h] [bp-F0h]@36
  __int64 v70; // [sp+A4h] [bp-E0h]@36
  __int128 v71; // [sp+ACh] [bp-D8h]@36
  __int128 v72; // [sp+BCh] [bp-C8h]@36
  __int64 v73; // [sp+CCh] [bp-B8h]@36
  int v74; // [sp+D4h] [bp-B0h]@36
  __int128 v75; // [sp+D8h] [bp-ACh]@42
  __int128 v76; // [sp+E8h] [bp-9Ch]@42
  __int64 v77; // [sp+F8h] [bp-8Ch]@42
  __int128 v78; // [sp+104h] [bp-80h]@39
  __int64 v79; // [sp+114h] [bp-70h]@39
  __int128 v80; // [sp+11Ch] [bp-68h]@36
  __int64 v81; // [sp+12Ch] [bp-58h]@36
  __int128 v82; // [sp+134h] [bp-50h]@36
  __int128 v83; // [sp+144h] [bp-40h]@36
  __int64 v84; // [sp+154h] [bp-30h]@36
  int v85; // [sp+160h] [bp-24h]@1
  int v86; // [sp+164h] [bp-20h]@35
  int v87; // [sp+168h] [bp-1Ch]@7
  int v88; // [sp+16Ch] [bp-18h]@9
  unsigned int v89; // [sp+170h] [bp-14h]@10
  int v90; // [sp+180h] [bp-4h]@14
  unsigned int v91; // [sp+18Ch] [bp+8h]@60

  v2 = (int)this;
  v3 = *(_DWORD *)(a2 + 8) == 0;
  v85 = (int)this;
  if ( v3 )
  {
    if ( (*(_DWORD *)a2 & 0x38000000) == 671088640 )
      v4 = 1;
    else
      v4 = ~(unsigned __int8)(*(_DWORD *)a2 >> 30) & 1 | 2;
  }
  else
  {
    v4 = 0;
  }
  v5 = v2 + 8 * (*(_DWORD *)(a2 + 4) + ((v4 + 4 * (*(_DWORD *)a2 >> 31)) << 6));
  if ( !*(_DWORD *)(v5 + 66764) )
  {
    if ( *(_DWORD *)(v2 + 66172) > 0x2000000u )
    {
      v10 = v2 + 66760;
      v88 = 2;
      do
      {
        v89 = 4;
        do
        {
          v11 = 64;
          v87 = 64;
          do
          {
            if ( *(_DWORD *)(v10 + 4) > 1u )
            {
              do
              {
                v12 = *(void **)(*(_DWORD *)v10 + 4);
                v13 = *((_DWORD *)v12 + 2);
                **((_DWORD **)v12 + 1) = *(_DWORD *)v12;
                *(_DWORD *)(*(_DWORD *)v12 + 4) = *((_DWORD *)v12 + 1);
                --*(_DWORD *)(v10 + 4);
                sub_1000F409(v12);
                *(_DWORD *)(v2 + 66172) -= *(_DWORD *)(v13 + 12);
                v14 = *(void **)v13;
                if ( *(_DWORD *)v13 )
                {
                  v90 = 0;
                  v15 = *((_DWORD *)v14 + 3);
                  if ( v15 )
                  {
                    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v15 + 8))(*((_DWORD *)v14 + 3));
                    *((_DWORD *)v14 + 3) = 0;
                  }
                  v16 = *((_DWORD *)v14 + 2);
                  if ( v16 )
                  {
                    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v16 + 8))(*((_DWORD *)v14 + 2));
                    *((_DWORD *)v14 + 2) = 0;
                  }
                  v17 = *((_DWORD *)v14 + 1);
                  if ( v17 )
                  {
                    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v17 + 8))(*((_DWORD *)v14 + 1));
                    *((_DWORD *)v14 + 1) = 0;
                  }
                  if ( *(_DWORD *)v14 )
                  {
                    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)v14 + 8))(*(_DWORD *)v14);
                    *(_DWORD *)v14 = 0;
                  }
                  v90 = -1;
                  sub_1000F417(v14);
                }
                v18 = *(void **)(v13 + 4);
                if ( v18 )
                {
                  v90 = 1;
                  v19 = *((_DWORD *)v18 + 1);
                  if ( v19 )
                  {
                    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v19 + 8))(*((_DWORD *)v18 + 1));
                    *((_DWORD *)v18 + 1) = 0;
                  }
                  if ( *(_DWORD *)v18 )
                  {
                    (*(void (__stdcall **)(_DWORD))(**(_DWORD **)v18 + 8))(*(_DWORD *)v18);
                    *(_DWORD *)v18 = 0;
                  }
                  v90 = -1;
                  sub_1000F417(v18);
                }
                sub_1000F417((LPVOID)v13);
                v2 = v85;
              }
              while ( *(_DWORD *)(v85 + 66172) >= 0x2000000u && *(_DWORD *)(v10 + 4) > 1u );
              v11 = v87;
            }
            v10 += 8;
            --v11;
            v87 = v11;
          }
          while ( v11 );
          --v89;
        }
        while ( v89 );
        --v88;
      }
      while ( v88 );
    }
    v20 = (int)sub_1000F0A6(0x24u);
    v8 = v20;
    v88 = v20;
    v86 = v20;
    v87 = v20;
    *(_DWORD *)v20 = 0;
    *(_DWORD *)(v20 + 4) = 0;
    *(_DWORD *)(v20 + 20) = 0;
    *(_DWORD *)(v20 + 32) = 0;
    *(_DWORD *)(v20 + 32) = *(_DWORD *)(v2 + 66756);
    *(_DWORD *)(v2 + 66756) = v20;
    v21 = *(_DWORD *)(a2 + 4);
    v22 = 8 << (v21 & 7);
    v23 = 8 << ((v21 >> 3) & 7);
    v89 = v23;
    if ( *(_DWORD *)(a2 + 8) )
    {
      *(_QWORD *)&v82 = __PAIR__(v23, v22);
      *((_QWORD *)&v82 + 1) = 4294967297i64;
      *(_QWORD *)&v83 = 4294967324i64;
      v71 = v82;
      *((_QWORD *)&v83 + 1) = 0i64;
      v84 = 8i64;
      v72 = 4294967324i64;
      *(_QWORD *)&v80 = 17179869212i64;
      _mm_storel_epi64((__m128i *)&v73, _mm_loadl_epi64((const __m128i *)&v84));
      *((_QWORD *)&v80 + 1) = -4294967296i64;
      v74 = 0;
      v69 = v80;
      _mm_storel_epi64((__m128i *)&v70, _mm_loadl_epi64((const __m128i *)&v81));
      v24 = (unsigned int)sub_1000F0A6(0x10u);
      v25 = v24;
      v88 = v24;
      v90 = 2;
      v24 += 4;
      *(_DWORD *)v88 = 0;
      *(_DWORD *)(v25 + 8) = 0;
      *(_DWORD *)(v25 + 12) = 0;
      *(_DWORD *)v24 = 0;
      v26 = *(_DWORD *)(v2 + 4);
      v89 = v24;
      v27 = (*(int (__stdcall **)(int, __int128 *, _DWORD, unsigned int))(*(_DWORD *)v26 + 20))(v26, &v71, 0, v25);
      sub_100410C0(v2, v8, v27, L"Failed create texture");
      v28 = v88;
      if ( *(_DWORD *)v88 )
      {
        (*(void (__stdcall **)(_DWORD, _DWORD, __int128 *, unsigned int))(**(_DWORD **)(v2 + 4) + 28))(
          *(_DWORD *)(v2 + 4),
          *(_DWORD *)v88,
          &v69,
          v89);
        v8 = v86;
        v28 = v88;
      }
    }
    else
    {
      v29 = *(_DWORD *)(a2 + 12);
      if ( (*(_DWORD *)a2 & 0x38000000) == 671088640 )
      {
        *(_QWORD *)&v82 = __PAIR__(v89, v22);
        *((_QWORD *)&v82 + 1) = __PAIR__(1, v29);
        *(_QWORD *)&v83 = 4294967338i64;
        v71 = v82;
        *((_QWORD *)&v83 + 1) = 0i64;
        v84 = 8i64;
        v72 = 4294967338i64;
        *(_QWORD *)&v80 = 17179869226i64;
        _mm_storel_epi64((__m128i *)&v73, _mm_loadl_epi64((const __m128i *)&v84));
        *((_QWORD *)&v80 + 1) = -4294967296i64;
        v74 = 0;
        v78 = v80;
        _mm_storel_epi64((__m128i *)&v79, _mm_loadl_epi64((const __m128i *)&v81));
        v30 = (int)sub_1000F0A6(0x10u);
        v86 = v30;
        v90 = 3;
        v55 = (int)&v78;
        v31 = &v71;
      }
      else
      {
        if ( *(_DWORD *)a2 & 0x40000000 )
        {
          *((_QWORD *)&v82 + 1) = __PAIR__(1, v29);
          *(_QWORD *)&v82 = __PAIR__(v89, v22);
          *(_QWORD *)&v83 = 4294967358i64;
          v61 = v82;
          *((_QWORD *)&v83 + 1) = 0i64;
          v84 = 8i64;
          v62 = 4294967358i64;
          v64 = 0;
          _mm_storel_epi64((__m128i *)&v63, _mm_loadl_epi64((const __m128i *)&v84));
          *(_QWORD *)&v78 = 17179869246i64;
          v32 = sub_10002630((int)&v78, -1, 3);
          *(_QWORD *)&v80 = 2048i64;
          *((_QWORD *)&v80 + 1) = 8i64;
          *(__int128 *)((char *)&v72 + 4) = *(_OWORD *)v32;
          v81 = 0i64;
          _mm_storel_epi64((__m128i *)((char *)&v73 + 4), _mm_loadl_epi64((const __m128i *)(v32 + 16)));
          *(__int128 *)((char *)&v83 + 4) = v80;
          *(_QWORD *)&v78 = 4294967353i64;
          _mm_storel_epi64((__m128i *)((char *)&v84 + 4), _mm_loadl_epi64((const __m128i *)&v81));
          v33 = sub_10002630((int)&v78, 1024, 0);
          v67 = *(_OWORD *)v33;
          _mm_storel_epi64((__m128i *)&v68, _mm_loadl_epi64((const __m128i *)(v33 + 16)));
          v34 = (int)sub_1000F0A6(0x10u);
          v88 = v34;
          v90 = 4;
          v35 = sub_10008760(v34, v2, (int)&v61, (int)((char *)&v72 + 4), 0);
          v90 = -1;
          *(_DWORD *)v8 = v35;
          v36 = sub_1000F0A6(8u);
          v88 = (int)v36;
          v37 = v85;
          v90 = 5;
          *(_DWORD *)v36 = 0;
          *((_DWORD *)v36 + 1) = 0;
          v38 = (*(int (__stdcall **)(_DWORD, char *, _DWORD, LPVOID, _DWORD))(**(_DWORD **)(v37 + 4) + 12))(
                  *(_DWORD *)(v37 + 4),
                  (char *)&v83 + 4,
                  0,
                  v36,
                  L"Failed create buffer");
          sub_100410C0(v37, v37, v38, v56);
          (*(void (__stdcall **)(_DWORD, _DWORD, __int128 *))(**(_DWORD **)(v37 + 4) + 28))(
            *(_DWORD *)(v37 + 4),
            *(_DWORD *)v36,
            &v67);
          v2 = v85;
          v90 = -1;
          v8 = v86;
          *(_DWORD *)(v86 + 4) = v36;
          goto LABEL_45;
        }
        *((_QWORD *)&v75 + 1) = __PAIR__(1, v29);
        *(_QWORD *)&v75 = __PAIR__(v89, v22);
        *(_QWORD *)&v76 = 4294967353i64;
        v57 = v75;
        *((_QWORD *)&v76 + 1) = 0i64;
        v77 = 8i64;
        v58 = 4294967353i64;
        v60 = 0;
        _mm_storel_epi64((__m128i *)&v59, _mm_loadl_epi64((const __m128i *)&v77));
        v65 = 57;
        v66 = 4;
        v39 = sub_10002630((int)&v65, -1, 3);
        *(__int128 *)((char *)&v76 + 4) = *(_OWORD *)v39;
        _mm_storel_epi64((__m128i *)((char *)&v77 + 4), _mm_loadl_epi64((const __m128i *)(v39 + 16)));
        v30 = (int)sub_1000F0A6(0x10u);
        v86 = v30;
        v90 = 6;
        v55 = (int)((char *)&v76 + 4);
        v31 = &v57;
      }
      v28 = sub_10008760(v30, v2, (int)v31, v55, 0);
    }
    v90 = -1;
    *(_DWORD *)v8 = v28;
LABEL_45:
    v40 = *(_DWORD *)a2;
    if ( (*(_DWORD *)a2 & 0x38000000) == 671088640 )
    {
      v41 = *(_DWORD *)(a2 + 4);
      v42 = (v41 & 7) + 5;
    }
    else
    {
      if ( v40 & 0x2000000 )
      {
        *(_DWORD *)(v8 + 12) = 8 << (((*(_DWORD *)(a2 + 4) >> 3) & 7) + (*(_BYTE *)(a2 + 4) & 7) + 4);
        goto LABEL_59;
      }
      if ( v40 & 0x40000000 )
      {
        *(_DWORD *)(v8 + 12) = 2048;
        v43 = *(_DWORD *)(a2 + 4) & 7;
        v44 = (*(_DWORD *)(a2 + 4) >> 3) & 7;
        if ( *(_DWORD *)a2 & 0x200000 )
        {
          v47 = (8 << (v44 + v43 + 3)) + 2048;
          *(_DWORD *)(v8 + 12) = v47;
          if ( *(_DWORD *)a2 < 0x80000000 )
            goto LABEL_59;
          v46 = v47 + dword_1006E1D4[*(_DWORD *)(a2 + 4) & 7];
        }
        else
        {
          v45 = (8 << (v44 + v43 + 1)) + 2048;
          *(_DWORD *)(v8 + 12) = v45;
          if ( *(_DWORD *)a2 < 0x80000000 )
            goto LABEL_59;
          v46 = v45 + dword_1006E214[*(_DWORD *)(a2 + 4) & 7];
        }
LABEL_58:
        *(_DWORD *)(v8 + 12) = v46;
        goto LABEL_59;
      }
      v41 = *(_DWORD *)(a2 + 4);
      v42 = (v41 & 7) + 4;
    }
    v48 = 8 << (((v41 >> 3) & 7) + v42);
    *(_DWORD *)(v8 + 12) = v48;
    if ( *(_DWORD *)a2 >= 0x80000000 )
    {
      v46 = v48 + dword_1006E254[*(_DWORD *)(a2 + 4) & 7];
      goto LABEL_58;
    }
LABEL_59:
    *(_DWORD *)(v2 + 66172) += *(_DWORD *)(v8 + 12);
    goto LABEL_60;
  }
  v6 = (void *)**(_DWORD **)(v5 + 66760);
  v7 = *((_DWORD *)v6 + 1);
  v9 = *(_DWORD *)v6;
  v87 = *((_DWORD *)v6 + 2);
  v8 = v87;
  *(_DWORD *)v7 = v9;
  *(_DWORD *)(*(_DWORD *)v6 + 4) = *((_DWORD *)v6 + 1);
  --*(_DWORD *)(v5 + 66764);
  sub_1000F409(v6);
  sub_1004D520((void *)v2, v8);
LABEL_60:
  *(_OWORD *)(v8 + 16) = *(_OWORD *)a2;
  v49 = 32 * (*(_DWORD *)a2 & 0x1FFFFF);
  *(_DWORD *)(v8 + 8) = v49;
  v50 = v49 >> 12;
  v91 = (v49 + *(_DWORD *)(v8 + 12)) >> 12;
  v51 = v2 + 8 * (v49 >> 12) + 70860;
  do
  {
    v52 = *(_DWORD *)(v51 - 4);
    v53 = sub_10008EF0(*(void **)(v51 - 4), *(void **)(v52 + 4), (int)&v87);
    if ( (unsigned int)(357913940 - *(_DWORD *)v51) < 1 )
      sub_1000DA74((int)"list<T> too long");
    ++v50;
    ++*(_DWORD *)v51;
    v51 += 8;
    *(_DWORD *)(v52 + 4) = v53;
    **((_DWORD **)v53 + 1) = v53;
  }
  while ( v50 < v91 );
  return v87;
}
// 1006DD2C: using guessed type wchar_t aFailedCreateTe[22];
// 1006DD58: using guessed type wchar_t aFailedCreateBu[21];
// 1006E1D4: using guessed type int dword_1006E1D4[];
// 1006E214: using guessed type int dword_1006E214[];
// 1006E254: using guessed type int dword_1006E254[];

//----- (1004DE90) --------------------------------------------------------
int __thiscall sub_1004DE90(void *this, int a2)
{
  int v2; // ecx@1
  int v3; // eax@1
  int v4; // edx@2
  int result; // eax@8

  v2 = *((_DWORD *)this + 2 * ((*(_DWORD *)a2 >> 7) & 0x3FFF) + 17714);
  v3 = *(_DWORD *)v2;
  if ( *(_DWORD *)v2 == v2 )
  {
LABEL_8:
    result = 0;
  }
  else
  {
    while ( 1 )
    {
      v4 = *(_DWORD *)(v3 + 8);
      if ( *(_DWORD *)(v4 + 8) == 32 * (*(_DWORD *)a2 & 0x1FFFFF)
        && (*(_DWORD *)(v4 + 24) == 1
         || *(_DWORD *)(a2 + 8) == 1
         || *(_DWORD *)(v4 + 20) == *(_DWORD *)(a2 + 4) && *(_DWORD *)(v4 + 16) == *(_DWORD *)a2) )
        break;
      v3 = *(_DWORD *)v3;
      if ( v3 == v2 )
        goto LABEL_8;
    }
    result = *(_DWORD *)(v3 + 8);
  }
  return result;
}

//----- (1004DF00) --------------------------------------------------------
int __stdcall sub_1004DF00(unsigned int a1, int a2)
{
  void *v2; // ebp@1
  unsigned int v3; // ebx@1
  int v4; // edi@1
  int i; // esi@2
  void *v6; // ecx@6
  int result; // eax@6
  void *v8; // esi@7
  unsigned int v9; // [sp+18h] [bp+4h]@1

  v2 = (void *)dword_1007CE10;
  v3 = a1 >> 12;
  v9 = (a1 + a2) >> 12;
  v4 = dword_1007CE10 + 70856 + 8 * v3;
  do
  {
    for ( i = **(_DWORD **)v4; i != *(_DWORD *)v4; i = *(_DWORD *)i )
    {
      if ( *(_DWORD *)(*(_DWORD *)(i + 8) + 20) != -1 )
        sub_1004DFA0(v2, *(_DWORD *)(i + 8));
    }
    v6 = (void *)**(_DWORD **)v4;
    **(_DWORD **)v4 = *(_DWORD *)v4;
    result = *(_DWORD *)v4;
    *(_DWORD *)(result + 4) = result;
    *(_DWORD *)(v4 + 4) = 0;
    if ( v6 != *(void **)v4 )
    {
      do
      {
        v8 = *(void **)v6;
        result = sub_1000F409(v6);
        v6 = v8;
      }
      while ( v8 != *(void **)v4 );
    }
    ++v3;
    v4 += 8;
  }
  while ( v3 < v9 );
  return result;
}
// 1007CE10: using guessed type int dword_1007CE10;

//----- (1004DFA0) --------------------------------------------------------
int __thiscall sub_1004DFA0(void *this, int a2)
{
  void *v2; // ebx@1
  unsigned int v3; // edi@1
  unsigned int v4; // eax@1
  int v5; // eax@3
  int v6; // edx@4
  int v7; // ecx@8
  int v8; // edi@8
  int v9; // esi@8
  LPVOID v10; // edx@8
  int v11; // eax@8
  int result; // eax@9

  v2 = this;
  v3 = *(_DWORD *)(a2 + 16);
  v4 = *(_DWORD *)(a2 + 20);
  if ( v3 < 0x80000000 )
    v4 >>= 3;
  v5 = *(_DWORD *)(a2 + 20) & 7 | 8 * (v4 & 7);
  if ( *(_DWORD *)(a2 + 24) )
  {
    v6 = 0;
  }
  else if ( (v3 & 0x38000000) == 671088640 )
  {
    v6 = 1;
  }
  else
  {
    v6 = ~(v3 >> 30) & 1 | 2;
  }
  v7 = v5 + ((v6 + 4 * (v3 >> 31)) << 6);
  v8 = *((_DWORD *)v2 + 2 * v7 + 16690);
  v9 = (int)((char *)v2 + 8 * v7);
  v10 = sub_10008EF0(*((void **)v2 + 2 * v7 + 16690), *(void **)(v8 + 4), (int)&a2);
  v11 = *(_DWORD *)(v9 + 66764);
  if ( (unsigned int)(357913940 - v11) < 1 )
    sub_1000DA74((int)"list<T> too long");
  *(_DWORD *)(v9 + 66764) = v11 + 1;
  *(_DWORD *)(v8 + 4) = v10;
  **((_DWORD **)v10 + 1) = v10;
  result = a2;
  *(_DWORD *)(a2 + 20) = -1;
  return result;
}

//----- (1004E090) --------------------------------------------------------
int __thiscall sub_1004E090(void *this)
{
  signed int v1; // ebx@1
  int v2; // edi@1
  void *v3; // edx@2
  void *v4; // esi@3
  int v5; // edi@6
  void *v6; // esi@6
  int v7; // ecx@7
  int v8; // ecx@9
  int v9; // ecx@11
  void *v10; // esi@16
  int v11; // ecx@17
  int v12; // edi@23
  signed int v13; // ebx@25
  int result; // eax@26
  int v15; // esi@27
  signed int v16; // ebx@31
  int v17; // edi@31
  void *v18; // esi@32
  int v19; // ecx@33
  int v20; // ecx@35
  int v21; // ecx@37
  signed int v22; // ebx@43
  int v23; // edi@43
  void *v24; // esi@44
  int v25; // ecx@45
  int v26; // ecx@47
  int v27; // ecx@49
  void *v28; // esi@55
  int v29; // ecx@56
  signed int v30; // [sp+Ch] [bp-18h]@23
  signed int v31; // [sp+10h] [bp-14h]@24
  void *v32; // [sp+14h] [bp-10h]@1

  v1 = 0x2000;
  v32 = this;
  v2 = (int)((char *)this + 70856);
  do
  {
    v3 = (void *)**(_DWORD **)v2;
    **(_DWORD **)v2 = *(_DWORD *)v2;
    *(_DWORD *)(*(_DWORD *)v2 + 4) = *(_DWORD *)v2;
    *(_DWORD *)(v2 + 4) = 0;
    if ( v3 != *(void **)v2 )
    {
      do
      {
        v4 = *(void **)v3;
        sub_1000F409(v3);
        v3 = v4;
      }
      while ( v4 != *(void **)v2 );
    }
    v2 += 8;
    --v1;
  }
  while ( v1 );
  while ( *((_DWORD *)v32 + 16689) )
  {
    v5 = *((_DWORD *)v32 + 16689);
    *((_DWORD *)v32 + 16689) = *(_DWORD *)(v5 + 32);
    v6 = *(void **)v5;
    if ( *(_DWORD *)v5 )
    {
      v7 = *((_DWORD *)v6 + 3);
      if ( v7 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v7 + 8))(v7, v3, *((_DWORD *)v6 + 3));
        *((_DWORD *)v6 + 3) = 0;
      }
      v8 = *((_DWORD *)v6 + 2);
      if ( v8 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v8 + 8))(v8, v3, *((_DWORD *)v6 + 2));
        *((_DWORD *)v6 + 2) = 0;
      }
      v9 = *((_DWORD *)v6 + 1);
      if ( v9 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v9 + 8))(v9, v3, *((_DWORD *)v6 + 1));
        *((_DWORD *)v6 + 1) = 0;
      }
      if ( *(_DWORD *)v6 )
      {
        (*(void (__fastcall **)(_DWORD, void *, _DWORD))(**(_DWORD **)v6 + 8))(*(_DWORD *)v6, v3, *(_DWORD *)v6);
        *(_DWORD *)v6 = 0;
      }
      sub_1000F417(v6);
    }
    v10 = *(void **)(v5 + 4);
    if ( v10 )
    {
      v11 = *((_DWORD *)v10 + 1);
      if ( v11 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v11 + 8))(v11, v3, *((_DWORD *)v10 + 1));
        *((_DWORD *)v10 + 1) = 0;
      }
      if ( *(_DWORD *)v10 )
      {
        (*(void (__fastcall **)(_DWORD, void *, _DWORD))(**(_DWORD **)v10 + 8))(*(_DWORD *)v10, v3, *(_DWORD *)v10);
        *(_DWORD *)v10 = 0;
      }
      sub_1000F417(v10);
    }
    sub_1000F417((LPVOID)v5);
  }
  v12 = (int)((char *)v32 + 66760);
  v30 = 2;
  do
  {
    v31 = 4;
    do
    {
      v13 = 64;
      do
      {
        result = **(_DWORD **)v12;
        **(_DWORD **)v12 = *(_DWORD *)v12;
        *(_DWORD *)(*(_DWORD *)v12 + 4) = *(_DWORD *)v12;
        *(_DWORD *)(v12 + 4) = 0;
        if ( result != *(_DWORD *)v12 )
        {
          do
          {
            v15 = *(_DWORD *)result;
            sub_1000F409((LPVOID)result);
            result = v15;
          }
          while ( v15 != *(_DWORD *)v12 );
        }
        v12 += 8;
        --v13;
      }
      while ( v13 );
      --v31;
    }
    while ( v31 );
    --v30;
  }
  while ( v30 );
  v16 = 64;
  v17 = (int)((char *)v32 + 66180);
  do
  {
    v18 = *(void **)v17;
    if ( *(_DWORD *)v17 )
    {
      v19 = *((_DWORD *)v18 + 3);
      if ( v19 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v19 + 8))(v19, v3, *((_DWORD *)v18 + 3));
        *((_DWORD *)v18 + 3) = 0;
      }
      v20 = *((_DWORD *)v18 + 2);
      if ( v20 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v20 + 8))(v20, v3, *((_DWORD *)v18 + 2));
        *((_DWORD *)v18 + 2) = 0;
      }
      v21 = *((_DWORD *)v18 + 1);
      if ( v21 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v21 + 8))(v21, v3, *((_DWORD *)v18 + 1));
        *((_DWORD *)v18 + 1) = 0;
      }
      if ( *(_DWORD *)v18 )
      {
        (*(void (__fastcall **)(_DWORD, void *, _DWORD))(**(_DWORD **)v18 + 8))(*(_DWORD *)v18, v3, *(_DWORD *)v18);
        *(_DWORD *)v18 = 0;
      }
      result = sub_1000F417(v18);
    }
    *(_DWORD *)v17 = 0;
    v17 += 4;
    --v16;
  }
  while ( v16 );
  v22 = 64;
  v23 = (int)((char *)v32 + 66436);
  do
  {
    v24 = *(void **)v23;
    if ( *(_DWORD *)v23 )
    {
      v25 = *((_DWORD *)v24 + 3);
      if ( v25 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v25 + 8))(v25, v3, *((_DWORD *)v24 + 3));
        *((_DWORD *)v24 + 3) = 0;
      }
      v26 = *((_DWORD *)v24 + 2);
      if ( v26 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v26 + 8))(v26, v3, *((_DWORD *)v24 + 2));
        *((_DWORD *)v24 + 2) = 0;
      }
      v27 = *((_DWORD *)v24 + 1);
      if ( v27 )
      {
        (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v27 + 8))(v27, v3, *((_DWORD *)v24 + 1));
        *((_DWORD *)v24 + 1) = 0;
      }
      if ( *(_DWORD *)v24 )
      {
        (*(void (__fastcall **)(_DWORD, void *, _DWORD))(**(_DWORD **)v24 + 8))(*(_DWORD *)v24, v3, *(_DWORD *)v24);
        *(_DWORD *)v24 = 0;
      }
      result = sub_1000F417(v24);
    }
    *(_DWORD *)v23 = 0;
    v23 += 4;
    --v22;
  }
  while ( v22 );
  v28 = (void *)*((_DWORD *)v32 + 16673);
  if ( v28 )
  {
    v29 = *((_DWORD *)v28 + 1);
    if ( v29 )
    {
      (*(void (__fastcall **)(int, void *, _DWORD))(*(_DWORD *)v29 + 8))(v29, v3, *((_DWORD *)v28 + 1));
      *((_DWORD *)v28 + 1) = 0;
    }
    if ( *(_DWORD *)v28 )
    {
      (*(void (__fastcall **)(_DWORD, void *, _DWORD))(**(_DWORD **)v28 + 8))(*(_DWORD *)v28, v3, *(_DWORD *)v28);
      *(_DWORD *)v28 = 0;
    }
    result = sub_1000F417(v28);
  }
  *((_DWORD *)v32 + 16673) = 0;
  return result;
}

//----- (1004E3C0) --------------------------------------------------------
int __usercall sub_1004E3C0@<eax>(const unsigned __int16 *a1@<eax>, int a2@<ecx>, void *a3@<ebx>, int *a4@<edi>, int a5@<esi>)
{
  signed int v5; // edx@1
  int v6; // ecx@1
  unsigned int v7; // ecx@2
  signed int v8; // eax@2
  signed int v9; // eax@4
  signed int v10; // eax@6
  signed int v11; // eax@8
  signed int v12; // eax@10
  signed int v13; // eax@12
  signed int v14; // eax@14
  signed int v15; // eax@16
  int v16; // ebx@19
  LPVOID v17; // edx@19
  signed int v18; // eax@20
  int *v19; // ecx@20
  int v20; // edi@21
  int v21; // esi@21
  signed int v22; // edx@22
  int *v23; // eax@25
  int v24; // ecx@25
  int v25; // edi@26
  int v26; // esi@26
  signed int v27; // edx@27
  int v28; // ecx@31
  signed int v29; // edi@32
  int v30; // edx@32
  signed int v31; // eax@32
  int v32; // edx@33
  signed int v33; // esi@33
  signed int v34; // ebx@33
  int v35; // edi@34
  int *v36; // edx@34
  int v37; // ecx@34
  int v38; // ecx@36
  int v39; // edi@36
  char *v40; // eax@36
  int v41; // ecx@37
  LPVOID v42; // eax@41
  __int128 *v43; // esi@41
  int v44; // eax@41
  int v45; // ecx@41
  int v46; // eax@41
  int v47; // eax@41
  __int64 *v48; // edx@41
  int v49; // eax@42
  __int128 *v50; // eax@42
  LPVOID v51; // edi@45
  int v52; // eax@45
  int v53; // ebx@46
  int v54; // esi@46
  __int64 v55; // rax@46
  int v56; // esi@47
  __int64 *v57; // ebx@47
  int *v58; // ecx@48
  __int128 *v59; // esi@48
  int v60; // ecx@48
  signed int v61; // edi@49
  int *v62; // ecx@50
  __int128 *v63; // ebx@50
  int v64; // esi@51
  __int64 v65; // rax@51
  int v66; // ecx@51
  int v67; // esi@51
  __int128 *v68; // esi@55
  int v69; // ebx@55
  int v70; // ecx@55
  int v71; // eax@55
  int v72; // eax@55
  __int64 *v73; // edx@55
  __int128 *v74; // eax@56
  int v75; // ecx@56
  __int128 *v76; // eax@59
  __int128 *v77; // edi@59
  int v78; // ebx@59
  int v79; // esi@59
  int v80; // edx@59
  int v81; // ecx@59
  int v82; // eax@59
  int *v83; // eax@59
  int v84; // ecx@59
  int result; // eax@59
  int v86[16384]; // [sp+0h] [bp-20230h]@25
  int v87[16384]; // [sp+10000h] [bp-10230h]@20
  int v88; // [sp+20000h] [bp-230h]@4
  int v89; // [sp+20004h] [bp-22Ch]@6
  int v90; // [sp+20008h] [bp-228h]@8
  int v91; // [sp+2000Ch] [bp-224h]@10
  int v92; // [sp+20010h] [bp-220h]@12
  int v93; // [sp+20014h] [bp-21Ch]@14
  int v94; // [sp+20018h] [bp-218h]@16
  int v95[57]; // [sp+2001Ch] [bp-214h]@18
  __int128 v96; // [sp+20100h] [bp-130h]@59
  __int64 v97; // [sp+20110h] [bp-120h]@59
  __int128 v98; // [sp+20118h] [bp-118h]@59
  __int64 v99; // [sp+20128h] [bp-108h]@59
  __int128 v100; // [sp+20130h] [bp-100h]@55
  __int64 v101; // [sp+20140h] [bp-F0h]@55
  __int128 v102; // [sp+20148h] [bp-E8h]@41
  __int64 v103; // [sp+20158h] [bp-D8h]@41
  __int128 v104; // [sp+20160h] [bp-D0h]@41
  __int128 v105; // [sp+20170h] [bp-C0h]@41
  __int64 v106; // [sp+20180h] [bp-B0h]@41
  int v107; // [sp+20188h] [bp-A8h]@41
  __int128 *v108; // [sp+2018Ch] [bp-A4h]@55
  int v109; // [sp+20190h] [bp-A0h]@47
  int v110; // [sp+20194h] [bp-9Ch]@50
  __int128 v111; // [sp+20198h] [bp-98h]@55
  __int128 v112; // [sp+201A8h] [bp-88h]@55
  __int64 v113; // [sp+201B8h] [bp-78h]@41
  int v114; // [sp+201C8h] [bp-68h]@41
  __int128 v115; // [sp+201CCh] [bp-64h]@41
  __int128 v116; // [sp+201DCh] [bp-54h]@41
  __int64 v117; // [sp+201ECh] [bp-44h]@41
  int v118; // [sp+201F4h] [bp-3Ch]@59
  int v119; // [sp+201F8h] [bp-38h]@32
  int v120; // [sp+201FCh] [bp-34h]@33
  int v121; // [sp+20200h] [bp-30h]@34
  int v122; // [sp+20204h] [bp-2Ch]@34
  __int128 *v123; // [sp+20208h] [bp-28h]@33
  __int64 *v124; // [sp+2020Ch] [bp-24h]@31
  __int128 *v125; // [sp+20210h] [bp-20h]@32
  int v126; // [sp+20214h] [bp-1Ch]@1
  int *v127; // [sp+20218h] [bp-18h]@1
  int v128; // [sp+2021Ch] [bp-14h]@1
  LPVOID lpMem; // [sp+20220h] [bp-10h]@1
  const unsigned __int16 *v130; // [sp+20224h] [bp-Ch]@1
  int (__cdecl *v131)(int, int, int, int); // [sp+20228h] [bp-8h]@1
  int v132; // [sp+2022Ch] [bp-4h]@1

  v132 = -1;
  v131 = sub_10063C82;
  v130 = a1;
  sub_1003B650(a2);
  lpMem = a3;
  v5 = 0;
  v126 = v6;
  v128 = a5;
  v127 = a4;
  do
  {
    v7 = 32 * v5;
    v8 = v5;
    if ( v5 > 0 )
      v8 = 0;
    *(int *)((char *)&v88 + v7) = v8 + 3;
    v9 = v5;
    if ( v5 > 1 )
      v9 = 1;
    *(int *)((char *)&v89 + v7) = v9 + 3;
    v10 = v5;
    if ( v5 > 2 )
      v10 = 2;
    *(int *)((char *)&v90 + v7) = v10 + 3;
    v11 = v5;
    if ( v5 > 3 )
      v11 = 3;
    *(int *)((char *)&v91 + v7) = v11 + 3;
    v12 = v5;
    if ( v5 > 4 )
      v12 = 4;
    *(int *)((char *)&v92 + v7) = v12 + 3;
    v13 = v5;
    if ( v5 > 5 )
      v13 = 5;
    *(int *)((char *)&v93 + v7) = v13 + 3;
    v14 = v5;
    if ( v5 > 6 )
      v14 = 6;
    *(int *)((char *)&v94 + v7) = v14 + 3;
    v15 = v5;
    if ( v5 > 7 )
      v15 = 7;
    ++v5;
    v95[v7 / 4] = v15 + 3;
  }
  while ( v5 < 8 );
  v16 = 0;
  v17 = 0;
  lpMem = 0;
  do
  {
    v18 = 0;
    v19 = (int *)((char *)v17 + (_DWORD)v87);
    v128 = 0;
    v127 = (int *)((char *)v17 + (_DWORD)v87);
    do
    {
      v20 = 0;
      v21 = v18;
      if ( (signed int)v17 > 0 )
      {
        do
        {
          v22 = 1 << 2 * v20++;
          v21 = (v21 & (v22 - 1)) + 2 * ((v21 & v22) + (v21 & 2 * ~(v22 - 1)));
        }
        while ( v20 < v16 );
        v18 = v128;
        v19 = v127;
        v17 = lpMem;
      }
      ++v18;
      *v19 = v21;
      ++v19;
      v128 = v18;
      v127 = v19;
    }
    while ( v18 < 1024 );
    v23 = 0;
    v24 = (int)((char *)v17 + (_DWORD)v86);
    v127 = 0;
    v128 = (int)((char *)v17 + (_DWORD)v86);
    do
    {
      v25 = 0;
      v26 = (int)v23;
      if ( (signed int)v17 > 0 )
      {
        do
        {
          v27 = 1 << 2 * v25++;
          v26 = (v26 & (v27 - 1)) + 2 * (v26 & 2 * ~(v27 - 1)) + (v27 & v26);
        }
        while ( v25 < v16 );
        v23 = v127;
        v24 = v128;
        v17 = lpMem;
      }
      v23 = (int *)((char *)v23 + 1);
      *(_DWORD *)v24 = v26;
      v24 += 4;
      v127 = v23;
      v128 = v24;
    }
    while ( (signed int)v23 < 1024 );
    v17 = (char *)v17 + 4096;
    ++v16;
    lpMem = v17;
  }
  while ( (signed int)v17 < 61440 );
  lpMem = sub_1002C36D(0x400000u);
  v28 = 0;
  v124 = 0;
  do
  {
    v29 = 0;
    v30 = 8 * v28;
    v128 = 0;
    v31 = 8 << v28;
    v119 = 8 * v28;
    v125 = (__int128 *)(8 << v28);
    do
    {
      v32 = v29 | v30;
      v33 = 8 << v29;
      v34 = 0;
      v120 = v32;
      v123 = (__int128 *)(8 << v29);
      if ( v31 > 0 )
      {
        v35 = (int)(&v88 + v32);
        v36 = (int *)lpMem;
        v37 = 4 * v33;
        v121 = v35;
        v122 = 4 * v33;
        v127 = (int *)lpMem;
        do
        {
          if ( v33 > 0 )
          {
            v38 = *(_DWORD *)v35 << 12;
            v39 = *(&v86[1024 * *(_DWORD *)v35] + v34);
            v40 = (char *)v87 + v38;
            do
            {
              v41 = *(_DWORD *)v40;
              v40 += 4;
              ++v36;
              *(v36 - 1) = v39 + v41;
              --v33;
            }
            while ( v33 );
            v36 = v127;
            v33 = (signed int)v123;
            v31 = (signed int)v125;
            v37 = v122;
            v35 = v121;
          }
          ++v34;
          v36 = (int *)((char *)v36 + v37);
          v127 = v36;
        }
        while ( v34 < v31 );
        v29 = v128;
      }
      DWORD1(v115) = v31;
      v42 = lpMem;
      LODWORD(v115) = v33;
      *((_QWORD *)&v115 + 1) = 4294967297i64;
      *((_QWORD *)&v116 + 1) = 0i64;
      v104 = v115;
      *(_QWORD *)&v116 = 4294967338i64;
      v117 = 8i64;
      v105 = 4294967338i64;
      *(_QWORD *)((char *)&v116 + 4) = 17179869226i64;
      _mm_storel_epi64((__m128i *)&v106, _mm_loadl_epi64((const __m128i *)&v117));
      DWORD3(v116) = 0;
      LODWORD(v117) = -1;
      LODWORD(v113) = v42;
      v126 = 16;
      v102 = *(__int128 *)((char *)&v116 + 4);
      v107 = 0;
      _mm_storel_epi64((__m128i *)&v103, _mm_loadl_epi64((const __m128i *)((char *)&v117 + 4)));
      _mm_storel_epi64((__m128i *)((char *)&v113 + 4), 0i64);
      HIDWORD(v113) = 4 * v33;
      v43 = (__int128 *)sub_1000F0A6(v126);
      v114 = (int)v43;
      v44 = v126;
      v132 = 0;
      v126 = (int)L"Failed create texture";
      *(_DWORD *)v43 = 0;
      *((_DWORD *)v43 + 1) = 0;
      *((_DWORD *)v43 + 2) = 0;
      *((_DWORD *)v43 + 3) = 0;
      v45 = *(_DWORD *)(v44 + 4);
      v125 = v43;
      v124 = &v113;
      v46 = *(_DWORD *)v45;
      v123 = &v104;
      v122 = v45;
      v47 = (*(int (__stdcall **)(int, __int128 *, __int64 *, __int128 *))(v46 + 20))(v45, &v104, &v113, v43);
      sub_100410C0(v126, (int)((char *)v43 + 4), v47, (const unsigned __int16 *)v126);
      v48 = *(__int64 **)v43;
      if ( *(_DWORD *)v43 )
      {
        v49 = v126;
        v126 = (int)((char *)v43 + 4);
        v125 = &v102;
        v50 = *(__int128 **)(v49 + 4);
        v124 = v48;
        v123 = v50;
        (*(void (__stdcall **)(__int128 *, __int64 *, __int128 *, int))(*(_DWORD *)v50 + 28))(
          v50,
          v48,
          &v102,
          (char *)v43 + 4);
      }
      ++v29;
      v30 = v119;
      v132 = -1;
      v128 = v29;
      *(_DWORD *)(v126 + 4 * v120 + 66180) = v43;
      v31 = (signed int)v125;
    }
    while ( v29 < 8 );
    v28 = (int)((char *)v124 + 1);
    v124 = (__int64 *)v28;
  }
  while ( v28 < 8 );
  sub_1002C0EC(lpMem);
  v51 = sub_1002C36D(0x800000u);
  v52 = 0;
  lpMem = v51;
  v123 = 0;
  do
  {
    v53 = 0;
    v54 = 8 * v52;
    v127 = 0;
    v114 = 8 * v52;
    HIDWORD(v55) = 8 << v52;
    v128 = 8 << v52;
    do
    {
      v56 = v53 | v54;
      v109 = v56;
      LODWORD(v55) = 8 << v53;
      v57 = 0;
      v122 = v55;
      v124 = 0;
      if ( SHIDWORD(v55) > 0 )
      {
        v125 = (__int128 *)v51;
        v58 = &v88 + v56;
        v59 = (__int128 *)v51;
        v119 = (int)v58;
        v60 = 8 * v55;
        do
        {
          v61 = 0;
          if ( (signed int)v55 > 0 )
          {
            HIDWORD(v113) = 0;
            v62 = &v86[1024 * *(_DWORD *)v119];
            HIDWORD(v55) = *(_DWORD *)v119 << 10;
            v110 = *(_DWORD *)v119 << 10;
            v120 = v62[(signed int)v57 >> 1];
            LODWORD(v55) = v62[(unsigned __int8)v57 & 1];
            v63 = v59;
            v121 = v55;
            do
            {
              HIDWORD(v113) = 0;
              v63 = (__int128 *)((char *)v63 + 8);
              v64 = v87[HIDWORD(v55) + (v61 & 1)];
              v65 = v120 + v87[HIDWORD(v55) + (v61 >> 1)];
              v66 = v65;
              LODWORD(v55) = v122;
              v67 = HIDWORD(v55) | (v121 + v64);
              HIDWORD(v55) = v110;
              ++v61;
              *((_DWORD *)v63 - 2) = v66;
              *((_DWORD *)v63 - 1) = v67;
            }
            while ( v61 < (signed int)v55 );
            v57 = v124;
            v60 = 8 * v55;
            v59 = v125;
            HIDWORD(v55) = v128;
          }
          v57 = (__int64 *)((char *)v57 + 1);
          v59 = (__int128 *)((char *)v59 + v60);
          v124 = v57;
          v125 = v59;
        }
        while ( (signed int)v57 < SHIDWORD(v55) );
        v51 = lpMem;
      }
      *(_QWORD *)&v111 = v55;
      *((_QWORD *)&v111 + 1) = 4294967297i64;
      *((_QWORD *)&v112 + 1) = 0i64;
      v104 = v111;
      *(_QWORD *)&v112 = 4294967313i64;
      v113 = 8i64;
      v105 = 4294967313i64;
      *(_QWORD *)((char *)&v112 + 4) = 17179869201i64;
      _mm_storel_epi64((__m128i *)&v106, _mm_loadl_epi64((const __m128i *)&v113));
      DWORD3(v112) = 0;
      LODWORD(v113) = -1;
      v126 = 16;
      v100 = *(__int128 *)((char *)&v112 + 4);
      v107 = 0;
      _mm_storel_epi64((__m128i *)&v101, _mm_loadl_epi64((const __m128i *)((char *)&v113 + 4)));
      _mm_storel_epi64((__m128i *)((char *)&v117 + 4), 0i64);
      LODWORD(v117) = v51;
      HIDWORD(v117) = 8 * v55;
      v68 = (__int128 *)sub_1000F0A6(v126);
      v108 = v68;
      v69 = v126;
      v132 = 1;
      v126 = (int)L"Failed create texture";
      *(_DWORD *)v68 = 0;
      *((_DWORD *)v68 + 1) = 0;
      *((_DWORD *)v68 + 2) = 0;
      *((_DWORD *)v68 + 3) = 0;
      v70 = *(_DWORD *)(v69 + 4);
      v125 = v68;
      v124 = &v117;
      v71 = *(_DWORD *)v70;
      v123 = &v104;
      v122 = v70;
      v72 = (*(int (__stdcall **)(int, __int128 *, __int64 *, __int128 *))(v71 + 20))(v70, &v104, &v117, v68);
      sub_100410C0(v69, v69, v72, (const unsigned __int16 *)v126);
      v73 = *(__int64 **)v68;
      if ( *(_DWORD *)v68 )
      {
        v74 = *(__int128 **)(v69 + 4);
        v126 = (int)((char *)v68 + 4);
        v125 = &v100;
        v75 = *(_DWORD *)v74;
        v124 = v73;
        v123 = v74;
        (*(void (__stdcall **)(__int128 *, __int64 *, __int128 *, int))(v75 + 28))(v74, v73, &v100, (char *)v68 + 4);
      }
      HIDWORD(v55) = v128;
      v51 = lpMem;
      v132 = -1;
      *(_DWORD *)(v69 + 4 * v109 + 66436) = v68;
      v54 = v114;
      v53 = (int)((char *)v127 + 1);
      v127 = (int *)v53;
    }
    while ( v53 < 8 );
    v52 = (int)((char *)v123 + 1);
    v123 = (__int128 *)v52;
  }
  while ( v52 < 8 );
  sub_1002C0EC(v51);
  *(_QWORD *)((char *)&v116 + 4) = 512i64;
  DWORD3(v116) = 8;
  v117 = 0i64;
  v118 = 0;
  v98 = *(__int128 *)((char *)&v116 + 4);
  *(_QWORD *)((char *)&v116 + 4) = 4294967324i64;
  _mm_storel_epi64((__m128i *)&v99, _mm_loadl_epi64((const __m128i *)((char *)&v117 + 4)));
  DWORD3(v116) = 0;
  LODWORD(v117) = 128;
  v126 = 8;
  v96 = *(__int128 *)((char *)&v116 + 4);
  _mm_storel_epi64((__m128i *)&v97, _mm_loadl_epi64((const __m128i *)((char *)&v117 + 4)));
  v76 = (__int128 *)sub_1000F0A6(v126);
  v77 = v76;
  v108 = v76;
  v78 = v126;
  v79 = (int)((char *)v76 + 4);
  v132 = 2;
  v126 = (int)L"Failed create buffer";
  *(_DWORD *)v76 = 0;
  *((_DWORD *)v76 + 1) = 0;
  v80 = *(_DWORD *)(v78 + 4);
  v125 = v76;
  v124 = 0;
  v123 = &v98;
  v81 = *(_DWORD *)v80;
  v122 = v80;
  v82 = (*(int (__stdcall **)(int, __int128 *, _DWORD, __int128 *, int, int *, int, LPVOID))(v81 + 12))(
          v80,
          &v98,
          0,
          v76,
          v126,
          v127,
          v128,
          lpMem);
  sub_100410C0(v78, v78, v82, v130);
  v83 = *(int **)(v78 + 4);
  v130 = (const unsigned __int16 *)v79;
  lpMem = &v96;
  v128 = *(_DWORD *)v77;
  v84 = *v83;
  v127 = v83;
  result = (*(int (__stdcall **)(int *, int, __int128 *))(v84 + 28))(v83, v128, &v96);
  *(_DWORD *)(v78 + 66692) = v77;
  *(_DWORD *)(v78 + 66756) = 0;
  return result;
}
// 1004E3C0: could not find valid save-restore pair for ebx
// 1004E3C0: could not find valid save-restore pair for edi
// 1004E3C0: could not find valid save-restore pair for esi
// 1003B650: using guessed type int __thiscall sub_1003B650(_DWORD);
// 1006DD2C: using guessed type wchar_t aFailedCreateTe[22];
// 1006DD58: using guessed type wchar_t aFailedCreateBu[21];
// 1004E3C0: using guessed type int var_214[57];
// 1004E3C0: using guessed type int var_10230[16384];
// 1004E3C0: using guessed type int var_20230[16384];

//----- (1004EC40) --------------------------------------------------------
void *__thiscall sub_1004EC40(void *this)
{
  int v1; // ebp@0
  void *v2; // esi@1
  int v3; // edx@1
  void *result; // eax@1

  v2 = this;
  sub_10042AF0(this);
  v3 = dword_1007CD9C;
  *((_DWORD *)v2 + 16512) = *(_DWORD *)(dword_1007CD9C + 320);
  *((_DWORD *)v2 + 16513) = *(_DWORD *)(v3 + 324);
  sub_10008F10((int)((char *)v2 + 66092));
  sub_1000F76B(v1, (int)((char *)v2 + 66760), 8, 512, (int)sub_10008900, (int)&loc_10002970);
  sub_1000F76B(v1, (int)((char *)v2 + 70856), 8, 0x2000, (int)sub_10008900, (int)&loc_10002970);
  memset((char *)v2 + 66180, 0, 0x100u);
  memset((char *)v2 + 66436, 0, 0x100u);
  *((_DWORD *)v2 + 16673) = 0;
  *((_DWORD *)v2 + 16675) = 0;
  *((_DWORD *)v2 + 16676) = 0;
  *((_DWORD *)v2 + 16677) = 0;
  *((_DWORD *)v2 + 16678) = 0;
  *((_DWORD *)v2 + 16685) = 0;
  *((_DWORD *)v2 + 16687) = 0;
  *((_DWORD *)v2 + 16682) = 0;
  *((_DWORD *)v2 + 16684) = 0;
  *((_DWORD *)v2 + 16683) = 0;
  *((_DWORD *)v2 + 16679) = 0;
  *((_DWORD *)v2 + 16681) = 0;
  *((_DWORD *)v2 + 16680) = 0;
  *((_DWORD *)v2 + 16544) = 0;
  *((_DWORD *)v2 + 16686) = 0;
  *((_DWORD *)v2 + 16688) = 0;
  *((_DWORD *)v2 + 16543) = 0;
  *((_DWORD *)v2 + 16689) = 0;
  result = v2;
  *((_DWORD *)v2 + 16515) = 1142947840;
  *((_DWORD *)v2 + 16516) = 1139802112;
  return result;
}
// 10008900: using guessed type int sub_10008900();
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1004EFA0) --------------------------------------------------------
int __thiscall sub_1004EFA0(void *this)
{
  int v1; // ebp@0
  int v2; // ebx@1
  int v3; // ecx@1
  int v4; // edx@1
  unsigned __int64 v5; // rt0@7
  __int64 v6; // rdi@7
  int v7; // esi@12
  const void *v8; // edx@15
  int v9; // ecx@16
  const void *v10; // ecx@17
  __int16 v11; // ax@18
  int v12; // eax@20
  int v13; // edi@29
  int v14; // ecx@36
  void *v15; // eax@36
  int v16; // ST28_4@41
  int v17; // ST24_4@41
  int v18; // ST20_4@41
  char v19; // al@41
  int v20; // edi@42
  int v21; // eax@42
  int v22; // ebx@44
  int v23; // ecx@45
  int v24; // eax@45
  int v25; // eax@49
  int v26; // edx@50
  unsigned int v27; // eax@52
  unsigned int v28; // eax@52
  int v29; // eax@54
  int v30; // edi@56
  int v31; // edx@56
  int v32; // eax@56
  int v33; // eax@58
  unsigned int v34; // ecx@62
  unsigned int v35; // edx@62
  char v36; // al@63
  char v37; // al@68
  int v38; // edx@70
  int result; // eax@70
  int v40; // eax@71
  int v41; // [sp-10h] [bp-98h]@0
  int v42; // [sp-Ch] [bp-94h]@22
  LPVOID lpMem; // [sp+Ch] [bp-7Ch]@21
  int v44; // [sp+1Ch] [bp-6Ch]@36
  unsigned int v45; // [sp+20h] [bp-68h]@20
  LPVOID v46; // [sp+24h] [bp-64h]@15
  int v47; // [sp+34h] [bp-54h]@15
  unsigned int v48; // [sp+38h] [bp-50h]@15
  LPVOID v49; // [sp+3Ch] [bp-4Ch]@23
  int v50; // [sp+40h] [bp-48h]@23
  int v51; // [sp+44h] [bp-44h]@23
  int v52; // [sp+48h] [bp-40h]@13
  int v53; // [sp+4Ch] [bp-3Ch]@24
  __int64 v54; // [sp+50h] [bp-38h]@12
  int v55; // [sp+58h] [bp-30h]@12
  int *v56; // [sp+5Ch] [bp-2Ch]@7
  int *v57; // [sp+60h] [bp-28h]@45
  int v58; // [sp+64h] [bp-24h]@1
  int v59; // [sp+6Ch] [bp-1Ch]@38
  unsigned int v60; // [sp+70h] [bp-18h]@7
  int v61; // [sp+74h] [bp-14h]@22
  int v62; // [sp+78h] [bp-10h]@1
  int v63; // [sp+84h] [bp-4h]@20

  v2 = (int)this;
  v3 = 0;
  v58 = v2;
  v4 = *(_DWORD *)(v2 + 8704);
  v62 = 0;
  switch ( (*(_DWORD *)(v4 + 232) >> 4) & 0xF )
  {
    case 0:
      v3 = (*(_DWORD *)(v4 + 268) >> 10) & 1;
      goto LABEL_6;
    case 1:
      v3 = ~(unsigned __int8)(*(_DWORD *)(v4 + 268) >> 10) & 1;
      goto LABEL_6;
    case 2:
    case 4:
    case 6:
      v3 = 0;
      goto LABEL_6;
    case 3:
    case 5:
    case 7:
      v3 = 1;
LABEL_6:
      v62 = v3;
      break;
    default:
      break;
  }
  HIDWORD(v5) = (*(_DWORD *)(v4 + 208) & 0x10 | 0x40000u) / 0x800;
  LODWORD(v5) = (*(_DWORD *)(v4 + 68) >> 2) & 3 | ((*(_DWORD *)(v4 + 208) & 0x10 | 0x40000u) >> 4 << 25);
  v6 = v5 << 6;
  v60 = v5 >> 26;
  v56 = (int *)((_DWORD)v5 << 6);
  if ( ((_DWORD)v5 << 6) & 0x80000000 )
  {
    HIDWORD(v6) |= (unsigned __int64)(unsigned int)v3 >> 8;
    LODWORD(v6) = v6 | (v3 << 24);
    v56 = (int *)v6;
LABEL_11:
    v60 = HIDWORD(v6);
    goto LABEL_12;
  }
  if ( byte_102394CA )
  {
    LODWORD(v6) = v6 | 0x2000;
    v56 = (int *)v6;
    goto LABEL_11;
  }
LABEL_12:
  v54 = v6;
  sub_10002CB0((void *)(v2 + 412), (int)&v55, (int)&v54);
  v7 = v55;
  if ( v55 == *(_DWORD *)(v2 + 416) )
  {
    v55 = (int)&v54;
    sub_10002E30(v2 + 412, (int)&v52, v2 + 412, (int)&v55, v2 + 412);
    v7 = v52;
  }
  if ( !*(_DWORD *)(v7 + 16) )
  {
    v48 = 7;
    v47 = 0;
    v8 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v46) = 0;
    if ( *(_WORD *)v8 )
    {
      v10 = v8;
      v55 = (int)((char *)v8 + 2);
      do
      {
        v11 = *(_WORD *)v10;
        v10 = (char *)v10 + 2;
      }
      while ( v11 );
      v9 = (signed int)((char *)v10 - v55) >> 1;
    }
    else
    {
      v9 = 0;
    }
    sub_10001460((int)&v46, v8, v9);
    v63 = 0;
    v12 = sub_10008360(__PAIR__(v60, (unsigned int)v6));
    LOBYTE(v63) = 1;
    sub_100017B0((int)&v46, v12, 0, 0xFFFFFFFF);
    LOBYTE(v63) = 0;
    if ( v45 >= 8 )
      sub_10001E40(v2, v6, lpMem, v45 + 1);
    sub_10001680((int)&v46, L"_CLX2V06", 8u);
    sub_10001680((int)&v46, L".psh", 4u);
    if ( sub_10028FF8(v2, v6, (int)&v61) )
    {
      v49 = 0;
      v50 = 0;
      v51 = 0;
      LOBYTE(v63) = 2;
      if ( v6 & 0x80000000 )
      {
        v52 = (int)"INTERLACE";
        v53 = (int)"1";
        sub_100027D0((int)&v49, (unsigned int)&v52);
        v53 = (int)"1";
        v52 = (int)"FIELD1";
        if ( !(v6 & 0x1000000) )
          v52 = (int)"FIELD0";
        sub_100027D0((int)&v49, (unsigned int)&v52);
      }
      if ( (v6 & 0x6000) == 0x2000 )
      {
        v52 = (int)"BILINEAR";
        v53 = (int)"1";
        sub_100027D0((int)&v49, (unsigned int)&v52);
      }
      v13 = (__PAIR__(v60, (unsigned int)v6) >> 6) & 7;
      if ( (unsigned int)v13 <= 3 )
      {
        switch ( v13 )
        {
          case 0:
            v52 = (int)"Read0555";
            goto LABEL_35;
          case 1:
            v52 = (int)"Read565";
            goto LABEL_35;
          case 2:
            v52 = (int)"Read888";
            goto LABEL_35;
          case 3:
            v52 = (int)"Read8888";
LABEL_35:
            v53 = (int)"1";
            sub_100027D0((int)&v49, (unsigned int)&v52);
            break;
          default:
            break;
        }
      }
      v52 = 0;
      v53 = 0;
      sub_100027D0((int)&v49, (unsigned int)&v52);
      v45 = 15;
      v44 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "ReadFB", 6u);
      LOBYTE(v63) = 3;
      v15 = &lpMem;
      if ( v45 >= 0x10 )
        v15 = lpMem;
      sub_10040760(
        (void *)v2,
        (int)&v59,
        L"FRAMEBUF_PSH",
        (int)&v59,
        (int)v49,
        (int)&v59,
        (int)v15,
        (int)"ps_5_0",
        v41,
        v42,
        (int)&v59,
        v14);
      LOBYTE(v63) = 2;
      if ( v45 >= 0x10 )
        sub_10001EA0(v2, v13, lpMem, v45 + 1);
      if ( !sub_10028FF8(v2, v13, (int)&v61) )
      {
        v16 = v61;
        v17 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v59 + 16))(v59, 1);
        v18 = v59;
        v19 = (*(int (**)(void))(*(_DWORD *)v59 + 12))();
        sub_1002936D(v2, v13, v19, v18, v17, v16);
        sub_100290B5(v2, v1, v13);
      }
      v20 = (*(int (__stdcall **)(int))(*(_DWORD *)v59 + 16))(v59);
      v21 = (*(int (__stdcall **)(int))(*(_DWORD *)v59 + 12))(v59);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v2 + 4) + 60))(
        *(_DWORD *)(v2 + 4),
        v21,
        v20,
        0,
        &v55);
      LOBYTE(v63) = 0;
      v2 = v58;
      if ( v49 )
        sub_100029D0(v58, v20, v49, (v51 - (signed int)v49) >> 3);
    }
    else
    {
      sub_1002C003(v2, v6);
      v22 = sub_1002BD3E(v2, v6, v61);
      sub_1002C01E(v22, v1, v6);
      v20 = (int)sub_1002C36D(v22);
      sub_1002C2BD(v22, v20);
      sub_100290B5(v22, v1, v20);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v58 + 4) + 60))(
        *(_DWORD *)(v58 + 4),
        v20,
        v22,
        0,
        &v55);
      sub_1002C0EC((LPVOID)v20);
      v2 = v58;
    }
    v57 = v56;
    v58 = v60;
    sub_10002CB0((void *)(v2 + 412), (int)&v56, (int)&v57);
    v24 = (int)v56;
    if ( v56 == *(int **)(v2 + 416) )
    {
      v56 = (int *)&v57;
      sub_10002E30(v2 + 412, (int)&v52, v23, (int)&v56, v23);
      v24 = v52;
    }
    *(_DWORD *)(v24 + 16) = v55;
    v63 = -1;
    if ( v48 >= 8 )
      sub_10001E40(v2, v20, v46, v48 + 1);
  }
  v25 = *(_DWORD *)(v2 + 8704);
  if ( v62 )
    v26 = *(_DWORD *)(v25 + 84);
  else
    v26 = *(_DWORD *)(v25 + 80);
  v27 = (((v26 & 0xFFFFFFu) >> 20) & 4) + (v26 & 0xFFFFFF & (*(_DWORD *)(v2 + 8716) - 8388605)) + 2 * (v26 & 0x3FFFFC);
  v55 = v27;
  v28 = v27 >> 1;
  if ( *(_DWORD *)(v2 + 11100) != v28 )
  {
    *(_DWORD *)(v2 + 11100) = v28;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v29 = (*(_DWORD *)(*(_DWORD *)(v2 + 8704) + 68) >> 4) & 7;
  if ( *(_DWORD *)(v2 + 11028) != v29 )
  {
    *(_DWORD *)(v2 + 11028) = v29;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v30 = (*(_DWORD *)(*(_DWORD *)(v2 + 8704) + 92) >> 10) & 0x3FF;
  v31 = (*(_DWORD *)(*(_DWORD *)(v2 + 8704) + 92) & 0x3FF) + ((*(_DWORD *)(*(_DWORD *)(v2 + 8704) + 92) >> 20) & 0x3FF);
  v32 = *(_DWORD *)(v2 + 31588);
  if ( *(_DWORD *)(v2 + 11092) != v32 )
  {
    *(_DWORD *)(v2 + 11092) = v32;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v33 = *(_DWORD *)(v2 + 31592);
  if ( *(_DWORD *)(v2 + 11096) != v33 )
  {
    *(_DWORD *)(v2 + 11096) = v33;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  if ( *(_DWORD *)(v2 + 11108) != 2 * v31 )
  {
    *(_DWORD *)(v2 + 11108) = 2 * v31;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v34 = (unsigned int)v55 >> 11;
  v35 = (unsigned int)(v55 + 8 * v31 * (v30 + 1) - 1) >> 11;
  while ( 1 )
  {
    v36 = *(_BYTE *)(v34++ + v2 + 32164);
    if ( !v36 )
      break;
    if ( v34 > v35 || v34 >= 0x2000 )
      goto LABEL_68;
  }
  sub_1005C2E0(v2);
LABEL_68:
  v37 = *(_BYTE *)(v2 + 11024);
  *(_BYTE *)(v2 + 11024) = 0;
  if ( v37 )
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v2 + 8) + 192))(
      *(_DWORD *)(v2 + 8),
      *(_DWORD *)(v2 + 408),
      0,
      0,
      v2 + 11028,
      0,
      0);
  v38 = *(_DWORD *)(v7 + 16);
  result = *(_DWORD *)(v2 + 408);
  v56 = *(int **)(v2 + 408);
  if ( *(_DWORD *)(v2 + 152) != v38 )
  {
    v40 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 152) = v38;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v40 + 36))(v40, v38, 0, 0);
    result = (int)v56;
  }
  if ( *(_DWORD *)(v2 + 156) != result )
  {
    *(_DWORD *)(v2 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 64))(
               *(_DWORD *)(v2 + 8),
               0,
               1,
               &v56);
  }
  return result;
}
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006E288: using guessed type wchar_t a_clx2v06[9];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 102394CA: using guessed type char byte_102394CA;

//----- (1004F650) --------------------------------------------------------
int __thiscall sub_1004F650(int this)
{
  int v1; // ebp@0
  int v2; // ebx@1
  int v3; // eax@1
  unsigned __int64 v4; // rdi@1
  unsigned int v5; // edx@3
  int v6; // edi@3
  int v7; // esi@3
  const void *v8; // edx@6
  int v9; // ecx@7
  const void *v10; // ecx@8
  __int16 v11; // ax@9
  int v12; // eax@11
  unsigned int v13; // ecx@14
  int v14; // ecx@30
  void *v15; // eax@30
  int v16; // ST28_4@35
  int v17; // ST24_4@35
  int v18; // ST20_4@35
  char v19; // al@35
  int v20; // edi@36
  int v21; // eax@36
  int v22; // ebx@38
  LPVOID v23; // edi@38
  int v24; // eax@39
  __int128 v25; // xmm0@44
  int v27; // eax@47
  int v28; // eax@51
  int v29; // edx@53
  __m128d v30; // xmm0@57
  float v31; // xmm1_4@57
  __int128 v32; // xmm0@57
  float v33; // xmm1_4@57
  int v35; // eax@59
  __m128d v36; // xmm0@61
  __m128i v37; // xmm0@61
  int v38; // eax@61
  int v39; // eax@63
  int v40; // eax@65
  int v41; // eax@67
  int v42; // eax@69
  char v43; // al@71
  int v44; // edx@73
  int result; // eax@73
  int v46; // eax@74
  int v47; // [sp-10h] [bp-90h]@0
  int v48; // [sp-Ch] [bp-8Ch]@13
  LPVOID lpMem; // [sp+Ch] [bp-74h]@12
  int v50; // [sp+1Ch] [bp-64h]@30
  unsigned int v51; // [sp+20h] [bp-60h]@11
  LPVOID v52; // [sp+24h] [bp-5Ch]@6
  int v53; // [sp+34h] [bp-4Ch]@6
  unsigned int v54; // [sp+38h] [bp-48h]@6
  LPVOID v55; // [sp+3Ch] [bp-44h]@14
  int v56; // [sp+40h] [bp-40h]@14
  int v57; // [sp+44h] [bp-3Ch]@14
  int v58; // [sp+48h] [bp-38h]@4
  int v59; // [sp+4Ch] [bp-34h]@14
  int v60; // [sp+50h] [bp-30h]@3
  unsigned int v61; // [sp+54h] [bp-2Ch]@3
  int *v62; // [sp+58h] [bp-28h]@3
  int v63; // [sp+5Ch] [bp-24h]@3
  int *v64; // [sp+60h] [bp-20h]@39
  int v65; // [sp+64h] [bp-1Ch]@1
  int v66; // [sp+68h] [bp-18h]@32
  unsigned int v67; // [sp+6Ch] [bp-14h]@3
  int v68; // [sp+70h] [bp-10h]@13
  int v69; // [sp+7Ch] [bp-4h]@11

  v2 = this;
  v65 = this;
  v3 = *(_DWORD *)(this + 8704);
  v4 = *(_BYTE *)(v3 + 99) & 1 | ((unsigned __int64)(*(_DWORD *)(v3 + 72) & 7 | 0x20000000u) << 6);
  if ( (v4 & 0x1C0) < 0x100 )
    HIDWORD(v4) |= ((*(_DWORD *)(v3 + 72) >> 3) & 1) << 20;
  v5 = (*(_WORD *)(*(_DWORD *)(this + 8704) + 246) & 1u) / 0x80000000;
  LODWORD(v4) = 2 * (*(_WORD *)(*(_DWORD *)(this + 8704) + 246) & 1) | v4;
  v67 = v5 | HIDWORD(v4);
  v62 = (int *)v4;
  v60 = v4;
  v61 = v5 | HIDWORD(v4);
  sub_10002CB0((void *)(this + 412), (int)&v63, (int)&v60);
  v7 = v63;
  if ( v63 == *(_DWORD *)(v2 + 416) )
  {
    v63 = (int)&v60;
    sub_10002E30(v2 + 412, (int)&v58, (int)&v63, (int)&v63, (int)&v60);
    v7 = v58;
  }
  if ( !*(_DWORD *)(v7 + 16) )
  {
    v54 = 7;
    v53 = 0;
    v8 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v52) = 0;
    if ( *(_WORD *)v8 )
    {
      v10 = v8;
      v63 = (int)((char *)v8 + 2);
      do
      {
        v11 = *(_WORD *)v10;
        v10 = (char *)v10 + 2;
      }
      while ( v11 );
      v9 = (signed int)((char *)v10 - v63) >> 1;
    }
    else
    {
      v9 = 0;
    }
    sub_10001460((int)&v52, v8, v9);
    v69 = 0;
    v12 = sub_10008360(__PAIR__(v67, v6));
    LOBYTE(v69) = 1;
    sub_100017B0((int)&v52, v12, 0, 0xFFFFFFFF);
    LOBYTE(v69) = 0;
    if ( v51 >= 8 )
      sub_10001E40(v2, v6, lpMem, v51 + 1);
    sub_10001680((int)&v52, L"_CLX2V06", 8u);
    sub_10001680((int)&v52, L".psh", 4u);
    if ( sub_10028FF8(v2, v6, (int)&v68) )
    {
      v55 = 0;
      v56 = 0;
      v57 = 0;
      LOBYTE(v69) = 2;
      v58 = (int)"RenderToTexture";
      v59 = (int)"1";
      sub_100027D0((int)&v55, (unsigned int)&v58);
      v13 = (__PAIR__(v67, v6) >> 6) & 7;
      if ( v13 <= 6 )
      {
        switch ( v13 )
        {
          case 0u:
            v58 = (int)"RendToKRGB0555";
            goto LABEL_23;
          case 1u:
            v58 = (int)"RendToRGB565";
            goto LABEL_23;
          case 2u:
            v58 = (int)"RendToARGB4444";
            goto LABEL_23;
          case 3u:
            v58 = (int)"RendToARGB1555";
            goto LABEL_23;
          case 4u:
            v58 = (int)"RendToRGB888";
            goto LABEL_23;
          case 5u:
            v58 = (int)"RendToKRGB0888";
            goto LABEL_23;
          case 6u:
            v58 = (int)"RendToARGB8888";
LABEL_23:
            v59 = (int)"1";
            sub_100027D0((int)&v55, (unsigned int)&v58);
            break;
          default:
            break;
        }
      }
      if ( v6 & 1 )
      {
        v58 = (int)"BIT64";
        v59 = (int)"1";
        sub_100027D0((int)&v55, (unsigned int)&v58);
      }
      if ( v67 >= 0x100000 )
      {
        v58 = (int)"DITHER";
        v59 = (int)"1";
        sub_100027D0((int)&v55, (unsigned int)&v58);
      }
      if ( v6 & 2 )
      {
        v58 = (int)"HSCALE";
        v59 = (int)"1";
        sub_100027D0((int)&v55, (unsigned int)&v58);
      }
      v58 = 0;
      v59 = 0;
      sub_100027D0((int)&v55, (unsigned int)&v58);
      v51 = 15;
      v50 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "ps_main", 7u);
      LOBYTE(v69) = 3;
      v15 = &lpMem;
      if ( v51 >= 0x10 )
        v15 = lpMem;
      sub_10040760(
        (void *)v2,
        (int)&v66,
        L"PVR2_PSH",
        (int)&v66,
        (int)v55,
        (int)&v66,
        (int)v15,
        (int)"ps_5_0",
        v47,
        v48,
        (int)&v66,
        v14);
      LOBYTE(v69) = 2;
      if ( v51 >= 0x10 )
        sub_10001EA0(v2, v6, lpMem, v51 + 1);
      if ( !sub_10028FF8(v2, v6, (int)&v68) )
      {
        v16 = v68;
        v17 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v66 + 16))(v66, 1);
        v18 = v66;
        v19 = (*(int (**)(void))(*(_DWORD *)v66 + 12))();
        sub_1002936D(v2, v6, v19, v18, v17, v16);
        sub_100290B5(v2, v1, v6);
      }
      v20 = (*(int (__stdcall **)(int))(*(_DWORD *)v66 + 16))(v66);
      v21 = (*(int (__stdcall **)(int))(*(_DWORD *)v66 + 12))(v66);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v2 + 4) + 60))(
        *(_DWORD *)(v2 + 4),
        v21,
        v20,
        0,
        &v63);
      LOBYTE(v69) = 0;
      v2 = v65;
      if ( v55 )
        sub_100029D0(v65, v20, v55, (v57 - (signed int)v55) >> 3);
    }
    else
    {
      sub_1002C003(v2, v6);
      v22 = sub_1002BD3E(v2, v6, v68);
      sub_1002C01E(v22, v1, v6);
      v23 = sub_1002C36D(v22);
      sub_1002C2BD(v22, (int)v23);
      sub_100290B5(v22, v1, (int)v23);
      (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v65 + 4) + 60))(
        *(_DWORD *)(v65 + 4),
        v23,
        v22,
        0,
        &v63);
      sub_1002C0EC(v23);
      v2 = v65;
    }
    v6 = (int)v62;
    v65 = v67;
    v64 = v62;
    sub_10002CB0((void *)(v2 + 412), (int)&v62, (int)&v64);
    v24 = (int)v62;
    if ( v62 == *(int **)(v2 + 416) )
    {
      v62 = (int *)&v64;
      sub_10002E30(v2 + 412, (int)&v58, v2 + 412, (int)&v62, v2 + 412);
      v24 = v58;
    }
    *(_DWORD *)(v24 + 16) = v63;
    v69 = -1;
    if ( v54 >= 8 )
      sub_10001E40(v2, v6, v52, v54 + 1);
  }
  if ( ((__PAIR__(v67, v6) >> 6) & 7) == 3 )
  {
    v25 = *(_DWORD *)(v2 + 11124);
    __asm { lahf }
    if ( __SETP__(_AH & 0x44, 0) )
    {
      *(float *)(v2 + 11124) = (float)*(_BYTE *)(*(_DWORD *)(v2 + 8704) + 74) * 0.0039215689;
LABEL_49:
      *(_BYTE *)(v2 + 11024) = 1;
      goto LABEL_50;
    }
  }
  else if ( !((__PAIR__(v67, v6) >> 6) & 7) )
  {
    v27 = *(_DWORD *)(*(_DWORD *)(v2 + 8704) + 72) & 0x8000;
    if ( *(_DWORD *)(v2 + 11028) != v27 )
    {
      *(_DWORD *)(v2 + 11028) = v27;
      goto LABEL_49;
    }
  }
LABEL_50:
  if ( (v6 & 0x1C0) == 320 )
  {
    v28 = *(_BYTE *)(*(_DWORD *)(v2 + 8704) + 73) << 24;
    if ( *(_DWORD *)(v2 + 11028) != v28 )
    {
      *(_DWORD *)(v2 + 11028) = v28;
      *(_BYTE *)(v2 + 11024) = 1;
    }
  }
  v29 = *(_DWORD *)(*(_DWORD *)(v2 + 8704) + 96) & 0xFFFFFF;
  if ( !(v6 & 1) )
    v29 = (((*(_DWORD *)(*(_DWORD *)(v2 + 8704) + 96) & 0xFFFFFFu) >> 20) & 4)
        + (*(_DWORD *)(*(_DWORD *)(v2 + 8704) + 96) & 0xFFFFFF & (*(_DWORD *)(v2 + 8716) - 8388605))
        + 2 * (*(_DWORD *)(*(_DWORD *)(v2 + 8704) + 96) & 0x3FFFFC);
  if ( *(_DWORD *)(v2 + 11100) != v29 )
  {
    *(_DWORD *)(v2 + 11100) = v29;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v30 = (__m128d)COERCE_UNSIGNED_INT64((double)*(_WORD *)(*(_DWORD *)(v2 + 8704) + 244));
  v30.m128d_f64[0] = v30.m128d_f64[0]
                   + *(double *)&qword_1006EEC0[(unsigned int)*(_WORD *)(*(_DWORD *)(v2 + 8704) + 244) >> 31];
  LODWORD(v31) = (unsigned __int128)_mm_cvtpd_ps(v30);
  v32 = *(_DWORD *)(v2 + 11128);
  v33 = v31 * 0.0009765625;
  __asm { lahf }
  if ( __SETP__(_AH & 0x44, 0) )
  {
    *(float *)(v2 + 11128) = v33;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v35 = 8 * (*(_DWORD *)(*(_DWORD *)(v2 + 8704) + 76) & 0x1FF);
  if ( *(_DWORD *)(v2 + 11108) != v35 )
  {
    *(_DWORD *)(v2 + 11108) = v35;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v36 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(v2 + 31460));
  v36.m128d_f64[0] = v36.m128d_f64[0] + *(double *)&qword_1006EEC0[*(_DWORD *)(v2 + 31460) >> 31];
  v37 = (__m128i)_mm_cvtpd_ps(v36);
  *(float *)&v37.m128i_i32[0] = *(float *)&v37.m128i_i32[0] / *(float *)(v2 + 11128);
  v38 = sub_100614B0(v37);
  if ( *(_DWORD *)(v2 + 11112) != v38 )
  {
    *(_DWORD *)(v2 + 11112) = v38;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v39 = *(_DWORD *)(*(_DWORD *)(v2 + 8704) + 104);
  if ( *(_DWORD *)(v2 + 11116) != v39 )
  {
    *(_DWORD *)(v2 + 11116) = v39;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v40 = *(_DWORD *)(*(_DWORD *)(v2 + 8704) + 108);
  if ( *(_DWORD *)(v2 + 11120) != v40 )
  {
    *(_DWORD *)(v2 + 11120) = v40;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v41 = *(_DWORD *)(v2 + 31456);
  if ( *(_DWORD *)(v2 + 11092) != v41 )
  {
    *(_DWORD *)(v2 + 11092) = v41;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v42 = *(_DWORD *)(v2 + 31460);
  if ( *(_DWORD *)(v2 + 11096) != v42 )
  {
    *(_DWORD *)(v2 + 11096) = v42;
    *(_BYTE *)(v2 + 11024) = 1;
  }
  v43 = *(_BYTE *)(v2 + 11024);
  *(_BYTE *)(v2 + 11024) = 0;
  if ( v43 )
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v2 + 8) + 192))(
      *(_DWORD *)(v2 + 8),
      *(_DWORD *)(v2 + 408),
      0,
      0,
      v2 + 11028,
      0,
      0);
  v44 = *(_DWORD *)(v7 + 16);
  result = *(_DWORD *)(v2 + 408);
  v65 = *(_DWORD *)(v2 + 408);
  if ( *(_DWORD *)(v2 + 152) != v44 )
  {
    v46 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 152) = v44;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v46 + 36))(v46, v44, 0, 0);
    result = v65;
  }
  if ( *(_DWORD *)(v2 + 156) != result )
  {
    *(_DWORD *)(v2 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 64))(
               *(_DWORD *)(v2 + 8),
               0,
               1,
               &v65);
  }
  return result;
}
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006E288: using guessed type wchar_t a_clx2v06[9];
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1004FDC0) --------------------------------------------------------
int __thiscall sub_1004FDC0(int this, int a2, int a3)
{
  int v3; // ebp@0
  int v4; // ebx@1
  unsigned __int64 v5; // rt0@1
  int v6; // edi@1
  int v7; // esi@1
  const void *v8; // edx@4
  int v9; // ecx@5
  const void *v10; // ecx@6
  __int16 v11; // ax@7
  int v12; // eax@9
  int v13; // ecx@18
  void *v14; // eax@18
  int v15; // ST28_4@23
  int v16; // ST24_4@23
  int v17; // ST20_4@23
  char v18; // al@23
  int v19; // edi@24
  int v20; // eax@24
  int v21; // ebx@26
  int v22; // ecx@27
  int v23; // eax@27
  int v24; // edx@31
  int result; // eax@31
  int v26; // eax@32
  int v27; // [sp-10h] [bp-90h]@0
  int v28; // [sp-Ch] [bp-8Ch]@12
  LPVOID lpMem; // [sp+Ch] [bp-74h]@10
  int v30; // [sp+1Ch] [bp-64h]@18
  unsigned int v31; // [sp+20h] [bp-60h]@9
  LPVOID v32; // [sp+24h] [bp-5Ch]@4
  int v33; // [sp+34h] [bp-4Ch]@4
  unsigned int v34; // [sp+38h] [bp-48h]@4
  LPVOID v35; // [sp+3Ch] [bp-44h]@12
  int v36; // [sp+40h] [bp-40h]@12
  int v37; // [sp+44h] [bp-3Ch]@12
  int v38; // [sp+48h] [bp-38h]@2
  int *v39; // [sp+4Ch] [bp-34h]@12
  unsigned __int64 v40; // [sp+50h] [bp-30h]@1
  unsigned int v41; // [sp+58h] [bp-28h]@27
  unsigned int v42; // [sp+5Ch] [bp-24h]@1
  int v43; // [sp+64h] [bp-1Ch]@12
  int v44; // [sp+68h] [bp-18h]@24
  unsigned int v45; // [sp+6Ch] [bp-14h]@1
  int v46; // [sp+70h] [bp-10h]@1
  int v47; // [sp+7Ch] [bp-4h]@9

  v4 = this;
  v46 = this;
  HIDWORD(v5) = (unsigned __int64)(dword_1023945C & 1) >> 25;
  LODWORD(v5) = dword_1023947C & 0x7F | ((dword_1023945C & 1) << 7);
  HIDWORD(v5) = v5 >> 26;
  LODWORD(v5) = (((_BYTE)a2 != 0) + 32) | ((_DWORD)v5 << 6);
  HIDWORD(v5) = v5 >> 3;
  LODWORD(v5) = ((_BYTE)a3 != 0) | (((((_BYTE)a2 != 0) + 32) | ((dword_1023947C & 0x7F | ((dword_1023945C & 1) << 7)) << 6)) << 29);
  v45 = v5 >> 30;
  v6 = 4 * v5;
  v42 = 4 * v5;
  v40 = 4 * v5;
  sub_10002CB0((void *)(this + 412), (int)&a2, (int)&v40);
  v7 = a2;
  if ( a2 == *(_DWORD *)(v4 + 416) )
  {
    a2 = (int)&v40;
    sub_10002E30(v4 + 412, (int)&v38, v4 + 412, (int)&a2, v4 + 412);
    v7 = v38;
  }
  if ( !*(_DWORD *)(v7 + 16) )
  {
    v34 = 7;
    v33 = 0;
    v8 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v32) = 0;
    if ( *(_WORD *)v8 )
    {
      v10 = v8;
      a2 = (int)((char *)v8 + 2);
      do
      {
        v11 = *(_WORD *)v10;
        v10 = (char *)v10 + 2;
      }
      while ( v11 );
      v9 = (signed int)((char *)v10 - a2) >> 1;
    }
    else
    {
      v9 = 0;
    }
    sub_10001460((int)&v32, v8, v9);
    v47 = 0;
    v12 = sub_10008360(__PAIR__(v45, v6));
    LOBYTE(v47) = 1;
    sub_100017B0((int)&v32, v12, 0, 0xFFFFFFFF);
    LOBYTE(v47) = 0;
    if ( v31 >= 8 )
      sub_10001E40(v4, v6, lpMem, v31 + 1);
    sub_10001680((int)&v32, L"_CLX2V06", 8u);
    sub_10001680((int)&v32, L".psh", 4u);
    if ( sub_10028FF8(v4, v6, (int)&a2) )
    {
      v35 = 0;
      v36 = 0;
      v37 = 0;
      LOBYTE(v47) = 2;
      v38 = (int)"PS_SORT";
      v39 = (int *)"1";
      sub_100027D0((int)&v35, (unsigned int)&v38);
      sub_10009090(v4, v6, &v43, (int)"%d", dword_1023947C);
      v38 = (int)"BUFFER_MAX";
      v39 = &v43;
      sub_100027D0((int)&v35, (unsigned int)&v38);
      if ( v45 & 0x1000 )
      {
        v38 = (int)"NETWORKSORT";
        v39 = (int *)"1";
        sub_100027D0((int)&v35, (unsigned int)&v38);
      }
      if ( v6 & 0x80000000 )
      {
        v38 = (int)"WRITE_DEPTH";
        v39 = (int *)"1";
        sub_100027D0((int)&v35, (unsigned int)&v38);
      }
      if ( v6 & 4 )
      {
        v38 = (int)"SDSELECT";
        v39 = (int *)"1";
        sub_100027D0((int)&v35, (unsigned int)&v38);
      }
      v38 = 0;
      v39 = 0;
      sub_100027D0((int)&v35, (unsigned int)&v38);
      v31 = 15;
      v30 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "ps_main", 7u);
      LOBYTE(v47) = 3;
      v14 = &lpMem;
      if ( v31 >= 0x10 )
        v14 = lpMem;
      sub_10040760(
        (void *)v4,
        (int)&a3,
        L"SORT_PSH",
        (int)&a3,
        (int)v35,
        (int)&a3,
        (int)v14,
        (int)"ps_5_0",
        v27,
        v28,
        (int)&a3,
        v13);
      LOBYTE(v47) = 2;
      if ( v31 >= 0x10 )
        sub_10001EA0(v4, v6, lpMem, v31 + 1);
      if ( !sub_10028FF8(v4, v6, (int)&a2) )
      {
        v15 = a2;
        v16 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)a3 + 16))(a3, 1);
        v17 = a3;
        v18 = (*(int (**)(void))(*(_DWORD *)a3 + 12))();
        sub_1002936D(v4, v6, v18, v17, v16, v15);
        sub_100290B5(v4, v3, v6);
      }
      v19 = (*(int (__stdcall **)(int))(*(_DWORD *)a3 + 16))(a3);
      v20 = (*(int (__stdcall **)(int))(*(_DWORD *)a3 + 12))(a3);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v4 + 4) + 60))(
        *(_DWORD *)(v4 + 4),
        v20,
        v19,
        0,
        &v44);
      v4 = v46;
      LOBYTE(v47) = 0;
      if ( v35 )
        sub_100029D0(v46, v19, v35, (v37 - (signed int)v35) >> 3);
    }
    else
    {
      sub_1002C003(v4, v6);
      v21 = sub_1002BD3E(v4, v6, a2);
      sub_1002C01E(v21, v3, v6);
      v19 = (int)sub_1002C36D(v21);
      sub_1002C2BD(v21, v19);
      sub_100290B5(v21, v3, v19);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v46 + 4) + 60))(
        *(_DWORD *)(v46 + 4),
        v19,
        v21,
        0,
        &v44);
      sub_1002C0EC((LPVOID)v19);
      v4 = v46;
    }
    v41 = v42;
    v42 = v45;
    sub_10002CB0((void *)(v4 + 412), (int)&a3, (int)&v41);
    v23 = a3;
    if ( a3 == *(_DWORD *)(v4 + 416) )
    {
      a3 = (int)&v41;
      sub_10002E30(v4 + 412, (int)&v38, v22, (int)&a3, v22);
      v23 = v38;
    }
    *(_DWORD *)(v23 + 16) = v44;
    v47 = -1;
    if ( v34 >= 8 )
      sub_10001E40(v4, v19, v32, v34 + 1);
  }
  v24 = *(_DWORD *)(v7 + 16);
  result = *(_DWORD *)(v4 + 408);
  a3 = *(_DWORD *)(v4 + 408);
  if ( *(_DWORD *)(v4 + 152) != v24 )
  {
    v26 = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v4 + 152) = v24;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v26 + 36))(v26, v24, 0, 0);
    result = a3;
  }
  if ( *(_DWORD *)(v4 + 156) != result )
  {
    *(_DWORD *)(v4 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v4 + 8) + 64))(
               *(_DWORD *)(v4 + 8),
               0,
               1,
               &a3);
  }
  return result;
}
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006E288: using guessed type wchar_t a_clx2v06[9];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1023945C: using guessed type int dword_1023945C;
// 1023947C: using guessed type int dword_1023947C;

//----- (10050270) --------------------------------------------------------
int __thiscall sub_10050270(void *this, int a2, int a3, int a4)
{
  signed int v4; // eax@1
  int v5; // esi@1
  signed int v6; // edi@1
  signed int v7; // ecx@1
  int v8; // edx@3
  int result; // eax@14
  int v10; // [sp-20h] [bp-38h]@6
  __int64 *v11; // [sp-14h] [bp-2Ch]@6
  int v12; // [sp-10h] [bp-28h]@4
  int v13; // [sp-Ch] [bp-24h]@4
  __int64 *v14; // [sp-8h] [bp-20h]@4
  int v15; // [sp-4h] [bp-1Ch]@4
  int v16; // [sp+8h] [bp-10h]@4
  int v17; // [sp+Ch] [bp-Ch]@6
  int v18; // [sp+10h] [bp-8h]@4
  int v19; // [sp+14h] [bp-4h]@5

  v4 = 3;
  v5 = (int)this;
  v6 = 2;
  v7 = 1;
  if ( a4 == 3 )
  {
    v6 = 8;
    v4 = 12;
    v7 = 4;
  }
  v8 = a2;
  switch ( a2 )
  {
    case 0:
      v15 = 0;
      v18 = 6;
      v14 = (__int64 *)&v16;
      v13 = (int)&v16;
      v12 = v6;
      goto LABEL_11;
    case 1:
      v19 = 4;
      v18 = 3;
      goto LABEL_6;
    case 2:
      v19 = 3;
      v18 = 1;
LABEL_6:
      v15 = v7;
      v16 = 2;
      v14 = (__int64 *)&v16;
      v13 = (int)&v16;
      v12 = v4;
      v11 = (__int64 *)v4;
      v17 = 2;
      v10 = 8;
      goto LABEL_12;
    case 3:
      v15 = v7;
      goto LABEL_10;
    case 4:
      v15 = 0;
LABEL_10:
      v18 = 3;
      v14 = (__int64 *)&v16;
      v13 = (int)&v16;
      v12 = v4;
LABEL_11:
      v11 = 0;
      v19 = 8;
      v16 = 1;
      v17 = 1;
      v10 = 7;
LABEL_12:
      sub_10041BF0((void *)v5, 1, v10, 0, 1, v11, v12, v13, v14, v15);
      break;
    default:
      break;
  }
  if ( (*(_DWORD *)a3 & 0x30000u) >= 0x20000 )
  {
    result = sub_100503C0(v5, a3);
  }
  else
  {
    result = 0;
    a4 = 0;
    if ( *(_DWORD *)(v5 + 152) )
    {
      *(_DWORD *)(v5 + 152) = 0;
      (*(void (__fastcall **)(_DWORD, int, _DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(v5 + 8) + 36))(
        **(_DWORD **)(v5 + 8),
        v8,
        *(_DWORD *)(v5 + 8),
        0,
        0,
        0);
      result = a4;
    }
    if ( *(_DWORD *)(v5 + 156) != result )
    {
      *(_DWORD *)(v5 + 156) = result;
      result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v5 + 8) + 64))(
                 *(_DWORD *)(v5 + 8),
                 0,
                 1,
                 &a4);
    }
  }
  return result;
}

//----- (100503C0) --------------------------------------------------------
int __thiscall sub_100503C0(int this, int a2)
{
  int v2; // ebp@0
  int v3; // esi@1
  int v4; // ebx@1
  int v5; // edx@1
  int v6; // eax@1
  unsigned __int64 v7; // rt0@1
  int v8; // ecx@1
  int v9; // edi@1
  bool v10; // zf@1
  int v11; // eax@1
  int v12; // edx@2
  int v13; // ecx@2
  int v14; // ecx@4
  int v15; // eax@4
  int v16; // ecx@5
  int v17; // ecx@8
  int v18; // ecx@10
  int v19; // esi@10
  const unsigned __int16 *v20; // edx@13
  unsigned int v21; // ecx@14
  int v22; // edi@16
  int v23; // eax@16
  int v24; // ecx@23
  void *v25; // eax@23
  int v26; // ST28_4@28
  int v27; // ST24_4@28
  int v28; // ST20_4@28
  char v29; // al@28
  int v30; // edi@29
  int v31; // eax@29
  int v32; // ebx@31
  int v33; // ecx@32
  int v34; // eax@32
  char v35; // al@36
  int v36; // edx@38
  int result; // eax@38
  int v38; // eax@39
  int v39; // [sp-10h] [bp-94h]@0
  int v40; // [sp-Ch] [bp-90h]@18
  LPVOID lpMem; // [sp+Ch] [bp-78h]@17
  int v42; // [sp+1Ch] [bp-68h]@23
  unsigned int v43; // [sp+20h] [bp-64h]@16
  LPVOID v44; // [sp+24h] [bp-60h]@13
  int v45; // [sp+34h] [bp-50h]@13
  unsigned int v46; // [sp+38h] [bp-4Ch]@13
  LPVOID v47; // [sp+3Ch] [bp-48h]@19
  int v48; // [sp+40h] [bp-44h]@19
  int v49; // [sp+44h] [bp-40h]@19
  int v50; // [sp+48h] [bp-3Ch]@11
  int v51; // [sp+4Ch] [bp-38h]@1
  int v52; // [sp+50h] [bp-34h]@10
  unsigned int v53; // [sp+54h] [bp-30h]@10
  unsigned int *v54; // [sp+58h] [bp-2Ch]@1
  int v55; // [sp+5Ch] [bp-28h]@29
  unsigned int v56; // [sp+60h] [bp-24h]@32
  unsigned int v57; // [sp+64h] [bp-20h]@1
  int v58; // [sp+68h] [bp-1Ch]@1
  int v59; // [sp+6Ch] [bp-18h]@25
  unsigned int v60; // [sp+70h] [bp-14h]@1
  int v61; // [sp+80h] [bp-4h]@16

  v3 = a2;
  v4 = this;
  v58 = this;
  v5 = *(_DWORD *)a2 & 0x30000;
  v60 = (unsigned __int64)(v5 == 196608) >> 31;
  v51 = (unsigned __int64)(v5 == 196608) >> 31;
  v6 = *(_DWORD *)(this + 8704);
  v54 = (unsigned int *)(((v5 == 0x20000) + 4) | 2 * (v5 == 196608));
  HIDWORD(v7) = (unsigned __int64)(v5 == 196608) >> 31;
  LODWORD(v7) = ((v5 == 0x20000) + 4) | 2 * (v5 == 196608);
  v60 = v7 >> 7;
  v8 = *(_WORD *)(a2 + 24);
  v9 = (_DWORD)v54 << 25;
  v10 = (*(_DWORD *)(v6 + 96) & 0x1000000) == 0;
  v11 = *(_WORD *)(a2 + 26);
  v57 = (_DWORD)v54 << 25;
  if ( v10 )
  {
    v12 = dword_10239478;
    v13 = dword_10239478 * v11 | (dword_10239478 * v8 << 16);
    if ( *(_DWORD *)(v4 + 11116) != v13 )
    {
      *(_DWORD *)(v4 + 11116) = v13;
      *(_BYTE *)(v4 + 11024) = 1;
      v12 = dword_10239478;
    }
    v14 = v12 * *(_WORD *)(v3 + 28);
    v15 = v12 * *(_WORD *)(v3 + 30);
  }
  else
  {
    v16 = v11 | (v8 << 16);
    if ( *(_DWORD *)(v4 + 11116) != v16 )
    {
      *(_DWORD *)(v4 + 11116) = v16;
      *(_BYTE *)(v4 + 11024) = 1;
    }
    v14 = *(_WORD *)(v3 + 28);
    v15 = *(_WORD *)(v3 + 30);
  }
  v17 = v15 | (v14 << 16);
  if ( *(_DWORD *)(v4 + 11120) != v17 )
  {
    *(_DWORD *)(v4 + 11120) = v17;
    *(_BYTE *)(v4 + 11024) = 1;
  }
  v53 = v60;
  v52 = v9;
  sub_10002CB0((void *)(v4 + 412), (int)&a2, (int)&v52);
  v19 = a2;
  if ( a2 == *(_DWORD *)(v4 + 416) )
  {
    a2 = (int)&v52;
    sub_10002E30(v4 + 412, (int)&v50, v18, (int)&a2, v18);
    v19 = v50;
  }
  if ( !*(_DWORD *)(v19 + 16) )
  {
    v46 = 7;
    v45 = 0;
    v20 = *(const unsigned __int16 **)(dword_1007CD9C + 1236);
    LOWORD(v44) = 0;
    if ( *v20 )
      v21 = wcslen(v20);
    else
      v21 = 0;
    sub_10001460((int)&v44, v20, v21);
    v61 = 0;
    v22 = v57;
    v23 = sub_10008360(__PAIR__(v60, v57));
    LOBYTE(v61) = 1;
    sub_100017B0((int)&v44, v23, 0, 0xFFFFFFFF);
    LOBYTE(v61) = 0;
    if ( v43 >= 8 )
      sub_10001E40(v4, v22, lpMem, v43 + 1);
    sub_10001680((int)&v44, L"_CLX2V06", 8u);
    sub_10001680((int)&v44, L".psh", 4u);
    if ( sub_10028FF8(v4, v22, (int)&a2) )
    {
      v47 = 0;
      v48 = 0;
      v49 = 0;
      LOBYTE(v61) = 2;
      v50 = (int)"PS_Modifier";
      v51 = (int)"1";
      sub_100027D0((int)&v47, (unsigned int)&v50);
      if ( v22 & 0x4000000 )
      {
        v50 = (int)"CLIP_OUTSIDE_ENABLE";
        v51 = (int)"1";
        sub_100027D0((int)&v47, (unsigned int)&v50);
      }
      if ( (unsigned __int8)v54 & 1 )
      {
        v50 = (int)"CLIP_INSIDE_ENABLE";
        v51 = (int)"1";
        sub_100027D0((int)&v47, (unsigned int)&v50);
      }
      v50 = 0;
      v51 = 0;
      sub_100027D0((int)&v47, (unsigned int)&v50);
      v43 = 15;
      v42 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "ps_main", 7u);
      LOBYTE(v61) = 3;
      v25 = &lpMem;
      if ( v43 >= 0x10 )
        v25 = lpMem;
      sub_10040760(
        (void *)v4,
        (int)&v59,
        L"PVR2_PSH",
        (int)&v59,
        (int)v47,
        (int)&v59,
        (int)v25,
        (int)"ps_5_0",
        v39,
        v40,
        (int)&v59,
        v24);
      LOBYTE(v61) = 2;
      if ( v43 >= 0x10 )
        sub_10001EA0(v4, v22, lpMem, v43 + 1);
      if ( !sub_10028FF8(v4, v22, (int)&a2) )
      {
        v26 = a2;
        v27 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v59 + 16))(v59, 1);
        v28 = v59;
        v29 = (*(int (**)(void))(*(_DWORD *)v59 + 12))();
        sub_1002936D(v4, v22, v29, v28, v27, v26);
        sub_100290B5(v4, v2, v22);
      }
      v30 = (*(int (__stdcall **)(int))(*(_DWORD *)v59 + 16))(v59);
      v31 = (*(int (__stdcall **)(int))(*(_DWORD *)v59 + 12))(v59);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v4 + 4) + 60))(
        *(_DWORD *)(v4 + 4),
        v31,
        v30,
        0,
        &v55);
      v4 = v58;
      LOBYTE(v61) = 0;
      if ( v47 )
        sub_100029D0(v58, v30, v47, (v49 - (signed int)v47) >> 3);
    }
    else
    {
      sub_1002C003(v4, v22);
      v32 = sub_1002BD3E(v4, v22, a2);
      sub_1002C01E(v32, v2, v22);
      v30 = (int)sub_1002C36D(v32);
      sub_1002C2BD(v32, v30);
      sub_100290B5(v32, v2, v30);
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v58 + 4) + 60))(
        *(_DWORD *)(v58 + 4),
        v30,
        v32,
        0,
        &v55);
      sub_1002C0EC((LPVOID)v30);
      v4 = v58;
    }
    v56 = v57;
    v57 = v60;
    sub_10002CB0((void *)(v4 + 412), (int)&v54, (int)&v56);
    v34 = (int)v54;
    if ( v54 == *(unsigned int **)(v4 + 416) )
    {
      v54 = &v56;
      sub_10002E30(v4 + 412, (int)&v50, v33, (int)&v54, v33);
      v34 = v50;
    }
    *(_DWORD *)(v34 + 16) = v55;
    v61 = -1;
    if ( v46 >= 8 )
      sub_10001E40(v4, v30, v44, v46 + 1);
  }
  v35 = *(_BYTE *)(v4 + 11024);
  *(_BYTE *)(v4 + 11024) = 0;
  if ( v35 )
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v4 + 8) + 192))(
      *(_DWORD *)(v4 + 8),
      *(_DWORD *)(v4 + 408),
      0,
      0,
      v4 + 11028,
      0,
      0);
  v36 = *(_DWORD *)(v19 + 16);
  result = *(_DWORD *)(v4 + 408);
  v57 = *(_DWORD *)(v4 + 408);
  if ( *(_DWORD *)(v4 + 152) != v36 )
  {
    v38 = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v4 + 152) = v36;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v38 + 36))(v38, v36, 0, 0);
    result = v57;
  }
  if ( *(_DWORD *)(v4 + 156) != result )
  {
    *(_DWORD *)(v4 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v4 + 8) + 64))(
               *(_DWORD *)(v4 + 8),
               0,
               1,
               &v57);
  }
  return result;
}
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006E288: using guessed type wchar_t a_clx2v06[9];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 10239478: using guessed type int dword_10239478;

//----- (100508D0) --------------------------------------------------------
int __thiscall sub_100508D0(void *this, int a2)
{
  int v2; // ebp@0
  int v3; // ebx@1
  int v4; // esi@1
  int v5; // edi@3
  const void *v6; // edx@6
  int v7; // ecx@7
  const void *v8; // ecx@8
  __int16 v9; // ax@9
  int v10; // eax@11
  int v11; // ecx@19
  void *v12; // eax@19
  int v13; // ST28_4@24
  int v14; // ST24_4@24
  int v15; // ST20_4@24
  char v16; // al@24
  int v17; // eax@25
  int v18; // ebx@25
  int v19; // ebx@27
  LPVOID v20; // ebx@27
  int v21; // ebx@28
  int v22; // ecx@28
  int v23; // eax@28
  char v24; // al@33
  int v25; // edx@35
  int result; // eax@35
  int v27; // eax@36
  int v28; // eax@40
  int v29; // [sp-10h] [bp-8Ch]@0
  int v30; // [sp-Ch] [bp-88h]@13
  LPVOID lpMem; // [sp+10h] [bp-6Ch]@11
  int v32; // [sp+20h] [bp-5Ch]@19
  unsigned int v33; // [sp+24h] [bp-58h]@11
  LPVOID v34; // [sp+28h] [bp-54h]@6
  int v35; // [sp+38h] [bp-44h]@6
  unsigned int v36; // [sp+3Ch] [bp-40h]@6
  LPVOID v37; // [sp+40h] [bp-3Ch]@14
  int v38; // [sp+44h] [bp-38h]@14
  int v39; // [sp+48h] [bp-34h]@14
  int v40; // [sp+4Ch] [bp-30h]@4
  int v41; // [sp+50h] [bp-2Ch]@28
  int v42; // [sp+54h] [bp-28h]@3
  int v43; // [sp+58h] [bp-24h]@15
  int v44; // [sp+5Ch] [bp-20h]@19
  int v45; // [sp+60h] [bp-1Ch]@3
  int v46; // [sp+64h] [bp-18h]@1
  int v47; // [sp+68h] [bp-14h]@21
  int v48; // [sp+78h] [bp-4h]@11

  v3 = (int)this;
  v4 = 1024;
  v46 = (int)this;
  if ( (_BYTE)a2 )
    v4 = ((dword_1023946C & 3) << 11) | 0x400;
  v45 = v4;
  v42 = (int)((char *)this + 376);
  sub_10002D30((int)((char *)this + 376), (int)&a2, (int)&v45);
  v5 = a2;
  if ( a2 == *(_DWORD *)(v3 + 380) )
  {
    a2 = (int)&v45;
    sub_10002E90(v3 + 376, (int)&v40, v3 + 376, (int)&a2, v3 + 376);
    v5 = v40;
  }
  if ( !*(_DWORD *)(v5 + 12) )
  {
    v36 = 7;
    v35 = 0;
    v6 = *(const void **)(dword_1007CD9C + 1236);
    LOWORD(v34) = 0;
    if ( *(_WORD *)v6 )
    {
      v8 = v6;
      a2 = (int)((char *)v6 + 2);
      do
      {
        v9 = *(_WORD *)v8;
        v8 = (char *)v8 + 2;
      }
      while ( v9 );
      v7 = (signed int)((char *)v8 - a2) >> 1;
    }
    else
    {
      v7 = 0;
    }
    sub_10001460((int)&v34, v6, v7);
    v48 = 0;
    v10 = sub_100026C0((int)&lpMem, v4);
    LOBYTE(v48) = 1;
    sub_100017B0((int)&v34, v10, 0, 0xFFFFFFFF);
    LOBYTE(v48) = 0;
    if ( v33 >= 8 )
      sub_10001E40(v3, v5, lpMem, v33 + 1);
    sub_10001680((int)&v34, L"_CLX2V06", 8u);
    sub_10001680((int)&v34, L".vsh", 4u);
    if ( sub_10028FF8(v3, v5, (int)&a2) )
    {
      v37 = 0;
      v38 = 0;
      v39 = 0;
      LOBYTE(v48) = 2;
      switch ( (unsigned int)v4 >> 11 )
      {
        case 0u:
          v43 = (int)"ROTATE_0";
          break;
        case 1u:
          v43 = (int)"ROTATE_90";
          break;
        case 2u:
          v43 = (int)"ROTATE_180";
          break;
        case 3u:
          v43 = (int)"ROTATE_270";
          break;
      }
      v44 = (int)"1";
      sub_100027D0((int)&v37, (unsigned int)&v43);
      v43 = 0;
      v44 = 0;
      sub_100027D0((int)&v37, (unsigned int)&v43);
      v33 = 15;
      v32 = 0;
      LOBYTE(lpMem) = 0;
      sub_10001990((int)&lpMem, "vs_FillScreen", 0xDu);
      LOBYTE(v48) = 3;
      v12 = &lpMem;
      if ( v33 >= 0x10 )
        v12 = lpMem;
      sub_10040760(
        (void *)v3,
        (int)&v47,
        L"PVR2_VSH",
        (int)&v47,
        (int)v37,
        (int)&v47,
        (int)v12,
        (int)"vs_5_0",
        v29,
        v30,
        (int)&v47,
        v11);
      LOBYTE(v48) = 2;
      if ( v33 >= 0x10 )
        sub_10001EA0(v3, v5, lpMem, v33 + 1);
      if ( !sub_10028FF8(v3, v5, (int)&a2) )
      {
        v13 = a2;
        v14 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v47 + 16))(v47, 1);
        v15 = v47;
        v16 = (*(int (**)(void))(*(_DWORD *)v47 + 12))();
        sub_1002936D(v3, v5, v16, v15, v14, v13);
        sub_100290B5(v3, v2, v5);
      }
      v44 = (*(int (__stdcall **)(int))(*(_DWORD *)v47 + 16))(v47);
      v17 = (*(int (__stdcall **)(int))(*(_DWORD *)v47 + 12))(v47);
      v18 = v44;
      (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v46 + 4) + 48))(
        *(_DWORD *)(v46 + 4),
        v17,
        v44,
        0,
        &v40);
      LOBYTE(v48) = 0;
      if ( v37 )
        sub_100029D0(v18, v5, v37, (v39 - (signed int)v37) >> 3);
    }
    else
    {
      sub_1002C003(v3, v5);
      v19 = sub_1002BD3E(v3, v5, a2);
      v47 = v19;
      sub_1002C01E(v19, v2, v5);
      v20 = sub_1002C36D(v19);
      sub_1002C2BD((int)v20, v5);
      sub_100290B5((int)v20, v2, v5);
      (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v46 + 4) + 48))(
        *(_DWORD *)(v46 + 4),
        v20,
        v47,
        0,
        &v40);
      sub_1002C0EC(v20);
    }
    v21 = v42;
    v41 = 0;
    v47 = v4;
    sub_10002D30(v42, (int)&v44, (int)&v47);
    v23 = v44;
    if ( v44 == *(_DWORD *)(v21 + 4) )
    {
      v42 = (int)&v47;
      sub_10002E90(v21, (int)&v43, v22, (int)&v42, v22);
      v23 = v43;
    }
    *(_DWORD *)(v23 + 12) = v40;
    *(_DWORD *)(v23 + 16) = v41;
    v48 = -1;
    if ( v36 >= 8 )
      sub_10001E40(v21, v5, v34, v36 + 1);
    v3 = v46;
  }
  v24 = *(_BYTE *)(v3 + 9696);
  *(_BYTE *)(v3 + 9696) = 0;
  if ( v24 )
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 192))(
      *(_DWORD *)(v3 + 8),
      *(_DWORD *)(v3 + 372),
      0,
      0,
      v3 + 9712,
      0,
      0);
  v25 = *(_DWORD *)(v5 + 12);
  result = *(_DWORD *)(v3 + 372);
  v46 = *(_DWORD *)(v3 + 372);
  if ( *(_DWORD *)(v3 + 140) != v25 )
  {
    v27 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 140) = v25;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v27 + 44))(v27, v25, 0, 0);
    result = v46;
  }
  if ( *(_DWORD *)(v3 + 144) != result )
  {
    *(_DWORD *)(v3 + 144) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v3 + 8) + 28))(
               *(_DWORD *)(v3 + 8),
               0,
               1,
               &v46);
  }
  if ( *(_DWORD *)(v3 + 148) )
  {
    v28 = *(_DWORD *)(v3 + 8);
    *(_DWORD *)(v3 + 148) = 0;
    result = (*(int (__stdcall **)(int, _DWORD))(*(_DWORD *)v28 + 68))(v28, 0);
  }
  return result;
}
// 1006CC1C: using guessed type wchar_t a_vsh[5];
// 1006E288: using guessed type wchar_t a_clx2v06[9];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1023946C: using guessed type int dword_1023946C;

//----- (10050D40) --------------------------------------------------------
int __userpurge sub_10050D40@<eax>(int a1@<eax>, int a2@<ecx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>, __m128d a6@<xmm3>, __m128d a7@<xmm4>, int a8, signed int a9)
{
  int v9; // edi@1
  int v10; // eax@1
  int v11; // ecx@1
  int v12; // ecx@2
  unsigned int v13; // ecx@9
  int v14; // eax@9
  signed int v15; // edi@13
  unsigned int v16; // esi@15
  int v17; // edi@15
  int v18; // esi@18
  unsigned int v19; // edx@18
  int v20; // esi@18
  unsigned int v21; // edx@18
  int v22; // esi@18
  unsigned int v23; // edx@18
  int v24; // esi@18
  unsigned int v25; // edx@18
  int v26; // esi@18
  unsigned int v27; // edx@18
  int v28; // esi@18
  unsigned int v29; // edx@18
  int v30; // esi@18
  int v31; // ecx@18
  int v32; // esi@18
  unsigned int v33; // eax@21
  int v34; // edx@21
  int v35; // esi@23
  unsigned int v36; // ecx@23
  unsigned __int64 v37; // rt0@24
  int v38; // edx@24
  int v39; // edx@24
  int v40; // edx@24
  int v41; // ecx@24
  unsigned int v42; // edx@26
  unsigned int v43; // esi@27
  unsigned int v44; // edx@27
  int v45; // ecx@27
  signed int v46; // eax@28
  int v47; // ecx@30
  int v48; // eax@30
  int v49; // esi@31
  unsigned __int64 v50; // rt0@32
  int v51; // esi@32
  unsigned int v52; // ecx@32
  int v53; // ecx@35
  unsigned int v54; // esi@35
  int v55; // ecx@35
  int v56; // esi@35
  int v57; // esi@36
  const void *v58; // edx@39
  int v59; // ecx@40
  const void *v60; // ecx@41
  __int16 v61; // ax@42
  int v62; // eax@44
  unsigned int v63; // ecx@52
  unsigned int v64; // ecx@59
  int v65; // ecx@79
  int v66; // ecx@117
  int v67; // ecx@126
  int v68; // eax@126
  int v69; // ST28_4@131
  int v70; // ST24_4@131
  int v71; // ST20_4@131
  char v72; // al@131
  int v73; // eax@132
  int v74; // edi@132
  int v75; // edi@134
  LPVOID v76; // edi@134
  int v77; // edi@135
  int v78; // ecx@135
  int v79; // eax@135
  unsigned int v80; // ecx@140
  int v81; // edx@140
  int v82; // eax@141
  int v83; // eax@144
  int v84; // eax@151
  int v85; // eax@151
  int v86; // eax@153
  __int128 v87; // xmm0@163
  unsigned int v89; // eax@166
  int v90; // eax@169
  int v91; // eax@171
  int v92; // eax@174
  int v93; // eax@177
  int v94; // eax@180
  char v95; // al@182
  int v96; // ecx@182
  int v97; // edx@184
  int v98; // eax@188
  unsigned int v99; // eax@190
  __m128d v101; // xmm0@191
  float v102; // xmm1_4@191
  __int128 v103; // xmm0@191
  float v104; // xmm1_4@191
  int v105; // eax@194
  int v106; // edi@200
  int v107; // edi@202
  __m128d v108; // xmm1@202
  __m128 v110; // xmm1@202
  float v111; // xmm1_4@202
  __int128 v112; // xmm0@202
  signed int v113; // ecx@204
  __m128 v114; // xmm1@204
  __int128 v115; // xmm0@205
  int v116; // et1@205
  int v118; // eax@208
  char v119; // al@209
  int v120; // ecx@209
  int v121; // edx@211
  __int128 v122; // xmm0@216
  int v124; // eax@218
  int v125; // eax@220
  char v126; // al@222
  int v127; // edx@224
  int result; // eax@224
  int v129; // eax@225
  int v130; // [sp-B0h] [bp-BCh]@0
  int v131; // [sp-ACh] [bp-B8h]@46
  int v132; // [sp-A0h] [bp-ACh]@1
  int v133; // [sp-9Ch] [bp-A8h]@1
  void *v134; // [sp-90h] [bp-9Ch]@45
  int v135; // [sp-80h] [bp-8Ch]@126
  signed int v136; // [sp-7Ch] [bp-88h]@44
  __int16 v137; // [sp-78h] [bp-84h]@39
  int v138; // [sp-68h] [bp-74h]@39
  signed int v139; // [sp-64h] [bp-70h]@39
  __m128 v140; // [sp-60h] [bp-6Ch]@197
  int v141; // [sp-5Ch] [bp-68h]@47
  int v142; // [sp-58h] [bp-64h]@47
  int v143; // [sp-54h] [bp-60h]@47
  char v144[6]; // [sp-50h] [bp-5Ch]@37
  unsigned int v145; // [sp-4Ch] [bp-58h]@90
  unsigned int v146; // [sp-48h] [bp-54h]@1
  int v147; // [sp-44h] [bp-50h]@12
  void *v148; // [sp-40h] [bp-4Ch]@36
  int v149; // [sp-3Ch] [bp-48h]@15
  int v150; // [sp-38h] [bp-44h]@48
  int v151; // [sp-34h] [bp-40h]@1
  unsigned int v152; // [sp-30h] [bp-3Ch]@135
  int v153; // [sp-2Ch] [bp-38h]@18
  int v154; // [sp-28h] [bp-34h]@1
  signed int v155; // [sp-24h] [bp-30h]@15
  int v156; // [sp-20h] [bp-2Ch]@1
  unsigned int v157; // [sp-1Ch] [bp-28h]@13
  unsigned int v158; // [sp-18h] [bp-24h]@13
  char v159; // [sp-11h] [bp-1Dh]@151
  int *v160; // [sp-10h] [bp-1Ch]@1
  int v161; // [sp-Ch] [bp-18h]@1
  int (__cdecl *v162)(int, int, int, int); // [sp-8h] [bp-14h]@1
  signed int v163; // [sp-4h] [bp-10h]@1
  int v164; // [sp+0h] [bp-Ch]@1
  int v165; // [sp+4h] [bp-8h]@1
  int v166; // [sp+8h] [bp-4h]@1
  int retaddr; // [sp+Ch] [bp+0h]@1

  v164 = a3;
  v165 = retaddr;
  v163 = -1;
  v162 = sub_10063DE8;
  v161 = a1;
  v160 = &v166;
  v133 = a5;
  v132 = a4;
  v9 = a2;
  _mm_storel_pd((double *)&v146, 0i64);
  v10 = *(_DWORD *)a8;
  v11 = *(_DWORD *)a8 & 0x7000000;
  v156 = v9;
  v154 = v10;
  v151 = v11;
  if ( v11 == 0x2000000 )
    v12 = *(_DWORD *)(v9 + 31576);
  else
    v12 = *(_DWORD *)(v9 + 31572);
  if ( v12 && a9 < 2 && (char)v10 < 0 )
  {
    if ( v10 & 0x40 )
    {
      if ( *(_DWORD *)(a8 + 32) & 0x40000000 )
      {
        v13 = (unsigned __int64)((unsigned int)(a9 != 0) + 3) >> 4;
        v14 = ((a9 != 0) + 3) << 28;
      }
      else
      {
        v14 = 0x20000000;
        v13 = 0;
      }
    }
    else
    {
      v14 = 0x10000000;
      v13 = 0;
    }
  }
  else
  {
    v13 = v147;
    v14 = v146;
  }
  v15 = 0;
  v158 = v14;
  v157 = v13;
  if ( a9 <= 1 )
    v15 = a9;
  v16 = *(_DWORD *)(a8 + 32);
  v155 = v15;
  v17 = v156;
  v149 = v16;
  if ( v16 < 0x80000000 && !byte_102394CB )
  {
    v158 = v14;
    v157 = v13 | 2;
  }
  v18 = ((unsigned int)v154 >> 1) & 1;
  v19 = (unsigned __int64)(unsigned int)v18 >> 26;
  v153 = *(_DWORD *)(a8 + 8 * v155 + 8);
  v20 = ((v154 & 0x30000) == 196608) | (v18 << 6);
  v21 = __PAIR__(v19, v20) >> 31;
  v22 = ((v154 & 0x30000) == 0x20000) | 2 * v20;
  v23 = __PAIR__(v21, v22) >> 31;
  v24 = (v151 == 0x4000000) | 2 * v22;
  v25 = __PAIR__(v23, v24) >> 30;
  v26 = ((unsigned int)v153 >> 22) & 3 | 4 * v24;
  v27 = __PAIR__(v25, v26) >> 31;
  v28 = ((unsigned int)v153 >> 21) & 1 | 2 * v26;
  v29 = __PAIR__(v27, v28) >> 13;
  v30 = ((unsigned int)v153 >> 20) & 1 | (v28 << 19);
  v31 = ((unsigned int)v154 >> 3) & 1 | 4 * v30 | v158;
  v32 = (__PAIR__(v29, v30) >> 30) | v157;
  if ( *(_BYTE *)(v156 + 31504)
    && v151 == 0x2000000
    && *(_BYTE *)(v156 + 4 * (((unsigned int)v149 >> 24) & 0x1F) + 31508) & 2 )
  {
    v33 = 2147483648;
    v34 = 0;
  }
  else
  {
    _mm_storel_pd((double *)&v146, 0i64);
    v34 = v147;
    v33 = v146;
  }
  v35 = v34 | v32;
  v36 = v33 | v31 & 0x7FFFFFFF;
  v157 = v35;
  v158 = v36;
  if ( v36 & 1 )
  {
    v157 = 0;
    v154 = (unsigned int)v154 >> 2;
    v154 &= 1u;
    v149 = *(_DWORD *)(a8 + 8 * v155 + 12);
    HIDWORD(v37) = (unsigned __int64)((unsigned int)v149 >> 31) >> 18;
    LODWORD(v37) = ((unsigned int)v149 >> 27) & 7 | ((unsigned int)v149 >> 31 << 14);
    HIDWORD(v37) = v37 >> 30;
    LODWORD(v37) = ((unsigned __int8)v153 >> 6) | 4 * v37;
    v38 = ((unsigned int)v153 >> 19) & 1 | 2
                                         * (((unsigned __int8)v153 >> 6) | 4
                                                                         * (((unsigned int)v149 >> 27) & 7 | ((unsigned int)v149 >> 31 << 14)));
    HIDWORD(v37) = v37 >> 31;
    LODWORD(v37) = v38;
    v39 = v154 | 4 * v38;
    HIDWORD(v37) = v37 >> 30;
    LODWORD(v37) = v39;
    v40 = v36 | 2 * v39;
    v157 = v35 | (v37 >> 31);
    v41 = (__PAIR__(v35 | (unsigned int)(v37 >> 31), v40) >> 6) & 7;
    if ( v41 != 5 && v41 != 6 )
    {
      v43 = v149;
      v44 = ((((unsigned int)v149 >> 30) & 1) << 11) | v40 & 0xFFFFF7FF;
      v45 = v157 | ((((unsigned int)v149 >> 30) & 1ui64) >> 21);
      if ( v149 & 0x4000000 )
      {
        _mm_storel_pd((double *)&v146, 0i64);
        v151 = v147;
        v46 = v146;
      }
      else
      {
        v46 = 512;
        v151 = 0;
      }
      v47 = v151 | v45;
      v42 = v46 | v44 & 0xFFFFFDFF;
      v157 = v47;
      v48 = v42 & 0x200;
      if ( !(v42 & 0x200) )
      {
        v49 = (v43 >> 25) & 1;
        v42 = (v49 << 10) | v42 & 0xFFEFFBFF;
        v157 = v47 | (__PAIR__((unsigned int)v48, v49) >> 22);
      }
    }
    else
    {
      v42 = v40 | 0x1000;
    }
    HIDWORD(v50) = (((unsigned int)v153 >> 12) & 1ui64) >> 30;
    LODWORD(v50) = ((unsigned int)v153 >> 13) & 3 | 4 * (((unsigned int)v153 >> 12) & 1);
    v51 = v157 | (v50 >> 19);
    v52 = v42 & 0xFFFF1FFF | ((_DWORD)v50 << 13);
    v154 = v157 | (v50 >> 19);
    v151 = v52;
    if ( (v52 & 0x6000) > 0x2000 && !(v52 & 0x100000) )
    {
      v154 = v51;
      v151 = v52 & 0xFFFF9FFF;
    }
    v53 = ((unsigned int)v153 >> 17) & 3;
    v54 = (unsigned __int64)(unsigned int)v53 >> 30;
    v55 = ((unsigned int)v153 >> 15) & 3 | 4 * v53;
    v56 = __PAIR__(v54, v55) >> 16;
    v36 = v151 & 0xFFF0FFFF | (v55 << 16);
    v35 = v154 | v56;
    v158 = v36;
    v157 = v35;
  }
  v146 = v36;
  v147 = v35;
  v148 = (void *)(v17 + 412);
  sub_10002CB0((void *)(v17 + 412), (int)&v149, (int)&v146);
  v57 = v149;
  if ( v149 == *(_DWORD *)(v17 + 416) )
  {
    v149 = (int)&v146;
    sub_10002E30(v17 + 412, (int)v144, v17 + 412, (int)&v149, v17 + 412);
    v57 = *(_DWORD *)v144;
  }
  if ( !*(_DWORD *)(v57 + 16) )
  {
    v139 = 7;
    v138 = 0;
    v58 = *(const void **)(dword_1007CD9C + 1236);
    v137 = 0;
    if ( *(_WORD *)v58 )
    {
      v60 = v58;
      v149 = (int)((char *)v58 + 2);
      do
      {
        v61 = *(_WORD *)v60;
        v60 = (char *)v60 + 2;
      }
      while ( v61 );
      v59 = (signed int)((char *)v60 - v149) >> 1;
    }
    else
    {
      v59 = 0;
    }
    sub_10001460((int)&v137, v58, v59);
    v163 = 0;
    v62 = sub_10008360(__PAIR__(v157, v158));
    LOBYTE(v163) = 1;
    sub_100017B0((int)&v137, v62, 0, 0xFFFFFFFF);
    LOBYTE(v163) = 0;
    if ( (unsigned int)v136 >= 8 )
      sub_10001E40((int)&v166, v17, v134, v136 + 1);
    sub_10001680((int)&v137, L"_CLX2V06", 8u);
    sub_10001680((int)&v137, L".psh", 4u);
    if ( !sub_10028FF8((int)&v166, v17, (int)&v154) )
    {
      sub_1002C003((int)&v166, v17);
      v75 = sub_1002BD3E((int)&v166, v17, v154);
      v151 = v75;
      sub_1002C01E((int)&v166, (int)&v164, v75);
      v76 = sub_1002C36D(v75);
      sub_1002C2BD((int)&v166, (int)v76);
      sub_100290B5((int)&v166, (int)&v164, (int)v76);
      (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v156 + 4) + 60))(
        *(_DWORD *)(v156 + 4),
        v76,
        v151,
        0,
        &v149);
      sub_1002C0EC(v76);
LABEL_135:
      v77 = (int)v148;
      v152 = v158;
      v153 = v157;
      sub_10002CB0(v148, (int)&v151, (int)&v152);
      v79 = v151;
      if ( v151 == *(_DWORD *)(v77 + 4) )
      {
        v148 = &v152;
        sub_10002E30(v77, (int)v144, v78, (int)&v148, v78);
        v79 = *(_DWORD *)v144;
      }
      *(_DWORD *)(v79 + 16) = v149;
      v163 = -1;
      if ( (unsigned int)v139 >= 8 )
        sub_10001E40((int)&v166, v77, *(LPVOID *)&v137, v139 + 1);
      v17 = v156;
      goto LABEL_140;
    }
    v141 = 0;
    v142 = 0;
    v143 = 0;
    LOBYTE(v163) = 2;
    if ( v158 & 0x4000000 )
    {
      v150 = (int)"CLIP_OUTSIDE_ENABLE";
      v151 = (int)"1";
      sub_100027D0((int)&v141, (unsigned int)&v150);
    }
    if ( v158 & 0x2000000 )
    {
      v150 = (int)"CLIP_INSIDE_ENABLE";
      v151 = (int)"1";
      sub_100027D0((int)&v141, (unsigned int)&v150);
    }
    if ( !(v158 & 1) )
    {
LABEL_99:
      if ( v157 & 2 )
      {
        *(_DWORD *)v144 = "DIV_W";
        v145 = (unsigned int)"1";
        sub_100027D0((int)&v141, (unsigned int)v144);
      }
      if ( v157 & 1 )
      {
        *(_DWORD *)v144 = "USE_GOURAUD";
        v145 = (unsigned int)"1";
        sub_100027D0((int)&v141, (unsigned int)v144);
      }
      if ( v158 & 0x1000000 )
      {
        *(_DWORD *)v144 = "USE_ALPHA_TEST";
        v145 = (unsigned int)"1";
        sub_100027D0((int)&v141, (unsigned int)v144);
      }
      if ( v158 & 0x80000000 )
      {
        *(_DWORD *)v144 = "TRANSPARENCY";
        v145 = (unsigned int)"1";
        sub_100027D0((int)&v141, (unsigned int)v144);
      }
      v151 = (__PAIR__(v157, v158) >> 28) & 7;
      if ( (__PAIR__(v157, v158) >> 28) & 7 )
      {
        *(_DWORD *)v144 = "SHADOW";
        v145 = (unsigned int)"1";
        sub_100027D0((int)&v141, (unsigned int)v144);
        if ( (unsigned int)v151 <= 4 )
        {
          switch ( v151 )
          {
            case 1:
              *(_DWORD *)v144 = "INTENS_SHADOW";
              goto LABEL_114;
            case 2:
              *(_DWORD *)v144 = "USE_2PARAM";
              goto LABEL_114;
            case 3:
              *(_DWORD *)v144 = "USE_AREA0";
              goto LABEL_114;
            case 4:
              *(_DWORD *)v144 = "USE_AREA1";
LABEL_114:
              v145 = (unsigned int)"1";
              sub_100027D0((int)&v141, (unsigned int)v144);
              break;
            default:
              break;
          }
        }
      }
      if ( v158 & 0x200000 )
      {
        *(_DWORD *)v144 = "COLOR_CLAMP";
        v145 = (unsigned int)"1";
        sub_100027D0((int)&v141, (unsigned int)v144);
      }
      v66 = (__PAIR__(v157, v158) >> 22) & 3;
      if ( (__PAIR__(v157, v158) >> 22) & 3 )
      {
        if ( v66 == 1 )
        {
          *(_DWORD *)v144 = "FOG_PERVERTEX";
        }
        else
        {
          if ( v66 != 3 )
          {
LABEL_124:
            if ( v158 & 4 )
            {
              *(_DWORD *)v144 = "USE_ALPHA";
              v145 = (unsigned int)"1";
              sub_100027D0((int)&v141, (unsigned int)v144);
            }
            *(_DWORD *)v144 = 0;
            v145 = 0;
            sub_100027D0((int)&v141, (unsigned int)v144);
            v136 = 15;
            v135 = 0;
            LOBYTE(v134) = 0;
            sub_10001990((int)&v134, "ps_main", 7u);
            LOBYTE(v163) = 3;
            v68 = (int)&v134;
            if ( (unsigned int)v136 >= 0x10 )
              v68 = (int)v134;
            sub_10040760(
              (void *)v17,
              (int)&v153,
              L"PVR2_PSH",
              (int)&v153,
              v141,
              (int)&v153,
              v68,
              (int)"ps_5_0",
              v130,
              v131,
              (int)&v153,
              v67);
            LOBYTE(v163) = 2;
            if ( (unsigned int)v136 >= 0x10 )
              sub_10001EA0((int)&v166, v17, v134, v136 + 1);
            if ( !sub_10028FF8((int)&v166, v17, (int)&v154) )
            {
              v69 = v154;
              v70 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v153 + 16))(v153, 1);
              v71 = v153;
              v72 = (*(int (**)(void))(*(_DWORD *)v153 + 12))();
              sub_1002936D((int)&v166, v17, v72, v71, v70, v69);
              sub_100290B5((int)&v166, (int)&v164, v17);
            }
            v151 = (*(int (__stdcall **)(int))(*(_DWORD *)v153 + 16))(v153);
            v73 = (*(int (__stdcall **)(int))(*(_DWORD *)v153 + 12))(v153);
            v74 = v151;
            (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v156 + 4) + 60))(
              *(_DWORD *)(v156 + 4),
              v73,
              v151,
              0,
              &v149);
            LOBYTE(v163) = 0;
            if ( v141 )
              sub_100029D0((int)&v166, v74, (LPVOID)v141, (v143 - v141) >> 3);
            goto LABEL_135;
          }
          *(_DWORD *)v144 = "USE_FOG_LOOKUP_TABLE2";
        }
      }
      else
      {
        *(_DWORD *)v144 = "USE_FOG_LOOKUP_TABLE";
      }
      v145 = (unsigned int)"1";
      sub_100027D0((int)&v141, (unsigned int)v144);
      goto LABEL_124;
    }
    v150 = (int)"USE_TEXTURE";
    v151 = (int)"1";
    sub_100027D0((int)&v141, (unsigned int)&v150);
    v63 = (__PAIR__(v157, v158) >> 4) & 3;
    if ( v63 <= 3 )
    {
      switch ( v63 )
      {
        case 0u:
          v150 = (int)"USE_REPLACE";
          goto LABEL_58;
        case 1u:
          v150 = (int)"USE_MODULATE";
          goto LABEL_58;
        case 2u:
          v150 = (int)"USE_DECAL";
          goto LABEL_58;
        case 3u:
          v150 = (int)"USE_MODULATE_ALPHA";
LABEL_58:
          v151 = (int)"1";
          sub_100027D0((int)&v141, (unsigned int)&v150);
          break;
        default:
          break;
      }
    }
    v64 = (__PAIR__(v157, v158) >> 6) & 7;
    if ( v64 <= 7 )
    {
      switch ( v64 )
      {
        case 5u:
          v150 = (int)"EncodeIDX4";
          goto LABEL_68;
        case 6u:
          v150 = (int)"EncodeIDX8";
          goto LABEL_68;
        case 0u:
        case 7u:
          v150 = (int)"EncodeARGB1555";
          goto LABEL_68;
        case 1u:
          v150 = (int)"EncodeRGB565";
          goto LABEL_68;
        case 2u:
          v150 = (int)"EncodeARGB4444";
          goto LABEL_68;
        case 3u:
          v150 = (int)"EncodeYUV422";
          goto LABEL_68;
        case 4u:
          v150 = (int)"EncodeBUMPMAP";
LABEL_68:
          v151 = (int)"1";
          sub_100027D0((int)&v141, (unsigned int)&v150);
          break;
        default:
          break;
      }
    }
    if ( !(v158 & 0x200) )
    {
      v150 = (int)"TEX_UNTWIDDLED";
      v151 = (int)"1";
      sub_100027D0((int)&v141, (unsigned int)&v150);
    }
    if ( v158 & 0x400 )
    {
      v150 = (int)"TEX_STRIDE";
      v151 = (int)"1";
      sub_100027D0((int)&v141, (unsigned int)&v150);
    }
    if ( v158 & 0x800 )
    {
      v150 = (int)"TEX_VQCOMP";
      v151 = (int)"1";
      sub_100027D0((int)&v141, (unsigned int)&v150);
    }
    if ( v158 & 8 )
    {
      v150 = (int)"USE_IGNORE_TEX_ALPHA";
      v151 = (int)"1";
      sub_100027D0((int)&v141, (unsigned int)&v150);
    }
    if ( v158 & 2 )
    {
      v150 = (int)"USE_OFFSET_COLOR";
      v151 = (int)"1";
      sub_100027D0((int)&v141, (unsigned int)&v150);
    }
    v65 = (__PAIR__(v157, v158) >> 13) & 3;
    if ( v65 == 1 )
    {
      v150 = (int)"BilinearFilter";
    }
    else if ( v65 == 2 )
    {
      v150 = (int)"TrilinearFilterA";
    }
    else
    {
      if ( v65 != 3 )
      {
LABEL_86:
        if ( v158 & 0x8000 )
        {
          v150 = (int)"SUPERSAMPLE";
          v151 = (int)"1";
          sub_100027D0((int)&v141, (unsigned int)&v150);
        }
        if ( v158 & 0x100000 )
        {
          v150 = (int)"TEX_MIPMAP";
          v151 = (int)"1";
          sub_100027D0((int)&v141, (unsigned int)&v150);
        }
        v145 = v157 >> 16;
        v151 = __PAIR__(v157, v158) >> 16;
        if ( (__PAIR__(v157, v158) >> 16) & 1 )
        {
          *(_DWORD *)v144 = "TEX_CLAMP_V";
        }
        else
        {
          *(_DWORD *)v144 = "TEX_MIRROR_V";
          if ( !(v158 & 0x40000) )
            *(_DWORD *)v144 = "TEX_WRAP_V";
        }
        v145 = (unsigned int)"1";
        sub_100027D0((int)&v141, (unsigned int)v144);
        if ( v151 & 2 )
        {
          *(_DWORD *)v144 = "TEX_CLAMP_U";
        }
        else
        {
          *(_DWORD *)v144 = "TEX_MIRROR_U";
          if ( !(v158 & 0x80000) )
            *(_DWORD *)v144 = "TEX_WRAP_U";
        }
        v145 = (unsigned int)"1";
        sub_100027D0((int)&v141, (unsigned int)v144);
        goto LABEL_99;
      }
      v150 = (int)"TrilinearFilterB";
    }
    v151 = (int)"1";
    sub_100027D0((int)&v141, (unsigned int)&v150);
    goto LABEL_86;
  }
LABEL_140:
  v80 = v158;
  v81 = a8;
  if ( v158 & 0x6000000 )
  {
    v82 = *(_WORD *)(a8 + 24);
    if ( *(_DWORD *)(*(_DWORD *)(v17 + 8704) + 96) & 0x1000000 )
    {
      v153 = v82 << 16;
      v153 = *(_WORD *)(a8 + 26) | (v82 << 16);
      if ( *(_DWORD *)(v17 + 11116) != v153 )
      {
        *(_DWORD *)(v17 + 11116) = v153;
        *(_BYTE *)(v17 + 11024) = 1;
      }
      v153 = *(_WORD *)(a8 + 28) << 16;
      v83 = *(_WORD *)(a8 + 30);
    }
    else
    {
      v153 = dword_10239478 * v82 << 16;
      v153 |= dword_10239478 * *(_WORD *)(a8 + 26);
      if ( *(_DWORD *)(v17 + 11116) != v153 )
      {
        *(_DWORD *)(v17 + 11116) = v153;
        *(_BYTE *)(v17 + 11024) = 1;
      }
      v153 = dword_10239478 * *(_WORD *)(a8 + 28) << 16;
      v83 = dword_10239478 * *(_WORD *)(a8 + 30);
    }
    v153 |= v83;
    if ( *(_DWORD *)(v17 + 11120) != v153 )
    {
      *(_DWORD *)(v17 + 11120) = v153;
      *(_BYTE *)(v17 + 11024) = 1;
    }
  }
  v149 = v80 & 0x70000000;
  if ( v80 & 0x70000000 )
  {
    v84 = *(_DWORD *)(v17 + 9656) + 4;
    v159 = 0;
    v148 = (void *)v84;
    v85 = *(_DWORD *)v84;
    if ( *(_DWORD *)(v17 + 300) != v85 )
    {
      v159 = 1;
      *(_DWORD *)(v17 + 300) = v85;
    }
    v86 = *(_DWORD *)(v17 + 8);
    if ( v86 && v159 )
    {
      (*(void (__fastcall **)(unsigned int, int, _DWORD, signed int, signed int, void *))(*(_DWORD *)v86 + 32))(
        v80,
        a8,
        *(_DWORD *)(v17 + 8),
        6,
        1,
        v148);
      v80 = v158;
      v81 = a8;
    }
    if ( (*(_DWORD *)v81 & 0x7000000) == 0x2000000 )
    {
      if ( *(_DWORD *)(v17 + 11132) != 4 )
      {
        *(_DWORD *)(v17 + 11132) = 4;
        goto LABEL_161;
      }
    }
    else if ( *(_DWORD *)(v17 + 11132) != 1 )
    {
      *(_DWORD *)(v17 + 11132) = 1;
LABEL_161:
      *(_BYTE *)(v17 + 11024) = 1;
      goto LABEL_162;
    }
LABEL_162:
    if ( v149 == 0x10000000 )
    {
      v87 = *(_DWORD *)(v17 + 11104);
      __asm { lahf }
      if ( __SETP__(_AH & 0x44, 0) )
      {
        *(_DWORD *)(v17 + 11104) = dword_1006D0F0[*(_BYTE *)(*(_DWORD *)(v17 + 8704) + 116)];
        *(_BYTE *)(v17 + 11024) = 1;
      }
    }
  }
  if ( v80 & 0x80000000 )
  {
    v153 = *(_DWORD *)(v81 + 8 * v155 + 8);
    v89 = v153;
    v153 &= 0x3000000u;
    v153 |= v89 >> 8;
    if ( *(_DWORD *)(v17 + 11032) != (unsigned int)v153 >> 18 )
    {
      *(_DWORD *)(v17 + 11032) = (unsigned int)v153 >> 18;
      *(_BYTE *)(v17 + 11024) = 1;
    }
  }
  if ( v80 & 1 )
  {
    v90 = *(_DWORD *)(v17 + 9632);
    v159 = 0;
    if ( *(_DWORD *)(v17 + 276) != v90 )
    {
      v159 = 1;
      *(_DWORD *)(v17 + 276) = v90;
    }
    v91 = *(_DWORD *)(v17 + 8);
    if ( v91 && v159 )
    {
      (*(void (__fastcall **)(int, int, _DWORD, _DWORD, signed int, int))(*(_DWORD *)v91 + 32))(
        v17 + 9632,
        v81,
        *(_DWORD *)(v17 + 8),
        0,
        1,
        v17 + 9632);
      v80 = v158;
      v81 = a8;
    }
    v92 = 4 * (*(_DWORD *)(v81 + 8 * v155 + 12) & 0x1FFFFF);
    if ( *(_DWORD *)(v17 + 11100) != v92 )
    {
      *(_DWORD *)(v17 + 11100) = v92;
      *(_BYTE *)(v17 + 11024) = 1;
    }
    if ( v80 & 0x400 )
    {
      v93 = 32 * (*(_DWORD *)(*(_DWORD *)(v17 + 8704) + 228) & 0x1F);
      if ( *(_DWORD *)(v17 + 11028) != v93 )
      {
        *(_DWORD *)(v17 + 11028) = v93;
        *(_BYTE *)(v17 + 11024) = 1;
      }
    }
    if ( v80 & 0x1000 )
    {
      v94 = (*(_DWORD *)(v81 + 8 * v155 + 12) >> 17) & 0x3F0;
      if ( *(_DWORD *)(v17 + 11028) != v94 )
      {
        *(_DWORD *)(v17 + 11028) = v94;
        *(_BYTE *)(v17 + 11024) = 1;
      }
      sub_1005CC10(v132, v133);
      v95 = 0;
      v96 = *(_DWORD *)(v17 + 9688) + 4;
      if ( *(_DWORD *)(v17 + 288) != *(_DWORD *)v96 )
      {
        v95 = 1;
        *(_DWORD *)(v17 + 288) = *(_DWORD *)v96;
      }
      v97 = *(_DWORD *)(v17 + 8);
      if ( v97 && v95 )
        (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v97 + 32))(v97, 3, 1, v96);
      v80 = v158;
      v81 = a8;
    }
    v98 = ((*(_DWORD *)(v81 + 8 * v155 + 8) >> 3) & 7) + 3;
    if ( *(_DWORD *)(v17 + 11108) != v98 )
    {
      *(_DWORD *)(v17 + 11108) = v98;
      *(_BYTE *)(v17 + 11024) = 1;
    }
    v99 = *(_DWORD *)(v81 + 8 * v155 + 8);
    if ( v80 & 0x100000 )
    {
      _EAX = (v99 >> 8) & 0xF;
      v101 = (__m128d)COERCE_UNSIGNED_INT64((double)_EAX);
      v101.m128d_f64[0] = v101.m128d_f64[0] + *(double *)&qword_1006EEC0[(unsigned int)_EAX >> 31];
      LODWORD(v102) = (unsigned __int128)_mm_cvtpd_ps(v101);
      v103 = *(_DWORD *)(v17 + 11128);
      v104 = v102 * 0.25;
      __asm { lahf }
      if ( __SETP__(BYTE1(_EAX) & 0x44, 0) )
      {
        *(float *)(v17 + 11128) = v104;
        *(_BYTE *)(v17 + 11024) = 1;
      }
      v99 = *(_DWORD *)(v81 + 8 * v155 + 8) >> 3;
    }
    v105 = (v99 & 7) + 3;
    if ( *(_DWORD *)(v17 + 11112) != v105 )
    {
      *(_DWORD *)(v17 + 11112) = v105;
      *(_BYTE *)(v17 + 11024) = 1;
    }
  }
  if ( v80 & 0x200000 )
  {
    v140 = _mm_mul_ps(
             _mm_add_ps(
               _mm_cvtepi32_ps(_mm_xor_si128(_mm_and_si128(_mm_shuffle_epi32(_mm_cvtsi32_si128(*(_DWORD *)(*(_DWORD *)(v17 + 8704) + 188)), 0), (__m128i)xmmword_1006DB00), (__m128i)xmmword_1006DAB0)),
               (__m128)xmmword_1006DAF0),
             (__m128)xmmword_1006DB40);
    sub_100090B0((void *)(v17 + 11024), v156 + 11076, (int)&v140);
    v140 = _mm_mul_ps(
             _mm_add_ps(
               _mm_cvtepi32_ps(_mm_xor_si128(_mm_and_si128(_mm_shuffle_epi32(_mm_cvtsi32_si128(*(_DWORD *)(*(_DWORD *)(v156 + 8704) + 192)), 0), (__m128i)xmmword_1006DB00), (__m128i)xmmword_1006DAB0)),
               (__m128)xmmword_1006DAF0),
             (__m128)xmmword_1006DB40);
    sub_100090B0((void *)(v17 + 11024), v156 + 11060, (int)&v140);
    v80 = v158;
  }
  if ( !((__PAIR__(v157, v80) >> 22) & 3) || ((__PAIR__(v157, v80) >> 22) & 3) == 3 )
  {
    v107 = *(_DWORD *)(v156 + 8704);
    v108 = (__m128d)COERCE_UNSIGNED_INT64((double)*(_BYTE *)(v107 + 184));
    v108.m128d_f64[0] = v108.m128d_f64[0] + *(double *)&qword_1006EEC0[(unsigned int)*(_BYTE *)(v107 + 184) >> 31];
    sub_10061827((__m128d)(unsigned __int64)qword_1006EDD8, v108, a6, a7);
    _EAX = *(_BYTE *)(v107 + 185);
    v106 = v156;
    v110 = (__m128)COERCE_UNSIGNED_INT((float)_EAX);
    v110.m128_f32[0] = v110.m128_f32[0] * 0.0078125;
    v111 = 2.0 * COERCE_DOUBLE(_mm_cvtps_pd(v110));
    v112 = *(_DWORD *)(v156 + 11040);
    __asm { lahf }
    if ( __SETP__(BYTE1(_EAX) & 0x44, 0) )
    {
      *(float *)(v156 + 11040) = v111;
      *(_BYTE *)(v106 + 11024) = 1;
    }
    v113 = 0;
    v114 = _mm_mul_ps(
             _mm_add_ps(
               _mm_cvtepi32_ps(_mm_xor_si128(_mm_and_si128(_mm_shuffle_epi32(_mm_cvtsi32_si128(*(_DWORD *)(*(_DWORD *)(v106 + 8704) + 176)), 0), (__m128i)xmmword_1006DB00), (__m128i)xmmword_1006DAB0)),
               (__m128)xmmword_1006DAF0),
             (__m128)xmmword_1006DB40);
    v140 = v114;
    while ( 1 )
    {
      v115 = *(_DWORD *)(v106 + 11044 + 4 * v113);
      v116 = *(&v164 + v113 - 24);
      __asm { lahf }
      if ( __SETP__(_AH & 0x44, 0) )
        break;
      ++v113;
      if ( v113 >= 4 )
        goto LABEL_209;
    }
    v118 = v106 + 11044;
    *(_DWORD *)v118 = (_DWORD)v114.m128_f32[0];
    *(_DWORD *)(v118 + 4) = (unsigned __int128)_mm_shuffle_ps(v114, v114, 85);
    *(_DWORD *)(v118 + 8) = (unsigned __int128)_mm_shuffle_ps(v114, v114, -86);
    *(_DWORD *)(v118 + 12) = (unsigned __int128)_mm_shuffle_ps(v114, v114, -1);
    *(_BYTE *)(v106 + 11024) = 1;
LABEL_209:
    sub_1005CB90(v106);
    v119 = 0;
    v120 = *(_DWORD *)(v106 + 9692) + 4;
    if ( *(_DWORD *)(v106 + 292) != *(_DWORD *)v120 )
    {
      v119 = 1;
      *(_DWORD *)(v106 + 292) = *(_DWORD *)v120;
    }
    v121 = *(_DWORD *)(v106 + 8);
    if ( v121 && v119 )
      (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v121 + 32))(v121, 4, 1, v120);
    goto LABEL_214;
  }
  v106 = v156;
  if ( (v80 & 0xC00000) == 0x400000 )
  {
    v140 = _mm_mul_ps(
             _mm_add_ps(
               _mm_cvtepi32_ps(_mm_xor_si128(_mm_and_si128(_mm_shuffle_epi32(_mm_cvtsi32_si128(*(_DWORD *)(*(_DWORD *)(v156 + 8704) + 180)), 0), (__m128i)xmmword_1006DB00), (__m128i)xmmword_1006DAB0)),
               (__m128)xmmword_1006DAF0),
             (__m128)xmmword_1006DB40);
    sub_100090B0((void *)(v156 + 11024), v156 + 11044, (int)&v140);
LABEL_214:
    v80 = v158;
  }
  if ( v80 & 0x1000000 )
  {
    v122 = *(_DWORD *)(v106 + 11036);
    __asm { lahf }
    if ( __SETP__(_AH & 0x44, 0) )
    {
      *(_DWORD *)(v106 + 11036) = dword_1006D0F0[*(_BYTE *)(*(_DWORD *)(v106 + 8704) + 284)];
      *(_BYTE *)(v106 + 11024) = 1;
    }
  }
  v124 = *(_DWORD *)(v106 + 31456);
  if ( *(_DWORD *)(v106 + 11092) != v124 )
  {
    *(_DWORD *)(v106 + 11092) = v124;
    *(_BYTE *)(v106 + 11024) = 1;
  }
  v125 = *(_DWORD *)(v106 + 31460);
  if ( *(_DWORD *)(v106 + 11096) != v125 )
  {
    *(_DWORD *)(v106 + 11096) = v125;
    *(_BYTE *)(v106 + 11024) = 1;
  }
  v126 = *(_BYTE *)(v106 + 11024);
  *(_BYTE *)(v106 + 11024) = 0;
  if ( v126 )
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v106 + 8) + 192))(
      *(_DWORD *)(v106 + 8),
      *(_DWORD *)(v106 + 408),
      0,
      0,
      v106 + 11028,
      0,
      0);
  v127 = *(_DWORD *)(v57 + 16);
  result = *(_DWORD *)(v106 + 408);
  v151 = *(_DWORD *)(v106 + 408);
  if ( *(_DWORD *)(v106 + 152) != v127 )
  {
    v129 = *(_DWORD *)(v106 + 8);
    *(_DWORD *)(v106 + 152) = v127;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v129 + 36))(v129, v127, 0, 0);
    result = v151;
  }
  if ( *(_DWORD *)(v106 + 156) != result )
  {
    *(_DWORD *)(v106 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v106 + 8) + 64))(
               *(_DWORD *)(v106 + 8),
               0,
               1,
               &v151);
  }
  return result;
}
// 10050D40: could not find valid save-restore pair for ebp
// 10050D40: could not find valid save-restore pair for edi
// 10050D40: could not find valid save-restore pair for esi
// 1006CC54: using guessed type wchar_t a_psh[5];
// 1006D0F0: using guessed type int dword_1006D0F0[];
// 1006DAB0: using guessed type __int128 xmmword_1006DAB0;
// 1006DAF0: using guessed type __int128 xmmword_1006DAF0;
// 1006DB00: using guessed type __int128 xmmword_1006DB00;
// 1006DB40: using guessed type __int128 xmmword_1006DB40;
// 1006E288: using guessed type wchar_t a_clx2v06[9];
// 1006EDD8: using guessed type __int64 qword_1006EDD8;
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 10239478: using guessed type int dword_10239478;
// 102394CB: using guessed type char byte_102394CB;

//----- (10052080) --------------------------------------------------------
int __thiscall sub_10052080(void *this, int a2, unsigned int a3)
{
  int v3; // ebp@0
  int v4; // edi@1
  signed int v5; // eax@1
  unsigned int v6; // edx@1
  unsigned int v7; // ebx@4
  int v8; // esi@4
  unsigned int v9; // eax@4
  int v10; // ecx@4
  int v11; // ecx@12
  int v12; // eax@17
  int v13; // ebx@18
  int v14; // eax@20
  int v15; // eax@23
  int v16; // ebx@24
  signed int v17; // ecx@30
  int v18; // esi@33
  int v19; // edi@36
  int v20; // edx@36
  char **v21; // edx@37
  int v22; // eax@40
  int v23; // eax@41
  int v24; // eax@44
  __m128i v25; // xmm0@44
  __int128 v26; // xmm0@46
  int v27; // eax@46
  int v28; // eax@46
  __int128 v29; // xmm0@46
  __int128 v30; // xmm0@47
  __int128 v31; // xmm0@49
  __int128 v32; // xmm0@50
  int v33; // eax@50
  int v34; // ecx@51
  int v35; // eax@52
  __m128i v36; // xmm0@52
  int v37; // eax@54
  int v38; // eax@55
  signed int v39; // edi@57
  int v40; // eax@59
  __m128i v41; // xmm0@59
  __int128 v42; // xmm0@61
  int v43; // eax@61
  int v44; // eax@62
  int v45; // ecx@62
  int v46; // edi@62
  __int128 v47; // xmm0@62
  int v48; // eax@62
  int v49; // ecx@62
  __int128 v50; // xmm0@63
  int v51; // eax@63
  int v52; // eax@66
  __m128i v53; // xmm0@66
  __int128 v54; // xmm0@68
  int v55; // eax@68
  int v56; // eax@68
  __int128 v57; // xmm0@68
  int v58; // eax@71
  int v59; // ecx@72
  int v60; // edi@72
  int v61; // ecx@72
  int v62; // ecx@73
  int v63; // ecx@75
  int v64; // edi@75
  int v65; // ecx@75
  int v66; // ecx@77
  int v67; // edi@77
  int v68; // ecx@77
  int v69; // ecx@77
  const void *v70; // edx@83
  int v71; // ecx@84
  const void *v72; // ecx@85
  __int16 v73; // ax@86
  int v74; // eax@88
  int v75; // eax@114
  int v76; // ecx@133
  void *v77; // eax@133
  int v78; // ST28_4@138
  int v79; // ST24_4@138
  int v80; // ST20_4@138
  char v81; // al@138
  int v82; // eax@139
  int v83; // eax@139
  LPVOID v84; // edi@139
  int v85; // edi@141
  int v86; // ebx@142
  int v87; // ecx@142
  int v88; // eax@142
  __int128 v89; // xmm0@147
  char v92; // al@153
  int v93; // edx@155
  int result; // eax@155
  int v95; // eax@156
  int v96; // edx@159
  int v97; // eax@160
  int v98; // [sp-10h] [bp-1B0h]@0
  int v99; // [sp-Ch] [bp-1ACh]@90
  char v100; // [sp+10h] [bp-190h]@107
  char v101; // [sp+18h] [bp-188h]@103
  __int128 v102; // [sp+20h] [bp-180h]@36
  __int64 v103; // [sp+30h] [bp-170h]@39
  char *v104; // [sp+38h] [bp-168h]@39
  __int128 v105; // [sp+3Ch] [bp-164h]@44
  __int64 v106; // [sp+4Ch] [bp-154h]@46
  char *v107; // [sp+54h] [bp-14Ch]@46
  __int128 v108; // [sp+58h] [bp-148h]@46
  __int64 v109; // [sp+68h] [bp-138h]@46
  char *v110; // [sp+70h] [bp-130h]@46
  __int128 v111; // [sp+74h] [bp-12Ch]@46
  __int64 v112; // [sp+84h] [bp-11Ch]@46
  int v113; // [sp+8Ch] [bp-114h]@46
  __int128 v114; // [sp+90h] [bp-110h]@61
  __int64 v115; // [sp+A0h] [bp-100h]@61
  int v116; // [sp+A8h] [bp-F8h]@61
  __int128 v117; // [sp+ACh] [bp-F4h]@68
  __int64 v118; // [sp+BCh] [bp-E4h]@68
  int v119; // [sp+C4h] [bp-DCh]@68
  __int128 v120; // [sp+C8h] [bp-D8h]@68
  __int64 v121; // [sp+D8h] [bp-C8h]@68
  int v122; // [sp+E0h] [bp-C0h]@68
  int v123; // [sp+124h] [bp-7Ch]@109
  int v124; // [sp+12Ch] [bp-74h]@33
  LPVOID lpMem; // [sp+130h] [bp-70h]@88
  int v126; // [sp+140h] [bp-60h]@133
  unsigned int v127; // [sp+144h] [bp-5Ch]@88
  LPVOID v128; // [sp+148h] [bp-58h]@83
  int v129; // [sp+158h] [bp-48h]@83
  unsigned int v130; // [sp+15Ch] [bp-44h]@83
  int v131; // [sp+160h] [bp-40h]@139
  int v132; // [sp+164h] [bp-3Ch]@139
  int v133; // [sp+168h] [bp-38h]@12
  char **v134; // [sp+16Ch] [bp-34h]@36
  int v135; // [sp+170h] [bp-30h]@1
  int v136; // [sp+174h] [bp-2Ch]@90
  LPVOID v137; // [sp+178h] [bp-28h]@91
  int v138; // [sp+17Ch] [bp-24h]@91
  int v139; // [sp+180h] [bp-20h]@91
  int v140; // [sp+184h] [bp-1Ch]@71
  char v141; // [sp+18Ah] [bp-16h]@10
  char v142; // [sp+18Bh] [bp-15h]@5
  int v143; // [sp+18Ch] [bp-14h]@34
  char *v144; // [sp+190h] [bp-10h]@92
  int v145; // [sp+19Ch] [bp-4h]@88

  v4 = (int)this;
  v5 = 0;
  v135 = (int)this;
  v6 = *(_DWORD *)(a2 + 32);
  if ( v6 < 0x80000000 && byte_102394CB )
    v5 = 0x40000000;
  v7 = *(_DWORD *)a2;
  v8 = *(_DWORD *)a2 >> 1;
  v9 = ((unsigned __int8)v5 ^ (unsigned __int8)v8) & 4 ^ v5;
  v10 = *(_DWORD *)a2 & 0x7000000;
  if ( v10 == 0x1000000 || (v142 = 1, v10 == 50331648) )
    v142 = 0;
  if ( ((signed int)a3 < 2 || v10 == 0x4000000) && v142 )
  {
    v141 = 1;
    if ( (v7 & 0xC0) == -64 )
    {
      if ( v6 & 0x40000000 )
      {
        v11 = 0;
        v133 = 256;
        if ( a3 == 1 )
          v11 = v133;
        v9 = v11 | v9 & 0xFFFFFEFF;
      }
      else
      {
        v9 |= 0x200u;
      }
    }
  }
  else
  {
    v141 = 0;
  }
  v12 = ((unsigned __int16)v9 ^ (v6 >> 18)) & 0x2000 ^ v9;
  if ( v12 & 0x2000 )
  {
    v13 = v12 & 0xFFFE3FFF | ((v6 & 0x100 | 2 * (v6 & 0x40 | 4 * (v6 & 8))) << 8);
    a3 = v12 & 0xFFFE3FFF | ((v6 & 0x100 | 2 * (v6 & 0x40 | 4 * (v6 & 8))) << 8);
    if ( v141 )
    {
      sub_10053050(v4, a2, &a3);
      v13 = a3;
    }
  }
  else
  {
    v14 = ((unsigned __int8)v12 ^ (unsigned __int8)(v6 >> 23)) & 0x40 ^ v12;
    if ( v14 & 0x40 )
    {
      if ( v14 & 4 )
        v14 ^= ((unsigned __int8)v14 ^ (unsigned __int8)v7) & 1;
      v15 = ((unsigned __int8)v14 ^ (unsigned __int8)v7) & 2 ^ v14;
      if ( (v7 & 0x30) >= 0x20 )
        v16 = 2;
      else
        v16 = (v7 >> 4) & 3;
      v13 = v15 & 0xFFFFFFE7 | 8 * v16;
      if ( v142 )
        v13 ^= ((unsigned __int8)v13 ^ (unsigned __int8)v8) & 0x20;
    }
    else
    {
      if ( v7 & 2 && v142 )
        v17 = 2;
      else
        v17 = 0;
      v13 = v17 | v14 & 0xFFFFFFFD;
    }
  }
  v133 = v13;
  v124 = v4 + 376;
  sub_10002D30(v4 + 376, (int)&a3, (int)&v133);
  v18 = a3;
  if ( a3 == *(_DWORD *)(v4 + 380) )
  {
    a2 = (int)&v133;
    sub_10002E90(v4 + 376, (int)&v143, v4 + 376, (int)&a2, v4 + 376);
    v18 = v143;
  }
  if ( !*(_DWORD *)(v18 + 12) )
  {
    v19 = 0;
    v20 = ((unsigned int)v13 >> 6) & 1;
    v134 = (char **)&v102;
    a3 = 0;
    a2 = ((unsigned int)v13 >> 6) & 1;
    if ( !v20 )
      goto LABEL_71;
    v21 = &off_1006E980;
    v19 = 1;
    if ( !(v13 & 2) )
      v21 = &off_1006E5C0;
    a3 = 1;
    v104 = v21[6];
    v102 = *(_OWORD *)v21;
    _mm_storel_epi64((__m128i *)&v103, _mm_loadl_epi64((const __m128i *)v21 + 1));
    if ( v13 & 4 )
    {
      v34 = v13 & 1;
      if ( v13 & 1 )
      {
        v35 = (int)v21[27];
        v105 = *(_OWORD *)(v21 + 21);
        v36 = _mm_loadl_epi64((const __m128i *)(v21 + 25));
      }
      else
      {
        v35 = (int)v21[13];
        v105 = *(_OWORD *)(v21 + 7);
        v36 = _mm_loadl_epi64((const __m128i *)(v21 + 11));
      }
      v107 = (char *)v35;
      v19 = 2;
      _mm_storel_epi64((__m128i *)&v106, v36);
      v37 = ((unsigned int)v13 >> 3) & 3;
      a3 = 2;
      if ( !v37 )
      {
        v19 = 4;
        v110 = v21[41];
        v113 = (int)v21[48];
        a3 = 4;
        v108 = *(_OWORD *)(v21 + 35);
        _mm_storel_epi64((__m128i *)&v109, _mm_loadl_epi64((const __m128i *)(v21 + 39)));
        v111 = *(_OWORD *)(v21 + 42);
        _mm_storel_epi64((__m128i *)&v112, _mm_loadl_epi64((const __m128i *)(v21 + 46)));
        if ( v13 & 0x20 )
        {
          if ( v34 )
          {
            v52 = (int)v21[34];
            v114 = *((_OWORD *)v21 + 7);
            v53 = _mm_loadl_epi64((const __m128i *)v21 + 8);
          }
          else
          {
            v52 = (int)v21[20];
            v114 = *(_OWORD *)(v21 + 14);
            v53 = _mm_loadl_epi64((const __m128i *)(v21 + 18));
          }
          _mm_storel_epi64((__m128i *)&v115, v53);
          v19 = 7;
          v54 = *(_OWORD *)(v21 + 63);
          v116 = v52;
          v55 = (int)v21[69];
          v117 = v54;
          v119 = v55;
          v56 = (int)v21[76];
          _mm_storel_epi64((__m128i *)&v118, _mm_loadl_epi64((const __m128i *)(v21 + 67)));
          v57 = *(_OWORD *)(v21 + 70);
          v122 = v56;
          v120 = v57;
          _mm_storel_epi64((__m128i *)&v121, _mm_loadl_epi64((const __m128i *)(v21 + 74)));
          goto LABEL_69;
        }
        goto LABEL_70;
      }
      v38 = v37 - 1;
      if ( v38 )
      {
        if ( v38 == 1 )
        {
          v39 = 3;
          v110 = v21[104];
          v108 = *(_OWORD *)(v21 + 98);
          _mm_storel_epi64((__m128i *)&v109, _mm_loadl_epi64((const __m128i *)(v21 + 102)));
          if ( v13 & 0x20 )
          {
            if ( v34 )
            {
              v40 = (int)v21[34];
              v111 = *((_OWORD *)v21 + 7);
              v41 = _mm_loadl_epi64((const __m128i *)v21 + 8);
            }
            else
            {
              v40 = (int)v21[20];
              v111 = *(_OWORD *)(v21 + 14);
              v41 = _mm_loadl_epi64((const __m128i *)(v21 + 18));
            }
            _mm_storel_epi64((__m128i *)&v112, v41);
            v39 = 5;
            v42 = *((_OWORD *)v21 + 28);
            v113 = v40;
            v43 = (int)v21[118];
            v114 = v42;
            v116 = v43;
            _mm_storel_epi64((__m128i *)&v115, _mm_loadl_epi64((const __m128i *)v21 + 29));
          }
          v44 = (int)v21[125];
          v45 = 7 * v39;
          v46 = v39 + 1;
          *(__int128 *)((char *)&v102 + 4 * v45) = *(_OWORD *)(v21 + 119);
          _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v45), _mm_loadl_epi64((const __m128i *)(v21 + 123)));
          v47 = *(_OWORD *)(v21 + 126);
          (&v104)[4 * v45] = (char *)v44;
          v48 = (int)v21[132];
          v49 = 7 * v46;
          v19 = v46 + 1;
          *(__int128 *)((char *)&v102 + 4 * v49) = v47;
          _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v49), _mm_loadl_epi64((const __m128i *)(v21 + 130)));
          (&v104)[4 * v49] = (char *)v48;
          goto LABEL_69;
        }
        goto LABEL_70;
      }
      v50 = *((_OWORD *)v21 + 21);
      v19 = 4;
      v110 = v21[90];
      v51 = (int)v21[97];
      v108 = v50;
      v113 = v51;
      _mm_storel_epi64((__m128i *)&v109, _mm_loadl_epi64((const __m128i *)v21 + 22));
      v111 = *(_OWORD *)(v21 + 91);
      _mm_storel_epi64((__m128i *)&v112, _mm_loadl_epi64((const __m128i *)(v21 + 95)));
    }
    else
    {
      v22 = ((unsigned int)v13 >> 3) & 3;
      if ( v22 )
      {
        v23 = v22 - 1;
        if ( v23 )
        {
          if ( v23 == 1 )
          {
            if ( v13 & 0x20 )
            {
              v24 = (int)v21[111];
              v105 = *(_OWORD *)(v21 + 105);
              v25 = _mm_loadl_epi64((const __m128i *)(v21 + 109));
            }
            else
            {
              v24 = (int)v21[104];
              v105 = *(_OWORD *)(v21 + 98);
              v25 = _mm_loadl_epi64((const __m128i *)(v21 + 102));
            }
            _mm_storel_epi64((__m128i *)&v106, v25);
            v19 = 4;
            v26 = *(_OWORD *)(v21 + 119);
            v107 = (char *)v24;
            v27 = (int)v21[125];
            v108 = v26;
            v110 = (char *)v27;
            v28 = (int)v21[132];
            _mm_storel_epi64((__m128i *)&v109, _mm_loadl_epi64((const __m128i *)(v21 + 123)));
            v29 = *(_OWORD *)(v21 + 126);
            v113 = v28;
            v111 = v29;
            _mm_storel_epi64((__m128i *)&v112, _mm_loadl_epi64((const __m128i *)(v21 + 130)));
            goto LABEL_69;
          }
LABEL_70:
          v20 = a2;
LABEL_71:
          v58 = ((unsigned int)v13 >> 13) & 1;
          v140 = ((unsigned int)v13 >> 13) & 1;
          if ( v58 )
          {
            v59 = 7 * v19;
            v60 = v19 + 1;
            *(__int128 *)((char *)&v102 + 4 * v59) = off_1006E7D8;
            _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v59), _mm_loadl_epi64((const __m128i *)&qword_1006E7E8));
            (&v104)[4 * v59] = 0;
            v61 = 7 * v60;
            v19 = v60 + 1;
            a3 = v19;
            *(__int128 *)((char *)&v102 + 4 * v61) = off_1006E7F4;
            _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v61), _mm_loadl_epi64((const __m128i *)&qword_1006E804));
            (&v104)[4 * v61] = 0;
            if ( v13 & 0x4000 )
            {
              v62 = 7 * v19++;
              a3 = v19;
              *(__int128 *)((char *)&v102 + 4 * v62) = off_1006E810;
              _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v62), _mm_loadl_epi64((const __m128i *)&qword_1006E820));
              (&v104)[4 * v62] = 0;
            }
            if ( v13 & 0x8000 )
            {
              v63 = 7 * v19;
              v64 = v19 + 1;
              *(__int128 *)((char *)&v102 + 4 * v63) = off_1006E82C;
              _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v63), _mm_loadl_epi64((const __m128i *)&qword_1006E83C));
              (&v104)[4 * v63] = 0;
              v65 = 7 * v64;
              v19 = v64 + 1;
              a3 = v19;
              *(__int128 *)((char *)&v102 + 4 * v65) = off_1006E848;
              _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v65), _mm_loadl_epi64((const __m128i *)&qword_1006E858));
              (&v104)[4 * v65] = 0;
            }
            if ( v13 & 0x10000 )
            {
              v66 = 7 * v19;
              v67 = v19 + 1;
              *(__int128 *)((char *)&v102 + 4 * v66) = off_1006E864;
              _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v66), _mm_loadl_epi64((const __m128i *)&qword_1006E874));
              (&v104)[4 * v66] = 0;
              v68 = 7 * v67++;
              *(__int128 *)((char *)&v102 + 4 * v68) = off_1006E880;
              _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v68), _mm_loadl_epi64((const __m128i *)&qword_1006E890));
              (&v104)[4 * v68] = 0;
              v69 = 7 * v67;
              v19 = v67 + 1;
              a3 = v19;
              *(__int128 *)((char *)&v102 + 4 * v69) = off_1006E89C;
              _mm_storel_epi64((__m128i *)((char *)&v103 + 4 * v69), _mm_loadl_epi64((const __m128i *)&qword_1006E8AC));
              (&v104)[4 * v69] = 0;
            }
            v58 = v140;
          }
          if ( !v20 && !v58 )
          {
            a3 = 7;
            v134 = &off_1006EB98;
            if ( !(v13 & 2) )
              v134 = &off_1006E8B8;
          }
          v130 = 7;
          v129 = 0;
          v70 = *(const void **)(dword_1007CD9C + 1236);
          LOWORD(v128) = 0;
          if ( *(_WORD *)v70 )
          {
            v72 = v70;
            v19 = (int)((char *)v70 + 2);
            do
            {
              v73 = *(_WORD *)v72;
              v72 = (char *)v72 + 2;
            }
            while ( v73 );
            v71 = (signed int)((char *)v72 - v19) >> 1;
          }
          else
          {
            v71 = 0;
          }
          sub_10001460((int)&v128, v70, v71);
          v145 = 0;
          v74 = sub_100026C0((int)&lpMem, v13);
          LOBYTE(v145) = 1;
          sub_100017B0((int)&v128, v74, 0, 0xFFFFFFFF);
          LOBYTE(v145) = 0;
          if ( v127 >= 8 )
            sub_10001E40(v13, v19, lpMem, v127 + 1);
          sub_10001680((int)&v128, L"_CLX2V06", 8u);
          sub_10001680((int)&v128, L".vsh", 4u);
          if ( !sub_10028FF8(v13, v19, (int)&v136) )
          {
            sub_1002C003(v13, v19);
            v85 = sub_1002BD3E(v13, v19, v136);
            a2 = v85;
            sub_1002C01E(v13, v3, v85);
            v84 = sub_1002C36D(v85);
            sub_1002C2BD(v13, (int)v84);
            sub_100290B5(v13, v3, (int)v84);
            (*(void (__stdcall **)(_DWORD, LPVOID, int, _DWORD, int *))(**(_DWORD **)(v135 + 4) + 48))(
              *(_DWORD *)(v135 + 4),
              v84,
              a2,
              0,
              &v131);
            (*(void (__stdcall **)(_DWORD, char **, unsigned int, LPVOID, int, int *))(**(_DWORD **)(v135 + 4) + 44))(
              *(_DWORD *)(v135 + 4),
              v134,
              a3,
              v84,
              a2,
              &v132);
            sub_1002C0EC(v84);
LABEL_142:
            a3 = v13;
            v86 = v124;
            sub_10002D30(v124, (int)&a2, (int)&a3);
            v88 = a2;
            if ( a2 == *(_DWORD *)(v86 + 4) )
            {
              a2 = (int)&a3;
              sub_10002E90(v86, (int)&v123, v87, (int)&a2, v87);
              v88 = v123;
            }
            *(_DWORD *)(v88 + 12) = v131;
            *(_DWORD *)(v88 + 16) = v132;
            v145 = -1;
            if ( v130 >= 8 )
              sub_10001E40(v86, (int)v84, v128, v130 + 1);
            v4 = v135;
            goto LABEL_147;
          }
          v137 = 0;
          v138 = 0;
          v139 = 0;
          LOBYTE(v145) = 2;
          if ( v140 )
          {
            v143 = (int)"Naomi2";
            v144 = "1";
            sub_100027D0((int)&v137, (unsigned int)&v143);
            if ( v13 & 0x40000 )
            {
              v143 = (int)"USE_LIGHT";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( v13 & 0x4000 )
            {
              v143 = (int)"USE_UV";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( v13 & 0x8000 )
            {
              v143 = (int)"USE_VERTEX_COLORS";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( v13 & 0x10000 )
            {
              v143 = (int)"USE_BUMP";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( v13 & 0x20000 )
            {
              v143 = (int)"USE_OUTPUT";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( ((unsigned int)v13 >> 19) & 0x1F )
            {
              sub_10009110(v13, v19, (int *)&v101, (int)"%u", ((unsigned int)v13 >> 19) & 0x1F);
              v143 = (int)"MULTI_LIGHT";
              v144 = &v101;
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( v13 & 0x20000000 )
            {
              v143 = (int)"ALPHA_LIGHT";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( ((unsigned int)v13 >> 24) & 7 )
            {
              sub_10009110(v13, v19, (int *)&v100, (int)"%u", BYTE3(v13) & 7);
              v143 = (int)"USE_DIFF_MODE";
              v144 = &v100;
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( ((unsigned int)v13 >> 27) & 3 )
            {
              sub_10009110(v13, v19, &v123, (int)"%u", ((unsigned int)v13 >> 27) & 3);
              v143 = (int)"USE_SPEC_MODE";
              v144 = (char *)&v123;
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
          }
          if ( !a2 )
          {
LABEL_121:
            if ( v13 & 0x40000000 )
            {
              v143 = (int)"ATI_FIX";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( v13 & 2 )
            {
              v143 = (int)"USE_GOURAUD";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( v13 & 4 )
            {
              v143 = (int)"USE_TEXTURE";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( (char)v13 < 0 )
            {
              v143 = (int)"USE_HSCALER";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( v13 & 0x100 )
            {
              v143 = (int)"USE_SECOND_PARAM";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            if ( v13 & 0x200 )
            {
              v143 = (int)"USE_BOTH_PARAM";
              v144 = "1";
              sub_100027D0((int)&v137, (unsigned int)&v143);
            }
            v143 = 0;
            v144 = 0;
            sub_100027D0((int)&v137, (unsigned int)&v143);
            v127 = 15;
            v126 = 0;
            LOBYTE(lpMem) = 0;
            sub_10001990((int)&lpMem, "vs_main", 7u);
            LOBYTE(v145) = 3;
            v77 = &lpMem;
            if ( v127 >= 0x10 )
              v77 = lpMem;
            sub_10040760(
              (void *)v135,
              (int)&v140,
              L"PVR2_VSH",
              (int)&v140,
              (int)v137,
              (int)&v140,
              (int)v77,
              (int)"vs_5_0",
              v98,
              v99,
              (int)&v140,
              v76);
            LOBYTE(v145) = 2;
            if ( v127 >= 0x10 )
              sub_10001EA0(v13, v19, lpMem, v127 + 1);
            if ( !sub_10028FF8(v13, v19, (int)&v136) )
            {
              v78 = v136;
              v79 = (*(int (__stdcall **)(int, signed int))(*(_DWORD *)v140 + 16))(v140, 1);
              v80 = v140;
              v81 = (*(int (**)(void))(*(_DWORD *)v140 + 12))();
              sub_1002936D(v13, v19, v81, v80, v79, v78);
              sub_100290B5(v13, v3, v19);
            }
            a2 = (*(int (__stdcall **)(int))(*(_DWORD *)v140 + 16))(v140);
            v82 = (*(int (__stdcall **)(int))(*(_DWORD *)v140 + 12))(v140);
            (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v135 + 4) + 48))(
              *(_DWORD *)(v135 + 4),
              v82,
              a2,
              0,
              &v131);
            a2 = (*(int (__stdcall **)(int))(*(_DWORD *)v140 + 16))(v140);
            v83 = (*(int (__stdcall **)(int))(*(_DWORD *)v140 + 12))(v140);
            v84 = (LPVOID)a2;
            (*(void (__stdcall **)(_DWORD, char **, unsigned int, int, int, int *))(**(_DWORD **)(v135 + 4) + 44))(
              *(_DWORD *)(v135 + 4),
              v134,
              a3,
              v83,
              a2,
              &v132);
            LOBYTE(v145) = 0;
            if ( v137 )
              sub_100029D0(v13, (int)v84, v137, (v139 - (signed int)v137) >> 3);
            goto LABEL_142;
          }
          v143 = (int)"USE_TANATIVE";
          v144 = "1";
          sub_100027D0((int)&v137, (unsigned int)&v143);
          if ( v13 & 4 && v13 & 1 )
          {
            v143 = (int)"USE_UV16";
            v144 = "1";
            sub_100027D0((int)&v137, (unsigned int)&v143);
          }
          v75 = ((unsigned int)v13 >> 3) & 3;
          if ( v75 == 2 )
          {
            v143 = (int)"USE_INTENS";
          }
          else
          {
            if ( v75 != 1 )
              goto LABEL_119;
            v143 = (int)"USE_FLOAT";
          }
          v144 = "1";
          sub_100027D0((int)&v137, (unsigned int)&v143);
LABEL_119:
          if ( v13 & 0x20 )
          {
            v143 = (int)"USE_VOLUME";
            v144 = "1";
            sub_100027D0((int)&v137, (unsigned int)&v143);
          }
          goto LABEL_121;
        }
        v30 = *(_OWORD *)(v21 + 77);
        v19 = 2;
        v107 = v21[83];
        v105 = v30;
        _mm_storel_epi64((__m128i *)&v106, _mm_loadl_epi64((const __m128i *)(v21 + 81)));
      }
      else if ( v13 & 0x20 )
      {
        v32 = *(_OWORD *)(v21 + 49);
        v19 = 3;
        v107 = v21[55];
        v33 = (int)v21[62];
        v105 = v32;
        v110 = (char *)v33;
        _mm_storel_epi64((__m128i *)&v106, _mm_loadl_epi64((const __m128i *)(v21 + 53)));
        v108 = *((_OWORD *)v21 + 14);
        _mm_storel_epi64((__m128i *)&v109, _mm_loadl_epi64((const __m128i *)v21 + 15));
      }
      else
      {
        v31 = *(_OWORD *)(v21 + 35);
        v19 = 2;
        v107 = v21[41];
        v105 = v31;
        _mm_storel_epi64((__m128i *)&v106, _mm_loadl_epi64((const __m128i *)(v21 + 39)));
      }
    }
LABEL_69:
    a3 = v19;
    goto LABEL_70;
  }
LABEL_147:
  v89 = *(_DWORD *)(v4 + 10944);
  if ( *(_DWORD *)(*(_DWORD *)(v4 + 8704) + 96) & 0x1000000 )
  {
    __asm { lahf }
    if ( !__SETP__(_AH & 0x44, 0) )
      goto LABEL_153;
    *(_DWORD *)(v4 + 10944) = 1065353216;
  }
  else
  {
    __asm { lahf }
    if ( !__SETP__(_AH & 0x44, 0) )
      goto LABEL_153;
    *(float *)(v4 + 10944) = (float)dword_10239478;
  }
  *(_BYTE *)(v4 + 9696) = 1;
LABEL_153:
  v92 = *(_BYTE *)(v4 + 9696);
  *(_BYTE *)(v4 + 9696) = 0;
  if ( v92 )
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v4 + 8) + 192))(
      *(_DWORD *)(v4 + 8),
      *(_DWORD *)(v4 + 372),
      0,
      0,
      v4 + 9712,
      0,
      0);
  v93 = *(_DWORD *)(v18 + 12);
  result = *(_DWORD *)(v4 + 372);
  a3 = *(_DWORD *)(v4 + 372);
  if ( *(_DWORD *)(v4 + 140) != v93 )
  {
    v95 = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v4 + 140) = v93;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v95 + 44))(v95, v93, 0, 0);
    result = a3;
  }
  if ( *(_DWORD *)(v4 + 144) != result )
  {
    *(_DWORD *)(v4 + 144) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, unsigned int *))(**(_DWORD **)(v4 + 8) + 28))(
               *(_DWORD *)(v4 + 8),
               0,
               1,
               &a3);
  }
  v96 = *(_DWORD *)(v18 + 16);
  if ( *(_DWORD *)(v4 + 148) != v96 )
  {
    v97 = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v4 + 148) = v96;
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)v97 + 68))(v97, v96);
  }
  return result;
}
// 1006CC1C: using guessed type wchar_t a_vsh[5];
// 1006E288: using guessed type wchar_t a_clx2v06[9];
// 1006E5C0: using guessed type char *off_1006E5C0;
// 1006E7E8: using guessed type __int64 qword_1006E7E8;
// 1006E804: using guessed type __int64 qword_1006E804;
// 1006E820: using guessed type __int64 qword_1006E820;
// 1006E83C: using guessed type __int64 qword_1006E83C;
// 1006E858: using guessed type __int64 qword_1006E858;
// 1006E874: using guessed type __int64 qword_1006E874;
// 1006E890: using guessed type __int64 qword_1006E890;
// 1006E8AC: using guessed type __int64 qword_1006E8AC;
// 1006E8B8: using guessed type char *off_1006E8B8;
// 1006E980: using guessed type char *off_1006E980;
// 1006EB98: using guessed type char *off_1006EB98;
// 1007CD9C: using guessed type int dword_1007CD9C;
// 10239478: using guessed type int dword_10239478;
// 102394CB: using guessed type char byte_102394CB;

//----- (10053050) --------------------------------------------------------
int __thiscall sub_10053050(int this, int a2, unsigned int *a3)
{
  unsigned int *v3; // ebp@1
  int v4; // ebx@1
  unsigned int v5; // edi@1
  int v6; // eax@1
  unsigned int v7; // eax@1
  int v8; // esi@4
  int v9; // eax@6
  int result; // eax@8
  int v11; // eax@11
  int v12; // eax@18
  int v13; // eax@20
  int v14; // eax@23
  int v15; // eax@25
  int v16; // edx@27
  unsigned int v17; // ecx@27
  int v18; // edx@28
  int v19; // edx@28
  int v20; // eax@33
  int v21; // eax@35
  int v23; // ecx@37
  int v29; // eax@39
  int v30; // ecx@42
  signed int v31; // edi@42
  int v32; // esi@42
  __int128 v33; // xmm0@43
  int v34; // et1@43
  int v36; // esi@45
  int v37; // ecx@47
  unsigned int v38; // esi@47
  signed int v39; // edi@47
  __int128 v40; // xmm0@48
  int v41; // et1@48
  int v43; // ecx@53
  signed int v44; // edi@53
  __int128 v45; // xmm0@54
  int v46; // et1@54
  signed int v48; // edi@58
  int v49; // ecx@58
  __int128 v50; // xmm0@59
  int v51; // et1@59
  unsigned int v53; // ecx@63
  unsigned int v54; // eax@63
  int v55; // edi@64
  int v56; // ecx@69
  int v57; // ecx@76
  int v58; // eax@81
  int v59; // ecx@87
  signed int v60; // edi@87
  int v61; // esi@87
  int v62; // edx@87
  int v63; // [sp+10h] [bp-48h]@42
  signed int v64; // [sp+14h] [bp-44h]@39
  int v65; // [sp+18h] [bp-40h]@29
  int v66; // [sp+1Ch] [bp-3Ch]@29
  int v67; // [sp+20h] [bp-38h]@29
  int v68; // [sp+24h] [bp-34h]@42
  int v69; // [sp+24h] [bp-34h]@47
  unsigned int v70; // [sp+24h] [bp-34h]@52
  int v71; // [sp+28h] [bp-30h]@35
  int v72; // [sp+2Ch] [bp-2Ch]@37
  int v73; // [sp+30h] [bp-28h]@37
  int v74; // [sp+34h] [bp-24h]@1
  int v75; // [sp+38h] [bp-20h]@2
  int v76; // [sp+3Ch] [bp-1Ch]@37
  int v77; // [sp+40h] [bp-18h]@37
  int v78; // [sp+44h] [bp-14h]@29
  __int16 v79; // [sp+48h] [bp-10h]@4
  int v80; // [sp+4Ch] [bp-Ch]@53
  int v81; // [sp+4Ch] [bp-Ch]@58
  int v82; // [sp+54h] [bp-4h]@35

  v3 = a3;
  v4 = this;
  *v3 |= 0x20000u;
  v5 = *a3;
  v6 = *(_DWORD *)(*(_DWORD *)(this + 31440) + 1036) + 24 * *(_WORD *)(a2 + 40);
  v74 = v6;
  v7 = *(_DWORD *)(v6 + 4);
  if ( v7 & 0x100 )
    v75 = 0;
  else
    v75 = (unsigned __int8)v5 >> 8;
  v8 = (*(_DWORD *)(v74 + 4) >> ((unsigned __int8)v5 >> 8)) ^ (unsigned __int8)((v7 >> ((unsigned __int8)v5 >> 8)) ^ (v7 >> 4 * ((unsigned __int8)v5 >> 8)));
  v79 = (*(_DWORD *)(v74 + 4) >> ((unsigned __int8)v5 >> 8)) ^ (unsigned __int8)((v7 >> ((unsigned __int8)v5 >> 8)) ^ (v7 >> 4 * ((unsigned __int8)v5 >> 8)));
  if ( *(_DWORD *)(this + 10956) != v8 )
  {
    *(_DWORD *)(this + 10956) = v8;
    *(_BYTE *)(this + 9696) = 1;
  }
  v9 = *(_DWORD *)(v74 + 8 * v75 + 8);
  if ( *(_DWORD *)(this + 10964) != v9 )
  {
    *(_DWORD *)(this + 10964) = v9;
    *(_BYTE *)(this + 9696) = 1;
  }
  result = *(_DWORD *)(v74 + 8 * v75 + 12);
  if ( *(_DWORD *)(this + 10968) != result )
  {
    *(_DWORD *)(this + 10968) = result;
    *(_BYTE *)(this + 9696) = 1;
  }
  if ( *a3 & 0x200 )
  {
    v11 = *(_DWORD *)(v74 + 8 * (~(*(_WORD *)(v74 + 4) >> 8) & 1) + 8);
    if ( *(_DWORD *)(this + 10992) != v11 )
    {
      *(_DWORD *)(this + 10992) = v11;
      *(_BYTE *)(this + 9696) = 1;
    }
    result = *(_DWORD *)(v74 + 8 * (~(*(_WORD *)(v74 + 4) >> 8) & 1) + 12);
    if ( *(_DWORD *)(this + 10996) != result )
    {
      *(_DWORD *)(this + 10996) = result;
      *(_BYTE *)(this + 9696) = 1;
    }
  }
  if ( !(v8 & 0x200) || *a3 & 0x200 && !(*(_DWORD *)(v74 + 4) & 0x400) )
  {
    *a3 |= 0x40000u;
    v12 = *(_DWORD *)(a2 + 12 * (((*a3 >> 8) & 1) + 7));
    if ( *(_DWORD *)(this + 10976) != v12 )
    {
      *(_DWORD *)(this + 10976) = v12;
      *(_BYTE *)(this + 9696) = 1;
    }
    v13 = *(_DWORD *)(a2 + 12 * ((*a3 >> 8) & 1) + 88);
    if ( *(_DWORD *)(this + 10980) != v13 )
    {
      *(_DWORD *)(this + 10980) = v13;
      *(_BYTE *)(this + 9696) = 1;
    }
    if ( *a3 & 0x200 )
    {
      v14 = *(_DWORD *)(a2 + 96);
      if ( *(_DWORD *)(this + 11000) != v14 )
      {
        *(_DWORD *)(this + 11000) = v14;
        *(_BYTE *)(this + 9696) = 1;
      }
      v15 = *(_DWORD *)(a2 + 100);
      if ( *(_DWORD *)(this + 11004) != v15 )
      {
        *(_DWORD *)(this + 11004) = v15;
        *(_BYTE *)(this + 9696) = 1;
      }
    }
    v16 = *(_DWORD *)(a2 + 76);
    v17 = *a3;
    if ( *a3 & 0x100 )
    {
      v18 = ((unsigned __int8)v16 ^ (unsigned __int8)((unsigned int)v16 >> 2)) & 0x20 ^ v16;
      v19 = ((unsigned __int8)v18 ^ (unsigned __int8)((unsigned int)v18 >> 2)) & 0x40 ^ v18;
      v16 = (unsigned __int16)((v19 ^ ((unsigned int)v19 >> 4)) & 0xF000) ^ v19;
    }
    v65 = 0;
    v66 = 0;
    v67 = 0;
    v78 = 0;
    if ( !(v8 & 0x200) )
    {
      v65 = *(_WORD *)(a2 + 12 * ((unsigned __int8)v17 >> 8) + 80);
      v66 = *(_WORD *)(a2 + 12 * ((unsigned __int8)v17 >> 8) + 82);
    }
    if ( !(v17 & 0x200) || *(_DWORD *)(v74 + 4) & 0x400 )
    {
      v20 = 0;
    }
    else
    {
      v67 = *(_WORD *)(a2 + 92);
      v20 = *(_WORD *)(a2 + 94);
      v78 = *(_WORD *)(a2 + 94);
    }
    v21 = v66 | v20;
    _EDI = v21 | v65 | v67;
    v82 = v21;
    v71 = v21 | v65 | v67;
    if ( v17 & 0x10000 )
    {
      _bittestandset((unsigned int *)&_EDI, (unsigned __int16)v16 >> 12);
      v71 = _EDI;
    }
    v23 = 0;
    v73 = 0;
    __asm { bsf     eax, edi }
    v72 = 0;
    v77 = 0;
    v76 = 0;
    if ( !_ZF )
    {
      _ESI = result;
      do
      {
        v64 = 1 << _ESI;
        v29 = (*v3 >> 19) & 0x1F;
        v73 |= (v65 & (unsigned int)(1 << _ESI)) >> (_ESI - v29);
        v72 |= (v66 & (unsigned int)(1 << _ESI)) >> (_ESI - v29);
        v77 |= (v67 & (unsigned int)(1 << _ESI)) >> (_ESI - v29);
        v76 |= (v78 & (unsigned int)(1 << _ESI)) >> (_ESI - v29);
        if ( *v3 & 0x10000 && _ESI == (unsigned __int16)v16 >> 12 )
          v16 ^= (unsigned __int16)((v16 ^ (*v3 >> 7)) & 0xF000);
        v30 = (*(_WORD *)(a2 + 2 * _ESI + 44) << 6) + *(_DWORD *)(*(_DWORD *)(v4 + 31440) + 12 * _ESI + 1048);
        v68 = v4 + 16 * (((*v3 >> 19) & 0x1F) + 619);
        v31 = 0;
        v63 = v30;
        v32 = v68 - v30;
        while ( 1 )
        {
          v33 = *(_DWORD *)(v32 + v30);
          v34 = *(_DWORD *)v30;
          __asm { lahf }
          if ( __SETP__(_AH & 0x44, 0) )
            break;
          ++v31;
          v30 += 4;
          if ( v31 >= 4 )
          {
            v36 = v63;
            goto LABEL_47;
          }
        }
        v36 = v63;
        *(_DWORD *)v68 = *(_DWORD *)v63;
        *(_DWORD *)(v68 + 4) = *(_DWORD *)(v63 + 4);
        *(_DWORD *)(v68 + 8) = *(_DWORD *)(v63 + 8);
        *(_DWORD *)(v68 + 12) = *(_DWORD *)(v63 + 12);
        *(_BYTE *)(v4 + 9696) = 1;
LABEL_47:
        v37 = v36 + 16;
        v38 = *v3;
        v3 = a3;
        v39 = 0;
        v69 = v4 + 16 * (((v38 >> 19) & 0x1F) + 635);
        while ( 1 )
        {
          v40 = *(_DWORD *)(v69 - (v63 + 16) + v37);
          v41 = *(_DWORD *)v37;
          __asm { lahf }
          if ( __SETP__(_AH & 0x44, 0) )
            break;
          ++v39;
          v37 += 4;
          if ( v39 >= 4 )
            goto LABEL_52;
        }
        *(_DWORD *)v69 = *(_DWORD *)(v63 + 16);
        *(_DWORD *)(v69 + 4) = *(_DWORD *)(v63 + 20);
        *(_DWORD *)(v69 + 8) = *(_DWORD *)(v63 + 24);
        *(_DWORD *)(v69 + 12) = *(_DWORD *)(v63 + 28);
        *(_BYTE *)(v4 + 9696) = 1;
LABEL_52:
        v70 = *(_DWORD *)(v63 + 28);
        if ( v70 & 0x40 )
        {
          v43 = v63 + 32;
          v44 = 0;
          v80 = v4 + 16 * (((*a3 >> 19) & 0x1F) + 651);
          while ( 1 )
          {
            v45 = *(_DWORD *)(v80 - (v63 + 32) + v43);
            v46 = *(_DWORD *)v43;
            __asm { lahf }
            if ( __SETP__(_AH & 0x44, 0) )
              break;
            ++v44;
            v43 += 4;
            if ( v44 >= 4 )
              goto LABEL_58;
          }
          *(_DWORD *)v80 = *(_DWORD *)(v63 + 32);
          *(_DWORD *)(v80 + 4) = *(_DWORD *)(v63 + 36);
          *(_DWORD *)(v80 + 8) = *(_DWORD *)(v63 + 40);
          *(_DWORD *)(v80 + 12) = *(_DWORD *)(v63 + 44);
          *(_BYTE *)(v4 + 9696) = 1;
LABEL_58:
          v48 = 0;
          v49 = v63 + 48;
          v81 = v4 + 16 * (((*a3 >> 19) & 0x1F) + 667);
          while ( 1 )
          {
            v50 = *(_DWORD *)(v81 - (v63 + 48) + v49);
            v51 = *(_DWORD *)v49;
            __asm { lahf }
            if ( __SETP__(_AH & 0x44, 0) )
              break;
            ++v48;
            v49 += 4;
            if ( v48 >= 4 )
              goto LABEL_63;
          }
          *(_DWORD *)v81 = *(_DWORD *)(v63 + 48);
          *(_DWORD *)(v81 + 4) = *(_DWORD *)(v63 + 52);
          *(_DWORD *)(v81 + 8) = *(_DWORD *)(v63 + 56);
          *(_DWORD *)(v81 + 12) = *(_DWORD *)(v63 + 60);
          *(_BYTE *)(v4 + 9696) = 1;
        }
LABEL_63:
        *a3 ^= (*a3 ^ ((*a3 & 0xFFF80000) + 0x80000)) & 0xF80000;
        v53 = *a3;
        v54 = v70;
        if ( v64 & (v65 | v67) )
        {
          v55 = BYTE1(v54) & 7;
          if ( v55 > ((v53 >> 24) & 7) )
            *a3 = (v55 << 24) | v53 & 0xF8FFFFFF;
          v54 = v70;
          if ( v70 & 4 )
            *a3 |= 0x20000000u;
        }
        if ( v64 & v82 )
        {
          v56 = (v54 >> 4) & 3;
          if ( v56 > ((*a3 >> 27) & 3) )
            *a3 = *a3 & 0xE7FFFFFF | (v56 << 27);
        }
        result = ~v64 & v71;
        __asm { bsf     esi, eax }
        v71 &= ~v64;
      }
      while ( !_ZF );
      LOWORD(v8) = v79;
      v23 = v72;
    }
    if ( *(_DWORD *)(v4 + 10972) != v16 )
    {
      *(_DWORD *)(v4 + 10972) = v16;
      *(_BYTE *)(v4 + 9696) = 1;
    }
    if ( !(*v3 & 0xF80000) )
    {
LABEL_86:
      if ( !(v8 & 0x800) )
        return result;
      goto LABEL_87;
    }
    v57 = v73 | (v23 << 16);
    if ( *(_DWORD *)(v4 + 10984) != v57 )
    {
      *(_DWORD *)(v4 + 10984) = v57;
      *(_BYTE *)(v4 + 9696) = 1;
    }
    result = *(_BYTE *)(v75 + v74);
    if ( *(_DWORD *)(v4 + 10960) != result )
    {
      *(_DWORD *)(v4 + 10960) = result;
      *(_BYTE *)(v4 + 9696) = 1;
    }
    if ( *v3 & 0x200 )
    {
      v58 = v77 | (v76 << 16);
      if ( *(_DWORD *)(v4 + 11008) != v58 )
      {
        *(_DWORD *)(v4 + 11008) = v58;
        *(_BYTE *)(v4 + 9696) = 1;
      }
      result = *(_BYTE *)((~(*(_WORD *)(v74 + 4) >> 8) & 1) + v74);
      if ( *(_DWORD *)(v4 + 10988) != result )
      {
        *(_DWORD *)(v4 + 10988) = result;
        *(_BYTE *)(v4 + 9696) = 1;
      }
    }
  }
  if ( !(*v3 & 0xF80000) )
    goto LABEL_86;
LABEL_87:
  v59 = v4 + 9840;
  v60 = 60;
  v61 = *(_DWORD *)(*(_DWORD *)(v4 + 31440) + 1024) + (*(_WORD *)(a2 + 42) << 6);
  v62 = *(_DWORD *)(*(_DWORD *)(v4 + 31440) + 1024) + (*(_WORD *)(a2 + 42) << 6);
  while ( 1 )
  {
    result = *(_DWORD *)v59;
    if ( *(_DWORD *)v59 != *(_DWORD *)v62 )
      break;
    v59 += 4;
    v62 += 4;
    _CF = (unsigned int)v60 < 4;
    v60 -= 4;
    if ( _CF )
      return result;
  }
  *(_OWORD *)(v4 + 9840) = *(_OWORD *)v61;
  *(_OWORD *)(v4 + 9856) = *(_OWORD *)(v61 + 16);
  *(_OWORD *)(v4 + 9872) = *(_OWORD *)(v61 + 32);
  *(_OWORD *)(v4 + 9888) = *(_OWORD *)(v61 + 48);
  *(_BYTE *)(v4 + 9696) = 1;
  return result;
}

//----- (100537D0) --------------------------------------------------------
void __stdcall sub_100537D0(int a1)
{
  char v1; // bl@1
  int v2; // esi@1
  unsigned __int8 v3; // al@4

  v1 = byte_1007CDB0;
  v2 = dword_1007CE14;
  if ( byte_1007CDB0 )
  {
    v3 = *(_BYTE *)(dword_1007CD9C + 279);
    if ( *(_BYTE *)(dword_1007CE14 + 11160) != v3 )
    {
      *(_BYTE *)(dword_1007CE14 + 11160) = v3;
      ShowCursor(v3);
    }
  }
  else if ( *(_BYTE *)(dword_1007CE14 + 11160) != 1 )
  {
    *(_BYTE *)(dword_1007CE14 + 11160) = 1;
    ShowCursor(1);
  }
  if ( *(_DWORD *)v2 )
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)v2 + 40))(*(_DWORD *)v2, (unsigned __int8)v1, 0);
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDB0: using guessed type char byte_1007CDB0;
// 1007CE14: using guessed type int dword_1007CE14;

//----- (10053840) --------------------------------------------------------
void __usercall sub_10053840(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@1
  void *v4; // ST04_4@2
  int v5; // eax@2
  void *v6; // ST04_4@5

  v3 = dword_1007CE14;
  if ( *(_DWORD *)(dword_1007CE14 + 32160) )
  {
    v4 = *(void **)(dword_1007CE14 + 32156);
    *(_BYTE *)(dword_1007CE14 + 31632) = 1;
    SetEvent(v4);
    sub_100092F0(*(_DWORD *)(v3 + 32160));
    v5 = *(_DWORD *)(v3 + 32160);
    if ( v5 )
    {
      if ( *(_DWORD *)(v5 + 4) )
        sub_1002C84B(a1, a2, a3);
      sub_1000F417((LPVOID)v5);
    }
    v6 = *(void **)(v3 + 32156);
    *(_DWORD *)(v3 + 32160) = 0;
    CloseHandle(v6);
  }
  sub_10059C30(v3);
  sub_10053B00((void *)v3);
  sub_1005C6C0(v3);
  sub_10041F90(v3);
}
// 1007CE14: using guessed type int dword_1007CE14;

//----- (100538D0) --------------------------------------------------------
#error "10053A67: positive sp value has been found (funcsize=110)"

//----- (10053A70) --------------------------------------------------------
char __thiscall sub_10053A70(int this)
{
  int v1; // esi@1
  int v2; // eax@1
  int v3; // ebx@1
  int v4; // edi@1
  char result; // al@6

  v1 = this;
  v2 = *(_DWORD *)(this + 31440);
  v3 = 32 * (*(_DWORD *)(v2 + 16) + 1);
  v4 = 32 * (*(_DWORD *)(v2 + 20) + 1);
  if ( (unsigned int)v3 > *(_DWORD *)(this + 31464)
    || (unsigned int)v4 > *(_DWORD *)(this + 31468)
    || *(_DWORD *)(this + 31580) != dword_10239478
    || *(_DWORD *)(this + 31584) != dword_1023947C )
  {
    sub_10053B00((void *)this);
    *(_DWORD *)(v1 + 31580) = dword_10239478;
    *(_DWORD *)(v1 + 31584) = dword_1023947C;
    *(_DWORD *)(v1 + 31464) = v3;
    *(_DWORD *)(v1 + 31468) = v4;
    sub_10053C90(v3, v4);
  }
  *(_DWORD *)(v1 + 31460) = v4;
  result = 1;
  *(_DWORD *)(v1 + 31456) = v3;
  return result;
}
// 10053C90: using guessed type _DWORD __stdcall sub_10053C90(_DWORD, _DWORD);
// 10239478: using guessed type int dword_10239478;
// 1023947C: using guessed type int dword_1023947C;

//----- (10053B00) --------------------------------------------------------
int __thiscall sub_10053B00(void *this)
{
  void *v1; // esi@1
  signed int v2; // edi@1
  int v3; // ebx@1
  int result; // eax@2
  char v5; // dl@2
  int v6; // ecx@4
  int v7; // ecx@8
  void *v8; // ecx@10
  void *v9; // ecx@12
  void *v10; // ecx@14
  void *v11; // ecx@16
  void *v12; // ecx@18
  int v13; // ecx@20
  int v14; // ecx@22
  int v15; // ecx@24
  int v16; // ecx@26
  int v17; // ecx@28
  int v18; // ecx@30
  __int128 v19; // [sp+10h] [bp-20h]@8
  __int128 v20; // [sp+20h] [bp-10h]@8

  v1 = this;
  v2 = 0;
  v3 = (int)((char *)this + 276);
  do
  {
    result = dword_102398F4;
    v5 = 0;
    if ( *(_DWORD *)v3 != dword_102398F4 )
    {
      v5 = 1;
      *(_DWORD *)v3 = dword_102398F4;
    }
    v6 = *((_DWORD *)v1 + 2);
    if ( v6 && v5 )
      result = (*(int (__stdcall **)(int, signed int, signed int, int *))(*(_DWORD *)v6 + 32))(
                 v6,
                 v2,
                 1,
                 &dword_102398F4);
    ++v2;
    v3 += 4;
  }
  while ( v2 < 8 );
  v7 = *((_DWORD *)v1 + 2);
  v19 = 0i64;
  v20 = 0i64;
  if ( v7 )
    result = (*(int (__stdcall **)(int, signed int, __int128 *, _DWORD))(*(_DWORD *)v7 + 132))(v7, 8, &v19, 0);
  v8 = (void *)*((_DWORD *)v1 + 2411);
  if ( v8 )
  {
    result = (int)sub_10008A00(v8, *((_DWORD *)v1 + 2411));
    *((_DWORD *)v1 + 2411) = 0;
  }
  v9 = (void *)*((_DWORD *)v1 + 2412);
  if ( v9 )
  {
    result = (int)sub_10008A00(v9, *((_DWORD *)v1 + 2412));
    *((_DWORD *)v1 + 2412) = 0;
  }
  v10 = (void *)*((_DWORD *)v1 + 2415);
  if ( v10 )
  {
    result = (int)sub_10008A00(v10, *((_DWORD *)v1 + 2415));
    *((_DWORD *)v1 + 2415) = 0;
  }
  v11 = (void *)*((_DWORD *)v1 + 2413);
  if ( v11 )
  {
    result = (int)sub_10008A00(v11, *((_DWORD *)v1 + 2413));
    *((_DWORD *)v1 + 2413) = 0;
  }
  v12 = (void *)*((_DWORD *)v1 + 2414);
  if ( v12 )
  {
    result = (int)sub_10008A00(v12, *((_DWORD *)v1 + 2414));
    *((_DWORD *)v1 + 2414) = 0;
  }
  v13 = *((_DWORD *)v1 + 2421);
  if ( v13 )
  {
    result = (*(int (__fastcall **)(int, char, _DWORD))(*(_DWORD *)v13 + 8))(v13, v5, *((_DWORD *)v1 + 2421));
    *((_DWORD *)v1 + 2421) = 0;
  }
  v14 = *((_DWORD *)v1 + 2420);
  if ( v14 )
  {
    result = (*(int (__fastcall **)(int, char, _DWORD))(*(_DWORD *)v14 + 8))(v14, v5, *((_DWORD *)v1 + 2420));
    *((_DWORD *)v1 + 2420) = 0;
  }
  v15 = *((_DWORD *)v1 + 2419);
  if ( v15 )
  {
    result = (*(int (__fastcall **)(int, char, _DWORD))(*(_DWORD *)v15 + 8))(v15, v5, *((_DWORD *)v1 + 2419));
    *((_DWORD *)v1 + 2419) = 0;
  }
  v16 = *((_DWORD *)v1 + 2418);
  if ( v16 )
  {
    result = (*(int (__fastcall **)(int, char, _DWORD))(*(_DWORD *)v16 + 8))(v16, v5, *((_DWORD *)v1 + 2418));
    *((_DWORD *)v1 + 2418) = 0;
  }
  v17 = *((_DWORD *)v1 + 2417);
  if ( v17 )
  {
    result = (*(int (__fastcall **)(int, char, _DWORD))(*(_DWORD *)v17 + 8))(v17, v5, *((_DWORD *)v1 + 2417));
    *((_DWORD *)v1 + 2417) = 0;
  }
  v18 = *((_DWORD *)v1 + 2416);
  if ( v18 )
  {
    result = (*(int (__fastcall **)(int, char, _DWORD))(*(_DWORD *)v18 + 8))(v18, v5, *((_DWORD *)v1 + 2416));
    *((_DWORD *)v1 + 2416) = 0;
  }
  return result;
}
// 102398F4: using guessed type int dword_102398F4;

//----- (10053C90) --------------------------------------------------------
#error "10053FE3: call analysis failed (funcsize=396)"

//----- (100543D0) --------------------------------------------------------
unsigned int __thiscall sub_100543D0(int this)
{
  int v1; // edi@1
  int v2; // ST14_4@1
  int v3; // ST18_4@1
  int v4; // ST1C_4@1
  int v5; // ST20_4@1
  int v6; // eax@1
  unsigned int v7; // eax@1
  __m128d v8; // xmm0@1
  unsigned int v9; // eax@1
  __m128d v10; // xmm0@1
  float v11; // xmm1_4@1
  __m128d v12; // xmm0@1
  unsigned int v13; // eax@1
  int v14; // xmm1_4@1
  __m128d v15; // xmm0@1
  unsigned int v16; // eax@1
  __m128d v17; // xmm0@1
  int v18; // eax@1
  int v19; // eax@2
  char v20; // al@3
  int v21; // ecx@3
  int v22; // edx@5
  int v23; // edx@8
  int v24; // ecx@10
  int v25; // eax@13
  int v26; // esi@13
  unsigned int v27; // ebx@13
  unsigned int v28; // esi@15
  unsigned int result; // eax@15
  __int128 v30; // [sp+10h] [bp-2Ch]@1
  float v31; // [sp+20h] [bp-1Ch]@1
  float v32; // [sp+24h] [bp-18h]@1
  float v33; // [sp+28h] [bp-14h]@1
  int v34; // [sp+2Ch] [bp-10h]@1
  int v35; // [sp+30h] [bp-Ch]@1
  int v36; // [sp+34h] [bp-8h]@1

  v1 = this;
  sub_10040BC0(this, 1);
  sub_10041BF0((void *)v1, 0, 8, 0, 0, (__int64 *)0xFF, 255, 0, 0, 1);
  sub_10041820(v1, 0, 2, 1, v2, v3, v4, v5);
  v6 = *(_DWORD *)(v1 + 8);
  v30 = xmmword_1006EE60;
  (*(void (__stdcall **)(int, signed int, __int128 *))(*(_DWORD *)v6 + 180))(v6, 1, &v30);
  v7 = *(_DWORD *)(v1 + 31476) + 1;
  v35 = 0;
  v36 = 1065353216;
  v8 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v7);
  v8.m128d_f64[0] = v8.m128d_f64[0] + *(double *)&qword_1006EEC0[v7 >> 31];
  v9 = *(_WORD *)(*(_DWORD *)(v1 + 8704) + 244);
  v33 = COERCE_FLOAT(_mm_cvtpd_ps(v8)) * 32.0;
  v10 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v9);
  v10.m128d_f64[0] = v10.m128d_f64[0] + *(double *)&qword_1006EEC0[v9 >> 31];
  v11 = 32768.0 / COERCE_FLOAT(_mm_cvtpd_ps(v10));
  v12 = (__m128d)COERCE_UNSIGNED_INT64((double)(*(_DWORD *)(v1 + 31484) + 1));
  v12.m128d_f64[0] = v12.m128d_f64[0] + *(double *)&qword_1006EEC0[(unsigned int)(*(_DWORD *)(v1 + 31484) + 1) >> 31];
  v13 = *(_DWORD *)(v1 + 31472);
  *(float *)&v14 = v11 * COERCE_FLOAT(_mm_cvtpd_ps(v12));
  v15 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(v1 + 31472));
  v34 = v14;
  v15.m128d_f64[0] = v15.m128d_f64[0] + *(double *)&qword_1006EEC0[v13 >> 31];
  v16 = *(_DWORD *)(v1 + 31480);
  v31 = COERCE_FLOAT(_mm_cvtpd_ps(v15)) * 32.0;
  v17 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v16);
  v17.m128d_f64[0] = v17.m128d_f64[0] + *(double *)&qword_1006EEC0[v16 >> 31];
  v18 = *(_DWORD *)(v1 + 8);
  v32 = COERCE_FLOAT(_mm_cvtpd_ps(v17)) * 32.0;
  (*(void (__stdcall **)(int, signed int, int *))(*(_DWORD *)v18 + 176))(v18, 1, &v31);
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, signed int, int, _DWORD))(**(_DWORD **)(v1 + 8) + 136))(
    *(_DWORD *)(v1 + 8),
    0,
    0,
    0,
    0,
    1,
    v1 + 9636,
    0);
  if ( *(_DWORD *)(v1 + 168) )
  {
    v19 = *(_DWORD *)(v1 + 8);
    *(_DWORD *)(v1 + 168) = 0;
    (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v19 + 92))(v19, 0, 0, 0);
  }
  sub_1004F650(v1);
  v20 = 0;
  v21 = *(_DWORD *)(v1 + 9652) + 4;
  if ( *(_DWORD *)(v1 + 276) != *(_DWORD *)v21 )
  {
    v20 = 1;
    *(_DWORD *)(v1 + 276) = *(_DWORD *)v21;
  }
  v22 = *(_DWORD *)(v1 + 8);
  if ( v22 && v20 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v22 + 32))(v22, 0, 1, v21);
  sub_100508D0((void *)v1, 0);
  (*(void (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)(v1 + 8) + 52))(*(_DWORD *)(v1 + 8), 3, 0);
  LOBYTE(v23) = 0;
  if ( *(_DWORD *)(v1 + 276) != dword_102398F4 )
  {
    LOBYTE(v23) = 1;
    *(_DWORD *)(v1 + 276) = dword_102398F4;
  }
  v24 = *(_DWORD *)(v1 + 8);
  if ( v24 && (_BYTE)v23 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int *))(*(_DWORD *)v24 + 32))(v24, 0, 1, &dword_102398F4);
  (*(void (__fastcall **)(_DWORD, int, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(v1 + 8) + 136))(
    **(_DWORD **)(v1 + 8),
    v23,
    *(_DWORD *)(v1 + 8),
    0,
    0,
    0,
    0,
    0,
    0,
    0);
  v25 = *(_DWORD *)(v1 + 8704);
  v26 = *(_DWORD *)(v25 + 96) & 0xFFFFFF;
  v27 = v26 + 8 * (*(_DWORD *)(v25 + 76) & 0x1FF) * ((*(_WORD *)(v25 + 110) & 0x3FF) + 1);
  if ( !(*(_DWORD *)(v25 + 96) & 0x1000000) )
  {
    v26 = (((*(_DWORD *)(v25 + 96) & 0xFFFFFFu) >> 20) & 4)
        + (*(_DWORD *)(v25 + 96) & 0xFFFFFF & (*(_DWORD *)(v1 + 8716) - 8388605))
        + 2 * (*(_DWORD *)(v25 + 96) & 0x3FFFFC);
    v27 = ((v27 >> 20) & 4) + (v27 & (*(_DWORD *)(v1 + 8716) - 8388605)) + 2 * (v27 & 0x3FFFFC);
  }
  v28 = (unsigned int)v26 >> 11;
  result = (v27 - 1) >> 11;
  do
    *(_BYTE *)(v1 + v28++ + 40356) = 0;
  while ( v28 <= result && v28 < 0x2000 );
  return result;
}
// 1006EE60: using guessed type __int128 xmmword_1006EE60;
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];
// 102398F4: using guessed type int dword_102398F4;

//----- (100546A0) --------------------------------------------------------
unsigned int __usercall sub_100546A0@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>)
{
  int v3; // ebx@1
  bool v4; // zf@1
  int v5; // ebp@3
  int v6; // eax@4
  __m128i v7; // xmm0@4
  int v8; // esi@4
  int v9; // eax@4
  int v10; // edi@4
  int v11; // eax@8
  int v12; // eax@11
  signed int v13; // ebp@11
  signed int v14; // esi@11
  int v15; // eax@15
  int v16; // edx@17
  int v17; // esi@20
  int v18; // edi@20
  int v19; // edx@21
  int v20; // eax@22
  int v21; // ecx@22
  int v22; // eax@22
  int v23; // ecx@22
  int v24; // ecx@23
  int v25; // ecx@24
  int v26; // eax@30
  int v27; // ecx@35
  int v28; // edx@38
  int v29; // edx@47
  int v30; // edx@51
  int v31; // eax@58
  signed int v32; // eax@60
  signed int v33; // esi@68
  int v34; // edi@68
  char v35; // dl@69
  int v36; // ecx@71
  signed int v38; // [sp+D0h] [bp-30h]@11
  int v39; // [sp+D4h] [bp-2Ch]@22
  int i; // [sp+D8h] [bp-28h]@3
  int v41; // [sp+D8h] [bp-28h]@27
  int v42; // [sp+DCh] [bp-24h]@4
  unsigned int v43; // [sp+E0h] [bp-20h]@4
  int v44; // [sp+E8h] [bp-18h]@3
  int v45; // [sp+F4h] [bp-Ch]@3

  v3 = a1;
  sub_1005C2E0(a1);
  v4 = *(_BYTE *)(v3 + 8732) == 0;
  *(_BYTE *)(v3 + 8801) = 0;
  if ( !v4 && *(_DWORD *)(v3 + 8820) != *(_DWORD *)(v3 + 8824) )
  {
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, int *))(**(_DWORD **)(v3 + 8) + 56))(
      *(_DWORD *)(v3 + 8),
      *(_DWORD *)(v3 + 8804),
      0,
      4,
      0,
      &v44);
    v5 = v44;
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, int *))(**(_DWORD **)(v3 + 8) + 56))(
      *(_DWORD *)(v3 + 8),
      *(_DWORD *)(v3 + 8808),
      0,
      4,
      0,
      &v45);
    for ( i = v45; *(_DWORD *)(v3 + 8820) != *(_DWORD *)(v3 + 8824); *(_DWORD *)(v3 + 8824) -= 12 )
    {
      v6 = *(_DWORD *)(v3 + 8824);
      v7 = _mm_loadl_epi64((const __m128i *)(v6 - 12));
      v8 = *(_DWORD *)(v6 - 4);
      v9 = *(_DWORD *)(v3 + 8812);
      _mm_storel_epi64((__m128i *)&v42, v7);
      v10 = v42;
      sub_100278E0((void *)(v42 + v5), (const void *)(v42 + v9), v43);
      sub_100278E0((void *)(v10 + i), (const void *)(v10 + *(_DWORD *)(v3 + 8816)), 4 * v8);
    }
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 60))(
      *(_DWORD *)(v3 + 8),
      *(_DWORD *)(v3 + 8804),
      0);
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 60))(
      *(_DWORD *)(v3 + 8),
      *(_DWORD *)(v3 + 8808),
      0);
  }
  sub_10057090(v3);
  if ( dword_10239458 )
  {
    *(_BYTE *)(v3 + 31504) = 0;
  }
  else
  {
    v11 = *(_DWORD *)(v3 + 8704);
    if ( *(_DWORD *)(v11 + 124) & 0x200000 )
      *(_BYTE *)(v3 + 31504) = 1;
    else
      *(_BYTE *)(v3 + 31504) = ~(2 * *(_BYTE *)(v11 + 152)) & 2;
  }
  *(_DWORD *)(v3 + 31480) = 0;
  *(_DWORD *)(v3 + 31472) = 0;
  *(_DWORD *)(v3 + 31484) = -1;
  *(_DWORD *)(v3 + 31476) = -1;
  sub_1005C410();
  v12 = *(_DWORD *)(v3 + 31440);
  v13 = 0;
  v14 = *(_DWORD *)(v12 + 32);
  v38 = *(_DWORD *)(v12 + 32);
  if ( *(_BYTE *)(v3 + 8732) && v14 && *(_DWORD *)(v3 + 4 * v14 + 31508) == -1 )
  {
    if ( *(_DWORD *)(*(_DWORD *)(v3 + 8704) + 96) & 0x1000000 )
    {
      v15 = *(_DWORD *)(v3 + 31508);
      v13 = 1;
      *(_DWORD *)(v3 + 31512) = v15;
      *(_DWORD *)(v3 + 31516) = v15;
      *(_DWORD *)(*(_DWORD *)(v3 + 31440) + 16) = *(_DWORD *)(*(_DWORD *)(v3 + 31440) + 24);
      *(_DWORD *)(*(_DWORD *)(v3 + 31440) + 20) = *(_DWORD *)(*(_DWORD *)(v3 + 31440) + 28);
    }
    else
    {
      v14 = 0;
      v38 = 0;
    }
  }
  sub_10053A70(v3);
  sub_10055150(v3);
  (*(void (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 212))(
    *(_DWORD *)(v3 + 8),
    *(_DWORD *)(*(_DWORD *)(v3 + 9648) + 8),
    1,
    0,
    0);
  v16 = *(_DWORD *)(v3 + 8);
  if ( v16 )
    (*(void (__stdcall **)(int, signed int, int, _DWORD))(*(_DWORD *)v16 + 132))(
      v16,
      1,
      *(_DWORD *)(v3 + 9644) + 12,
      *(_DWORD *)(*(_DWORD *)(v3 + 9648) + 8));
  sub_10055230(v3, 0);
  sub_10055FD0(v3, a2, a3, v3 + 31444);
  sub_10055230(v3, 1);
  if ( v13 <= v14 )
  {
    v17 = 12 * v13;
    v18 = v3 + 31508 + 4 * v13;
    do
    {
      v19 = *(_DWORD *)v18;
      if ( (char)*(_DWORD *)v18 < 0 )
      {
        v24 = *(_DWORD *)(v3 + 31440);
        if ( *(_DWORD *)(v17 + v24 + 236) <= *(_DWORD *)(v17 + v24 + 620) )
          v25 = v24 + 616;
        else
          v25 = v24 + 232;
        v23 = v17 + v25;
        v22 = v23;
        v39 = v23;
      }
      else
      {
        v20 = *(_DWORD *)(v3 + 31440);
        v39 = v17 + v20 + 232;
        v21 = v20 + 616;
        v22 = v17 + v20 + 232;
        v23 = v17 + v21;
      }
      v41 = v23;
      v26 = v19 & 0x200 && !dword_10239464 && *(_DWORD *)(v22 + 4) > 1u;
      *(_DWORD *)(v3 + 31572) = v26;
      v27 = *(_DWORD *)v18 & 0x800 && !dword_10239460 && *(_DWORD *)(v23 + 4) > 1u;
      *(_DWORD *)(v3 + 31576) = v27;
      if ( v26 )
      {
        (*(void (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 212))(
          *(_DWORD *)(v3 + 8),
          *(_DWORD *)(*(_DWORD *)(v3 + 9656) + 8),
          3,
          0,
          0);
        v28 = *(_DWORD *)(v3 + 8);
        if ( v28 )
          (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v28 + 132))(
            v28,
            0,
            0,
            *(_DWORD *)(*(_DWORD *)(v3 + 9656) + 8));
        if ( *(_DWORD *)v18 & 0x100 )
          sub_10055A70(v3, a2, a3, v17 + *(_DWORD *)(v3 + 31440) + 40);
        if ( *(_DWORD *)v18 & 0x1000 )
          sub_10055A70(v3, a2, a3, v17 + *(_DWORD *)(v3 + 31440) + 808);
        if ( *(_DWORD *)v18 & 0x1100 )
          sub_10055510(v3, v39, 1);
      }
      if ( *(_DWORD *)(v3 + 31576) )
      {
        (*(void (__stdcall **)(_DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 212))(
          *(_DWORD *)(v3 + 8),
          *(_DWORD *)(*(_DWORD *)(v3 + 9656) + 8),
          2 * (*(_DWORD *)(v3 + 31572) == 0) + 1,
          0,
          0);
        v29 = *(_DWORD *)(v3 + 8);
        if ( v29 )
          (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v29 + 132))(
            v29,
            0,
            0,
            *(_DWORD *)(*(_DWORD *)(v3 + 9656) + 8));
        if ( *(_DWORD *)v18 & 0x400 )
        {
          sub_10055A70(v3, a2, a3, v17 + *(_DWORD *)(v3 + 31440) + 424);
          sub_10055510(v3, v41, 3);
        }
      }
      v30 = *(_DWORD *)(v3 + 8);
      if ( v30 )
        (*(void (__stdcall **)(int, signed int, int, _DWORD))(*(_DWORD *)v30 + 132))(
          v30,
          1,
          *(_DWORD *)(v3 + 9644) + 12,
          *(_DWORD *)(*(_DWORD *)(v3 + 9648) + 8));
      if ( *(_DWORD *)v18 & 0x100 )
        sub_10055FD0(v3, a2, a3, v17 + *(_DWORD *)(v3 + 31440) + 40);
      if ( *(_DWORD *)v18 & 0x1000 )
        sub_10055FD0(v3, a2, a3, v17 + *(_DWORD *)(v3 + 31440) + 808);
      if ( *(_BYTE *)(v3 + 31504) && (v31 = *(_DWORD *)v18, *(_DWORD *)v18 & 2) )
      {
        if ( v31 & 0x400 )
        {
          sub_10055C60(v3, a2, a3, v17 + *(_DWORD *)(v3 + 31440) + 424, v13 != v38);
          v32 = v38;
          if ( v13 < v38 )
          {
            (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 188))(
              *(_DWORD *)(v3 + 8),
              **(_DWORD **)(v3 + 9644),
              **(_DWORD **)(v3 + 9652));
LABEL_66:
            v32 = v38;
            goto LABEL_67;
          }
          goto LABEL_67;
        }
      }
      else if ( *(_DWORD *)v18 & 0x400 )
      {
        sub_10055FD0(v3, a2, a3, v17 + *(_DWORD *)(v3 + 31440) + 424);
      }
      v32 = v38;
      if ( v13 == v38 )
      {
        (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 188))(
          *(_DWORD *)(v3 + 8),
          **(_DWORD **)(v3 + 9652),
          **(_DWORD **)(v3 + 9644));
        goto LABEL_66;
      }
LABEL_67:
      ++v13;
      v18 += 4;
      v17 += 12;
    }
    while ( v13 <= v32 );
  }
  v33 = 0;
  v34 = v3 + 276;
  do
  {
    v35 = 0;
    if ( *(_DWORD *)v34 != dword_102398F4 )
    {
      v35 = 1;
      *(_DWORD *)v34 = dword_102398F4;
    }
    v36 = *(_DWORD *)(v3 + 8);
    if ( v36 && v35 )
      (*(void (__stdcall **)(int, signed int, signed int, int *))(*(_DWORD *)v36 + 32))(v36, v33, 1, &dword_102398F4);
    ++v33;
    v34 += 4;
  }
  while ( v33 < 7 );
  return sub_100543D0(v3);
}
// 10239458: using guessed type int dword_10239458;
// 1023945C: using guessed type int dword_1023945C;
// 10239460: using guessed type int dword_10239460;
// 10239464: using guessed type int dword_10239464;
// 102398F4: using guessed type int dword_102398F4;

//----- (10054C40) --------------------------------------------------------
int __usercall sub_10054C40@<eax>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // esi@1
  char v3; // bl@1
  char v4; // bh@1
  int v5; // ecx@1
  int v6; // eax@7
  int v7; // ST0C_4@7
  int v8; // ST10_4@7
  int v9; // ST14_4@7
  int v10; // ST18_4@7
  int v11; // eax@8
  int v12; // ecx@9
  char v13; // al@9
  int v14; // ecx@11
  char v15; // dl@14
  int v16; // ecx@16
  int v18; // [sp+20h] [bp-34h]@7
  int v19; // [sp+24h] [bp-30h]@7
  int v20; // [sp+28h] [bp-2Ch]@7
  __int128 v21; // [sp+2Ch] [bp-28h]@1
  int v22; // [sp+40h] [bp-14h]@7
  int v23; // [sp+44h] [bp-10h]@7
  int v24; // [sp+48h] [bp-Ch]@7
  int v25; // [sp+4Ch] [bp-8h]@7
  int v26; // [sp+50h] [bp-4h]@7
  int vars0; // [sp+54h] [bp+0h]@7

  v2 = a1;
  v21 = 0i64;
  v3 = 0;
  v4 = 0;
  v5 = *(_DWORD *)(a1 + 8704);
  LODWORD(v21) = dword_1006D0F0[*(_BYTE *)(v5 + 66)];
  DWORD1(v21) = dword_1006D0F0[*(_BYTE *)(v5 + 65)];
  DWORD2(v21) = dword_1006D0F0[*(_BYTE *)(v5 + 64)];
  if ( !(*(_BYTE *)(v5 + 232) & 8) && *(_BYTE *)(v5 + 68) & 1 )
  {
    v3 = 1;
    v4 = sub_10054FE0((void *)v2);
  }
  (*(void (__stdcall **)(_DWORD, signed int, int, _DWORD, int))(**(_DWORD **)(v2 + 8) + 132))(
    *(_DWORD *)(v2 + 8),
    1,
    v2 + 352,
    0,
    a2);
  if ( !v4 && v3
    || ((*(void (__stdcall **)(_DWORD, _DWORD, char *))(**(_DWORD **)(v2 + 8) + 200))(
          *(_DWORD *)(v2 + 8),
          *(_DWORD *)(v2 + 352),
          (char *)&v21 + 4),
        v3) )
  {
    sub_10054E60(v2, COERCE_FLOAT(&v20), (int)&v21, (int)&v18, (int)&v19);
    v6 = *(_DWORD *)(v2 + 8);
    v24 = v18;
    v25 = v19;
    v22 = v20;
    v23 = v21;
    v26 = 0;
    vars0 = 1065353216;
    (*(void (__stdcall **)(int, signed int, int *))(*(_DWORD *)v6 + 176))(v6, 1, &v22);
    sub_10040BC0(v2, 1);
    sub_10041820(v2, 0, 2, 1, v7, v8, v9, v10);
    (*(void (__stdcall **)(_DWORD, signed int, _UNKNOWN *))(**(_DWORD **)(v2 + 8) + 180))(
      *(_DWORD *)(v2 + 8),
      1,
      &unk_1007A9A0);
    if ( *(_DWORD *)(v2 + 168) )
    {
      v11 = *(_DWORD *)(v2 + 8);
      *(_DWORD *)(v2 + 168) = 0;
      (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v11 + 92))(v11, 0, 0, 0);
    }
    sub_1004EFA0((void *)v2);
    v12 = *(_DWORD *)(v2 + 9632);
    v13 = 0;
    if ( *(_DWORD *)(v2 + 276) != v12 )
    {
      v13 = 1;
      *(_DWORD *)(v2 + 276) = v12;
    }
    v14 = *(_DWORD *)(v2 + 8);
    if ( v14 && v13 )
      (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v14 + 32))(v14, 0, 1, v2 + 9632);
    sub_100508D0((void *)v2, 1);
    (*(void (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)(v2 + 8) + 52))(*(_DWORD *)(v2 + 8), 3, 0);
    v15 = 0;
    if ( *(_DWORD *)(v2 + 276) != dword_102398F4 )
    {
      v15 = 1;
      *(_DWORD *)(v2 + 276) = dword_102398F4;
    }
    v16 = *(_DWORD *)(v2 + 8);
    if ( v16 && v15 )
      (*(void (__stdcall **)(int, _DWORD, signed int, int *))(*(_DWORD *)v16 + 32))(v16, 0, 1, &dword_102398F4);
  }
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v2 + 8) + 132))(*(_DWORD *)(v2 + 8), 0, 0);
  return (*(int (__stdcall **)(_DWORD, int, _DWORD))(**(_DWORD **)v2 + 32))(*(_DWORD *)v2, dword_10239454, 0);
}
// 10054C40: could not find valid save-restore pair for edi
// 1006D0F0: using guessed type int dword_1006D0F0[];
// 10239454: using guessed type int dword_10239454;
// 102398F4: using guessed type int dword_102398F4;

//----- (10054E60) --------------------------------------------------------
int __thiscall sub_10054E60(int this, float a2, int a3, int a4, int a5)
{
  unsigned int v5; // eax@1
  __m128d v6; // xmm0@1
  unsigned int v7; // eax@1
  float v8; // xmm5_4@1
  __m128d v9; // xmm0@1
  int result; // eax@1
  float v11; // xmm4_4@1
  int v12; // eax@2
  int v13; // eax@3
  __m128d v14; // xmm0@5
  float v15; // xmm1_4@5
  __m128d v16; // xmm0@5
  float v17; // xmm1_4@5
  float v18; // xmm3_4@13

  v5 = *(_DWORD *)(this + 31596);
  v6 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(this + 31596));
  *(_DWORD *)a3 = 0;
  v6.m128d_f64[0] = v6.m128d_f64[0] + *(double *)&qword_1006EEC0[v5 >> 31];
  v7 = *(_DWORD *)(this + 31600);
  *LODWORD(a2) = 0;
  LODWORD(v8) = (unsigned __int128)_mm_cvtpd_ps(v6);
  v9 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v7);
  *(float *)a4 = v8;
  v9.m128d_f64[0] = v9.m128d_f64[0] + *(double *)&qword_1006EEC0[v7 >> 31];
  result = dword_10239474;
  LODWORD(v11) = (unsigned __int128)_mm_cvtpd_ps(v9);
  *(float *)a5 = v11;
  if ( result )
  {
    v12 = result - 1;
    if ( v12 )
    {
      v13 = v12 - 1;
      if ( v13 )
      {
        if ( v13 == 1 )
        {
          v14 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(this + 31588));
          v14.m128d_f64[0] = v14.m128d_f64[0] + *(double *)&qword_1006EEC0[*(_DWORD *)(this + 31588) >> 31];
          LODWORD(v15) = (unsigned __int128)_mm_cvtpd_ps(v14);
          v16 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(this + 31592));
          v16.m128d_f64[0] = v16.m128d_f64[0] + *(double *)&qword_1006EEC0[*(_DWORD *)(this + 31592) >> 31];
          v17 = v15 / COERCE_FLOAT(_mm_cvtpd_ps(v16));
          if ( *(_DWORD *)(*(_DWORD *)(this + 8704) + 232) & 0x100 )
            v17 = v17 + v17;
        }
        else
        {
          v17 = a2;
        }
      }
      else
      {
        v17 = 1.7777778;
      }
    }
    else
    {
      v17 = 1.3333334;
    }
    result = dword_1023946C;
    if ( dword_1023946C == 1 || dword_1023946C == 3 )
      v17 = 1.0 / v17;
    v18 = (float)(v8 / v11) / v17;
    if ( v18 >= 1.0 )
    {
      *(float *)a4 = v8 * (float)(1.0 / v18);
      *LODWORD(a2) = (float)((float)(1.0 - (float)(1.0 / v18)) * v8) * 0.5;
    }
    else
    {
      *(float *)a5 = v11 * v18;
      *(float *)a3 = (float)((float)(1.0 - v18) * v11) * 0.5;
    }
  }
  return result;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];
// 1023946C: using guessed type int dword_1023946C;
// 10239474: using guessed type int dword_10239474;

//----- (10054FE0) --------------------------------------------------------
char __thiscall sub_10054FE0(void *this)
{
  int v1; // edi@1
  char v2; // cl@1
  char result; // al@6
  int v4; // eax@9

  v1 = (int)this;
  v2 = byte_1007CDB0;
  if ( *(_DWORD *)(v1 + 31608) != dword_1023946C
    || *(_BYTE *)(v1 + 31604) != byte_1007CDB0
    || dword_10239480 != *(_DWORD *)(v1 + 31612)
    || dword_10239484 != *(_DWORD *)(v1 + 31616)
    || *(_DWORD *)(v1 + 31620) != dword_10239474 )
  {
    *(_DWORD *)(v1 + 31608) = dword_1023946C;
    *(_BYTE *)(v1 + 31604) = v2;
    *(_DWORD *)(v1 + 31612) = dword_10239480;
    *(_DWORD *)(v1 + 31616) = dword_10239484;
    *(_DWORD *)(v1 + 31620) = dword_10239474;
    if ( v2 )
    {
      *(_DWORD *)(v1 + 31596) = GetSystemMetrics(0);
      *(_DWORD *)(v1 + 31600) = GetSystemMetrics(1);
    }
    else
    {
      switch ( dword_1023946C )
      {
        case 0:
        case 2:
          *(_DWORD *)(v1 + 31596) = dword_10239480;
          v4 = dword_10239484;
          goto LABEL_11;
        case 1:
        case 3:
          *(_DWORD *)(v1 + 31596) = dword_10239484;
          v4 = dword_10239480;
LABEL_11:
          *(_DWORD *)(v1 + 31600) = v4;
          break;
        default:
          break;
      }
      sub_100402B0(*(_DWORD *)(v1 + 31596), *(_DWORD *)(v1 + 31600));
    }
    sub_100411F0(v1, *(_QWORD *)(v1 + 31596));
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 1007CDB0: using guessed type char byte_1007CDB0;
// 1023946C: using guessed type int dword_1023946C;
// 10239474: using guessed type int dword_10239474;
// 10239480: using guessed type int dword_10239480;
// 10239484: using guessed type int dword_10239484;

//----- (100550F0) --------------------------------------------------------
unsigned int __thiscall sub_100550F0(int this)
{
  int v1; // ebx@1
  int v2; // edi@1
  int v3; // ecx@1
  unsigned int result; // eax@1
  bool v5; // zf@1

  v1 = this;
  v2 = *(_DWORD *)(this + 8704);
  v3 = ((*(_DWORD *)(v2 + 92) >> 10) & 0x3FF) + 1;
  result = (4 * (*(_DWORD *)(v2 + 92) & 0x3FFu) + 4) / dword_1006EC5C[(*(_DWORD *)(v2 + 68) >> 2) & 3];
  v5 = (*(_BYTE *)(v2 + 208) & 0x10) == 0;
  *(_DWORD *)(v1 + 31588) = result;
  if ( !v5 )
    v3 *= 2;
  *(_DWORD *)(v1 + 31592) = v3;
  return result;
}
// 1006EC5C: using guessed type int dword_1006EC5C[];

//----- (10055150) --------------------------------------------------------
int __thiscall sub_10055150(int this)
{
  int v1; // esi@1
  int v2; // edi@1
  int v3; // ecx@1
  int v4; // ebx@1
  int v5; // ecx@2
  const void *v6; // eax@3
  int v7; // edi@6
  int result; // eax@6
  int v9; // ecx@7
  const void *v10; // ecx@8

  v1 = this;
  v2 = *(_DWORD *)(*(_DWORD *)(this + 31440) + 1244);
  v4 = sub_10040EA0(this, 64, v2);
  if ( v4 )
  {
    v5 = *(_DWORD *)(v1 + 31440);
    if ( *(_DWORD *)(v5 + 1248) )
      v6 = *(const void **)(v5 + 1240);
    else
      v6 = 0;
    sub_100278E0((void *)v4, v6, v2 << 6);
    sub_10040E40(v1);
  }
  v7 = *(_DWORD *)(*(_DWORD *)(v1 + 31440) + 1256);
  result = sub_10040D50(v1, v3, v7);
  if ( v4 )
  {
    v9 = *(_DWORD *)(v1 + 31440);
    if ( *(_DWORD *)(v9 + 1260) )
      v10 = *(const void **)(v9 + 1252);
    else
      v10 = 0;
    result = (int)sub_100278E0((void *)result, v10, 4 * v7);
    if ( *(_BYTE *)(v1 + 340) )
    {
      result = (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v1 + 8) + 60))(
                 *(_DWORD *)(v1 + 8),
                 *(_DWORD *)(v1 + 328),
                 0);
      *(_BYTE *)(v1 + 340) = 0;
    }
    if ( *(_BYTE *)(v1 + 341) )
    {
      result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD))(**(_DWORD **)(v1 + 8) + 76))(
                 *(_DWORD *)(v1 + 8),
                 *(_DWORD *)(v1 + 328),
                 42,
                 0);
      *(_BYTE *)(v1 + 341) = 0;
    }
  }
  return result;
}

//----- (10055230) --------------------------------------------------------
int __thiscall sub_10055230(int this, char a2)
{
  int v2; // esi@1
  int v3; // edi@1
  unsigned int v4; // edx@1
  unsigned int v5; // eax@1
  unsigned int v6; // ecx@1
  unsigned int v7; // edx@3
  unsigned int v8; // eax@3
  unsigned int v9; // ecx@5
  __m128 v10; // xmm5@6
  float v11; // xmm1_4@6
  float v12; // xmm1_4@8
  __m128 v13; // xmm0@8
  __m128d v14; // xmm0@10
  signed int v15; // edi@10
  __int128 *v16; // edx@10
  __m128 v17; // xmm6@10
  __m128d v18; // xmm0@10
  int v19; // ecx@10
  __m128 v20; // ST2C_16@10
  __m128 v21; // xmm7@10
  unsigned int v22; // xmm3_4@10
  __m128 v23; // xmm0@10
  __m128 v24; // xmm1@10
  __m128 v25; // xmm0@10
  __m128 v26; // xmm2@10
  __m128 v27; // xmm4@10
  __m128 v28; // xmm3@10
  __m128 v29; // xmm0@10
  __m128 v30; // xmm2@10
  __m128 v31; // xmm1@10
  __m128 v32; // xmm4@10
  __m128 v33; // xmm0@10
  __m128 v34; // xmm3@10
  bool v35; // cf@12
  int v36; // edi@15
  int v37; // eax@18
  int v39; // [sp+10h] [bp-80h]@1
  int v40; // [sp+14h] [bp-7Ch]@3
  int v41; // [sp+18h] [bp-78h]@3
  int v42; // [sp+1Ch] [bp-74h]@5
  __m128 v43; // [sp+30h] [bp-60h]@10
  int v44; // [sp+40h] [bp-50h]@18
  int v45; // [sp+44h] [bp-4Ch]@18
  __m128 v46; // [sp+50h] [bp-40h]@10
  __m128 v47; // [sp+60h] [bp-30h]@10
  __m128 v48; // [sp+70h] [bp-20h]@10
  __m128 v49; // [sp+80h] [bp-10h]@10

  v2 = this;
  v3 = *(_DWORD *)(this + 31440);
  v39 = 32 * *(_DWORD *)(this + 31472);
  v4 = *(_DWORD *)(v3 + 16);
  v5 = *(_DWORD *)(this + 31476);
  v6 = *(_DWORD *)(v3 + 20);
  if ( v4 < v5 )
    v5 = *(_DWORD *)(v3 + 16);
  v7 = 32 * (v4 + 1);
  v40 = 32 * (v5 + 1);
  v41 = 32 * *(_DWORD *)(v2 + 31480);
  v8 = *(_DWORD *)(v2 + 31484);
  if ( v6 < v8 )
    v8 = *(_DWORD *)(v3 + 20);
  v9 = 32 * (v6 + 1);
  v42 = 32 * (v8 + 1);
  if ( a2 )
  {
    v10 = (__m128)*(_DWORD *)v3;
    v11 = *(float *)(v3 + 4);
  }
  else
  {
    v10 = (__m128)*(_DWORD *)(v3 + 8);
    v11 = *(float *)(v3 + 12);
  }
  v12 = v11 * 1.001;
  v10.m128_f32[0] = v10.m128_f32[0] - (float)(v10.m128_f32[0] * 0.001);
  v13 = v10;
  v13.m128_f32[0] = v10.m128_f32[0] - v12;
  if ( COERCE_FLOAT(_mm_and_ps(v13, (__m128)xmmword_1006EED0)) <= 0.0000099999997 )
  {
    v10.m128_f32[0] = v10.m128_f32[0] - 0.0000099999997;
    v12 = v12 + 0.0000099999997;
  }
  v14 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v7);
  v15 = 60;
  v43.m128_i32[3] = 1065353216;
  v14.m128d_f64[0] = v14.m128d_f64[0] + *(double *)&qword_1006EEC0[v7 >> 31];
  v16 = (__int128 *)&v46;
  v17 = _mm_cvtpd_ps(v14);
  v18 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v9);
  v18.m128d_f64[0] = v18.m128d_f64[0] + *(double *)&qword_1006EEC0[v9 >> 31];
  v19 = v2 + 9712;
  v20.m128_u64[1] = __PAIR__(1065353216, (float)(1.0 / (float)(v12 - v10.m128_f32[0])));
  v21 = _mm_cvtpd_ps(v18);
  v20.m128_f32[0] = 1.0 / v17.m128_f32[0];
  v43.m128_i32[2] = (unsigned __int128)_mm_xor_ps(v10, (__m128)(unsigned int)xmmword_1006EEE0);
  v43.m128_i32[0] = (unsigned __int128)_mm_xor_ps(v17, (__m128)(unsigned int)xmmword_1006EEE0);
  v20.m128_f32[1] = -1.0 / v21.m128_f32[0];
  v43.m128_i32[1] = (unsigned __int128)_mm_xor_ps(v21, (__m128)(unsigned int)xmmword_1006EEE0);
  *(float *)&v22 = (float)(1.0 / v17.m128_f32[0]) + (float)(1.0 / v17.m128_f32[0]);
  v23 = _mm_and_ps(v20, (__m128)xmmword_1006DAE0);
  v24 = _mm_mul_ps(v20, v43);
  v25 = _mm_add_ps(v23, v23);
  v26 = _mm_and_ps(v20, (__m128)xmmword_1006DB30);
  v27 = _mm_shuffle_ps((__m128)v22, v25, 68);
  v28 = _mm_shuffle_ps((__m128)v22, v25, -18);
  v29 = _mm_shuffle_ps(v26, v24, 68);
  v30 = _mm_shuffle_ps(v26, v24, -18);
  v31 = _mm_shuffle_ps(v27, v29, -120);
  v32 = _mm_shuffle_ps(v27, v29, -35);
  v33 = _mm_shuffle_ps(v28, v30, -120);
  v34 = _mm_shuffle_ps(v28, v30, -35);
  v46 = v31;
  v47 = v32;
  v48 = v33;
  v49 = v34;
  while ( *(_DWORD *)v19 == *(_DWORD *)v16 )
  {
    v19 += 4;
    v16 = (__int128 *)((char *)v16 + 4);
    v35 = (unsigned int)v15 < 4;
    v15 -= 4;
    if ( v35 )
      goto LABEL_15;
  }
  *(_OWORD *)(v2 + 9712) = v31;
  *(_OWORD *)(v2 + 9728) = v32;
  *(_OWORD *)(v2 + 9744) = v33;
  *(_OWORD *)(v2 + 9760) = v34;
  *(_BYTE *)(v2 + 9696) = 1;
LABEL_15:
  v36 = v2 + 31488;
  if ( *(_DWORD *)(*(_DWORD *)(v2 + 8704) + 96) & 0x1000000 )
  {
    *(_DWORD *)v36 = v39;
    *(_DWORD *)(v2 + 31496) = v40;
    *(_DWORD *)(v2 + 31492) = v41;
    *(_DWORD *)(v2 + 31500) = v42;
  }
  else
  {
    *(_DWORD *)v36 = v39 * dword_10239478;
    *(_DWORD *)(v2 + 31496) = v40 * dword_10239478;
    *(_DWORD *)(v2 + 31492) = v41 * dword_10239478;
    *(_DWORD *)(v2 + 31500) = v42 * dword_10239478;
  }
  v37 = *(_DWORD *)(v2 + 8);
  v43.m128_u64[1] = __PAIR__(v21.m128_u32[0], v17.m128_u32[0]);
  v43.m128_u64[0] = 0i64;
  v44 = 0;
  v45 = 1065353216;
  (*(void (__stdcall **)(int, signed int, __int128 *))(*(_DWORD *)v37 + 176))(v37, 1, &v43);
  return (*(int (__stdcall **)(_DWORD, signed int, int))(**(_DWORD **)(v2 + 8) + 180))(
           *(_DWORD *)(v2 + 8),
           1,
           v2 + 31488);
}
// 1006DAE0: using guessed type __int128 xmmword_1006DAE0;
// 1006DB30: using guessed type __int128 xmmword_1006DB30;
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];
// 1006EED0: using guessed type __int128 xmmword_1006EED0;
// 1006EEE0: using guessed type __int128 xmmword_1006EEE0;
// 10239478: using guessed type int dword_10239478;

//----- (10055510) --------------------------------------------------------
void __thiscall sub_10055510(int this, int a2, int a3)
{
  int v3; // esi@1
  int v4; // eax@2
  int v5; // edi@3
  unsigned int v6; // ecx@3
  int v7; // edx@4
  int v8; // eax@4
  int v9; // ebx@5
  int v10; // ebp@6
  int v11; // eax@10
  int v12; // eax@15
  int v13; // eax@18
  int v14; // eax@23
  int v15; // ecx@23
  int v16; // ebp@26
  char v17; // al@27
  int v18; // eax@29
  int v19; // eax@32
  int v20; // ebp@44
  int v21; // ebx@44
  int v22; // edi@45
  int v23; // eax@49
  int v24; // eax@51
  int v25; // ecx@51
  int v26; // ecx@58
  int v27; // edx@58
  int v28; // [sp+7Ah] [bp-64h]@0
  signed int v29; // [sp+7Eh] [bp-60h]@0
  int v30; // [sp+82h] [bp-5Ch]@0
  char v31; // [sp+91h] [bp-4Dh]@1
  unsigned int v32; // [sp+92h] [bp-4Ch]@3
  int v33; // [sp+96h] [bp-48h]@4
  int v34; // [sp+9Ah] [bp-44h]@8
  unsigned int v35; // [sp+9Eh] [bp-40h]@1
  int v36; // [sp+A2h] [bp-3Ch]@4
  int v37; // [sp+A6h] [bp-38h]@8
  int v38; // [sp+AAh] [bp-34h]@6
  int v39; // [sp+AEh] [bp-30h]@8
  int v40; // [sp+B2h] [bp-2Ch]@47
  int v41; // [sp+B6h] [bp-28h]@5
  int v42; // [sp+BAh] [bp-24h]@17
  int v43; // [sp+BEh] [bp-20h]@15
  int v44; // [sp+C2h] [bp-1Ch]@17
  int v45; // [sp+C6h] [bp-18h]@15
  int v46; // [sp+CAh] [bp-14h]@29
  int v47; // [sp+CEh] [bp-10h]@29
  int v48; // [sp+D2h] [bp-Ch]@31
  int v49; // [sp+D6h] [bp-8h]@29

  v3 = this;
  v31 = 0;
  v35 = -1;
  if ( *(_DWORD *)(this + 168) )
  {
    v4 = *(_DWORD *)(this + 8);
    *(_DWORD *)(this + 168) = 0;
    (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 92))(v4, 0, 0, 0);
  }
  v5 = a2;
  v6 = 0;
  v32 = 0;
  if ( *(_DWORD *)(a2 + 4) )
  {
    v7 = a3;
    v8 = 0;
    v36 = -112;
    v33 = 0;
    do
    {
      v9 = v8 + *(_DWORD *)v5;
      v41 = v9;
      if ( !*(_DWORD *)(v9 + 108) )
        goto LABEL_63;
      v10 = *(_DWORD *)(v9 + 4) >> 29;
      v38 = v10;
      if ( v10 == 7 )
        goto LABEL_63;
      if ( *(_DWORD *)(v9 + 32) < 0x80000000 )
      {
        if ( !*(_BYTE *)(v3 + 8801) )
          goto LABEL_12;
        v34 = *(_DWORD *)(v3 + 308);
        v11 = *(_DWORD *)(v3 + 8);
        *(_BYTE *)(v3 + 8801) = 0;
        v39 = 0;
        v37 = 64;
        (*(void (__stdcall **)(int, _DWORD, signed int, int *, int *, int *, int, signed int, int))(*(_DWORD *)v11 + 72))(
          v11,
          0,
          1,
          &v34,
          &v37,
          &v39,
          v28,
          v29,
          v30);
        v30 = 0;
        v29 = 42;
        v28 = *(_DWORD *)(v3 + 328);
      }
      else
      {
        sub_100562E0(v3, v9);
        *(_BYTE *)(v3 + 8801) = 1;
        v37 = *(_DWORD *)(v9 + 104);
        v34 = *(_BYTE *)(v9 + 34);
        v39 = *(_DWORD *)(v3 + 8804);
        (*(void (__stdcall **)(_DWORD, _DWORD, signed int, int *, int *, int *, int, signed int, int))(**(_DWORD **)(v3 + 8) + 72))(
          *(_DWORD *)(v3 + 8),
          0,
          1,
          &v39,
          &v34,
          &v37,
          v28,
          v29,
          v30);
        v30 = *(_DWORD *)(v9 + 104);
        v29 = 42;
        v28 = *(_DWORD *)(v3 + 8808);
      }
      (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(v3 + 8) + 76))(*(_DWORD *)(v3 + 8));
      v8 = v33;
      v7 = a3;
      v6 = v32;
LABEL_12:
      if ( !v10 )
      {
        if ( !v31 )
        {
          v35 = v6;
          v36 = v8;
        }
        v31 = 1;
        v43 = 1;
        v12 = 2;
        v45 = 8;
        if ( v7 == 3 )
          v12 = 8;
        v42 = 1;
        v44 = 6;
        sub_10041BF0((void *)v3, 1, 7, 0, 1, 0, v12, (int)&v42, (__int64 *)&v42, 0);
        if ( (*(_DWORD *)v9 & 0x30000u) >= 0x20000 )
        {
          sub_100503C0(v3, v9);
        }
        else
        {
          v13 = 0;
          v34 = 0;
          if ( *(_DWORD *)(v3 + 152) )
          {
            *(_DWORD *)(v3 + 152) = 0;
            (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 36))(
              *(_DWORD *)(v3 + 8),
              0,
              0,
              0);
            v13 = v34;
          }
          if ( *(_DWORD *)(v3 + 156) != v13 )
          {
            *(_DWORD *)(v3 + 156) = v13;
            (*(void (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v3 + 8) + 64))(
              *(_DWORD *)(v3 + 8),
              0,
              1,
              &v34);
          }
        }
        sub_10040BC0(v3, dword_1006D0E0[(*(_DWORD *)(v9 + 4) >> 27) & 3]);
        sub_10052080((void *)v3, v9, 0);
        v14 = *(_DWORD *)(v3 + 8);
        v15 = *(_DWORD *)v14;
        if ( *(_DWORD *)(v9 + 32) < 0x80000000 )
          (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(v15 + 48))(
            v14,
            *(_DWORD *)(v9 + 108),
            *(_DWORD *)(v9 + 104),
            0);
        else
          (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(v15 + 48))(v14, *(_DWORD *)(v9 + 108), 0, 0);
LABEL_61:
        v6 = v32;
LABEL_62:
        v8 = v33;
        goto LABEL_63;
      }
      v16 = 0;
      v37 = 0;
      if ( *(_DWORD *)(v9 + 108) )
      {
        v17 = v31;
        while ( 1 )
        {
          if ( !v17 )
          {
            sub_10050270((void *)v3, v38 + 2, v9, v7);
            sub_10040BC0(v3, dword_1006D0E0[(*(_DWORD *)(v9 + 4) >> 27) & 3]);
            sub_10052080((void *)v3, v9, 0);
            v26 = *(_DWORD *)(v3 + 8);
            v27 = *(_DWORD *)v26;
            if ( *(_DWORD *)(v9 + 32) < 0x80000000 )
              (*(void (__stdcall **)(int, int, int, _DWORD))(v27 + 48))(
                v26,
                *(_DWORD *)(v9 + 108) - v16,
                v16 + *(_DWORD *)(v9 + 104),
                0);
            else
              (*(void (__stdcall **)(int, int, int, _DWORD))(v27 + 48))(v26, *(_DWORD *)(v9 + 108) - v16, v16, 0);
            goto LABEL_61;
          }
          v47 = 1;
          v46 = 1;
          v18 = 2;
          v49 = 8;
          if ( v7 == 3 )
            v18 = 8;
          v48 = 6;
          sub_10041BF0((void *)v3, 1, 7, 0, 1, 0, v18, (int)&v46, (__int64 *)&v46, 0);
          if ( (*(_DWORD *)v9 & 0x30000u) >= 0x20000 )
          {
            sub_100503C0(v3, v9);
          }
          else
          {
            v19 = 0;
            v34 = 0;
            if ( *(_DWORD *)(v3 + 152) )
            {
              *(_DWORD *)(v3 + 152) = 0;
              (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 36))(
                *(_DWORD *)(v3 + 8),
                0,
                0,
                0);
              v19 = v34;
            }
            if ( *(_DWORD *)(v3 + 156) != v19 )
            {
              *(_DWORD *)(v3 + 156) = v19;
              (*(void (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v3 + 8) + 64))(
                *(_DWORD *)(v3 + 8),
                0,
                1,
                &v34);
            }
          }
          sub_10040BC0(v3, dword_1006D0E0[(*(_DWORD *)(v9 + 4) >> 27) & 3]);
          sub_10052080((void *)v3, v9, 0);
          if ( *(_DWORD *)(v9 + 32) < 0x80000000 )
            (*(void (__stdcall **)(_DWORD, signed int, int, _DWORD))(**(_DWORD **)(v3 + 8) + 48))(
              *(_DWORD *)(v3 + 8),
              4,
              v16 + *(_DWORD *)(v9 + 104),
              0);
          else
            (*(void (__stdcall **)(_DWORD, signed int, int, _DWORD))(**(_DWORD **)(v3 + 8) + 48))(
              *(_DWORD *)(v3 + 8),
              4,
              v16,
              0);
          sub_10050270((void *)v3, v38, v9, a3);
          sub_10040BC0(v3, 1);
          if ( *(_DWORD *)(v9 + 32) < 0x80000000 )
            (*(void (__stdcall **)(_DWORD, signed int, int, _DWORD))(**(_DWORD **)(v3 + 8) + 48))(
              *(_DWORD *)(v3 + 8),
              4,
              v16 + *(_DWORD *)(v9 + 104),
              0);
          else
            (*(void (__stdcall **)(_DWORD, signed int, int, _DWORD))(**(_DWORD **)(v3 + 8) + 48))(
              *(_DWORD *)(v3 + 8),
              4,
              v16,
              0);
          v6 = v32;
          if ( v35 < v32 )
            break;
LABEL_56:
          v7 = a3;
          v16 += 4;
          v17 = 0;
          v37 = v16;
          v31 = 0;
          if ( (unsigned int)v16 >= *(_DWORD *)(v9 + 108) )
            goto LABEL_62;
        }
        v20 = v36;
        v21 = v32 - v35;
        while ( 2 )
        {
          v22 = v20 + *(_DWORD *)v5;
          if ( *(_DWORD *)(v22 + 108) )
          {
            if ( *(_DWORD *)(v22 + 32) >= 0x80000000 )
            {
              sub_100562E0(v3, v22);
              v39 = *(_DWORD *)(v22 + 104);
              v34 = *(_BYTE *)(v22 + 34);
              v40 = *(_DWORD *)(v3 + 8804);
              (*(void (__stdcall **)(_DWORD, _DWORD, signed int, int *, int *, int *, int, signed int, int))(**(_DWORD **)(v3 + 8) + 72))(
                *(_DWORD *)(v3 + 8),
                0,
                1,
                &v40,
                &v34,
                &v39,
                v28,
                v29,
                v30);
              v30 = *(_DWORD *)(v22 + 104);
              v29 = 42;
              v28 = *(_DWORD *)(v3 + 8808);
              goto LABEL_50;
            }
            if ( *(_BYTE *)(v3 + 8801) )
            {
              v34 = *(_DWORD *)(v3 + 308);
              v23 = *(_DWORD *)(v3 + 8);
              *(_BYTE *)(v3 + 8801) = 0;
              v40 = 0;
              v39 = 64;
              (*(void (__stdcall **)(int, _DWORD, signed int, int *, int *, int *, int, signed int, int))(*(_DWORD *)v23 + 72))(
                v23,
                0,
                1,
                &v34,
                &v39,
                &v40,
                v28,
                v29,
                v30);
              v30 = 0;
              v29 = 42;
              v28 = *(_DWORD *)(v3 + 328);
LABEL_50:
              (*(void (__stdcall **)(_DWORD))(**(_DWORD **)(v3 + 8) + 76))(*(_DWORD *)(v3 + 8));
            }
            sub_10052080((void *)v3, v22, 0);
            v24 = *(_DWORD *)(v3 + 8);
            v25 = *(_DWORD *)v24;
            if ( *(_DWORD *)(v22 + 32) < 0x80000000 )
              (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(v25 + 48))(
                v24,
                *(_DWORD *)(v22 + 108),
                *(_DWORD *)(v22 + 104),
                0);
            else
              (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(v25 + 48))(v24, *(_DWORD *)(v22 + 108), 0, 0);
          }
          v5 = a2;
          v20 += 112;
          --v21;
          if ( !v21 )
          {
            v9 = v41;
            v16 = v37;
            v6 = v32;
            goto LABEL_56;
          }
          continue;
        }
      }
LABEL_63:
      v7 = a3;
      ++v6;
      v8 += 112;
      v32 = v6;
      v33 = v8;
    }
    while ( v6 < *(_DWORD *)(v5 + 4) );
  }
}
// 1006D0E0: using guessed type int dword_1006D0E0[];

//----- (10055A70) --------------------------------------------------------
int __userpurge sub_10055A70@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4)
{
  int v4; // esi@1
  int v5; // ebp@1
  int v6; // ecx@1
  int v7; // eax@2
  int v8; // edi@3
  char v9; // bl@7
  int v10; // eax@7
  int v11; // eax@14
  int v12; // eax@17
  int v13; // eax@20
  signed int v14; // edi@28
  int v15; // ebx@28
  int result; // eax@29
  char v17; // dl@29
  int v18; // ecx@31
  int v19; // [sp+20h] [bp-8h]@20
  int v20; // [sp+24h] [bp-4h]@2

  v4 = a1;
  v5 = 0;
  v6 = a4;
  if ( *(_DWORD *)(a4 + 4) )
  {
    v7 = 0;
    v20 = 0;
    do
    {
      v8 = v7 + *(_DWORD *)v6;
      if ( *(_DWORD *)(v8 + 108) >= 2u && *(_BYTE *)v8 & 0x80 )
      {
        if ( *(_DWORD *)(v8 + 32) >= 0x80000000 )
          sub_100562E0(v4, v7 + *(_DWORD *)v6);
        v9 = 1;
        v10 = *(_DWORD *)v8 & 0x7000000;
        if ( v10 == 0x4000000 )
        {
          v9 = 0;
        }
        else if ( v10 == 0x2000000 )
        {
          if ( *(_BYTE *)(v4 + 31504) )
          {
            v9 = 1;
            if ( *(_BYTE *)(v4 + 4 * (*(_BYTE *)(v8 + 35) & 0x1F) + 31508) & 2 )
              v9 = 0;
          }
        }
        sub_10040BC0(v4, dword_1006D0E0[(*(_DWORD *)(v8 + 4) >> 27) & 3]);
        if ( v9 )
          v11 = dword_1006D080[*(_DWORD *)(v8 + 4) >> 29];
        else
          v11 = 7;
        sub_10041BF0((void *)v4, 1, v11, 1, 0, (__int64 *)0xFF, 255, 0, 0, 1);
        sub_10052080((void *)v4, v8, 2u);
        if ( *(_DWORD *)(v4 + 168) )
        {
          v12 = *(_DWORD *)(v4 + 8);
          *(_DWORD *)(v4 + 168) = 0;
          (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v12 + 92))(v12, 0, 0, 0);
        }
        if ( (*(_DWORD *)v8 & 0x7000000) == 0x4000000 )
        {
          sub_10050D40(0x4000000, v4, v5, v8, v4, a2, a3, v8, 2);
        }
        else if ( (*(_DWORD *)v8 & 0x30000u) >= 0x20000 )
        {
          sub_100503C0(v4, v8);
        }
        else
        {
          v13 = 0;
          v19 = 0;
          if ( *(_DWORD *)(v4 + 152) )
          {
            *(_DWORD *)(v4 + 152) = 0;
            (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(v4 + 8) + 36))(
              *(_DWORD *)(v4 + 8),
              0,
              0,
              0);
            v13 = v19;
          }
          if ( *(_DWORD *)(v4 + 156) != v13 )
          {
            *(_DWORD *)(v4 + 156) = v13;
            (*(void (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v4 + 8) + 64))(
              *(_DWORD *)(v4 + 8),
              0,
              1,
              &v19);
          }
        }
        sub_10056110(v4, v5, a2, a3, v8, 0, 0);
        v7 = v20;
        v6 = a4;
      }
      ++v5;
      v7 += 112;
      v20 = v7;
    }
    while ( (unsigned int)v5 < *(_DWORD *)(v6 + 4) );
  }
  v14 = 0;
  v15 = v4 + 276;
  do
  {
    result = dword_102398F4;
    v17 = 0;
    if ( *(_DWORD *)v15 != dword_102398F4 )
    {
      v17 = 1;
      *(_DWORD *)v15 = dword_102398F4;
    }
    v18 = *(_DWORD *)(v4 + 8);
    if ( v18 )
    {
      if ( v17 )
        result = (*(int (__stdcall **)(int, signed int, signed int, int *))(*(_DWORD *)v18 + 32))(
                   v18,
                   v14,
                   1,
                   &dword_102398F4);
    }
    ++v14;
    v15 += 4;
  }
  while ( v14 < 7 );
  return result;
}
// 1006D080: using guessed type int dword_1006D080[];
// 1006D0E0: using guessed type int dword_1006D0E0[];
// 102398F4: using guessed type int dword_102398F4;

//----- (10055C60) --------------------------------------------------------
int __userpurge sub_10055C60@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4, int a5)
{
  int v5; // esi@1
  int v6; // eax@3
  char v7; // cl@3
  int v8; // ebp@3
  int v9; // ebx@4
  int v10; // edi@5
  int v11; // eax@9
  int v12; // eax@10
  int v13; // ebx@12
  signed int v14; // edi@12
  int v15; // ebp@12
  char v16; // dl@13
  int v17; // ecx@15
  int v18; // ST74_4@19
  int v19; // eax@20
  char v20; // al@21
  int v21; // ecx@21
  int v22; // edx@23
  char v23; // al@27
  int v24; // ecx@27
  int v25; // edx@29
  int v26; // ecx@32
  char v27; // al@32
  int v28; // ecx@34
  int v29; // ecx@37
  char v30; // al@37
  int v31; // ecx@39
  signed int v32; // edi@42
  int result; // eax@43
  char v34; // dl@43
  int v35; // ecx@45
  int v36; // [sp+68h] [bp-3Ch]@3
  int v37; // [sp+6Ch] [bp-38h]@3
  int v38; // [sp+70h] [bp-34h]@3
  int v39; // [sp+88h] [bp-1Ch]@0
  int v40; // [sp+8Ch] [bp-18h]@1
  int v41; // [sp+90h] [bp-14h]@1
  int v42; // [sp+94h] [bp-10h]@1
  int v43; // [sp+98h] [bp-Ch]@1
  int v44; // [sp+9Ch] [bp-8h]@1

  v5 = a1;
  v40 = -1;
  (*(void (__stdcall **)(_DWORD, _DWORD, int *))(**(_DWORD **)(a1 + 8) + 204))(
    *(_DWORD *)(a1 + 8),
    *(_DWORD *)(a1 + 9684),
    &v40);
  v43 = *(_DWORD *)(v5 + 9672);
  v44 = *(_DWORD *)(v5 + 9684);
  v41 = 0;
  v42 = 0;
  if ( (_BYTE)a5 )
    (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v5 + 8) + 188))(
      *(_DWORD *)(v5 + 8),
      **(_DWORD **)(v5 + 9660),
      **(_DWORD **)(v5 + 9648));
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, signed int, int *, int *))(**(_DWORD **)(v5 + 8) + 136))(
    *(_DWORD *)(v5 + 8),
    0,
    0,
    *(_DWORD *)(*(_DWORD *)(v5 + 9648) + 8),
    0,
    2,
    &v43,
    &v41);
  sub_10041BF0((void *)v5, 1, 7, 0, 0, (__int64 *)0xFF, 255, 0, 0, 1);
  v6 = a4;
  v7 = 0;
  v8 = 0;
  LOBYTE(v39) = 0;
  if ( *(_DWORD *)(a4 + 4) )
  {
    v9 = 0;
    do
    {
      v10 = v9 + *(_DWORD *)v6;
      if ( *(_DWORD *)(v10 + 108) >= 2u )
      {
        LOBYTE(v39) = ((*(_DWORD *)(v10 + 8) & 0x3000000) != 0) | v7;
        if ( *(_DWORD *)(v10 + 32) >= 0x80000000 )
          sub_100562E0(v5, v10);
        sub_10040BC0(v5, dword_1006D0E0[(*(_DWORD *)(v10 + 4) >> 27) & 3]);
        if ( *(_DWORD *)(v5 + 168) )
        {
          v11 = *(_DWORD *)(v5 + 8);
          *(_DWORD *)(v5 + 168) = 0;
          (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v11 + 92))(v11, 0, 0, 0);
        }
        v12 = sub_10052080((void *)v5, v10, 0);
        sub_10050D40(v12, v5, v8, v10, v5, a2, a3, v10, 0);
        sub_10056110(v5, v8, a2, a3, v10, 1, 0);
        v7 = v39;
        v6 = a4;
      }
      ++v8;
      v9 += 112;
    }
    while ( (unsigned int)v8 < *(_DWORD *)(v6 + 4) );
  }
  v13 = v5 + 276;
  v14 = 0;
  v15 = v5 + 276;
  do
  {
    v16 = 0;
    if ( *(_DWORD *)v15 != dword_102398F4 )
    {
      v16 = 1;
      *(_DWORD *)v15 = dword_102398F4;
    }
    v17 = *(_DWORD *)(v5 + 8);
    if ( v17 && v16 )
      (*(void (__stdcall **)(int, signed int, signed int, int *))(*(_DWORD *)v17 + 32))(v17, v14, 1, &dword_102398F4);
    ++v14;
    v15 += 4;
  }
  while ( v14 < 7 );
  sub_10040BC0(v5, 1);
  sub_10041820(v5, 0, 2, 1, v36, v37, v38, v18);
  (*(void (__stdcall **)(_DWORD, signed int, int, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(v5 + 8) + 136))(
    *(_DWORD *)(v5 + 8),
    1,
    *(_DWORD *)(v5 + 9652) + 12,
    *(_DWORD *)(*(_DWORD *)(v5 + 9648) + 8),
    0,
    0,
    0,
    0);
  sub_10041BF0((void *)v5, (unsigned __int8)a5, 8, (unsigned __int8)a5, 0, (__int64 *)0xFF, 255, 0, 0, 1);
  if ( *(_DWORD *)(v5 + 168) )
  {
    v19 = *(_DWORD *)(v5 + 8);
    *(_DWORD *)(v5 + 168) = 0;
    (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v19 + 92))(v19, 0, 0, 0);
  }
  sub_1004FDC0(v5, a5, v39);
  v20 = 0;
  v21 = *(_DWORD *)(v5 + 9644) + 4;
  if ( *(_DWORD *)v13 != *(_DWORD *)v21 )
  {
    v20 = 1;
    *(_DWORD *)v13 = *(_DWORD *)v21;
  }
  v22 = *(_DWORD *)(v5 + 8);
  if ( v22 && v20 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v22 + 32))(v22, 0, 1, v21);
  if ( (_BYTE)a5 )
  {
    v23 = 0;
    v24 = *(_DWORD *)(v5 + 9660) + 4;
    if ( *(_DWORD *)(v5 + 280) != *(_DWORD *)v24 )
    {
      v23 = 1;
      *(_DWORD *)(v5 + 280) = *(_DWORD *)v24;
    }
    v25 = *(_DWORD *)(v5 + 8);
    if ( v25 && v23 )
      (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v25 + 32))(v25, 1, 1, v24);
  }
  v26 = *(_DWORD *)(v5 + 9668);
  v27 = 0;
  if ( *(_DWORD *)(v5 + 284) != v26 )
  {
    v27 = 1;
    *(_DWORD *)(v5 + 284) = v26;
  }
  v28 = *(_DWORD *)(v5 + 8);
  if ( v28 && v27 )
    (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v28 + 32))(v28, 2, 1, v5 + 9668);
  v29 = *(_DWORD *)(v5 + 9680);
  v30 = 0;
  if ( *(_DWORD *)(v5 + 288) != v29 )
  {
    v30 = 1;
    *(_DWORD *)(v5 + 288) = v29;
  }
  v31 = *(_DWORD *)(v5 + 8);
  if ( v31 && v30 )
    (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v31 + 32))(v31, 3, 1, v5 + 9680);
  sub_100508D0((void *)v5, 0);
  (*(void (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)(v5 + 8) + 52))(*(_DWORD *)(v5 + 8), 3, 0);
  v32 = 0;
  do
  {
    result = dword_102398F4;
    v34 = 0;
    if ( *(_DWORD *)v13 != dword_102398F4 )
    {
      v34 = 1;
      *(_DWORD *)v13 = dword_102398F4;
    }
    v35 = *(_DWORD *)(v5 + 8);
    if ( v35 )
    {
      if ( v34 )
        result = (*(int (__stdcall **)(int, signed int, signed int, int *))(*(_DWORD *)v35 + 32))(
                   v35,
                   v32,
                   1,
                   &dword_102398F4);
    }
    ++v32;
    v13 += 4;
  }
  while ( v32 < 4 );
  return result;
}
// 1006D0E0: using guessed type int dword_1006D0E0[];
// 102398F4: using guessed type int dword_102398F4;

//----- (10055FD0) --------------------------------------------------------
int __userpurge sub_10055FD0@<eax>(int a1@<ecx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4)
{
  int result; // eax@1
  unsigned int v5; // ebx@1
  int v6; // edi@1
  int v7; // ebp@2
  int v8; // esi@3
  int v9; // eax@13
  int v10; // eax@14
  int v11; // [sp-10h] [bp-20h]@7
  int v12; // [sp-Ch] [bp-1Ch]@7
  int v13; // [sp-8h] [bp-18h]@7
  int v14; // [sp-4h] [bp-14h]@7

  result = a4;
  v5 = 0;
  v6 = a1;
  if ( *(_DWORD *)(a4 + 4) )
  {
    v7 = 0;
    do
    {
      v8 = v7 + *(_DWORD *)result;
      if ( *(_DWORD *)(v8 + 108) >= 2u )
      {
        if ( *(_DWORD *)(v8 + 32) >= 0x80000000 )
          sub_100562E0(v6, v7 + *(_DWORD *)result);
        sub_10040BC0(v6, dword_1006D0E0[(*(_DWORD *)(v8 + 4) >> 27) & 3]);
        if ( (*(_DWORD *)v8 & 0x7000000) == 0x4000000 )
          sub_10041BF0((void *)v6, 1, 7, 1, 0, (__int64 *)0xFF, 255, 0, 0, 1);
        else
          sub_10041BF0(
            (void *)v6,
            1,
            dword_1006D080[*(_DWORD *)(v8 + 4) >> 29],
            ~(unsigned __int8)(*(_DWORD *)(v8 + 4) >> 26) & 1,
            0,
            (__int64 *)0xFF,
            255,
            0,
            0,
            1);
        if ( *(_DWORD *)v8 & 0x7000000 )
          sub_10041820(
            v6,
            1,
            dword_1006D0A0[*(_DWORD *)(v8 + 8) >> 29],
            dword_1006D0C0[(*(_DWORD *)(v8 + 8) >> 26) & 7],
            v11,
            v12,
            v13,
            v14);
        else
          sub_10041820(v6, 0, 2, 1, v11, v12, v13, v14);
        if ( *(_DWORD *)(v6 + 168) )
        {
          v9 = *(_DWORD *)(v6 + 8);
          *(_DWORD *)(v6 + 168) = 0;
          (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v9 + 92))(v9, 0, 0, 0);
        }
        v10 = sub_10052080((void *)v6, v8, 0);
        sub_10050D40(v10, v6, v7, v6, v8, a2, a3, v8, 0);
        sub_10056110(v6, v7, a2, a3, v8, 1, (*(_DWORD *)v8 & 0x7000000) != 0);
        result = a4;
      }
      ++v5;
      v7 += 112;
    }
    while ( v5 < *(_DWORD *)(result + 4) );
  }
  return result;
}
// 1006D080: using guessed type int dword_1006D080[];
// 1006D0A0: using guessed type int dword_1006D0A0[];
// 1006D0C0: using guessed type int dword_1006D0C0[];
// 1006D0E0: using guessed type int dword_1006D0E0[];

//----- (10056110) --------------------------------------------------------
int __userpurge sub_10056110@<eax>(int a1@<ecx>, int a2@<ebp>, __m128d a3@<xmm3>, __m128d a4@<xmm4>, int a5, char a6, char a7)
{
  int v7; // edi@1
  int v8; // esi@1
  int v9; // eax@4
  int result; // eax@6
  int v11; // eax@13
  int v12; // eax@14
  int v13; // eax@17
  int v14; // ecx@17
  int v15; // [sp+1Ch] [bp-20h]@6
  int v16; // [sp+20h] [bp-1Ch]@6
  int v17; // [sp+24h] [bp-18h]@2
  int v18; // [sp+24h] [bp-18h]@14
  int v19; // [sp+28h] [bp-14h]@14
  int v20; // [sp+34h] [bp-8h]@2
  int v21; // [sp+38h] [bp-4h]@2

  v7 = a5;
  v8 = a1;
  if ( *(_DWORD *)(a5 + 32) < 0x80000000 )
  {
    if ( *(_BYTE *)(a1 + 8801) )
    {
      v20 = *(_DWORD *)(a1 + 308);
      v9 = *(_DWORD *)(a1 + 8);
      *(_BYTE *)(a1 + 8801) = 0;
      a5 = 0;
      v21 = 64;
      (*(void (__stdcall **)(int, _DWORD, signed int, int *, int *, int *))(*(_DWORD *)v9 + 72))(
        v9,
        0,
        1,
        &v20,
        &v21,
        &a5);
      (*(void (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD))(**(_DWORD **)(v8 + 8) + 76))(
        *(_DWORD *)(v8 + 8),
        *(_DWORD *)(v8 + 328),
        42,
        0);
    }
    v17 = *(_DWORD *)(v7 + 104);
  }
  else
  {
    *(_BYTE *)(a1 + 8801) = 1;
    a5 = *(_DWORD *)(v7 + 104);
    v20 = *(_BYTE *)(v7 + 34);
    v21 = *(_DWORD *)(a1 + 8804);
    (*(void (__stdcall **)(_DWORD, _DWORD, signed int, int *, int *, int *))(**(_DWORD **)(a1 + 8) + 72))(
      *(_DWORD *)(a1 + 8),
      0,
      1,
      &v21,
      &v20,
      &a5);
    (*(void (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD))(**(_DWORD **)(v8 + 8) + 76))(
      *(_DWORD *)(v8 + 8),
      *(_DWORD *)(v8 + 8808),
      42,
      *(_DWORD *)(v7 + 104));
    v17 = 0;
  }
  result = (*(int (__stdcall **)(_DWORD, _DWORD, int, _DWORD))(**(_DWORD **)(v8 + 8) + 48))(
             *(_DWORD *)(v8 + 8),
             *(_DWORD *)(v7 + 108),
             v17,
             0);
  if ( a6 && *(_DWORD *)(v7 + 32) & 0x40000000 )
  {
    if ( *(_DWORD *)(v8 + 31572) && (result = *(_DWORD *)v7 & 0x7000000, result != 0x2000000)
      || *(_DWORD *)(v8 + 31576) && (result = *(_DWORD *)v7 & 0x7000000, result == 0x2000000) )
    {
      if ( *(_DWORD *)(v8 + 168) )
      {
        v11 = *(_DWORD *)(v8 + 8);
        *(_DWORD *)(v8 + 168) = 0;
        (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v11 + 92))(v11, 0, 0, 0);
      }
      v12 = sub_10052080((void *)v8, v7, 1u);
      sub_10050D40(v12, v8, a2, v7, v8, a3, a4, v7, 1);
      if ( a7 && *(_DWORD *)v7 & 0x7000000 )
        sub_10041820(
          v8,
          1,
          dword_1006D0A0[*(_DWORD *)(v7 + 16) >> 29],
          dword_1006D0C0[(*(_DWORD *)(v7 + 16) >> 26) & 7],
          v15,
          v16,
          v18,
          v19);
      v13 = *(_DWORD *)(v8 + 8);
      v14 = *(_DWORD *)v13;
      if ( *(_DWORD *)(v7 + 32) < 0x80000000 )
        result = (*(int (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(v14 + 48))(
                   v13,
                   *(_DWORD *)(v7 + 108),
                   *(_DWORD *)(v7 + 104),
                   0);
      else
        result = (*(int (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(v14 + 48))(v13, *(_DWORD *)(v7 + 108), 0, 0);
    }
  }
  return result;
}
// 1006D0A0: using guessed type int dword_1006D0A0[];
// 1006D0C0: using guessed type int dword_1006D0C0[];

//----- (100562E0) --------------------------------------------------------
int __thiscall sub_100562E0(int this, int a2)
{
  signed int v2; // esi@1
  int v3; // edi@1
  int v4; // eax@1
  int v5; // ecx@1
  int v6; // ebx@1
  int v7; // edx@1
  bool v8; // cf@3
  __int128 v9; // xmm0@6
  __int128 v11; // xmm0@8
  signed int v13; // edx@10
  int result; // eax@10
  int v15; // ebx@10
  int v16; // ecx@10
  __int128 v17; // xmm0@11
  int v18; // et1@11

  v2 = 60;
  v3 = this;
  v4 = *(_DWORD *)(this + 31440);
  v5 = this + 9776;
  v6 = *(_DWORD *)(v4 + 1012) + 80 * *(_WORD *)(a2 + 38);
  v7 = *(_DWORD *)(v4 + 1012) + 80 * *(_WORD *)(a2 + 38);
  while ( *(_DWORD *)v5 == *(_DWORD *)v7 )
  {
    v5 += 4;
    v7 += 4;
    v8 = (unsigned int)v2 < 4;
    v2 -= 4;
    if ( v8 )
      goto LABEL_6;
  }
  *(_OWORD *)(v3 + 9776) = *(_OWORD *)v6;
  *(_OWORD *)(v3 + 9792) = *(_OWORD *)(v6 + 16);
  *(_OWORD *)(v3 + 9808) = *(_OWORD *)(v6 + 32);
  *(_OWORD *)(v3 + 9824) = *(_OWORD *)(v6 + 48);
  *(_BYTE *)(v3 + 9696) = 1;
LABEL_6:
  v9 = *(_DWORD *)(v3 + 10948);
  __asm { lahf }
  if ( __SETP__(_AH & 0x44, 0) )
  {
    *(_DWORD *)(v3 + 10948) = *(_DWORD *)(v6 + 64);
    *(_BYTE *)(v3 + 9696) = 1;
  }
  v11 = *(_DWORD *)(v3 + 10952);
  __asm { lahf }
  if ( __SETP__(_AH & 0x44, 0) )
  {
    *(_DWORD *)(v3 + 10952) = *(_DWORD *)(v6 + 68);
    *(_BYTE *)(v3 + 9696) = 1;
  }
  v13 = 0;
  result = *(_DWORD *)(*(_DWORD *)(v3 + 31440) + 1000);
  v15 = result + 16 * *(_WORD *)(a2 + 36);
  v16 = result + 16 * *(_WORD *)(a2 + 36);
  while ( 1 )
  {
    v17 = *(_DWORD *)(v3 + 10928 - v15 + v16);
    v18 = *(_DWORD *)v16;
    __asm { lahf }
    if ( __SETP__(BYTE1(result) & 0x44, 0) )
      break;
    ++v13;
    v16 += 4;
    if ( v13 >= 4 )
      return result;
  }
  *(_DWORD *)(v3 + 10928) = *(_DWORD *)v15;
  *(_DWORD *)(v3 + 10932) = *(_DWORD *)(v15 + 4);
  *(_DWORD *)(v3 + 10936) = *(_DWORD *)(v15 + 8);
  result = *(_DWORD *)(v15 + 12);
  *(_DWORD *)(v3 + 10940) = result;
  *(_BYTE *)(v3 + 9696) = 1;
  return result;
}

//----- (10056440) --------------------------------------------------------
int __userpurge sub_10056440@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4)
{
  int v4; // edi@1
  int v5; // esi@1
  int v6; // edx@4
  char v7; // al@8
  bool v8; // zf@11
  signed int v9; // ecx@11
  signed int v10; // eax@11
  int v12; // edx@24
  int v13; // ecx@24
  __int16 v14; // cx@26
  int v15; // ecx@26
  int v16; // eax@26
  int v17; // eax@30
  int v18; // edx@33
  int (__fastcall *v19)(int, int, int); // ecx@35
  int (__fastcall *v20)(int, int, int); // edx@38
  int v21; // ecx@44
  int v22; // eax@45
  int v23; // eax@46
  int v24; // edx@46
  int v25; // ecx@46
  int v26; // eax@46
  int v27; // ecx@49
  int v28; // eax@50
  int v29; // eax@51
  signed int v30; // ecx@53
  int v31; // ecx@55
  int v32; // edx@64
  unsigned int v33; // ecx@64
  int v34; // eax@64
  unsigned int v35; // eax@67
  int v36; // eax@70
  int v37; // eax@71
  int v38; // ecx@71
  int v39; // eax@71
  int v40; // eax@71
  int (__stdcall *v41)(int); // eax@72
  int v42; // eax@76
  int v43; // ecx@78
  int v44; // ecx@79
  int v45; // edx@83
  unsigned int v46; // ecx@83
  int v47; // eax@83
  unsigned int v48; // eax@86
  int v49; // eax@89
  int v50; // eax@90
  int v51; // ecx@90
  int v52; // eax@90
  int v53; // eax@90
  int v54; // eax@92
  unsigned int v55; // [sp+Ch] [bp-14h]@5
  int v56; // [sp+10h] [bp-10h]@64
  int v57; // [sp+10h] [bp-10h]@83
  int v58; // [sp+14h] [bp-Ch]@60
  int v59; // [sp+18h] [bp-8h]@62
  int v60; // [sp+1Ch] [bp-4h]@62

  v4 = a2;
  v5 = a1;
  if ( *(_DWORD *)(a2 + 31412) )
    sub_1005B6F0(a2, a3);
  if ( v5 != a4 )
  {
    v6 = a4;
    while ( 1 )
    {
      v55 = *(_DWORD *)v5;
      switch ( *(_DWORD *)v5 >> 29 )
      {
        case 0:
          if ( *(_DWORD *)(v4 + 31408) == -1 )
            *(_DWORD *)(v4 + 31408) = (v55 >> 24) & 7;
          v7 = *(_BYTE *)(v4 + 8732);
          if ( !v7 || !byte_102394C8 )
          {
            switch ( *(_DWORD *)(v4 + 31408) )
            {
              case 0:
                v8 = v7 == 0;
                v9 = 7;
                v10 = 65543;
                goto LABEL_16;
              case 1:
                v8 = v7 == 0;
                v9 = 8;
                v10 = 65544;
                goto LABEL_16;
              case 2:
                v8 = v7 == 0;
                v9 = 9;
                v10 = 65545;
                goto LABEL_16;
              case 3:
                v8 = v7 == 0;
                v9 = 10;
                v10 = 65546;
                goto LABEL_16;
              case 4:
                v8 = v7 == 0;
                v9 = 21;
                v10 = 65557;
LABEL_16:
                if ( !v8 )
                  v9 = v10;
                (*(void (__fastcall **)(signed int, _DWORD))(dword_1007CD9C + 384))(v9, 0);
                break;
              default:
                break;
            }
          }
          *(_DWORD *)(v4 + 31408) = -1;
          goto LABEL_20;
        case 1:
          v12 = *(_DWORD *)(v4 + 8704);
          *(_WORD *)(v4 + 31416) = 32 * (*(_WORD *)(v5 + 16) & 0x3F);
          *(_WORD *)(v4 + 31420) = 32 * (*(_WORD *)(v5 + 20) & 0xF);
          v13 = *(_DWORD *)(v5 + 24) & 0x3F;
          if ( (*(_DWORD *)(v12 + 316) & 0x3Fu) < v13 )
            v13 = *(_DWORD *)(v12 + 316) & 0x3F;
          *(_WORD *)(v4 + 31418) = 32 * (v13 + 1);
          v14 = *(_WORD *)(v12 + 318);
          v15 = v14 & 0xF;
          v16 = *(_DWORD *)(v5 + 28) & 0xF;
          if ( v15 < (unsigned int)v16 )
            LOWORD(v16) = v15;
          *(_WORD *)(v4 + 31422) = 32 * (v16 + 1);
          goto LABEL_20;
        case 2:
          *(_DWORD *)(v4 + 31408) = (v55 >> 24) & 7;
          goto LABEL_21;
        case 3:
        case 6:
          goto LABEL_21;
        case 4:
          sub_10056A90(v4, (v55 >> 24) & 7);
          v17 = *(_DWORD *)(v4 + 31408);
          if ( v17 == 1 || v17 == 3 )
          {
            v32 = *(_DWORD *)(v4 + 31404);
            *(_DWORD *)(v4 + 31628) = sub_100577F0;
            v56 = v32;
            v33 = *(_DWORD *)(v32 + 4);
            v34 = *(_DWORD *)(v32 + 8);
            if ( v33 == v34 )
            {
              if ( !v34 )
                *(_DWORD *)(v32 + 8) = 1;
              v35 = *(_DWORD *)(v32 + 8);
              if ( v33 >= v35 )
              {
                do
                  v35 *= 2;
                while ( v33 >= v35 );
                *(_DWORD *)(v32 + 8) = v35;
              }
              v36 = sub_1002D6F7(a3, v4, *(_DWORD *)v32, 112 * *(_DWORD *)(v32 + 8), 0x10u);
              v32 = v56;
              *(_DWORD *)v56 = v36;
            }
            v37 = *(_DWORD *)(v32 + 4);
            *(_DWORD *)(v32 + 4) = v37 + 1;
            v38 = *(_DWORD *)v32 + 112 * v37;
            *(_DWORD *)v38 = *(_DWORD *)v5;
            *(_DWORD *)(v38 + 4) = *(_DWORD *)(v5 + 4) & 0xF8000000;
            v39 = (*(_DWORD *)v38 ^ (*(_DWORD *)(v4 + 31408) << 24)) & 0x7000000;
            *(_DWORD *)(v38 + 32) = 0;
            *(_DWORD *)v38 ^= v39;
            v40 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 32) & 0x1F;
            *(_DWORD *)(v38 + 108) = 0;
            *(_DWORD *)(v38 + 32) = v40 << 24;
            *(_DWORD *)(v38 + 104) = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
            *(_DWORD *)(v38 + 24) = *(_DWORD *)(v4 + 31416);
            *(_DWORD *)(v38 + 28) = *(_DWORD *)(v4 + 31420);
LABEL_20:
            v6 = a4;
LABEL_21:
            v5 += 32;
            goto LABEL_22;
          }
          if ( v55 & 8 && ((v18 = (v55 >> 4) & 3, v18 == 1) || v55 & 0x40) )
          {
            v19 = sub_100594B0;
            if ( (unsigned int)v18 < 2 )
              v19 = sub_10059990;
            *(_DWORD *)(v4 + 31628) = v19;
          }
          else
          {
            v20 = sub_10059270;
            if ( (v55 & 0x30) < 0x20 )
              v20 = sub_10059760;
            *(_DWORD *)(v4 + 31628) = v20;
          }
          if ( v55 & 0x40 )
          {
            if ( !dword_10239468 && *(_DWORD *)(v4 + 31408) == 2
              || (v27 = *(_DWORD *)(v4 + 31404), !*(_DWORD *)(v27 + 4))
              || (v28 = sub_1000A640(v27), !sub_10009880(v28, v5, v4 + 31416)) )
            {
              v24 = sub_1000A5F0(*(_DWORD *)(v4 + 31404), a3, v4);
              *(_DWORD *)v24 = *(_DWORD *)v5;
              *(_DWORD *)(v24 + 4) = *(_DWORD *)(v5 + 4);
              *(_DWORD *)(v24 + 8) = *(_DWORD *)(v5 + 8);
              *(_DWORD *)(v24 + 12) = *(_DWORD *)(v5 + 12);
              *(_DWORD *)(v24 + 16) = *(_DWORD *)(v5 + 16);
              *(_DWORD *)(v24 + 20) = *(_DWORD *)(v5 + 20);
              v29 = (*(_DWORD *)v24 ^ (*(_DWORD *)(v4 + 31408) << 24)) & 0x7000000;
              *(_DWORD *)(v24 + 32) = 0x20000000;
              *(_DWORD *)v24 ^= v29;
              if ( *(_DWORD *)(v5 + 8) != *(_DWORD *)(v5 + 16) || *(_DWORD *)(v5 + 12) != *(_DWORD *)(v5 + 20) )
                v30 = 0x40000000;
              else
                v30 = 0;
              v31 = v30 | 0x20000000;
              *(_DWORD *)(v24 + 32) = v31;
              v26 = v31 ^ (v31 ^ (*(_DWORD *)(*(_DWORD *)(v4 + 31396) + 32) << 24)) & 0x1F000000;
              goto LABEL_56;
            }
          }
          else if ( !dword_10239468 && *(_DWORD *)(v4 + 31408) == 2
                 || (v21 = *(_DWORD *)(v4 + 31404), !*(_DWORD *)(v21 + 4))
                 || (v22 = sub_1000A640(v21), !sub_10009820(v22, v5, v4 + 31416)) )
          {
            v23 = sub_1000A5F0(*(_DWORD *)(v4 + 31404), a3, v4);
            v24 = v23;
            *(_DWORD *)v23 = *(_DWORD *)v5;
            *(_DWORD *)(v23 + 4) = *(_DWORD *)(v5 + 4);
            *(_DWORD *)(v23 + 8) = *(_DWORD *)(v5 + 8);
            *(_DWORD *)(v23 + 12) = *(_DWORD *)(v5 + 12);
            v25 = (*(_DWORD *)v23 ^ (*(_DWORD *)(v4 + 31408) << 24)) & 0x7000000;
            *(_DWORD *)(v23 + 32) = 0x20000000;
            *(_DWORD *)v24 ^= v25;
            v26 = (*(_DWORD *)(*(_DWORD *)(v4 + 31396) + 32) & 0x1F | 0x20) << 24;
LABEL_56:
            *(_DWORD *)(v24 + 32) = v26;
            *(_DWORD *)(v24 + 108) = 0;
            *(_DWORD *)(v24 + 104) = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
            *(_DWORD *)(v24 + 24) = *(_DWORD *)(v4 + 31416);
            *(_DWORD *)(v24 + 28) = *(_DWORD *)(v4 + 31420);
            goto LABEL_57;
          }
LABEL_57:
          if ( (v55 & 0x30) != 32 )
            goto LABEL_20;
          if ( (v55 & 0xC) != 12 && !(v55 & 0x40) )
          {
            sub_10009480((int)&v58, *(__m128 *)(v5 + 16));
            *(_DWORD *)(v4 + 31424) = v58;
            goto LABEL_20;
          }
          v6 = a4;
          v5 += 32;
          if ( v5 != a4 )
          {
            sub_10009480((int)&v59, *(__m128 *)v5);
            sub_10009480((int)&v60, *(__m128 *)(v5 + 16));
            *(_DWORD *)(v4 + 31424) = v59;
            *(_DWORD *)(v4 + 31428) = v60;
            goto LABEL_21;
          }
          *(_DWORD *)(v4 + 31624) = sub_10057000;
LABEL_22:
          if ( v5 == v6 )
            return v5;
          break;
        case 5:
          sub_10056A90(v4, (v55 >> 24) & 7);
          v41 = sub_10058500;
          if ( v55 & 8 )
            v41 = sub_10057C90;
          *(_DWORD *)(v4 + 31628) = v41;
          if ( !dword_10239468 && *(_DWORD *)(v4 + 31408) == 2
            || (v42 = *(_DWORD *)(v4 + 31404), !*(_DWORD *)(v42 + 4))
            || (!*(_DWORD *)(v42 + 8) ? (v44 = 0) : (v43 = *(_DWORD *)(v42 + 4)) == 0 ? (v44 = *(_DWORD *)v42) : (v44 = *(_DWORD *)v42 - 112 + 112 * v43),
                !sub_10009820(v44, v5, v4 + 31416)) )
          {
            v45 = *(_DWORD *)(v4 + 31404);
            v57 = v45;
            v46 = *(_DWORD *)(v45 + 4);
            v47 = *(_DWORD *)(v45 + 8);
            if ( v46 == v47 )
            {
              if ( !v47 )
                *(_DWORD *)(v45 + 8) = 1;
              v48 = *(_DWORD *)(v45 + 8);
              if ( v46 >= v48 )
              {
                do
                  v48 *= 2;
                while ( v46 >= v48 );
                *(_DWORD *)(v45 + 8) = v48;
              }
              v49 = sub_1002D6F7(a3, v4, *(_DWORD *)v45, 112 * *(_DWORD *)(v45 + 8), 0x10u);
              v45 = v57;
              *(_DWORD *)v57 = v49;
            }
            v50 = *(_DWORD *)(v45 + 4);
            *(_DWORD *)(v45 + 4) = v50 + 1;
            v51 = *(_DWORD *)v45 + 112 * v50;
            *(_DWORD *)v51 = *(_DWORD *)v5;
            *(_DWORD *)(v51 + 4) = *(_DWORD *)(v5 + 4);
            *(_DWORD *)(v51 + 8) = *(_DWORD *)(v5 + 8);
            *(_DWORD *)(v51 + 12) = *(_DWORD *)(v5 + 12);
            v52 = (*(_DWORD *)v51 ^ (*(_DWORD *)(v4 + 31408) << 24)) & 0x7000000;
            *(_DWORD *)(v51 + 32) = 0;
            *(_DWORD *)v51 ^= v52;
            v53 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 32) & 0x1F;
            *(_DWORD *)(v51 + 108) = 0;
            *(_DWORD *)(v51 + 32) = v53 << 24;
            *(_DWORD *)(v51 + 104) = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
            *(_DWORD *)(v51 + 24) = *(_DWORD *)(v4 + 31416);
            *(_DWORD *)(v51 + 28) = *(_DWORD *)(v4 + 31420);
          }
          *(_DWORD *)(v4 + 31432) = *(_DWORD *)(v5 + 16);
          *(_DWORD *)(v4 + 31436) = *(_DWORD *)(v5 + 20);
          goto LABEL_20;
        case 7:
          v54 = (*(int (__fastcall **)(int, int, int))(v4 + 31628))(v4, v5, a4);
          v6 = a4;
          v5 = v54;
          goto LABEL_22;
      }
    }
  }
  return v5;
}
// 100577F0: using guessed type int __stdcall sub_100577F0(int);
// 10057C90: using guessed type int __stdcall sub_10057C90(int);
// 10058500: using guessed type int __stdcall sub_10058500(int);
// 1007CD9C: using guessed type int dword_1007CD9C;
// 10239468: using guessed type int dword_10239468;
// 102394C8: using guessed type char byte_102394C8;

//----- (10056A90) --------------------------------------------------------
void __thiscall sub_10056A90(int this, int a2)
{
  if ( *(_DWORD *)(this + 31408) == -1 )
  {
    *(_DWORD *)(this + 31408) = a2;
    if ( a2 )
    {
      switch ( a2 )
      {
        case 2:
          *(_DWORD *)(this + 31404) = *(_DWORD *)(this + 31396)
                                    + 4 * (3 * *(_DWORD *)(*(_DWORD *)(this + 31396) + 32) + 106);
          break;
        case 4:
          *(_DWORD *)(this + 31404) = *(_DWORD *)(this + 31396)
                                    + 4 * (3 * *(_DWORD *)(*(_DWORD *)(this + 31396) + 32) + 202);
          break;
        case 1:
          *(_DWORD *)(this + 31404) = *(_DWORD *)(this + 31396)
                                    + 4 * (3 * *(_DWORD *)(*(_DWORD *)(this + 31396) + 32) + 58);
          break;
        case 3:
          *(_DWORD *)(this + 31404) = *(_DWORD *)(this + 31396)
                                    + 4 * (3 * *(_DWORD *)(*(_DWORD *)(this + 31396) + 32) + 154);
          break;
      }
    }
    else
    {
      *(_DWORD *)(this + 31404) = *(_DWORD *)(this + 31396) + 4 * (3 * *(_DWORD *)(*(_DWORD *)(this + 31396) + 32) + 10);
    }
  }
}

//----- (10056B50) --------------------------------------------------------
int __userpurge sub_10056B50@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4)
{
  int v4; // edi@1
  int v5; // esi@1
  int result; // eax@2
  int v7; // ebp@5
  int v8; // ecx@11
  int v9; // ebx@15
  int v10; // ebx@20

  v4 = a2;
  v5 = a1;
  if ( *(_BYTE *)(a2 + 9612) )
  {
    result = a4;
  }
  else
  {
    if ( *(_DWORD *)(a2 + 31412) )
      sub_1005B6F0(a2, a3);
    v7 = a4;
    while ( v5 != v7 )
    {
      if ( *(_DWORD *)v5 & 0x8000000 )
      {
        if ( (*(_DWORD *)v5 & 0xF00) == 3840 )
        {
          if ( !byte_102394C8 )
          {
            if ( (*(_DWORD *)(v5 + 4) >> 29) & 3 )
              (*(void (__fastcall **)(int, int))(dword_1007CD9C + 384))(
                ((*(_DWORD *)(v5 + 4) >> 29) & 3) + 0x20000,
                10 * *(_DWORD *)(v4 + 9620));
          }
          v8 = *(_DWORD *)(v4 + 8720);
          v7 = v8 + ((*(_DWORD *)(v5 + 4) + *(_DWORD *)(v5 + 12)) & 0x1FFFFFF);
          v5 = v8 + (*(_DWORD *)(v5 + 4) & 0x1FFFFFF);
        }
        else
        {
          v5 = (*(int (__thiscall **)(int, int, int))(v4 + 4 * ((*(_DWORD *)v5 >> 8) & 0xF) + 48548))(v4, v5, v7);
        }
        if ( *(_BYTE *)(v4 + 9612) )
          break;
      }
      else
      {
        v9 = v5 + 32;
        if ( *(_DWORD *)(v4 + 31412) )
          sub_1005B6F0(v4, v9);
        for ( ; v5 != v9; v5 = (*(int (__fastcall **)(int, int, int))(v4 + 31624))(v4, v5, v9) )
          ;
        v5 = v9;
        if ( *(int (__userpurge **)@<eax>(int@<edx>, int@<ecx>, int@<ebx>, int))(v4 + 31624) != sub_10056440 )
        {
          v10 = v9 + 32;
          if ( *(_DWORD *)(v4 + 31412) )
            sub_1005B6F0(v4, v10);
          for ( ; v5 != v10; v5 = (*(int (__fastcall **)(int, int, int))(v4 + 31624))(v4, v5, v10) )
            ;
          v5 = v10;
        }
      }
    }
    result = v5;
  }
  return result;
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 102394C8: using guessed type char byte_102394C8;

//----- (10056CA0) --------------------------------------------------------
int __fastcall sub_10056CA0(int a1, int a2)
{
  int v2; // ebx@1
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // ebp@1
  int v6; // edx@1
  int v7; // ebx@2
  int v8; // edi@4
  unsigned int v9; // eax@6
  int v10; // eax@10
  bool v11; // al@10
  unsigned int v12; // ecx@13
  int v13; // ecx@15
  int v14; // eax@16
  int v15; // ecx@16
  unsigned int v16; // ebp@19
  int v17; // edx@22
  signed int v18; // ecx@22
  int v19; // eax@24
  int v20; // ecx@26
  int v21; // eax@28
  int v22; // eax@30
  int v23; // esi@30
  signed int v24; // ecx@35
  int v25; // edx@46
  char v27; // [sp+12h] [bp-26h]@1
  char v28; // [sp+13h] [bp-25h]@5
  int v29; // [sp+14h] [bp-24h]@1
  int v30; // [sp+18h] [bp-20h]@1
  int v31; // [sp+1Ch] [bp-1Ch]@1
  signed int v32; // [sp+20h] [bp-18h]@4
  int v33; // [sp+24h] [bp-14h]@1
  int v34; // [sp+28h] [bp-10h]@1
  int v35; // [sp+2Ch] [bp-Ch]@1
  int v36; // [sp+30h] [bp-8h]@0
  int v37; // [sp+34h] [bp-4h]@0

  v2 = a1;
  v3 = 0;
  v34 = 0;
  v4 = a2;
  v30 = 0;
  v5 = 0;
  v35 = v2;
  v6 = 0;
  v33 = 0;
  v31 = 0;
  v29 = 0;
  v27 = 0;
  if ( *(_DWORD *)(v2 + 31412) )
    v7 = -1;
  else
    v7 = *(_DWORD *)(v2 + 31408);
  v32 = 0;
  v8 = v4 + 32;
LABEL_5:
  v28 = 0;
  if ( v4 != v8 )
  {
    while ( 1 )
    {
      v9 = *(_DWORD *)v4;
      if ( !(*(_DWORD *)v4 & 0x8000000) )
        break;
      if ( ((v9 >> 8) & 0xF) == 7 )
      {
        ++v31;
        if ( v7 == -1 )
          v7 = (v9 >> 24) & 7;
        v16 = *(_DWORD *)(v4 + 28);
        if ( v16 >= 0x100000 )
          v27 = 1;
        else
          v33 += v16;
        v17 = *(_DWORD *)(v4 + 24);
        v18 = 4;
        if ( !(v17 & 2) )
          v18 = 1;
        v19 = v18 + 2;
        if ( !(v17 & 8) )
          v19 = v18;
        v20 = v19 + 2;
        if ( !(v17 & 0x40) )
          v20 = v19;
        v21 = v20 + 4;
        if ( !(v17 & 0x100) )
          v21 = v20;
        v22 = v16 * v21;
        v5 = v33;
        v23 = v4 + 4 * v22;
        v11 = v27;
        v4 = v23 + 32;
      }
      else
      {
        if ( ((v9 >> 8) & 0xF) == 8 )
        {
          v37 = v8;
          v36 = v4 + 32;
          v15 = *(_DWORD *)(v35 + 8720);
          v14 = *(_DWORD *)(v4 + 16);
          v28 = 1;
          v8 = v15 + ((v14 + *(_DWORD *)(v4 + 24)) & 0x1FFFFFF);
          v4 = v15 + (v14 & 0x1FFFFFF);
LABEL_59:
          v11 = v27;
          goto LABEL_60;
        }
        if ( ((v9 >> 8) & 0xF) == 15 )
        {
          if ( v28 || v4 + 32 != v8 )
          {
            v11 = 1;
            v27 = 1;
LABEL_63:
            v6 = v31;
            v3 = v29;
            if ( v28 && !v11 )
            {
              v4 = v36;
              v8 = v37;
              goto LABEL_5;
            }
            goto LABEL_66;
          }
          v12 = *(_DWORD *)(v4 + 4);
          v34 |= v12;
          if ( v12 & 0x60000000 )
            (*(void (__fastcall **)(unsigned int, int))(dword_1007CD9C + 384))(
              ((v12 >> 29) & 3) + 0x20000,
              10 * (v5 + v31 + v30 + v29));
          v13 = *(_DWORD *)(v35 + 8720);
          v8 = v13 + ((*(_DWORD *)(v4 + 4) + *(_DWORD *)(v4 + 12)) & 0x1FFFFFF);
          v4 = v13 + (*(_DWORD *)(v4 + 4) & 0x1FFFFFF);
          goto LABEL_59;
        }
        v10 = dword_1006EC90[(v9 >> 8) & 0xF];
        v4 += 4 * v10;
        v11 = v10 == 0;
        v27 = v11;
      }
      if ( v11 )
        goto LABEL_63;
LABEL_60:
      if ( v4 == v8 )
        goto LABEL_63;
      v6 = v31;
    }
    v4 += 32;
    switch ( v9 >> 29 )
    {
      case 0u:
        switch ( v7 )
        {
          case 0:
            v24 = 65543;
            goto LABEL_40;
          case 1:
            v24 = 65544;
            goto LABEL_40;
          case 2:
            v24 = 65545;
            goto LABEL_40;
          case 3:
            v24 = 65546;
            goto LABEL_40;
          case 4:
            v24 = 65557;
LABEL_40:
            (*(void (__fastcall **)(signed int, int))(dword_1007CD9C + 384))(v24, 10 * (v5 + v6 + v30 + v29));
            break;
          default:
            break;
        }
        v7 = -1;
        break;
      case 1u:
      case 2u:
      case 3u:
      case 6u:
        goto LABEL_59;
      case 4u:
        ++v29;
        if ( v7 == -1 )
          v7 = (v9 >> 24) & 7;
        if ( v7 == 1 || v7 == 3 )
          goto LABEL_71;
        v25 = v9 & 0x30;
        if ( v25 == 32 && ((v9 & 0xC) == 12 || v9 & 0x40) )
          v4 += 32;
        if ( v9 & 8 && (v25 == 16 || v9 & 0x40) )
LABEL_71:
          v32 = 8;
        else
          v32 = 0;
        break;
      case 5u:
        ++v29;
        if ( v7 == -1 )
          v7 = (v9 >> 24) & 7;
        v32 = 8;
        break;
      case 7u:
        ++v30;
        v4 += 4 * v32;
        break;
    }
    goto LABEL_59;
  }
LABEL_66:
  (*(void (__fastcall **)(signed int, int))(dword_1007CD9C + 384))(131076, 10 * (v5 + v6 + v3 + v30));
  if ( v27 )
    v5 = 0;
  return v5 | v34 & 0x60000000;
}
// 1006EC90: using guessed type int dword_1006EC90[];
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (10057000) --------------------------------------------------------
int __fastcall sub_10057000(int a1, int a2, int a3)
{
  __m128 v3; // xmm0@1
  __m128i v4; // xmm0@1
  __m128i v5; // xmm0@1
  int v6; // ST00_4@1
  __m128 v7; // xmm0@1
  __m128i v8; // xmm0@1
  __m128i v9; // xmm0@1

  *(_DWORD *)(a1 + 31624) = sub_10056440;
  v3 = _mm_mul_ps(
         _mm_min_ps(_mm_max_ps(*(__m128 *)a2, (__m128)xmmword_1006DB10), (__m128)xmmword_1006DDB0),
         (__m128)xmmword_1006EC80);
  v4 = _mm_cvtps_epi32(_mm_shuffle_ps(v3, v3, -58));
  v5 = _mm_packs_epi32(v4, v4);
  v6 = (unsigned __int128)_mm_packus_epi16(v5, v5);
  v7 = _mm_mul_ps(
         _mm_min_ps(_mm_max_ps(*(__m128 *)(a2 + 16), (__m128)xmmword_1006DB10), (__m128)xmmword_1006DDB0),
         (__m128)xmmword_1006EC80);
  *(_DWORD *)(a1 + 31424) = v6;
  v8 = _mm_cvtps_epi32(_mm_shuffle_ps(v7, v7, -58));
  v9 = _mm_packs_epi32(v8, v8);
  *(_DWORD *)(a1 + 31428) = (unsigned __int128)_mm_packus_epi16(v9, v9);
  return a2 + 32;
}
// 1006DB10: using guessed type __int128 xmmword_1006DB10;
// 1006DDB0: using guessed type __int128 xmmword_1006DDB0;
// 1006EC80: using guessed type __int128 xmmword_1006EC80;

//----- (10057090) --------------------------------------------------------
int __thiscall sub_10057090(int this)
{
  int v1; // ebx@1
  int v2; // esi@1
  int v3; // ecx@1
  unsigned int v4; // edi@1
  int v5; // eax@1
  int v6; // edx@1
  int v7; // eax@4
  unsigned int v8; // esi@4
  unsigned int v9; // ecx@4
  unsigned int v10; // eax@7
  int v11; // eax@11
  float v12; // xmm3_4@11
  float v13; // xmm2_4@11
  int v14; // ebp@11
  unsigned int v15; // edx@11
  char *v16; // edi@11
  unsigned int v17; // eax@11
  unsigned int v18; // ecx@11
  unsigned int v19; // eax@11
  int v20; // ecx@11
  int v21; // ebp@11
  int v22; // ebx@11
  int v23; // ebp@11
  int v24; // ecx@12
  int v25; // eax@12
  unsigned int v26; // esi@12
  int v27; // ecx@12
  int v28; // eax@12
  int v29; // eax@12
  int v30; // ecx@12
  float v31; // xmm0_4@12
  int v32; // eax@12
  float v33; // xmm1_4@12
  int v34; // ecx@12
  unsigned int v35; // ecx@14
  unsigned int v36; // esi@16
  int v37; // eax@16
  int v38; // ecx@16
  int v39; // edx@16
  __m128d v40; // xmm0@21
  unsigned int v41; // eax@21
  __m128d v42; // xmm0@21
  int v43; // edi@21
  int v44; // ebx@21
  unsigned int v45; // ecx@21
  int v46; // eax@21
  unsigned int v47; // eax@24
  int v48; // ecx@28
  int v49; // edi@28
  unsigned int v50; // ecx@28
  int v51; // eax@28
  unsigned int v52; // eax@31
  int v53; // ecx@35
  int v54; // edi@35
  unsigned int v55; // ecx@35
  int v56; // eax@35
  unsigned int v57; // eax@38
  int v58; // ecx@42
  int v59; // edi@42
  unsigned int v60; // ecx@42
  int v61; // eax@42
  unsigned int v62; // eax@45
  int v63; // ecx@49
  int v64; // edi@49
  unsigned int v65; // ecx@49
  int v66; // eax@49
  unsigned int v67; // eax@52
  int v68; // edx@56
  int v69; // ecx@56
  int v70; // ebx@56
  int v71; // edi@56
  unsigned int v72; // ecx@56
  int v73; // eax@56
  unsigned int v74; // eax@59
  int v75; // edx@63
  int v76; // ecx@63
  int v77; // ebx@63
  int v78; // edi@63
  unsigned int v79; // ecx@63
  int v80; // eax@63
  unsigned int v81; // eax@66
  int v82; // edx@70
  int v83; // ecx@70
  int v84; // ebx@70
  int v85; // esi@70
  unsigned int v86; // ecx@70
  int v87; // eax@70
  unsigned int v88; // eax@73
  int v89; // edx@77
  int v90; // ecx@77
  int result; // eax@77
  signed int v92; // [sp+10h] [bp-2DCh]@11
  int v93; // [sp+14h] [bp-2D8h]@11
  unsigned int v94; // [sp+18h] [bp-2D4h]@11
  char v95; // [sp+1Ch] [bp-2D0h]@11
  int v96; // [sp+20h] [bp-2CCh]@1
  int v97; // [sp+24h] [bp-2C8h]@11
  __int128 v98; // [sp+28h] [bp-2C4h]@0
  __int128 v99; // [sp+38h] [bp-2B4h]@0
  __int128 v100; // [sp+48h] [bp-2A4h]@0
  __int128 v101; // [sp+58h] [bp-294h]@0
  __int128 v102; // [sp+68h] [bp-284h]@0
  __int128 v103; // [sp+78h] [bp-274h]@0
  __int128 v104; // [sp+88h] [bp-264h]@0
  __int128 v105; // [sp+98h] [bp-254h]@0
  __int128 v106; // [sp+A8h] [bp-244h]@0
  __int128 v107; // [sp+B8h] [bp-234h]@0
  __int128 v108; // [sp+C8h] [bp-224h]@0
  __int128 v109; // [sp+D8h] [bp-214h]@0
  __int128 v110; // [sp+E8h] [bp-204h]@0
  __int128 v111; // [sp+F8h] [bp-1F4h]@0
  __int128 v112; // [sp+108h] [bp-1E4h]@0
  __int128 v113; // [sp+118h] [bp-1D4h]@0
  char v114; // [sp+228h] [bp-C4h]@21
  char v115; // [sp+230h] [bp-BCh]@11

  v1 = this;
  v2 = *(_DWORD *)(this + 8704);
  v96 = this;
  v3 = *(_DWORD *)(v2 + 140);
  v4 = (*(_DWORD *)(v96 + 8716) - 1) & ((*(_DWORD *)(v2 + 32) & 0xF00000) + 4
                                                                          * ((*(_DWORD *)(v2 + 140) >> 3) & 0x1FFFFF));
  v5 = (*(_DWORD *)(v2 + 140) >> 24) & 7;
  v6 = v5 + 3;
  if ( v3 & 0x8000000 && !(*(_DWORD *)(v2 + 116) & 0x100) )
    v6 += v5;
  *(_DWORD *)(v1 + 31448) = 0;
  v7 = *(_DWORD *)(v1 + 31452);
  v8 = v4 + 4 * (v6 * (v3 & 7) + 3);
  v9 = *(_DWORD *)(v1 + 31448);
  if ( v9 == v7 )
  {
    if ( !v7 )
      *(_DWORD *)(v1 + 31452) = 1;
    v10 = *(_DWORD *)(v1 + 31452);
    if ( v9 >= v10 )
    {
      do
        v10 *= 2;
      while ( v9 >= v10 );
      *(_DWORD *)(v1 + 31452) = v10;
    }
    *(_DWORD *)(v1 + 31444) = sub_1002D6F7(v1, v4, *(_DWORD *)(v1 + 31444), 112 * *(_DWORD *)(v1 + 31452), 0x10u);
  }
  v11 = *(_DWORD *)(v1 + 31448);
  v12 = 0.0;
  v13 = 4.3702378e30;
  *(_DWORD *)(v1 + 31448) = v11 + 1;
  v14 = *(_DWORD *)(v1 + 31444) + 112 * v11;
  v97 = v14;
  v92 = 3;
  *(_DWORD *)(v14 + 4) = *(_DWORD *)(((v4 >> 20) & 4)
                                   + (v4 & (*(_DWORD *)(v1 + 8716) - 8388605))
                                   + 2 * (v4 & 0x3FFFFC)
                                   + *(_DWORD *)(v1 + 8708));
  v15 = v4 + 8;
  *(_DWORD *)(v14 + 8) = *(_DWORD *)((((v4 + 4) >> 20) & 4)
                                   + ((v4 + 4) & (*(_DWORD *)(v1 + 8716) - 8388605))
                                   + 2 * ((v4 + 4) & 0x3FFFFC)
                                   + *(_DWORD *)(v1 + 8708));
  v16 = &v115;
  *(_DWORD *)(v14 + 12) = *(_DWORD *)(((v15 >> 20) & 4)
                                    + (v15 & (*(_DWORD *)(v1 + 8716) - 8388605))
                                    + 2 * (v15 & 0x3FFFFC)
                                    + *(_DWORD *)(v1 + 8708));
  v17 = *(_DWORD *)(v14 + 4);
  v18 = v17;
  v19 = v17 & 0x3FFFFFF | 0xE4000000;
  *(_DWORD *)(v14 + 32) = 0;
  v20 = (v18 >> 22) & 0xF;
  *(_DWORD *)(v14 + 4) = v19;
  *(_DWORD *)v14 = v20;
  v94 = v19;
  v95 = v20;
  v93 = v20 & 8;
  *(_DWORD *)(v14 + 104) = *(_DWORD *)(*(_DWORD *)(v1 + 31440) + 1256);
  v21 = *(_DWORD *)(v1 + 8716);
  v22 = *(_DWORD *)(v1 + 8708);
  v23 = v21 - 8388605;
  do
  {
    v24 = ((v8 >> 20) & 4) + v22 + (v8 & v23);
    v25 = v8 & 0x3FFFFC;
    v26 = v8 + 4;
    *((_DWORD *)v16 - 2) = *(_DWORD *)(v24 + 2 * v25);
    v27 = ((v26 >> 20) & 4) + v22 + (v26 & v23);
    v28 = v26 & 0x3FFFFC;
    v26 += 4;
    *((_DWORD *)v16 - 1) = *(_DWORD *)(v27 + 2 * v28);
    v29 = v26 & 0x3FFFFC;
    v30 = ((v26 >> 20) & 4) + v22 + (v26 & v23);
    v8 = v26 + 4;
    *(_DWORD *)v16 = *(_DWORD *)(v30 + 2 * v29);
    v31 = fminf(*(float *)v16, v13);
    v32 = v8 & 0x3FFFFC;
    v33 = fmaxf(*(float *)v16, v12);
    v34 = ((v8 >> 20) & 4) + v22 + (v8 & v23);
    v13 = v31;
    v12 = v33;
    if ( !v93 )
    {
      *((_DWORD *)v16 + 1) = *(_DWORD *)(v34 + 2 * v32);
      goto LABEL_19;
    }
    if ( v94 & 0x400000 )
    {
      v35 = *(_DWORD *)(v34 + 2 * v32);
      *((_DWORD *)v16 + 3) = v35 >> 16;
      *((_DWORD *)v16 + 4) = v35;
    }
    else
    {
      v8 += 4;
      *((_DWORD *)v16 + 3) = *(_DWORD *)(v34 + 2 * v32);
      *((_DWORD *)v16 + 4) = *(_DWORD *)(((v8 >> 20) & 4) + v22 + (v8 & v23) + 2 * (v8 & 0x3FFFFC));
    }
    v36 = v8 + 4;
    v37 = v36 & 0x3FFFFC;
    v38 = v36 & v23;
    v39 = v22 + ((v36 >> 20) & 4);
    v8 = v36 + 4;
    *((_DWORD *)v16 + 1) = *(_DWORD *)(v38 + v39 + 2 * v37);
    if ( v95 & 4 )
    {
      *((_DWORD *)v16 + 2) = *(_DWORD *)(((v8 >> 20) & 4) + v22 + (v8 & v23) + 2 * (v8 & 0x3FFFFC));
LABEL_19:
      v8 += 4;
    }
    v16 += 64;
    --v92;
  }
  while ( v92 );
  *(_QWORD *)&v98 = 0i64;
  LODWORD(v106) = 0;
  *(float *)(*(_DWORD *)(v96 + 31440) + 8) = v31;
  *(float *)(*(_DWORD *)(v96 + 31440) + 12) = v33;
  v40 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(v96 + 31456));
  v40.m128d_f64[0] = v40.m128d_f64[0] + *(double *)&qword_1006EEC0[*(_DWORD *)(v96 + 31456) >> 31];
  v41 = *(_DWORD *)(v96 + 31460);
  LODWORD(v110) = (unsigned __int128)_mm_cvtpd_ps(v40);
  *(_QWORD *)&v102 = (unsigned int)v110;
  v42 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v41);
  v42.m128d_f64[0] = v42.m128d_f64[0] + *(double *)&qword_1006EEC0[v41 >> 31];
  DWORD1(v110) = (unsigned __int128)_mm_cvtpd_ps(v42);
  DWORD1(v106) = DWORD1(v110);
  sub_10058E10((int)&v114, (*(_DWORD *)v97 >> 1) & 1);
  v43 = *(_DWORD *)(v96 + 31440);
  v44 = *(_DWORD *)(v43 + 1244);
  v45 = *(_DWORD *)(v43 + 1244);
  v46 = *(_DWORD *)(v43 + 1248);
  if ( v45 == v46 )
  {
    if ( !v46 )
      *(_DWORD *)(v43 + 1248) = 1;
    v47 = *(_DWORD *)(v43 + 1248);
    if ( v45 >= v47 )
    {
      do
        v47 *= 2;
      while ( v45 >= v47 );
      *(_DWORD *)(v43 + 1248) = v47;
    }
    *(_DWORD *)(v43 + 1240) = sub_1002D6F7(v44, v43, *(_DWORD *)(v43 + 1240), *(_DWORD *)(v43 + 1248) << 6, 0x10u);
  }
  v48 = *(_DWORD *)(v43 + 1240) + ((*(_DWORD *)(v43 + 1244))++ << 6);
  *(_OWORD *)v48 = v98;
  *(_OWORD *)(v48 + 16) = v99;
  *(_OWORD *)(v48 + 32) = v100;
  *(_OWORD *)(v48 + 48) = v101;
  v49 = *(_DWORD *)(v96 + 31440) + 1240;
  v50 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1244);
  v51 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1248);
  if ( v50 == v51 )
  {
    if ( !v51 )
      *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1248) = 1;
    v52 = *(_DWORD *)(v49 + 8);
    if ( v50 >= v52 )
    {
      do
        v52 *= 2;
      while ( v50 >= v52 );
      *(_DWORD *)(v49 + 8) = v52;
    }
    *(_DWORD *)v49 = sub_1002D6F7(v44, v49, *(_DWORD *)v49, *(_DWORD *)(v49 + 8) << 6, 0x10u);
  }
  v53 = *(_DWORD *)v49 + ((*(_DWORD *)(v49 + 4))++ << 6);
  *(_OWORD *)v53 = v102;
  *(_OWORD *)(v53 + 16) = v103;
  *(_OWORD *)(v53 + 32) = v104;
  *(_OWORD *)(v53 + 48) = v105;
  v54 = *(_DWORD *)(v96 + 31440) + 1240;
  v55 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1244);
  v56 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1248);
  if ( v55 == v56 )
  {
    if ( !v56 )
      *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1248) = 1;
    v57 = *(_DWORD *)(v54 + 8);
    if ( v55 >= v57 )
    {
      do
        v57 *= 2;
      while ( v55 >= v57 );
      *(_DWORD *)(v54 + 8) = v57;
    }
    *(_DWORD *)v54 = sub_1002D6F7(v44, v54, *(_DWORD *)v54, *(_DWORD *)(v54 + 8) << 6, 0x10u);
  }
  v58 = *(_DWORD *)v54 + ((*(_DWORD *)(v54 + 4))++ << 6);
  *(_OWORD *)v58 = v106;
  *(_OWORD *)(v58 + 16) = v107;
  *(_OWORD *)(v58 + 32) = v108;
  *(_OWORD *)(v58 + 48) = v109;
  v59 = *(_DWORD *)(v96 + 31440) + 1240;
  v60 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1244);
  v61 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1248);
  if ( v60 == v61 )
  {
    if ( !v61 )
      *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1248) = 1;
    v62 = *(_DWORD *)(v59 + 8);
    if ( v60 >= v62 )
    {
      do
        v62 *= 2;
      while ( v60 >= v62 );
      *(_DWORD *)(v59 + 8) = v62;
    }
    *(_DWORD *)v59 = sub_1002D6F7(v44, v59, *(_DWORD *)v59, *(_DWORD *)(v59 + 8) << 6, 0x10u);
  }
  v63 = *(_DWORD *)v59 + ((*(_DWORD *)(v59 + 4))++ << 6);
  *(_OWORD *)v63 = v110;
  *(_OWORD *)(v63 + 16) = v111;
  *(_OWORD *)(v63 + 32) = v112;
  *(_OWORD *)(v63 + 48) = v113;
  v64 = *(_DWORD *)(v96 + 31440) + 1252;
  v65 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1256);
  v66 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1260);
  if ( v65 == v66 )
  {
    if ( !v66 )
      *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1260) = 1;
    v67 = *(_DWORD *)(v64 + 8);
    if ( v65 >= v67 )
    {
      do
        v67 *= 2;
      while ( v65 >= v67 );
      *(_DWORD *)(v64 + 8) = v67;
    }
    *(_DWORD *)v64 = sub_1002D6F7(v44, v64, *(_DWORD *)v64, 4 * *(_DWORD *)(v64 + 8), 0x10u);
  }
  v68 = *(_DWORD *)(v64 + 4);
  v69 = *(_DWORD *)v64;
  *(_DWORD *)(v64 + 4) = v68 + 1;
  *(_DWORD *)(v69 + 4 * v68) = v44;
  v70 = v44 + 1;
  v71 = *(_DWORD *)(v96 + 31440) + 1252;
  v72 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1256);
  v73 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1260);
  if ( v72 == v73 )
  {
    if ( !v73 )
      *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1260) = 1;
    v74 = *(_DWORD *)(v71 + 8);
    if ( v72 >= v74 )
    {
      do
        v74 *= 2;
      while ( v72 >= v74 );
      *(_DWORD *)(v71 + 8) = v74;
    }
    *(_DWORD *)v71 = sub_1002D6F7(v70, v71, *(_DWORD *)v71, 4 * *(_DWORD *)(v71 + 8), 0x10u);
  }
  v75 = *(_DWORD *)(v71 + 4);
  v76 = *(_DWORD *)v71;
  *(_DWORD *)(v71 + 4) = v75 + 1;
  *(_DWORD *)(v76 + 4 * v75) = v70;
  v77 = v70 + 1;
  v78 = *(_DWORD *)(v96 + 31440) + 1252;
  v79 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1256);
  v80 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1260);
  if ( v79 == v80 )
  {
    if ( !v80 )
      *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1260) = 1;
    v81 = *(_DWORD *)(v78 + 8);
    if ( v79 >= v81 )
    {
      do
        v81 *= 2;
      while ( v79 >= v81 );
      *(_DWORD *)(v78 + 8) = v81;
    }
    *(_DWORD *)v78 = sub_1002D6F7(v77, v78, *(_DWORD *)v78, 4 * *(_DWORD *)(v78 + 8), 0x10u);
  }
  v82 = *(_DWORD *)(v78 + 4);
  v83 = *(_DWORD *)v78;
  *(_DWORD *)(v78 + 4) = v82 + 1;
  *(_DWORD *)(v83 + 4 * v82) = v77;
  v84 = v77 + 1;
  v85 = *(_DWORD *)(v96 + 31440) + 1252;
  v86 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1256);
  v87 = *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1260);
  if ( v86 == v87 )
  {
    if ( !v87 )
      *(_DWORD *)(*(_DWORD *)(v96 + 31440) + 1260) = 1;
    v88 = *(_DWORD *)(v85 + 8);
    if ( v86 >= v88 )
    {
      do
        v88 *= 2;
      while ( v86 >= v88 );
      *(_DWORD *)(v85 + 8) = v88;
    }
    *(_DWORD *)v85 = sub_1002D6F7(v84, v78, *(_DWORD *)v85, 4 * *(_DWORD *)(v85 + 8), 0x10u);
  }
  v89 = *(_DWORD *)(v85 + 4);
  v90 = *(_DWORD *)v85;
  result = v89 + 1;
  *(_DWORD *)(v85 + 4) = v89 + 1;
  *(_DWORD *)(v90 + 4 * v89) = v84;
  *(_DWORD *)(v97 + 108) = 4;
  return result;
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];

//----- (10057B40) --------------------------------------------------------
int __fastcall sub_10057B40(int a1, int a2, int a3)
{
  int v3; // edi@1
  int v4; // ebx@1
  int v5; // eax@1
  int v6; // edx@2
  int v7; // ecx@2
  float v8; // xmm1_4@5
  int v9; // esi@9
  unsigned int v10; // ecx@9
  int v11; // eax@9
  unsigned int v12; // eax@12
  int v13; // edx@16
  int v14; // ecx@16
  int v15; // eax@16
  int v16; // ecx@17
  int v17; // ecx@18

  v3 = a1;
  v4 = a2;
  v5 = *(_DWORD *)(a1 + 31396);
  if ( *(_DWORD *)(v5 + 1248) )
  {
    v6 = *(_DWORD *)(v5 + 1244);
    v7 = *(_DWORD *)(v5 + 1240);
    if ( v6 )
      v7 = (v6 << 6) + v7 - 64;
  }
  else
  {
    v7 = 0;
  }
  *(_DWORD *)(v3 + 31624) = sub_10056440;
  *(_DWORD *)(v7 + 4) = *(_DWORD *)v4;
  *(_DWORD *)(v7 + 8) = *(_DWORD *)(v4 + 4);
  v8 = *(float *)(v7 + 8);
  if ( (*(_DWORD *)(v7 + 8) & 0x7F800000) == 2139095040 )
  {
    *(_DWORD *)(v7 + 8) = -1082130432;
  }
  else if ( v8 < 4.3702378e30 )
  {
    **(float **)(v3 + 31396) = fminf(**(float **)(v3 + 31396), v8);
    *(float *)(*(_DWORD *)(v3 + 31396) + 4) = fmaxf(*(float *)(*(_DWORD *)(v3 + 31396) + 4), *(float *)(v7 + 8));
  }
  v9 = *(_DWORD *)(v3 + 31396) + 1252;
  v10 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256);
  v11 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260);
  if ( v10 == v11 )
  {
    if ( !v11 )
      *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260) = 1;
    v12 = *(_DWORD *)(v9 + 8);
    if ( v10 >= v12 )
    {
      do
        v12 *= 2;
      while ( v10 >= v12 );
      *(_DWORD *)(v9 + 8) = v12;
    }
    *(_DWORD *)v9 = sub_1002D6F7(v4, v3, *(_DWORD *)v9, 4 * *(_DWORD *)(v9 + 8), 0x10u);
  }
  v13 = *(_DWORD *)(v9 + 4);
  v14 = *(_DWORD *)v9;
  *(_DWORD *)(v9 + 4) = v13 + 1;
  *(_DWORD *)(v14 + 4 * v13) = -1;
  v15 = *(_DWORD *)(v3 + 31404);
  if ( *(_DWORD *)(v15 + 8) )
  {
    v16 = *(_DWORD *)(v15 + 4);
    if ( v16 )
      v17 = *(_DWORD *)v15 - 112 + 112 * v16;
    else
      v17 = *(_DWORD *)v15;
  }
  else
  {
    v17 = 0;
  }
  *(_DWORD *)(v17 + 108) = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256) - *(_DWORD *)(v17 + 104);
  return v4 + 32;
}

//----- (10057CF0) --------------------------------------------------------
int __fastcall sub_10057CF0(int a1, int a2, int a3)
{
  int v3; // ebp@1
  int v4; // esi@1
  unsigned int v5; // ecx@1
  float v6; // xmm7_4@1
  int v7; // ecx@1
  unsigned int v8; // ecx@1
  float v9; // xmm1_4@1
  float v11; // xmm6_4@2
  int v12; // xmm5_4@2
  float v13; // xmm1_4@3
  float v14; // xmm4_4@3
  float v15; // xmm3_4@3
  int v16; // edi@20
  int v17; // ebx@20
  unsigned int v18; // ecx@20
  int v19; // eax@20
  unsigned int v20; // eax@23
  int v21; // ecx@27
  int v22; // edi@27
  unsigned int v23; // ecx@27
  int v24; // eax@27
  unsigned int v25; // eax@30
  int v26; // ecx@34
  int v27; // edi@34
  unsigned int v28; // ecx@34
  int v29; // eax@34
  unsigned int v30; // eax@37
  int v31; // ecx@41
  int v32; // edi@41
  unsigned int v33; // ecx@41
  int v34; // eax@41
  unsigned int v35; // eax@44
  int v36; // ecx@48
  int v37; // edi@48
  unsigned int v38; // ecx@48
  int v39; // eax@48
  unsigned int v40; // eax@51
  int v41; // edx@55
  int v42; // ecx@55
  int v43; // ebx@55
  int v44; // edi@55
  unsigned int v45; // ecx@55
  int v46; // eax@55
  unsigned int v47; // eax@58
  int v48; // edx@62
  int v49; // ecx@62
  int v50; // ebx@62
  int v51; // edi@62
  unsigned int v52; // ecx@62
  int v53; // eax@62
  unsigned int v54; // eax@65
  int v55; // edx@69
  int v56; // ecx@69
  int v57; // ebx@69
  int v58; // edi@69
  unsigned int v59; // ecx@69
  int v60; // eax@69
  unsigned int v61; // eax@72
  int v62; // edx@76
  int v63; // ecx@76
  int v64; // edi@76
  unsigned int v65; // ecx@76
  int v66; // eax@76
  unsigned int v67; // eax@79
  int v68; // edx@83
  int v69; // ecx@83
  int v70; // eax@83
  int v71; // ecx@84
  int v72; // ecx@85

  v3 = a2;
  v4 = a1;
  *(_DWORD *)(a1 + 31624) = sub_10056440;
  dword_1007CE9C = *(_DWORD *)a2;
  dword_1007CEA0 = *(_DWORD *)(a2 + 4);
  dword_1007CED8 = *(_DWORD *)(a2 + 8);
  dword_1007CEDC = *(_DWORD *)(a2 + 12);
  v5 = *(_DWORD *)(a2 + 20) & 0xFFFF0000;
  dword_1007CE30 = *(_DWORD *)(a2 + 20) << 16;
  v6 = *(float *)&dword_1007CE60;
  dword_1007CE2C = v5;
  v7 = *(_DWORD *)(a2 + 24);
  dword_1007CE70 = v7 << 16;
  dword_1007CE6C = v7 & 0xFFFF0000;
  v8 = *(_DWORD *)(a2 + 28) & 0xFFFF0000;
  dword_1007CEB0 = *(_DWORD *)(a2 + 28) << 16;
  dword_1007CEAC = v8;
  dword_1007CEE4 = *(_DWORD *)(v4 + 31432);
  dword_1007CEA4 = dword_1007CEE4;
  dword_1007CE64 = dword_1007CEE4;
  dword_1007CE24 = dword_1007CEE4;
  dword_1007CEE8 = *(_DWORD *)(v4 + 31436);
  dword_1007CEA8 = dword_1007CEE8;
  dword_1007CE68 = dword_1007CEE8;
  dword_1007CE28 = dword_1007CEE8;
  v9 = *(float *)&dword_1007CE20;
  __asm { lahf }
  if ( __SETP__(_AH & 0x44, 0) )
  {
    v13 = 1.0
        / (float)((float)((float)(*(float *)&dword_1007CE18 - *(float *)&dword_1007CE58)
                        * (float)(*(float *)&dword_1007CE9C - *(float *)&dword_1007CE5C))
                - (float)((float)(*(float *)&dword_1007CE1C - *(float *)&dword_1007CE5C)
                        * (float)(*(float *)&dword_1007CE98 - *(float *)&dword_1007CE58)));
    v11 = *(float *)&dword_1007CEA0;
    v14 = (float)((float)((float)(*(float *)&dword_1007CEDC - *(float *)&dword_1007CE5C)
                        * (float)(*(float *)&dword_1007CE18 - *(float *)&dword_1007CE58))
                - (float)((float)(*(float *)&dword_1007CED8 - *(float *)&dword_1007CE58)
                        * (float)(*(float *)&dword_1007CE1C - *(float *)&dword_1007CE5C)))
        * v13;
    v15 = (float)((float)((float)(*(float *)&dword_1007CED8 - *(float *)&dword_1007CE58)
                        * (float)(*(float *)&dword_1007CE9C - *(float *)&dword_1007CE5C))
                - (float)((float)(*(float *)&dword_1007CEDC - *(float *)&dword_1007CE5C)
                        * (float)(*(float *)&dword_1007CE98 - *(float *)&dword_1007CE58)))
        * v13;
    *(float *)&v12 = (float)((float)((float)(*(float *)&dword_1007CE20 - *(float *)&dword_1007CE60) * v15)
                           + *(float *)&dword_1007CE60)
                   + (float)((float)(*(float *)&dword_1007CEA0 - *(float *)&dword_1007CE60) * v14);
    *(float *)&dword_1007CEEC = (float)((float)((float)(*(float *)&dword_1007CE2C - *(float *)&dword_1007CE6C) * v15)
                                      + *(float *)&dword_1007CE6C)
                              + (float)((float)(*(float *)&dword_1007CEAC - *(float *)&dword_1007CE6C) * v14);
    v9 = *(float *)&dword_1007CE20;
    *(float *)&dword_1007CEF0 = (float)((float)((float)(*(float *)&dword_1007CE30 - *(float *)&dword_1007CE70) * v15)
                                      + *(float *)&dword_1007CE70)
                              + (float)((float)(*(float *)&dword_1007CEB0 - *(float *)&dword_1007CE70) * v14);
  }
  else
  {
    v11 = *(float *)&dword_1007CEA0;
    dword_1007CEEC = dword_1007CEAC;
    v12 = dword_1007CEA0;
    dword_1007CEF0 = dword_1007CEB0;
  }
  dword_1007CEE0 = v12;
  if ( (LODWORD(v9) & 0x7F800000) == 2139095040 )
  {
    dword_1007CE20 = -1082130432;
  }
  else if ( v9 < 4.3702378e30 )
  {
    **(float **)(v4 + 31396) = fminf(v9, **(float **)(v4 + 31396));
    *(float *)(*(_DWORD *)(v4 + 31396) + 4) = fmaxf(*(float *)&dword_1007CE20, *(float *)(*(_DWORD *)(v4 + 31396) + 4));
    v12 = dword_1007CEE0;
    v11 = *(float *)&dword_1007CEA0;
    v6 = *(float *)&dword_1007CE60;
  }
  if ( (LODWORD(v6) & 0x7F800000) == 2139095040 )
  {
    dword_1007CE60 = -1082130432;
  }
  else if ( v6 < 4.3702378e30 )
  {
    **(float **)(v4 + 31396) = fminf(v6, **(float **)(v4 + 31396));
    *(float *)(*(_DWORD *)(v4 + 31396) + 4) = fmaxf(*(float *)&dword_1007CE60, *(float *)(*(_DWORD *)(v4 + 31396) + 4));
    v12 = dword_1007CEE0;
    v11 = *(float *)&dword_1007CEA0;
  }
  if ( (LODWORD(v11) & 0x7F800000) == 2139095040 )
  {
    dword_1007CEA0 = -1082130432;
  }
  else if ( v11 < 4.3702378e30 )
  {
    **(float **)(v4 + 31396) = fminf(v11, **(float **)(v4 + 31396));
    *(float *)(*(_DWORD *)(v4 + 31396) + 4) = fmaxf(*(float *)&dword_1007CEA0, *(float *)(*(_DWORD *)(v4 + 31396) + 4));
    v12 = dword_1007CEE0;
  }
  if ( (v12 & 0x7F800000) == 2139095040 )
  {
    dword_1007CEE0 = -1082130432;
  }
  else if ( *(float *)&v12 < 4.3702378e30 )
  {
    **(float **)(v4 + 31396) = fminf(*(float *)&v12, **(float **)(v4 + 31396));
    *(float *)(*(_DWORD *)(v4 + 31396) + 4) = fmaxf(*(float *)&dword_1007CEE0, *(float *)(*(_DWORD *)(v4 + 31396) + 4));
  }
  v16 = *(_DWORD *)(v4 + 31396);
  v17 = *(_DWORD *)(v16 + 1244);
  v18 = *(_DWORD *)(v16 + 1244);
  v19 = *(_DWORD *)(v16 + 1248);
  if ( v18 == v19 )
  {
    if ( !v19 )
      *(_DWORD *)(v16 + 1248) = 1;
    v20 = *(_DWORD *)(v16 + 1248);
    if ( v18 >= v20 )
    {
      do
        v20 *= 2;
      while ( v18 >= v20 );
      *(_DWORD *)(v16 + 1248) = v20;
    }
    *(_DWORD *)(v16 + 1240) = sub_1002D6F7(v17, v16, *(_DWORD *)(v16 + 1240), *(_DWORD *)(v16 + 1248) << 6, 0x10u);
  }
  v21 = *(_DWORD *)(v16 + 1240) + ((*(_DWORD *)(v16 + 1244))++ << 6);
  *(_OWORD *)v21 = *(_OWORD *)&dword_1007CE18;
  *(_OWORD *)(v21 + 16) = *(_OWORD *)&dword_1007CE28;
  *(_OWORD *)(v21 + 32) = xmmword_1007CE38;
  *(_OWORD *)(v21 + 48) = xmmword_1007CE48;
  v22 = *(_DWORD *)(v4 + 31396) + 1240;
  v23 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1244);
  v24 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248);
  if ( v23 == v24 )
  {
    if ( !v24 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248) = 1;
    v25 = *(_DWORD *)(v22 + 8);
    if ( v23 >= v25 )
    {
      do
        v25 *= 2;
      while ( v23 >= v25 );
      *(_DWORD *)(v22 + 8) = v25;
    }
    *(_DWORD *)v22 = sub_1002D6F7(v17, v22, *(_DWORD *)v22, *(_DWORD *)(v22 + 8) << 6, 0x10u);
  }
  v26 = *(_DWORD *)v22 + ((*(_DWORD *)(v22 + 4))++ << 6);
  *(_OWORD *)v26 = *(_OWORD *)&dword_1007CE58;
  *(_OWORD *)(v26 + 16) = *(_OWORD *)&dword_1007CE68;
  *(_OWORD *)(v26 + 32) = xmmword_1007CE78;
  *(_OWORD *)(v26 + 48) = xmmword_1007CE88;
  v27 = *(_DWORD *)(v4 + 31396) + 1240;
  v28 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1244);
  v29 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248);
  if ( v28 == v29 )
  {
    if ( !v29 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248) = 1;
    v30 = *(_DWORD *)(v27 + 8);
    if ( v28 >= v30 )
    {
      do
        v30 *= 2;
      while ( v28 >= v30 );
      *(_DWORD *)(v27 + 8) = v30;
    }
    *(_DWORD *)v27 = sub_1002D6F7(v17, v27, *(_DWORD *)v27, *(_DWORD *)(v27 + 8) << 6, 0x10u);
  }
  v31 = *(_DWORD *)v27 + ((*(_DWORD *)(v27 + 4))++ << 6);
  *(_OWORD *)v31 = *(_OWORD *)&dword_1007CED8;
  *(_OWORD *)(v31 + 16) = *(_OWORD *)&dword_1007CEE8;
  *(_OWORD *)(v31 + 32) = xmmword_1007CEF8;
  *(_OWORD *)(v31 + 48) = xmmword_1007CF08;
  v32 = *(_DWORD *)(v4 + 31396) + 1240;
  v33 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1244);
  v34 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248);
  if ( v33 == v34 )
  {
    if ( !v34 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248) = 1;
    v35 = *(_DWORD *)(v32 + 8);
    if ( v33 >= v35 )
    {
      do
        v35 *= 2;
      while ( v33 >= v35 );
      *(_DWORD *)(v32 + 8) = v35;
    }
    *(_DWORD *)v32 = sub_1002D6F7(v17, v32, *(_DWORD *)v32, *(_DWORD *)(v32 + 8) << 6, 0x10u);
  }
  v36 = *(_DWORD *)v32 + ((*(_DWORD *)(v32 + 4))++ << 6);
  *(_OWORD *)v36 = *(_OWORD *)&dword_1007CE98;
  *(_OWORD *)(v36 + 16) = *(_OWORD *)&dword_1007CEA8;
  *(_OWORD *)(v36 + 32) = xmmword_1007CEB8;
  *(_OWORD *)(v36 + 48) = xmmword_1007CEC8;
  v37 = *(_DWORD *)(v4 + 31396) + 1252;
  v38 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v39 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v38 == v39 )
  {
    if ( !v39 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v40 = *(_DWORD *)(v37 + 8);
    if ( v38 >= v40 )
    {
      do
        v40 *= 2;
      while ( v38 >= v40 );
      *(_DWORD *)(v37 + 8) = v40;
    }
    *(_DWORD *)v37 = sub_1002D6F7(v17, v37, *(_DWORD *)v37, 4 * *(_DWORD *)(v37 + 8), 0x10u);
  }
  v41 = *(_DWORD *)(v37 + 4);
  v42 = *(_DWORD *)v37;
  *(_DWORD *)(v37 + 4) = v41 + 1;
  *(_DWORD *)(v42 + 4 * v41) = v17;
  v43 = v17 + 1;
  v44 = *(_DWORD *)(v4 + 31396) + 1252;
  v45 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v46 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v45 == v46 )
  {
    if ( !v46 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v47 = *(_DWORD *)(v44 + 8);
    if ( v45 >= v47 )
    {
      do
        v47 *= 2;
      while ( v45 >= v47 );
      *(_DWORD *)(v44 + 8) = v47;
    }
    *(_DWORD *)v44 = sub_1002D6F7(v43, v44, *(_DWORD *)v44, 4 * *(_DWORD *)(v44 + 8), 0x10u);
  }
  v48 = *(_DWORD *)(v44 + 4);
  v49 = *(_DWORD *)v44;
  *(_DWORD *)(v44 + 4) = v48 + 1;
  *(_DWORD *)(v49 + 4 * v48) = v43;
  v50 = v43 + 1;
  v51 = *(_DWORD *)(v4 + 31396) + 1252;
  v52 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v53 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v52 == v53 )
  {
    if ( !v53 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v54 = *(_DWORD *)(v51 + 8);
    if ( v52 >= v54 )
    {
      do
        v54 *= 2;
      while ( v52 >= v54 );
      *(_DWORD *)(v51 + 8) = v54;
    }
    *(_DWORD *)v51 = sub_1002D6F7(v50, v51, *(_DWORD *)v51, 4 * *(_DWORD *)(v51 + 8), 0x10u);
  }
  v55 = *(_DWORD *)(v51 + 4);
  v56 = *(_DWORD *)v51;
  *(_DWORD *)(v51 + 4) = v55 + 1;
  *(_DWORD *)(v56 + 4 * v55) = v50;
  v57 = v50 + 1;
  v58 = *(_DWORD *)(v4 + 31396) + 1252;
  v59 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v60 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v59 == v60 )
  {
    if ( !v60 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v61 = *(_DWORD *)(v58 + 8);
    if ( v59 >= v61 )
    {
      do
        v61 *= 2;
      while ( v59 >= v61 );
      *(_DWORD *)(v58 + 8) = v61;
    }
    *(_DWORD *)v58 = sub_1002D6F7(v57, v58, *(_DWORD *)v58, 4 * *(_DWORD *)(v58 + 8), 0x10u);
  }
  v62 = *(_DWORD *)(v58 + 4);
  v63 = *(_DWORD *)v58;
  *(_DWORD *)(v58 + 4) = v62 + 1;
  *(_DWORD *)(v63 + 4 * v62) = v57;
  v64 = *(_DWORD *)(v4 + 31396) + 1252;
  v65 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v66 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v65 == v66 )
  {
    if ( !v66 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v67 = *(_DWORD *)(v64 + 8);
    if ( v65 >= v67 )
    {
      do
        v67 *= 2;
      while ( v65 >= v67 );
      *(_DWORD *)(v64 + 8) = v67;
    }
    *(_DWORD *)v64 = sub_1002D6F7(v57, v64, *(_DWORD *)v64, 4 * *(_DWORD *)(v64 + 8), 0x10u);
  }
  v68 = *(_DWORD *)(v64 + 4);
  v69 = *(_DWORD *)v64;
  *(_DWORD *)(v64 + 4) = v68 + 1;
  *(_DWORD *)(v69 + 4 * v68) = -1;
  v70 = *(_DWORD *)(v4 + 31404);
  if ( *(_DWORD *)(v70 + 8) )
  {
    v71 = *(_DWORD *)(v70 + 4);
    if ( v71 )
      v72 = *(_DWORD *)v70 - 112 + 112 * v71;
    else
      v72 = *(_DWORD *)v70;
  }
  else
  {
    v72 = 0;
  }
  *(_DWORD *)(v72 + 108) = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256) - *(_DWORD *)(v72 + 104);
  return v3 + 32;
}
// 1007CE18: using guessed type int dword_1007CE18;
// 1007CE1C: using guessed type int dword_1007CE1C;
// 1007CE20: using guessed type int dword_1007CE20;
// 1007CE24: using guessed type int dword_1007CE24;
// 1007CE28: using guessed type int dword_1007CE28;
// 1007CE2C: using guessed type int dword_1007CE2C;
// 1007CE30: using guessed type int dword_1007CE30;
// 1007CE38: using guessed type __int128 xmmword_1007CE38;
// 1007CE48: using guessed type __int128 xmmword_1007CE48;
// 1007CE58: using guessed type int dword_1007CE58;
// 1007CE5C: using guessed type int dword_1007CE5C;
// 1007CE60: using guessed type int dword_1007CE60;
// 1007CE64: using guessed type int dword_1007CE64;
// 1007CE68: using guessed type int dword_1007CE68;
// 1007CE6C: using guessed type int dword_1007CE6C;
// 1007CE70: using guessed type int dword_1007CE70;
// 1007CE78: using guessed type __int128 xmmword_1007CE78;
// 1007CE88: using guessed type __int128 xmmword_1007CE88;
// 1007CE98: using guessed type int dword_1007CE98;
// 1007CE9C: using guessed type int dword_1007CE9C;
// 1007CEA0: using guessed type int dword_1007CEA0;
// 1007CEA4: using guessed type int dword_1007CEA4;
// 1007CEA8: using guessed type int dword_1007CEA8;
// 1007CEAC: using guessed type int dword_1007CEAC;
// 1007CEB0: using guessed type int dword_1007CEB0;
// 1007CEB8: using guessed type __int128 xmmword_1007CEB8;
// 1007CEC8: using guessed type __int128 xmmword_1007CEC8;
// 1007CED8: using guessed type int dword_1007CED8;
// 1007CEDC: using guessed type int dword_1007CEDC;
// 1007CEE0: using guessed type int dword_1007CEE0;
// 1007CEE4: using guessed type int dword_1007CEE4;
// 1007CEE8: using guessed type int dword_1007CEE8;
// 1007CEEC: using guessed type int dword_1007CEEC;
// 1007CEF0: using guessed type int dword_1007CEF0;
// 1007CEF8: using guessed type __int128 xmmword_1007CEF8;
// 1007CF08: using guessed type __int128 xmmword_1007CF08;

//----- (10058560) --------------------------------------------------------
int __fastcall sub_10058560(int a1, int a2, int a3)
{
  int v3; // ebp@1
  int v4; // edi@1
  float v5; // xmm5_4@1
  float v7; // xmm2_4@2
  int v8; // xmm1_4@2
  float v9; // xmm1_4@3
  int v10; // esi@20
  int v11; // ebx@20
  unsigned int v12; // ecx@20
  int v13; // eax@20
  unsigned int v14; // eax@23
  int v15; // ecx@27
  int v16; // esi@27
  unsigned int v17; // ecx@27
  int v18; // eax@27
  unsigned int v19; // eax@30
  int v20; // ecx@34
  int v21; // esi@34
  unsigned int v22; // ecx@34
  int v23; // eax@34
  unsigned int v24; // eax@37
  int v25; // ecx@41
  int v26; // esi@41
  unsigned int v27; // ecx@41
  int v28; // eax@41
  unsigned int v29; // eax@44
  int v30; // ecx@48
  int v31; // esi@48
  unsigned int v32; // ecx@48
  int v33; // eax@48
  unsigned int v34; // eax@51
  int v35; // edx@55
  int v36; // ecx@55
  int v37; // ebx@55
  int v38; // esi@55
  unsigned int v39; // ecx@55
  int v40; // eax@55
  unsigned int v41; // eax@58
  int v42; // edx@62
  int v43; // ecx@62
  int v44; // ebx@62
  int v45; // esi@62
  unsigned int v46; // ecx@62
  int v47; // eax@62
  unsigned int v48; // eax@65
  int v49; // edx@69
  int v50; // ecx@69
  int v51; // ebx@69
  int v52; // esi@69
  unsigned int v53; // ecx@69
  int v54; // eax@69
  unsigned int v55; // eax@72
  int v56; // edx@76
  int v57; // ecx@76
  int v58; // esi@76
  unsigned int v59; // ecx@76
  int v60; // eax@76
  unsigned int v61; // eax@79
  int v62; // edx@83
  int v63; // ecx@83
  int v64; // eax@83
  int v65; // ecx@84
  int v66; // ecx@85

  v3 = a2;
  v4 = a1;
  *(_DWORD *)(a1 + 31624) = sub_10056440;
  dword_1007CE9C = *(_DWORD *)a2;
  v5 = *(float *)&dword_1007CE60;
  dword_1007CEA0 = *(_DWORD *)(a2 + 4);
  dword_1007CED8 = *(_DWORD *)(a2 + 8);
  dword_1007CEDC = *(_DWORD *)(a2 + 12);
  dword_1007CEE4 = *(_DWORD *)(a1 + 31432);
  dword_1007CEA4 = dword_1007CEE4;
  dword_1007CE64 = dword_1007CEE4;
  dword_1007CE24 = dword_1007CEE4;
  __asm { lahf }
  if ( __SETP__(_AH & 0x44, 0) )
  {
    v9 = 1.0
       / (float)((float)((float)(*(float *)&dword_1007CE18 - *(float *)&dword_1007CE58)
                       * (float)(*(float *)&dword_1007CE9C - *(float *)&dword_1007CE5C))
               - (float)((float)(*(float *)&dword_1007CE1C - *(float *)&dword_1007CE5C)
                       * (float)(*(float *)&dword_1007CE98 - *(float *)&dword_1007CE58)));
    v7 = *(float *)&dword_1007CEA0;
    *(float *)&v8 = (float)((float)((float)(*(float *)&dword_1007CE20 - *(float *)&dword_1007CE60)
                                  * (float)((float)((float)((float)(*(float *)&dword_1007CED8 - *(float *)&dword_1007CE58)
                                                          * (float)(*(float *)&dword_1007CE9C - *(float *)&dword_1007CE5C))
                                                  - (float)((float)(*(float *)&dword_1007CEDC - *(float *)&dword_1007CE5C)
                                                          * (float)(*(float *)&dword_1007CE98 - *(float *)&dword_1007CE58)))
                                          * v9))
                          + *(float *)&dword_1007CE60)
                  + (float)((float)(*(float *)&dword_1007CEA0 - *(float *)&dword_1007CE60)
                          * (float)((float)((float)((float)(*(float *)&dword_1007CEDC - *(float *)&dword_1007CE5C)
                                                  * (float)(*(float *)&dword_1007CE18 - *(float *)&dword_1007CE58))
                                          - (float)((float)(*(float *)&dword_1007CED8 - *(float *)&dword_1007CE58)
                                                  * (float)(*(float *)&dword_1007CE1C - *(float *)&dword_1007CE5C)))
                                  * v9));
  }
  else
  {
    v7 = *(float *)&dword_1007CEA0;
    v8 = dword_1007CEA0;
  }
  dword_1007CEE0 = v8;
  if ( (dword_1007CE20 & 0x7F800000) == 2139095040 )
  {
    dword_1007CE20 = -1082130432;
  }
  else if ( *(float *)&dword_1007CE20 < 4.3702378e30 )
  {
    **(float **)(a1 + 31396) = fminf(*(float *)&dword_1007CE20, **(float **)(a1 + 31396));
    *(float *)(*(_DWORD *)(a1 + 31396) + 4) = fmaxf(*(float *)&dword_1007CE20, *(float *)(*(_DWORD *)(a1 + 31396) + 4));
    v8 = dword_1007CEE0;
    v7 = *(float *)&dword_1007CEA0;
    v5 = *(float *)&dword_1007CE60;
  }
  if ( (LODWORD(v5) & 0x7F800000) == 2139095040 )
  {
    dword_1007CE60 = -1082130432;
  }
  else if ( v5 < 4.3702378e30 )
  {
    **(float **)(a1 + 31396) = fminf(v5, **(float **)(a1 + 31396));
    *(float *)(*(_DWORD *)(a1 + 31396) + 4) = fmaxf(*(float *)&dword_1007CE60, *(float *)(*(_DWORD *)(a1 + 31396) + 4));
    v8 = dword_1007CEE0;
    v7 = *(float *)&dword_1007CEA0;
  }
  if ( (LODWORD(v7) & 0x7F800000) == 2139095040 )
  {
    dword_1007CEA0 = -1082130432;
  }
  else if ( v7 < 4.3702378e30 )
  {
    **(float **)(a1 + 31396) = fminf(v7, **(float **)(a1 + 31396));
    *(float *)(*(_DWORD *)(a1 + 31396) + 4) = fmaxf(*(float *)&dword_1007CEA0, *(float *)(*(_DWORD *)(a1 + 31396) + 4));
    v8 = dword_1007CEE0;
  }
  if ( (v8 & 0x7F800000) == 2139095040 )
  {
    dword_1007CEE0 = -1082130432;
  }
  else if ( *(float *)&v8 < 4.3702378e30 )
  {
    **(float **)(a1 + 31396) = fminf(*(float *)&v8, **(float **)(a1 + 31396));
    *(float *)(*(_DWORD *)(a1 + 31396) + 4) = fmaxf(*(float *)&dword_1007CEE0, *(float *)(*(_DWORD *)(a1 + 31396) + 4));
  }
  v10 = *(_DWORD *)(a1 + 31396);
  v11 = *(_DWORD *)(v10 + 1244);
  v12 = *(_DWORD *)(v10 + 1244);
  v13 = *(_DWORD *)(v10 + 1248);
  if ( v12 == v13 )
  {
    if ( !v13 )
      *(_DWORD *)(v10 + 1248) = 1;
    v14 = *(_DWORD *)(v10 + 1248);
    if ( v12 >= v14 )
    {
      do
        v14 *= 2;
      while ( v12 >= v14 );
      *(_DWORD *)(v10 + 1248) = v14;
    }
    *(_DWORD *)(v10 + 1240) = sub_1002D6F7(v11, v4, *(_DWORD *)(v10 + 1240), *(_DWORD *)(v10 + 1248) << 6, 0x10u);
  }
  v15 = *(_DWORD *)(v10 + 1240) + ((*(_DWORD *)(v10 + 1244))++ << 6);
  *(_OWORD *)v15 = *(_OWORD *)&dword_1007CE18;
  *(_OWORD *)(v15 + 16) = *(_OWORD *)&dword_1007CE28;
  *(_OWORD *)(v15 + 32) = xmmword_1007CE38;
  *(_OWORD *)(v15 + 48) = xmmword_1007CE48;
  v16 = *(_DWORD *)(v4 + 31396) + 1240;
  v17 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1244);
  v18 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248);
  if ( v17 == v18 )
  {
    if ( !v18 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248) = 1;
    v19 = *(_DWORD *)(v16 + 8);
    if ( v17 >= v19 )
    {
      do
        v19 *= 2;
      while ( v17 >= v19 );
      *(_DWORD *)(v16 + 8) = v19;
    }
    *(_DWORD *)v16 = sub_1002D6F7(v11, v4, *(_DWORD *)v16, *(_DWORD *)(v16 + 8) << 6, 0x10u);
  }
  v20 = *(_DWORD *)v16 + ((*(_DWORD *)(v16 + 4))++ << 6);
  *(_OWORD *)v20 = *(_OWORD *)&dword_1007CE58;
  *(_OWORD *)(v20 + 16) = *(_OWORD *)&dword_1007CE68;
  *(_OWORD *)(v20 + 32) = xmmword_1007CE78;
  *(_OWORD *)(v20 + 48) = xmmword_1007CE88;
  v21 = *(_DWORD *)(v4 + 31396) + 1240;
  v22 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1244);
  v23 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248);
  if ( v22 == v23 )
  {
    if ( !v23 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248) = 1;
    v24 = *(_DWORD *)(v21 + 8);
    if ( v22 >= v24 )
    {
      do
        v24 *= 2;
      while ( v22 >= v24 );
      *(_DWORD *)(v21 + 8) = v24;
    }
    *(_DWORD *)v21 = sub_1002D6F7(v11, v4, *(_DWORD *)v21, *(_DWORD *)(v21 + 8) << 6, 0x10u);
  }
  v25 = *(_DWORD *)v21 + ((*(_DWORD *)(v21 + 4))++ << 6);
  *(_OWORD *)v25 = *(_OWORD *)&dword_1007CED8;
  *(_OWORD *)(v25 + 16) = *(_OWORD *)&dword_1007CEE8;
  *(_OWORD *)(v25 + 32) = xmmword_1007CEF8;
  *(_OWORD *)(v25 + 48) = xmmword_1007CF08;
  v26 = *(_DWORD *)(v4 + 31396) + 1240;
  v27 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1244);
  v28 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248);
  if ( v27 == v28 )
  {
    if ( !v28 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1248) = 1;
    v29 = *(_DWORD *)(v26 + 8);
    if ( v27 >= v29 )
    {
      do
        v29 *= 2;
      while ( v27 >= v29 );
      *(_DWORD *)(v26 + 8) = v29;
    }
    *(_DWORD *)v26 = sub_1002D6F7(v11, v4, *(_DWORD *)v26, *(_DWORD *)(v26 + 8) << 6, 0x10u);
  }
  v30 = *(_DWORD *)v26 + ((*(_DWORD *)(v26 + 4))++ << 6);
  *(_OWORD *)v30 = *(_OWORD *)&dword_1007CE98;
  *(_OWORD *)(v30 + 16) = *(_OWORD *)&dword_1007CEA8;
  *(_OWORD *)(v30 + 32) = xmmword_1007CEB8;
  *(_OWORD *)(v30 + 48) = xmmword_1007CEC8;
  v31 = *(_DWORD *)(v4 + 31396) + 1252;
  v32 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v33 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v32 == v33 )
  {
    if ( !v33 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v34 = *(_DWORD *)(v31 + 8);
    if ( v32 >= v34 )
    {
      do
        v34 *= 2;
      while ( v32 >= v34 );
      *(_DWORD *)(v31 + 8) = v34;
    }
    *(_DWORD *)v31 = sub_1002D6F7(v11, v4, *(_DWORD *)v31, 4 * *(_DWORD *)(v31 + 8), 0x10u);
  }
  v35 = *(_DWORD *)(v31 + 4);
  v36 = *(_DWORD *)v31;
  *(_DWORD *)(v31 + 4) = v35 + 1;
  *(_DWORD *)(v36 + 4 * v35) = v11;
  v37 = v11 + 1;
  v38 = *(_DWORD *)(v4 + 31396) + 1252;
  v39 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v40 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v39 == v40 )
  {
    if ( !v40 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v41 = *(_DWORD *)(v38 + 8);
    if ( v39 >= v41 )
    {
      do
        v41 *= 2;
      while ( v39 >= v41 );
      *(_DWORD *)(v38 + 8) = v41;
    }
    *(_DWORD *)v38 = sub_1002D6F7(v37, v4, *(_DWORD *)v38, 4 * *(_DWORD *)(v38 + 8), 0x10u);
  }
  v42 = *(_DWORD *)(v38 + 4);
  v43 = *(_DWORD *)v38;
  *(_DWORD *)(v38 + 4) = v42 + 1;
  *(_DWORD *)(v43 + 4 * v42) = v37;
  v44 = v37 + 1;
  v45 = *(_DWORD *)(v4 + 31396) + 1252;
  v46 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v47 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v46 == v47 )
  {
    if ( !v47 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v48 = *(_DWORD *)(v45 + 8);
    if ( v46 >= v48 )
    {
      do
        v48 *= 2;
      while ( v46 >= v48 );
      *(_DWORD *)(v45 + 8) = v48;
    }
    *(_DWORD *)v45 = sub_1002D6F7(v44, v4, *(_DWORD *)v45, 4 * *(_DWORD *)(v45 + 8), 0x10u);
  }
  v49 = *(_DWORD *)(v45 + 4);
  v50 = *(_DWORD *)v45;
  *(_DWORD *)(v45 + 4) = v49 + 1;
  *(_DWORD *)(v50 + 4 * v49) = v44;
  v51 = v44 + 1;
  v52 = *(_DWORD *)(v4 + 31396) + 1252;
  v53 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v54 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v53 == v54 )
  {
    if ( !v54 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v55 = *(_DWORD *)(v52 + 8);
    if ( v53 >= v55 )
    {
      do
        v55 *= 2;
      while ( v53 >= v55 );
      *(_DWORD *)(v52 + 8) = v55;
    }
    *(_DWORD *)v52 = sub_1002D6F7(v51, v4, *(_DWORD *)v52, 4 * *(_DWORD *)(v52 + 8), 0x10u);
  }
  v56 = *(_DWORD *)(v52 + 4);
  v57 = *(_DWORD *)v52;
  *(_DWORD *)(v52 + 4) = v56 + 1;
  *(_DWORD *)(v57 + 4 * v56) = v51;
  v58 = *(_DWORD *)(v4 + 31396) + 1252;
  v59 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256);
  v60 = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260);
  if ( v59 == v60 )
  {
    if ( !v60 )
      *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1260) = 1;
    v61 = *(_DWORD *)(v58 + 8);
    if ( v59 >= v61 )
    {
      do
        v61 *= 2;
      while ( v59 >= v61 );
      *(_DWORD *)(v58 + 8) = v61;
    }
    *(_DWORD *)v58 = sub_1002D6F7(v51, v4, *(_DWORD *)v58, 4 * *(_DWORD *)(v58 + 8), 0x10u);
  }
  v62 = *(_DWORD *)(v58 + 4);
  v63 = *(_DWORD *)v58;
  *(_DWORD *)(v58 + 4) = v62 + 1;
  *(_DWORD *)(v63 + 4 * v62) = -1;
  v64 = *(_DWORD *)(v4 + 31404);
  if ( *(_DWORD *)(v64 + 8) )
  {
    v65 = *(_DWORD *)(v64 + 4);
    if ( v65 )
      v66 = *(_DWORD *)v64 - 112 + 112 * v65;
    else
      v66 = *(_DWORD *)v64;
  }
  else
  {
    v66 = 0;
  }
  *(_DWORD *)(v66 + 108) = *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 1256) - *(_DWORD *)(v66 + 104);
  return v3 + 32;
}
// 1007CE18: using guessed type int dword_1007CE18;
// 1007CE1C: using guessed type int dword_1007CE1C;
// 1007CE20: using guessed type int dword_1007CE20;
// 1007CE24: using guessed type int dword_1007CE24;
// 1007CE28: using guessed type int dword_1007CE28;
// 1007CE38: using guessed type __int128 xmmword_1007CE38;
// 1007CE48: using guessed type __int128 xmmword_1007CE48;
// 1007CE58: using guessed type int dword_1007CE58;
// 1007CE5C: using guessed type int dword_1007CE5C;
// 1007CE60: using guessed type int dword_1007CE60;
// 1007CE64: using guessed type int dword_1007CE64;
// 1007CE68: using guessed type int dword_1007CE68;
// 1007CE78: using guessed type __int128 xmmword_1007CE78;
// 1007CE88: using guessed type __int128 xmmword_1007CE88;
// 1007CE98: using guessed type int dword_1007CE98;
// 1007CE9C: using guessed type int dword_1007CE9C;
// 1007CEA0: using guessed type int dword_1007CEA0;
// 1007CEA4: using guessed type int dword_1007CEA4;
// 1007CEA8: using guessed type int dword_1007CEA8;
// 1007CEB8: using guessed type __int128 xmmword_1007CEB8;
// 1007CEC8: using guessed type __int128 xmmword_1007CEC8;
// 1007CED8: using guessed type int dword_1007CED8;
// 1007CEDC: using guessed type int dword_1007CEDC;
// 1007CEE0: using guessed type int dword_1007CEE0;
// 1007CEE4: using guessed type int dword_1007CEE4;
// 1007CEE8: using guessed type int dword_1007CEE8;
// 1007CEF8: using guessed type __int128 xmmword_1007CEF8;
// 1007CF08: using guessed type __int128 xmmword_1007CF08;

//----- (10058E10) --------------------------------------------------------
void __cdecl sub_10058E10(int a1, int a2)
{
  int v2; // ecx@0
  int v3; // esi@1
  float v4; // xmm6_4@1
  float v5; // xmm7_4@1
  int v7; // xmm2_4@2
  int v8; // xmm1_4@2
  int v9; // xmm2_4@2
  int v10; // xmm1_4@2
  int v11; // xmm2_4@2
  int v12; // xmm1_4@2
  int v13; // xmm2_4@2
  int v14; // xmm1_4@2
  unsigned int *v15; // ecx@3
  signed int v16; // eax@3
  __m128i v17; // xmm0@4
  int v18; // ecx@5
  signed int v19; // esi@5
  __m128 v20; // xmm1@6
  __m128 v21; // xmm2@6
  __m128 v22; // xmm3@6
  __m128 v23; // xmm2@8
  __m128 v24; // xmm3@8
  __m128 v25; // xmm1@8
  __m128 v26; // xmm2@8
  __m128 v27; // xmm1@8
  __m128i v28; // xmm0@8
  __m128i v29; // xmm0@8
  __m128 v30; // xmm2@8
  __m128i v31; // xmm0@8
  __m128i v32; // xmm0@8
  float v33; // [sp+Ch] [bp-C4h]@1
  float v34; // [sp+10h] [bp-C0h]@1
  float v35; // [sp+14h] [bp-BCh]@5
  float v36; // [sp+18h] [bp-B8h]@5
  float v37; // [sp+1Ch] [bp-B4h]@5
  float v38; // [sp+20h] [bp-B0h]@5
  float v39; // [sp+24h] [bp-ACh]@5
  float v40; // [sp+28h] [bp-A8h]@5
  float v41; // [sp+2Ch] [bp-A4h]@5
  __m128 v42; // [sp+30h] [bp-A0h]@5
  __m128 v43; // [sp+40h] [bp-90h]@5
  __m128 v44; // [sp+50h] [bp-80h]@5
  __m128 v45; // [sp+60h] [bp-70h]@5
  __m128 v46; // [sp+70h] [bp-60h]@4
  __m128 v47; // [sp+80h] [bp-50h]@5
  __m128 v48; // [sp+90h] [bp-40h]@5
  __m128 v49; // [sp+A0h] [bp-30h]@4
  __m128 v50; // [sp+B0h] [bp-20h]@5
  __m128 v51; // [sp+C0h] [bp-10h]@5

  v3 = v2;
  v4 = *(float *)(a1 + 128) - *(float *)(a1 + 64);
  v5 = *(float *)(a1 + 132) - *(float *)(a1 + 68);
  v33 = *(float *)a1 - *(float *)(a1 + 64);
  v34 = *(float *)(a1 + 4) - *(float *)(a1 + 68);
  __asm { lahf }
  if ( __SETP__(_AH & 0x44, 0) )
  {
    v15 = (unsigned int *)(a1 + 16);
    v16 = 0;
    do
    {
      *(_OWORD *)&v46.m128_f32[v16] = _mm_mul_ps(
                                        _mm_add_ps(
                                          _mm_cvtepi32_ps(_mm_xor_si128(_mm_and_si128(_mm_shuffle_epi32(_mm_cvtsi32_si128(*(v15 - 1)), 0), (__m128i)xmmword_1006DB00), (__m128i)xmmword_1006DAB0)),
                                          (__m128)xmmword_1006DAF0),
                                        (__m128)xmmword_1006DB40);
      v17 = _mm_cvtsi32_si128(*v15);
      v15 += 16;
      *(_OWORD *)&v49.m128_f32[v16] = _mm_mul_ps(
                                        _mm_add_ps(
                                          _mm_cvtepi32_ps(_mm_xor_si128(_mm_and_si128(_mm_shuffle_epi32(v17, 0), (__m128i)xmmword_1006DB00), (__m128i)xmmword_1006DAB0)),
                                          (__m128)xmmword_1006DAF0),
                                        (__m128)xmmword_1006DB40);
      v16 += 4;
    }
    while ( v16 < 12 );
    v18 = v3 + 4;
    v19 = 4;
    v37 = *(float *)(a1 + 136) - *(float *)(a1 + 72);
    v35 = 1.0 / (float)((float)(v33 * v5) - (float)(v34 * v4));
    v36 = *(float *)(a1 + 8) - *(float *)(a1 + 72);
    v39 = *(float *)(a1 + 148) - *(float *)(a1 + 84);
    v38 = *(float *)(a1 + 20) - *(float *)(a1 + 84);
    v41 = *(float *)(a1 + 152) - *(float *)(a1 + 88);
    v40 = *(float *)(a1 + 24) - *(float *)(a1 + 88);
    v42 = _mm_sub_ps(v46, v47);
    v43 = _mm_sub_ps(v48, v47);
    v44 = _mm_sub_ps(v49, v50);
    v45 = _mm_sub_ps(v51, v50);
    do
    {
      v22 = (__m128)*(_DWORD *)v18;
      v20 = (__m128)*(_DWORD *)(v18 - 4);
      v20.m128_f32[0] = v20.m128_f32[0] - *(float *)(a1 + 64);
      v22.m128_f32[0] = v22.m128_f32[0] - *(float *)(a1 + 68);
      v21 = v20;
      v21.m128_f32[0] = (float)((float)(v20.m128_f32[0] * v5) - (float)(v22.m128_f32[0] * v4)) * v35;
      v22.m128_f32[0] = (float)((float)(v22.m128_f32[0] * v33) - (float)(v20.m128_f32[0] * v34)) * v35;
      *(float *)(v18 + 4) = (float)((float)(v21.m128_f32[0] * v36) + *(float *)(a1 + 72))
                          + (float)(v22.m128_f32[0] * v37);
      *(float *)(v18 + 16) = (float)((float)(v21.m128_f32[0] * v38) + *(float *)(a1 + 84))
                           + (float)(v22.m128_f32[0] * v39);
      *(float *)(v18 + 20) = (float)((float)(v21.m128_f32[0] * v40) + *(float *)(a1 + 88))
                           + (float)(v22.m128_f32[0] * v41);
      if ( a2 )
      {
        v23 = _mm_shuffle_ps(v21, v21, 0);
        v24 = _mm_shuffle_ps(v22, v22, 0);
        v25 = _mm_mul_ps(v23, v42);
        v26 = _mm_add_ps(_mm_add_ps(_mm_mul_ps(v23, v44), v50), _mm_mul_ps(v24, v45));
        v27 = _mm_mul_ps(
                _mm_min_ps(
                  _mm_max_ps(_mm_add_ps(_mm_add_ps(v25, v47), _mm_mul_ps(v24, v43)), (__m128)xmmword_1006DB10),
                  (__m128)xmmword_1006DDB0),
                (__m128)xmmword_1006EC80);
        v28 = _mm_cvtps_epi32(_mm_shuffle_ps(v27, v27, -58));
        v29 = _mm_packs_epi32(v28, v28);
        *(_DWORD *)(v18 + 8) = (unsigned __int128)_mm_packus_epi16(v29, v29);
        v30 = _mm_mul_ps(
                _mm_min_ps(_mm_max_ps(v26, (__m128)xmmword_1006DB10), (__m128)xmmword_1006DDB0),
                (__m128)xmmword_1006EC80);
        v31 = _mm_cvtps_epi32(_mm_shuffle_ps(v30, v30, -58));
        v32 = _mm_packs_epi32(v31, v31);
        *(_DWORD *)(v18 + 12) = (unsigned __int128)_mm_packus_epi16(v32, v32);
      }
      else
      {
        *(_DWORD *)(v18 + 8) = *(_DWORD *)(a1 + 140);
        *(_DWORD *)(v18 + 12) = *(_DWORD *)(a1 + 144);
      }
      v18 += 64;
      --v19;
    }
    while ( v19 );
  }
  else
  {
    v7 = *(_DWORD *)v2;
    v8 = *(_DWORD *)(v2 + 4);
    *(_OWORD *)v2 = *(_OWORD *)(a1 + 128);
    *(_OWORD *)(v2 + 16) = *(_OWORD *)(a1 + 144);
    *(_OWORD *)(v2 + 32) = *(_OWORD *)(a1 + 160);
    *(_OWORD *)(v2 + 48) = *(_OWORD *)(a1 + 176);
    *(_DWORD *)v2 = v7;
    v9 = *(_DWORD *)(v2 + 64);
    *(_DWORD *)(v2 + 4) = v8;
    v10 = *(_DWORD *)(v2 + 68);
    *(_OWORD *)(v2 + 64) = *(_OWORD *)(a1 + 128);
    *(_OWORD *)(v2 + 80) = *(_OWORD *)(a1 + 144);
    *(_OWORD *)(v2 + 96) = *(_OWORD *)(a1 + 160);
    *(_OWORD *)(v2 + 112) = *(_OWORD *)(a1 + 176);
    *(_DWORD *)(v2 + 64) = v9;
    v11 = *(_DWORD *)(v2 + 128);
    *(_DWORD *)(v2 + 68) = v10;
    v12 = *(_DWORD *)(v2 + 132);
    *(_OWORD *)(v2 + 128) = *(_OWORD *)(a1 + 128);
    *(_OWORD *)(v2 + 144) = *(_OWORD *)(a1 + 144);
    *(_OWORD *)(v2 + 160) = *(_OWORD *)(a1 + 160);
    *(_OWORD *)(v2 + 176) = *(_OWORD *)(a1 + 176);
    *(_DWORD *)(v2 + 128) = v11;
    v13 = *(_DWORD *)(v2 + 192);
    *(_DWORD *)(v2 + 132) = v12;
    v14 = *(_DWORD *)(v2 + 196);
    *(_OWORD *)(v2 + 192) = *(_OWORD *)(a1 + 128);
    *(_OWORD *)(v2 + 208) = *(_OWORD *)(a1 + 144);
    *(_OWORD *)(v2 + 224) = *(_OWORD *)(a1 + 160);
    *(_OWORD *)(v2 + 240) = *(_OWORD *)(a1 + 176);
    *(_DWORD *)(v2 + 192) = v13;
    *(_DWORD *)(v2 + 196) = v14;
  }
}
// 1006DAB0: using guessed type __int128 xmmword_1006DAB0;
// 1006DAF0: using guessed type __int128 xmmword_1006DAF0;
// 1006DB00: using guessed type __int128 xmmword_1006DB00;
// 1006DB10: using guessed type __int128 xmmword_1006DB10;
// 1006DB40: using guessed type __int128 xmmword_1006DB40;
// 1006DDB0: using guessed type __int128 xmmword_1006DDB0;
// 1006EC80: using guessed type __int128 xmmword_1006EC80;

//----- (10059270) --------------------------------------------------------
int __fastcall sub_10059270(int a1, int a2, int a3)
{
  int v3; // ebp@1
  int v4; // ebx@1
  int v5; // esi@2
  int v6; // edi@3
  unsigned int v7; // ecx@3
  int v8; // eax@3
  unsigned int v9; // eax@6
  int v10; // ecx@10
  float v11; // xmm0_4@12
  int v12; // eax@13
  float v13; // xmm0_4@13
  int v14; // edi@16
  unsigned int v15; // ecx@16
  int v16; // eax@16
  unsigned int v17; // eax@19
  int v18; // edx@23
  int v19; // ecx@23
  int v20; // edi@23
  int v21; // esi@24
  unsigned int v22; // ecx@24
  int v23; // eax@24
  unsigned int v24; // eax@27
  int v25; // edx@31
  int v26; // ecx@31
  int v27; // eax@33
  int v28; // ecx@34
  int v29; // ecx@35
  int i; // [sp+8h] [bp-8h]@1

  v3 = a1;
  v4 = a2;
  for ( i = *(_DWORD *)(*(_DWORD *)(a1 + 31396) + 1244); v4 != a3; v4 += 32 )
  {
    v5 = *(_DWORD *)v4;
    if ( (*(_DWORD *)v4 & 0xE0000000) != -536870912 )
      break;
    v6 = *(_DWORD *)(v3 + 31396) + 1240;
    v7 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1244);
    v8 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1248);
    if ( v7 == v8 )
    {
      if ( !v8 )
        *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1248) = 1;
      v9 = *(_DWORD *)(v6 + 8);
      if ( v7 >= v9 )
      {
        do
          v9 *= 2;
        while ( v7 >= v9 );
        *(_DWORD *)(v6 + 8) = v9;
      }
      *(_DWORD *)v6 = sub_1002D6F7(v4, v6, *(_DWORD *)v6, *(_DWORD *)(v6 + 8) << 6, 0x10u);
    }
    v10 = *(_DWORD *)v6 + ((*(_DWORD *)(v6 + 4))++ << 6);
    *(_OWORD *)v10 = *(_OWORD *)v4;
    *(_OWORD *)(v10 + 16) = *(_OWORD *)(v4 + 16);
    *(_DWORD *)(v10 + 48) = *(_DWORD *)(v3 + 31424);
    *(_DWORD *)(v10 + 52) = *(_DWORD *)(v3 + 31428);
    if ( (*(_DWORD *)(v10 + 12) & 0x7F800000) == 2139095040 )
    {
      *(_DWORD *)(v10 + 12) = -1082130432;
    }
    else
    {
      v11 = *(float *)(v10 + 12);
      if ( v11 < 4.3702378e30 )
      {
        **(float **)(v3 + 31396) = fminf(**(float **)(v3 + 31396), v11);
        v12 = *(_DWORD *)(v3 + 31396);
        v13 = *(float *)(v10 + 12);
        if ( v13 <= *(float *)(v12 + 4) )
          v13 = *(float *)(v12 + 4);
        *(float *)(v12 + 4) = v13;
      }
    }
    v14 = *(_DWORD *)(v3 + 31396) + 1252;
    v15 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256);
    v16 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260);
    if ( v15 == v16 )
    {
      if ( !v16 )
        *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260) = 1;
      v17 = *(_DWORD *)(v14 + 8);
      if ( v15 >= v17 )
      {
        do
          v17 *= 2;
        while ( v15 >= v17 );
        *(_DWORD *)(v14 + 8) = v17;
      }
      *(_DWORD *)v14 = sub_1002D6F7(v4, v14, *(_DWORD *)v14, 4 * *(_DWORD *)(v14 + 8), 0x10u);
    }
    v18 = *(_DWORD *)(v14 + 4);
    v19 = *(_DWORD *)v14;
    *(_DWORD *)(v14 + 4) = v18 + 1;
    *(_DWORD *)(v19 + 4 * v18) = i;
    v20 = i++ + 1;
    if ( v5 & 0x10000000 )
    {
      v21 = *(_DWORD *)(v3 + 31396) + 1252;
      v22 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256);
      v23 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260);
      if ( v22 == v23 )
      {
        if ( !v23 )
          *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260) = 1;
        v24 = *(_DWORD *)(v21 + 8);
        if ( v22 >= v24 )
        {
          do
            v24 *= 2;
          while ( v22 >= v24 );
          *(_DWORD *)(v21 + 8) = v24;
        }
        *(_DWORD *)v21 = sub_1002D6F7(v4, v20, *(_DWORD *)v21, 4 * *(_DWORD *)(v21 + 8), 0x10u);
      }
      v25 = *(_DWORD *)(v21 + 4);
      v26 = *(_DWORD *)v21;
      *(_DWORD *)(v21 + 4) = v25 + 1;
      *(_DWORD *)(v26 + 4 * v25) = -1;
    }
  }
  v27 = *(_DWORD *)(v3 + 31404);
  if ( *(_DWORD *)(v27 + 8) )
  {
    v28 = *(_DWORD *)(v27 + 4);
    if ( v28 )
      v29 = *(_DWORD *)v27 - 112 + 112 * v28;
    else
      v29 = *(_DWORD *)v27;
  }
  else
  {
    v29 = 0;
  }
  *(_DWORD *)(v29 + 108) = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256) - *(_DWORD *)(v29 + 104);
  return v4;
}

//----- (100594B0) --------------------------------------------------------
int __fastcall sub_100594B0(int a1, int a2, int a3)
{
  int v3; // ebp@1
  int v4; // ebx@1
  int v5; // esi@2
  int v6; // edi@3
  unsigned int v7; // ecx@3
  int v8; // eax@3
  unsigned int v9; // eax@6
  int v10; // ecx@10
  signed int v11; // eax@11
  float v12; // xmm0_4@15
  int v13; // edi@17
  unsigned int v14; // ecx@17
  int v15; // eax@17
  unsigned int v16; // eax@20
  int v17; // edx@24
  int v18; // ecx@24
  int v19; // edi@24
  int v20; // esi@25
  unsigned int v21; // ecx@25
  int v22; // eax@25
  unsigned int v23; // eax@28
  int v24; // edx@32
  int v25; // ecx@32
  int v26; // eax@34
  int v27; // ecx@35
  int v28; // ecx@36
  int v30; // [sp+8h] [bp-8h]@1

  v3 = a1;
  v4 = a2;
  v30 = *(_DWORD *)(*(_DWORD *)(a1 + 31396) + 1244);
  while ( v4 != a3 )
  {
    v5 = *(_DWORD *)v4;
    if ( (*(_DWORD *)v4 & 0xE0000000) != -536870912 )
      break;
    v6 = *(_DWORD *)(v3 + 31396) + 1240;
    v7 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1244);
    v8 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1248);
    if ( v7 == v8 )
    {
      if ( !v8 )
        *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1248) = 1;
      v9 = *(_DWORD *)(v6 + 8);
      if ( v7 >= v9 )
      {
        do
          v9 *= 2;
        while ( v7 >= v9 );
        *(_DWORD *)(v6 + 8) = v9;
      }
      *(_DWORD *)v6 = sub_1002D6F7(v4, v6, *(_DWORD *)v6, *(_DWORD *)(v6 + 8) << 6, 0x10u);
    }
    v10 = *(_DWORD *)v6 + ((*(_DWORD *)(v6 + 4))++ << 6);
    *(_OWORD *)v10 = *(_OWORD *)v4;
    *(_OWORD *)(v10 + 16) = *(_OWORD *)(v4 + 16);
    if ( v4 + 32 == a3 )
    {
      *(_DWORD *)(v3 + 31624) = sub_10059710;
      v11 = 32;
    }
    else
    {
      v11 = 64;
      *(_OWORD *)(v10 + 32) = *(_OWORD *)(v4 + 32);
    }
    v4 += v11;
    *(_DWORD *)(v10 + 48) = *(_DWORD *)(v3 + 31424);
    *(_DWORD *)(v10 + 52) = *(_DWORD *)(v3 + 31428);
    if ( (*(_DWORD *)(v10 + 12) & 0x7F800000) == 2139095040 )
    {
      *(_DWORD *)(v10 + 12) = -1082130432;
    }
    else
    {
      v12 = *(float *)(v10 + 12);
      if ( v12 < 4.3702378e30 )
      {
        **(float **)(v3 + 31396) = fminf(**(float **)(v3 + 31396), v12);
        *(float *)(*(_DWORD *)(v3 + 31396) + 4) = fmaxf(*(float *)(v10 + 12), *(float *)(*(_DWORD *)(v3 + 31396) + 4));
      }
    }
    v13 = *(_DWORD *)(v3 + 31396) + 1252;
    v14 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256);
    v15 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260);
    if ( v14 == v15 )
    {
      if ( !v15 )
        *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260) = 1;
      v16 = *(_DWORD *)(v13 + 8);
      if ( v14 >= v16 )
      {
        do
          v16 *= 2;
        while ( v14 >= v16 );
        *(_DWORD *)(v13 + 8) = v16;
      }
      *(_DWORD *)v13 = sub_1002D6F7(v4, v13, *(_DWORD *)v13, 4 * *(_DWORD *)(v13 + 8), 0x10u);
    }
    v17 = *(_DWORD *)(v13 + 4);
    v18 = *(_DWORD *)v13;
    *(_DWORD *)(v13 + 4) = v17 + 1;
    *(_DWORD *)(v18 + 4 * v17) = v30;
    v19 = v30++ + 1;
    if ( v5 & 0x10000000 )
    {
      v20 = *(_DWORD *)(v3 + 31396) + 1252;
      v21 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256);
      v22 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260);
      if ( v21 == v22 )
      {
        if ( !v22 )
          *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260) = 1;
        v23 = *(_DWORD *)(v20 + 8);
        if ( v21 >= v23 )
        {
          do
            v23 *= 2;
          while ( v21 >= v23 );
          *(_DWORD *)(v20 + 8) = v23;
        }
        *(_DWORD *)v20 = sub_1002D6F7(v4, v19, *(_DWORD *)v20, 4 * *(_DWORD *)(v20 + 8), 0x10u);
      }
      v24 = *(_DWORD *)(v20 + 4);
      v25 = *(_DWORD *)v20;
      *(_DWORD *)(v20 + 4) = v24 + 1;
      *(_DWORD *)(v25 + 4 * v24) = -1;
    }
  }
  v26 = *(_DWORD *)(v3 + 31404);
  if ( *(_DWORD *)(v26 + 8) )
  {
    v27 = *(_DWORD *)(v26 + 4);
    if ( v27 )
      v28 = *(_DWORD *)v26 - 112 + 112 * v27;
    else
      v28 = *(_DWORD *)v26;
  }
  else
  {
    v28 = 0;
  }
  *(_DWORD *)(v28 + 108) = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256) - *(_DWORD *)(v28 + 104);
  return v4;
}
// 10059710: using guessed type int __stdcall sub_10059710(int);

//----- (10059760) --------------------------------------------------------
int __fastcall sub_10059760(int a1, int a2, int a3)
{
  int v3; // ebp@1
  int v4; // ebx@1
  int v5; // esi@2
  int v6; // edi@3
  unsigned int v7; // ecx@3
  int v8; // eax@3
  unsigned int v9; // eax@6
  int v10; // ecx@10
  float v11; // xmm0_4@12
  int v12; // eax@13
  float v13; // xmm0_4@13
  int v14; // edi@16
  unsigned int v15; // ecx@16
  int v16; // eax@16
  unsigned int v17; // eax@19
  int v18; // edx@23
  int v19; // ecx@23
  int v20; // edi@23
  int v21; // esi@24
  unsigned int v22; // ecx@24
  int v23; // eax@24
  unsigned int v24; // eax@27
  int v25; // edx@31
  int v26; // ecx@31
  int v27; // eax@33
  int v28; // ecx@34
  int v29; // ecx@35
  int i; // [sp+8h] [bp-8h]@1

  v3 = a1;
  v4 = a2;
  for ( i = *(_DWORD *)(*(_DWORD *)(a1 + 31396) + 1244); v4 != a3; v4 += 32 )
  {
    v5 = *(_DWORD *)v4;
    if ( (*(_DWORD *)v4 & 0xE0000000) != -536870912 )
      break;
    v6 = *(_DWORD *)(v3 + 31396) + 1240;
    v7 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1244);
    v8 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1248);
    if ( v7 == v8 )
    {
      if ( !v8 )
        *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1248) = 1;
      v9 = *(_DWORD *)(v6 + 8);
      if ( v7 >= v9 )
      {
        do
          v9 *= 2;
        while ( v7 >= v9 );
        *(_DWORD *)(v6 + 8) = v9;
      }
      *(_DWORD *)v6 = sub_1002D6F7(v4, v6, *(_DWORD *)v6, *(_DWORD *)(v6 + 8) << 6, 0x10u);
    }
    v10 = *(_DWORD *)v6 + ((*(_DWORD *)(v6 + 4))++ << 6);
    *(_OWORD *)v10 = *(_OWORD *)v4;
    *(_OWORD *)(v10 + 16) = *(_OWORD *)(v4 + 16);
    if ( (*(_DWORD *)(v10 + 12) & 0x7F800000) == 2139095040 )
    {
      *(_DWORD *)(v10 + 12) = -1082130432;
    }
    else
    {
      v11 = *(float *)(v10 + 12);
      if ( v11 < 4.3702378e30 )
      {
        **(float **)(v3 + 31396) = fminf(**(float **)(v3 + 31396), v11);
        v12 = *(_DWORD *)(v3 + 31396);
        v13 = *(float *)(v10 + 12);
        if ( v13 <= *(float *)(v12 + 4) )
          v13 = *(float *)(v12 + 4);
        *(float *)(v12 + 4) = v13;
      }
    }
    v14 = *(_DWORD *)(v3 + 31396) + 1252;
    v15 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256);
    v16 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260);
    if ( v15 == v16 )
    {
      if ( !v16 )
        *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260) = 1;
      v17 = *(_DWORD *)(v14 + 8);
      if ( v15 >= v17 )
      {
        do
          v17 *= 2;
        while ( v15 >= v17 );
        *(_DWORD *)(v14 + 8) = v17;
      }
      *(_DWORD *)v14 = sub_1002D6F7(v4, v14, *(_DWORD *)v14, 4 * *(_DWORD *)(v14 + 8), 0x10u);
    }
    v18 = *(_DWORD *)(v14 + 4);
    v19 = *(_DWORD *)v14;
    *(_DWORD *)(v14 + 4) = v18 + 1;
    *(_DWORD *)(v19 + 4 * v18) = i;
    v20 = i++ + 1;
    if ( v5 & 0x10000000 )
    {
      v21 = *(_DWORD *)(v3 + 31396) + 1252;
      v22 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256);
      v23 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260);
      if ( v22 == v23 )
      {
        if ( !v23 )
          *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260) = 1;
        v24 = *(_DWORD *)(v21 + 8);
        if ( v22 >= v24 )
        {
          do
            v24 *= 2;
          while ( v22 >= v24 );
          *(_DWORD *)(v21 + 8) = v24;
        }
        *(_DWORD *)v21 = sub_1002D6F7(v4, v20, *(_DWORD *)v21, 4 * *(_DWORD *)(v21 + 8), 0x10u);
      }
      v25 = *(_DWORD *)(v21 + 4);
      v26 = *(_DWORD *)v21;
      *(_DWORD *)(v21 + 4) = v25 + 1;
      *(_DWORD *)(v26 + 4 * v25) = -1;
    }
  }
  v27 = *(_DWORD *)(v3 + 31404);
  if ( *(_DWORD *)(v27 + 8) )
  {
    v28 = *(_DWORD *)(v27 + 4);
    if ( v28 )
      v29 = *(_DWORD *)v27 - 112 + 112 * v28;
    else
      v29 = *(_DWORD *)v27;
  }
  else
  {
    v29 = 0;
  }
  *(_DWORD *)(v29 + 108) = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256) - *(_DWORD *)(v29 + 104);
  return v4;
}

//----- (10059990) --------------------------------------------------------
int __fastcall sub_10059990(int a1, int a2, int a3)
{
  int v3; // ebp@1
  int v4; // ebx@1
  int v5; // esi@2
  int v6; // edi@3
  unsigned int v7; // ecx@3
  int v8; // eax@3
  unsigned int v9; // eax@6
  int v10; // ecx@10
  signed int v11; // eax@11
  float v12; // xmm0_4@15
  int v13; // edi@17
  unsigned int v14; // ecx@17
  int v15; // eax@17
  unsigned int v16; // eax@20
  int v17; // edx@24
  int v18; // ecx@24
  int v19; // edi@24
  int v20; // esi@25
  unsigned int v21; // ecx@25
  int v22; // eax@25
  unsigned int v23; // eax@28
  int v24; // edx@32
  int v25; // ecx@32
  int v26; // eax@34
  int v27; // ecx@35
  int v28; // ecx@36
  int v30; // [sp+8h] [bp-8h]@1

  v3 = a1;
  v4 = a2;
  v30 = *(_DWORD *)(*(_DWORD *)(a1 + 31396) + 1244);
  while ( v4 != a3 )
  {
    v5 = *(_DWORD *)v4;
    if ( (*(_DWORD *)v4 & 0xE0000000) != -536870912 )
      break;
    v6 = *(_DWORD *)(v3 + 31396) + 1240;
    v7 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1244);
    v8 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1248);
    if ( v7 == v8 )
    {
      if ( !v8 )
        *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1248) = 1;
      v9 = *(_DWORD *)(v6 + 8);
      if ( v7 >= v9 )
      {
        do
          v9 *= 2;
        while ( v7 >= v9 );
        *(_DWORD *)(v6 + 8) = v9;
      }
      *(_DWORD *)v6 = sub_1002D6F7(v4, v6, *(_DWORD *)v6, *(_DWORD *)(v6 + 8) << 6, 0x10u);
    }
    v10 = *(_DWORD *)v6 + ((*(_DWORD *)(v6 + 4))++ << 6);
    *(_OWORD *)v10 = *(_OWORD *)v4;
    *(_OWORD *)(v10 + 16) = *(_OWORD *)(v4 + 16);
    if ( v4 + 32 == a3 )
    {
      *(_DWORD *)(v3 + 31624) = sub_10059BE0;
      v11 = 32;
    }
    else
    {
      v11 = 64;
      *(_OWORD *)(v10 + 32) = *(_OWORD *)(v4 + 32);
      *(_OWORD *)(v10 + 48) = *(_OWORD *)(v4 + 48);
    }
    v4 += v11;
    if ( (*(_DWORD *)(v10 + 12) & 0x7F800000) == 2139095040 )
    {
      *(_DWORD *)(v10 + 12) = -1082130432;
    }
    else
    {
      v12 = *(float *)(v10 + 12);
      if ( v12 < 4.3702378e30 )
      {
        **(float **)(v3 + 31396) = fminf(**(float **)(v3 + 31396), v12);
        *(float *)(*(_DWORD *)(v3 + 31396) + 4) = fmaxf(*(float *)(*(_DWORD *)(v3 + 31396) + 4), *(float *)(v10 + 12));
      }
    }
    v13 = *(_DWORD *)(v3 + 31396) + 1252;
    v14 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256);
    v15 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260);
    if ( v14 == v15 )
    {
      if ( !v15 )
        *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260) = 1;
      v16 = *(_DWORD *)(v13 + 8);
      if ( v14 >= v16 )
      {
        do
          v16 *= 2;
        while ( v14 >= v16 );
        *(_DWORD *)(v13 + 8) = v16;
      }
      *(_DWORD *)v13 = sub_1002D6F7(v4, v13, *(_DWORD *)v13, 4 * *(_DWORD *)(v13 + 8), 0x10u);
    }
    v17 = *(_DWORD *)(v13 + 4);
    v18 = *(_DWORD *)v13;
    *(_DWORD *)(v13 + 4) = v17 + 1;
    *(_DWORD *)(v18 + 4 * v17) = v30;
    v19 = v30++ + 1;
    if ( v5 & 0x10000000 )
    {
      v20 = *(_DWORD *)(v3 + 31396) + 1252;
      v21 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256);
      v22 = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260);
      if ( v21 == v22 )
      {
        if ( !v22 )
          *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1260) = 1;
        v23 = *(_DWORD *)(v20 + 8);
        if ( v21 >= v23 )
        {
          do
            v23 *= 2;
          while ( v21 >= v23 );
          *(_DWORD *)(v20 + 8) = v23;
        }
        *(_DWORD *)v20 = sub_1002D6F7(v4, v19, *(_DWORD *)v20, 4 * *(_DWORD *)(v20 + 8), 0x10u);
      }
      v24 = *(_DWORD *)(v20 + 4);
      v25 = *(_DWORD *)v20;
      *(_DWORD *)(v20 + 4) = v24 + 1;
      *(_DWORD *)(v25 + 4 * v24) = -1;
    }
  }
  v26 = *(_DWORD *)(v3 + 31404);
  if ( *(_DWORD *)(v26 + 8) )
  {
    v27 = *(_DWORD *)(v26 + 4);
    if ( v27 )
      v28 = *(_DWORD *)v26 - 112 + 112 * v27;
    else
      v28 = *(_DWORD *)v26;
  }
  else
  {
    v28 = 0;
  }
  *(_DWORD *)(v28 + 108) = *(_DWORD *)(*(_DWORD *)(v3 + 31396) + 1256) - *(_DWORD *)(v28 + 104);
  return v4;
}

//----- (10059BE0) --------------------------------------------------------
int __fastcall sub_10059BE0(int a1, int a2, int a3)
{
  int v3; // eax@1
  int v4; // ecx@2
  int v5; // eax@2

  v3 = *(_DWORD *)(a1 + 31396);
  *(_DWORD *)(a1 + 31624) = sub_10056440;
  if ( *(_DWORD *)(v3 + 1248) )
  {
    v4 = *(_DWORD *)(v3 + 1244);
    v5 = *(_DWORD *)(v3 + 1240);
    if ( v4 )
      v5 = (v4 << 6) + v5 - 64;
  }
  else
  {
    v5 = 0;
  }
  *(_OWORD *)(v5 + 32) = *(_OWORD *)a2;
  *(_OWORD *)(v5 + 48) = *(_OWORD *)(a2 + 16);
  return a2 + 32;
}

//----- (10059C30) --------------------------------------------------------
int __thiscall sub_10059C30(int this)
{
  int v1; // edi@1
  int v2; // ecx@1
  int v3; // ecx@7
  void **v4; // eax@9
  void *v5; // ecx@9
  void *v6; // esi@10
  int result; // eax@11

  v1 = this;
  v2 = *(_DWORD *)(this + 8804);
  if ( v2 )
  {
    (*(void (__stdcall **)(int))(*(_DWORD *)v2 + 8))(v2);
    *(_DWORD *)(v1 + 8804) = 0;
  }
  if ( *(_DWORD *)(v1 + 8812) )
  {
    sub_1002D4A8(*(_DWORD *)(v1 + 8812));
    *(_DWORD *)(v1 + 8812) = 0;
  }
  if ( *(_DWORD *)(v1 + 8816) )
  {
    sub_1002D4A8(*(_DWORD *)(v1 + 8816));
    *(_DWORD *)(v1 + 8816) = 0;
  }
  v3 = *(_DWORD *)(v1 + 8808);
  if ( v3 )
  {
    (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v3 + 8))(*(_DWORD *)(v1 + 8808));
    *(_DWORD *)(v1 + 8808) = 0;
  }
  v4 = *(void ***)(v1 + 8836);
  v5 = *v4;
  *v4 = v4;
  *(_DWORD *)(*(_DWORD *)(v1 + 8836) + 4) = *(_DWORD *)(v1 + 8836);
  *(_DWORD *)(v1 + 8840) = 0;
  if ( v5 != *(void **)(v1 + 8836) )
  {
    do
    {
      v6 = *(void **)v5;
      sub_1000F409(v5);
      v5 = v6;
    }
    while ( v6 != *(void **)(v1 + 8836) );
  }
  sub_10003450(v1 + 8832, 8);
  result = *(_DWORD *)(v1 + 8820);
  *(_DWORD *)(v1 + 8824) = result;
  return result;
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);

//----- (10059D20) --------------------------------------------------------
void __usercall sub_10059D20(int a1@<ecx>, int a2@<ebx>, int a3@<edi>)
{
  int v3; // esi@1
  int v4; // eax@2
  int v5; // eax@8
  int v6; // [sp+20h] [bp-24h]@2
  __int128 v7; // [sp+24h] [bp-20h]@2
  __int64 v8; // [sp+34h] [bp-10h]@2

  v3 = a1;
  if ( !*(_DWORD *)(a1 + 8804) )
  {
    v4 = *(_DWORD *)(a1 + 4);
    v7 = 0i64;
    _mm_storel_epi64((__m128i *)&v8, 0i64);
    *(_QWORD *)&v7 = 8623489024i64;
    *((_QWORD *)&v7 + 1) = 281474976710657i64;
    (*(void (__stdcall **)(int, __int128 *, _DWORD, int *))(*(_DWORD *)v4 + 12))(v4, &v7, 0, &v6);
    *(_DWORD *)(v3 + 8804) = v6;
  }
  if ( !*(_DWORD *)(v3 + 8812) )
    *(_DWORD *)(v3 + 8812) = sub_1002D4C7(a2, a3, 0x2000000u, 0x10u);
  if ( !*(_DWORD *)(v3 + 8816) )
    *(_DWORD *)(v3 + 8816) = sub_1002D4C7(a2, a3, 0x2000000u, 0x10u);
  if ( !*(_DWORD *)(v3 + 8808) )
  {
    v5 = *(_DWORD *)(v3 + 4);
    v7 = 0i64;
    _mm_storel_epi64((__m128i *)&v8, 0i64);
    *(_QWORD *)&v7 = 8623489024i64;
    *((_QWORD *)&v7 + 1) = 281474976710658i64;
    (*(void (__stdcall **)(int, __int128 *, _DWORD, int *))(*(_DWORD *)v5 + 12))(v5, &v7, 0, &v6);
    *(_DWORD *)(v3 + 8808) = v6;
  }
}

//----- (10059E20) --------------------------------------------------------
int __stdcall sub_10059E20(int a1, int a2)
{
  return a1 + 32;
}

//----- (10059E30) --------------------------------------------------------
int __stdcall sub_10059E30(int a1, int a2)
{
  return a1 + 8;
}

//----- (10059E40) --------------------------------------------------------
int __userpurge sub_10059E40@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4)
{
  signed int v4; // esi@1
  int v5; // edx@1
  int v6; // eax@1
  bool v7; // cf@3
  int result; // eax@4
  int v9; // eax@5
  int v10; // [sp+10h] [bp-4h]@1

  v4 = 56;
  v10 = a1;
  v5 = a1 + 9408;
  v6 = a3 + 4;
  while ( *(_DWORD *)v5 == *(_DWORD *)v6 )
  {
    v5 += 4;
    v6 += 4;
    v7 = (unsigned int)v4 < 4;
    v4 -= 4;
    if ( v7 )
      return a3 + 64;
  }
  *(_OWORD *)(a1 + 9408) = *(_OWORD *)(a3 + 4);
  *(_OWORD *)(a1 + 9424) = *(_OWORD *)(a3 + 20);
  *(_OWORD *)(a1 + 9440) = *(_OWORD *)(a3 + 36);
  _mm_storel_epi64((__m128i *)(a1 + 9456), _mm_loadl_epi64((const __m128i *)(a3 + 52)));
  *(_DWORD *)(a1 + 9464) = *(_DWORD *)(a3 + 60);
  v9 = sub_1000A4E0(*(_DWORD *)(a1 + 31396) + 1012, a2, a3);
  sub_100096A0(v9, a3);
  result = a3 + 64;
  *(_BYTE *)(v10 + 8800) = 1;
  return result;
}

//----- (10059EE0) --------------------------------------------------------
int __userpurge sub_10059EE0@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4)
{
  signed int v4; // esi@1
  int v5; // edx@1
  int v6; // eax@1
  bool v7; // cf@3
  int v9; // eax@5

  v4 = 52;
  v5 = a1 + 9472;
  v6 = a3 + 4;
  while ( *(_DWORD *)v5 == *(_DWORD *)v6 )
  {
    v5 += 4;
    v6 += 4;
    v7 = (unsigned int)v4 < 4;
    v4 -= 4;
    if ( v7 )
      return a3 + 64;
  }
  *(_OWORD *)(a1 + 9472) = *(_OWORD *)(a3 + 4);
  *(_OWORD *)(a1 + 9488) = *(_OWORD *)(a3 + 20);
  *(_OWORD *)(a1 + 9504) = *(_OWORD *)(a3 + 36);
  _mm_storel_epi64((__m128i *)(a1 + 9520), _mm_loadl_epi64((const __m128i *)(a3 + 52)));
  v9 = sub_10008BC0(*(_DWORD *)(a1 + 31396) + 1024, a2, a3);
  sub_10009740(v9, a3);
  return a3 + 64;
}

//----- (10059F70) --------------------------------------------------------
int __thiscall sub_10059F70(int this, int a2, int a3)
{
  int v3; // ebp@1
  int v4; // esi@1
  int v5; // edi@1
  int v6; // edx@1
  bool v7; // cf@3
  int result; // eax@4
  int v9; // eax@5

  v3 = this;
  v4 = a2 + 8;
  v5 = 12;
  v6 = this + 9540;
  while ( *(_DWORD *)v6 == *(_DWORD *)v4 )
  {
    v6 += 4;
    v4 += 4;
    v7 = (unsigned int)v5 < 4;
    v5 -= 4;
    if ( v7 )
      return a2 + 32;
  }
  *(_OWORD *)(this + 9540) = *(_OWORD *)(a2 + 8);
  v9 = sub_1000A540(*(_DWORD *)(this + 31396) + 1000, a2, v5);
  *(_DWORD *)v9 = *(_DWORD *)(a2 + 8);
  *(_DWORD *)(v9 + 8) = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(v9 + 4) = *(_DWORD *)(a2 + 16);
  *(_DWORD *)(v9 + 12) = *(_DWORD *)(a2 + 20);
  result = a2 + 32;
  *(_BYTE *)(v3 + 8800) = 1;
  return result;
}

//----- (10059FF0) --------------------------------------------------------
int __thiscall sub_10059FF0(int this, int a2, int a3)
{
  int v3; // edi@1
  int v4; // ebx@1
  int result; // eax@2
  int v6; // ebx@3
  int v7; // eax@4

  v3 = this;
  v4 = *(_DWORD *)(a2 + 4);
  if ( v4 & 0x10 )
  {
    *(_OWORD *)(this + 8864) = *(_OWORD *)(a2 + 4);
    _mm_storel_epi64((__m128i *)(this + 8880), _mm_loadl_epi64((const __m128i *)(a2 + 20)));
    *(_DWORD *)(this + 8888) = *(_DWORD *)(a2 + 28);
    result = a2 + 32;
  }
  else
  {
    v6 = v4 & 0xF;
    if ( sub_100094B0(32 * v6 + this + 8892, a2) )
    {
      v7 = sub_10008BC0(*(_DWORD *)(v3 + 31396) + 4 * (v6 + 2 * (v6 + 131)), v6, v3);
      sub_10009540(v7, a2);
    }
    result = a2 + 32;
  }
  return result;
}

//----- (1005A070) --------------------------------------------------------
int __userpurge sub_1005A070@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4)
{
  signed int v4; // esi@1
  int v5; // edx@1
  int v6; // eax@1
  bool v7; // cf@3
  int v9; // eax@5

  v4 = 20;
  v5 = a1 + 9568;
  v6 = a3 + 4;
  while ( *(_DWORD *)v5 == *(_DWORD *)v6 )
  {
    v5 += 4;
    v6 += 4;
    v7 = (unsigned int)v4 < 4;
    v4 -= 4;
    if ( v7 )
      return a3 + 32;
  }
  *(_OWORD *)(a1 + 9568) = *(_OWORD *)(a3 + 4);
  _mm_storel_epi64((__m128i *)(a1 + 9584), _mm_loadl_epi64((const __m128i *)(a3 + 20)));
  v9 = sub_1000A480(*(_DWORD *)(a1 + 31396) + 1036, a2, a3);
  *(_DWORD *)v9 = *(_DWORD *)(a3 + 4);
  *(_DWORD *)(v9 + 4) = *(_DWORD *)(a3 + 8);
  *(_DWORD *)(v9 + 8) = *(_DWORD *)(a3 + 12);
  *(_DWORD *)(v9 + 12) = *(_DWORD *)(a3 + 16);
  *(_DWORD *)(v9 + 16) = *(_DWORD *)(a3 + 20);
  *(_DWORD *)(v9 + 20) = *(_DWORD *)(a3 + 24);
  return a3 + 32;
}

//----- (1005A110) --------------------------------------------------------
int __userpurge sub_1005A110@<eax>(int a1@<ecx>, int a2@<edi>, int a3, int a4)
{
  return sub_1005A1E0(a3, a1, a2);
}

//----- (1005A120) --------------------------------------------------------
int __thiscall sub_1005A120(int this, int a2, int a3)
{
  int v3; // ebx@1
  int v4; // eax@1
  int v5; // edx@1
  int v6; // esi@1

  v3 = this;
  v4 = *(_DWORD *)(this + 8720);
  *(_OWORD *)(this + 9596) = *(_OWORD *)a2;
  v5 = *(_DWORD *)(a2 + 16);
  v6 = *(_DWORD *)(a2 + 24);
  ++*(_DWORD *)(v3 + 9624);
  sub_10056B50(v4 + (v5 & 0x1FFFFFF), this, this, v4 + ((v5 + v6) & 0x1FFFFFF));
  --*(_DWORD *)(v3 + 9624);
  return a2 + 32;
}

//----- (1005A170) --------------------------------------------------------
int __thiscall sub_1005A170(int this, int a2, int a3)
{
  int result; // eax@1

  result = a3;
  *(_BYTE *)(this + 9612) = 1;
  return result;
}

//----- (1005A180) --------------------------------------------------------
int __stdcall sub_1005A180(int a1, int a2)
{
  return a1 + 16;
}

//----- (1005A190) --------------------------------------------------------
int __userpurge sub_1005A190@<eax>(int a1@<ecx>, int a2@<ebx>, int a3, int a4)
{
  int v4; // esi@1
  int v5; // ecx@1

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 8720);
  *(_DWORD *)(v4 + 9616) |= (*(_DWORD *)(a3 + 4) >> 29) & 3;
  sub_10056B50(
    v5 + (*(_DWORD *)(a3 + 4) & 0x1FFFFFF),
    v4,
    a2,
    v5 + ((*(_DWORD *)(a3 + 4) + *(_DWORD *)(a3 + 12)) & 0x1FFFFFF));
  return a3 + 32;
}

//----- (1005A1E0) --------------------------------------------------------
int __usercall sub_1005A1E0@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<edi>)
{
  int v3; // eax@1
  int v4; // ebx@1
  unsigned int v5; // ecx@1
  unsigned int v6; // esi@1
  signed int v8; // ecx@3
  int v9; // esi@11
  int v10; // eax@11
  unsigned int v11; // ecx@11
  unsigned int v12; // eax@14
  int v13; // eax@18
  unsigned int v14; // edx@18
  int v15; // edi@18
  int v16; // esi@18
  int v17; // esi@18
  int v18; // ecx@18
  int v19; // esi@21
  int v20; // eax@24
  int v21; // eax@27
  int v22; // edx@27
  int v23; // ecx@28
  int v24; // eax@28
  float v25; // xmm0_4@31
  int v26; // esi@33
  int v27; // eax@34
  int v28; // ecx@35
  float v29; // xmm1_4@38
  float v30; // xmm1_4@41
  unsigned int v31; // esi@44
  unsigned int v32; // eax@46
  int v33; // ecx@46
  int v34; // edx@51
  signed int v35; // ecx@51
  __int16 v36; // ax@52
  const void *v37; // edx@54
  int v38; // eax@55
  int v39; // ecx@55
  bool v40; // cf@55
  int v41; // eax@55
  int v42; // edx@66
  unsigned int v43; // xmm1_4@66
  unsigned int v44; // xmm0_4@66
  float v45; // xmm4_4@67
  float v46; // xmm5_4@67
  signed int v47; // xmm0_4@67
  int v48; // eax@67
  signed int v49; // xmm1_4@67
  int v50; // ecx@67
  float v51; // xmm6_4@67
  bool v52; // zf@67
  float v53; // xmm7_4@67
  int v54; // ecx@67
  unsigned int v55; // ebx@68
  int v56; // edx@68
  int v57; // esi@68
  float v58; // xmm3_4@70
  int v59; // eax@71
  __m128 v60; // xmm1@83
  __m128 v61; // xmm1@83
  float v62; // xmm0_4@83
  __m128 v63; // xmm2@83
  __m128 v64; // xmm1@83
  __m128 v65; // xmm0@83
  __m128 v66; // xmm7@83
  __m128 v67; // xmm3@83
  __m128 v68; // xmm5@83
  __m128 v69; // xmm0@83
  __m128 v70; // xmm1@83
  __m128 v71; // xmm0@83
  __m128 v72; // xmm4@83
  __m128 v73; // xmm2@83
  __m128 v74; // xmm0@83
  __m128 v75; // xmm5@83
  __m128 v76; // xmm3@83
  __m128 v77; // xmm0@83
  int v78; // eax@83
  int v79; // esi@85
  int v80; // ecx@85
  __m128 v81; // xmm5@85
  __m128 v82; // xmm7@85
  __m128 v83; // xmm1@85
  __m128 v84; // xmm6@85
  float v85; // xmm4_4@85
  __m128 v86; // xmm2@85
  __m128 v87; // xmm1@85
  __m128 v88; // xmm7@85
  __m128 v89; // xmm0@85
  float v90; // xmm3_4@85
  __m128 *v91; // eax@85
  __m128 v92; // xmm2@86
  __m128 v93; // xmm2@86
  __m128 v94; // xmm0@86
  float v95; // xmm1_4@88
  char v96; // [sp+1Bh] [bp-F5h]@25
  int v97; // [sp+1Ch] [bp-F4h]@18
  unsigned int v98; // [sp+20h] [bp-F0h]@55
  int v99; // [sp+24h] [bp-ECh]@1
  char v100; // [sp+2Bh] [bp-E5h]@69
  unsigned int v101; // [sp+2Ch] [bp-E4h]@55
  unsigned int v102; // [sp+30h] [bp-E0h]@1
  unsigned __int8 v103; // [sp+37h] [bp-D9h]@69
  int v104; // [sp+38h] [bp-D8h]@5
  unsigned int v105; // [sp+3Ch] [bp-D4h]@66
  unsigned int v106; // [sp+40h] [bp-D0h]@66
  unsigned int v107; // [sp+44h] [bp-CCh]@1
  int v108; // [sp+48h] [bp-C8h]@1
  int v109; // [sp+4Ch] [bp-C4h]@38
  unsigned int v110; // [sp+50h] [bp-C0h]@45
  int v111; // [sp+58h] [bp-B8h]@31
  int v112; // [sp+5Ch] [bp-B4h]@3
  __m128 v113; // [sp+60h] [bp-B0h]@67
  __m128 v114; // [sp+70h] [bp-A0h]@83
  __m128 v115; // [sp+80h] [bp-90h]@83
  __m128 v116; // [sp+90h] [bp-80h]@83
  __m128 v117; // [sp+A0h] [bp-70h]@83
  __m128 v118; // [sp+B0h] [bp-60h]@83
  __m128 v119; // [sp+C0h] [bp-50h]@83
  __m128 v120; // [sp+D0h] [bp-40h]@85
  __m128 v121; // [sp+E0h] [bp-30h]@85
  __m128 v122; // [sp+F0h] [bp-20h]@85
  __m128 v123; // [sp+100h] [bp-10h]@85

  v3 = *(_DWORD *)(a1 + 24);
  v4 = a2;
  v102 = a1;
  v5 = *(_DWORD *)(a1 + 28);
  v108 = v4;
  v99 = v3;
  v107 = v5;
  v6 = *(_DWORD *)a1;
  if ( v5 > 0x100000 )
  {
    *(_BYTE *)(v4 + 9612) = 1;
    return a1 + 32;
  }
  *(_DWORD *)(v4 + 9620) += v5;
  v8 = 1;
  v112 = v3 & 2;
  if ( v3 & 2 )
    v8 = 4;
  v104 = v8;
  if ( v3 & 8 )
  {
    v8 += 2;
    v104 = v8;
  }
  if ( v3 & 0x40 )
  {
    v8 += 2;
    v104 = v8;
  }
  if ( v3 & 0x100 )
    v104 = v8 + 4;
  sub_10056A90(v4, (v6 >> 24) & 7);
  v9 = *(_DWORD *)(v4 + 31404);
  v10 = *(_DWORD *)(v9 + 8);
  v11 = *(_DWORD *)(v9 + 4);
  if ( v11 == v10 )
  {
    if ( !v10 )
      *(_DWORD *)(v9 + 8) = 1;
    v12 = *(_DWORD *)(v9 + 8);
    if ( v11 >= v12 )
    {
      do
        v12 *= 2;
      while ( v11 >= v12 );
      *(_DWORD *)(v9 + 8) = v12;
    }
    *(_DWORD *)v9 = sub_1002D6F7(v4, a3, *(_DWORD *)v9, 112 * *(_DWORD *)(v9 + 8), 0x10u);
  }
  v13 = *(_DWORD *)(v9 + 4);
  v14 = v102;
  *(_DWORD *)(v9 + 4) = v13 + 1;
  v15 = *(_DWORD *)v9 + 112 * v13;
  *(_DWORD *)v15 = *(_DWORD *)v14;
  *(_DWORD *)(v15 + 4) = *(_DWORD *)(v14 + 4);
  *(_DWORD *)(v15 + 8) = *(_DWORD *)(v14 + 8);
  *(_DWORD *)(v15 + 12) = *(_DWORD *)(v14 + 12);
  *(_DWORD *)(v15 + 16) = *(_DWORD *)(v14 + 16);
  *(_DWORD *)(v15 + 20) = *(_DWORD *)(v14 + 20);
  v16 = *(_DWORD *)(v15 + 4) >> 27;
  v97 = (*(_DWORD *)(v4 + 9600) >> 27) & 3;
  v17 = v16 & 3;
  *(_DWORD *)v15 ^= *(_DWORD *)(v4 + 9596) & 0x7FFF0CF;
  *(_DWORD *)(v15 + 4) ^= *(_DWORD *)(v4 + 9600);
  *(_DWORD *)(v15 + 8) ^= *(_DWORD *)(v4 + 9604);
  *(_DWORD *)(v15 + 16) ^= *(_DWORD *)(v4 + 9604);
  *(_DWORD *)(v15 + 12) ^= *(_DWORD *)(v4 + 9608);
  *(_DWORD *)(v15 + 20) ^= *(_DWORD *)(v4 + 9608);
  *(_DWORD *)v15 &= 0xFFFFF0CF;
  v18 = *(_DWORD *)v15;
  if ( (unsigned int)v97 >= 2 )
  {
    if ( (unsigned int)v17 >= 2 )
      v19 = ~((v97 ^ v17) << 27);
    else
      v19 = v17 << 27;
    *(_DWORD *)(v15 + 4) ^= (*(_DWORD *)(v15 + 4) ^ v19) & 0x18000000;
  }
  else
  {
    *(_DWORD *)(v15 + 4) ^= (*(_DWORD *)(v15 + 4) ^ (v97 << 27)) & 0x18000000;
  }
  *(_DWORD *)v15 = v18 ^ (v18 ^ (*(_DWORD *)(v4 + 31408) << 24)) & 0x7000000;
  *(_DWORD *)(v15 + 24) = *(_DWORD *)(v4 + 31416);
  *(_DWORD *)(v15 + 28) = *(_DWORD *)(v4 + 31420);
  v20 = *(_DWORD *)(v4 + 31408);
  if ( v20 == 1 || (v96 = 1, v20 == 3) )
    v96 = 0;
  v21 = *(_DWORD *)(v4 + 31396);
  v22 = v14 + 32;
  v102 = v22;
  if ( *(_DWORD *)(v21 + 1008) )
  {
    v23 = *(_DWORD *)(v21 + 1004);
    v24 = *(_DWORD *)(v21 + 1000);
    if ( v23 )
      v24 = 16 * v23 + v24 - 16;
  }
  else
  {
    v24 = 0;
  }
  v25 = *(float *)(v24 + 4);
  v111 = v24;
  if ( (v25 != 0.0) != (*(float *)v24 != 0.0) )
    *(_DWORD *)(v15 + 4) ^= (*(_DWORD *)(v15 + 4) >> 1) & 0x8000000;
  *(_WORD *)(v15 + 36) = *(_WORD *)(*(_DWORD *)(v4 + 31396) + 1004) - 1;
  *(_WORD *)(v15 + 38) = *(_WORD *)(*(_DWORD *)(v4 + 31396) + 1016) - 1;
  v26 = *(_DWORD *)(v4 + 31396);
  if ( *(_DWORD *)(v26 + 1020) )
  {
    v27 = *(_DWORD *)(v26 + 1016);
    if ( v27 )
      v28 = *(_DWORD *)(v26 + 1012) - 80 + 80 * v27;
    else
      v28 = *(_DWORD *)(v26 + 1012);
  }
  else
  {
    v28 = 0;
  }
  v29 = 1.0 / *(float *)(v28 + 64);
  v109 = v28;
  *(float *)&v97 = v29;
  if ( (LODWORD(v29) & 0x7F800000) != 2139095040 && v29 < 4.3702378e30 )
  {
    *(float *)v26 = fminf(*(float *)v26, v29);
    *(float *)(*(_DWORD *)(v4 + 31396) + 4) = fmaxf(*(float *)(*(_DWORD *)(v4 + 31396) + 4), v29);
  }
  v30 = 1.0 / *(float *)(v28 + 68);
  *(float *)&v97 = 1.0 / *(float *)(v28 + 68);
  if ( (v97 & 0x7F800000) != 2139095040 && v30 < 4.3702378e30 )
  {
    **(float **)(v4 + 31396) = fminf(**(float **)(v4 + 31396), v30);
    *(float *)(*(_DWORD *)(v4 + 31396) + 4) = fmaxf(*(float *)(*(_DWORD *)(v4 + 31396) + 4), v30);
  }
  *(_DWORD *)(v15 + 104) = v22 & 0x1FFFFFF;
  sub_10002D30(v4 + 8832, (int)&v97, v15 + 104);
  v31 = v97;
  if ( v97 == *(_DWORD *)(v4 + 8836) )
  {
    v97 = v15 + 104;
    sub_1000AA90(v4 + 8832, (int)&v110, v4 + 8832, (int)&v97, v4 + 8832);
    v31 = v110;
    v97 = v110;
  }
  *(_DWORD *)(v15 + 108) = *(_DWORD *)(v31 + 36);
  v32 = v99 | 0x80000000;
  *(_DWORD *)(v15 + 32) = v99 | 0x80000000;
  *(_DWORD *)(v15 + 32) = v32 ^ (v32 ^ (*(_DWORD *)(*(_DWORD *)(v4 + 31396) + 32) << 24)) & 0x1F000000;
  v33 = v104;
  *(_BYTE *)(v15 + 34) = 4 * v104;
  if ( v96 )
  {
    if ( (*(_BYTE *)v15 & 0xC0) == -64
      && (*(_DWORD *)(v15 + 8) != *(_DWORD *)(v15 + 16) || *(_DWORD *)(v15 + 12) != *(_DWORD *)(v15 + 20)) )
      *(_DWORD *)(v15 + 32) |= 0x40000000u;
    v34 = v15 + 46;
    *(_WORD *)(v15 + 42) = *(_WORD *)(*(_DWORD *)(v4 + 31396) + 1028) - 1;
    v35 = 0;
    *(_WORD *)(v15 + 40) = *(_WORD *)(*(_DWORD *)(v4 + 31396) + 1040) - 1;
    *(_OWORD *)(v15 + 76) = *(_OWORD *)(v4 + 8864);
    _mm_storel_epi64((__m128i *)(v15 + 92), _mm_loadl_epi64((const __m128i *)(v4 + 8880)));
    *(_DWORD *)(v15 + 100) = *(_DWORD *)(v4 + 8888);
    do
    {
      v34 += 8;
      *(_WORD *)(v34 - 10) = *(_WORD *)(v35 + *(_DWORD *)(v4 + 31396) + 1052) - 1;
      *(_WORD *)(v34 - 8) = *(_WORD *)(v35 + *(_DWORD *)(v4 + 31396) + 1064) - 1;
      *(_WORD *)(v34 - 6) = *(_WORD *)(v35 + *(_DWORD *)(v4 + 31396) + 1076) - 1;
      v36 = *(_WORD *)(v35 + *(_DWORD *)(v4 + 31396) + 1088);
      v35 += 48;
      *(_WORD *)(v34 - 4) = v36 - 1;
    }
    while ( v35 < 192 );
    v33 = v104;
  }
  v37 = (const void *)v102;
  if ( !byte_102394C9 )
    goto LABEL_67;
  v98 = v102;
  v38 = v107 * v33;
  v39 = *(_DWORD *)(v15 + 104) + *(_DWORD *)(v4 + 8812);
  v38 *= 4;
  v99 = v38;
  v40 = (unsigned int)v38 < 4;
  v41 = v38 - 4;
  v101 = v41;
  if ( !v40 )
  {
    while ( 1 )
    {
      v4 = v108;
      if ( *(_DWORD *)v39 != *(_DWORD *)v98 )
        break;
      v39 += 4;
      v98 += 4;
      v40 = v101 < 4;
      v41 = v101 - 4;
      v101 -= 4;
      if ( v40 )
        goto LABEL_58;
    }
LABEL_59:
    v4 = v108;
    if ( *(_BYTE *)v39 == *(_BYTE *)v98 )
    {
      if ( v101 == -3 )
        goto LABEL_66;
      v37 = (const void *)v102;
      if ( *(_BYTE *)(v39 + 1) == *(_BYTE *)(v98 + 1) )
      {
        if ( v101 == -2 )
          goto LABEL_66;
        v4 = v108;
        if ( *(_BYTE *)(v39 + 2) == *(_BYTE *)(v98 + 2) && (v101 == -1 || *(_BYTE *)(v39 + 3) == *(_BYTE *)(v98 + 3)) )
          goto LABEL_66;
      }
    }
LABEL_67:
    v113.m128_i32[0] = *(_DWORD *)(v15 + 104);
    v113.m128_i32[1] = 4 * v107 * v104;
    sub_100278E0((void *)((_DWORD)v113.m128_f32[0] + *(_DWORD *)(v4 + 8812)), v37, 4 * v107 * v104);
    v45 = 3.4028235e38;
    v46 = -3.4028235e38;
    v47 = 2139095039;
    v48 = *(_DWORD *)(v4 + 8816);
    v49 = -8388609;
    v50 = *(_DWORD *)(v15 + 104) >> 2;
    v51 = 3.4028235e38;
    v52 = v107 == 0;
    v53 = -3.4028235e38;
    *(_DWORD *)(v15 + 108) = 0;
    v106 = 2139095039;
    v54 = v48 + 4 * v50;
    v105 = 2139095039;
    v101 = 2139095039;
    *(float *)&v110 = -3.4028235e38;
    v99 = -8388609;
    v98 = -8388609;
    if ( !v52 )
    {
      v55 = 0;
      v56 = v102;
      v57 = 0;
      v99 = 4 * v104;
      do
      {
        v103 = *(_BYTE *)(v56 + 3);
        v100 = (v103 >> 5) & 3;
        if ( v112 )
        {
          v45 = fminf(*(float *)(v56 + 4), v45);
          v46 = fmaxf(*(float *)(v56 + 4), v46);
          v51 = fminf(*(float *)(v56 + 8), v51);
          v47 = fminf(*(float *)(v56 + 12), *(float *)&v101);
          v58 = fmaxf(*(float *)(v56 + 12), *(float *)&v98);
          v53 = fmaxf(*(float *)(v56 + 8), v53);
          v101 = v47;
          v49 = LODWORD(v58);
          v98 = LODWORD(v58);
        }
        v59 = v55 - 2;
        if ( v100 != 3 )
          v59 = v57;
        v57 = v59;
        if ( v100 == 2 )
        {
          *(_DWORD *)v54 = -1;
          *(_DWORD *)(v54 + 4) = v59;
          *(_DWORD *)(v54 + 8) = v55 - 1;
          *(_DWORD *)(v54 + 12) = v55;
          *(_DWORD *)(v54 + 16) = -1;
          v54 += 20;
          *(_DWORD *)(v15 + 108) += 5;
        }
        else
        {
          *(_DWORD *)v54 = v55;
          v54 += 4;
          ++*(_DWORD *)(v15 + 108);
          if ( (v103 & 0x80u) != 0 )
          {
            *(_DWORD *)v54 = -1;
            v54 += 4;
            ++*(_DWORD *)(v15 + 108);
          }
        }
        v56 += v99;
        ++v55;
      }
      while ( v55 < v107 );
      v31 = v97;
      v4 = v108;
      v102 = v56;
      v99 = LODWORD(v53);
      v105 = LODWORD(v51);
      *(float *)&v110 = v46;
      v106 = LODWORD(v45);
    }
    *(float *)(v31 + 12) = v45;
    *(float *)(v31 + 16) = v46;
    *(float *)(v31 + 20) = v51;
    *(float *)(v31 + 24) = v53;
    *(_DWORD *)(v31 + 28) = v47;
    *(_DWORD *)(v31 + 32) = v49;
    *(_DWORD *)(v31 + 36) = *(_DWORD *)(v15 + 108);
    v113.m128_i32[2] = *(_DWORD *)(v15 + 108);
    sub_1000A3B0(v4 + 8820, (unsigned int)&v113);
    v42 = v102;
    goto LABEL_80;
  }
LABEL_58:
  if ( v41 != -4 )
    goto LABEL_59;
LABEL_66:
  v42 = (int)((char *)v37 + v99);
  v43 = *(_DWORD *)(v31 + 28);
  v106 = *(_DWORD *)(v31 + 12);
  *(float *)&v110 = *(float *)(v31 + 16);
  v105 = *(_DWORD *)(v31 + 20);
  v99 = *(_DWORD *)(v31 + 24);
  v44 = *(_DWORD *)(v31 + 32);
  v101 = v43;
  v98 = v44;
LABEL_80:
  if ( v96 || *(_DWORD *)(v15 + 4) < 0x20000000u )
  {
    if ( *(_BYTE *)(v4 + 8800) )
    {
      v119 = (__m128)xmmword_1006EE70;
      v60 = (__m128)*(_DWORD *)v111;
      v60.m128_f32[0] = v60.m128_f32[0] * 0.003125;
      v113 = _mm_unpacklo_ps(_mm_unpacklo_ps(v60, 0i64), 0i64);
      v61 = (__m128)*(_DWORD *)(v111 + 4);
      v61.m128_f32[0] = v61.m128_f32[0] * -0.0041666669;
      v62 = *(float *)(v111 + 12) * 0.0041666669;
      v63 = _mm_unpacklo_ps(0i64, _mm_unpacklo_ps(v61, 0i64));
      v64 = (__m128)1065353216i64;
      v114 = v63;
      v64.m128_f32[0] = 1.0 - v62;
      v65 = (__m128)*(_DWORD *)(v111 + 8);
      v65.m128_f32[0] = (float)(v65.m128_f32[0] * 0.003125) - 1.0;
      v66 = *(__m128 *)v109;
      v67 = *(__m128 *)(v109 + 32);
      v68 = *(__m128 *)v109;
      v69 = _mm_unpacklo_ps(_mm_unpacklo_ps(v65, (__m128)1065353216i64), _mm_unpacklo_ps(v64, 0i64));
      v70 = *(__m128 *)(v109 + 48);
      v115 = v69;
      v71 = *(__m128 *)(v109 + 16);
      v72 = _mm_shuffle_ps(v68, v71, 68);
      v73 = _mm_shuffle_ps(v66, v71, -18);
      v74 = _mm_shuffle_ps(v67, v70, 68);
      v75 = _mm_shuffle_ps(v72, v74, -35);
      v116 = v113;
      v76 = _mm_shuffle_ps(v67, v70, -18);
      v117 = v114;
      v118 = v115;
      v77 = _mm_shuffle_ps(v72, v74, -120);
      sub_10008390((int)&v116, v77);
      *(_OWORD *)(v4 + 8736) = v77;
      *(_OWORD *)(v4 + 8752) = v75;
      *(_OWORD *)(v4 + 8768) = _mm_shuffle_ps(v73, v76, -120);
      *(_OWORD *)(v4 + 8784) = _mm_shuffle_ps(v73, v76, -35);
      *(_BYTE *)(v4 + 8800) = 0;
    }
    else
    {
      v78 = v109;
    }
    v79 = 0;
    v80 = 0;
    v81 = (__m128)v110;
    v82 = (__m128)(unsigned int)v99;
    v116 = _mm_unpacklo_ps(
             _mm_unpacklo_ps((__m128)v106, (__m128)v101),
             _mm_unpacklo_ps((__m128)v105, (__m128)1065353216i64));
    v117 = _mm_unpacklo_ps(
             _mm_unpacklo_ps((__m128)v110, (__m128)v101),
             _mm_unpacklo_ps((__m128)v105, (__m128)1065353216i64));
    v118 = _mm_unpacklo_ps(
             _mm_unpacklo_ps((__m128)v106, (__m128)v101),
             _mm_unpacklo_ps((__m128)(unsigned int)v99, (__m128)1065353216i64));
    v83 = (__m128)(unsigned int)v99;
    v99 = 0;
    v119 = _mm_unpacklo_ps(_mm_unpacklo_ps((__m128)v110, (__m128)v101), _mm_unpacklo_ps(v83, (__m128)1065353216i64));
    v84 = *(__m128 *)(v4 + 8736);
    *(float *)&v110 = 0.0;
    v120 = _mm_unpacklo_ps(
             _mm_unpacklo_ps((__m128)v106, (__m128)v98),
             _mm_unpacklo_ps((__m128)v105, (__m128)1065353216i64));
    v121 = _mm_unpacklo_ps(_mm_unpacklo_ps(v81, (__m128)v98), _mm_unpacklo_ps((__m128)v105, (__m128)1065353216i64));
    v85 = *(float *)(v78 + 68);
    v86 = _mm_unpacklo_ps(_mm_unpacklo_ps((__m128)v106, (__m128)v98), _mm_unpacklo_ps(v82, (__m128)1065353216i64));
    v87 = v82;
    v88 = *(__m128 *)(v4 + 8752);
    v106 = 0;
    v122 = v86;
    v89 = *(__m128 *)(v4 + 8768);
    v105 = 0;
    v90 = *(float *)(v78 + 64);
    v91 = &v116;
    v123 = _mm_unpacklo_ps(_mm_unpacklo_ps(v81, (__m128)v98), _mm_unpacklo_ps(v87, (__m128)1065353216i64));
    v114 = v89;
    v97 = 8;
    do
    {
      v92 = _mm_add_ps(
              _mm_add_ps(
                _mm_add_ps(
                  _mm_mul_ps(_mm_shuffle_ps(COERCE__M128(v91->m128_f32[0]), COERCE__M128(v91->m128_f32[0]), -86), v89),
                  *(__m128 *)(v4 + 8784)),
                _mm_mul_ps(_mm_shuffle_ps(COERCE__M128(v91->m128_f32[0]), COERCE__M128(v91->m128_f32[0]), 85), v88)),
              _mm_mul_ps(_mm_shuffle_ps(COERCE__M128(v91->m128_f32[0]), COERCE__M128(v91->m128_f32[0]), 0), v84));
      v93 = _mm_div_ps(v92, _mm_shuffle_ps(v92, v92, -1));
      v115 = v93;
      v94 = _mm_shuffle_ps(v93, v93, -86);
      if ( v94.m128_f32[0] >= v93.m128_f32[0] )
        ++v99;
      LODWORD(v95) = (unsigned __int128)_mm_xor_ps(v94, (__m128)(unsigned int)xmmword_1006EEE0);
      if ( v93.m128_f32[0] >= v95 )
        ++v110;
      if ( v94.m128_f32[0] >= v115.m128_f32[1] )
        ++v106;
      if ( v115.m128_f32[1] >= v95 )
        ++v105;
      if ( v94.m128_f32[0] >= v90 )
        ++v79;
      if ( v85 >= v94.m128_f32[0] )
        ++v80;
      v89 = v114;
      ++v91;
      --v97;
    }
    while ( *(float *)&v97 != 0.0 );
    if ( !v99 || *(float *)&v110 == 0.0 || !v106 || !v105 || !v79 || !v80 )
      *(_DWORD *)(v15 + 108) = 0;
  }
  if ( *(_DWORD *)(v15 + 108) )
    *(_DWORD *)(*(_DWORD *)(v4 + 31396) + 36) += v107;
  return v42;
}
// 1006EE70: using guessed type __int128 xmmword_1006EE70;
// 1006EEE0: using guessed type __int128 xmmword_1006EEE0;
// 102394C9: using guessed type char byte_102394C9;

//----- (1005B530) --------------------------------------------------------
int __userpurge sub_1005B530@<eax>(__int16 a1@<dx>, __m128d a2@<xmm3>, __m128d a3@<xmm4>, int a4)
{
  int v4; // edx@1
  int v5; // esi@1
  int result; // eax@5
  int v7; // ecx@13
  unsigned int v8; // edx@13
  char v9; // al@13
  signed int v10; // ecx@17
  int v11; // edx@23
  int v12; // edx@24
  int v13; // eax@29

  v4 = a1 & 0x1FFF;
  v5 = dword_1007CE14;
  if ( (unsigned int)(v4 - 512) <= 0x1FF )
    *(_BYTE *)(dword_1007CE14 + 8724) = 1;
  if ( (unsigned int)v4 >= 0x1000 )
    *(_BYTE *)(v5 + 8725) = 1;
  result = a4;
  *(_DWORD *)(v4 + v5 + 512) = a4;
  if ( (unsigned int)v4 > 0x5C )
  {
    v11 = v4 - 208;
    if ( v11 )
    {
      v12 = v11 - 116;
      if ( v12 )
      {
        if ( v12 == 28 && a4 < 0 )
          result = sub_1005B6A0(v5);
      }
      else if ( a4 < 0 )
      {
        v13 = *(_DWORD *)(v5 + 8704);
        *(_DWORD *)(v5 + 31412) = 1;
        result = (*(_DWORD *)(v13 + 296) >> 20) & 0xF;
        *(_DWORD *)(v5 + 31400) = result;
      }
      return result;
    }
    return sub_100550F0(v5);
  }
  if ( v4 == 92 )
    return sub_100550F0(v5);
  if ( v4 == 8 )
  {
    if ( a4 & 1 )
      *(_DWORD *)(v5 + 31624) = sub_10056440;
  }
  else
  {
    if ( v4 != 20 )
    {
      if ( v4 != 68 )
        return result;
      return sub_100550F0(v5);
    }
    if ( a4 )
    {
      v7 = 1264 * ((*(_DWORD *)(*(_DWORD *)(v5 + 8704) + 32) >> 20) & 0xF) + v5 + 11172;
      *(_DWORD *)(v5 + 31440) = v7;
      v8 = 45 * (*(_DWORD *)(v7 + 36) + *(_DWORD *)(v7 + 1244));
      v9 = *(_BYTE *)(v5 + 8732);
      if ( v9 )
      {
        v8 >>= 2;
      }
      else if ( v8 < 0xF4240 )
      {
        v8 = 1000000;
      }
      v10 = 2;
      if ( v9 )
        v10 = 65538;
      (*(void (__fastcall **)(signed int, unsigned int))(dword_1007CD9C + 384))(v10, v8);
      sub_100546A0(v5, a2, a3);
      result = *(_DWORD *)(v5 + 8704);
      if ( !(*(_DWORD *)(result + 96) & 0x1000000) )
        ++dword_1007CDAC;
    }
  }
  return result;
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDAC: using guessed type int dword_1007CDAC;
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005B6A0) --------------------------------------------------------
int __thiscall sub_1005B6A0(int this)
{
  int v1; // esi@1
  __int16 v2; // cx@1
  int result; // eax@1

  v1 = this;
  *(_DWORD *)(*(_DWORD *)(this + 31396) + 24) = *(_DWORD *)(*(_DWORD *)(this + 8704) + 316) & 0x3F;
  v2 = *(_WORD *)(*(_DWORD *)(this + 8704) + 318);
  *(_DWORD *)(*(_DWORD *)(v1 + 31396) + 28) = v2 & 0xF;
  result = *(_DWORD *)(v1 + 31396);
  ++*(_DWORD *)(result + 32);
  *(_DWORD *)(v1 + 31408) = -1;
  return result;
}

//----- (1005B6F0) --------------------------------------------------------
int __usercall sub_1005B6F0@<eax>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // esi@1
  int v3; // ecx@1
  __int16 v4; // cx@3
  int result; // eax@3

  v2 = a1;
  v3 = 1264 * *(_DWORD *)(a1 + 31400) + a1 + 11172;
  *(_DWORD *)(v2 + 31396) = v3;
  sub_10009A10(v3);
  if ( *(_BYTE *)(v2 + 8732) )
  {
    sub_10009AC0(*(_DWORD *)(v2 + 31396), a2, v2 + 8892, v2 + 9404, v2 + 9468, v2 + 9532, v2 + 9564);
    *(_BYTE *)(v2 + 8800) = 1;
  }
  *(_DWORD *)(*(_DWORD *)(v2 + 31396) + 16) = *(_DWORD *)(*(_DWORD *)(v2 + 8704) + 316) & 0x3F;
  v4 = *(_WORD *)(*(_DWORD *)(v2 + 8704) + 318);
  result = *(_DWORD *)(v2 + 31396);
  *(_DWORD *)(result + 20) = v4 & 0xF;
  *(_DWORD *)(v2 + 31408) = -1;
  *(_DWORD *)(v2 + 31412) = 0;
  return result;
}

//----- (1005B970) --------------------------------------------------------
int __usercall sub_1005B970@<eax>(int a1@<ecx>, int a2@<ebx>)
{
  int v2; // ebp@0
  int v3; // esi@1
  int v4; // edi@1

  v3 = a1;
  sub_1002D4A8(*(_DWORD *)(a1 + 31444));
  *(_DWORD *)(v3 + 31444) = 0;
  sub_1000F684(v2, v3 + 11172, 1264, 16, (int)sub_1000A280);
  sub_10002870(v3 + 8832, a2);
  v4 = *(_DWORD *)(v3 + 8820);
  if ( v4 )
  {
    sub_1000A6F0(a2, v4, (LPVOID)v4, (*(_DWORD *)(v3 + 8828) - v4) / 12);
    *(_DWORD *)(v3 + 8820) = 0;
    *(_DWORD *)(v3 + 8824) = 0;
    *(_DWORD *)(v3 + 8828) = 0;
  }
  return sub_100026E0(v3, a2);
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);

//----- (1005BA30) --------------------------------------------------------
void *__thiscall sub_1005BA30(void *this)
{
  int v1; // ebp@0
  void *v2; // edi@1
  int v3; // edx@1
  int v4; // ST24_4@1
  int v5; // esi@1
  unsigned int v6; // edx@1
  int v7; // ecx@2
  int v8; // eax@2
  void *result; // eax@3
  void *v10; // [sp+10h] [bp-10h]@1

  v2 = this;
  v10 = this;
  sub_10042AF0(this);
  v3 = dword_1007CD9C;
  *((_DWORD *)v2 + 2176) = (char *)v2 + 512;
  *((_DWORD *)v2 + 2177) = *(_DWORD *)(v3 + 320);
  *((_DWORD *)v2 + 2178) = *(_DWORD *)(v3 + 344);
  *((_DWORD *)v2 + 2179) = *(_DWORD *)(v3 + 324);
  *((_DWORD *)v2 + 2180) = *(_DWORD *)(v3 + 352);
  *((_BYTE *)v2 + 8732) = 0;
  *((_DWORD *)v2 + 2205) = 0;
  *((_DWORD *)v2 + 2206) = 0;
  *((_DWORD *)v2 + 2207) = 0;
  v4 = (int)((char *)v2 + 8832);
  v5 = (int)((char *)v2 + 8836);
  *(_DWORD *)v4 = 0;
  *(_DWORD *)v5 = 0;
  *(_DWORD *)(v5 + 4) = 0;
  *(_DWORD *)v5 = sub_1000AA60(0, 0);
  *(_DWORD *)(v4 + 12) = 0;
  *(_DWORD *)(v4 + 16) = 0;
  *(_DWORD *)(v4 + 20) = 0;
  *(_DWORD *)v4 = 1065353216;
  sub_10003450((int)((char *)v2 + 8832), 8);
  *((_DWORD *)v10 + 2351) = 0;
  *((_DWORD *)v10 + 2367) = 0;
  *((_DWORD *)v10 + 2383) = 0;
  *((_DWORD *)v10 + 2391) = 0;
  *((_BYTE *)v10 + 9696) = 1;
  sub_10028330((char *)v10 + 9712, 0, 0x520u);
  *((_BYTE *)v10 + 11024) = 1;
  sub_10028330((char *)v10 + 11028, 0, 0x70u);
  *((_BYTE *)v10 + 11140) = 1;
  *(_OWORD *)((char *)v10 + 11144) = 0i64;
  sub_1000F76B(v1, (int)((char *)v10 + 11172), 1264, 16, (int)sub_1000A0E0, (int)sub_1000A280);
  *((_DWORD *)v10 + 7861) = 0;
  *((_DWORD *)v10 + 7862) = 0;
  *((_DWORD *)v10 + 7863) = 0;
  *((_DWORD *)v10 + 7895) = 0;
  *((_DWORD *)v10 + 7896) = 0;
  *((_DWORD *)v10 + 7905) = 0;
  v6 = 0;
  *((_DWORD *)v10 + 7904) = 0;
  *((_DWORD *)v10 + 7903) = 0;
  *((_DWORD *)v10 + 7902) = 0;
  *((_BYTE *)v10 + 31604) = 0;
  *((_DWORD *)v10 + 8040) = 0;
  *((_DWORD *)v10 + 7906) = sub_10056440;
  *((_DWORD *)v10 + 2201) = 0;
  *((_DWORD *)v10 + 2203) = 0;
  *((_DWORD *)v10 + 2204) = 0;
  *((_DWORD *)v10 + 2202) = 0;
  do
  {
    *((_DWORD *)v10 + dword_1006D000[v6] + 12137) = *(int (__stdcall **)(int, int))((char *)&off_1006D004 + v6 * 4);
    *((_DWORD *)v10 + dword_1006D008[v6] + 12137) = *(int (__stdcall **)(int, int))((char *)&off_1006D00C + v6 * 4);
    *((_DWORD *)v10 + dword_1006D010[v6] + 12137) = *(int (__stdcall **)(int, int))((char *)&off_1006D014 + v6 * 4);
    v7 = dword_1006D018[v6];
    v8 = *(int *)((char *)&off_1006D01C + v6 * 4);
    v6 += 8;
    *((_DWORD *)v10 + v7 + 12137) = v8;
  }
  while ( v6 < 32 );
  *((_DWORD *)v10 + 2422) = 0;
  *((_DWORD *)v10 + 2423) = 0;
  sub_10028330((char *)v10 + 9696, 0, 0x530u);
  *((_DWORD *)v10 + 2411) = 0;
  result = v10;
  *((_DWORD *)v10 + 2412) = 0;
  *((_DWORD *)v10 + 2415) = 0;
  *((_DWORD *)v10 + 2413) = 0;
  *((_DWORD *)v10 + 2414) = 0;
  *((_DWORD *)v10 + 2419) = 0;
  *((_DWORD *)v10 + 2421) = 0;
  *((_DWORD *)v10 + 2420) = 0;
  *((_DWORD *)v10 + 2416) = 0;
  *((_DWORD *)v10 + 2418) = 0;
  *((_DWORD *)v10 + 2417) = 0;
  return result;
}
// 1006D000: using guessed type int dword_1006D000[];
// 1006D004: using guessed type int (__stdcall *off_1006D004)(int, int);
// 1006D008: using guessed type int dword_1006D008[];
// 1006D00C: using guessed type int (__stdcall *off_1006D00C)(int, int);
// 1006D010: using guessed type int dword_1006D010[];
// 1006D014: using guessed type int (__stdcall *off_1006D014)(int, int);
// 1006D018: using guessed type int dword_1006D018[];
// 1006D01C: using guessed type int (__stdcall *off_1006D01C)(int, int);
// 1007CD9C: using guessed type int dword_1007CD9C;

//----- (1005BD80) --------------------------------------------------------
void __fastcall sub_1005BD80(int a1, unsigned int a2)
{
  int v2; // edi@1
  int v3; // esi@1
  int v4; // ebx@1

  v2 = dword_1007CE14;
  v3 = a1;
  v4 = a1 + 4 * (a2 >> 2);
  if ( *(_DWORD *)(dword_1007CE14 + 31412) )
    sub_1005B6F0(dword_1007CE14, v4);
  for ( ; v3 != v4; v3 = (*(int (__fastcall **)(_DWORD, _DWORD, _DWORD))(v2 + 31624))(v2, v3, v4) )
    ;
}
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005BDC0) --------------------------------------------------------
void sub_1005BDC0()
{
  int v0; // ecx@1
  int v1; // eax@4
  bool v2; // zf@9
  unsigned __int8 v3; // dl@10
  unsigned int v4; // ecx@15

  v0 = dword_1007CD9C;
  if ( !dword_1007CD9C )
    return;
  if ( *(_BYTE *)(dword_1007CD9C + 33) && *(_BYTE *)(dword_1007CD9C + 276) )
  {
    v1 = dword_1007CE14;
    if ( !dword_1007CE14 )
      goto LABEL_7;
    byte_1007CDB0 = byte_1007CDB0 == 0;
    sub_100537D0(dword_1007CD9C);
    v0 = dword_1007CD9C;
  }
  v1 = dword_1007CE14;
LABEL_7:
  if ( *(_BYTE *)(v0 + 142) )
  {
    if ( v1 )
    {
      v2 = byte_1007CDB0 == 0;
      *(_DWORD *)(v1 + 11164) = 0;
      *(_DWORD *)(v1 + 11168) = 0;
      if ( !v2 )
      {
        v3 = *(_BYTE *)(v0 + 279);
        if ( *(_BYTE *)(v1 + 11160) != v3 )
        {
          *(_BYTE *)(v1 + 11160) = v3;
          ShowCursor(v3);
          v0 = dword_1007CD9C;
        }
      }
    }
  }
  if ( *(_BYTE *)(v0 + 136) )
    dword_1023946C = (dword_1023946C + 1) % 4;
  if ( *(_BYTE *)(v0 + 137) )
  {
    v4 = ((signed int)(((unsigned __int64)(1431655765i64 * (dword_10239474 + 1)) >> 32) - (dword_10239474 + 1)) >> 1)
       + ((unsigned int)(((unsigned __int64)(1431655765i64 * (dword_10239474 + 1)) >> 32) - (dword_10239474 + 1)) >> 31);
    dword_10239474 += v4 + 1 + 2 * v4;
  }
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDB0: using guessed type char byte_1007CDB0;
// 1007CE14: using guessed type int dword_1007CE14;
// 1023946C: using guessed type int dword_1023946C;
// 10239474: using guessed type int dword_10239474;

//----- (1005BEB0) --------------------------------------------------------
#error "1005BEB2: call analysis failed (funcsize=4)"

//----- (1005BEC0) --------------------------------------------------------
int __usercall sub_1005BEC0@<eax>(int a1@<ecx>, int a2@<ebx>)
{
  sub_10009F40(a2, a1);
  return 0;
}

//----- (1005BED0) --------------------------------------------------------
int __fastcall sub_1005BED0(int a1, int a2)
{
  int result; // eax@1
  int v3; // ecx@2
  unsigned __int8 v4; // cl@4

  result = dword_1007CE14;
  if ( dword_1007CE14 )
  {
    *(_DWORD *)(dword_1007CE14 + 11164) = a1;
    v3 = dword_1007CD9C;
    *(_DWORD *)(result + 11168) = a2;
    if ( v3 )
    {
      if ( byte_1007CDB0 )
      {
        v4 = *(_BYTE *)(v3 + 279);
        if ( *(_BYTE *)(result + 11160) != v4 )
        {
          *(_BYTE *)(result + 11160) = v4;
          result = ShowCursor(v4);
        }
      }
    }
  }
  return result;
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDB0: using guessed type char byte_1007CDB0;
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005BF20) --------------------------------------------------------
char __usercall sub_1005BF20@<al>(int a1@<ebx>, int a2@<edi>)
{
  char result; // al@1
  int v3; // eax@2
  void *v4; // eax@3
  int v5; // [sp+0h] [bp-10h]@2

  result = sub_1003F980(1, a2);
  if ( result )
  {
    v3 = sub_1002D4C7(a1, a2, 0xBDF0u, 0x10u);
    v5 = v3;
    if ( v3 )
      v4 = sub_1005BA30((void *)v3);
    else
      v4 = 0;
    dword_1007CE14 = (int)v4;
    result = sub_100538D0(v5);
  }
  return result;
}
// 100538D0: using guessed type int __cdecl sub_100538D0(_DWORD);
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005BFA0) --------------------------------------------------------
int __usercall sub_1005BFA0@<eax>(int a1@<edx>, __int16 a2@<cx>, __m128d a3@<xmm3>, __m128d a4@<xmm4>)
{
  return sub_1005B530(a2, a3, a4, a1);
}

//----- (1005BFB0) --------------------------------------------------------
int __fastcall sub_1005BFB0(__int16 a1)
{
  return *(_DWORD *)((a1 & 0x1FFF) + dword_1007CE14 + 512);
}
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005BFD0) --------------------------------------------------------
void *sub_1005BFD0()
{
  int v0; // esi@2
  signed int v1; // edi@2
  int v2; // ebx@2
  int v3; // ecx@2
  int v4; // ecx@3
  void *result; // eax@4

  if ( dword_1007CE14 )
  {
    v0 = dword_1007CE14;
    v1 = 16;
    v2 = dword_1007CE14 + 11172;
    *(_DWORD *)(dword_1007CE14 + 31624) = sub_10056440;
    *(_DWORD *)(v0 + 31628) = 0;
    v3 = v2;
    *(_DWORD *)(v0 + 31400) = 0;
    *(_BYTE *)(v0 + 8732) = 0;
    *(_WORD *)(v0 + 8724) = 257;
    *(_DWORD *)(v0 + 8728) = -1;
    do
    {
      sub_10009A10(v3);
      v3 = v4 + 1264;
      --v1;
    }
    while ( v1 );
    *(_DWORD *)(v0 + 31412) = 0;
    *(_DWORD *)(v0 + 31396) = v2;
    *(_DWORD *)(v0 + 31408) = -1;
    *(_BYTE *)(v0 + 11160) = 1;
    _mm_storel_epi64((__m128i *)(v0 + 31416), 0i64);
    result = sub_10028330((void *)(v0 + 512), 0, 0x2000u);
    *(_DWORD *)(v0 + 512) = 402461147;
    *(_DWORD *)(v0 + 516) = 17;
    *(_DWORD *)(v0 + 520) = 3;
    *(_DWORD *)(v0 + 636) = 515959;
    *(_DWORD *)(v0 + 640) = 3;
    *(_DWORD *)(v0 + 664) = 4202496;
    *(_DWORD *)(v0 + 672) = 32;
    *(_DWORD *)(v0 + 676) = 31;
    *(_DWORD *)(v0 + 680) = 368216471;
    *(_DWORD *)(v0 + 712) = 52232192;
    *(_DWORD *)(v0 + 716) = 22020356;
    *(_DWORD *)(v0 + 720) = 64;
    *(_DWORD *)(v0 + 724) = 8258373;
    *(_DWORD *)(v0 + 728) = 17171289;
    *(_DWORD *)(v0 + 732) = 22020356;
    *(_DWORD *)(v0 + 736) = 133272383;
    *(_DWORD *)(v0 + 744) = 264;
    *(_DWORD *)(v0 + 748) = 157;
    *(_DWORD *)(v0 + 752) = 1376277;
    *(_DWORD *)(v0 + 756) = 1024;
    *(_DWORD *)(v0 + 784) = 591417;
    *(_DWORD *)(v0 + 796) = 255;
    *(_DWORD *)(v0 + 31468) = 0;
    *(_DWORD *)(v0 + 31464) = 0;
    *(_DWORD *)(v0 + 31460) = 0;
    *(_DWORD *)(v0 + 31456) = 0;
  }
  return result;
}
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005BFE0) --------------------------------------------------------
void __usercall sub_1005BFE0(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@2

  if ( dword_1007CE14 )
  {
    sub_10053840(a1, a2, a3);
    v3 = dword_1007CE14;
    if ( dword_1007CE14 )
    {
      sub_1005B970(dword_1007CE14, a1);
      sub_1002D4A8(v3);
    }
    dword_1007CE14 = 0;
  }
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005C020) --------------------------------------------------------
void __fastcall sub_1005C020(int a1, int a2)
{
  sub_1005C120(a1, a2);
}

//----- (1005C030) --------------------------------------------------------
unsigned int __usercall sub_1005C030@<eax>(int a1@<ebx>, int a2@<edi>)
{
  sub_10054C40(dword_1007CE14, a2);
  return sub_10040330(a1, a2);
}
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005C040) --------------------------------------------------------
int __thiscall sub_1005C040(int this)
{
  int v1; // ebx@1
  unsigned int v2; // edx@1
  int v3; // ebp@2
  const void *v4; // eax@4
  int v6; // [sp+24h] [bp-Ch]@1

  v1 = this;
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(this + 8) + 188))(
    *(_DWORD *)(this + 8),
    *(_DWORD *)(v1 + 9640),
    *(_DWORD *)(v1 + 9628));
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, int *))(**(_DWORD **)(v1 + 8) + 56))(
    *(_DWORD *)(v1 + 8),
    *(_DWORD *)(v1 + 9640),
    0,
    1,
    0,
    &v6);
  v2 = 0;
  if ( *(_DWORD *)(v1 + 8716) & 0xFFFFF800 )
  {
    v3 = 0;
    do
    {
      if ( !*(_BYTE *)(v1 + v2 + 40356) )
      {
        v4 = (const void *)(v3 + v6);
        qmemcpy((void *)(v3 + *(_DWORD *)(v1 + 8708)), (const void *)(v3 + v6), 0x800u);
        if ( *(_BYTE *)(v1 + 8732) )
          qmemcpy((void *)(v3 + *(_DWORD *)(v1 + 8712)), v4, 0x800u);
        if ( !*(_BYTE *)(v2 + v1 + 32164) )
          *(_BYTE *)(v2 + v1 + 32164) = 1;
      }
      *(_BYTE *)(v1 + v2 + 40356) = 1;
      v3 += 2048;
      ++v2;
    }
    while ( v2 < *(_DWORD *)(v1 + 8716) >> 11 );
  }
  return (*(int (__fastcall **)(_DWORD, unsigned int, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(v1 + 8) + 60))(
           **(_DWORD **)(v1 + 8),
           v2,
           *(_DWORD *)(v1 + 8),
           *(_DWORD *)(v1 + 9640),
           0);
}

//----- (1005C120) --------------------------------------------------------
void __stdcall sub_1005C120(int a1, int a2)
{
  unsigned int v2; // eax@2
  char v3; // cl@3

  if ( a1 >= 0 )
  {
    v2 = (a1 & 0x3FFFFFFFu) >> 11;
    while ( 1 )
    {
      v3 = *(_BYTE *)(dword_1007CE14 + v2++ + 40356);
      if ( !v3 )
        break;
      if ( v2 > (a2 - 1 + (a1 & 0x3FFFFFFFu)) >> 11 || v2 >= 0x2000 )
        return;
    }
    sub_1005C040(dword_1007CE14);
  }
}
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005C170) --------------------------------------------------------
void __userpurge sub_1005C170(int a1@<ebp>, int a2@<edi>, int a3@<esi>, int a4, int a5, int a6, unsigned int a7, unsigned int a8)
{
  int v8; // ebx@1
  unsigned int v9; // ebp@2
  unsigned int v10; // esi@2
  unsigned int v11; // eax@4
  int v12; // edx@5
  int v13; // [sp+10h] [bp-20h]@2
  int v14; // [sp+14h] [bp-1Ch]@2
  int v15; // [sp+18h] [bp-18h]@2
  char *retaddr; // [sp+30h] [bp+0h]@4

  v8 = dword_1007CE14;
  if ( a4 >= 0 )
  {
    v15 = a1;
    v14 = a3;
    v9 = (a4 & 0x3FFFFFFFu) >> 11;
    v10 = ((a4 & 0x3FFFFFFFu) + a5 - 1) >> 11;
    v13 = a2;
    do
    {
      if ( !*(_BYTE *)(v8 + v9 + 40356) )
      {
        (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, int, int, int))(**(_DWORD **)(v8 + 8) + 188))(
          *(_DWORD *)(v8 + 8),
          *(_DWORD *)(v8 + 9640),
          *(_DWORD *)(v8 + 9628),
          v13,
          v14,
          v15);
        (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, void **))(**(_DWORD **)(v8 + 8) + 56))(
          *(_DWORD *)(v8 + 8),
          *(_DWORD *)(v8 + 9640),
          0,
          1,
          0,
          &retaddr);
        v11 = 0;
        if ( *(_DWORD *)(v8 + 8716) & 0xFFFFF800 )
        {
          v12 = 0;
          do
          {
            if ( !*(_BYTE *)(v8 + v11 + 40356) )
            {
              qmemcpy((void *)(v12 + *(_DWORD *)(v8 + 8708)), &retaddr[v12], 0x800u);
              if ( *(_BYTE *)(v8 + 8732) )
                qmemcpy((void *)(v12 + *(_DWORD *)(v8 + 8712)), &retaddr[v12], 0x800u);
              if ( !*(_BYTE *)(v8 + v11 + 32164) )
                *(_BYTE *)(v8 + v11 + 32164) = 1;
            }
            *(_BYTE *)(v8 + v11 + 40356) = 1;
            v12 += 2048;
            ++v11;
          }
          while ( v11 < *(_DWORD *)(v8 + 8716) >> 11 );
          v9 = a7;
          v10 = a8;
        }
        v15 = 0;
        v14 = *(_DWORD *)(v8 + 9640);
        v13 = *(_DWORD *)(v8 + 8);
        (*(void (**)(void))(**(_DWORD **)(v8 + 8) + 60))();
      }
      *(_BYTE *)(v8 + v9++ + 32164) = 0;
    }
    while ( v9 <= v10 && v9 < 0x2000 );
  }
}
// 1005C170: could not find valid save-restore pair for ebp
// 1005C170: could not find valid save-restore pair for edi
// 1005C170: could not find valid save-restore pair for esi
// 1007CE14: using guessed type int dword_1007CE14;

//----- (1005C2E0) --------------------------------------------------------
int __thiscall sub_1005C2E0(int this)
{
  int result; // eax@1
  int v2; // ebx@1
  int v3; // edi@1
  char v4; // cl@2
  int v5; // edx@9
  int v6; // eax@9
  int v7; // ecx@9
  int v8; // ST04_4@9
  int v9; // edx@12
  int v10; // eax@12
  int v11; // ecx@12
  int v12; // ST04_4@12
  int v13; // [sp+1Ch] [bp-1Ch]@9
  int v14; // [sp+20h] [bp-18h]@9
  int v15; // [sp+24h] [bp-14h]@9
  int v16; // [sp+28h] [bp-10h]@9
  int v17; // [sp+2Ch] [bp-Ch]@9
  int v18; // [sp+30h] [bp-8h]@9

  result = -1;
  v2 = this;
  v3 = 0;
  if ( *(_DWORD *)(this + 8716) & 0xFFFFF800 )
  {
    do
    {
      v4 = *(_BYTE *)(v2 + v3 + 32164);
      if ( !v4 )
      {
        if ( result == -1 )
          result = v3;
        if ( !*(_BYTE *)(v3 + v2 + 40356) )
          *(_BYTE *)(v3 + v2 + 40356) = 1;
      }
      if ( result != -1 && v4 )
      {
        v5 = *(_DWORD *)(v2 + 8);
        v16 = v3 << 11;
        v6 = result << 11;
        v7 = v6 + *(_DWORD *)(v2 + 8708);
        v13 = v6;
        v14 = 0;
        v8 = *(_DWORD *)(v2 + 9628);
        v17 = 1;
        v15 = 0;
        v18 = 1;
        (*(void (__stdcall **)(int, int, _DWORD, int *, int, _DWORD, _DWORD))(*(_DWORD *)v5 + 192))(
          v5,
          v8,
          0,
          &v13,
          v7,
          0,
          0);
        result = -1;
      }
      *(_BYTE *)(v2 + v3++ + 32164) = 1;
    }
    while ( (unsigned int)v3 < *(_DWORD *)(v2 + 8716) >> 11 );
    if ( result != -1 )
    {
      v9 = *(_DWORD *)(v2 + 8);
      v16 = *(_DWORD *)(v2 + 8716);
      v10 = result << 11;
      v11 = v10 + *(_DWORD *)(v2 + 8708);
      v13 = v10;
      v14 = 0;
      v12 = *(_DWORD *)(v2 + 9628);
      v17 = 1;
      v15 = 0;
      v18 = 1;
      result = (*(int (__stdcall **)(int, int, _DWORD, int *, int, _DWORD, _DWORD))(*(_DWORD *)v9 + 192))(
                 v9,
                 v12,
                 0,
                 &v13,
                 v11,
                 0,
                 0);
    }
  }
  return result;
}

//----- (1005C410) --------------------------------------------------------
#error "1005C6B3: positive sp value has been found (funcsize=180)"

//----- (1005C6C0) --------------------------------------------------------
int __thiscall sub_1005C6C0(int this)
{
  int v1; // esi@1
  void *v2; // edi@1
  int v3; // ecx@2
  int result; // eax@6
  void *v5; // edi@7
  int v6; // ecx@8
  int v7; // ecx@13
  int v8; // ecx@15
  int v9; // ecx@17
  int v10; // ecx@19

  v1 = this;
  v2 = *(void **)(this + 9688);
  if ( v2 )
  {
    v3 = *((_DWORD *)v2 + 1);
    if ( v3 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v3 + 8))(*((_DWORD *)v2 + 1));
      *((_DWORD *)v2 + 1) = 0;
    }
    if ( *(_DWORD *)v2 )
    {
      (*(void (__stdcall **)(_DWORD))(**(_DWORD **)v2 + 8))(*(_DWORD *)v2);
      *(_DWORD *)v2 = 0;
    }
    result = sub_1000F417(v2);
    *(_DWORD *)(v1 + 9688) = 0;
  }
  v5 = *(void **)(v1 + 9692);
  if ( v5 )
  {
    v6 = *((_DWORD *)v5 + 1);
    if ( v6 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v6 + 8))(*((_DWORD *)v5 + 1));
      *((_DWORD *)v5 + 1) = 0;
    }
    if ( *(_DWORD *)v5 )
    {
      (*(void (__stdcall **)(_DWORD))(**(_DWORD **)v5 + 8))(*(_DWORD *)v5);
      *(_DWORD *)v5 = 0;
    }
    result = sub_1000F417(v5);
    *(_DWORD *)(v1 + 9692) = 0;
  }
  v7 = *(_DWORD *)(v1 + 9636);
  if ( v7 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v7 + 8))(*(_DWORD *)(v1 + 9636));
    *(_DWORD *)(v1 + 9636) = 0;
  }
  v8 = *(_DWORD *)(v1 + 9632);
  if ( v8 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v8 + 8))(*(_DWORD *)(v1 + 9632));
    *(_DWORD *)(v1 + 9632) = 0;
  }
  v9 = *(_DWORD *)(v1 + 9628);
  if ( v9 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v9 + 8))(*(_DWORD *)(v1 + 9628));
    *(_DWORD *)(v1 + 9628) = 0;
  }
  v10 = *(_DWORD *)(v1 + 9640);
  if ( v10 )
  {
    result = (*(int (__stdcall **)(_DWORD))(*(_DWORD *)v10 + 8))(*(_DWORD *)(v1 + 9640));
    *(_DWORD *)(v1 + 9640) = 0;
  }
  return result;
}

//----- (1005C800) --------------------------------------------------------
int __usercall sub_1005C800@<eax>(SIZE_T a1@<eax>, int a2@<ecx>, int a3@<ebp>, int a4@<edi>, int a5@<esi>)
{
  int v5; // ST18_4@1
  int v6; // ST14_4@1
  LPVOID v7; // eax@1
  LPVOID v8; // edi@1
  int v9; // ecx@1
  int v10; // esi@1
  int v11; // eax@1
  int v12; // eax@1
  __int128 v13; // xmm0@1
  LPVOID v14; // eax@1
  int v15; // edi@1
  int v16; // eax@1
  signed int v17; // edx@1
  int v18; // ecx@1
  int v19; // eax@1
  int v20; // eax@1
  int v21; // edi@1
  signed int v22; // ecx@1
  int v23; // esi@1
  signed int v24; // eax@1
  int v25; // eax@1
  int v26; // eax@1
  int v27; // ecx@1
  int v28; // edx@1
  signed int *v29; // ecx@1
  signed int v30; // edx@1
  signed int v31; // eax@1
  signed int v32; // edx@1
  int v33; // ecx@1
  int v34; // eax@1
  int result; // eax@1
  signed int v36; // ecx@1
  int v37; // [sp-D8h] [bp-E4h]@0
  int v38; // [sp-D4h] [bp-E0h]@1
  int v39; // [sp-D0h] [bp-DCh]@1
  int v40; // [sp-CCh] [bp-D8h]@1
  int v41; // [sp-C8h] [bp-D4h]@1
  int v42; // [sp-C4h] [bp-D0h]@1
  int v43; // [sp-C0h] [bp-CCh]@1
  int v44; // [sp-BCh] [bp-C8h]@1
  int v45; // [sp-B8h] [bp-C4h]@1
  int v46; // [sp-B4h] [bp-C0h]@1
  int v47; // [sp-B0h] [bp-BCh]@1
  int v48; // [sp-ACh] [bp-B8h]@1
  int v49; // [sp-A8h] [bp-B4h]@1
  __int128 v50; // [sp-A4h] [bp-B0h]@1
  int v51; // [sp-94h] [bp-A0h]@1
  int v52; // [sp-90h] [bp-9Ch]@1
  __int128 v53; // [sp-8Ch] [bp-98h]@1
  int v54; // [sp-7Ch] [bp-88h]@1
  int v55; // [sp-78h] [bp-84h]@1
  signed int v56; // [sp-74h] [bp-80h]@1
  signed int v57; // [sp-70h] [bp-7Ch]@1
  int v58; // [sp-6Ch] [bp-78h]@1
  int v59; // [sp-68h] [bp-74h]@1
  int v60; // [sp-64h] [bp-70h]@1
  int v61; // [sp-60h] [bp-6Ch]@1
  signed int v62; // [sp-5Ch] [bp-68h]@1
  signed int v63; // [sp-58h] [bp-64h]@1
  int v64; // [sp-54h] [bp-60h]@1
  int v65; // [sp-50h] [bp-5Ch]@1
  signed int v66; // [sp-4Ch] [bp-58h]@1
  LPVOID v67; // [sp-48h] [bp-54h]@1
  signed int v68; // [sp-44h] [bp-50h]@1
  signed int v69; // [sp-40h] [bp-4Ch]@1
  signed int v70; // [sp-3Ch] [bp-48h]@1
  signed int v71; // [sp-38h] [bp-44h]@1
  int v72; // [sp-34h] [bp-40h]@1
  int v73; // [sp-30h] [bp-3Ch]@1
  signed int v74; // [sp-2Ch] [bp-38h]@1
  signed int v75; // [sp-28h] [bp-34h]@1
  signed int v76; // [sp-24h] [bp-30h]@1
  signed int v77; // [sp-20h] [bp-2Ch]@1
  signed int v78; // [sp-1Ch] [bp-28h]@1
  signed int *v79; // [sp-18h] [bp-24h]@1
  int v80; // [sp-14h] [bp-20h]@1
  int v81; // [sp-10h] [bp-1Ch]@1
  SIZE_T v82; // [sp-Ch] [bp-18h]@1
  int v83; // [sp-8h] [bp-14h]@1
  signed int v84; // [sp-4h] [bp-10h]@1
  int v85; // [sp+0h] [bp-Ch]@1
  int v86; // [sp+4h] [bp-8h]@1
  int v87; // [sp+8h] [bp-4h]@1
  int retaddr; // [sp+Ch] [bp+0h]@1

  v85 = a3;
  v86 = retaddr;
  v84 = -1;
  v83 = (int)sub_10063F24;
  v82 = a1;
  v81 = (int)&v87;
  v5 = a5;
  v6 = a4;
  v80 = a2;
  v74 = 4096;
  v75 = 0;
  v76 = 8;
  v77 = 0;
  v78 = 0;
  v79 = 0;
  v53 = *(_OWORD *)&v74;
  v68 = 28;
  _mm_storel_epi64((__m128i *)&v54, _mm_loadl_epi64((const __m128i *)&v78));
  v69 = 1;
  v70 = 0;
  v71 = 1024;
  v50 = *(_OWORD *)&v68;
  _mm_storel_epi64((__m128i *)&v51, _mm_loadl_epi64((const __m128i *)&v72));
  v7 = sub_1000F0A6(8u);
  v8 = v7;
  v67 = v7;
  v9 = v80;
  v10 = (int)((char *)v7 + 4);
  v84 = 0;
  *(_DWORD *)v7 = 0;
  *((_DWORD *)v7 + 1) = 0;
  v11 = (*(int (__stdcall **)(_DWORD, __int128 *, _DWORD, LPVOID, _DWORD, int, int, int, int, int, int, int, int, int, int, int, int, int, int, int, _DWORD, _DWORD, _DWORD, _DWORD, int, int, _DWORD, _DWORD, _DWORD, _DWORD, int, int, signed int, signed int, int, int, int, int, signed int, signed int, int, int, signed int, LPVOID, signed int, signed int, signed int, signed int, int, int, signed int, signed int, signed int, signed int, signed int, signed int *, int, int, SIZE_T))(**(_DWORD **)(v9 + 4) + 12))(
          *(_DWORD *)(v9 + 4),
          &v53,
          0,
          v7,
          L"Failed create buffer",
          v6,
          v5,
          v37,
          v38,
          v39,
          v40,
          v41,
          v42,
          v43,
          v44,
          v45,
          v46,
          v47,
          v48,
          v49,
          v50,
          DWORD1(v50),
          DWORD2(v50),
          DWORD3(v50),
          v51,
          v52,
          v53,
          DWORD1(v53),
          DWORD2(v53),
          DWORD3(v53),
          v54,
          v55,
          v56,
          v57,
          v58,
          v59,
          v60,
          v61,
          v62,
          v63,
          v64,
          v65,
          v66,
          v67,
          v68,
          v69,
          v70,
          v71,
          v72,
          v73,
          v74,
          v75,
          v76,
          v77,
          v78,
          v79,
          v80,
          v81,
          v82);
  sub_100410C0(v80, (int)&v87, v11, (const unsigned __int16 *)v83);
  v83 = v10;
  v82 = (SIZE_T)&v50;
  (*(void (__stdcall **)(_DWORD, _DWORD, __int128 *))(**(_DWORD **)(v80 + 4) + 28))(
    *(_DWORD *)(v80 + 4),
    *(_DWORD *)v8,
    &v50);
  v12 = v80;
  v84 = -1;
  v68 = 512;
  v69 = 0;
  v70 = 8;
  v71 = 0;
  v72 = 0;
  v73 = 0;
  *(_OWORD *)&v44 = *(_OWORD *)&v68;
  v68 = 28;
  _mm_storel_epi64((__m128i *)&v48, _mm_loadl_epi64((const __m128i *)&v72));
  v69 = 1;
  v70 = 0;
  v71 = 128;
  v13 = *(_OWORD *)&v68;
  v82 = 8;
  *(_DWORD *)(v12 + 9688) = v8;
  *(_OWORD *)&v38 = v13;
  _mm_storel_epi64((__m128i *)&v42, _mm_loadl_epi64((const __m128i *)&v72));
  v14 = sub_1000F0A6(v82);
  v15 = (int)v14;
  v67 = v14;
  v84 = 1;
  v16 = v80;
  v82 = (SIZE_T)L"Failed create buffer";
  *(_DWORD *)v15 = 0;
  *(_DWORD *)(v15 + 4) = 0;
  v17 = *(_DWORD *)(v16 + 4);
  v81 = v15;
  v80 = 0;
  v79 = &v44;
  v18 = *(_DWORD *)v17;
  v78 = v17;
  v19 = (*(int (__stdcall **)(signed int, int *, _DWORD, int, SIZE_T))(v18 + 12))(v17, &v44, 0, v15, v82);
  sub_100410C0(v80, (int)&v87, v19, (const unsigned __int16 *)v83);
  v83 = v15 + 4;
  v82 = (SIZE_T)&v38;
  (*(void (__stdcall **)(_DWORD, _DWORD, int *))(**(_DWORD **)(v80 + 4) + 28))(
    *(_DWORD *)(v80 + 4),
    *(_DWORD *)v15,
    &v38);
  v20 = v80;
  v84 = -1;
  v82 = (SIZE_T)L"Failed create buffer";
  *(_OWORD *)&v74 = 0i64;
  *(_DWORD *)(v80 + 9692) = v15;
  v21 = v20;
  _mm_storel_epi64((__m128i *)&v78, 0i64);
  v78 = 32;
  v76 = 136;
  v22 = *(_DWORD *)(v20 + 4);
  v23 = v20 + 9628;
  v24 = *(_DWORD *)(v20 + 8716);
  v81 = v23;
  v80 = 0;
  v74 = v24;
  v25 = *(_DWORD *)v22;
  v79 = &v74;
  v78 = v22;
  v26 = (*(int (__stdcall **)(signed int, signed int *, _DWORD, int, SIZE_T))(v25 + 12))(v22, &v74, 0, v23, v82);
  sub_100410C0(v21, (int)&v87, v26, (const unsigned __int16 *)v83);
  v27 = *(_DWORD *)(v21 + 4);
  v65 = *(_DWORD *)(v21 + 8716) >> 2;
  v83 = v21 + 9636;
  v63 = 1;
  v82 = (SIZE_T)&v62;
  v81 = *(_DWORD *)v23;
  v64 = 0;
  v62 = 39;
  v66 = 1;
  v28 = *(_DWORD *)v27;
  v80 = v27;
  (*(void (__stdcall **)(int, int, signed int *))(v28 + 32))(v27, v81, &v62);
  v29 = *(signed int **)(v21 + 4);
  v59 = *(_DWORD *)(v21 + 8716) >> 1;
  v82 = v21 + 9632;
  v57 = 1;
  v81 = (int)&v56;
  v80 = *(_DWORD *)v23;
  v58 = 0;
  v56 = 57;
  v30 = *v29;
  v79 = v29;
  (*(void (__stdcall **)(signed int *, int, signed int *, int))(v30 + 28))(v29, v80, &v56, v21 + 9632);
  v31 = *(_DWORD *)(v21 + 8716);
  v32 = *(_DWORD *)(v21 + 4);
  *(_OWORD *)&v74 = 0i64;
  v74 = v31;
  v82 = (SIZE_T)L"Failed create buffer";
  v81 = v21 + 9640;
  v80 = 0;
  _mm_storel_epi64((__m128i *)&v78, 0i64);
  v75 = 3;
  v77 = 0x20000;
  v33 = *(_DWORD *)v32;
  v79 = &v74;
  v78 = v32;
  v34 = (*(int (__stdcall **)(signed int, signed int *, int, int, SIZE_T))(v33 + 12))(v32, &v74, v80, v81, v82);
  sub_100410C0(v21, (int)&v87, v34, (const unsigned __int16 *)v83);
  result = v21 + 40356;
  v36 = 0x2000;
  do
  {
    *(_BYTE *)(result++ - 0x2000) = 0;
    *(_BYTE *)(result - 1) = 1;
    --v36;
  }
  while ( v36 );
  return result;
}
// 1005C800: could not find valid save-restore pair for ebp
// 1005C800: could not find valid save-restore pair for edi
// 1005C800: could not find valid save-restore pair for esi
// 1006DD58: using guessed type wchar_t aFailedCreateBu[21];

//----- (1005CB90) --------------------------------------------------------
int __thiscall sub_1005CB90(int this)
{
  int v1; // esi@1
  int v2; // eax@2
  int v3; // ecx@2
  int v4; // ST10_4@2
  int v5; // eax@2
  int result; // eax@2
  int v7; // [sp+8h] [bp-1Ch]@2
  int v8; // [sp+Ch] [bp-18h]@2
  int v9; // [sp+10h] [bp-14h]@2
  int v10; // [sp+14h] [bp-10h]@2
  int v11; // [sp+18h] [bp-Ch]@2
  int v12; // [sp+1Ch] [bp-8h]@2

  v1 = this;
  if ( *(_BYTE *)(this + 8724) )
  {
    v2 = *(_DWORD *)(this + 8704);
    v3 = *(_DWORD *)(this + 8);
    v4 = v2 + 512;
    *(_BYTE *)(v1 + 8724) = 0;
    v5 = *(_DWORD *)(v1 + 9692);
    v7 = 0;
    v10 = 512;
    v8 = 0;
    v11 = 1;
    v9 = 0;
    v12 = 1;
    result = (*(int (__stdcall **)(int, _DWORD, _DWORD, int *, int, _DWORD, _DWORD))(*(_DWORD *)v3 + 192))(
               v3,
               *(_DWORD *)v5,
               0,
               &v7,
               v4,
               0,
               0);
  }
  return result;
}

//----- (1005CC10) --------------------------------------------------------
#error "1005CE07: positive sp value has been found (funcsize=144)"

//----- (1005CE30) --------------------------------------------------------
#error "1005D385: positive sp value has been found (funcsize=324)"

//----- (1005D390) --------------------------------------------------------
DWORD __usercall sub_1005D390@<eax>(int a1@<esi>)
{
  int v1; // ebp@0
  DWORD result; // eax@1
  DWORD v3; // eax@4
  signed int v4; // ebx@6
  int v5; // edi@13
  __int64 v6; // ST34_8@13
  signed int v7; // ebx@15
  signed int v8; // esi@16
  int v9; // ST38_4@24
  int v10; // ST3C_4@24
  int v11; // ST40_4@24
  int v12; // ST44_4@24
  int v13; // eax@26
  int v14; // ST40_4@26
  int v15; // ecx@26
  signed int v16; // esi@26
  int v17; // ebx@28
  unsigned int v18; // [sp+48h] [bp-120h]@0
  _UNKNOWN *v19; // [sp+58h] [bp-110h]@9
  signed int v20; // [sp+5Ch] [bp-10Ch]@6
  unsigned int v21; // [sp+60h] [bp-108h]@13
  int v22; // [sp+64h] [bp-104h]@1
  int v23; // [sp+68h] [bp-100h]@13
  unsigned int v24; // [sp+6Ch] [bp-FCh]@14
  struct tagWINDOWINFO pwi; // [sp+78h] [bp-F0h]@29
  struct tagWINDOWINFO v26; // [sp+B4h] [bp-B4h]@30
  struct tagWINDOWINFO v27; // [sp+F0h] [bp-78h]@31
  struct tagWINDOWINFO v28; // [sp+12Ch] [bp-3Ch]@32

  result = dword_1011942C;
  v22 = dword_1011942C;
  if ( *(_DWORD *)(dword_1011942C + 27280016) )
  {
    result = timeGetTime();
    if ( result > dword_102398FC )
    {
      if ( dword_102398FC )
      {
        a1 = dword_102398FC - timeGetTime();
        v3 = a1 + timeGetTime() + 16;
      }
      else
      {
        v3 = timeGetTime() + 16;
      }
      ++dword_1007CDAC;
      dword_102398FC = v3;
      sub_1000B6E0(v1, (int)timeGetTime, a1, v18);
      v4 = 0;
      v20 = 0;
      do
      {
        if ( *(_DWORD *)(dword_1007CF18 + 4 * v4 + 262188) )
        {
          *(_DWORD *)(dword_1007CF18 + 4 * v4 + 262188) = 0;
          switch ( v4 )
          {
            case 1:
              v19 = &unk_1020F432;
              break;
            case 2:
              v19 = &unk_10210430;
              break;
            case 0:
              v19 = &unk_10210432;
              break;
            default:
              v19 = &unk_1020F430;
              break;
          }
          v5 = 0;
          v6 = **(_DWORD **)(dword_1011942C + 4 * v4 + 27280020);
          v21 = 0;
          (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, signed int, _DWORD, int *))(**(_DWORD **)(dword_1011942C + 8)
                                                                                   + 56))(
            *(_DWORD *)(dword_1011942C + 8),
            v6,
            HIDWORD(v6),
            4,
            0,
            &v23);
          if ( v23 )
          {
            v5 = v23;
            v21 = v24 >> 2;
          }
          v7 = 0;
          do
          {
            v8 = 0;
            do
            {
              if ( ((unsigned int)dword_1007CF48 >> 7) & 1 )
                *(_BYTE *)(v5 + v8) = (*((_WORD *)v19 + 2 * (v7 + v8)) >> 8) ^ (((unsigned __int8)*((_WORD *)v19
                                                                                                  + 2 * (v7 + v8)) >> 4) ^ (*((_WORD *)v19 + 2 * (v7 + v8)) >> 8)) & 0xF;
              else
                *(_BYTE *)(v5 + v8) = (v20 >= 2) - 1;
              ++v8;
            }
            while ( v8 < 32 );
            v5 += v21;
            v7 += 8;
          }
          while ( v7 < 256 );
          v4 = v20;
          (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(dword_1011942C + 8) + 60))(
            *(_DWORD *)(dword_1011942C + 8),
            **(_DWORD **)(dword_1011942C + 4 * v20 + 27280020),
            0);
        }
        ++v4;
        v20 = v4;
      }
      while ( v4 < 4 );
      sub_10040BC0(v22, 1);
      sub_10041BF0((void *)v22, 0, 8, 0, 0, (__int64 *)0xFF, 255, 0, 0, 1);
      sub_10041820(v22, 1, 5, 6, v9, v10, v11, v12);
      if ( *(_BYTE *)(v22 + 27279992) )
      {
        sub_1005D670((void *)v22);
        *(_BYTE *)(v22 + 27279992) = 0;
      }
      sub_10040BC0(v22, 1);
      (*(void (__stdcall **)(_DWORD, signed int, int, _DWORD))(**(_DWORD **)(v22 + 8) + 132))(
        *(_DWORD *)(v22 + 8),
        1,
        v22 + 352,
        *(_DWORD *)(v22 + 364));
      v13 = *(_DWORD *)(v22 + 8);
      v14 = *(_DWORD *)(v22 + 352);
      *(_OWORD *)&v23 = xmmword_1006EE70;
      (*(void (__stdcall **)(int, int, int *))(*(_DWORD *)v13 + 200))(v13, v14, &v23);
      (*(void (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD, _DWORD))(**(_DWORD **)(v22 + 8) + 212))(
        *(_DWORD *)(v22 + 8),
        *(_DWORD *)(v22 + 364),
        3,
        0,
        0);
      sub_1005DB60(v15);
      v16 = (signed int)&unk_1007CF94;
      do
      {
        result = *(_DWORD *)v16 >> 31;
        if ( (_BYTE)result )
        {
          v17 = dword_1011942C;
          if ( dword_1007CD9C )
          {
            GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &pwi);
            if ( dword_1007CD9C )
            {
              GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &v26);
              if ( dword_1007CD9C )
              {
                GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &v27);
                if ( dword_1007CD9C )
                  GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &v28);
              }
            }
          }
          result = (*(int (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)(v17 + 8) + 52))(
                     *(_DWORD *)(v17 + 8),
                     3,
                     0);
        }
        v16 -= 4;
      }
      while ( v16 >= (signed int)&unk_1007CF88 );
    }
  }
  return result;
}
// 1006EE70: using guessed type __int128 xmmword_1006EE70;
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDAC: using guessed type int dword_1007CDAC;
// 1007CF18: using guessed type int dword_1007CF18;
// 1007CF48: using guessed type int dword_1007CF48;
// 1011942C: using guessed type int dword_1011942C;
// 102398FC: using guessed type int dword_102398FC;

//----- (1005D670) --------------------------------------------------------
int __thiscall sub_1005D670(void *this)
{
  int v1; // ebp@1
  int result; // eax@1
  int v3; // edi@3
  int v4; // esi@3
  int v5; // edx@4
  int v6; // edx@5
  int v7; // ecx@5
  int v8; // ebx@5
  int v9; // eax@15
  int j; // eax@16
  int i; // eax@19
  int v12; // esi@25
  int v13; // ecx@26
  int v14; // ecx@27
  int v15; // eax@27
  int v16; // ebx@27
  int v17; // ecx@29
  int v18; // eax@30
  int v19; // eax@30
  int v20; // ecx@31
  int v21; // eax@31
  int v22; // ecx@31
  int v23; // eax@37
  int l; // eax@38
  int k; // eax@41
  int v26; // esi@47
  int v27; // edx@48
  int v28; // edx@49
  int v29; // ecx@49
  int v30; // ebx@49
  int v31; // ecx@52
  int v32; // eax@53
  int v33; // ecx@54
  int v34; // eax@54
  int v35; // ecx@54
  int v36; // eax@60
  int n; // eax@61
  int m; // eax@64
  int v39; // [sp+24h] [bp-94h]@5
  int v40; // [sp+24h] [bp-94h]@27
  int v41; // [sp+24h] [bp-94h]@49
  int v42; // [sp+28h] [bp-90h]@9
  int v43; // [sp+2Ch] [bp-8Ch]@5
  int v44; // [sp+30h] [bp-88h]@8
  int v45; // [sp+34h] [bp-84h]@3
  int v46; // [sp+38h] [bp-80h]@9
  char v47; // [sp+3Ch] [bp-7Ch]@10
  struct tagWINDOWINFO pwi; // [sp+40h] [bp-78h]@70
  struct tagWINDOWINFO v49; // [sp+7Ch] [bp-3Ch]@71

  v1 = (int)this;
  result = dword_1007CF24;
  if ( dword_1007CF24 && dword_1007CF24 != dword_10119428 )
  {
    v3 = dword_10239510;
    v45 = dword_10239510;
    v4 = *(_DWORD *)dword_10239510;
    if ( *(_DWORD *)dword_10239510 != dword_10239510 )
    {
      do
      {
        v5 = *(_DWORD *)(v4 + 24);
        if ( v5 )
        {
          v6 = *(_DWORD *)v5;
          v7 = 0;
          v39 = v6;
          v43 = 0;
          v8 = *(_DWORD *)(v6 + 4) + 5;
          do
          {
            if ( !*(_BYTE *)(v8 - 1) && !*(_BYTE *)v8 )
            {
              sub_10002D30(v1 + 27280036, (int)&v44, v8 - 5);
              if ( v44 == *(_DWORD *)(v1 + 27280040) )
              {
                v42 = v8 - 5;
                sub_1000C2F0(v1 + 27280036, (int)&v46, v1 + 27280036, (int)&v42, v1 + 27280036);
              }
              else
              {
                v46 = v44;
                v47 = 0;
              }
              sub_10040BC0(v1, *(_DWORD *)(v8 + 3));
              (*(void (__stdcall **)(_DWORD, int, _DWORD))(**(_DWORD **)(v1 + 8) + 52))(
                *(_DWORD *)(v1 + 8),
                (*(_DWORD *)(v39 + 12) - *(_DWORD *)(v39 + 8)) >> 6,
                0);
              v7 = v43;
              v6 = v39;
            }
            ++v7;
            v8 += 12;
            v43 = v7;
          }
          while ( (unsigned int)v7 <= *(_DWORD *)v6 );
          v3 = v45;
          *(_BYTE *)(v6 + 56) = 0;
        }
        if ( !*(_BYTE *)(v4 + 13) )
        {
          v9 = *(_DWORD *)(v4 + 8);
          if ( *(_BYTE *)(v9 + 13) )
          {
            for ( i = *(_DWORD *)(v4 + 4); !*(_BYTE *)(i + 13); i = *(_DWORD *)(i + 4) )
            {
              if ( v4 != *(_DWORD *)(i + 8) )
                break;
              v4 = i;
            }
            v4 = i;
          }
          else
          {
            v4 = *(_DWORD *)(v4 + 8);
            for ( j = *(_DWORD *)v9; !*(_BYTE *)(j + 13); j = *(_DWORD *)j )
              v4 = j;
          }
        }
      }
      while ( v4 != v3 );
      v3 = dword_10239510;
    }
    v12 = *(_DWORD *)v3;
    if ( *(_DWORD *)v3 != v3 )
    {
      do
      {
        v13 = *(_DWORD *)(v12 + 24);
        if ( v13 )
        {
          v14 = *(_DWORD *)v13;
          v15 = 0;
          v40 = v14;
          v43 = 0;
          v16 = *(_DWORD *)(v14 + 4);
          do
          {
            if ( *(_BYTE *)(v16 + 5) )
            {
              sub_10002D30(v1 + 27280036, (int)&v45, v16);
              if ( v45 == *(_DWORD *)(v1 + 27280040) )
              {
                v18 = *(_DWORD *)(v1 + 27280040);
                v42 = v16;
                v44 = *(_DWORD *)v18;
                v42 = (int)sub_1000C350((void *)v44, *(void **)(v44 + 4), (int)&v42, (int)&v42, v17);
                v19 = *(_DWORD *)(v1 + 27280044);
                if ( (unsigned int)(119304646 - v19) < 1 )
LABEL_73:
                  sub_1000DA74((int)"list<T> too long");
                v20 = v19 + 1;
                v21 = v44;
                *(_DWORD *)(v1 + 27280044) = v20;
                v22 = v42;
                *(_DWORD *)(v21 + 4) = v42;
                **(_DWORD **)(v22 + 4) = v22;
                sub_10003050(v1 + 27280036, (int)&v46, **(_DWORD **)(v1 + 27280040) + 8, **(LPVOID **)(v1 + 27280040));
              }
              else
              {
                v46 = v45;
                v47 = 0;
              }
              sub_10040BC0(v1, *(_DWORD *)(v16 + 8));
              (*(void (__stdcall **)(_DWORD, int, _DWORD))(**(_DWORD **)(v1 + 8) + 52))(
                *(_DWORD *)(v1 + 8),
                (*(_DWORD *)(v40 + 12) - *(_DWORD *)(v40 + 8)) >> 6,
                0);
              v15 = v43;
              v14 = v40;
            }
            ++v15;
            v16 += 12;
            v43 = v15;
          }
          while ( (unsigned int)v15 <= *(_DWORD *)v14 );
          *(_BYTE *)(v14 + 56) = 0;
        }
        if ( !*(_BYTE *)(v12 + 13) )
        {
          v23 = *(_DWORD *)(v12 + 8);
          if ( *(_BYTE *)(v23 + 13) )
          {
            for ( k = *(_DWORD *)(v12 + 4); !*(_BYTE *)(k + 13); k = *(_DWORD *)(k + 4) )
            {
              if ( v12 != *(_DWORD *)(k + 8) )
                break;
              v12 = k;
            }
            v12 = k;
          }
          else
          {
            v12 = *(_DWORD *)(v12 + 8);
            for ( l = *(_DWORD *)v23; !*(_BYTE *)(l + 13); l = *(_DWORD *)l )
              v12 = l;
          }
        }
      }
      while ( v12 != v3 );
      v3 = dword_10239510;
    }
    v26 = *(_DWORD *)v3;
    while ( v26 != v3 )
    {
      v27 = *(_DWORD *)(v26 + 24);
      if ( v27 )
      {
        v28 = *(_DWORD *)v27;
        v29 = 0;
        v41 = v28;
        v43 = 0;
        v30 = *(_DWORD *)(v28 + 4) + 5;
        do
        {
          if ( *(_BYTE *)(v30 - 1) && !*(_BYTE *)v30 )
          {
            sub_10002D30(v1 + 27280036, (int)&v45, v30 - 5);
            if ( v45 == *(_DWORD *)(v1 + 27280040) )
            {
              v42 = v30 - 5;
              v44 = **(_DWORD **)(v1 + 27280040);
              v42 = (int)sub_1000C350((void *)v44, *(void **)(v44 + 4), (int)&v42, (int)&v42, v31);
              v32 = *(_DWORD *)(v1 + 27280044);
              if ( (unsigned int)(119304646 - v32) < 1 )
                goto LABEL_73;
              v33 = v32 + 1;
              v34 = v44;
              *(_DWORD *)(v1 + 27280044) = v33;
              v35 = v42;
              *(_DWORD *)(v34 + 4) = v42;
              **(_DWORD **)(v35 + 4) = v35;
              sub_10003050(v1 + 27280036, (int)&v46, **(_DWORD **)(v1 + 27280040) + 8, **(LPVOID **)(v1 + 27280040));
            }
            else
            {
              v46 = v45;
              v47 = 0;
            }
            sub_10040BC0(v1, *(_DWORD *)(v30 + 3));
            (*(void (__stdcall **)(_DWORD, int, _DWORD))(**(_DWORD **)(v1 + 8) + 52))(
              *(_DWORD *)(v1 + 8),
              (*(_DWORD *)(v41 + 12) - *(_DWORD *)(v41 + 8)) >> 6,
              0);
            v29 = v43;
            v28 = v41;
          }
          ++v29;
          v30 += 12;
          v43 = v29;
        }
        while ( (unsigned int)v29 <= *(_DWORD *)v28 );
        *(_BYTE *)(v28 + 56) = 0;
      }
      if ( !*(_BYTE *)(v26 + 13) )
      {
        v36 = *(_DWORD *)(v26 + 8);
        if ( *(_BYTE *)(v36 + 13) )
        {
          for ( m = *(_DWORD *)(v26 + 4); !*(_BYTE *)(m + 13); m = *(_DWORD *)(m + 4) )
          {
            if ( v26 != *(_DWORD *)(m + 8) )
              break;
            v26 = m;
          }
          v26 = m;
        }
        else
        {
          v26 = *(_DWORD *)(v26 + 8);
          for ( n = *(_DWORD *)v36; !*(_BYTE *)(n + 13); n = *(_DWORD *)n )
            v26 = n;
        }
      }
    }
    result = dword_1007CD9C;
    if ( dword_1007CD9C )
    {
      GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &pwi);
      result = dword_1007CD9C;
      if ( dword_1007CD9C )
        result = GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &v49);
    }
  }
  return result;
}
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CF24: using guessed type int dword_1007CF24;
// 10119428: using guessed type int dword_10119428;

//----- (1005DB60) --------------------------------------------------------
int __stdcall sub_1005DB60(int a1)
{
  unsigned int v1; // eax@1
  int v2; // ebx@1
  unsigned int v3; // eax@3
  __m128d v4; // xmm0@6
  unsigned int v5; // eax@7
  __m128d v6; // xmm0@9
  __m128d v7; // xmm0@10
  unsigned int v8; // esi@13
  __m128d v9; // xmm0@21
  __m128 v10; // xmm4@21
  __m128d v11; // xmm0@21
  __m128 v12; // xmm1@21
  __m128 v13; // xmm1@21
  __m128 v14; // xmm3@21
  int v15; // eax@21
  unsigned int v17; // [sp+Ch] [bp-128h]@1
  unsigned int v18; // [sp+10h] [bp-124h]@2
  __m128 v19; // [sp+14h] [bp-120h]@21
  int v20; // [sp+24h] [bp-110h]@21
  int v21; // [sp+28h] [bp-10Ch]@21
  __m128 v22; // [sp+34h] [bp-100h]@21
  struct tagWINDOWINFO pwi; // [sp+44h] [bp-F0h]@3
  struct tagWINDOWINFO v24; // [sp+80h] [bp-B4h]@7
  struct tagWINDOWINFO v25; // [sp+BCh] [bp-78h]@14
  struct tagWINDOWINFO v26; // [sp+F8h] [bp-3Ch]@18

  v1 = dword_1007CD9C;
  v17 = 0;
  v2 = dword_1011942C;
  if ( dword_1007CD9C )
  {
    GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &pwi);
    v3 = pwi.rcClient.right - pwi.rcClient.left;
    if ( dword_1023946C && dword_1023946C != 2 )
      v3 = pwi.rcClient.bottom - pwi.rcClient.top;
    v4 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v3);
    v4.m128d_f64[0] = v4.m128d_f64[0] + *(double *)&qword_1006EEC0[v3 >> 31];
    v1 = dword_1007CD9C;
    v18 = (unsigned __int128)_mm_cvtpd_ps(v4);
    if ( dword_1007CD9C )
    {
      GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &v24);
      v5 = v24.rcClient.bottom - v24.rcClient.top;
      if ( dword_1023946C && dword_1023946C != 2 )
      {
        v6 = (__m128d)COERCE_UNSIGNED_INT64((double)(v24.rcClient.right - v24.rcClient.left));
        v6.m128d_f64[0] = v6.m128d_f64[0]
                        + *(double *)&qword_1006EEC0[(unsigned int)(v24.rcClient.right - v24.rcClient.left) >> 31];
        v17 = (unsigned __int128)_mm_cvtpd_ps(v6);
      }
      else
      {
        v7 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v5);
        v7.m128d_f64[0] = v7.m128d_f64[0] + *(double *)&qword_1006EEC0[v5 >> 31];
        v17 = (unsigned __int128)_mm_cvtpd_ps(v7);
      }
      v1 = dword_1007CD9C;
    }
  }
  else
  {
    v18 = 0;
  }
  xmmword_10239660 = xmmword_1006DAA0;
  xmmword_10239670 = xmmword_1006DA80;
  xmmword_10239680 = xmmword_1006DAC0;
  xmmword_10239690 = xmmword_1006EE70;
  xmmword_10239600 = xmmword_1006DAA0;
  xmmword_10239610 = xmmword_1006DA80;
  xmmword_10239620 = xmmword_1006DAC0;
  xmmword_10239630 = xmmword_1006EE70;
  if ( v1 )
  {
    GetWindowInfo(*(HWND *)(v1 + 4), &v25);
    v8 = v25.rcClient.bottom - v25.rcClient.top;
    if ( dword_1023946C && dword_1023946C != 2 )
      v8 = v25.rcClient.right - v25.rcClient.left;
    v1 = dword_1007CD9C;
    if ( dword_1007CD9C )
    {
      GetWindowInfo(*(HWND *)(dword_1007CD9C + 4), &v26);
      v1 = v26.rcClient.right - v26.rcClient.left;
      if ( dword_1023946C )
      {
        if ( dword_1023946C != 2 )
          v1 = v26.rcClient.bottom - v26.rcClient.top;
      }
    }
  }
  else
  {
    v8 = 0;
  }
  v9 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v1);
  v22.m128_u64[1] = 4575657222456999936i64;
  v19.m128_u64[1] = 4575657222482165760i64;
  v9.m128d_f64[0] = v9.m128d_f64[0] + *(double *)&qword_1006EEC0[v1 >> 31];
  v20 = 0;
  v21 = 1065353216;
  v10 = _mm_cvtpd_ps(v9);
  v11 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v8);
  v11.m128d_f64[0] = v11.m128d_f64[0] + *(double *)&qword_1006EEC0[v8 >> 31];
  v22.m128_f32[0] = 1.0 / v10.m128_f32[0];
  v19.m128_i32[0] = (unsigned __int128)_mm_xor_ps(v10, (__m128)xmmword_1006EEE0);
  v12 = _mm_cvtpd_ps(v11);
  v19.m128_i32[1] = (unsigned __int128)_mm_xor_ps(v12, (__m128)xmmword_1006EEE0);
  v22.m128_f32[1] = -1.0 / v12.m128_f32[0];
  v13 = _mm_and_ps(v22, (__m128)xmmword_1006DAE0);
  v14 = _mm_mul_ps(v22, v19);
  v19.m128_u64[0] = 0i64;
  xmmword_102398C0 = (__int128)_mm_and_ps(v22, (__m128)xmmword_1006DB30);
  xmmword_102398A0 = COERCE_UNSIGNED_INT(v22.m128_f32[0] + v22.m128_f32[0]);
  xmmword_102398B0 = (__int128)_mm_add_ps(v13, v13);
  xmmword_102398D0 = (__int128)v14;
  v15 = *(_DWORD *)(v2 + 8);
  v19.m128_u64[1] = __PAIR__(v17, v18);
  return (*(int (__stdcall **)(int, signed int, __int128 *))(*(_DWORD *)v15 + 176))(v15, 1, &v19);
}
// 1006DA80: using guessed type __int128 xmmword_1006DA80;
// 1006DAA0: using guessed type __int128 xmmword_1006DAA0;
// 1006DAC0: using guessed type __int128 xmmword_1006DAC0;
// 1006DAE0: using guessed type __int128 xmmword_1006DAE0;
// 1006DB30: using guessed type __int128 xmmword_1006DB30;
// 1006EE70: using guessed type __int128 xmmword_1006EE70;
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];
// 1006EEE0: using guessed type __int128 xmmword_1006EEE0;
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1011942C: using guessed type int dword_1011942C;
// 1023946C: using guessed type int dword_1023946C;
// 10239600: using guessed type __int128 xmmword_10239600;
// 10239610: using guessed type __int128 xmmword_10239610;
// 10239620: using guessed type __int128 xmmword_10239620;
// 10239630: using guessed type __int128 xmmword_10239630;
// 10239660: using guessed type __int128 xmmword_10239660;
// 10239670: using guessed type __int128 xmmword_10239670;
// 10239680: using guessed type __int128 xmmword_10239680;
// 10239690: using guessed type __int128 xmmword_10239690;
// 102398A0: using guessed type __int128 xmmword_102398A0;
// 102398B0: using guessed type __int128 xmmword_102398B0;
// 102398C0: using guessed type __int128 xmmword_102398C0;
// 102398D0: using guessed type __int128 xmmword_102398D0;

//----- (1005E260) --------------------------------------------------------
unsigned int __usercall sub_1005E260@<eax>(int a1@<ebx>, int a2@<edi>, int a3@<esi>)
{
  unsigned int result; // eax@1
  unsigned int v4; // ecx@3
  int v5; // ecx@4
  char v6; // al@5
  int v7; // esi@7
  WCHAR String; // [sp+4h] [bp-454h]@15
  LPVOID v9; // [sp+404h] [bp-54h]@12
  int v10; // [sp+414h] [bp-44h]@13
  unsigned int v11; // [sp+418h] [bp-40h]@11
  LPVOID MultiByteStr[4]; // [sp+41Ch] [bp-3Ch]@2
  int v13; // [sp+42Ch] [bp-2Ch]@2
  unsigned int v14; // [sp+430h] [bp-28h]@2
  LPVOID lpMem; // [sp+434h] [bp-24h]@2
  int v16; // [sp+444h] [bp-14h]@2
  unsigned int v17; // [sp+448h] [bp-10h]@2
  int v18; // [sp+454h] [bp-4h]@2

  sub_1005D390(a3);
  ++dword_10239900;
  result = timeGetTime();
  if ( result > dword_102398F8 )
  {
    v17 = 7;
    dword_102398F8 = timeGetTime() + 1000;
    v16 = 0;
    LOWORD(lpMem) = 0;
    v18 = 0;
    v14 = 15;
    v13 = 0;
    LOBYTE(MultiByteStr[0]) = 0;
    if ( *(_BYTE *)(dword_1007CD9C + 1092) )
    {
      v5 = dword_1007CD9C + 1092;
      do
        v6 = *(_BYTE *)v5++;
      while ( v6 );
      v4 = v5 - (dword_1007CD9C + 1093);
    }
    else
    {
      v4 = 0;
    }
    sub_10001990((int)MultiByteStr, (const void *)(dword_1007CD9C + 1092), v4);
    LOBYTE(v18) = 1;
    v7 = sub_10001250((int)&lpMem, (LPCSTR)MultiByteStr);
    if ( &lpMem != (LPVOID *)v7 )
    {
      if ( v17 >= 8 )
        sub_10001E40(a1, a2, lpMem, v17 + 1);
      v17 = 7;
      v16 = 0;
      LOWORD(lpMem) = 0;
      sub_100018C0(&lpMem, v7);
    }
    if ( v11 >= 8 )
      sub_10001E40(a1, a2, v9, v11 + 1);
    v11 = 7;
    LOWORD(v9) = 0;
    v10 = 0;
    if ( v14 >= 0x10 )
      sub_10001EA0(a1, a2, MultiByteStr[0], v14 + 1);
    sub_1000C290(a1, a2, (int *)&String, (int)L"%s | spg: %0ld gpu: %0ld | %s", (unsigned int)L"gpuDX11");
    SetWindowTextW(*(HWND *)(dword_1007CD9C + 4), &String);
    result = v17;
    dword_10239900 = 0;
    dword_1007CDAC = 0;
    if ( v17 >= 8 )
      result = sub_10001E40(a1, a2, lpMem, v17 + 1);
  }
  return result;
}
// 1006ECD8: using guessed type wchar_t aSSpg0ldGpu0ldS[30];
// 1007CD9C: using guessed type int dword_1007CD9C;
// 1007CDAC: using guessed type int dword_1007CDAC;
// 102398F8: using guessed type int dword_102398F8;
// 10239900: using guessed type int dword_10239900;

//----- (1005E410) --------------------------------------------------------
int __fastcall sub_1005E410(int a1, unsigned int a2)
{
  int v2; // ebx@4
  unsigned int v3; // esi@4
  int v4; // ecx@5
  unsigned __int32 v5; // edx@5
  int v6; // edi@5
  int v7; // esi@16
  int v8; // edi@16
  signed int v9; // ebx@23
  int v10; // ebp@23
  int v11; // ecx@25
  int v12; // ecx@28
  int result; // eax@1

  result = a1 + 250650624;
  if ( (unsigned int)(a1 + 250650624) > 0x9FFF )
  {
    result = a1 + 251658240;
    if ( (unsigned int)(a1 + 251658240) > 0xF7FFF )
    {
      result = a1 + 250609664;
      if ( (unsigned int)(a1 + 250609664) > 0x1FFFF )
      {
        v2 = (unsigned __int8)a1;
        v3 = a2;
        if ( (unsigned __int8)a1 == 32 )
        {
          v4 = dword_1007CF18;
          v5 = _byteswap_ulong(a2);
          v6 = dword_1007CF48;
          if ( (dword_1007CF48 ^ v5) & 0x100000 )
          {
            *(_DWORD *)(dword_1007CF18 + 262172) = 1;
            *(_DWORD *)(v4 + 393276) = 1;
          }
          if ( (v6 ^ v5) & 0x200000 )
          {
            *(_DWORD *)(v4 + 262176) = 1;
            *(_DWORD *)(v4 + 393280) = 1;
          }
          if ( (v6 ^ v5) & 0x400000 )
          {
            *(_DWORD *)(v4 + 262180) = 1;
            *(_DWORD *)(v4 + 393284) = 1;
          }
          result = v6 ^ v5;
          if ( (v6 ^ v5) & 0x800000 )
          {
            *(_DWORD *)(v4 + 262184) = 1;
            *(_DWORD *)(v4 + 393288) = 1;
          }
          if ( ((v6 ^ v5) & 0x80u) != 0 )
          {
            *(_DWORD *)(v4 + 262188) = 1;
            *(_DWORD *)(v4 + 262192) = 1;
            *(_DWORD *)(v4 + 262196) = 1;
            *(_DWORD *)(v4 + 262200) = 1;
          }
        }
        *(int *)((char *)&dword_1007CF28 + v2) = _byteswap_ulong(v3);
        return result;
      }
    }
  }
  v7 = a1 & 0x1FFFFF;
  v8 = _byteswap_ulong(a2);
  if ( (a1 & 0x1FFFFFu) < 0xF6000 )
  {
LABEL_21:
    *(int *)((char *)dword_10119430 + v7) = v8;
    return result;
  }
  if ( (unsigned int)v7 < 0xF7000 )
  {
    result = dword_1007CF18;
    *(_DWORD *)(dword_1007CF18 + 262192) = 1;
    *(_DWORD *)(result + 262200) = 1;
    *(int *)((char *)dword_10119430 + v7) = v8;
    return result;
  }
  if ( (unsigned int)v7 < 0xF8000 )
  {
    result = dword_1007CF18;
    *(_DWORD *)(dword_1007CF18 + 262188) = 1;
    *(_DWORD *)(result + 262196) = 1;
    goto LABEL_21;
  }
  if ( (unsigned int)v7 >= 0x100000 )
  {
    if ( (unsigned int)v7 < 0x120000 )
    {
      v12 = dword_1007CF18;
      result = (unsigned int)(v7 - 0x100000) >> 2;
      *(int *)((char *)dword_10119430 + v7) = v8;
      *(_WORD *)(v12 + 2 * result) = v8;
      if ( !*(_BYTE *)(v12 + 0x40000) )
        *(_BYTE *)(v12 + 0x40000) = 1;
    }
  }
  else
  {
    v9 = v7 - 1015808;
    v10 = (v7 - 1015808) / 0x2000;
    if ( v8 != *(int *)((char *)dword_10119430 + v7)
      || (result = dword_1007CF18,
          ((_byteswap_ulong(dword_1007CF48) >> (v10 + 20)) & 1) != *(_DWORD *)(dword_1007CF18
                                                                             + 4 * ((v10 << 12) + ((v9 >> 1) & 0xFFF))
                                                                             + 327740)) )
    {
      v11 = dword_1007CF18;
      result = ((v9 >> 1) & 0xFFF) + (v10 << 12);
      *(int *)((char *)dword_10119430 + v7) = v8;
      *(_DWORD *)(v11 + 4 * result + 262204) = 1;
      *(_DWORD *)(v11 + 4 * result + 262208) = 1;
      *(_DWORD *)(v11 + 4 * v10 + 262172) = 1;
    }
  }
  return result;
}
// 1007CF18: using guessed type int dword_1007CF18;
// 1007CF28: using guessed type int dword_1007CF28;
// 1007CF48: using guessed type int dword_1007CF48;
// 10119430: using guessed type int dword_10119430[];

//----- (1005E450) --------------------------------------------------------
char __usercall sub_1005E450@<al>(int a1@<ebx>, int a2@<edi>)
{
  char result; // al@1
  int v3; // eax@2
  void *v4; // eax@3
  int v5; // ST08_4@5

  result = sub_1003F980(1, a2);
  if ( result )
  {
    v3 = sub_1002D4C7(a1, a2, 0x1A042D0u, 0x10u);
    if ( v3 )
      v4 = sub_1000B7E0((void *)v3);
    else
      v4 = 0;
    dword_1011942C = (int)v4;
    v5 = (int)sub_1000F0A6(0x6004Cu);
    dword_1007CF18 = sub_1000AB30(v5);
    result = sub_1005CE30(v5);
  }
  return result;
}
// 1005CE30: using guessed type int __cdecl sub_1005CE30(_DWORD);
// 1007CF18: using guessed type int dword_1007CF18;
// 1011942C: using guessed type int dword_1011942C;

//----- (1005E4F0) --------------------------------------------------------
int __fastcall sub_1005E4F0(unsigned int a1, int a2)
{
  return sub_1000BAC0(dword_1011942C, a1, a2);
}
// 1011942C: using guessed type int dword_1011942C;

//----- (1005E500) --------------------------------------------------------
int __thiscall sub_1005E500(void *this)
{
  int v1; // edx@1
  int result; // eax@1

  v1 = dword_1011942C;
  result = *(_DWORD *)(dword_1011942C + 1049088);
  *(_DWORD *)(dword_1011942C + 4 * result + 512) = this;
  ++*(_DWORD *)(v1 + 1049088);
  return result;
}
// 1011942C: using guessed type int dword_1011942C;

//----- (1005E520) --------------------------------------------------------
void __usercall sub_1005E520(int a1@<ebx>)
{
  int v1; // esi@2

  if ( dword_1011942C )
  {
    sub_10041F90(dword_1011942C);
    v1 = dword_1011942C;
    if ( dword_1011942C )
    {
      sub_10002870(dword_1011942C + 27280036, a1);
      sub_100026E0(v1, a1);
      sub_1002D4A8(v1);
    }
    dword_1011942C = 0;
  }
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);
// 1011942C: using guessed type int dword_1011942C;

//----- (1005E570) --------------------------------------------------------
int __fastcall sub_1005E570(unsigned int a1, int a2)
{
  int result; // eax@1

  result = dword_1011942C;
  *(_DWORD *)(dword_1011942C + 4 * (a1 >> 2) + 26214916) = a2;
  return result;
}
// 1011942C: using guessed type int dword_1011942C;

//----- (1005E580) --------------------------------------------------------
int __fastcall sub_1005E580(unsigned int a1, int a2)
{
  int result; // eax@1

  result = dword_1011942C;
  *(_DWORD *)(dword_1011942C + 4 * (a1 >> 2) + 22020612) = a2;
  return result;
}
// 1011942C: using guessed type int dword_1011942C;

//----- (1005E590) --------------------------------------------------------
unsigned __int32 __fastcall sub_1005E590(int a1)
{
  unsigned __int32 result; // eax@4

  if ( (unsigned int)(a1 + 250650624) > 0x9FFF
    && (unsigned int)(a1 + 251658240) > 0xF7FFF
    && (unsigned int)(a1 + 250609664) > 0x1FFFF )
  {
    if ( (_BYTE)a1 )
      result = _byteswap_ulong(*(int *)((char *)&dword_1007CF28 + (unsigned __int8)a1));
    else
      result = 0;
  }
  else
  {
    result = _byteswap_ulong(*(int *)((char *)dword_10119430 + (a1 & 0x1FFFFF)));
  }
  return result;
}
// 1007CF28: using guessed type int dword_1007CF28;
// 10119430: using guessed type int dword_10119430[];

//----- (1005E5E0) --------------------------------------------------------
int __fastcall sub_1005E5E0(unsigned int a1, int a2)
{
  int result; // eax@1

  result = dword_1011942C;
  *(_DWORD *)(dword_1011942C + 4 * (a1 >> 2) + 17826308) = a2;
  return result;
}
// 1011942C: using guessed type int dword_1011942C;

//----- (1005E5F0) --------------------------------------------------------
void sub_1005E5F0()
{
  int v0; // edi@1
  void *v1; // esi@1
  int v2; // ecx@2
  void *v3; // esi@7
  int v4; // ecx@8

  v0 = dword_10239430;
  v1 = *(void **)(dword_10239430 + 532);
  if ( v1 )
  {
    v2 = *((_DWORD *)v1 + 1);
    if ( v2 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v2 + 8))(*((_DWORD *)v1 + 1));
      *((_DWORD *)v1 + 1) = 0;
    }
    if ( *(_DWORD *)v1 )
    {
      (*(void (__stdcall **)(_DWORD))(**(_DWORD **)v1 + 8))(*(_DWORD *)v1);
      *(_DWORD *)v1 = 0;
    }
    sub_1000F417(v1);
  }
  v3 = *(void **)(v0 + 536);
  *(_DWORD *)(v0 + 532) = 0;
  if ( v3 )
  {
    v4 = *((_DWORD *)v3 + 1);
    if ( v4 )
    {
      (*(void (__stdcall **)(_DWORD))(*(_DWORD *)v4 + 8))(*((_DWORD *)v3 + 1));
      *((_DWORD *)v3 + 1) = 0;
    }
    if ( *(_DWORD *)v3 )
    {
      (*(void (__stdcall **)(_DWORD))(**(_DWORD **)v3 + 8))(*(_DWORD *)v3);
      *(_DWORD *)v3 = 0;
    }
    sub_1000F417(v3);
  }
  *(_DWORD *)(v0 + 536) = 0;
  sub_1000C560(v0);
  sub_10041F90(v0);
}
// 10239430: using guessed type int dword_10239430;

//----- (1005E6E0) --------------------------------------------------------
#error "1005EB54: positive sp value has been found (funcsize=281)"

//----- (1005EB60) --------------------------------------------------------
int sub_1005EB60()
{
  int v0; // edi@1
  int v1; // eax@1
  int v2; // STC0_4@1
  int v3; // STC4_4@1
  int v4; // STC8_4@1
  int v5; // STCC_4@1
  __m128 v6; // xmm0@1
  __m128 v7; // xmm0@1
  __m128 v8; // xmm3@1
  __m128 v9; // xmm2@1
  __m128 v10; // xmm4@1
  __m128 v11; // xmm0@1
  __m128 v12; // xmm3@1
  __m128 v13; // xmm3@1
  __m128 v14; // xmm0@1
  __m128 v15; // xmm4@1
  __m128 v16; // xmm2@1
  int v17; // eax@1
  int v18; // eax@1
  signed int v19; // STC0_4@1
  signed int v20; // STB4_4@1
  int v21; // esi@1
  int v22; // edx@1
  const void *v23; // ecx@3
  unsigned int v24; // esi@7
  int v25; // eax@8
  int v26; // STB8_4@8
  int v27; // eax@9
  int v28; // eax@11
  int v29; // esi@11
  int v30; // ebx@11
  int v31; // ecx@14
  int v32; // eax@18
  int v33; // STC8_4@18
  int v34; // eax@19
  int v35; // esi@20
  int v36; // edx@20
  const void *v37; // ecx@22
  int v38; // ecx@27
  int v40; // [sp+DCh] [bp-44h]@1
  int v41; // [sp+E0h] [bp-40h]@11
  int v42; // [sp+E4h] [bp-3Ch]@27
  int v43; // [sp+E8h] [bp-38h]@1
  int v44; // [sp+ECh] [bp-34h]@1
  int v45; // [sp+F0h] [bp-30h]@1
  int v46; // [sp+F4h] [bp-2Ch]@1
  __int128 v47; // [sp+F8h] [bp-28h]@1
  __int128 v48; // [sp+108h] [bp-18h]@1
  int v49; // [sp+118h] [bp-8h]@1
  int v50; // [sp+11Ch] [bp-4h]@1

  v0 = dword_10239430;
  v40 = 0;
  (*(void (__stdcall **)(_DWORD, _DWORD, int *))(**(_DWORD **)(dword_10239430 + 8) + 204))(
    *(_DWORD *)(dword_10239430 + 8),
    *(_DWORD *)(dword_10239430 + 896),
    &v40);
  (*(void (__stdcall **)(_DWORD, _DWORD, int *))(**(_DWORD **)(v0 + 8) + 204))(
    *(_DWORD *)(v0 + 8),
    *(_DWORD *)(v0 + 908),
    &v40);
  v45 = *(_DWORD *)(v0 + 896);
  v46 = *(_DWORD *)(v0 + 908);
  v1 = *(_DWORD *)(v0 + 8);
  v43 = 0;
  v44 = 0;
  (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD, _DWORD, signed int, int *, int *))(*(_DWORD *)v1 + 136))(
    v1,
    0,
    0,
    0,
    0,
    2,
    &v45,
    &v43);
  sub_10028330((void *)(v0 + 688), 0, 0xB0u);
  sub_10060660(v0);
  (*(void (__stdcall **)(_DWORD, _DWORD, signed int, _DWORD, _DWORD))(**(_DWORD **)(v0 + 8) + 212))(
    *(_DWORD *)(v0 + 8),
    *(_DWORD *)(v0 + 364),
    1,
    0,
    0);
  sub_10040BC0(v0, 1);
  sub_10041BF0((void *)v0, 0, 7, 0, 0, (__int64 *)0xFF, 255, 0, 0, 1);
  sub_10041820(v0, 0, 5, 6, v2, v3, v4, v5);
  v6 = _mm_and_ps((__m128)xmmword_1006EEB0, (__m128)xmmword_1006DAE0);
  v7 = _mm_add_ps(v6, v6);
  DWORD3(v48) = 1139802112;
  v8 = _mm_and_ps((__m128)xmmword_1006EEB0, (__m128)xmmword_1006DB30);
  LODWORD(v48) = 0;
  v9 = _mm_shuffle_ps((__m128)COERCE_UNSIGNED_INT(0.0015625 + 0.0015625), v7, 68);
  v10 = _mm_shuffle_ps((__m128)COERCE_UNSIGNED_INT(0.0015625 + 0.0015625), v7, -18);
  *(_QWORD *)((char *)&v48 + 4) = 4908923593833840640i64;
  v11 = _mm_shuffle_ps(v8, (__m128)xmmword_1006EE80, 68);
  v12 = _mm_shuffle_ps(v8, (__m128)xmmword_1006EE80, -18);
  *(_OWORD *)(v0 + 544) = _mm_shuffle_ps(v9, v11, -120);
  *(_OWORD *)(v0 + 560) = _mm_shuffle_ps(v9, v11, -35);
  *(_OWORD *)(v0 + 576) = _mm_shuffle_ps(v10, v12, -120);
  *(_OWORD *)(v0 + 592) = _mm_shuffle_ps(v10, v12, -35);
  v13 = _mm_shuffle_ps((__m128)xmmword_1006DAA0, (__m128)xmmword_1006DA80, 68);
  v14 = _mm_shuffle_ps((__m128)xmmword_1006DAC0, (__m128)xmmword_1006EE70, 68);
  v15 = _mm_shuffle_ps((__m128)xmmword_1006DAA0, (__m128)xmmword_1006DA80, -18);
  v16 = _mm_shuffle_ps((__m128)xmmword_1006DAC0, (__m128)xmmword_1006EE70, -18);
  *(_OWORD *)(v0 + 608) = _mm_shuffle_ps(v13, v14, -120);
  *(_OWORD *)(v0 + 624) = _mm_shuffle_ps(v13, v14, -35);
  *(_OWORD *)(v0 + 640) = _mm_shuffle_ps(v15, v16, -120);
  *(_OWORD *)(v0 + 656) = _mm_shuffle_ps(v15, v16, -35);
  v17 = *(_DWORD *)(v0 + 8);
  v49 = 0;
  v50 = 1065353216;
  (*(void (__stdcall **)(int, signed int, __int128 *))(*(_DWORD *)v17 + 176))(v17, 1, &v48);
  v18 = *(_DWORD *)(v0 + 8);
  v47 = xmmword_1006EE50;
  (*(void (__stdcall **)(int, signed int, __int128 *))(*(_DWORD *)v18 + 180))(v18, 1, &v47);
  v19 = *(_DWORD *)(v0 + 524);
  v20 = *(_DWORD *)(v0 + 520);
  *(_DWORD *)(v0 + 868) = 0;
  sub_10060B90(v0, v0 + 688, v0, 0, 0, v20, 0, 0, v19, v20, v19, 0);
  *(_DWORD *)(v0 + 880) = 0;
  sub_1005F920(v0);
  v21 = *(_DWORD *)(v0 + 868);
  v22 = sub_10040EA0(v0, 24, *(_DWORD *)(v0 + 868));
  if ( v22 )
  {
    if ( *(_DWORD *)(v0 + 872) )
      v23 = *(const void **)(v0 + 864);
    else
      v23 = 0;
    sub_100278E0((void *)v22, v23, 24 * v21);
    sub_10040E40(v0);
  }
  if ( *(_WORD *)(v0 + 2896) < 0 )
  {
    v24 = 0;
    do
    {
      v25 = *(_DWORD *)(v0 + 8);
      v26 = *(_DWORD *)(v0 + 408);
      *(_DWORD *)(v0 + 812) = v24;
      (*(void (__stdcall **)(int, int, _DWORD, _DWORD, int, _DWORD, _DWORD))(*(_DWORD *)v25 + 192))(
        v25,
        v26,
        0,
        0,
        v0 + 688,
        0,
        0);
      sub_1005F0E0((void *)v0);
      if ( *(_DWORD *)(v0 + 168) )
      {
        v27 = *(_DWORD *)(v0 + 8);
        *(_DWORD *)(v0 + 168) = 0;
        (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v27 + 92))(v27, 0, 0, 0);
      }
      sub_100607D0((void *)v0, 0);
      sub_10060100(v0, v0, 0);
      (*(void (__stdcall **)(_DWORD, int, signed int))(**(_DWORD **)(v0 + 8) + 52))(
        *(_DWORD *)(v0 + 8),
        *(_DWORD *)(v0 + 868) - 6,
        6);
      ++v24;
    }
    while ( v24 <= 7 );
  }
  v28 = 0;
  v29 = v0 + 276;
  v41 = 0;
  v30 = 0;
  do
  {
    LOBYTE(v22) = 0;
    if ( *(_DWORD *)v29 != v28 )
    {
      LOBYTE(v22) = 1;
      *(_DWORD *)v29 = v28;
    }
    v31 = *(_DWORD *)(v0 + 8);
    if ( v31 && (_BYTE)v22 )
    {
      (*(void (__stdcall **)(int, int, signed int, int *))(*(_DWORD *)v31 + 32))(v31, v30, 1, &v41);
      v28 = v41;
    }
    ++v30;
    v29 += 4;
  }
  while ( v30 < 6 );
  (*(void (__fastcall **)(_DWORD, int, _DWORD, signed int, int, _DWORD))(**(_DWORD **)(v0 + 8) + 132))(
    **(_DWORD **)(v0 + 8),
    v22,
    *(_DWORD *)(v0 + 8),
    1,
    v0 + 352,
    *(_DWORD *)(v0 + 364));
  v32 = *(_DWORD *)(v0 + 8);
  v33 = *(_DWORD *)(v0 + 352);
  v48 = 0i64;
  (*(void (__stdcall **)(int, int, __int128 *))(*(_DWORD *)v32 + 200))(v32, v33, &v48);
  if ( *(_DWORD *)(v0 + 168) )
  {
    v34 = *(_DWORD *)(v0 + 8);
    *(_DWORD *)(v0 + 168) = 0;
    (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v34 + 92))(v34, 0, 0, 0);
  }
  sub_100607D0((void *)v0, 0);
  sub_10060400(v0, v0);
  *(_DWORD *)(v0 + 868) = 0;
  sub_10060B90(v0, v30, v0, 0, 0, 640, 0, 0, 480, 640, 480, 0);
  v35 = *(_DWORD *)(v0 + 868);
  v36 = sub_10040EA0(v0, 24, *(_DWORD *)(v0 + 868));
  if ( v36 )
  {
    if ( *(_DWORD *)(v0 + 872) )
      v37 = *(const void **)(v0 + 864);
    else
      v37 = 0;
    sub_100278E0((void *)v36, v37, 24 * v35);
    if ( *(_BYTE *)(v0 + 324) )
    {
      (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v0 + 8) + 60))(
        *(_DWORD *)(v0 + 8),
        *(_DWORD *)(v0 + 308),
        0);
      *(_BYTE *)(v0 + 324) = 0;
    }
    if ( *(_BYTE *)(v0 + 325) )
    {
      v38 = *(_DWORD *)(v0 + 8);
      v42 = 0;
      (*(void (__stdcall **)(int, _DWORD, signed int, int, int, int *))(*(_DWORD *)v38 + 72))(
        v38,
        0,
        1,
        v0 + 308,
        v0 + 316,
        &v42);
      *(_BYTE *)(v0 + 325) = 0;
    }
  }
  (*(void (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)(v0 + 8) + 52))(*(_DWORD *)(v0 + 8), 6, 0);
  return (*(int (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)v0 + 32))(*(_DWORD *)v0, 1, 0);
}
// 1006DA80: using guessed type __int128 xmmword_1006DA80;
// 1006DAA0: using guessed type __int128 xmmword_1006DAA0;
// 1006DAC0: using guessed type __int128 xmmword_1006DAC0;
// 1006DAE0: using guessed type __int128 xmmword_1006DAE0;
// 1006DB30: using guessed type __int128 xmmword_1006DB30;
// 1006EE50: using guessed type __int128 xmmword_1006EE50;
// 1006EE70: using guessed type __int128 xmmword_1006EE70;
// 1006EE80: using guessed type __int128 xmmword_1006EE80;
// 1006EEB0: using guessed type __int128 xmmword_1006EEB0;
// 10239430: using guessed type int dword_10239430;

//----- (1005F040) --------------------------------------------------------
int __thiscall sub_1005F040(int this, unsigned __int16 a2)
{
  signed int v2; // esi@1
  int v3; // ebx@1
  int result; // eax@1
  signed int v5; // edi@1
  unsigned int v6; // edx@3
  int v7; // edx@4

  v2 = 320;
  v3 = this;
  result = a2 & 7;
  v5 = 224;
  switch ( result )
  {
    case 0:
    case 2:
    case 4:
    case 6:
      break;
    case 1:
    case 3:
    case 5:
    case 7:
      v2 = 352;
      break;
  }
  v6 = ((unsigned int)a2 >> 4) & 3;
  if ( v6 )
  {
    v7 = v6 - 1;
    if ( v7 )
    {
      if ( v7 == 1 )
        v5 = 256;
    }
    else
    {
      v5 = 240;
    }
  }
  if ( v2 != *(_DWORD *)(this + 520) || v5 != *(_DWORD *)(this + 524) )
  {
    *(_DWORD *)(this + 520) = v2;
    *(_DWORD *)(this + 524) = v5;
    sub_1000C560(this);
    result = sub_1000C380(v3, v3, *(_DWORD *)(v3 + 520), *(_DWORD *)(v3 + 524));
  }
  return result;
}

//----- (1005F0E0) --------------------------------------------------------
int __thiscall sub_1005F0E0(void *this)
{
  int v1; // esi@1
  int v2; // edi@1
  int v3; // ebx@1
  int v4; // eax@4
  int result; // eax@5

  v1 = (int)this;
  v2 = 3;
  v3 = (int)((char *)this + 1428);
  do
  {
    if ( *(_DWORD *)v3 )
    {
      sub_1005F150(v1, v2);
      if ( *(_DWORD *)(v1 + 168) )
      {
        v4 = *(_DWORD *)(v1 + 8);
        *(_DWORD *)(v1 + 168) = 0;
        (*(void (__stdcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v4 + 92))(v4, 0, 0, 0);
      }
      sub_100607D0((void *)v1, 1);
      sub_10060100(v1, v2, 1);
      result = (*(int (__stdcall **)(_DWORD, signed int, _DWORD))(**(_DWORD **)(v1 + 8) + 52))(
                 *(_DWORD *)(v1 + 8),
                 6,
                 0);
    }
    v3 -= 172;
    --v2;
  }
  while ( v2 >= 0 );
  return result;
}

//----- (1005F150) --------------------------------------------------------
int __thiscall sub_1005F150(int this, int a2)
{
  int v2; // edi@1
  int v3; // esi@1
  __int16 v4; // ax@9
  __int16 v5; // ax@9
  int v6; // ecx@12
  __int16 v7; // ax@23
  __int16 v8; // cx@23
  __int16 v9; // dx@23
  int v10; // ecx@43
  unsigned int v11; // ebp@43
  int v12; // edx@44
  int v13; // ebx@48
  int v14; // edx@49
  __m128d v15; // xmm0@56
  unsigned int v16; // eax@56
  float v17; // xmm1_4@56
  __m128d v18; // xmm0@56
  unsigned int v20; // [sp+Ch] [bp-1Ch]@43
  unsigned int v21; // [sp+14h] [bp-14h]@43
  int v22; // [sp+20h] [bp-8h]@1
  int v23; // [sp+24h] [bp-4h]@1
  int v24; // [sp+2Ch] [bp+4h]@43

  v2 = 172 * a2;
  v3 = this;
  v22 = this;
  v23 = 172 * a2;
  if ( *(_DWORD *)(172 * a2 + this + 1076) )
  {
    switch ( (unsigned int)*(_WORD *)(this + 2934) >> 2 )
    {
      case 0u:
        *(_DWORD *)(v2 + this + 996) = 512;
        *(_DWORD *)(v2 + this + 1000) = 256;
        break;
      case 1u:
        *(_DWORD *)(v2 + this + 996) = 512;
        goto LABEL_7;
      case 2u:
        *(_DWORD *)(v2 + this + 996) = 1024;
        *(_DWORD *)(v2 + this + 1000) = 256;
        break;
      case 3u:
        *(_DWORD *)(v2 + this + 996) = 1024;
LABEL_7:
        *(_DWORD *)(v2 + this + 1000) = 512;
        break;
    }
    if ( a2 )
    {
      *(_WORD *)(this + 1108) = *(_WORD *)(this + 3024) & 0x7FF;
      *(_WORD *)(this + 1110) = *(_WORD *)(this + 3028) & 0x7FF;
      *(_DWORD *)(this + 1244) = (((unsigned int)*(_WORD *)(this + 2954) >> 4) & 7) << 17;
      *(_DWORD *)(this + 1236) = ((unsigned int)*(_WORD *)(this + 2938) >> 4) & 0x70;
    }
    else
    {
      *(_WORD *)(this + 936) = *(_WORD *)(this + 3006) & 0x7FF;
      *(_WORD *)(this + 938) = *(_WORD *)(this + 3010) & 0x7FF;
      v4 = *(_WORD *)(this + 2954);
      *(_DWORD *)(this + 1072) = (v4 & 7) << 17;
      v5 = *(_WORD *)(this + 2938);
      *(_DWORD *)(this + 1064) = 16 * (v5 & 7);
    }
    *(_DWORD *)(v2 + this + 1068) = 0;
    *(_DWORD *)(v2 + this + 1060) = 0;
  }
  else
  {
    v6 = *(_DWORD *)(v2 + this + 984);
    *(_DWORD *)(v2 + v3 + 988) = 64 >> v6;
    *(_DWORD *)(v2 + v3 + 940) = 2;
    *(_DWORD *)(v2 + v3 + 992) = 6 - v6;
    *(_DWORD *)(v2 + v3 + 1000) = 8;
    *(_DWORD *)(v2 + v3 + 996) = 8;
    if ( a2 )
    {
      switch ( a2 )
      {
        case 1:
          *(_WORD *)(v3 + 1108) = *(_WORD *)(v3 + 3024) & 0x7FF;
          *(_WORD *)(v3 + 1110) = *(_WORD *)(v3 + 3028) & 0x7FF;
          break;
        case 2:
          *(_WORD *)(v3 + 1280) = *(_WORD *)(v3 + 3040) & 0x7FF;
          *(_WORD *)(v3 + 1282) = *(_WORD *)(v3 + 3042) & 0x7FF;
          break;
        case 3:
          *(_WORD *)(v3 + 1452) = *(_WORD *)(v3 + 3044) & 0x7FF;
          *(_WORD *)(v3 + 1454) = *(_WORD *)(v3 + 3046) & 0x7FF;
          break;
        default:
          *(_DWORD *)(v2 + v3 + 936) = 0;
          break;
      }
    }
    else
    {
      *(_WORD *)(v3 + 936) = *(_WORD *)(v3 + 3006) & 0x7FF;
      *(_WORD *)(v3 + 938) = *(_WORD *)(v3 + 3010) & 0x7FF;
    }
  }
  if ( *(_DWORD *)(v2 + v3 + 1008) )
  {
    if ( *(_DWORD *)(v2 + v3 + 1012) )
    {
      v7 = *(_WORD *)(v3 + 3176);
      v8 = *(_WORD *)(v3 + 3178);
      v9 = *(_WORD *)(v3 + 3180);
    }
    else
    {
      v7 = *(_WORD *)(v3 + 3170);
      v8 = *(_WORD *)(v3 + 3172);
      v9 = *(_WORD *)(v3 + 3174);
    }
    *(_DWORD *)(v2 + v3 + 1020) = (unsigned __int8)v7;
    if ( v7 & 0x100 )
      *(_DWORD *)(v2 + v3 + 1020) = v7 | 0xFFFFFF00;
    *(_DWORD *)(v2 + v3 + 1024) = (unsigned __int8)v8;
    if ( v8 & 0x100 )
      *(_DWORD *)(v2 + v3 + 1024) = v8 | 0xFFFFFF00;
    *(_DWORD *)(v2 + v3 + 1028) = (unsigned __int8)v9;
    if ( v9 & 0x100 )
      *(_DWORD *)(v2 + v3 + 1028) = v9 | 0xFFFFFF00;
  }
  else
  {
    *(_DWORD *)(v2 + v3 + 1028) = 0;
    *(_DWORD *)(v2 + v3 + 1024) = 0;
    *(_DWORD *)(v2 + v3 + 1020) = 0;
  }
  if ( a2 )
  {
    switch ( a2 )
    {
      case 1:
        *(_DWORD *)(v3 + 1204) = 0x10000 / (*(_DWORD *)(v3 + 3032) & 0x7FF00u);
        *(_DWORD *)(v3 + 1208) = 0x10000 / (*(_DWORD *)(v3 + 3036) & 0x7FF00u);
        break;
      case 2:
        *(_DWORD *)(v3 + 1380) = 1;
        *(_DWORD *)(v3 + 1376) = 1;
        break;
      case 3:
        *(_DWORD *)(v3 + 1552) = 1;
        *(_DWORD *)(v3 + 1548) = 1;
        break;
      default:
        *(_DWORD *)(v2 + v3 + 936) = 0;
        *(_DWORD *)(v3 + 1724) = 1;
        *(_DWORD *)(v3 + 1720) = 1;
        break;
    }
  }
  else
  {
    *(_DWORD *)(v3 + 1032) = 0x10000 / (*(_DWORD *)(v3 + 3016) & 0x7FF00u);
    *(_DWORD *)(v3 + 1036) = 0x10000 / (*(_DWORD *)(v3 + 3020) & 0x7FF00u);
  }
  if ( *(_DWORD *)(v2 + v3 + 1076) )
  {
    if ( (*(_BYTE *)(v3 + 3050) & 7) == 7 )
    {
      v10 = 2 * (*(_DWORD *)(v3 + 3056) & 0x7FFFE);
      v21 = *(_DWORD *)(v2 + v3 + 1000);
      v11 = 0;
      v24 = 2 * (*(_DWORD *)(v3 + 3056) & 0x7FFFE);
      v20 = 0;
      if ( v21 != 1 )
      {
        v12 = v10 + *(_DWORD *)(v3 + 516) + 9;
        while ( !(*(_BYTE *)v12 | (unsigned __int16)(*(_BYTE *)(v12 - 1) << 8)) )
        {
          ++v11;
          v12 += 8;
          v20 = v11;
          if ( v11 >= v21 - 1 )
            goto LABEL_54;
        }
        *(_WORD *)(v2 + v3 + 938) += v11;
        v13 = v11 + 1;
        if ( v11 + 1 < *(_DWORD *)(v2 + v3 + 1000) )
        {
          v14 = *(_DWORD *)(v3 + 516) + 1 + 8 * v13 + v24 + 12;
          do
          {
            if ( !(*(_BYTE *)(v14 - 1 + 3) | ((*(_BYTE *)(v14 - 1 + 2) | ((*(_BYTE *)v14 | (*(_BYTE *)(v14 - 1) << 8)) << 8)) << 8)) )
              break;
            ++v13;
            v14 += 8;
          }
          while ( v13 < v21 );
          v3 = v22;
          v2 = v23;
          v11 = v20;
        }
        *(_DWORD *)(v2 + v3 + 1000) = v13 - v11 + 1;
LABEL_54:
        v10 = v24;
      }
      *(_DWORD *)(v2 + v3 + 996) = (*(_BYTE *)(*(_DWORD *)(v3 + 516) + v10 + 8 * v11 + 8) << 8) | *(_BYTE *)(*(_DWORD *)(v3 + 516) + v10 + 8 * v11 + 9);
    }
  }
  else
  {
    *(_DWORD *)(v2 + v3 + 1040) = 8 * *(_DWORD *)(v2 + v3 + 980);
    v15 = (__m128d)COERCE_UNSIGNED_INT64((double)*(signed int *)(172 * (a2 + 6) + v3));
    v15.m128d_f64[0] = v15.m128d_f64[0] + *(double *)&qword_1006EEC0[*(_DWORD *)(172 * (a2 + 6) + v3) >> 31];
    *(_DWORD *)(v2 + v3 + 1044) = (signed int)ffloor((float)*(signed int *)(v3 + 520) / COERCE_FLOAT(_mm_cvtpd_ps(v15)));
    v16 = *(_DWORD *)(v2 + v3 + 1036);
    v17 = (float)*(signed int *)(v3 + 524);
    *(_DWORD *)(v2 + v3 + 996) = 8;
    *(_DWORD *)(v2 + v3 + 1000) = 8;
    v18 = (__m128d)COERCE_UNSIGNED_INT64((double)(signed int)v16);
    v18.m128d_f64[0] = v18.m128d_f64[0] + *(double *)&qword_1006EEC0[v16 >> 31];
    *(_DWORD *)(v2 + v3 + 1048) = (signed int)ffloor(v17 / COERCE_FLOAT(_mm_cvtpd_ps(v18)));
  }
  *(_DWORD *)(v3 + 688) = ((unsigned int)*(_WORD *)(v3 + 2908) >> 12) & 3;
  *(_DWORD *)(v3 + 696) = *(_DWORD *)(v2 + v3 + 1016);
  *(_DWORD *)(v3 + 700) = *(_DWORD *)(v2 + v3 + 1064);
  *(_DWORD *)(v3 + 692) = *(_DWORD *)(v2 + v3 + 916);
  *(_DWORD *)(v3 + 704) = *(_DWORD *)(v2 + v3 + 1004);
  *(_DWORD *)(v3 + 708) = *(_DWORD *)(v2 + v3 + 1020);
  *(_DWORD *)(v3 + 712) = *(_DWORD *)(v2 + v3 + 1024);
  *(_DWORD *)(v3 + 716) = *(_DWORD *)(v2 + v3 + 1028);
  *(_DWORD *)(v3 + 720) = *(_DWORD *)(v2 + v3 + 924);
  *(_DWORD *)(v3 + 724) = *(_DWORD *)(v3 + 520);
  *(_DWORD *)(v3 + 728) = *(_DWORD *)(v3 + 524);
  *(_DWORD *)(v3 + 732) = *(_WORD *)(v2 + v3 + 936);
  *(_DWORD *)(v3 + 736) = *(_WORD *)(v2 + v3 + 938);
  *(_DWORD *)(v3 + 740) = *(_DWORD *)(v2 + v3 + 940);
  *(_DWORD *)(v3 + 744) = *(_DWORD *)(v2 + v3 + 972);
  *(_DWORD *)(v3 + 748) = *(_DWORD *)(v2 + v3 + 944);
  *(_DWORD *)(v3 + 752) = *(_DWORD *)(v2 + v3 + 948);
  *(_DWORD *)(v3 + 756) = *(_DWORD *)(v2 + v3 + 980);
  *(_DWORD *)(v3 + 760) = *(_DWORD *)(v2 + v3 + 988);
  *(_DWORD *)(v3 + 764) = *(_DWORD *)(v2 + v3 + 1056);
  *(_DWORD *)(v3 + 768) = *(_DWORD *)(v2 + v3 + 960);
  *(_DWORD *)(v3 + 772) = *(_DWORD *)(v2 + v3 + 964);
  *(_DWORD *)(v3 + 776) = *(_DWORD *)(v2 + v3 + 968);
  *(_DWORD *)(v3 + 780) = *(_DWORD *)(v2 + v3 + 1076);
  *(_DWORD *)(v3 + 784) = *(_DWORD *)(v2 + v3 + 996);
  *(_DWORD *)(v3 + 788) = *(_DWORD *)(v2 + v3 + 1000);
  *(_DWORD *)(v3 + 792) = *(_DWORD *)(v2 + v3 + 928);
  *(_DWORD *)(v3 + 796) = *(_DWORD *)(v2 + v3 + 932);
  *(_DWORD *)(v3 + 800) = *(_WORD *)(v3 + 3126);
  *(_DWORD *)(v3 + 804) = *(_DWORD *)(v2 + v3 + 920);
  *(_DWORD *)(v3 + 816) = *(_DWORD *)(v2 + v3 + 992);
  *(_DWORD *)(v3 + 820) = *(_DWORD *)(v2 + v3 + 976);
  *(_DWORD *)(v3 + 824) = *(_DWORD *)(v2 + v3 + 952);
  *(_DWORD *)(v3 + 828) = *(_DWORD *)(v2 + v3 + 956);
  *(_DWORD *)(v3 + 808) = *(_DWORD *)(v2 + v3 + 1080);
  return (*(int (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v3 + 8) + 192))(
           *(_DWORD *)(v3 + 8),
           *(_DWORD *)(v3 + 408),
           0,
           0,
           v3 + 688,
           0,
           0);
}
// 1006EEC0: using guessed type __int64 qword_1006EEC0[];

//----- (1005F920) --------------------------------------------------------
void __thiscall sub_1005F920(int this)
{
  int v1; // esi@1
  unsigned __int16 *v2; // edx@2
  int v3; // ebx@2
  unsigned __int16 v4; // cx@2
  unsigned int v5; // ebp@2
  unsigned int v6; // edi@2
  int v7; // edx@12
  int v8; // eax@12
  unsigned __int16 v9; // cx@21
  unsigned int v10; // eax@22

  v1 = this;
  if ( *(_WORD *)(this + 2824) )
  {
    v2 = *(unsigned __int16 **)(this + 512);
    *(_WORD *)(this + 2834) >>= 1;
    *(_DWORD *)(this + 2852) = 0;
    *(_DWORD *)(this + 2844) = 0;
    v3 = -1;
    v4 = _byteswap_ushort(*v2);
    v5 = 0;
    v6 = v4;
    if ( (v4 & 0x8000u) == 0 )
    {
      while ( v5 < 0x7D0 )
      {
        if ( !(v6 & 0x4000) )
        {
          switch ( v6 & 0xF )
          {
            case 0u:
              sub_10060090(v1);
              goto LABEL_13;
            case 1u:
              sub_1005FEA0(v1);
              goto LABEL_13;
            case 2u:
              sub_1005FD80(v1);
              goto LABEL_13;
            case 4u:
              sub_1005FC60(v1);
              goto LABEL_13;
            case 8u:
              sub_1005FBD0(v1);
              goto LABEL_13;
            case 9u:
              sub_1005FB70(v1);
              goto LABEL_13;
            case 0xAu:
              v7 = *(_DWORD *)(v1 + 2844);
              v8 = *(_DWORD *)(v1 + 512);
              *(_WORD *)(v1 + 2852) = _byteswap_ushort(*(_WORD *)(*(_DWORD *)(v1 + 512) + v7 + 12));
              *(_WORD *)(v1 + 2854) = _byteswap_ushort(*(_WORD *)(v8 + v7 + 14));
              goto LABEL_13;
            case 5u:
            case 6u:
              goto LABEL_13;
            default:
              return;
          }
          return;
        }
LABEL_13:
        switch ( v6 >> 12 )
        {
          case 1u:
            *(_DWORD *)(v1 + 2844) = 8
                                   * (*(_BYTE *)(*(_DWORD *)(v1 + 512) + *(_DWORD *)(v1 + 2844) + 3) | (*(_BYTE *)(*(_DWORD *)(v1 + 512) + *(_DWORD *)(v1 + 2844) + 2) << 8));
            break;
          case 2u:
            if ( v3 == -1 )
              v3 = *(_DWORD *)(v1 + 2844) + 32;
            *(_DWORD *)(v1 + 2844) = 8
                                   * (*(_BYTE *)(*(_DWORD *)(v1 + 512) + *(_DWORD *)(v1 + 2844) + 3) | (*(_BYTE *)(*(_DWORD *)(v1 + 512) + *(_DWORD *)(v1 + 2844) + 2) << 8));
            break;
          case 3u:
            if ( v3 == -1 )
              goto LABEL_20;
            *(_DWORD *)(v1 + 2844) = v3;
            v3 = -1;
            break;
          case 0u:
LABEL_20:
            *(_DWORD *)(v1 + 2844) += 32;
            break;
        }
        ++v5;
        v9 = _byteswap_ushort(*(_WORD *)(*(_DWORD *)(v1 + 512) + *(_DWORD *)(v1 + 2844)));
        v6 = v9;
        if ( (v9 & 0x8000u) != 0 )
          break;
      }
    }
    v10 = *(_DWORD *)(v1 + 2844);
    *(_WORD *)(v1 + 2834) |= 2u;
    *(_WORD *)(v1 + 2838) = v10 >> 3;
  }
}

//----- (1005FB70) --------------------------------------------------------
int __thiscall sub_1005FB70(int this)
{
  int v1; // edi@1
  int v2; // esi@1
  int result; // eax@1

  v1 = *(_DWORD *)(this + 2844);
  v2 = *(_DWORD *)(this + 512);
  *(_DWORD *)(this + 2860) = 0;
  *(_DWORD *)(this + 2868) = 0;
  *(_DWORD *)(this + 2864) = (*(_BYTE *)(v2 + v1 + 21) | (*(_BYTE *)(v2 + v1 + 20) << 8)) + 1;
  result = *(_BYTE *)(v2 + v1 + 22) << 8;
  *(_DWORD *)(this + 2872) = (result | *(_BYTE *)(v2 + v1 + 23)) + 1;
  return result;
}

//----- (1005FBD0) --------------------------------------------------------
int __thiscall sub_1005FBD0(int this)
{
  int v1; // edi@1
  int v2; // esi@1
  int result; // eax@1

  v1 = *(_DWORD *)(this + 2844);
  v2 = *(_DWORD *)(this + 512);
  *(_DWORD *)(this + 2880) = *(_BYTE *)(v2 + v1 + 13) | (*(_BYTE *)(v2 + v1 + 12) << 8);
  *(_DWORD *)(this + 2888) = *(_BYTE *)(v2 + v1 + 15) | (*(_BYTE *)(v2 + v1 + 14) << 8);
  *(_DWORD *)(this + 2884) = (*(_BYTE *)(v2 + v1 + 21) | (*(_BYTE *)(v2 + v1 + 20) << 8)) + 1;
  result = *(_BYTE *)(v2 + v1 + 22) << 8;
  *(_DWORD *)(this + 2892) = (result | *(_BYTE *)(v2 + v1 + 23)) + 1;
  return result;
}

//----- (1005FC60) --------------------------------------------------------
int __thiscall sub_1005FC60(int this)
{
  int v1; // eax@1
  int v2; // ST20_4@1
  int v3; // edx@1
  int v4; // esi@1

  v1 = *(_DWORD *)(this + 512);
  v2 = *(_DWORD *)(this + 2844);
  v3 = *(_WORD *)(this + 2854);
  v4 = *(_WORD *)(this + 2852);
  return sub_10060B90(
           this,
           this,
           v1 + v2,
           v4 + (*(_BYTE *)(v1 + v2 + 12 + 1) | (signed __int16)(*(_BYTE *)(v1 + v2 + 12) << 8)),
           v3 + (*(_BYTE *)(v1 + v2 + 14 + 1) | (signed __int16)(*(_BYTE *)(v1 + v2 + 14) << 8)),
           v4 + (*(_BYTE *)(v1 + v2 + 16 + 1) | (signed __int16)(*(_BYTE *)(v1 + v2 + 16) << 8)),
           v3 + (*(_BYTE *)(v1 + v2 + 19) | (signed __int16)(*(_BYTE *)(v1 + v2 + 18) << 8)),
           v4 + (*(_BYTE *)(v1 + v2 + 25) | (signed __int16)(*(_BYTE *)(v1 + v2 + 24) << 8)),
           v3 + (*(_BYTE *)(v1 + v2 + 27) | (signed __int16)(*(_BYTE *)(v1 + v2 + 26) << 8)),
           v4 + (*(_BYTE *)(v1 + v2 + 21) | (signed __int16)(*(_BYTE *)(v1 + v2 + 20) << 8)),
           v3 + (*(_BYTE *)(v1 + v2 + 23) | (signed __int16)(*(_BYTE *)(v1 + v2 + 22) << 8)),
           v2);
}

//----- (1005FD80) --------------------------------------------------------
int __thiscall sub_1005FD80(int this)
{
  int v1; // eax@1
  int v2; // ST20_4@1
  int v3; // edx@1
  int v4; // esi@1

  v1 = *(_DWORD *)(this + 512);
  v2 = *(_DWORD *)(this + 2844);
  v3 = *(_WORD *)(this + 2854);
  v4 = *(_WORD *)(this + 2852);
  return sub_10060B90(
           this,
           this,
           v1 + v2,
           v4 + (*(_BYTE *)(v1 + v2 + 12 + 1) | (signed __int16)(*(_BYTE *)(v1 + v2 + 12) << 8)),
           v3 + (*(_BYTE *)(v1 + v2 + 14 + 1) | (signed __int16)(*(_BYTE *)(v1 + v2 + 14) << 8)),
           v4 + (*(_BYTE *)(v1 + v2 + 16 + 1) | (signed __int16)(*(_BYTE *)(v1 + v2 + 16) << 8)),
           v3 + (*(_BYTE *)(v1 + v2 + 19) | (signed __int16)(*(_BYTE *)(v1 + v2 + 18) << 8)),
           v4 + (*(_BYTE *)(v1 + v2 + 25) | (signed __int16)(*(_BYTE *)(v1 + v2 + 24) << 8)),
           v3 + (*(_BYTE *)(v1 + v2 + 27) | (signed __int16)(*(_BYTE *)(v1 + v2 + 26) << 8)),
           v4 + (*(_BYTE *)(v1 + v2 + 21) | (signed __int16)(*(_BYTE *)(v1 + v2 + 20) << 8)),
           v3 + (*(_BYTE *)(v1 + v2 + 23) | (signed __int16)(*(_BYTE *)(v1 + v2 + 22) << 8)),
           v2);
}

//----- (1005FEA0) --------------------------------------------------------
int __thiscall sub_1005FEA0(int this)
{
  int v1; // esi@1
  int v2; // ebx@1
  __int16 v3; // bp@1
  __int16 v4; // dx@1
  int v5; // eax@1
  int v6; // ecx@1
  int v7; // edi@1
  int v8; // esi@1
  __int16 v9; // bx@1
  int v10; // eax@1
  int v11; // edi@1
  int v12; // edx@2
  int v13; // ecx@2
  int v15; // [sp+10h] [bp-14h]@1
  int v16; // [sp+14h] [bp-10h]@1
  __int16 v17; // [sp+18h] [bp-Ch]@1
  int v18; // [sp+1Ch] [bp-8h]@1
  int v19; // [sp+20h] [bp-4h]@1

  v15 = this;
  v1 = *(_DWORD *)(this + 512);
  v2 = *(_DWORD *)(this + 2844);
  v3 = 0;
  v16 = (unsigned __int16)(*(_WORD *)(this + 2852) + _byteswap_ushort(*(_WORD *)(v1 + v2 + 12)));
  v4 = 0;
  v17 = *(_WORD *)(this + 2854) + _byteswap_ushort(*(_WORD *)(v1 + v2 + 14));
  v5 = *(_DWORD *)(this + 2844);
  v18 = v5 + 20;
  v19 = v5 + 22;
  v6 = *(_BYTE *)(v1 + v5 + 17) | (*(_BYTE *)(v1 + v5 + 16) << 8);
  v7 = *(_DWORD *)(v15 + 2844);
  v8 = (*(_BYTE *)(*(_DWORD *)(v15 + 512) + v7 + 18) << 8) | *(_BYTE *)(v1 + *(_DWORD *)(v15 + 2844) + 19);
  v9 = v17;
  v10 = *(_BYTE *)(*(_DWORD *)(v15 + 512) + v7);
  v11 = v16;
  switch ( v10 )
  {
    case 0:
      v12 = *(_DWORD *)(v15 + 512);
      v3 = *(_WORD *)(v15 + 2852) + 1 + _byteswap_ushort(*(_WORD *)(v12 + v18)) - v16;
      v13 = *(_BYTE *)(v12 + v19 + 1);
      v4 = *(_WORD *)(v15 + 2854) + 1 + _byteswap_ushort(*(_WORD *)(v12 + v19)) - v17;
      return sub_10060B90(
               v15,
               *(_DWORD *)(v15 + 2844),
               v11,
               (signed __int16)v11,
               v9,
               (signed __int16)v11 + v3,
               v9,
               (signed __int16)v11,
               v9 + v4,
               (signed __int16)v11 + v3,
               v9 + v4,
               *(_DWORD *)(v15 + 2844));
    case 6:
      v11 = (signed __int16)v6 / -2 + v16;
      goto LABEL_11;
    case 7:
      v11 = v16 - v6;
      goto LABEL_11;
    case 10:
      v11 = (signed __int16)v6 / -2 + v16;
      goto LABEL_6;
    case 9:
LABEL_6:
      v9 = (signed __int16)v8 / -2 + v17;
      goto LABEL_11;
    case 11:
      v11 = v16 - v6;
      v9 = (signed __int16)v8 / -2 + v17;
      goto LABEL_11;
    case 14:
      v11 = (signed __int16)v6 / -2 + v16;
      goto LABEL_10;
    case 15:
      v11 = v16 - v6;
      goto LABEL_10;
    case 13:
LABEL_10:
      v9 = v17 - v8;
      goto LABEL_11;
    case 5:
LABEL_11:
      v3 = v6 + 1;
      v4 = v8 + 1;
      break;
    case 1:
    case 2:
    case 3:
    case 4:
    case 8:
    case 12:
      return sub_10060B90(
               v15,
               *(_DWORD *)(v15 + 2844),
               v11,
               (signed __int16)v11,
               v9,
               (signed __int16)v11 + v3,
               v9,
               (signed __int16)v11,
               v9 + v4,
               (signed __int16)v11 + v3,
               v9 + v4,
               *(_DWORD *)(v15 + 2844));
  }
  return sub_10060B90(
           v15,
           *(_DWORD *)(v15 + 2844),
           v11,
           (signed __int16)v11,
           v9,
           (signed __int16)v11 + v3,
           v9,
           (signed __int16)v11,
           v9 + v4,
           (signed __int16)v11 + v3,
           v9 + v4,
           *(_DWORD *)(v15 + 2844));
}

//----- (10060090) --------------------------------------------------------
int __thiscall sub_10060090(int this)
{
  int v1; // ebp@1
  int v2; // edx@1
  int v3; // ST20_4@1
  int v4; // edi@1
  signed int v5; // ecx@1
  signed int v6; // ST14_4@1

  v1 = this;
  v2 = *(_DWORD *)(this + 512);
  v3 = *(_DWORD *)(this + 2844);
  v4 = (signed __int16)(*(_WORD *)(this + 2854) + _byteswap_ushort(*(_WORD *)(v2 + v3 + 14)));
  v5 = (signed __int16)(*(_WORD *)(this + 2852) + _byteswap_ushort(*(_WORD *)(v2 + v3 + 12)));
  v6 = v4 + *(_BYTE *)(v2 + v3 + 11);
  return sub_10060B90(
           v1,
           v3,
           v4,
           v5,
           v4,
           v5 + 8 * (*(_BYTE *)(v2 + v3 + 10) & 0x3F),
           v4,
           v5,
           v6,
           v5 + 8 * (*(_BYTE *)(v2 + v3 + 10) & 0x3F),
           v6,
           v3);
}

//----- (10060100) --------------------------------------------------------
int __userpurge sub_10060100@<eax>(int a1@<ecx>, int a2@<edi>, int a3)
{
  int v3; // eax@1
  int v4; // ebx@1
  int v5; // ecx@1
  int v6; // esi@1
  int v7; // ecx@6
  void *v8; // eax@6
  int v9; // edi@10
  int v10; // eax@10
  int v11; // ecx@10
  int *v12; // eax@10
  char v13; // al@14
  int v14; // ecx@14
  int v15; // edx@16
  char v16; // al@19
  int v17; // ecx@19
  int v18; // edx@21
  char v19; // al@24
  int v20; // ecx@24
  int v21; // edx@26
  char v22; // al@29
  int v23; // ecx@29
  int v24; // edx@31
  int v25; // edx@34
  int result; // eax@34
  int v27; // eax@35
  int v28; // [sp-1Ch] [bp-7Ch]@0
  int v29; // [sp-18h] [bp-78h]@0
  LPVOID lpMem; // [sp+0h] [bp-60h]@6
  int v31; // [sp+10h] [bp-50h]@6
  unsigned int v32; // [sp+14h] [bp-4Ch]@6
  LPVOID v33; // [sp+18h] [bp-48h]@4
  int v34; // [sp+1Ch] [bp-44h]@4
  int v35; // [sp+20h] [bp-40h]@4
  __int64 v36; // [sp+24h] [bp-3Ch]@1
  int v37; // [sp+2Ch] [bp-34h]@1
  int v38; // [sp+30h] [bp-30h]@1
  int v39; // [sp+34h] [bp-2Ch]@2
  int v40; // [sp+38h] [bp-28h]@10
  int v41; // [sp+3Ch] [bp-24h]@5
  int *v42; // [sp+40h] [bp-20h]@2
  int v43; // [sp+44h] [bp-1Ch]@10
  int v44; // [sp+48h] [bp-18h]@1
  int v45; // [sp+5Ch] [bp-4h]@4

  v3 = a3 & 1;
  _mm_storel_pd((double *)&v36, 0i64);
  v44 = v3;
  v4 = a1;
  v37 = v3;
  v38 = HIDWORD(v36);
  sub_10002CB0((void *)(a1 + 412), (int)&a3, (int)&v37);
  v6 = a3;
  if ( a3 == *(_DWORD *)(v4 + 416) )
  {
    v42 = &v37;
    sub_10002E30(v4 + 412, (int)&v39, v5, (int)&v42, v5);
    v6 = v39;
  }
  if ( !*(_DWORD *)(v6 + 16) )
  {
    v33 = 0;
    v34 = 0;
    v35 = 0;
    v45 = 0;
    if ( v44 & 1 )
    {
      v41 = (int)"DRAWBG";
      v42 = (int *)"1";
      sub_100027D0((int)&v33, (unsigned int)&v41);
    }
    v41 = 0;
    v42 = 0;
    sub_100027D0((int)&v33, (unsigned int)&v41);
    v32 = 15;
    v31 = 0;
    LOBYTE(lpMem) = 0;
    sub_10001990((int)&lpMem, "ps_main", 7u);
    LOBYTE(v45) = 1;
    v8 = &lpMem;
    if ( v32 >= 0x10 )
      v8 = lpMem;
    sub_10040760(
      (void *)v4,
      (int)&a3,
      L"SATURN_PSH",
      (int)&a3,
      (int)v33,
      (int)&a3,
      (int)v8,
      (int)"ps_5_0",
      v28,
      v29,
      (int)&a3,
      v7);
    LOBYTE(v45) = 0;
    if ( v32 >= 0x10 )
      sub_10001EA0(v4, a2, lpMem, v32 + 1);
    v9 = (*(int (__stdcall **)(int))(*(_DWORD *)a3 + 16))(a3);
    v10 = (*(int (__stdcall **)(int))(*(_DWORD *)a3 + 12))(a3);
    (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v4 + 4) + 60))(
      *(_DWORD *)(v4 + 4),
      v10,
      v9,
      0,
      &v40);
    v43 = v44;
    v44 = HIDWORD(v36);
    sub_10002CB0((void *)(v4 + 412), (int)&v42, (int)&v43);
    v12 = v42;
    if ( v42 == *(int **)(v4 + 416) )
    {
      v42 = &v43;
      sub_10002E30(v4 + 412, (int)&v36, v11, (int)&v42, v11);
      v12 = (int *)v36;
    }
    v12[4] = v40;
    v45 = -1;
    if ( v33 )
      sub_100029D0(v4, v9, v33, (v35 - (signed int)v33) >> 3);
  }
  v13 = 0;
  v14 = *(_DWORD *)(v4 + 528) + 4;
  if ( *(_DWORD *)(v4 + 276) != *(_DWORD *)v14 )
  {
    v13 = 1;
    *(_DWORD *)(v4 + 276) = *(_DWORD *)v14;
  }
  v15 = *(_DWORD *)(v4 + 8);
  if ( v15 && v13 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v15 + 32))(v15, 0, 1, v14);
  v16 = 0;
  v17 = *(_DWORD *)(v4 + 532) + 4;
  if ( *(_DWORD *)(v4 + 280) != *(_DWORD *)v17 )
  {
    v16 = 1;
    *(_DWORD *)(v4 + 280) = *(_DWORD *)v17;
  }
  v18 = *(_DWORD *)(v4 + 8);
  if ( v18 && v16 )
    (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v18 + 32))(v18, 1, 1, v17);
  v19 = 0;
  v20 = *(_DWORD *)(v4 + 536) + 4;
  if ( *(_DWORD *)(v4 + 284) != *(_DWORD *)v20 )
  {
    v19 = 1;
    *(_DWORD *)(v4 + 284) = *(_DWORD *)v20;
  }
  v21 = *(_DWORD *)(v4 + 8);
  if ( v21 && v19 )
    (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v21 + 32))(v21, 2, 1, v20);
  v22 = 0;
  v23 = *(_DWORD *)(v4 + 540) + 4;
  if ( *(_DWORD *)(v4 + 288) != *(_DWORD *)v23 )
  {
    v22 = 1;
    *(_DWORD *)(v4 + 288) = *(_DWORD *)v23;
  }
  v24 = *(_DWORD *)(v4 + 8);
  if ( v24 && v22 )
    (*(void (__stdcall **)(int, signed int, signed int, int))(*(_DWORD *)v24 + 32))(v24, 3, 1, v23);
  v25 = *(_DWORD *)(v6 + 16);
  result = *(_DWORD *)(v4 + 408);
  a3 = *(_DWORD *)(v4 + 408);
  if ( *(_DWORD *)(v4 + 152) != v25 )
  {
    v27 = *(_DWORD *)(v4 + 8);
    *(_DWORD *)(v4 + 152) = v25;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v27 + 36))(v27, v25, 0, 0);
    result = a3;
  }
  if ( *(_DWORD *)(v4 + 156) != result )
  {
    *(_DWORD *)(v4 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v4 + 8) + 64))(
               *(_DWORD *)(v4 + 8),
               0,
               1,
               &a3);
  }
  return result;
}

//----- (10060400) --------------------------------------------------------
int __usercall sub_10060400@<eax>(int a1@<ecx>, int a2@<edi>)
{
  int v2; // ebx@1
  int v3; // ecx@1
  int v4; // esi@1
  int v5; // ecx@4
  void *v6; // eax@4
  int v7; // edi@8
  int v8; // eax@8
  int v9; // ecx@8
  int *v10; // eax@8
  int v11; // ecx@12
  char v12; // al@12
  int v13; // ecx@14
  int v14; // edx@17
  int result; // eax@17
  int v16; // eax@18
  int v17; // [sp-14h] [bp-70h]@0
  int v18; // [sp-10h] [bp-6Ch]@0
  LPVOID lpMem; // [sp+8h] [bp-54h]@4
  int v20; // [sp+18h] [bp-44h]@4
  unsigned int v21; // [sp+1Ch] [bp-40h]@4
  LPVOID v22; // [sp+20h] [bp-3Ch]@4
  int v23; // [sp+24h] [bp-38h]@4
  int v24; // [sp+28h] [bp-34h]@4
  __int64 v25; // [sp+2Ch] [bp-30h]@1
  int v26; // [sp+34h] [bp-28h]@2
  int v27; // [sp+38h] [bp-24h]@4
  int v28; // [sp+3Ch] [bp-20h]@1
  int v29; // [sp+40h] [bp-1Ch]@1
  int v30; // [sp+44h] [bp-18h]@8
  int *v31; // [sp+48h] [bp-14h]@2
  int v32; // [sp+4Ch] [bp-10h]@1
  int v33; // [sp+58h] [bp-4h]@4

  v28 = 2;
  _mm_storel_pd((double *)&v25, 0i64);
  v2 = a1;
  v29 = HIDWORD(v25);
  sub_10002CB0((void *)(a1 + 412), (int)&v32, (int)&v28);
  v4 = v32;
  if ( v32 == *(_DWORD *)(v2 + 416) )
  {
    v31 = &v28;
    sub_10002E30(v2 + 412, (int)&v26, v3, (int)&v31, v3);
    v4 = v26;
  }
  if ( !*(_DWORD *)(v4 + 16) )
  {
    v22 = 0;
    v23 = 0;
    v24 = 0;
    v33 = 0;
    v26 = (int)"FINAL";
    v27 = (int)"1";
    sub_100027D0((int)&v22, (unsigned int)&v26);
    v26 = 0;
    v27 = 0;
    sub_100027D0((int)&v22, (unsigned int)&v26);
    v21 = 15;
    v20 = 0;
    LOBYTE(lpMem) = 0;
    sub_10001990((int)&lpMem, "ps_main", 7u);
    LOBYTE(v33) = 1;
    v6 = &lpMem;
    if ( v21 >= 0x10 )
      v6 = lpMem;
    sub_10040760(
      (void *)v2,
      (int)&v32,
      L"SATURN_PSH",
      (int)&v32,
      (int)v22,
      (int)&v32,
      (int)v6,
      (int)"ps_5_0",
      v17,
      v18,
      (int)&v32,
      v5);
    LOBYTE(v33) = 0;
    if ( v21 >= 0x10 )
      sub_10001EA0(v2, a2, lpMem, v21 + 1);
    v7 = (*(int (__stdcall **)(int))(*(_DWORD *)v32 + 16))(v32);
    v8 = (*(int (__stdcall **)(int))(*(_DWORD *)v32 + 12))(v32);
    (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v2 + 4) + 60))(
      *(_DWORD *)(v2 + 4),
      v8,
      v7,
      0,
      &v30);
    v27 = HIDWORD(v25);
    v26 = 2;
    sub_10002CB0((void *)(v2 + 412), (int)&v31, (int)&v26);
    v10 = v31;
    if ( v31 == *(int **)(v2 + 416) )
    {
      v31 = &v26;
      sub_10002E30(v2 + 412, (int)&v25, v9, (int)&v31, v9);
      v10 = (int *)v25;
    }
    v10[4] = v30;
    v33 = -1;
    if ( v22 )
      sub_100029D0(v2, v7, v22, (v24 - (signed int)v22) >> 3);
  }
  v11 = *(_DWORD *)(v2 + 892);
  v12 = 0;
  if ( *(_DWORD *)(v2 + 276) != v11 )
  {
    v12 = 1;
    *(_DWORD *)(v2 + 276) = v11;
  }
  v13 = *(_DWORD *)(v2 + 8);
  if ( v13 && v12 )
    (*(void (__stdcall **)(int, _DWORD, signed int, int))(*(_DWORD *)v13 + 32))(v13, 0, 1, v2 + 892);
  v14 = *(_DWORD *)(v4 + 16);
  result = *(_DWORD *)(v2 + 408);
  v32 = *(_DWORD *)(v2 + 408);
  if ( *(_DWORD *)(v2 + 152) != v14 )
  {
    v16 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 152) = v14;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v16 + 36))(v16, v14, 0, 0);
    result = v32;
  }
  if ( *(_DWORD *)(v2 + 156) != result )
  {
    *(_DWORD *)(v2 + 156) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 64))(
               *(_DWORD *)(v2 + 8),
               0,
               1,
               &v32);
  }
  return result;
}

//----- (10060660) --------------------------------------------------------
int __thiscall sub_10060660(int this)
{
  int v1; // esi@1
  int v2; // ST40_4@1
  int v3; // edx@1
  int v4; // eax@1
  int v5; // ecx@1
  int v6; // ST40_4@1
  int v7; // eax@1
  int v8; // ecx@1
  int v9; // ST40_4@1
  int v10; // eax@1
  int v11; // ecx@1
  int v12; // eax@1
  int v14; // [sp+54h] [bp-1Ch]@1
  int v15; // [sp+58h] [bp-18h]@1
  int v16; // [sp+5Ch] [bp-14h]@1
  int v17; // [sp+60h] [bp-10h]@1
  int v18; // [sp+64h] [bp-Ch]@1
  int v19; // [sp+68h] [bp-8h]@1

  v1 = this;
  v14 = 0;
  v17 = 786432;
  v15 = 0;
  v2 = *(_DWORD *)(this + 516);
  v3 = *(_DWORD *)(this + 8);
  v4 = *(_DWORD *)(this + 532);
  v18 = 1;
  v16 = 0;
  v19 = 1;
  (*(void (__stdcall **)(int, _DWORD, _DWORD, int *, int, _DWORD, _DWORD))(*(_DWORD *)v3 + 192))(
    v3,
    *(_DWORD *)v4,
    0,
    &v14,
    v2,
    0,
    0);
  v5 = *(_DWORD *)(v1 + 8);
  v6 = *(_DWORD *)(v1 + 516) + 0x100000;
  v14 = 0;
  v7 = *(_DWORD *)(v1 + 536);
  v17 = 4096;
  v15 = 0;
  v18 = 1;
  v16 = 0;
  v19 = 1;
  (*(void (__stdcall **)(int, _DWORD, _DWORD, int *, int, _DWORD, _DWORD))(*(_DWORD *)v5 + 192))(
    v5,
    *(_DWORD *)v7,
    0,
    &v14,
    v6,
    0,
    0);
  v8 = *(_DWORD *)(v1 + 8);
  v9 = *(_DWORD *)(v1 + 512);
  v14 = 0;
  v10 = *(_DWORD *)(v1 + 528);
  v17 = 786432;
  v15 = 0;
  v18 = 1;
  v16 = 0;
  v19 = 1;
  (*(void (__stdcall **)(int, _DWORD, _DWORD, int *, int, _DWORD, _DWORD))(*(_DWORD *)v8 + 192))(
    v8,
    *(_DWORD *)v10,
    0,
    &v14,
    v9,
    0,
    0);
  v11 = *(_DWORD *)(v1 + 8);
  v14 = 0;
  v12 = *(_DWORD *)(v1 + 540);
  v17 = 1022;
  v15 = 0;
  v18 = 1;
  v16 = 0;
  v19 = 1;
  return (*(int (__stdcall **)(int, _DWORD, _DWORD, int *, int, _DWORD, _DWORD))(*(_DWORD *)v11 + 192))(
           v11,
           *(_DWORD *)v12,
           0,
           &v14,
           v1 + 1796,
           0,
           0);
}

//----- (100607D0) --------------------------------------------------------
int __thiscall sub_100607D0(void *this, int a2)
{
  int v2; // ebx@1
  int v3; // edi@1
  int v4; // esi@1
  int v5; // ecx@6
  void *v6; // eax@6
  int v7; // ebx@10
  int v8; // ebx@10
  int v9; // ecx@10
  int *v10; // eax@10
  int v11; // edx@15
  int result; // eax@15
  int v13; // eax@16
  int v14; // edx@19
  int v15; // eax@20
  int v16; // [sp-10h] [bp-D4h]@0
  int v17; // [sp-Ch] [bp-D0h]@0
  int v18; // [sp+10h] [bp-B4h]@4
  int v19; // [sp+14h] [bp-B0h]@4
  int v20; // [sp+18h] [bp-ACh]@4
  int v21; // [sp+1Ch] [bp-A8h]@4
  int v22; // [sp+20h] [bp-A4h]@4
  int v23; // [sp+24h] [bp-A0h]@4
  int v24; // [sp+28h] [bp-9Ch]@4
  int v25; // [sp+2Ch] [bp-98h]@4
  int v26; // [sp+30h] [bp-94h]@4
  int v27; // [sp+34h] [bp-90h]@4
  int v28; // [sp+38h] [bp-8Ch]@4
  int v29; // [sp+3Ch] [bp-88h]@4
  int v30; // [sp+40h] [bp-84h]@4
  int v31; // [sp+44h] [bp-80h]@4
  int v32; // [sp+48h] [bp-7Ch]@4
  int v33; // [sp+4Ch] [bp-78h]@4
  int v34; // [sp+50h] [bp-74h]@4
  int v35; // [sp+54h] [bp-70h]@4
  int v36; // [sp+58h] [bp-6Ch]@4
  int v37; // [sp+5Ch] [bp-68h]@4
  int v38; // [sp+60h] [bp-64h]@4
  LPVOID lpMem; // [sp+6Ch] [bp-58h]@6
  int v40; // [sp+7Ch] [bp-48h]@6
  unsigned int v41; // [sp+80h] [bp-44h]@6
  int *v42; // [sp+84h] [bp-40h]@11
  int v43; // [sp+88h] [bp-3Ch]@1
  LPVOID v44; // [sp+8Ch] [bp-38h]@4
  int v45; // [sp+90h] [bp-34h]@4
  int v46; // [sp+94h] [bp-30h]@4
  int v47; // [sp+98h] [bp-2Ch]@2
  int v48; // [sp+9Ch] [bp-28h]@10
  int v49; // [sp+A0h] [bp-24h]@5
  int *v50; // [sp+A4h] [bp-20h]@5
  int v51; // [sp+A8h] [bp-1Ch]@2
  int v52; // [sp+ACh] [bp-18h]@1
  int v53; // [sp+B0h] [bp-14h]@1
  int v54; // [sp+C0h] [bp-4h]@4

  v2 = (int)this;
  v52 = (int)this;
  v43 = (int)((char *)this + 376);
  v3 = a2 & 1;
  a2 &= 1u;
  sub_10002D30((int)((char *)this + 376), (int)&v53, (int)&a2);
  v4 = v53;
  if ( v53 == *(_DWORD *)(v2 + 380) )
  {
    v51 = (int)&a2;
    sub_10002E90(v2 + 376, (int)&v47, v2 + 376, (int)&v51, v2 + 376);
    v4 = v47;
  }
  if ( !*(_DWORD *)(v4 + 12) )
  {
    v18 = (int)"POSITION";
    v19 = 0;
    v20 = 6;
    v21 = 0;
    v22 = 0;
    v23 = 0;
    v24 = 0;
    v25 = (int)"TEXCOORD";
    v26 = 0;
    v27 = 16;
    v28 = 0;
    v29 = -1;
    v30 = 0;
    v31 = 0;
    v32 = (int)"COLOR";
    v33 = 0;
    v34 = 42;
    v35 = 0;
    v36 = -1;
    v37 = 0;
    v38 = 0;
    v44 = 0;
    v45 = 0;
    v46 = 0;
    v54 = 0;
    if ( v3 )
    {
      v49 = (int)"DRAWBG";
      v50 = (int *)"1";
      sub_100027D0((int)&v44, (unsigned int)&v49);
    }
    v49 = 0;
    v50 = 0;
    sub_100027D0((int)&v44, (unsigned int)&v49);
    v41 = 15;
    v40 = 0;
    LOBYTE(lpMem) = 0;
    sub_10001990((int)&lpMem, "vs_main", 7u);
    LOBYTE(v54) = 1;
    v6 = &lpMem;
    if ( v41 >= 0x10 )
      v6 = lpMem;
    sub_10040760(
      (void *)v2,
      (int)&v51,
      L"SATURN_VSH",
      (int)&v51,
      (int)v44,
      (int)&v51,
      (int)v6,
      (int)"vs_5_0",
      v16,
      v17,
      (int)&v51,
      v5);
    LOBYTE(v54) = 0;
    if ( v41 >= 0x10 )
      sub_10001EA0(v2, v3, lpMem, v41 + 1);
    v53 = (*(int (__stdcall **)(int))(*(_DWORD *)v51 + 12))(v51);
    v7 = (*(int (__stdcall **)(int))(*(_DWORD *)v51 + 16))(v51);
    (*(void (__stdcall **)(_DWORD, int, int, _DWORD, int *))(**(_DWORD **)(v52 + 4) + 48))(
      *(_DWORD *)(v52 + 4),
      v53,
      v7,
      0,
      &v47);
    (*(void (__stdcall **)(_DWORD, int *, signed int, int, int, int *))(**(_DWORD **)(v52 + 4) + 44))(
      *(_DWORD *)(v52 + 4),
      &v18,
      3,
      v53,
      v7,
      &v48);
    v8 = v43;
    v53 = v3;
    sub_10002D30(v43, (int)&v50, (int)&v53);
    v10 = v50;
    if ( v50 == *(int **)(v8 + 4) )
    {
      v50 = &v53;
      sub_10002E90(v8, (int)&v42, v9, (int)&v50, v9);
      v10 = v42;
    }
    v10[3] = v47;
    v10[4] = v48;
    v54 = -1;
    if ( v44 )
      sub_100029D0(v8, v3, v44, (v46 - (signed int)v44) >> 3);
    v2 = v52;
  }
  (*(void (__stdcall **)(_DWORD, _DWORD, _DWORD, _DWORD, int, _DWORD, _DWORD))(**(_DWORD **)(v2 + 8) + 192))(
    *(_DWORD *)(v2 + 8),
    *(_DWORD *)(v2 + 372),
    0,
    0,
    v2 + 544,
    0,
    0);
  v11 = *(_DWORD *)(v4 + 12);
  result = *(_DWORD *)(v2 + 372);
  v53 = *(_DWORD *)(v2 + 372);
  if ( *(_DWORD *)(v2 + 140) != v11 )
  {
    v13 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 140) = v11;
    (*(void (__stdcall **)(int, int, _DWORD, _DWORD))(*(_DWORD *)v13 + 44))(v13, v11, 0, 0);
    result = v53;
  }
  if ( *(_DWORD *)(v2 + 144) != result )
  {
    *(_DWORD *)(v2 + 144) = result;
    result = (*(int (__stdcall **)(_DWORD, _DWORD, signed int, int *))(**(_DWORD **)(v2 + 8) + 28))(
               *(_DWORD *)(v2 + 8),
               0,
               1,
               &v53);
  }
  v14 = *(_DWORD *)(v4 + 16);
  if ( *(_DWORD *)(v2 + 148) != v14 )
  {
    v15 = *(_DWORD *)(v2 + 8);
    *(_DWORD *)(v2 + 148) = v14;
    result = (*(int (__stdcall **)(int, int))(*(_DWORD *)v15 + 68))(v15, v14);
  }
  return result;
}

//----- (10060B90) --------------------------------------------------------
int __userpurge sub_10060B90@<eax>(int a1@<ecx>, int a2@<ebx>, int a3@<edi>, signed int a4, signed int a5, signed int a6, signed int a7, signed int a8, signed int a9, signed int a10, signed int a11, int a12)
{
  int v12; // esi@1
  unsigned int v13; // ecx@1
  int v14; // eax@1
  unsigned int v15; // eax@4
  int v16; // eax@8
  int v17; // ecx@8
  int v18; // edx@8
  unsigned int v19; // ecx@8
  int v20; // eax@8
  unsigned int v21; // eax@11
  int v22; // eax@15
  int v23; // ecx@15
  int v24; // edx@15
  unsigned int v25; // ecx@15
  int v26; // eax@15
  unsigned int v27; // eax@18
  int v28; // eax@22
  int v29; // ecx@22
  int v30; // edx@22
  float v31; // xmm0_4@22
  float v32; // xmm1_4@22
  unsigned int v33; // ecx@22
  int v34; // eax@22
  unsigned int v35; // eax@25
  int v36; // eax@29
  int v37; // ecx@29
  int v38; // edx@29
  unsigned int v39; // ecx@29
  int v40; // eax@29
  unsigned int v41; // eax@32
  int v42; // eax@36
  int v43; // ecx@36
  int v44; // edx@36
  unsigned int v45; // ecx@36
  int v46; // eax@36
  unsigned int v47; // eax@39
  int v48; // eax@43
  int v49; // ecx@43
  int v50; // edx@43
  int result; // eax@43

  v12 = a1;
  v13 = *(_DWORD *)(a1 + 868);
  v14 = *(_DWORD *)(v12 + 872);
  if ( v13 == v14 )
  {
    if ( !v14 )
      *(_DWORD *)(v12 + 872) = 1;
    v15 = *(_DWORD *)(v12 + 872);
    if ( v13 >= v15 )
    {
      do
        v15 *= 2;
      while ( v13 >= v15 );
      *(_DWORD *)(v12 + 872) = v15;
    }
    *(_DWORD *)(v12 + 864) = sub_1002D6F7(a2, a3, *(_DWORD *)(v12 + 864), 24 * *(_DWORD *)(v12 + 872), 0x10u);
  }
  v16 = *(_DWORD *)(v12 + 868);
  v17 = *(_DWORD *)(v12 + 864);
  v18 = 3 * v16;
  *(_DWORD *)(v12 + 868) = v16 + 1;
  *(_DWORD *)(v17 + 8 * v18 + 20) = a12;
  *(_DWORD *)(v17 + 8 * v18 + 8) = 0;
  *(_DWORD *)(v17 + 8 * v18 + 12) = 0;
  *(_DWORD *)(v17 + 8 * v18 + 16) = 0;
  *(float *)(v17 + 8 * v18) = (float)a4;
  *(float *)(v17 + 8 * v18 + 4) = (float)a5;
  v19 = *(_DWORD *)(v12 + 868);
  v20 = *(_DWORD *)(v12 + 872);
  if ( v19 == v20 )
  {
    if ( !v20 )
      *(_DWORD *)(v12 + 872) = 1;
    v21 = *(_DWORD *)(v12 + 872);
    if ( v19 >= v21 )
    {
      do
        v21 *= 2;
      while ( v19 >= v21 );
      *(_DWORD *)(v12 + 872) = v21;
    }
    *(_DWORD *)(v12 + 864) = sub_1002D6F7(a2, a12, *(_DWORD *)(v12 + 864), 24 * *(_DWORD *)(v12 + 872), 0x10u);
  }
  v22 = *(_DWORD *)(v12 + 868);
  v23 = *(_DWORD *)(v12 + 864);
  v24 = 3 * v22;
  *(_DWORD *)(v12 + 868) = v22 + 1;
  *(_DWORD *)(v23 + 8 * v24 + 20) = a12;
  *(_DWORD *)(v23 + 8 * v24 + 8) = 0;
  *(_DWORD *)(v23 + 8 * v24 + 12) = 1065353216;
  *(float *)(v23 + 8 * v24) = (float)a6;
  *(_DWORD *)(v23 + 8 * v24 + 16) = 0;
  *(float *)(v23 + 8 * v24 + 4) = (float)a7;
  v25 = *(_DWORD *)(v12 + 868);
  v26 = *(_DWORD *)(v12 + 872);
  if ( v25 == v26 )
  {
    if ( !v26 )
      *(_DWORD *)(v12 + 872) = 1;
    v27 = *(_DWORD *)(v12 + 872);
    if ( v25 >= v27 )
    {
      do
        v27 *= 2;
      while ( v25 >= v27 );
      *(_DWORD *)(v12 + 872) = v27;
    }
    *(_DWORD *)(v12 + 864) = sub_1002D6F7(a2, a12, *(_DWORD *)(v12 + 864), 24 * *(_DWORD *)(v12 + 872), 0x10u);
  }
  v28 = *(_DWORD *)(v12 + 868);
  v29 = *(_DWORD *)(v12 + 864);
  v30 = 3 * v28;
  *(_DWORD *)(v12 + 868) = v28 + 1;
  v31 = (float)a8;
  *(_DWORD *)(v29 + 8 * v30 + 20) = a12;
  *(_DWORD *)(v29 + 8 * v30 + 8) = 0;
  *(_DWORD *)(v29 + 8 * v30 + 12) = 0;
  *(_DWORD *)(v29 + 8 * v30 + 16) = 1065353216;
  v32 = (float)a9;
  *(float *)(v29 + 8 * v30) = (float)a8;
  *(float *)(v29 + 8 * v30 + 4) = (float)a9;
  v33 = *(_DWORD *)(v12 + 868);
  v34 = *(_DWORD *)(v12 + 872);
  if ( v33 == v34 )
  {
    if ( !v34 )
      *(_DWORD *)(v12 + 872) = 1;
    v35 = *(_DWORD *)(v12 + 872);
    if ( v33 >= v35 )
    {
      do
        v35 *= 2;
      while ( v33 >= v35 );
      *(_DWORD *)(v12 + 872) = v35;
    }
    *(_DWORD *)(v12 + 864) = sub_1002D6F7(a2, a12, *(_DWORD *)(v12 + 864), 24 * *(_DWORD *)(v12 + 872), 0x10u);
    v31 = (float)a8;
    v32 = (float)a9;
  }
  v36 = *(_DWORD *)(v12 + 868);
  v37 = *(_DWORD *)(v12 + 864);
  v38 = 3 * v36;
  *(_DWORD *)(v12 + 868) = v36 + 1;
  *(float *)(v37 + 8 * v38) = v31;
  *(float *)(v37 + 8 * v38 + 4) = v32;
  *(_DWORD *)(v37 + 8 * v38 + 20) = a12;
  *(_DWORD *)(v37 + 8 * v38 + 8) = 0;
  *(_DWORD *)(v37 + 8 * v38 + 12) = 0;
  *(_DWORD *)(v37 + 8 * v38 + 16) = 1065353216;
  v39 = *(_DWORD *)(v12 + 868);
  v40 = *(_DWORD *)(v12 + 872);
  if ( v39 == v40 )
  {
    if ( !v40 )
      *(_DWORD *)(v12 + 872) = 1;
    v41 = *(_DWORD *)(v12 + 872);
    if ( v39 >= v41 )
    {
      do
        v41 *= 2;
      while ( v39 >= v41 );
      *(_DWORD *)(v12 + 872) = v41;
    }
    *(_DWORD *)(v12 + 864) = sub_1002D6F7(a2, a12, *(_DWORD *)(v12 + 864), 24 * *(_DWORD *)(v12 + 872), 0x10u);
  }
  v42 = *(_DWORD *)(v12 + 868);
  v43 = *(_DWORD *)(v12 + 864);
  v44 = 3 * v42;
  *(_DWORD *)(v12 + 868) = v42 + 1;
  *(_DWORD *)(v43 + 8 * v44 + 20) = a12;
  *(_DWORD *)(v43 + 8 * v44 + 8) = 0;
  *(_DWORD *)(v43 + 8 * v44 + 12) = 1065353216;
  *(float *)(v43 + 8 * v44) = (float)a6;
  *(_DWORD *)(v43 + 8 * v44 + 16) = 0;
  *(float *)(v43 + 8 * v44 + 4) = (float)a7;
  v45 = *(_DWORD *)(v12 + 868);
  v46 = *(_DWORD *)(v12 + 872);
  if ( v45 == v46 )
  {
    if ( !v46 )
      *(_DWORD *)(v12 + 872) = 1;
    v47 = *(_DWORD *)(v12 + 872);
    if ( v45 >= v47 )
    {
      do
        v47 *= 2;
      while ( v45 >= v47 );
      *(_DWORD *)(v12 + 872) = v47;
    }
    *(_DWORD *)(v12 + 864) = sub_1002D6F7(a2, a12, *(_DWORD *)(v12 + 864), 24 * *(_DWORD *)(v12 + 872), 0x10u);
  }
  v48 = *(_DWORD *)(v12 + 868);
  v49 = *(_DWORD *)(v12 + 864);
  v50 = 3 * v48;
  result = v48 + 1;
  *(_DWORD *)(v12 + 868) = result;
  *(_DWORD *)(v49 + 8 * v50 + 20) = a12;
  *(_DWORD *)(v49 + 8 * v50 + 8) = 0;
  *(float *)(v49 + 8 * v50) = (float)a10;
  *(_DWORD *)(v49 + 8 * v50 + 12) = 1065353216;
  *(_DWORD *)(v49 + 8 * v50 + 16) = 1065353216;
  *(float *)(v49 + 8 * v50 + 4) = (float)a11;
  return result;
}

//----- (10060FE0) --------------------------------------------------------
void *__thiscall sub_10060FE0(void *this)
{
  void *v1; // esi@1
  void *result; // eax@1

  v1 = this;
  sub_10042AF0(this);
  *((_DWORD *)v1 + 128) = 633339904;
  *((_DWORD *)v1 + 129) = 635437056;
  *((_DWORD *)v1 + 216) = 0;
  *((_DWORD *)v1 + 217) = 0;
  *((_DWORD *)v1 + 218) = 0;
  *((_DWORD *)v1 + 219) = 0;
  *((_DWORD *)v1 + 220) = 0;
  *((_DWORD *)v1 + 221) = 0;
  sub_10028330((char *)v1 + 2820, 0, 0x16Cu);
  sub_10028330((char *)v1 + 912, 0, 0xACu);
  sub_10028330((char *)v1 + 1084, 0, 0x2B0u);
  *((_DWORD *)v1 + 222) = 0;
  *((_DWORD *)v1 + 223) = 0;
  result = v1;
  *((_DWORD *)v1 + 224) = 0;
  return result;
}

//----- (100610A0) --------------------------------------------------------
__int16 __fastcall sub_100610A0(unsigned __int8 a1, __int16 a2)
{
  return sub_1000C680(a1, a2);
}

//----- (100610B0) --------------------------------------------------------
int __fastcall sub_100610B0(__int16 a1, unsigned __int16 a2)
{
  return sub_1000C740(a1, a2);
}

//----- (100610C0) --------------------------------------------------------
__int16 __fastcall sub_100610C0(char a1)
{
  return sub_1000C610(a1);
}

//----- (100610D0) --------------------------------------------------------
int sub_100610D0()
{
  return 0;
}
// 100610D0: using guessed type int sub_100610D0();

//----- (100610E0) --------------------------------------------------------
void *sub_100610E0()
{
  void *result; // eax@1

  result = (void *)dword_10239430;
  if ( dword_10239430 )
  {
    *(_WORD *)(dword_10239430 + 2900) &= 1u;
    *((_DWORD *)result + 724) = 0;
    *((_WORD *)result + 1451) = 0;
    *((_WORD *)result + 1454) = 0;
    *((_WORD *)result + 1463) = 0;
    *(_DWORD *)((char *)result + 2934) = 0;
    *((_WORD *)result + 1469) = 0;
    *((_WORD *)result + 1477) = 0;
    *(_DWORD *)((char *)result + 2966) = 0;
    *(_DWORD *)((char *)result + 3006) = 0;
    *(_DWORD *)((char *)result + 3010) = 0;
    *((_DWORD *)result + 754) = 0;
    *((_DWORD *)result + 755) = 0;
    *((_DWORD *)result + 756) = 0;
    *((_DWORD *)result + 757) = 0;
    *((_DWORD *)result + 758) = 0;
    *((_DWORD *)result + 759) = 0;
    *((_DWORD *)result + 760) = 0;
    *((_DWORD *)result + 761) = 0;
    *((_DWORD *)result + 762) = 0;
    *((_DWORD *)result + 763) = 0;
    *((_DWORD *)result + 767) = 0;
    *((_DWORD *)result + 768) = 0;
    *((_DWORD *)result + 769) = 0;
    *((_DWORD *)result + 770) = 0;
    *((_DWORD *)result + 772) = 0;
    *((_DWORD *)result + 773) = 0;
    *((_DWORD *)result + 774) = 0;
    *((_DWORD *)result + 775) = 0;
    *((_DWORD *)result + 776) = 0;
    *((_DWORD *)result + 777) = 0;
    *((_DWORD *)result + 780) = 0;
    *((_DWORD *)result + 781) = 0;
    *((_DWORD *)result + 782) = 0;
    *((_DWORD *)result + 783) = 0;
    *((_DWORD *)result + 784) = 0;
    *((_DWORD *)result + 785) = 0;
    *((_DWORD *)result + 786) = 0;
    *((_WORD *)result + 1574) = 0;
    *(_DWORD *)((char *)result + 3158) = 0;
    *(_DWORD *)((char *)result + 3166) = 0;
    *(_DWORD *)((char *)result + 3170) = 0;
    *(_DWORD *)((char *)result + 3174) = 0;
    *(_DWORD *)((char *)result + 3178) = 0;
    result = sub_10028330((char *)result + 1796, 0, 0x3FEu);
  }
  return result;
}
// 10239430: using guessed type int dword_10239430;

//----- (10061220) --------------------------------------------------------
unsigned int __usercall sub_10061220@<eax>(int a1@<ebx>, int a2@<edi>)
{
  sub_1005EB60();
  return sub_10040330(a1, a2);
}

//----- (10061240) --------------------------------------------------------
int __usercall sub_10061240@<eax>(int a1@<ebx>, int a2@<edi>)
{
  int v2; // eax@1
  void *v3; // eax@2
  int v5; // [sp+0h] [bp-10h]@1

  v2 = sub_1002D4C7(a1, a2, 0xC70u, 0x10u);
  v5 = v2;
  if ( v2 )
    v3 = sub_10060FE0((void *)v2);
  else
    v3 = 0;
  dword_10239430 = (int)v3;
  return sub_1005E6E0(v5);
}
// 1005E6E0: using guessed type int __cdecl sub_1005E6E0(_DWORD);
// 10239430: using guessed type int dword_10239430;

//----- (100612A0) --------------------------------------------------------
void __usercall sub_100612A0(int a1@<ebx>)
{
  int v1; // esi@1

  sub_1005E5F0();
  v1 = dword_10239430;
  if ( dword_10239430 )
  {
    sub_1002D4A8(*(_DWORD *)(dword_10239430 + 876));
    *(_DWORD *)(v1 + 876) = 0;
    sub_1002D4A8(*(_DWORD *)(v1 + 864));
    *(_DWORD *)(v1 + 864) = 0;
    sub_100026E0(v1, a1);
    sub_1002D4A8(v1);
  }
  dword_10239430 = 0;
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);
// 10239430: using guessed type int dword_10239430;

//----- (10061300) --------------------------------------------------------
int __usercall sub_10061300@<eax>(int a1@<edx>, int a2@<ecx>, int a3@<ebx>, int a4@<ebp>)
{
  int v4; // esi@1
  int v5; // edi@1
  unsigned int v6; // ecx@1
  int v7; // eax@7
  DWORD v8; // ST08_4@9
  WCHAR *v9; // ST04_4@9
  HMODULE v10; // eax@9
  DWORD v11; // eax@9
  void *v12; // ecx@9
  int v13; // ecx@10
  int v14; // ecx@12
  LPVOID *v15; // eax@15
  int v16; // eax@17
  void *v17; // ecx@17
  unsigned int v18; // ecx@18
  int v19; // eax@18

  v4 = a1;
  v5 = a2;
  v6 = *(_DWORD *)(a1 + 16);
  if ( v6 < 0x104 )
  {
    sub_10001FA0(a1, 260 - v6, *(_DWORD *)(a1 + 16));
  }
  else
  {
    *(_DWORD *)(a1 + 16) = 260;
    if ( *(_DWORD *)(a1 + 20) < 8u )
      *(_WORD *)(a1 + 520) = 0;
    else
      *(_WORD *)(*(_DWORD *)a1 + 520) = 0;
  }
  if ( *(_DWORD *)(v4 + 20) < 8u )
    v7 = v4;
  else
    v7 = *(_DWORD *)v4;
  v8 = *(_DWORD *)(v4 + 16);
  v9 = (WCHAR *)v7;
  v10 = GetModuleHandleW(0);
  v11 = GetModuleFileNameW(v10, v9, v8);
  if ( !v11 )
    sub_1002D71C(v12, a3, a4, v5, v4);
  v13 = *(_DWORD *)(v4 + 16);
  if ( v11 > v13 )
  {
    sub_10001FA0(v4, v11 - v13, *(_DWORD *)(v4 + 16));
  }
  else
  {
    *(_DWORD *)(v4 + 16) = v11;
    if ( *(_DWORD *)(v4 + 20) < 8u )
    {
      v14 = v4;
      *(_WORD *)(v4 + 2 * v11) = 0;
    }
    else
    {
      v14 = *(_DWORD *)v4;
      *(_WORD *)(*(_DWORD *)v4 + 2 * v11) = 0;
    }
  }
  v15 = &dword_10239518;
  if ( (unsigned int)dword_1023952C >= 8 )
    v15 = (LPVOID *)dword_10239518;
  v16 = sub_1000D840(v4, (int)v15, v14, dword_10239528);
  if ( v16 == -1 )
    sub_1002D71C(v17, a3, a4, v5, v4);
  v18 = *(_DWORD *)(v4 + 16);
  v19 = v16 + 1;
  if ( v19 > v18 )
  {
    sub_10001FA0(v4, v19 - v18, *(_DWORD *)(v4 + 16));
  }
  else
  {
    *(_DWORD *)(v4 + 16) = v19;
    if ( *(_DWORD *)(v4 + 20) < 8u )
      *(_WORD *)(v4 + 2 * v19) = 0;
    else
      *(_WORD *)(*(_DWORD *)v4 + 2 * v19) = 0;
  }
  *(_DWORD *)(v5 + 20) = 7;
  *(_DWORD *)(v5 + 16) = 0;
  *(_WORD *)v5 = 0;
  sub_10001560(v5, v4, 0, 0xFFFFFFFF);
  return v5;
}
// 10239528: using guessed type int dword_10239528;
// 1023952C: using guessed type int dword_1023952C;

//----- (10061440) --------------------------------------------------------
__int64 __stdcall sub_10061440(unsigned __int64 a1, unsigned int a2, unsigned int a3)
{
  unsigned __int64 v3; // rtt@2
  __int64 result; // rax@2
  unsigned int v5; // ecx@3
  unsigned int v6; // ebx@3
  unsigned __int64 v7; // rax@3
  unsigned __int8 v8; // cf@4
  unsigned int v9; // eax@5
  unsigned int v10; // esi@5
  int v11; // ecx@5
  unsigned __int64 v12; // rax@5

  if ( a3 )
  {
    v5 = a3;
    v6 = a2;
    v7 = a1;
    do
    {
      v8 = v5 & 1;
      v5 >>= 1;
      v6 = __RCR__(v6, v8);
      v8 = BYTE4(v7) & 1;
      HIDWORD(v7) >>= 1;
      LODWORD(v7) = __RCR__(v7, v8);
    }
    while ( v5 );
    v9 = v7 / v6;
    v10 = v9;
    v11 = a3 * v9;
    v12 = v9 * (unsigned __int64)a2;
    v8 = __CFADD__(v11, HIDWORD(v12));
    HIDWORD(v12) += v11;
    if ( v8 || HIDWORD(v12) > HIDWORD(a1) || HIDWORD(v12) >= HIDWORD(a1) && (unsigned int)v12 > (unsigned int)a1 )
      --v10;
    result = v10;
  }
  else
  {
    LODWORD(v3) = a1;
    HIDWORD(v3) = HIDWORD(a1) % a2;
    LODWORD(result) = v3 / a2;
    HIDWORD(result) = HIDWORD(a1) / a2;
  }
  return result;
}

//----- (100614B0) --------------------------------------------------------
int __usercall sub_100614B0@<eax>(__m128i a1@<xmm0>)
{
  __m128d v1; // xmm1@4
  int result; // eax@8
  __m128i v7; // xmm6@9
  __m128i v8; // xmm5@10
  __m128d v9; // xmm6@10
  __m128i v10; // xmm6@10
  __m128i v11; // xmm2@10
  __m128i v12; // xmm1@10
  __m128i v13; // xmm3@10
  __m128i v14; // xmm4@10
  __m128i v15; // xmm7@10
  __m128i v16; // xmm1@10
  __m128i v17; // xmm1@10
  __m128i v18; // xmm1@10
  __m128i v19; // xmm2@11

  if ( (_mm_cvtsi128_si32(a1) & 0x7FFFFFFFu) >= 0x7F800000
    || (a1.m128i_i64[0] = a1.m128i_i32[0], *(double *)&a1.m128i_i64[0] >= 9.223372036854776e18)
    || *(double *)&a1.m128i_i64[0] < -9.223372036854776e18 )
  {
    sub_1006164D(8, a1.m128i_i64[0]);
    result = 0;
  }
  else
  {
    v1 = (__m128d)_mm_srl_epi64(_mm_sll_epi64(a1, 1u), 1u);
    v7 = 0i64;
    if ( v1.m128d_f64[0] != 0.0 )
    {
      v8 = _mm_cvtsi32_si128(0x433u);
      *(_QWORD *)&v9.m128d_f64[0] = a1.m128i_i64[0];
      v10 = (__m128i)_mm_cmpeq_sd(v9, v1);
      v11 = _mm_or_si128(
              _mm_and_si128((__m128i)v1, (__m128i)(unsigned __int64)qword_1006EF00),
              (__m128i)(unsigned __int64)qword_1006EF08);
      v12 = _mm_srl_epi64((__m128i)v1, 0x34u);
      v13 = _mm_sll_epi64(v11, _mm_sub_epi64(v12, v8));
      v14 = _mm_sub_epi64(v8, v12);
      v15 = _mm_srl_epi64(v11, v14);
      v16 = _mm_cmpgt_epi32(v12, v8);
      v17 = _mm_unpacklo_epi32(v16, v16);
      v18 = _mm_or_si128(_mm_andnot_si128(v17, v15), _mm_and_si128(v13, v17));
      v7 = _mm_or_si128(_mm_andnot_si128(v10, _mm_sub_epi64(0i64, v18)), _mm_and_si128(v18, v10));
      if ( _mm_cvtsi128_si32(v14) > 0 )
      {
        v19 = _mm_xor_si128(v11, _mm_sll_epi64(v15, v14));
        if ( _mm_cvtsi128_si32(_mm_srli_si128(v19, 4)) | _mm_cvtsi128_si32(v19) )
          sub_1006164D(16, a1.m128i_i64[0]);
      }
    }
    result = _mm_cvtsi128_si32(v7);
  }
  return result;
}
// 1006EF00: using guessed type __int64 qword_1006EF00;
// 1006EF08: using guessed type __int64 qword_1006EF08;
// 1006EF28: using guessed type __int64 qword_1006EF28;
// 1006EF48: using guessed type __int64 qword_1006EF48;

//----- (1006164D) --------------------------------------------------------
void __usercall sub_1006164D(int a1@<edx>, __int64 a2@<xmm0>)
{
  unsigned __int8 v2; // [sp+0h] [bp-20h]@0

  if ( a1 == 8 || !(v2 & *((_BYTE *)&qword_1006EF48 + a1 + 7)) )
    sub_100399CC(a1, 0, a2, HIDWORD(a2), a2, HIDWORD(a2));
}
// 1006EF48: using guessed type __int64 qword_1006EF48;

//----- (10061691) --------------------------------------------------------
void __usercall sub_10061691(__m128d a1@<xmm0>)
{
  signed int v1; // ecx@1
  double v2; // xmm1_8@1
  __m128i v3; // xmm3@6

  v1 = 1;
  JUMPOUT(_mm_cvtsi128_si32(_mm_srli_si128((__m128i)a1, 4)) & 0x7FFFFFFF, 2146435072, &loc_1006163B);
  JUMPOUT(1, 1, &loc_100614F3);
  *(_QWORD *)&v2 = (unsigned __int128)_mm_srl_epi64(_mm_sll_epi64((__m128i)a1, 1u), 1u);
  if ( v2 > 3.402823567797337e38 )
  {
    sub_1006164D(1, (__int64)a1.m128d_f64[0]);
    sub_1006164D(16, (__int64)a1.m128d_f64[0]);
  }
  if ( v2 < 1.175494315789826e-38 )
  {
    JUMPOUT(*(_QWORD *)&v2, 0.0, &loc_10061579);
    sub_1006164D(2, (__int64)a1.m128d_f64[0]);
    sub_1006164D(16, (__int64)a1.m128d_f64[0]);
    JUMPOUT(&loc_10061579);
  }
  v3 = (__m128i)a1;
  if ( v1 == 4 && a1.m128d_f64[0] >= 9.223372036854776e18 )
    v3 = (__m128i)_mm_sub_pd(a1, (__m128d)(unsigned __int64)qword_1006EF28);
  if ( _mm_cvtsi128_si32(_mm_srl_epi64(_mm_sll_epi64(v3, 0x23u), 0x23u)) )
    sub_1006164D(16, (__int64)a1.m128d_f64[0]);
  JUMPOUT((_QWORD)a1.m128d_f64[0], qword_1006EF28, &loc_1006163B);
  JUMPOUT((_QWORD)a1.m128d_f64[0], -9.223372036854776e18, &loc_1006163B);
  JUMPOUT(&loc_10061579);
}
// 1006EF28: using guessed type __int64 qword_1006EF28;

//----- (10061827) --------------------------------------------------------
int __usercall sub_10061827@<eax>(__m128d a1@<xmm0>, __m128d a2@<xmm1>, __m128d a3@<xmm3>, __m128d a4@<xmm4>)
{
  __m128d v4; // xmm7@1
  __m128d v5; // xmm2@1
  __m128d v6; // xmm7@1
  __m128d v7; // xmm0@1
  int v8; // ecx@1
  int v9; // eax@1
  __m128d v10; // xmm7@1
  __m128d v11; // xmm5@1
  __m128d v12; // xmm6@1
  int v13; // edx@1
  int v14; // ecx@2
  unsigned int v15; // edx@2
  int v16; // eax@3
  __m128d v17; // xmm6@3
  __m128d v18; // xmm4@3
  double v19; // xmm1_8@3
  int v20; // eax@3
  double v21; // xmm2_8@3
  double v22; // xmm0_8@3
  double v23; // xmm5_8@3
  double v24; // xmm7_8@3
  double v25; // xmm2_8@3
  __m128d v26; // xmm1@3
  __m128d v27; // xmm3@3
  int v28; // edx@3
  __m128d v29; // xmm6@3
  int v30; // eax@3
  int result; // eax@5
  unsigned int v32; // ecx@6
  __m128d v33; // xmm3@6
  __m128d v34; // xmm1@7
  int v35; // eax@7
  __m128i v36; // xmm1@7
  int v37; // ecx@7
  __m128i v38; // xmm2@10
  int v39; // edx@10
  __m128i v40; // xmm7@14
  int v41; // eax@14
  __m128d v42; // xmm2@19
  int v43; // edx@19
  __m128d v44; // xmm7@20
  int v45; // eax@20
  __m128i v46; // xmm2@38
  int v47; // eax@38
  __m128i v48; // xmm4@40
  __m128i v49; // xmm4@46
  __int128 v50; // xmm3@61
  int v51; // eax@64
  int v52; // edx@64
  __int64 v53; // [sp+4h] [bp-10h]@1
  __int64 v54; // [sp+Ch] [bp-8h]@1

  v4 = _mm_loadl_pd((const double *)&xmmword_1006EF80);
  _mm_storel_pd((double *)&v53, a1);
  v5 = _mm_loadl_pd((const double *)&xmmword_1006EF90);
  _mm_storel_pd((double *)&v54, a2);
  v6 = _mm_and_pd(v4, a1);
  a4.m128d_f64[0] = a1.m128d_f64[0];
  v7 = (__m128d)_mm_srl_epi64((__m128i)a1, 0x2Cu);
  v10 = _mm_or_pd(v6, v5);
  v8 = _mm_extract_epi16((__m128i)a4, 3);
  v9 = ((unsigned __int8)_mm_extract_epi16((__m128i)v7, 0) + 1) & 0x1FE;
  v10.m128d_f64[0] = v10.m128d_f64[0] * *(double *)((char *)&qword_1006F010 + 4 * v9);
  v11 = _mm_loadl_pd((const double *)((char *)&qword_1006F010 + 4 * v9));
  v12 = *(__m128d *)((char *)&xmmword_1006F420 + 8 * v9);
  v13 = 32751 - v8;
  if ( ((32751 - v8) | (unsigned int)(v8 - 16)) < 0x80000000 )
  {
    v14 = 0;
    v15 = 261759;
    goto LABEL_3;
  }
  v34 = _mm_loadl_pd((const double *)&v54);
  a3 = _mm_loadl_pd((const double *)&xmmword_1006EFA0);
  v35 = _mm_cvtsi128_si32((__m128i)v34);
  v5.m128d_f64[0] = v34.m128d_f64[0];
  v36 = _mm_srl_epi64((__m128i)_mm_and_pd(v34, a3), 0x20u);
  v37 = _mm_cvtsi128_si32(v36);
  if ( (unsigned int)v37 >= 0x7FF00000 )
  {
    v40 = (__m128i)_mm_loadl_pd((const double *)&v53);
    v28 = _mm_cvtsi128_si32(v40);
    v41 = _mm_cvtsi128_si32(_mm_srl_epi64(v40, 0x20u));
    v14 = v41;
    result = v41 & 0x7FFFFFFF;
    if ( (unsigned int)result >= 0x7FF00000 && ((unsigned int)result > 0x7FF00000 || v28) )
      return result;
    goto LABEL_45;
  }
  if ( !(v37 | v35) )
    return _mm_cvtsi128_si32(_mm_srl_epi64((__m128i)a4, 0x20u)) & 0x7FFFFFFF | _mm_cvtsi128_si32((__m128i)a4);
  if ( v13 >= 0 )
  {
    v14 = 0;
  }
  else
  {
    v38 = (__m128i)_mm_or_pd(v5, (__m128d)_mm_sll_epi64((__m128i)a3, 0x34u));
    *(_QWORD *)&a3.m128d_f64[1] = 0i64;
    result = _mm_movemask_epi8(_mm_cmpeq_epi32(_mm_sll_epi64(v38, _mm_max_epi16(_mm_sub_epi32(_mm_srl_epi64(v36, 0x14u), _mm_cvtsi32_si128(0x3F3u)), 0i64)), 0i64));
    v39 = (32751 - (_WORD)v13) & 0x7FFF;
    if ( (unsigned int)v39 >= 0x7FF0 )
    {
      if ( (unsigned __int8)_mm_movemask_epi8(_mm_cmpeq_epi32(0i64, (__m128i)_mm_and_pd(
                                                                               _mm_loadl_pd((const double *)&xmmword_1006EF80),
                                                                               a4))) == 255 )
      {
        if ( _mm_extract_epi16((__m128i)a4, 3) & 0x8000 )
        {
          if ( (unsigned __int8)result != 255
            || (unsigned __int8)_mm_movemask_epi8(_mm_cmpeq_epi32(_mm_sll_epi64((__m128i)_mm_loadl_pd((const double *)&v54), _mm_sub_epi32(_mm_srl_epi64((__m128i)_mm_and_pd(_mm_loadl_pd((const double *)&v54), (__m128d)xmmword_1006EFA0), 0x34u), _mm_cvtsi32_si128(0x3F4u))), 0i64)) == 255 )
          {
            result = _mm_extract_epi16((__m128i)_mm_loadl_pd((const double *)&v54), 3) & 0x8000;
            !result;
          }
          else
          {
            result = _mm_extract_epi16((__m128i)_mm_loadl_pd((const double *)&v54), 3) & 0x8000;
            !result;
          }
        }
        else
        {
          result = _mm_extract_epi16((__m128i)_mm_loadl_pd((const double *)&v54), 3) & 0x8000;
          !result;
        }
      }
      return result;
    }
    if ( (unsigned __int8)result != 255 )
    {
      v46 = (__m128i)_mm_loadl_pd((const double *)&v53);
      v47 = _mm_cvtsi128_si32(v46);
      v42 = (__m128d)_mm_srl_epi64(v46, 0x20u);
      result = _mm_cvtsi128_si32((__m128i)v42) & 0x7FFFFFFF | v47;
      v14 = 0;
      if ( result )
        return result;
LABEL_21:
      if ( !(result & 0x7FFFFFFF) )
      {
        if ( HIDWORD(v54) & 0x80000000 )
        {
          result &= v14 << 13;
        }
        else
        {
          result &= v14 << 13;
          result;
        }
        return result;
      }
      goto LABEL_20;
    }
    a3 = _mm_loadl_pd((const double *)&qword_1006F000);
    v14 = ((unsigned __int8)_mm_movemask_epi8(_mm_cmpeq_epi32(_mm_sll_epi64((__m128i)_mm_loadl_pd((const double *)&v54), _mm_sub_epi32(_mm_srl_epi64((__m128i)_mm_and_pd(_mm_loadl_pd((const double *)&v54), (__m128d)xmmword_1006EFA0), 0x34u), _mm_cvtsi32_si128(0x3F4u))), (__m128i)a3))
         + 261889) & 0x40000;
    if ( (unsigned int)v39 >= 0x10 )
    {
      v15 = 786047;
      a3 = _mm_loadl_pd((const double *)&xmmword_1006EF80);
      goto LABEL_3;
    }
  }
  v7 = (__m128d)_mm_insert_epi16(0i64, 0x43F0u, 3);
  v10 = _mm_loadl_pd((const double *)&xmmword_1006EF80);
  v42 = _mm_loadl_pd((const double *)&xmmword_1006EF90);
  v7.m128d_f64[0] = v7.m128d_f64[0] * a4.m128d_f64[0];
  v43 = _mm_cvtsi128_si32((__m128i)a4);
  a4 = (__m128d)_mm_srl_epi64((__m128i)a4, 0x20u);
  result = _mm_cvtsi128_si32((__m128i)a4);
  if ( !v43 )
    goto LABEL_21;
LABEL_20:
  v44 = _mm_and_pd(v10, v7);
  a4.m128d_f64[0] = v7.m128d_f64[0];
  v7 = (__m128d)_mm_srl_epi64((__m128i)_mm_and_pd(v7, (__m128d)xmmword_1006EFA0), 0x2Cu);
  v10 = _mm_or_pd(v44, v42);
  v45 = ((unsigned __int8)_mm_extract_epi16((__m128i)v7, 0) + 1) & 0x1FE;
  v10.m128d_f64[0] = v10.m128d_f64[0] * *(double *)((char *)&qword_1006F010 + 4 * v45);
  v11 = _mm_loadl_pd((const double *)((char *)&qword_1006F010 + 4 * v45));
  v12 = *(__m128d *)((char *)&xmmword_1006F420 + 8 * v45);
  v15 = 278143;
LABEL_3:
  v16 = ((unsigned __int8)_mm_extract_epi16(_mm_srl_epi64((__m128i)v10, 0x26u), 0) + 1) & 0x1FE;
  a3.m128d_f64[0] = v10.m128d_f64[0] * *(double *)((char *)&qword_1006FC30 + 4 * v16);
  v11.m128d_f64[0] = v11.m128d_f64[0] * *(double *)((char *)&qword_1006FC30 + 4 * v16);
  v17 = _mm_add_pd(v12, *(__m128d *)((char *)&xmmword_10070040 + 8 * v16));
  v18 = _mm_or_pd(_mm_and_pd(a4, (__m128d)xmmword_1006EF80), (__m128d)xmmword_1006EF90);
  v17.m128d_f64[0] = v17.m128d_f64[0]
                   + COERCE_DOUBLE(_mm_cvtepi32_pd(_mm_srl_epi64(_mm_sub_epi64((__m128i)v7, _mm_cvtsi32_si128(v15)), 8u)));
  *(_QWORD *)&v19 = (unsigned __int128)_mm_and_pd(_mm_loadl_pd((const double *)&qword_1006EFD8), v18);
  v18.m128d_f64[0] = v18.m128d_f64[0] - v19;
  v20 = ((_mm_extract_epi16(_mm_srl_epi64((__m128i)a3, 0x1Fu), 0) & 0x1FF) + 1) & 0x3FE;
  v11.m128d_f64[0] = v11.m128d_f64[0] * *(double *)((char *)&qword_10070850 + 4 * v20);
  v21 = a3.m128d_f64[0] * *(double *)((char *)&qword_10070850 + 4 * v20);
  v29 = _mm_add_pd(v17, *(__m128d *)((char *)&xmmword_10071060 + 8 * v20));
  *(_QWORD *)&v22 = (unsigned __int128)_mm_and_pd(_mm_loadl_pd((const double *)&qword_1006EFD8), v11);
  v23 = v11.m128d_f64[0] - v22;
  v24 = COERCE_DOUBLE(_mm_loadl_pd((const double *)&qword_1006EFE0)) + v21;
  v25 = v21 - v22 * v19 - v19 * v23;
  v29.m128d_f64[0] = v29.m128d_f64[0] + v24;
  v26 = _mm_loadl_pd((const double *)&v54);
  v27 = _mm_loadl_pd((const double *)&qword_1006EFD8);
  v28 = _mm_extract_epi16((__m128i)v29, 3);
  v29.m128d_f64[0] = v29.m128d_f64[0] - (v25 - v22 * v18.m128d_f64[0] - v18.m128d_f64[0] * v23);
  v30 = _mm_extract_epi16((__m128i)v26, 3) & 0x7FF0;
  if ( (unsigned int)v30 >= 0x7FF0 )
  {
    v48 = (__m128i)_mm_loadl_pd((const double *)&v53);
    v5 = _mm_loadl_pd((const double *)&v54);
    result = _mm_cvtsi128_si32(v48);
    if ( !result )
    {
      v28 = _mm_cvtsi128_si32(_mm_srl_epi64(v48, 0x20u));
      if ( v28 == 1072693248 )
        return result;
      if ( v28 == -1074790400 )
      {
        result = _mm_movemask_epi8(_mm_cmpeq_epi32(0i64, (__m128i)_mm_and_pd(
                                                                    _mm_loadl_pd((const double *)&xmmword_1006EF80),
                                                                    v5)));
        result != 255;
        return result;
      }
    }
LABEL_45:
    result = (unsigned __int8)_mm_movemask_epi8(_mm_cmpeq_epi32(0i64, (__m128i)_mm_and_pd(
                                                                                 _mm_loadl_pd((const double *)&xmmword_1006EF80),
                                                                                 v5)));
    if ( result == 255 )
    {
      v49 = (__m128i)_mm_loadl_pd((const double *)&v53);
      result = _mm_extract_epi16((__m128i)v5, 3) & 0x8000;
      if ( v14 ^ 0xBFF00000 | v28 )
      {
        if ( result )
        {
          result = _mm_extract_epi16(v49, 3) & 0x7FF0;
          if ( (unsigned int)result < 0x3FF0 )
          {
            result = _mm_cvtsi128_si32(v49);
            if ( !(result | _mm_cvtsi128_si32(_mm_srl_epi64(v49, 0x20u)) & 0x7FFFFFFF) )
              result = 16368;
          }
        }
        else
        {
          result = _mm_extract_epi16(v49, 3) & 0x7FF0;
        }
      }
    }
    return result;
  }
  if ( (((v28 & 0x7FF0) + v30 - 16368 - 15472) | (16544 - ((v28 & 0x7FF0u) + v30 - 16368))) < 0x80000000
    || (v51 = _mm_extract_epi16((__m128i)_mm_mul_pd((__m128d)_mm_shuffle_epi32((__m128i)v26, 68), v29), 3) & 0x7FF0,
        v52 = 16544 - v51,
        result = v51 - 15472,
        (result | (unsigned int)v52) < 0x80000000) )
  {
    result = (signed int)(COERCE_DOUBLE(_mm_and_pd(v27, v26))
                        * COERCE_DOUBLE(_mm_and_pd(_mm_loadl_pd((const double *)&qword_1006EFD8), v29))
                        * COERCE_DOUBLE(_mm_insert_epi16(0i64, 0x4060u, 3)));
    if ( ((result + 123391) | (130943 - result)) > 0 )
    {
      v32 = ((result + v14) & 0xFFFFFF80) + 130944;
      result = 16 * (result & 0x7F);
      v33 = _mm_mul_pd(
              *(__m128d *)((char *)xmmword_10072090 + result),
              (__m128d)_mm_shuffle_epi32(_mm_sll_epi64(_mm_cvtsi32_si128(v32), 0x2Du), 68));
      return result;
    }
    if ( result <= 0 )
    {
      if ( result <= -261632 )
        return result;
    }
    else if ( (unsigned int)result >= 0x40000 )
    {
      return 65519;
    }
    v50 = xmmword_10072090[result & 0x7F];
    return 49024;
  }
  if ( (unsigned int)result < 0x80000000 )
  {
    result = ((unsigned __int16)((_mm_extract_epi16((__m128i)_mm_loadl_pd((const double *)&v53), 3) & 0x7FF0) - 16368) ^ (unsigned __int16)_mm_extract_epi16((__m128i)v26, 3)) & 0x8000;
    if ( !result )
      return 65519;
  }
  return result;
}
// 1006EF80: using guessed type __int128 xmmword_1006EF80;
// 1006EF90: using guessed type __int128 xmmword_1006EF90;
// 1006EFA0: using guessed type __int128 xmmword_1006EFA0;
// 1006EFD8: using guessed type __int64 qword_1006EFD8;
// 1006EFE0: using guessed type __int64 qword_1006EFE0;
// 1006F000: using guessed type __int64 qword_1006F000;
// 1006F010: using guessed type __int64 qword_1006F010;
// 1006F420: using guessed type __int128 xmmword_1006F420;
// 1006FC30: using guessed type __int64 qword_1006FC30;
// 10070040: using guessed type __int128 xmmword_10070040;
// 10070850: using guessed type __int64 qword_10070850;
// 10071060: using guessed type __int128 xmmword_10071060;
// 10072090: using guessed type __int128 xmmword_10072090[];

//----- (100622A0) --------------------------------------------------------
int __cdecl SEH_100021D0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10074D30, a1, a2, a3, a4);
}

//----- (100622B0) --------------------------------------------------------
int __cdecl SEH_100023D0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10074DBC, a1, a2, a3, a4);
}

//----- (100622C0) --------------------------------------------------------
int __cdecl SEH_10002EF0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10074E48, a1, a2, a3, a4);
}

//----- (100622D0) --------------------------------------------------------
int __cdecl SEH_10003050(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10074EB0, a1, a2, a3, a4);
}

//----- (100622E0) --------------------------------------------------------
int __usercall sub_100622E0@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = *(_DWORD *)(a1 - 20) + 12;
  v1 = v3;
  sub_10004F30((void *)v3, (int)&v3, **(LPVOID **)v3, *(_DWORD *)v3);
  return sub_1000F409(*(LPVOID *)v1);
}

//----- (100622EB) --------------------------------------------------------
int __usercall sub_100622EB@<eax>(int a1@<ebp>)
{
  return sub_10004700(*(_DWORD *)(a1 - 20));
}

//----- (100622F3) --------------------------------------------------------
int __usercall sub_100622F3@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@1
  unsigned int v4; // eax@1
  bool v5; // cf@3
  int result; // eax@4

  v3 = *(_DWORD *)(a2 - 20) + 36;
  v4 = *(_DWORD *)(*(_DWORD *)(a2 - 20) + 56);
  if ( v4 >= 8 )
    sub_10001E40(a1, a3, *(LPVOID *)(*(_DWORD *)(a2 - 20) + 36), v4 + 1);
  *(_DWORD *)(v3 + 20) = 7;
  v5 = *(_DWORD *)(v3 + 20) < 8u;
  *(_DWORD *)(v3 + 16) = 0;
  if ( v5 )
  {
    result = 0;
    *(_WORD *)v3 = 0;
  }
  else
  {
    result = *(_DWORD *)v3;
    **(_WORD **)v3 = 0;
  }
  return result;
}

//----- (10062304) --------------------------------------------------------
int __cdecl SEH_10004570(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10074F18, a1, a2, a3, a4);
}

//----- (10062310) --------------------------------------------------------
int __usercall sub_10062310@<eax>(int a1@<ebp>)
{
  int v2; // [sp+0h] [bp-4h]@1

  v2 = a1 - 32;
  sub_10004E80(a1 - 32, (int)&v2, **(LPVOID **)(a1 - 32), *(_DWORD *)(a1 - 32));
  return sub_1000F409(*(LPVOID *)(a1 - 32));
}

//----- (10062318) --------------------------------------------------------
int __usercall sub_10062318@<eax>(int a1@<ebp>)
{
  int v1; // esi@1
  int v3; // [sp+0h] [bp-4h]@1

  v3 = a1 - 60;
  v1 = a1 - 60 + 12;
  sub_10004E80(v1, (int)&v3, **(LPVOID **)v1, *(_DWORD *)v1);
  return sub_1000F409(*(LPVOID *)v1);
}

//----- (10062320) --------------------------------------------------------
int __cdecl SEH_10004AE0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10074F5C, a1, a2, a3, a4);
}

//----- (10062336) --------------------------------------------------------
int __cdecl SEH_10004F30(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10074F98, a1, a2, a3, a4);
}

//----- (10062340) --------------------------------------------------------
int __cdecl SEH_10007900(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10074FC4, a1, a2, a3, a4);
}

//----- (10062350) --------------------------------------------------------
int __usercall sub_10062350@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int result; // eax@1
  LPVOID *v4; // esi@1
  bool v5; // cf@3

  result = *(_DWORD *)(a2 - 76 + 24);
  v4 = (LPVOID *)(a2 - 76 + 4);
  if ( (unsigned int)result >= 0x10 )
    result = sub_10001EA0(a1, a3, *v4, result + 1);
  *(_DWORD *)(a2 - 76 + 24) = 15;
  v5 = *(_DWORD *)(a2 - 76 + 24) < 0x10u;
  *(_DWORD *)(a2 - 76 + 20) = 0;
  if ( v5 )
  {
    *(_BYTE *)v4 = 0;
  }
  else
  {
    result = (int)*v4;
    *(_BYTE *)*v4 = 0;
  }
  return result;
}

//----- (10062358) --------------------------------------------------------
int __usercall sub_10062358@<eax>(int a1@<ebp>)
{
  LPVOID *v1; // edi@1
  void *v2; // edx@1
  void *v3; // esi@2
  int v5; // ecx@1

  v5 = a1 - 40;
  v1 = (LPVOID *)(a1 - 40);
  v2 = (void *)**(_DWORD **)(a1 - 40);
  **(_DWORD **)v5 = *(_DWORD *)v5;
  *(_DWORD *)(*(_DWORD *)v5 + 4) = *(_DWORD *)v5;
  *(_DWORD *)(v5 + 4) = 0;
  if ( v2 != *(void **)(a1 - 40) )
  {
    do
    {
      v3 = *(void **)v2;
      sub_1000F409(v2);
      v2 = v3;
    }
    while ( v3 != *v1 );
  }
  return sub_1000F409(*v1);
}

//----- (10062360) --------------------------------------------------------
void sub_10062360()
{
  JUMPOUT(&loc_10002970);
}

//----- (10062368) --------------------------------------------------------
void sub_10062368()
{
  JUMPOUT(&loc_10002970);
}

//----- (10062370) --------------------------------------------------------
int __cdecl SEH_10005D40(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10074FE8, a1, a2, a3, a4);
}

//----- (10062380) --------------------------------------------------------
int __usercall sub_10062380@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(*(_DWORD *)(a2 - 16) + 4, a1, a3);
}

//----- (1006238B) --------------------------------------------------------
int __cdecl SEH_10006330(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007502C, a1, a2, a3, a4);
}

//----- (100623A0) --------------------------------------------------------
int __usercall sub_100623A0@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1

  v2 = *(_DWORD *)(a2 - 24);
  v3 = *(_DWORD *)(a2 - 28);
  return nullsub_1(a1);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (100623B1) --------------------------------------------------------
int __cdecl SEH_10006AE0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10075058, a1, a2, a3, a4);
}

//----- (100623C0) --------------------------------------------------------
int __cdecl SEH_10006B80(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100750B8, a1, a2, a3, a4);
}

//----- (100623D0) --------------------------------------------------------
int __cdecl SEH_10007320(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10075110, a1, a2, a3, a4);
}

//----- (100623E0) --------------------------------------------------------
int __usercall sub_100623E0@<eax>(int a1@<ebp>)
{
  return sub_1000F409(**(LPVOID **)(a1 - 20));
}

//----- (100623E8) --------------------------------------------------------
int __cdecl SEH_10007680(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10075168, a1, a2, a3, a4);
}

//----- (10062400) --------------------------------------------------------
int __cdecl SEH_10007790(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100751C8, a1, a2, a3, a4);
}

//----- (10062410) --------------------------------------------------------
void __usercall sub_10062410(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_10002970);
}

//----- (1006241B) --------------------------------------------------------
int __usercall sub_1006241B@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@1
  void *v4; // ecx@1
  int result; // eax@2
  int v6; // ecx@1

  v6 = *(_DWORD *)(a2 - 16) + 12;
  v3 = v6;
  v4 = *(void **)v6;
  if ( v4 )
  {
    result = sub_10002AD0(a1, a3, v4, (*(_DWORD *)(v3 + 8) - (signed int)v4) >> 2);
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 0;
    *(_DWORD *)(v3 + 8) = 0;
  }
  return result;
}

//----- (10062426) --------------------------------------------------------
int __cdecl SEH_1000BDB0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10075220, a1, a2, a3, a4);
}

//----- (10062430) --------------------------------------------------------
int __cdecl SEH_10007F10(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10075254, a1, a2, a3, a4);
}

//----- (10062446) --------------------------------------------------------
int __cdecl SEH_1000A930(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100752BC, a1, a2, a3, a4);
}

//----- (10062450) --------------------------------------------------------
void __usercall sub_10062450(int a1@<ebp>)
{
  if ( *(_BYTE *)(a1 - 20) )
    sub_1000DDBA(*(LPVOID *)(a1 - 20 + 4));
}

//----- (10062458) --------------------------------------------------------
void __usercall sub_10062458(int a1@<ebp>)
{
  if ( *(_BYTE *)(a1 - 28) )
    sub_1000E4BE(*(LPVOID *)(a1 - 28 + 4));
}

//----- (10062460) --------------------------------------------------------
int __cdecl SEH_100091C0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100752E8, a1, a2, a3, a4);
}

//----- (10062470) --------------------------------------------------------
int __usercall sub_10062470@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 28));
}

//----- (1006247F) --------------------------------------------------------
void *__usercall sub_1006247F@<eax>(int a1@<ebp>)
{
  void *result; // eax@1

  result = *(void **)(a1 - 24);
  if ( result )
    result = (void *)sub_1000F417(result);
  return result;
}

//----- (10062487) --------------------------------------------------------
int __cdecl SEH_10009F40(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007531C, a1, a2, a3, a4);
}

//----- (100624A0) --------------------------------------------------------
int __usercall sub_100624A0@<eax>(int a1@<ebp>)
{
  return sub_1000F684(a1, *(_DWORD *)(a1 - 16) + 40, 12, 16, (int)sub_10008AE0);
}

//----- (100624B6) --------------------------------------------------------
int __usercall sub_100624B6@<eax>(int a1@<ebp>)
{
  return sub_1000F684(a1, *(_DWORD *)(a1 - 16) + 232, 12, 16, (int)sub_10008AE0);
}

//----- (100624CE) --------------------------------------------------------
int __usercall sub_100624CE@<eax>(int a1@<ebp>)
{
  return sub_1000F684(a1, *(_DWORD *)(a1 - 16) + 424, 12, 16, (int)sub_10008AE0);
}

//----- (100624E6) --------------------------------------------------------
int __usercall sub_100624E6@<eax>(int a1@<ebp>)
{
  return sub_1000F684(a1, *(_DWORD *)(a1 - 16) + 616, 12, 16, (int)sub_10008AE0);
}

//----- (100624FE) --------------------------------------------------------
int __usercall sub_100624FE@<eax>(int a1@<ebp>)
{
  return sub_1000F684(a1, *(_DWORD *)(a1 - 16) + 808, 12, 16, (int)sub_10008AE0);
}

//----- (10062516) --------------------------------------------------------
int __usercall sub_10062516@<eax>(int a1@<ebp>)
{
  return sub_10008AE0((void *)(*(_DWORD *)(a1 - 16) + 1000));
}

//----- (10062524) --------------------------------------------------------
int __usercall sub_10062524@<eax>(int a1@<ebp>)
{
  return sub_10008AE0((void *)(*(_DWORD *)(a1 - 16) + 1012));
}

//----- (10062532) --------------------------------------------------------
int __usercall sub_10062532@<eax>(int a1@<ebp>)
{
  return sub_10008AE0((void *)(*(_DWORD *)(a1 - 16) + 1024));
}

//----- (10062540) --------------------------------------------------------
int __usercall sub_10062540@<eax>(int a1@<ebp>)
{
  return sub_10008AE0((void *)(*(_DWORD *)(a1 - 16) + 1036));
}

//----- (1006254E) --------------------------------------------------------
int __cdecl SEH_1000A0E0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10075350, a1, a2, a3, a4);
}

//----- (10062560) --------------------------------------------------------
void __usercall sub_10062560(int a1@<ebp>)
{
  sub_1000A930(a1 - 32);
}

//----- (1006256E) --------------------------------------------------------
int __cdecl SEH_1000A880(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100753C0, a1, a2, a3, a4);
}

//----- (10062580) --------------------------------------------------------
int __usercall sub_10062580@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  return sub_100026E0(*(_DWORD *)(a2 - 16), a1);
}

//----- (10062588) --------------------------------------------------------
void __usercall sub_10062588(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  JUMPOUT(&loc_10002970);
}

//----- (10062593) --------------------------------------------------------
void __usercall sub_10062593(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  JUMPOUT(&loc_10002940);
}

//----- (1006259E) --------------------------------------------------------
int __cdecl SEH_1000B7E0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100753F4, a1, a2, a3, a4);
}

//----- (100625A8) --------------------------------------------------------
int __usercall sub_100625A8@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 40, a1, a3);
}

//----- (100625B0) --------------------------------------------------------
int __cdecl sub_100625B0(int a1, int a2, int a3, int a4)
{
  int v4; // eax@1
  int v5; // edx@1

  v4 = sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 48));
  sub_1000FB0D(v4 ^ *(_DWORD *)(v5 - 4));
  return sub_100278A2((int)&unk_100755AC, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100625D5) --------------------------------------------------------
int __usercall sub_100625D5@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 + 20, a1, a3);
}

//----- (100625DD) --------------------------------------------------------
int __usercall sub_100625DD@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 40, a1, a3);
}

//----- (100625E5) --------------------------------------------------------
int __cdecl sub_100625E5(int a1, int a2, int a3, int a4)
{
  int v4; // eax@1
  int v5; // edx@1

  v4 = sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 48));
  sub_1000FB0D(v4 ^ *(_DWORD *)(v5 - 4));
  return sub_100278A2((int)&unk_10075580, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006260A) --------------------------------------------------------
int __usercall sub_1006260A@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1

  v2 = *(_DWORD *)(a2 + 8);
  v3 = *(_DWORD *)(a2 - 16);
  return nullsub_1(a1);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (10062618) --------------------------------------------------------
int __cdecl sub_10062618(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10075634, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062633) --------------------------------------------------------
int __usercall sub_10062633@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1

  v2 = *(_DWORD *)(*(_DWORD *)(a2 - 16) + 12);
  v3 = *(_DWORD *)(a2 - 20);
  return nullsub_1(a1);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (10062644) --------------------------------------------------------
int __usercall sub_10062644@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1

  v2 = *(_DWORD *)(*(_DWORD *)(a2 - 16) + 12);
  v3 = *(_DWORD *)(a2 - 20);
  return nullsub_1(a1);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (10062655) --------------------------------------------------------
int __cdecl sub_10062655(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_100758A0, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062670) --------------------------------------------------------
char __usercall sub_10062670@<al>(int a1@<ebp>)
{
  return sub_1001160B((int *)(a1 - 44));
}

//----- (10062678) --------------------------------------------------------
int __cdecl sub_10062678(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 48));
  return sub_100278A2((int)&unk_1007586C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062693) --------------------------------------------------------
int __usercall sub_10062693@<eax>(int a1@<ebp>)
{
  int v1; // ST00_4@1

  v1 = *(_DWORD *)(a1 - 40 + 4);
  *(_DWORD *)(a1 - 40) = &off_1006646C;
  return sub_10011490(v1);
}
// 1006646C: using guessed type int (__thiscall *off_1006646C)(LPVOID lpMem, char);

//----- (1006269B) --------------------------------------------------------
char __usercall sub_1006269B@<al>(int a1@<ebp>)
{
  return sub_1001160B((int *)(a1 - 68));
}

//----- (100626A3) --------------------------------------------------------
int __cdecl sub_100626A3(int a1, int a2, int a3, int a4)
{
  int v4; // eax@1
  int v5; // edx@1

  v4 = sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 72));
  sub_1000FB0D(v4 ^ *(_DWORD *)(v5 - 4));
  return sub_100278A2((int)&unk_100757AC, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100626C8) --------------------------------------------------------
char __usercall sub_100626C8@<al>(int a1@<ebp>)
{
  return sub_1001160B((int *)(a1 - 40));
}

//----- (100626D0) --------------------------------------------------------
int __cdecl sub_100626D0(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 84));
  return sub_100278A2((int)&unk_1007580C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100626EB) --------------------------------------------------------
char __usercall sub_100626EB@<al>(int a1@<ebp>)
{
  return sub_1001160B((int *)(a1 - 84));
}

//----- (100626F3) --------------------------------------------------------
int __cdecl sub_100626F3(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 88));
  return sub_100278A2((int)&unk_10075778, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006270E) --------------------------------------------------------
int __usercall sub_1006270E@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 20));
}

//----- (1006271B) --------------------------------------------------------
char __usercall sub_1006271B@<al>(int a1@<ebp>)
{
  return sub_1001160B((int *)(a1 - 60));
}

//----- (10062723) --------------------------------------------------------
int __cdecl sub_10062723(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 64));
  return sub_100278A2((int)&unk_10075840, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006273E) --------------------------------------------------------
unsigned int __usercall sub_1006273E@<eax>(int a1@<ebp>)
{
  return sub_100104C9((void *)(a1 - 60));
}

//----- (10062746) --------------------------------------------------------
char __usercall sub_10062746@<al>(int a1@<ebp>)
{
  return sub_1001160B((int *)(a1 - 148));
}

//----- (10062751) --------------------------------------------------------
int __cdecl sub_10062751(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 152));
  return sub_100278A2((int)&unk_100757E0, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006276F) --------------------------------------------------------
int __usercall sub_1006276F@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1

  v2 = *(_DWORD *)(a2 - 16);
  v3 = *(_DWORD *)(a2 - 20);
  return nullsub_1(a1);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (1006277D) --------------------------------------------------------
int __cdecl sub_1006277D(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_100758F8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062798) --------------------------------------------------------
int __usercall sub_10062798@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (100627A5) --------------------------------------------------------
int __cdecl sub_100627A5(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_100758CC, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100627C0) --------------------------------------------------------
void __usercall sub_100627C0(int a1@<ebp>)
{
  sub_10011603((LPCRITICAL_SECTION)(*(_DWORD *)(a1 - 16) + 44));
}

//----- (100627CB) --------------------------------------------------------
void __usercall sub_100627CB(int a1@<ebp>)
{
  sub_1001E3D8((void *)(*(_DWORD *)(a1 - 16) + 104));
}

//----- (100627D6) --------------------------------------------------------
int __cdecl sub_100627D6(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 32));
  return sub_100278A2((int)&unk_10075B34, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100627F1) --------------------------------------------------------
int __cdecl sub_100627F1(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 16));
  return sub_100278A2((int)&unk_10074FC4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006280C) --------------------------------------------------------
int __usercall sub_1006280C@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 32));
}

//----- (10062819) --------------------------------------------------------
int __cdecl sub_10062819(int a1, int a2, int a3, int a4)
{
  int v4; // eax@1
  int v5; // edx@1

  v4 = sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 52));
  sub_1000FB0D(v4 ^ *(_DWORD *)(v5 - 4));
  return sub_100278A2((int)&unk_10075B60, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006283E) --------------------------------------------------------
int __usercall sub_1006283E@<eax>(int a1@<ebp>)
{
  int v1; // eax@1

  v1 = 52 * *(_DWORD *)(a1 - 44);
  return sub_1000FAFF(*(LPVOID *)(a1 - 48));
}

//----- (1006285B) --------------------------------------------------------
int __cdecl sub_1006285B(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 52));
  return sub_100278A2((int)&unk_10075B00, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062876) --------------------------------------------------------
int __usercall sub_10062876@<eax>(int a1@<ebp>)
{
  return sub_1001C4C3((LPVOID *)(a1 - 16));
}

//----- (1006287E) --------------------------------------------------------
int __usercall sub_1006287E@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 20));
}

//----- (1006288E) --------------------------------------------------------
int __cdecl sub_1006288E(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_10075B94, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100628A9) --------------------------------------------------------
void sub_100628A9()
{
  JUMPOUT(&loc_1001282F);
}

//----- (100628B1) --------------------------------------------------------
int __usercall sub_100628B1@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 20));
}

//----- (100628C1) --------------------------------------------------------
int __usercall sub_100628C1@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 20));
}

//----- (100628D1) --------------------------------------------------------
int __cdecl sub_100628D1(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_100759D8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100628EC) --------------------------------------------------------
void __usercall sub_100628EC(int a1@<ebp>)
{
  sub_100127F7((LPCRITICAL_SECTION *)(a1 - 20));
}

//----- (100628FA) --------------------------------------------------------
int __cdecl sub_100628FA(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 32));
  return sub_100278A2((int)&unk_10075BC8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062915) --------------------------------------------------------
void sub_10062915()
{
  JUMPOUT(&loc_1001282F);
}

//----- (1006291D) --------------------------------------------------------
int __cdecl sub_1006291D(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10075A04, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062938) --------------------------------------------------------
int __usercall sub_10062938@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(a1 - 16);
  **(_DWORD **)(a1 - 16) = 0;
  return result;
}

//----- (10062946) --------------------------------------------------------
int __cdecl sub_10062946(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_1007599C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062961) --------------------------------------------------------
void __usercall sub_10062961(int a1@<ebp>)
{
  sub_100127F7((LPCRITICAL_SECTION *)(a1 - 20));
}

//----- (1006296F) --------------------------------------------------------
int __cdecl sub_1006296F(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_10075A6C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006298A) --------------------------------------------------------
void __usercall sub_1006298A(int a1@<ebp>)
{
  sub_100127F7((LPCRITICAL_SECTION *)(a1 - 24));
}

//----- (1006299E) --------------------------------------------------------
int __cdecl sub_1006299E(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_10075AD4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100629BF) --------------------------------------------------------
int __cdecl sub_100629BF(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_10075A98, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100629DA) --------------------------------------------------------
void __usercall sub_100629DA(int a1@<ebp>)
{
  sub_100127F7((LPCRITICAL_SECTION *)(a1 - 16));
}

//----- (100629E8) --------------------------------------------------------
int __cdecl sub_100629E8(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10075A38, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062A03) --------------------------------------------------------
void __usercall sub_10062A03(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = &off_100665E4;
}
// 100665E4: using guessed type int (__thiscall *off_100665E4)(LPVOID lpMem, char);

//----- (10062A0B) --------------------------------------------------------
int __usercall sub_10062A0B@<eax>(int a1@<ebp>)
{
  return sub_1001C4C3((LPVOID *)(*(_DWORD *)(a1 - 16) + 4));
}

//----- (10062A16) --------------------------------------------------------
int __usercall sub_10062A16@<eax>(int a1@<ebp>)
{
  return sub_10016BA5(*(_DWORD *)(a1 - 16) + 48);
}

//----- (10062A21) --------------------------------------------------------
int __usercall sub_10062A21@<eax>(int a1@<ebp>)
{
  return sub_10016BA5(*(_DWORD *)(a1 - 16) + 60);
}

//----- (10062A2C) --------------------------------------------------------
int __usercall sub_10062A2C@<eax>(int a1@<ebp>)
{
  return sub_10016BA5(*(_DWORD *)(a1 - 16) + 72);
}

//----- (10062A37) --------------------------------------------------------
int __usercall sub_10062A37@<eax>(int a1@<ebp>)
{
  return sub_1000F0A1(*(LPVOID *)(*(_DWORD *)(a1 - 16) + 88));
}

//----- (10062A42) --------------------------------------------------------
int __usercall sub_10062A42@<eax>(int a1@<ebp>)
{
  return sub_10016B0D((PSLIST_HEADER)(*(_DWORD *)(a1 - 16) + 96));
}

//----- (10062A4D) --------------------------------------------------------
int __usercall sub_10062A4D@<eax>(int a1@<ebp>)
{
  return sub_10016A93((PSLIST_HEADER)(*(_DWORD *)(a1 - 16) + 200));
}

//----- (10062A5B) --------------------------------------------------------
void __usercall sub_10062A5B(int a1@<ebp>)
{
  sub_10011603((LPCRITICAL_SECTION)(*(_DWORD *)(a1 - 16) + 280));
}

//----- (10062A69) --------------------------------------------------------
int __usercall sub_10062A69@<eax>(int a1@<ebp>)
{
  int v1; // esi@1

  v1 = *(_DWORD *)(a1 - 16) + 348;
  sub_1001B1FA(v1);
  return sub_1000F0A1(*(LPVOID *)(v1 + 8));
}

//----- (10062A77) --------------------------------------------------------
void __usercall sub_10062A77(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_1001A1C9);
}

//----- (10062A85) --------------------------------------------------------
int __cdecl sub_10062A85(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 68));
  return sub_100278A2((int)&unk_10075C88, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062AA6) --------------------------------------------------------
int __cdecl sub_10062AA6(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 8));
  return sub_100278A2((int)&unk_10075C64, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062AC1) --------------------------------------------------------
int __usercall sub_10062AC1@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062AD1) --------------------------------------------------------
int __cdecl sub_10062AD1(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10075E94, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062AEC) --------------------------------------------------------
int __usercall sub_10062AEC@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062AFC) --------------------------------------------------------
int __cdecl sub_10062AFC(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 36));
  return sub_100278A2((int)&unk_10075EC0, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062B17) --------------------------------------------------------
int __usercall sub_10062B17@<eax>(int a1@<ebp>)
{
  int result; // eax@1
  int v2; // ecx@2

  result = *(_DWORD *)(a1 - 16) & 1;
  if ( result )
  {
    *(_DWORD *)(a1 - 16) &= 0xFFFFFFFE;
    v2 = *(_DWORD *)(a1 + 8);
    JUMPOUT(&loc_10016B9B);
  }
  return result;
}

//----- (10062B30) --------------------------------------------------------
int __cdecl sub_10062B30(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_10075D90, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062B4B) --------------------------------------------------------
void sub_10062B4B()
{
  JUMPOUT(&loc_1001282F);
}

//----- (10062B53) --------------------------------------------------------
int __usercall sub_10062B53@<eax>(int a1@<ebp>)
{
  return sub_1001C4C3((LPVOID *)(a1 - 16));
}

//----- (10062B5B) --------------------------------------------------------
int __cdecl sub_10062B5B(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_10075E34, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062B76) --------------------------------------------------------
int __usercall sub_10062B76@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062B86) --------------------------------------------------------
int __cdecl sub_10062B86(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10075E00, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062BA1) --------------------------------------------------------
int __cdecl sub_10062BA1(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 32));
  return sub_100278A2((int)&unk_10075D38, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062BBC) --------------------------------------------------------
int __usercall sub_10062BBC@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062BCC) --------------------------------------------------------
int __cdecl sub_10062BCC(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10075D64, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062BE7) --------------------------------------------------------
int __usercall sub_10062BE7@<eax>(int a1@<ebp>)
{
  return sub_1000FAFF(*(LPVOID *)(a1 - 52));
}

//----- (10062C10) --------------------------------------------------------
void sub_10062C10()
{
  JUMPOUT(&loc_10016B9B);
}

//----- (10062C18) --------------------------------------------------------
int __usercall sub_10062C18@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 72));
}

//----- (10062C28) --------------------------------------------------------
int __usercall sub_10062C28@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 76));
}

//----- (10062C38) --------------------------------------------------------
int __cdecl sub_10062C38(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 104));
  return sub_100278A2((int)&unk_10075DD4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062C53) --------------------------------------------------------
int __usercall sub_10062C53@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062C60) --------------------------------------------------------
int __usercall sub_10062C60@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062C6D) --------------------------------------------------------
int __cdecl sub_10062C6D(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 36));
  return sub_100278A2((int)&unk_10075E68, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062C88) --------------------------------------------------------
void __usercall sub_10062C88(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = off_100667A0;
}
// 100667A0: using guessed type int (*off_100667A0[5])();

//----- (10062C90) --------------------------------------------------------
void __usercall sub_10062C90(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_1001A1C9);
}

//----- (10062C9E) --------------------------------------------------------
int __usercall sub_10062C9E@<eax>(int a1@<ebp>)
{
  return sub_1001A1F3(*(_DWORD *)(a1 - 16) + 140);
}

//----- (10062CAC) --------------------------------------------------------
int __cdecl sub_10062CAC(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10075FA8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062CC7) --------------------------------------------------------
int __cdecl sub_10062CC7(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 4));
  return sub_100278A2((int)&unk_10074FC4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062CE2) --------------------------------------------------------
void __usercall sub_10062CE2(int a1@<ebp>)
{
  sub_1001A2B3((void *)(a1 - 24));
}

//----- (10062CF0) --------------------------------------------------------
int __cdecl sub_10062CF0(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_10076030, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062D0B) --------------------------------------------------------
int __usercall sub_10062D0B@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062D18) --------------------------------------------------------
int __cdecl sub_10062D18(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10075FD4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062D33) --------------------------------------------------------
int __usercall sub_10062D33@<eax>(int a1@<ebp>)
{
  return sub_1001A27B((void **)(a1 - 16));
}

//----- (10062D41) --------------------------------------------------------
int __cdecl sub_10062D41(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_10075F6C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062D5C) --------------------------------------------------------
int __usercall sub_10062D5C@<eax>(int a1@<ebp>)
{
  return sub_10010531((void *)(*(_DWORD *)(a1 - 16) + 60));
}

//----- (10062D67) --------------------------------------------------------
int __cdecl sub_10062D67(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_1007605C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062D82) --------------------------------------------------------
int __cdecl sub_10062D82(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_10074FC4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062D9D) --------------------------------------------------------
int __usercall sub_10062D9D@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062DAD) --------------------------------------------------------
int __cdecl sub_10062DAD(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076088, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062DC8) --------------------------------------------------------
void __usercall sub_10062DC8(int a1@<ebp>)
{
  sub_1001A2B3((void *)(a1 - 20));
}

//----- (10062DD6) --------------------------------------------------------
int __cdecl sub_10062DD6(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_100760E8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062DF1) --------------------------------------------------------
int __usercall sub_10062DF1@<eax>(int a1@<ebp>)
{
  return sub_1001B46E((int *)(a1 - 16));
}

//----- (10062DFF) --------------------------------------------------------
int __usercall sub_10062DFF@<eax>(int a1@<ebp>)
{
  return sub_1001B4A7(a1 - 20);
}

//----- (10062E0D) --------------------------------------------------------
int __cdecl sub_10062E0D(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_100761C0, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062E28) --------------------------------------------------------
int __usercall sub_10062E28@<eax>(int a1@<ebp>)
{
  int v1; // ST00_4@1

  v1 = *(_DWORD *)(a1 - 28 + 4);
  *(_DWORD *)(a1 - 28) = &off_100668D4;
  return sub_10011490(v1);
}
// 100668D4: using guessed type int (__thiscall *off_100668D4)(LPVOID lpMem, char);

//----- (10062E30) --------------------------------------------------------
int __cdecl sub_10062E30(int a1, int a2, int a3, int a4)
{
  int v4; // eax@1
  int v5; // edx@1

  v4 = sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 32));
  sub_1000FB0D(v4 ^ *(_DWORD *)(v5 - 4));
  return sub_100278A2((int)&unk_100760B4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062E55) --------------------------------------------------------
int __usercall sub_10062E55@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1

  v2 = *(_DWORD *)(a2 - 16) + 28;
  v3 = *(_DWORD *)(a2 - 20);
  return nullsub_1(a1);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (10062E67) --------------------------------------------------------
int __cdecl sub_10062E67(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_10076114, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062E8E) --------------------------------------------------------
int __cdecl sub_10062E8E(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 16));
  return sub_100278A2((int)&unk_10076148, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062EA9) --------------------------------------------------------
int __usercall sub_10062EA9@<eax>(int a1@<ebp>)
{
  return sub_1001B46E((int *)(a1 - 16));
}

//----- (10062EB7) --------------------------------------------------------
int __cdecl sub_10062EB7(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_1007617C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062ED2) --------------------------------------------------------
int __cdecl sub_10062ED2(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 68));
  return sub_100278A2((int)&unk_10076288, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062EED) --------------------------------------------------------
void __usercall sub_10062EED(int a1@<ebp>)
{
  sub_10011603((LPCRITICAL_SECTION)(*(_DWORD *)(a1 - 20) + 32));
}

//----- (10062EF8) --------------------------------------------------------
int __usercall sub_10062EF8@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 24));
}

//----- (10062F08) --------------------------------------------------------
int __cdecl sub_10062F08(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_10076364, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062F23) --------------------------------------------------------
void __usercall sub_10062F23(int a1@<ebp>)
{
  sub_100127F7((LPCRITICAL_SECTION *)(a1 - 24));
}

//----- (10062F31) --------------------------------------------------------
int __cdecl sub_10062F31(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_100763F8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062F4C) --------------------------------------------------------
void __usercall sub_10062F4C(int a1@<ebp>)
{
  sub_100127F7((LPCRITICAL_SECTION *)(a1 - 24));
}

//----- (10062F5A) --------------------------------------------------------
int __cdecl sub_10062F5A(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 40));
  return sub_100278A2((int)&unk_10076398, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062F75) --------------------------------------------------------
int __usercall sub_10062F75@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062F82) --------------------------------------------------------
int __cdecl sub_10062F82(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_100763C4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062FA3) --------------------------------------------------------
int __cdecl sub_10062FA3(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_1007648C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062FBE) --------------------------------------------------------
int __usercall sub_10062FBE@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10062FCB) --------------------------------------------------------
int __cdecl sub_10062FCB(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_100764B8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10062FE6) --------------------------------------------------------
void __usercall sub_10062FE6(int a1@<ebp>)
{
  sub_100127F7((LPCRITICAL_SECTION *)(a1 - 28));
}

//----- (10062FF4) --------------------------------------------------------
int __cdecl sub_10062FF4(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 32));
  return sub_100278A2((int)&unk_1007642C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006300F) --------------------------------------------------------
void __usercall sub_1006300F(int a1@<ebp>)
{
  sub_100127F7((LPCRITICAL_SECTION *)(a1 - 64));
}

//----- (1006301D) --------------------------------------------------------
int __cdecl sub_1006301D(int a1, int a2, int a3, int a4)
{
  int v4; // eax@1
  int v5; // edx@1

  v4 = sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 68));
  sub_1000FB0D(v4 ^ *(_DWORD *)(v5 - 4));
  return sub_100278A2((int)&unk_10076460, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063042) --------------------------------------------------------
void __usercall sub_10063042(int a1@<ebp>)
{
  sub_10011603((LPCRITICAL_SECTION)(*(_DWORD *)(a1 - 16) + 12));
}

//----- (1006304D) --------------------------------------------------------
int __cdecl sub_1006304D(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076510, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063068) --------------------------------------------------------
int __usercall sub_10063068@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10063075) --------------------------------------------------------
int __cdecl sub_10063075(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_100764E4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063090) --------------------------------------------------------
void __usercall sub_10063090(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_10016B9B);
}

//----- (1006309B) --------------------------------------------------------
void __usercall sub_1006309B(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_1001A1C9);
}

//----- (100630A6) --------------------------------------------------------
int __cdecl sub_100630A6(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076578, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100630C1) --------------------------------------------------------
int __usercall sub_100630C1@<eax>(int a1@<ebp>)
{
  return sub_1001A27B((void **)(a1 - 16));
}

//----- (100630CF) --------------------------------------------------------
int __cdecl sub_100630CF(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076544, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100630EA) --------------------------------------------------------
int __usercall sub_100630EA@<eax>(int a1@<ebp>)
{
  return sub_100201E5((void *)(a1 - 16));
}

//----- (100630F8) --------------------------------------------------------
int __cdecl sub_100630F8(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_1007660C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063113) --------------------------------------------------------
int __usercall sub_10063113@<eax>(int a1@<ebp>)
{
  int result; // eax@1

  result = *(_DWORD *)(a1 - 20) & 1;
  if ( result )
  {
    *(_DWORD *)(a1 - 20) &= 0xFFFFFFFE;
    result = sub_1001C4C3((LPVOID *)(a1 - 24));
  }
  return result;
}

//----- (1006312C) --------------------------------------------------------
int __cdecl sub_1006312C(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 52));
  return sub_100278A2((int)&unk_100765D8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063147) --------------------------------------------------------
int __usercall sub_10063147@<eax>(int a1@<ebp>)
{
  int v1; // eax@1

  v1 = 8 * *(_DWORD *)(a1 - 48);
  return sub_1000FAFF(*(LPVOID *)(a1 - 40));
}

//----- (1006316A) --------------------------------------------------------
int __cdecl sub_1006316A(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 52));
  return sub_100278A2((int)&unk_100765AC, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063185) --------------------------------------------------------
int __usercall sub_10063185@<eax>(int a1@<ebp>)
{
  return sub_10021738((PSLIST_HEADER)(*(_DWORD *)(a1 - 16) + 16));
}

//----- (10063190) --------------------------------------------------------
int __usercall sub_10063190@<eax>(int a1@<ebp>)
{
  return sub_10021738((PSLIST_HEADER)(*(_DWORD *)(a1 - 16) + 96));
}

//----- (1006319B) --------------------------------------------------------
int __cdecl sub_1006319B(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 36));
  return sub_100278A2((int)&unk_10076720, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100631B6) --------------------------------------------------------
void __usercall sub_100631B6(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_10016B9B);
}

//----- (100631C1) --------------------------------------------------------
int __usercall sub_100631C1@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 20));
}

//----- (100631CE) --------------------------------------------------------
int __cdecl sub_100631CE(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_10076754, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100631E9) --------------------------------------------------------
void __usercall sub_100631E9(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = off_100665CC;
}
// 100665CC: using guessed type int (*off_100665CC[4])();

//----- (100631F1) --------------------------------------------------------
int __cdecl sub_100631F1(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_1007682C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006320C) --------------------------------------------------------
void __usercall sub_1006320C(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_10016B9B);
}

//----- (10063217) --------------------------------------------------------
void sub_10063217()
{
  JUMPOUT(&loc_10016B9B);
}

//----- (1006321F) --------------------------------------------------------
int __usercall sub_1006321F@<eax>(int a1@<ebp>)
{
  return sub_10021C43(*(_DWORD *)(a1 - 16) + 52);
}

//----- (1006322A) --------------------------------------------------------
int __usercall sub_1006322A@<eax>(int a1@<ebp>)
{
  return sub_10021BC7((PSLIST_HEADER)(*(_DWORD *)(a1 - 16) + 88));
}

//----- (10063235) --------------------------------------------------------
int __usercall sub_10063235@<eax>(int a1@<ebp>)
{
  return sub_10021B4D((PSLIST_HEADER)(*(_DWORD *)(a1 - 16) + 168));
}

//----- (10063243) --------------------------------------------------------
int __cdecl sub_10063243(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_100767D0, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006325E) --------------------------------------------------------
void __usercall sub_1006325E(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_10016B9B);
}

//----- (10063269) --------------------------------------------------------
int __cdecl sub_10063269(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076858, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063284) --------------------------------------------------------
int __usercall sub_10063284@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10063291) --------------------------------------------------------
int __cdecl sub_10063291(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 36));
  return sub_100278A2((int)&unk_100767AC, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100632AC) --------------------------------------------------------
int __usercall sub_100632AC@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (100632B9) --------------------------------------------------------
int __cdecl sub_100632B9(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076780, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100632DA) --------------------------------------------------------
int __cdecl sub_100632DA(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 16));
  return sub_100278A2((int)&unk_10076884, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100632F5) --------------------------------------------------------
int __usercall sub_100632F5@<eax>(int a1@<ebp>)
{
  return sub_1001A236(*(void **)(a1 - 16));
}

//----- (100632FD) --------------------------------------------------------
int __cdecl sub_100632FD(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_100768B0, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063318) --------------------------------------------------------
int __cdecl sub_10063318(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 8));
  return sub_100278A2((int)&unk_10074FC4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063333) --------------------------------------------------------
int __usercall sub_10063333@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10063343) --------------------------------------------------------
int __cdecl sub_10063343(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_100768DC, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006335E) --------------------------------------------------------
int __usercall sub_1006335E@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (1006336E) --------------------------------------------------------
int __cdecl sub_1006336E(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076934, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063389) --------------------------------------------------------
int __usercall sub_10063389@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10063399) --------------------------------------------------------
int __cdecl sub_10063399(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076908, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100633B4) --------------------------------------------------------
void sub_100633B4()
{
  JUMPOUT(&loc_1001B5F9);
}

//----- (100633BC) --------------------------------------------------------
int __cdecl sub_100633BC(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_1007698C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100633D7) --------------------------------------------------------
LPVOID __usercall sub_100633D7@<eax>(int a1@<ebp>)
{
  return sub_1003B23B((LPVOID)(a1 + 8));
}

//----- (100633DF) --------------------------------------------------------
int __cdecl sub_100633DF(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 16));
  return sub_100278A2((int)&unk_10076960, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100633FA) --------------------------------------------------------
int __usercall sub_100633FA@<eax>(int a1@<ebp>)
{
  return sub_1001ECBE(*(_DWORD *)(a1 - 16));
}

//----- (10063402) --------------------------------------------------------
int __usercall sub_10063402@<eax>(int a1@<ebp>)
{
  return sub_1001A1DC(*(_DWORD *)(a1 - 16) + 76);
}

//----- (1006340D) --------------------------------------------------------
int __cdecl sub_1006340D(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_100769C0, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063428) --------------------------------------------------------
int __usercall sub_10063428@<eax>(int a1@<ebp>)
{
  return sub_1001A27B((void **)(a1 - 28));
}

//----- (10063436) --------------------------------------------------------
int __cdecl sub_10063436(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 32));
  return sub_100278A2((int)&unk_10076A14, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063451) --------------------------------------------------------
int __cdecl sub_10063451(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 52));
  return sub_100278A2((int)&unk_10076A7C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006346C) --------------------------------------------------------
int __usercall sub_1006346C@<eax>(int a1@<ebp>)
{
  return sub_1001ECD5(*(_DWORD *)(a1 - 16));
}

//----- (10063474) --------------------------------------------------------
int __cdecl sub_10063474(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076AE4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006348F) --------------------------------------------------------
int __cdecl sub_1006348F(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_10076BC8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100634AA) --------------------------------------------------------
void __usercall sub_100634AA(int a1@<ebp>)
{
  **(_DWORD **)(a1 - 16) = off_1006CBA4;
}
// 1006CBA4: using guessed type int (*off_1006CBA4[2])();

//----- (100634B2) --------------------------------------------------------
int __usercall sub_100634B2@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1

  v2 = *(_DWORD *)(a2 - 16) + 12;
  v3 = *(_DWORD *)(a2 - 20);
  return nullsub_1(a1);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (100634C4) --------------------------------------------------------
int __cdecl sub_100634C4(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_100773B4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100634DF) --------------------------------------------------------
void __usercall sub_100634DF(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_1003AC70);
}

//----- (100634E7) --------------------------------------------------------
int __usercall sub_100634E7@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1

  v2 = *(_DWORD *)(a2 - 20);
  v3 = *(_DWORD *)(a2 - 24);
  return nullsub_1(a1);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (100634F5) --------------------------------------------------------
int __cdecl sub_100634F5(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_100773E8, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063510) --------------------------------------------------------
int __usercall sub_10063510@<eax>(int a1@<ecx>, int a2@<ebp>)
{
  int v2; // ST04_4@1
  int v3; // ST00_4@1

  v2 = *(_DWORD *)(a2 - 24);
  v3 = *(_DWORD *)(a2 - 28);
  return nullsub_1(a1);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);

//----- (1006351E) --------------------------------------------------------
int __cdecl sub_1006351E(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 32));
  return sub_100278A2((int)&unk_10077380, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063539) --------------------------------------------------------
int __usercall sub_10063539@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 20));
}

//----- (10063546) --------------------------------------------------------
int __cdecl sub_10063546(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 24));
  return sub_100278A2((int)&unk_10077320, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063561) --------------------------------------------------------
int __cdecl sub_10063561(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 12));
  return sub_100278A2((int)&unk_10074FC4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (1006357C) --------------------------------------------------------
int __cdecl sub_1006357C(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 20));
  return sub_100278A2((int)&unk_100772F4, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (10063597) --------------------------------------------------------
int __cdecl sub_10063597(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 64));
  return sub_100278A2((int)&unk_10077270, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100635B2) --------------------------------------------------------
int __cdecl sub_100635B2(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 28));
  return sub_100278A2((int)&unk_10077208, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100635CD) --------------------------------------------------------
int __usercall sub_100635CD@<eax>(int a1@<ebp>)
{
  return sub_1001A063((void *)(a1 - 28));
}

//----- (100635D5) --------------------------------------------------------
int __cdecl sub_100635D5(int a1, int a2, int a3, int a4)
{
  sub_1000FB0D((a2 + 12) ^ *(_DWORD *)(a2 - 32));
  return sub_100278A2((int)&unk_1007729C, a1, a2, a3, a4);
}
// 1000FB0D: using guessed type int __thiscall sub_1000FB0D(_DWORD);

//----- (100635F0) --------------------------------------------------------
int __usercall sub_100635F0@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10063602) --------------------------------------------------------
int __cdecl SEH_1003BB80(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077430, a1, a2, a3, a4);
}

//----- (1006360C) --------------------------------------------------------
void sub_1006360C()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063614) --------------------------------------------------------
void sub_10063614()
{
  JUMPOUT(&loc_10001340);
}

//----- (1006361C) --------------------------------------------------------
int __usercall sub_1006361C@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@1
  void *v4; // ecx@1
  int result; // eax@2

  v3 = a2 - 60;
  v4 = *(void **)(a2 - 60);
  if ( v4 )
  {
    result = sub_100029D0(a1, a3, v4, (*(_DWORD *)(v3 + 8) - (signed int)v4) >> 3);
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 0;
    *(_DWORD *)(v3 + 8) = 0;
  }
  return result;
}

//----- (10063624) --------------------------------------------------------
int __usercall sub_10063624@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 108, a1, a3);
}

//----- (1006362C) --------------------------------------------------------
int __cdecl SEH_1003BCC0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007745C, a1, a2, a3, a4);
}

//----- (10063636) --------------------------------------------------------
void sub_10063636()
{
  JUMPOUT(&loc_10001340);
}

//----- (1006363E) --------------------------------------------------------
void sub_1006363E()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063646) --------------------------------------------------------
void sub_10063646()
{
  JUMPOUT(&loc_10002840);
}

//----- (1006364E) --------------------------------------------------------
int __usercall sub_1006364E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 104, a1, a3);
}

//----- (10063656) --------------------------------------------------------
int __cdecl SEH_1003C080(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100774A0, a1, a2, a3, a4);
}

//----- (10063660) --------------------------------------------------------
int __usercall sub_10063660@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 16));
}

//----- (10063672) --------------------------------------------------------
int __cdecl SEH_1003D7B0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100774E4, a1, a2, a3, a4);
}

//----- (1006367C) --------------------------------------------------------
void sub_1006367C()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063684) --------------------------------------------------------
void sub_10063684()
{
  JUMPOUT(&loc_10001340);
}

//----- (1006368C) --------------------------------------------------------
void sub_1006368C()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063694) --------------------------------------------------------
int __usercall sub_10063694@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 116, a1, a3);
}

//----- (1006369C) --------------------------------------------------------
int __cdecl SEH_1003DB50(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077510, a1, a2, a3, a4);
}

//----- (100636A6) --------------------------------------------------------
void sub_100636A6()
{
  JUMPOUT(&loc_10001340);
}

//----- (100636AE) --------------------------------------------------------
void sub_100636AE()
{
  JUMPOUT(&loc_10001340);
}

//----- (100636B6) --------------------------------------------------------
void sub_100636B6()
{
  JUMPOUT(&loc_10002840);
}

//----- (100636BE) --------------------------------------------------------
int __usercall sub_100636BE@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 112, a1, a3);
}

//----- (100636C6) --------------------------------------------------------
int __cdecl SEH_1003DF50(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077554, a1, a2, a3, a4);
}

//----- (100636D0) --------------------------------------------------------
int __usercall sub_100636D0@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  int v2; // edi@1
  unsigned int v3; // eax@1
  LPVOID *v4; // esi@1
  bool v5; // cf@3

  v2 = a2 - 88;
  v3 = *(_DWORD *)(a2 - 88 + 56);
  v4 = (LPVOID *)(a2 - 88 + 36);
  if ( v3 >= 8 )
    sub_10001E40(a1, v2, *v4, v3 + 1);
  *(_DWORD *)(a2 - 88 + 56) = 7;
  v5 = *(_DWORD *)(a2 - 88 + 56) < 8u;
  *(_DWORD *)(a2 - 88 + 52) = 0;
  if ( !v5 )
    v4 = (LPVOID *)*v4;
  *(_WORD *)v4 = 0;
  return sub_10004700(v2);
}

//----- (100636D8) --------------------------------------------------------
void __usercall sub_100636D8(int a1@<ebp>)
{
  *(_DWORD *)(a1 - 24) = &off_1006DA08;
}
// 1006DA08: using guessed type int (__thiscall *off_1006DA08)(LPVOID lpMem, char);

//----- (100636E0) --------------------------------------------------------
int __cdecl SEH_1003E6B0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077598, a1, a2, a3, a4);
}

//----- (100636EA) --------------------------------------------------------
int __usercall sub_100636EA@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  return sub_100043F0(a2 - 136, a1);
}

//----- (100636F5) --------------------------------------------------------
int __cdecl SEH_1003EA30(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100775CC, a1, a2, a3, a4);
}

//----- (100636FF) --------------------------------------------------------
void sub_100636FF()
{
  JUMPOUT(&loc_10004530);
}

//----- (10063707) --------------------------------------------------------
int __cdecl SEH_1003F980(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100775F8, a1, a2, a3, a4);
}

//----- (10063720) --------------------------------------------------------
void sub_10063720()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063728) --------------------------------------------------------
int __usercall sub_10063728@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 60, a1, a3);
}

//----- (10063736) --------------------------------------------------------
int __cdecl SEH_10040330(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077624, a1, a2, a3, a4);
}

//----- (10063740) --------------------------------------------------------
void sub_10063740()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063748) --------------------------------------------------------
int __cdecl SEH_10040760(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077660, a1, a2, a3, a4);
}

//----- (10063752) --------------------------------------------------------
void sub_10063752()
{
  JUMPOUT(&loc_10001340);
}

//----- (1006375A) --------------------------------------------------------
int __cdecl SEH_100410C0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007768C, a1, a2, a3, a4);
}

//----- (10063794) --------------------------------------------------------
int __cdecl SEH_10041F90(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100776B8, a1, a2, a3, a4);
}

//----- (1006379E) --------------------------------------------------------
int __usercall sub_1006379E@<eax>(int a1@<ebp>)
{
  return sub_10007900((void *)(a1 - 80));
}

//----- (100637A6) --------------------------------------------------------
int __usercall sub_100637A6@<eax>(int a1@<ebp>)
{
  return sub_10007900((void *)(a1 - 76));
}

//----- (100637AE) --------------------------------------------------------
int __usercall sub_100637AE@<eax>(int a1@<ebp>)
{
  return sub_10007900((void *)(a1 - 72));
}

//----- (100637B6) --------------------------------------------------------
int __cdecl sub_100637B6(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100776DC, a1, a2, a3, a4);
}

//----- (100637C0) --------------------------------------------------------
void __usercall sub_100637C0(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_10002970);
}

//----- (100637CB) --------------------------------------------------------
void __usercall sub_100637CB(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_10002940);
}

//----- (100637D6) --------------------------------------------------------
int __usercall sub_100637D6@<eax>(int a1@<ebp>)
{
  return sub_10002770(*(_DWORD *)(a1 - 20) + 12);
}
// 10002770: using guessed type int __thiscall sub_10002770(_DWORD);

//----- (100637E1) --------------------------------------------------------
void __usercall sub_100637E1(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002970);
}

//----- (100637EC) --------------------------------------------------------
void __usercall sub_100637EC(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002940);
}

//----- (100637F7) --------------------------------------------------------
int __usercall sub_100637F7@<eax>(int a1@<ebp>)
{
  return sub_10002770(*(_DWORD *)(a1 - 20) + 44);
}
// 10002770: using guessed type int __thiscall sub_10002770(_DWORD);

//----- (10063802) --------------------------------------------------------
void __usercall sub_10063802(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002970);
}

//----- (1006380D) --------------------------------------------------------
void __usercall sub_1006380D(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002940);
}

//----- (10063818) --------------------------------------------------------
int __usercall sub_10063818@<eax>(int a1@<ebp>)
{
  return sub_10002770(*(_DWORD *)(a1 - 20) + 76);
}
// 10002770: using guessed type int __thiscall sub_10002770(_DWORD);

//----- (10063823) --------------------------------------------------------
int __usercall sub_10063823@<eax>(int a1@<ebp>)
{
  void *v1; // esi@1

  v1 = (void *)(*(_DWORD *)(a1 - 24) + 4);
  sub_10002B30(v1);
  return sub_1000F409(*(LPVOID *)v1);
}

//----- (1006382E) --------------------------------------------------------
void __usercall sub_1006382E(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002940);
}

//----- (10063839) --------------------------------------------------------
int __usercall sub_10063839@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@1
  void *v4; // ecx@1

  v3 = *(_DWORD *)(a2 - 20) + 108;
  v4 = *(void **)(*(_DWORD *)(a2 - 20) + 120);
  if ( v4 )
  {
    sub_10002AD0(a1, a3, v4, (*(_DWORD *)(*(_DWORD *)(a2 - 20) + 128) - (signed int)v4) >> 2);
    *(_DWORD *)(v3 + 12) = 0;
    *(_DWORD *)(v3 + 16) = 0;
    *(_DWORD *)(v3 + 20) = 0;
  }
  sub_10002B30((void *)(v3 + 4));
  return sub_1000F409(*(LPVOID *)(v3 + 4));
}

//----- (10063844) --------------------------------------------------------
void __usercall sub_10063844(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002970);
}

//----- (1006384F) --------------------------------------------------------
void __usercall sub_1006384F(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002940);
}

//----- (1006385A) --------------------------------------------------------
int __usercall sub_1006385A@<eax>(int a1@<ebp>)
{
  return sub_10002770(*(_DWORD *)(a1 - 20) + 376);
}
// 10002770: using guessed type int __thiscall sub_10002770(_DWORD);

//----- (10063868) --------------------------------------------------------
void __usercall sub_10063868(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002970);
}

//----- (10063873) --------------------------------------------------------
void __usercall sub_10063873(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002940);
}

//----- (1006387E) --------------------------------------------------------
int __usercall sub_1006387E@<eax>(int a1@<ebp>)
{
  return sub_10002770(*(_DWORD *)(a1 - 20) + 412);
}
// 10002770: using guessed type int __thiscall sub_10002770(_DWORD);

//----- (1006388C) --------------------------------------------------------
int __usercall sub_1006388C@<eax>(int a1@<ebp>)
{
  return sub_10002770(*(_DWORD *)(a1 - 20) + 448);
}
// 10002770: using guessed type int __thiscall sub_10002770(_DWORD);

//----- (1006389A) --------------------------------------------------------
void __usercall sub_1006389A(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002970);
}

//----- (100638A5) --------------------------------------------------------
void __usercall sub_100638A5(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 24);
  JUMPOUT(&loc_10002940);
}

//----- (100638B0) --------------------------------------------------------
int __cdecl SEH_10042AF0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077758, a1, a2, a3, a4);
}

//----- (100638C0) --------------------------------------------------------
int __usercall sub_100638C0@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 72));
}

//----- (100638CF) --------------------------------------------------------
int __usercall sub_100638CF@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 72));
}

//----- (100638DE) --------------------------------------------------------
int __usercall sub_100638DE@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 72));
}

//----- (100638ED) --------------------------------------------------------
int __cdecl SEH_10042F70(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007777C, a1, a2, a3, a4);
}

//----- (100638F7) --------------------------------------------------------
void sub_100638F7()
{
  JUMPOUT(&loc_10001340);
}

//----- (100638FF) --------------------------------------------------------
void sub_100638FF()
{
  JUMPOUT(&loc_10001340);
}

//----- (1006390A) --------------------------------------------------------
void sub_1006390A()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063912) --------------------------------------------------------
int __usercall sub_10063912@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 136, a1, a3);
}

//----- (1006391D) --------------------------------------------------------
int __cdecl SEH_100463B0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077860, a1, a2, a3, a4);
}

//----- (10063927) --------------------------------------------------------
void sub_10063927()
{
  JUMPOUT(&loc_10001340);
}

//----- (1006392F) --------------------------------------------------------
void sub_1006392F()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063937) --------------------------------------------------------
void sub_10063937()
{
  JUMPOUT(&loc_10002840);
}

//----- (1006393F) --------------------------------------------------------
int __usercall sub_1006393F@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 108, a1, a3);
}

//----- (10063947) --------------------------------------------------------
int __cdecl SEH_10046AF0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100778A4, a1, a2, a3, a4);
}

//----- (10063951) --------------------------------------------------------
void sub_10063951()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063959) --------------------------------------------------------
void sub_10063959()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063961) --------------------------------------------------------
void sub_10063961()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063969) --------------------------------------------------------
int __usercall sub_10063969@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063971) --------------------------------------------------------
int __cdecl SEH_10047060(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100778E8, a1, a2, a3, a4);
}

//----- (1006397B) --------------------------------------------------------
void sub_1006397B()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063983) --------------------------------------------------------
void sub_10063983()
{
  JUMPOUT(&loc_10001340);
}

//----- (1006398B) --------------------------------------------------------
void sub_1006398B()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063993) --------------------------------------------------------
int __usercall sub_10063993@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 104, a1, a3);
}

//----- (1006399B) --------------------------------------------------------
int __cdecl SEH_10047460(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007792C, a1, a2, a3, a4);
}

//----- (100639A5) --------------------------------------------------------
int __usercall sub_100639A5@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 32));
}

//----- (100639B4) --------------------------------------------------------
int __cdecl SEH_100481B0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077970, a1, a2, a3, a4);
}

//----- (100639BE) --------------------------------------------------------
int __cdecl SEH_100489E0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007799C, a1, a2, a3, a4);
}

//----- (100639C8) --------------------------------------------------------
int __usercall sub_100639C8@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  return sub_100026E0(*(_DWORD *)(a2 - 16), a1);
}

//----- (100639D0) --------------------------------------------------------
int __usercall sub_100639D0@<eax>(int a1@<ebp>)
{
  return sub_10008AE0((void *)(*(_DWORD *)(a1 - 16) + 1928));
}

//----- (100639DE) --------------------------------------------------------
int __usercall sub_100639DE@<eax>(int a1@<ebp>)
{
  return sub_10008AE0((void *)(*(_DWORD *)(a1 - 16) + 1940));
}

//----- (100639EC) --------------------------------------------------------
int __usercall sub_100639EC@<eax>(int a1@<ebp>)
{
  return sub_10008AE0((void *)(*(_DWORD *)(a1 - 16) + 1952));
}

//----- (100639FA) --------------------------------------------------------
int __usercall sub_100639FA@<eax>(int a1@<ebp>)
{
  return sub_10008BB0(*(_DWORD *)(a1 - 16) + 1968);
}
// 10008BB0: using guessed type int __thiscall sub_10008BB0(_DWORD);

//----- (10063A08) --------------------------------------------------------
int __usercall sub_10063A08@<eax>(int a1@<ebp>)
{
  return sub_10008AE0((void *)(*(_DWORD *)(a1 - 16) + 1984));
}

//----- (10063A16) --------------------------------------------------------
int __usercall sub_10063A16@<eax>(int a1@<ebp>)
{
  return sub_10008AE0((void *)(*(_DWORD *)(a1 - 16) + 1996));
}

//----- (10063A24) --------------------------------------------------------
int __usercall sub_10063A24@<eax>(int a1@<ebp>)
{
  return sub_1000F684(a1, *(_DWORD *)(a1 - 16) + 2008, 12, 2, (int)sub_10008AE0);
}

//----- (10063A3C) --------------------------------------------------------
int __usercall sub_10063A3C@<eax>(int a1@<ebp>)
{
  return sub_1000F684(a1, *(_DWORD *)(a1 - 16) + 2036, 8, 64, (int)&loc_10002970);
}

//----- (10063A54) --------------------------------------------------------
int __cdecl SEH_10048AD0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100779C0, a1, a2, a3, a4);
}

//----- (10063A5E) --------------------------------------------------------
int __usercall sub_10063A5E@<eax>(int a1@<ebp>)
{
  return sub_1002D4A8(*(_DWORD *)(a1 - 16));
}
// 1002D4A8: using guessed type _DWORD __cdecl sub_1002D4A8(_DWORD);

//----- (10063A66) --------------------------------------------------------
int __cdecl SEH_10048DD0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100779E4, a1, a2, a3, a4);
}

//----- (10063A70) --------------------------------------------------------
int __usercall sub_10063A70@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063A7F) --------------------------------------------------------
int __usercall sub_10063A7F@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063A8E) --------------------------------------------------------
int __usercall sub_10063A8E@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063A9D) --------------------------------------------------------
int __usercall sub_10063A9D@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063AAC) --------------------------------------------------------
int __cdecl sub_10063AAC(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077A58, a1, a2, a3, a4);
}

//----- (10063AB6) --------------------------------------------------------
void sub_10063AB6()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063ABE) --------------------------------------------------------
void sub_10063ABE()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063AC6) --------------------------------------------------------
void sub_10063AC6()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063ACE) --------------------------------------------------------
int __usercall sub_10063ACE@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 112, a1, a3);
}

//----- (10063AD6) --------------------------------------------------------
int __cdecl SEH_1004ADF0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077A9C, a1, a2, a3, a4);
}

//----- (10063AE0) --------------------------------------------------------
void sub_10063AE0()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063AE8) --------------------------------------------------------
void sub_10063AE8()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063AF0) --------------------------------------------------------
void sub_10063AF0()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063AF8) --------------------------------------------------------
int __usercall sub_10063AF8@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063B00) --------------------------------------------------------
int __usercall sub_10063B00@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063B08) --------------------------------------------------------
int __usercall sub_10063B08@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063B10) --------------------------------------------------------
int __usercall sub_10063B10@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063B18) --------------------------------------------------------
int __usercall sub_10063B18@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063B20) --------------------------------------------------------
int __usercall sub_10063B20@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063B28) --------------------------------------------------------
int __usercall sub_10063B28@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063B30) --------------------------------------------------------
int __usercall sub_10063B30@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063B38) --------------------------------------------------------
int __cdecl SEH_1004B2C0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077AE0, a1, a2, a3, a4);
}

//----- (10063B42) --------------------------------------------------------
void sub_10063B42()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063B4A) --------------------------------------------------------
void sub_10063B4A()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063B52) --------------------------------------------------------
void sub_10063B52()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063B5A) --------------------------------------------------------
int __usercall sub_10063B5A@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 124, a1, a3);
}

//----- (10063B62) --------------------------------------------------------
int __cdecl SEH_1004B920(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077B04, a1, a2, a3, a4);
}

//----- (10063B6C) --------------------------------------------------------
void sub_10063B6C()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063B74) --------------------------------------------------------
void sub_10063B74()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063B7F) --------------------------------------------------------
void sub_10063B7F()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063B87) --------------------------------------------------------
int __usercall sub_10063B87@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 132, a1, a3);
}

//----- (10063B92) --------------------------------------------------------
int __cdecl SEH_1004BDC0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077BA0, a1, a2, a3, a4);
}

//----- (10063B9C) --------------------------------------------------------
void sub_10063B9C()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063BA4) --------------------------------------------------------
void sub_10063BA4()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063BAC) --------------------------------------------------------
void sub_10063BAC()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063BB4) --------------------------------------------------------
int __usercall sub_10063BB4@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 112, a1, a3);
}

//----- (10063BBC) --------------------------------------------------------
int __cdecl SEH_1004CB40(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077BE4, a1, a2, a3, a4);
}

//----- (10063BD2) --------------------------------------------------------
int __usercall sub_10063BD2@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 24));
}

//----- (10063BE1) --------------------------------------------------------
int __usercall sub_10063BE1@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 32));
}

//----- (10063BF0) --------------------------------------------------------
int __usercall sub_10063BF0@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 24));
}

//----- (10063BFF) --------------------------------------------------------
int __usercall sub_10063BFF@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 24));
}

//----- (10063C0E) --------------------------------------------------------
int __usercall sub_10063C0E@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 32));
}

//----- (10063C1D) --------------------------------------------------------
int __cdecl SEH_1004D5D0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077C28, a1, a2, a3, a4);
}

//----- (10063C45) --------------------------------------------------------
int __cdecl SEH_1004E090(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077C84, a1, a2, a3, a4);
}

//----- (10063C4F) --------------------------------------------------------
int __usercall sub_10063C4F@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 104));
}

//----- (10063C5E) --------------------------------------------------------
int __usercall sub_10063C5E@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 164));
}

//----- (10063C70) --------------------------------------------------------
int __usercall sub_10063C70@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 164));
}

//----- (10063C82) --------------------------------------------------------
int __cdecl sub_10063C82(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077CD0, a1, a2, a3, a4);
}

//----- (10063C8C) --------------------------------------------------------
int __cdecl sub_10063C8C(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077D0C, a1, a2, a3, a4);
}

//----- (10063C96) --------------------------------------------------------
int __usercall sub_10063C96@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  return sub_100026E0(*(_DWORD *)(a2 - 16), a1);
}

//----- (10063C9E) --------------------------------------------------------
int __usercall sub_10063C9E@<eax>(int a1@<ebp>)
{
  return sub_10008FA0(*(_DWORD *)(a1 - 16) + 66092);
}

//----- (10063CAC) --------------------------------------------------------
int __usercall sub_10063CAC@<eax>(int a1@<ebp>)
{
  return sub_1000F684(a1, *(_DWORD *)(a1 - 16) + 66760, 8, 512, (int)&loc_10002970);
}

//----- (10063CC7) --------------------------------------------------------
int __cdecl SEH_1004EC40(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077D30, a1, a2, a3, a4);
}

//----- (10063CD1) --------------------------------------------------------
void __usercall sub_10063CD1(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_100087D0);
}

//----- (10063CD9) --------------------------------------------------------
int __cdecl sub_10063CD9(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077D6C, a1, a2, a3, a4);
}

//----- (10063CF0) --------------------------------------------------------
void sub_10063CF0()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063CF8) --------------------------------------------------------
void sub_10063CF8()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063D00) --------------------------------------------------------
void sub_10063D00()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063D08) --------------------------------------------------------
int __usercall sub_10063D08@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 124, a1, a3);
}

//----- (10063D10) --------------------------------------------------------
int __cdecl SEH_1004EFA0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077D98, a1, a2, a3, a4);
}

//----- (10063D1A) --------------------------------------------------------
void sub_10063D1A()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063D22) --------------------------------------------------------
void sub_10063D22()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063D2A) --------------------------------------------------------
void sub_10063D2A()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063D32) --------------------------------------------------------
int __usercall sub_10063D32@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 116, a1, a3);
}

//----- (10063D3A) --------------------------------------------------------
int __cdecl SEH_1004F650(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077DDC, a1, a2, a3, a4);
}

//----- (10063D44) --------------------------------------------------------
void sub_10063D44()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063D4C) --------------------------------------------------------
void sub_10063D4C()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063D54) --------------------------------------------------------
void sub_10063D54()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063D5C) --------------------------------------------------------
int __usercall sub_10063D5C@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 116, a1, a3);
}

//----- (10063D64) --------------------------------------------------------
int __cdecl SEH_1004FDC0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077E20, a1, a2, a3, a4);
}

//----- (10063D6E) --------------------------------------------------------
void sub_10063D6E()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063D76) --------------------------------------------------------
void sub_10063D76()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063D7E) --------------------------------------------------------
void sub_10063D7E()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063D86) --------------------------------------------------------
int __usercall sub_10063D86@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 120, a1, a3);
}

//----- (10063D8E) --------------------------------------------------------
int __cdecl SEH_100503C0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077E64, a1, a2, a3, a4);
}

//----- (10063D98) --------------------------------------------------------
void sub_10063D98()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063DA0) --------------------------------------------------------
void sub_10063DA0()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063DA8) --------------------------------------------------------
void sub_10063DA8()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063DB0) --------------------------------------------------------
int __usercall sub_10063DB0@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 108, a1, a3);
}

//----- (10063DB8) --------------------------------------------------------
int __cdecl SEH_100508D0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077EA8, a1, a2, a3, a4);
}

//----- (10063DC2) --------------------------------------------------------
void sub_10063DC2()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063DCA) --------------------------------------------------------
void sub_10063DCA()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063DD5) --------------------------------------------------------
void sub_10063DD5()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063DDD) --------------------------------------------------------
int __usercall sub_10063DDD@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 144, a1, a3);
}

//----- (10063DE8) --------------------------------------------------------
int __cdecl sub_10063DE8(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077EEC, a1, a2, a3, a4);
}

//----- (10063DF2) --------------------------------------------------------
void sub_10063DF2()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063DFA) --------------------------------------------------------
void sub_10063DFA()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063E02) --------------------------------------------------------
void sub_10063E02()
{
  JUMPOUT(&loc_10002840);
}

//----- (10063E0A) --------------------------------------------------------
int __usercall sub_10063E0A@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 112, a1, a3);
}

//----- (10063E12) --------------------------------------------------------
int __cdecl SEH_10052080(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077F30, a1, a2, a3, a4);
}

//----- (10063E20) --------------------------------------------------------
int __usercall sub_10063E20@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063E2F) --------------------------------------------------------
int __usercall sub_10063E2F@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063E3E) --------------------------------------------------------
int __usercall sub_10063E3E@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063E4D) --------------------------------------------------------
int __usercall sub_10063E4D@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063E5C) --------------------------------------------------------
int __usercall sub_10063E5C@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063E6B) --------------------------------------------------------
int __cdecl sub_10063E6B(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077F74, a1, a2, a3, a4);
}

//----- (10063E7B) --------------------------------------------------------
int __cdecl SEH_10059C30(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077FC0, a1, a2, a3, a4);
}

//----- (10063E85) --------------------------------------------------------
int __cdecl SEH_1005B970(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10077FEC, a1, a2, a3, a4);
}

//----- (10063E8F) --------------------------------------------------------
int __usercall sub_10063E8F@<eax>(int a1@<ebx>, int a2@<ebp>)
{
  return sub_100026E0(*(_DWORD *)(a2 - 16), a1);
}

//----- (10063E97) --------------------------------------------------------
int __usercall sub_10063E97@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  int v3; // esi@1
  void *v4; // ecx@1
  int result; // eax@2
  int v6; // ecx@1

  v6 = *(_DWORD *)(a2 - 16) + 8820;
  v3 = v6;
  v4 = *(void **)v6;
  if ( v4 )
  {
    result = sub_1000A6F0(a1, a3, v4, (*(_DWORD *)(v3 + 8) - (signed int)v4) / 12);
    *(_DWORD *)v3 = 0;
    *(_DWORD *)(v3 + 4) = 0;
    *(_DWORD *)(v3 + 8) = 0;
  }
  return result;
}

//----- (10063EA5) --------------------------------------------------------
void __usercall sub_10063EA5(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  JUMPOUT(&loc_10002970);
}

//----- (10063EB0) --------------------------------------------------------
void __usercall sub_10063EB0(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 20);
  JUMPOUT(&loc_10002940);
}

//----- (10063EBB) --------------------------------------------------------
int __usercall sub_10063EBB@<eax>(int a1@<ebp>)
{
  return sub_10002770(*(_DWORD *)(a1 - 16) + 8832);
}
// 10002770: using guessed type int __thiscall sub_10002770(_DWORD);

//----- (10063EC9) --------------------------------------------------------
int __cdecl SEH_1005BA30(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10078010, a1, a2, a3, a4);
}

//----- (10063ED3) --------------------------------------------------------
void __usercall sub_10063ED3(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_100087D0);
}

//----- (10063EDB) --------------------------------------------------------
int __cdecl SEH_1005BF20(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007805C, a1, a2, a3, a4);
}

//----- (10063EFC) --------------------------------------------------------
int __cdecl SEH_1005C6C0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10078088, a1, a2, a3, a4);
}

//----- (10063F06) --------------------------------------------------------
int __usercall sub_10063F06@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 72));
}

//----- (10063F15) --------------------------------------------------------
int __usercall sub_10063F15@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 72));
}

//----- (10063F24) --------------------------------------------------------
int __cdecl sub_10063F24(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100780BC, a1, a2, a3, a4);
}

//----- (10063F30) --------------------------------------------------------
int __usercall sub_10063F30@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 64));
}

//----- (10063F3F) --------------------------------------------------------
int __usercall sub_10063F3F@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 68));
}

//----- (10063F4E) --------------------------------------------------------
int __usercall sub_10063F4E@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 72));
}

//----- (10063F5D) --------------------------------------------------------
int __usercall sub_10063F5D@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 64));
}

//----- (10063F6C) --------------------------------------------------------
int __cdecl SEH_1005CE30(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100780F0, a1, a2, a3, a4);
}

//----- (10063F76) --------------------------------------------------------
void sub_10063F76()
{
  JUMPOUT(&loc_10001340);
}

//----- (10063F7E) --------------------------------------------------------
int __usercall sub_10063F7E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 60, a1, a3);
}

//----- (10063F8C) --------------------------------------------------------
int __cdecl SEH_1005E260(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10078134, a1, a2, a3, a4);
}

//----- (10063F96) --------------------------------------------------------
void __usercall sub_10063F96(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_100087D0);
}

//----- (10063F9E) --------------------------------------------------------
int __cdecl SEH_1005E450(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10078170, a1, a2, a3, a4);
}

//----- (10063FBC) --------------------------------------------------------
int __cdecl SEH_1005E5F0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007819C, a1, a2, a3, a4);
}

//----- (10063FC6) --------------------------------------------------------
int __usercall sub_10063FC6@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 48));
}

//----- (10063FD5) --------------------------------------------------------
int __usercall sub_10063FD5@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 48));
}

//----- (10063FE4) --------------------------------------------------------
int __usercall sub_10063FE4@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 48));
}

//----- (10063FF3) --------------------------------------------------------
int __usercall sub_10063FF3@<eax>(int a1@<ebp>)
{
  return sub_1000F417(*(LPVOID *)(a1 - 48));
}

//----- (10064002) --------------------------------------------------------
int __cdecl SEH_1005E6E0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100781D0, a1, a2, a3, a4);
}

//----- (1006400C) --------------------------------------------------------
void sub_1006400C()
{
  JUMPOUT(&loc_10002840);
}

//----- (10064014) --------------------------------------------------------
int __usercall sub_10064014@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 96, a1, a3);
}

//----- (1006401C) --------------------------------------------------------
int __cdecl SEH_10060100(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10078214, a1, a2, a3, a4);
}

//----- (10064026) --------------------------------------------------------
void sub_10064026()
{
  JUMPOUT(&loc_10002840);
}

//----- (1006402E) --------------------------------------------------------
int __usercall sub_1006402E@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 84, a1, a3);
}

//----- (10064036) --------------------------------------------------------
int __cdecl SEH_10060400(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_10078248, a1, a2, a3, a4);
}

//----- (10064040) --------------------------------------------------------
void sub_10064040()
{
  JUMPOUT(&loc_10002840);
}

//----- (10064048) --------------------------------------------------------
int __usercall sub_10064048@<eax>(int a1@<ebx>, int a2@<ebp>, int a3@<edi>)
{
  return sub_10001380(a2 - 88, a1, a3);
}

//----- (10064050) --------------------------------------------------------
int __cdecl SEH_100607D0(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_1007827C, a1, a2, a3, a4);
}

//----- (1006405A) --------------------------------------------------------
void __usercall sub_1006405A(int a1@<ebp>)
{
  int v1; // ecx@1

  v1 = *(_DWORD *)(a1 - 16);
  JUMPOUT(&loc_100087D0);
}

//----- (10064062) --------------------------------------------------------
int __cdecl SEH_10061240(int a1, int a2, int a3, int a4)
{
  return sub_100278A2((int)&unk_100782B0, a1, a2, a3, a4);
}

//----- (10064070) --------------------------------------------------------
int __usercall sub_10064070@<eax>(int a1@<ebx>, int a2@<edi>)
{
  LPVOID v2; // esi@2

  if ( (unsigned int)dword_10239448 >= 8 )
  {
    v2 = dword_10239434;
    nullsub_6(&dword_10239434);
    sub_10001E40(a1, a2, v2, dword_10239448 + 1);
  }
  dword_10239448 = 7;
  dword_10239444 = 0;
  LOWORD(dword_10239434) = 0;
  return nullsub_1(&dword_10239434);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);
// 10002610: using guessed type _DWORD __stdcall nullsub_6(_DWORD);
// 10239444: using guessed type int dword_10239444;
// 10239448: using guessed type int dword_10239448;

//----- (100640D0) --------------------------------------------------------
int __usercall sub_100640D0@<eax>(int a1@<ebx>)
{
  return sub_100043F0((int)&dword_10239450, a1);
}
// 10239450: using guessed type int dword_10239450;

//----- (100640F0) --------------------------------------------------------
int __thiscall sub_100640F0(int this)
{
  int v1; // ecx@1
  int v2; // ecx@1
  int v3; // ecx@1
  void *v4; // eax@1
  int v6; // [sp+0h] [bp-4h]@1

  v6 = this;
  sub_1000BE50(this, (int)&v6, *(LPVOID *)dword_10239510, dword_10239510);
  nullsub_6(v1);
  nullsub_6(v2);
  v4 = (void *)nullsub_6(v3);
  return sub_1000F409(v4);
}
// 10002610: using guessed type _DWORD __stdcall nullsub_6(_DWORD);

//----- (10064130) --------------------------------------------------------
int __usercall sub_10064130@<eax>(int a1@<ebx>, int a2@<edi>)
{
  LPVOID v2; // esi@2

  if ( (unsigned int)dword_1023952C >= 8 )
  {
    v2 = dword_10239518;
    nullsub_6(&dword_10239518);
    sub_10001E40(a1, a2, v2, dword_1023952C + 1);
  }
  dword_1023952C = 7;
  dword_10239528 = 0;
  LOWORD(dword_10239518) = 0;
  return nullsub_1(&dword_10239518);
}
// 10001440: using guessed type int __thiscall nullsub_1(_DWORD);
// 10002610: using guessed type _DWORD __stdcall nullsub_6(_DWORD);
// 10239528: using guessed type int dword_10239528;
// 1023952C: using guessed type int dword_1023952C;

//----- (10064189) --------------------------------------------------------
void sub_10064189()
{
  struct _RTL_CRITICAL_SECTION *v0; // esi@2

  if ( _InterlockedExchangeAdd((volatile signed __int32 *)&dword_1007A000, 0xFFFFFFFF) < 0 )
  {
    v0 = &stru_1007C080;
    do
    {
      sub_1000F060(v0);
      ++v0;
    }
    while ( (signed int)v0 < (signed int)&dword_1007C140 );
  }
}
// 1007A000: using guessed type int dword_1007A000;
// 1007C140: using guessed type int dword_1007C140;

//----- (10064193) --------------------------------------------------------
void sub_10064193()
{
  DeleteCriticalSection((LPCRITICAL_SECTION)((char *)&unk_1007C4CC + 20));
  if ( *((_DWORD *)&unk_1007C4CC + 11) )
  {
    sub_1002C0EC(*((LPVOID *)&unk_1007C4CC + 11));
    *((_DWORD *)&unk_1007C4CC + 11) = 0;
  }
  *((_DWORD *)&unk_1007C4CC + 12) = 0;
  *((_DWORD *)&unk_1007C4CC + 13) = 0;
}
// 10064193: could not find valid save-restore pair for esi

//----- (1006419D) --------------------------------------------------------
int sub_1006419D()
{
  LPVOID v0; // esi@1
  int result; // eax@2

  v0 = dword_1007C510;
  if ( dword_1007C510 )
  {
    sub_10011C27(dword_1007C510);
    result = sub_1000F417(v0);
    dword_1007C510 = 0;
  }
  return result;
}

//----- (100641A7) --------------------------------------------------------
void sub_100641A7()
{
  JUMPOUT(dword_1007CCFC, 0, sub_1003AFB3);
}
// 1007CCFC: using guessed type int dword_1007CCFC;

#error "There were 42 decompilation failure(s) on 2906 function(s)"
